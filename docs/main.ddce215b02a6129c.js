"use strict";(self.webpackChunkmyAngular=self.webpackChunkmyAngular||[]).push([[179],{356:(If,Wp,Lf)=>{var Y2={};function Xt(n){return"function"==typeof n}function Rf(n){const t=n(i=>{Error.call(i),i.stack=(new Error).stack});return t.prototype=Object.create(Error.prototype),t.prototype.constructor=t,t}Lf.r(Y2),Lf.d(Y2,{AsyncCompress:()=>WD,AsyncDecompress:()=>r1e,AsyncDeflate:()=>BD,AsyncGunzip:()=>$D,AsyncGzip:()=>WD,AsyncInflate:()=>Cp,AsyncUnzipInflate:()=>m1e,AsyncUnzlib:()=>ZD,AsyncZipDeflate:()=>u1e,AsyncZlib:()=>n1e,Compress:()=>bf,DecodeUTF8:()=>a1e,Decompress:()=>YD,Deflate:()=>ts,EncodeUTF8:()=>c1e,Gunzip:()=>wf,Gzip:()=>bf,Inflate:()=>Ei,Unzip:()=>g1e,UnzipInflate:()=>p1e,UnzipPassThrough:()=>rA,Unzlib:()=>Sf,Zip:()=>f1e,ZipDeflate:()=>l1e,ZipPassThrough:()=>x3,Zlib:()=>Ep,compress:()=>jD,compressSync:()=>Mf,decompress:()=>s1e,decompressSync:()=>o1e,deflate:()=>GD,deflateSync:()=>y3,gunzip:()=>qD,gunzipSync:()=>Cf,gzip:()=>jD,gzipSync:()=>Mf,inflate:()=>Sp,inflateSync:()=>W2,strFromU8:()=>Ip,strToU8:()=>Lo,unzip:()=>v1e,unzipSync:()=>y1e,unzlib:()=>XD,unzlibSync:()=>_3,zip:()=>h1e,zipSync:()=>d1e,zlib:()=>i1e,zlibSync:()=>Dp});const Pf=Rf(n=>function(t){n(this),this.message=t?`${t.length} errors occurred during unsubscription:\n${t.map((i,r)=>`${r+1}) ${i.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=t});function I3(n,e){if(n){const t=n.indexOf(e);0<=t&&n.splice(t,1)}}class Ai{constructor(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let e;if(!this.closed){this.closed=!0;const{_parentage:t}=this;if(t)if(this._parentage=null,Array.isArray(t))for(const s of t)s.remove(this);else t.remove(this);const{initialTeardown:i}=this;if(Xt(i))try{i()}catch(s){e=s instanceof Pf?s.errors:[s]}const{_finalizers:r}=this;if(r){this._finalizers=null;for(const s of r)try{qp(s)}catch(o){e=e??[],o instanceof Pf?e=[...e,...o.errors]:e.push(o)}}if(e)throw new Pf(e)}}add(e){var t;if(e&&e!==this)if(this.closed)qp(e);else{if(e instanceof Ai){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=null!==(t=this._finalizers)&&void 0!==t?t:[]).push(e)}}_hasParent(e){const{_parentage:t}=this;return t===e||Array.isArray(t)&&t.includes(e)}_addParent(e){const{_parentage:t}=this;this._parentage=Array.isArray(t)?(t.push(e),t):t?[t,e]:e}_removeParent(e){const{_parentage:t}=this;t===e?this._parentage=null:Array.isArray(t)&&I3(t,e)}remove(e){const{_finalizers:t}=this;t&&I3(t,e),e instanceof Ai&&e._removeParent(this)}}Ai.EMPTY=(()=>{const n=new Ai;return n.closed=!0,n})();const jp=Ai.EMPTY;function $p(n){return n instanceof Ai||n&&"closed"in n&&Xt(n.remove)&&Xt(n.add)&&Xt(n.unsubscribe)}function qp(n){Xt(n)?n():n.unsubscribe()}const Po={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1},L3={setTimeout(n,e,...t){const{delegate:i}=L3;return i?.setTimeout?i.setTimeout(n,e,...t):setTimeout(n,e,...t)},clearTimeout(n){const{delegate:e}=L3;return(e?.clearTimeout||clearTimeout)(n)},delegate:void 0};function Zp(n){L3.setTimeout(()=>{const{onUnhandledError:e}=Po;if(!e)throw n;e(n)})}function zf(){}const _A=Nf("C",void 0,void 0);function Nf(n,e,t){return{kind:n,value:e,error:t}}let zo=null;function R3(n){if(Po.useDeprecatedSynchronousErrorHandling){const e=!zo;if(e&&(zo={errorThrown:!1,error:null}),n(),e){const{errorThrown:t,error:i}=zo;if(zo=null,t)throw i}}else n()}class Ff extends Ai{constructor(e){super(),this.isStopped=!1,e?(this.destination=e,$p(e)&&e.add(this)):this.destination=EA}static create(e,t,i){return new K2(e,t,i)}next(e){this.isStopped?kf(function bA(n){return Nf("N",n,void 0)}(e),this):this._next(e)}error(e){this.isStopped?kf(function xA(n){return Nf("E",void 0,n)}(e),this):(this.isStopped=!0,this._error(e))}complete(){this.isStopped?kf(_A,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(e){this.destination.next(e)}_error(e){try{this.destination.error(e)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const wA=Function.prototype.bind;function Of(n,e){return wA.call(n,e)}class CA{constructor(e){this.partialObserver=e}next(e){const{partialObserver:t}=this;if(t.next)try{t.next(e)}catch(i){P3(i)}}error(e){const{partialObserver:t}=this;if(t.error)try{t.error(e)}catch(i){P3(i)}else P3(e)}complete(){const{partialObserver:e}=this;if(e.complete)try{e.complete()}catch(t){P3(t)}}}class K2 extends Ff{constructor(e,t,i){let r;if(super(),Xt(e)||!e)r={next:e??void 0,error:t??void 0,complete:i??void 0};else{let s;this&&Po.useDeprecatedNextContext?(s=Object.create(e),s.unsubscribe=()=>this.unsubscribe(),r={next:e.next&&Of(e.next,s),error:e.error&&Of(e.error,s),complete:e.complete&&Of(e.complete,s)}):r=e}this.destination=new CA(r)}}function P3(n){Po.useDeprecatedSynchronousErrorHandling?function MA(n){Po.useDeprecatedSynchronousErrorHandling&&zo&&(zo.errorThrown=!0,zo.error=n)}(n):Zp(n)}function kf(n,e){const{onStoppedNotification:t}=Po;t&&L3.setTimeout(()=>t(n,e))}const EA={closed:!0,next:zf,error:function SA(n){throw n},complete:zf},Vf="function"==typeof Symbol&&Symbol.observable||"@@observable";function ns(n){return n}function Xp(n){return 0===n.length?ns:1===n.length?n[0]:function(t){return n.reduce((i,r)=>r(i),t)}}let en=(()=>{class n{constructor(t){t&&(this._subscribe=t)}lift(t){const i=new n;return i.source=this,i.operator=t,i}subscribe(t,i,r){const s=function TA(n){return n&&n instanceof Ff||function AA(n){return n&&Xt(n.next)&&Xt(n.error)&&Xt(n.complete)}(n)&&$p(n)}(t)?t:new K2(t,i,r);return R3(()=>{const{operator:o,source:a}=this;s.add(o?o.call(s,a):a?this._subscribe(s):this._trySubscribe(s))}),s}_trySubscribe(t){try{return this._subscribe(t)}catch(i){t.error(i)}}forEach(t,i){return new(i=Yp(i))((r,s)=>{const o=new K2({next:a=>{try{t(a)}catch(c){s(c),o.unsubscribe()}},error:s,complete:r});this.subscribe(o)})}_subscribe(t){var i;return null===(i=this.source)||void 0===i?void 0:i.subscribe(t)}[Vf](){return this}pipe(...t){return Xp(t)(this)}toPromise(t){return new(t=Yp(t))((i,r)=>{let s;this.subscribe(o=>s=o,o=>r(o),()=>i(s))})}}return n.create=e=>new n(e),n})();function Yp(n){var e;return null!==(e=n??Po.Promise)&&void 0!==e?e:Promise}const IA=Rf(n=>function(){n(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});let Fr=(()=>{class n extends en{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(t){const i=new Kp(this,this);return i.operator=t,i}_throwIfClosed(){if(this.closed)throw new IA}next(t){R3(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const i of this.currentObservers)i.next(t)}})}error(t){R3(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=t;const{observers:i}=this;for(;i.length;)i.shift().error(t)}})}complete(){R3(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:t}=this;for(;t.length;)t.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var t;return(null===(t=this.observers)||void 0===t?void 0:t.length)>0}_trySubscribe(t){return this._throwIfClosed(),super._trySubscribe(t)}_subscribe(t){return this._throwIfClosed(),this._checkFinalizedStatuses(t),this._innerSubscribe(t)}_innerSubscribe(t){const{hasError:i,isStopped:r,observers:s}=this;return i||r?jp:(this.currentObservers=null,s.push(t),new Ai(()=>{this.currentObservers=null,I3(s,t)}))}_checkFinalizedStatuses(t){const{hasError:i,thrownError:r,isStopped:s}=this;i?t.error(r):s&&t.complete()}asObservable(){const t=new en;return t.source=this,t}}return n.create=(e,t)=>new Kp(e,t),n})();class Kp extends Fr{constructor(e,t){super(),this.destination=e,this.source=t}next(e){var t,i;null===(i=null===(t=this.destination)||void 0===t?void 0:t.next)||void 0===i||i.call(t,e)}error(e){var t,i;null===(i=null===(t=this.destination)||void 0===t?void 0:t.error)||void 0===i||i.call(t,e)}complete(){var e,t;null===(t=null===(e=this.destination)||void 0===e?void 0:e.complete)||void 0===t||t.call(e)}_subscribe(e){var t,i;return null!==(i=null===(t=this.source)||void 0===t?void 0:t.subscribe(e))&&void 0!==i?i:jp}}function Jp(n){return Xt(n?.lift)}function yn(n){return e=>{if(Jp(e))return e.lift(function(t){try{return n(t,this)}catch(i){this.error(i)}});throw new TypeError("Unable to lift unknown Observable type")}}function ln(n,e,t,i,r){return new LA(n,e,t,i,r)}class LA extends Ff{constructor(e,t,i,r,s,o){super(e),this.onFinalize=s,this.shouldUnsubscribe=o,this._next=t?function(a){try{t(a)}catch(c){e.error(c)}}:super._next,this._error=r?function(a){try{r(a)}catch(c){e.error(c)}finally{this.unsubscribe()}}:super._error,this._complete=i?function(){try{i()}catch(a){e.error(a)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var e;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:t}=this;super.unsubscribe(),!t&&(null===(e=this.onFinalize)||void 0===e||e.call(this))}}}function lt(n,e){return yn((t,i)=>{let r=0;t.subscribe(ln(i,s=>{i.next(n.call(e,s,r++))}))})}function No(n){return this instanceof No?(this.v=n,this):new No(n)}function zA(n,e,t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r,i=t.apply(n,e||[]),s=[];return r={},o("next"),o("throw"),o("return"),r[Symbol.asyncIterator]=function(){return this},r;function o(h){i[h]&&(r[h]=function(d){return new Promise(function(p,m){s.push([h,d,p,m])>1||a(h,d)})})}function a(h,d){try{!function c(h){h.value instanceof No?Promise.resolve(h.value.v).then(l,u):f(s[0][2],h)}(i[h](d))}catch(p){f(s[0][3],p)}}function l(h){a("next",h)}function u(h){a("throw",h)}function f(h,d){h(d),s.shift(),s.length&&a(s[0][0],s[0][1])}}function NA(n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t,e=n[Symbol.asyncIterator];return e?e.call(n):(n=function t9(n){var e="function"==typeof Symbol&&Symbol.iterator,t=e&&n[e],i=0;if(t)return t.call(n);if(n&&"number"==typeof n.length)return{next:function(){return n&&i>=n.length&&(n=void 0),{value:n&&n[i++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}(n),t={},i("next"),i("throw"),i("return"),t[Symbol.asyncIterator]=function(){return this},t);function i(s){t[s]=n[s]&&function(o){return new Promise(function(a,c){!function r(s,o,a,c){Promise.resolve(c).then(function(l){s({value:l,done:a})},o)}(a,c,(o=n[s](o)).done,o.value)})}}}const n9=n=>n&&"number"==typeof n.length&&"function"!=typeof n;function i9(n){return Xt(n?.then)}function r9(n){return Xt(n[Vf])}function s9(n){return Symbol.asyncIterator&&Xt(n?.[Symbol.asyncIterator])}function o9(n){return new TypeError(`You provided ${null!==n&&"object"==typeof n?"an invalid object":`'${n}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}const a9=function OA(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}();function c9(n){return Xt(n?.[a9])}function l9(n){return zA(this,arguments,function*(){const t=n.getReader();try{for(;;){const{value:i,done:r}=yield No(t.read());if(r)return yield No(void 0);yield yield No(i)}}finally{t.releaseLock()}})}function u9(n){return Xt(n?.getReader)}function pr(n){if(n instanceof en)return n;if(null!=n){if(r9(n))return function kA(n){return new en(e=>{const t=n[Vf]();if(Xt(t.subscribe))return t.subscribe(e);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(n);if(n9(n))return function VA(n){return new en(e=>{for(let t=0;t<n.length&&!e.closed;t++)e.next(n[t]);e.complete()})}(n);if(i9(n))return function HA(n){return new en(e=>{n.then(t=>{e.closed||(e.next(t),e.complete())},t=>e.error(t)).then(null,Zp)})}(n);if(s9(n))return f9(n);if(c9(n))return function UA(n){return new en(e=>{for(const t of n)if(e.next(t),e.closed)return;e.complete()})}(n);if(u9(n))return function BA(n){return f9(l9(n))}(n)}throw o9(n)}function f9(n){return new en(e=>{(function GA(n,e){var t,i,r,s;return function RA(n,e,t,i){return new(t||(t=Promise))(function(s,o){function a(u){try{l(i.next(u))}catch(f){o(f)}}function c(u){try{l(i.throw(u))}catch(f){o(f)}}function l(u){u.done?s(u.value):function r(s){return s instanceof t?s:new t(function(o){o(s)})}(u.value).then(a,c)}l((i=i.apply(n,e||[])).next())})}(this,void 0,void 0,function*(){try{for(t=NA(n);!(i=yield t.next()).done;)if(e.next(i.value),e.closed)return}catch(o){r={error:o}}finally{try{i&&!i.done&&(s=t.return)&&(yield s.call(t))}finally{if(r)throw r.error}}e.complete()})})(n,e).catch(t=>e.error(t))})}function is(n,e,t,i=0,r=!1){const s=e.schedule(function(){t(),r?n.add(this.schedule(null,i)):this.unsubscribe()},i);if(n.add(s),!r)return s}function Bn(n,e,t=1/0){return Xt(e)?Bn((i,r)=>lt((s,o)=>e(i,s,r,o))(pr(n(i,r))),t):("number"==typeof e&&(t=e),yn((i,r)=>function WA(n,e,t,i,r,s,o,a){const c=[];let l=0,u=0,f=!1;const h=()=>{f&&!c.length&&!l&&e.complete()},d=m=>l<i?p(m):c.push(m),p=m=>{s&&e.next(m),l++;let g=!1;pr(t(m,u++)).subscribe(ln(e,v=>{r?.(v),s?d(v):e.next(v)},()=>{g=!0},void 0,()=>{if(g)try{for(l--;c.length&&l<i;){const v=c.shift();o?is(e,o,()=>p(v)):p(v)}h()}catch(v){e.error(v)}}))};return n.subscribe(ln(e,d,()=>{f=!0,h()})),()=>{a?.()}}(i,r,n,t)))}function Wa(n=1/0){return Bn(ns,n)}const rs=new en(n=>n.complete());function Uf(n){return n[n.length-1]}function h9(n){return Xt(Uf(n))?n.pop():void 0}function J2(n){return function $A(n){return n&&Xt(n.schedule)}(Uf(n))?n.pop():void 0}function Bf(n,e=0){return yn((t,i)=>{t.subscribe(ln(i,r=>is(i,n,()=>i.next(r),e),()=>is(i,n,()=>i.complete(),e),r=>is(i,n,()=>i.error(r),e)))})}function d9(n,e=0){return yn((t,i)=>{i.add(n.schedule(()=>t.subscribe(i),e))})}function p9(n,e){if(!n)throw new Error("Iterable cannot be null");return new en(t=>{is(t,e,()=>{const i=n[Symbol.asyncIterator]();is(t,e,()=>{i.next().then(r=>{r.done?t.complete():t.next(r.value)})},0,!0)})})}function En(n,e){return e?function QA(n,e){if(null!=n){if(r9(n))return function ZA(n,e){return pr(n).pipe(d9(e),Bf(e))}(n,e);if(n9(n))return function YA(n,e){return new en(t=>{let i=0;return e.schedule(function(){i===n.length?t.complete():(t.next(n[i++]),t.closed||this.schedule())})})}(n,e);if(i9(n))return function XA(n,e){return pr(n).pipe(d9(e),Bf(e))}(n,e);if(s9(n))return p9(n,e);if(c9(n))return function KA(n,e){return new en(t=>{let i;return is(t,e,()=>{i=n[a9](),is(t,e,()=>{let r,s;try{({value:r,done:s}=i.next())}catch(o){return void t.error(o)}s?t.complete():t.next(r)},0,!0)}),()=>Xt(i?.return)&&i.return()})}(n,e);if(u9(n))return function JA(n,e){return p9(l9(n),e)}(n,e)}throw o9(n)}(n,e):pr(n)}function Gf(n,e,...t){if(!0===e)return void n();if(!1===e)return;const i=new K2({next:()=>{i.unsubscribe(),n()}});return e(...t).subscribe(i)}function Pt(n){for(let e in n)if(n[e]===Pt)return e;throw Error("Could not find renamed property on target object.")}function zt(n){if("string"==typeof n)return n;if(Array.isArray(n))return"["+n.map(zt).join(", ")+"]";if(null==n)return""+n;if(n.overriddenName)return`${n.overriddenName}`;if(n.name)return`${n.name}`;const e=n.toString();if(null==e)return""+e;const t=e.indexOf("\n");return-1===t?e:e.substring(0,t)}function jf(n,e){return null==n||""===n?null===e?"":e:null==e||""===e?n:n+" "+e}const nT=Pt({__forward_ref__:Pt});function $f(n){return n.__forward_ref__=$f,n.toString=function(){return zt(this())},n}function Ve(n){return qf(n)?n():n}function qf(n){return"function"==typeof n&&n.hasOwnProperty(nT)&&n.__forward_ref__===$f}function Zf(n){return n&&!!n.\u0275providers}const z3="https://g.co/ng/security#xss";class de extends Error{constructor(e,t){super(function N3(n,e){return`NG0${Math.abs(n)}${e?": "+e.trim():""}`}(e,t)),this.code=e}}function Ye(n){return"string"==typeof n?n:null==n?"":String(n)}function F3(n,e){throw new de(-201,!1)}function qi(n,e){null==n&&function Et(n,e,t,i){throw new Error(`ASSERTION ERROR: ${n}`+(null==i?"":` [Expected=> ${t} ${i} ${e} <=Actual]`))}(e,n,null,"!=")}function Te(n){return{token:n.token,providedIn:n.providedIn||null,factory:n.factory,value:void 0}}function Zi(n){return{providers:n.providers||[],imports:n.imports||[]}}function O3(n){return m9(n,k3)||m9(n,v9)}function m9(n,e){return n.hasOwnProperty(e)?n[e]:null}function g9(n){return n&&(n.hasOwnProperty(Xf)||n.hasOwnProperty(fT))?n[Xf]:null}const k3=Pt({\u0275prov:Pt}),Xf=Pt({\u0275inj:Pt}),v9=Pt({ngInjectableDef:Pt}),fT=Pt({ngInjectorDef:Pt});var He=(()=>((He=He||{})[He.Default=0]="Default",He[He.Host=1]="Host",He[He.Self=2]="Self",He[He.SkipSelf=4]="SkipSelf",He[He.Optional=8]="Optional",He))();let Yf;function Xi(n){const e=Yf;return Yf=n,e}function y9(n,e,t){const i=O3(n);return i&&"root"==i.providedIn?void 0===i.value?i.value=i.factory():i.value:t&He.Optional?null:void 0!==e?e:void F3(zt(n))}const Ft=(()=>typeof globalThis<"u"&&globalThis||typeof global<"u"&&global||typeof window<"u"&&window||typeof self<"u"&&typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&self)(),Q2={},Kf="__NG_DI_FLAG__",V3="ngTempTokenPath",pT=/\n/gm,_9="__source";let ec;function ja(n){const e=ec;return ec=n,e}function gT(n,e=He.Default){if(void 0===ec)throw new de(-203,!1);return null===ec?y9(n,void 0,e):ec.get(n,e&He.Optional?null:void 0,e)}function he(n,e=He.Default){return(function hT(){return Yf}()||gT)(Ve(n),e)}function ze(n,e=He.Default){return he(n,H3(e))}function H3(n){return typeof n>"u"||"number"==typeof n?n:0|(n.optional&&8)|(n.host&&1)|(n.self&&2)|(n.skipSelf&&4)}function Jf(n){const e=[];for(let t=0;t<n.length;t++){const i=Ve(n[t]);if(Array.isArray(i)){if(0===i.length)throw new de(900,!1);let r,s=He.Default;for(let o=0;o<i.length;o++){const a=i[o],c=vT(a);"number"==typeof c?-1===c?r=a.token:s|=c:r=a}e.push(he(r,s))}else e.push(he(i))}return e}function tc(n,e){return n[Kf]=e,n.prototype[Kf]=e,n}function vT(n){return n[Kf]}function $s(n){return{toString:n}.toString()}var mr=(()=>((mr=mr||{})[mr.OnPush=0]="OnPush",mr[mr.Default=1]="Default",mr))(),Or=(()=>{return(n=Or||(Or={}))[n.Emulated=0]="Emulated",n[n.None=2]="None",n[n.ShadowDom=3]="ShadowDom",Or;var n})();const ss={},Ct=[],U3=Pt({\u0275cmp:Pt}),Qf=Pt({\u0275dir:Pt}),e5=Pt({\u0275pipe:Pt}),b9=Pt({\u0275mod:Pt}),os=Pt({\u0275fac:Pt}),nc=Pt({__NG_ELEMENT_ID__:Pt});let xT=0;function xi(n){return $s(()=>{const t=!0===n.standalone,i={},r={type:n.type,providersResolver:null,decls:n.decls,vars:n.vars,factory:null,template:n.template||null,consts:n.consts||null,ngContentSelectors:n.ngContentSelectors,hostBindings:n.hostBindings||null,hostVars:n.hostVars||0,hostAttrs:n.hostAttrs||null,contentQueries:n.contentQueries||null,declaredInputs:i,inputs:null,outputs:null,exportAs:n.exportAs||null,onPush:n.changeDetection===mr.OnPush,directiveDefs:null,pipeDefs:null,standalone:t,dependencies:t&&n.dependencies||null,getStandaloneInjector:null,selectors:n.selectors||Ct,viewQuery:n.viewQuery||null,features:n.features||null,data:n.data||{},encapsulation:n.encapsulation||Or.Emulated,id:"c"+xT++,styles:n.styles||Ct,_:null,setInput:null,schemas:n.schemas||null,tView:null,findHostDirectiveDefs:null,hostDirectives:null},s=n.dependencies,o=n.features;return r.inputs=C9(n.inputs,i),r.outputs=C9(n.outputs),o&&o.forEach(a=>a(r)),r.directiveDefs=s?()=>("function"==typeof s?s():s).map(M9).filter(w9):null,r.pipeDefs=s?()=>("function"==typeof s?s():s).map(ri).filter(w9):null,r})}function M9(n){return Dt(n)||qn(n)}function w9(n){return null!==n}function gr(n){return $s(()=>({type:n.type,bootstrap:n.bootstrap||Ct,declarations:n.declarations||Ct,imports:n.imports||Ct,exports:n.exports||Ct,transitiveCompileScopes:null,schemas:n.schemas||null,id:n.id||null}))}function C9(n,e){if(null==n)return ss;const t={};for(const i in n)if(n.hasOwnProperty(i)){let r=n[i],s=r;Array.isArray(r)&&(s=r[1],r=r[0]),t[r]=i,e&&(e[r]=s)}return t}const $n=xi;function bi(n){return{type:n.type,name:n.name,factory:null,pure:!1!==n.pure,standalone:!0===n.standalone,onDestroy:n.type.prototype.ngOnDestroy||null}}function Dt(n){return n[U3]||null}function qn(n){return n[Qf]||null}function ri(n){return n[e5]||null}function Ii(n,e){const t=n[b9]||null;if(!t&&!0===e)throw new Error(`Type ${zt(n)} does not have '\u0275mod' property.`);return t}function Li(n){return Array.isArray(n)&&"object"==typeof n[1]}function yr(n){return Array.isArray(n)&&!0===n[1]}function i5(n){return 0!=(4&n.flags)}function oc(n){return n.componentOffset>-1}function $3(n){return 1==(1&n.flags)}function _r(n){return null!==n.template}function wT(n){return 0!=(256&n[2])}function Oo(n,e){return n.hasOwnProperty(os)?n[os]:null}class ET{constructor(e,t,i){this.previousValue=e,this.currentValue=t,this.firstChange=i}isFirstChange(){return this.firstChange}}function Vr(){return I9}function I9(n){return n.type.prototype.ngOnChanges&&(n.setInput=AT),DT}function DT(){const n=R9(this),e=n?.current;if(e){const t=n.previous;if(t===ss)n.previous=e;else for(let i in e)t[i]=e[i];n.current=null,this.ngOnChanges(e)}}function AT(n,e,t,i){const r=this.declaredInputs[t],s=R9(n)||function TT(n,e){return n[L9]=e}(n,{previous:ss,current:null}),o=s.current||(s.current={}),a=s.previous,c=a[r];o[r]=new ET(c&&c.currentValue,e,a===ss),n[i]=e}Vr.ngInherit=!0;const L9="__ngSimpleChanges__";function R9(n){return n[L9]||null}function Gn(n){for(;Array.isArray(n);)n=n[0];return n}function Ri(n,e){return Gn(e[n.index])}function N9(n,e){return n.data[e]}function Pi(n,e){const t=e[n];return Li(t)?t:t[0]}function Z3(n){return 64==(64&n[2])}function qs(n,e){return null==e?null:n[e]}function F9(n){n[18]=0}function s5(n,e){n[5]+=e;let t=n,i=n[3];for(;null!==i&&(1===e&&1===t[5]||-1===e&&0===t[5]);)i[5]+=e,t=i,i=i[3]}const Ke={lFrame:$9(null),bindingsEnabled:!0};function k9(){return Ke.bindingsEnabled}function ee(){return Ke.lFrame.lView}function mt(){return Ke.lFrame.tView}function X3(n){return Ke.lFrame.contextLView=n,n[8]}function Y3(n){return Ke.lFrame.contextLView=null,n}function Wn(){let n=V9();for(;null!==n&&64===n.type;)n=n.parent;return n}function V9(){return Ke.lFrame.currentTNode}function Hr(n,e){const t=Ke.lFrame;t.currentTNode=n,t.isParent=e}function o5(){return Ke.lFrame.isParent}function a5(){Ke.lFrame.isParent=!1}function oi(){const n=Ke.lFrame;let e=n.bindingRootIndex;return-1===e&&(e=n.bindingRootIndex=n.tView.bindingStartIndex),e}function Ja(){return Ke.lFrame.bindingIndex++}function BT(n,e){const t=Ke.lFrame;t.bindingIndex=t.bindingRootIndex=n,c5(e)}function c5(n){Ke.lFrame.currentDirectiveIndex=n}function G9(){return Ke.lFrame.currentQueryIndex}function u5(n){Ke.lFrame.currentQueryIndex=n}function WT(n){const e=n[1];return 2===e.type?e.declTNode:1===e.type?n[6]:null}function W9(n,e,t){if(t&He.SkipSelf){let r=e,s=n;for(;!(r=r.parent,null!==r||t&He.Host||(r=WT(s),null===r||(s=s[15],10&r.type))););if(null===r)return!1;e=r,n=s}const i=Ke.lFrame=j9();return i.currentTNode=e,i.lView=n,!0}function f5(n){const e=j9(),t=n[1];Ke.lFrame=e,e.currentTNode=t.firstChild,e.lView=n,e.tView=t,e.contextLView=n,e.bindingIndex=t.bindingStartIndex,e.inI18n=!1}function j9(){const n=Ke.lFrame,e=null===n?null:n.child;return null===e?$9(n):e}function $9(n){const e={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:n,child:null,inI18n:!1};return null!==n&&(n.child=e),e}function q9(){const n=Ke.lFrame;return Ke.lFrame=n.parent,n.currentTNode=null,n.lView=null,n}const Z9=q9;function h5(){const n=q9();n.isParent=!0,n.tView=null,n.selectedIndex=-1,n.contextLView=null,n.elementDepthCount=0,n.currentDirectiveIndex=-1,n.currentNamespace=null,n.bindingRootIndex=-1,n.bindingIndex=-1,n.currentQueryIndex=0}function ai(){return Ke.lFrame.selectedIndex}function ko(n){Ke.lFrame.selectedIndex=n}function Yt(){const n=Ke.lFrame;return N9(n.tView,n.selectedIndex)}function K3(n,e){for(let t=e.directiveStart,i=e.directiveEnd;t<i;t++){const s=n.data[t].type.prototype,{ngAfterContentInit:o,ngAfterContentChecked:a,ngAfterViewInit:c,ngAfterViewChecked:l,ngOnDestroy:u}=s;o&&(n.contentHooks||(n.contentHooks=[])).push(-t,o),a&&((n.contentHooks||(n.contentHooks=[])).push(t,a),(n.contentCheckHooks||(n.contentCheckHooks=[])).push(t,a)),c&&(n.viewHooks||(n.viewHooks=[])).push(-t,c),l&&((n.viewHooks||(n.viewHooks=[])).push(t,l),(n.viewCheckHooks||(n.viewCheckHooks=[])).push(t,l)),null!=u&&(n.destroyHooks||(n.destroyHooks=[])).push(t,u)}}function J3(n,e,t){X9(n,e,3,t)}function Q3(n,e,t,i){(3&n[2])===t&&X9(n,e,t,i)}function d5(n,e){let t=n[2];(3&t)===e&&(t&=2047,t+=1,n[2]=t)}function X9(n,e,t,i){const s=i??-1,o=e.length-1;let a=0;for(let c=void 0!==i?65535&n[18]:0;c<o;c++)if("number"==typeof e[c+1]){if(a=e[c],null!=i&&a>=i)break}else e[c]<0&&(n[18]+=65536),(a<s||-1==s)&&(QT(n,t,e,c),n[18]=(4294901760&n[18])+c+2),c++}function QT(n,e,t,i){const r=t[i]<0,s=t[i+1],a=n[r?-t[i]:t[i]];if(r){if(n[2]>>11<n[18]>>16&&(3&n[2])===e){n[2]+=2048;try{s.call(a)}finally{}}}else try{s.call(a)}finally{}}class cc{constructor(e,t,i){this.factory=e,this.resolving=!1,this.canSeeViewProviders=t,this.injectImpl=i}}function m5(n,e,t){let i=0;for(;i<t.length;){const r=t[i];if("number"==typeof r){if(0!==r)break;i++;const s=t[i++],o=t[i++],a=t[i++];n.setAttribute(e,o,a,s)}else{const s=r,o=t[++i];K9(s)?n.setProperty(e,s,o):n.setAttribute(e,s,o),i++}}return i}function Y9(n){return 3===n||4===n||6===n}function K9(n){return 64===n.charCodeAt(0)}function lc(n,e){if(null!==e&&0!==e.length)if(null===n||0===n.length)n=e.slice();else{let t=-1;for(let i=0;i<e.length;i++){const r=e[i];"number"==typeof r?t=r:0===t||J9(n,t,r,null,-1===t||2===t?e[++i]:null)}}return n}function J9(n,e,t,i,r){let s=0,o=n.length;if(-1===e)o=-1;else for(;s<n.length;){const a=n[s++];if("number"==typeof a){if(a===e){o=-1;break}if(a>e){o=s-1;break}}}for(;s<n.length;){const a=n[s];if("number"==typeof a)break;if(a===t){if(null===i)return void(null!==r&&(n[s+1]=r));if(i===n[s+1])return void(n[s+2]=r)}s++,null!==i&&s++,null!==r&&s++}-1!==o&&(n.splice(o,0,e),s=o+1),n.splice(s++,0,t),null!==i&&n.splice(s++,0,i),null!==r&&n.splice(s++,0,r)}function Q9(n){return-1!==n}function eu(n){return 32767&n}function tu(n,e){let t=function iI(n){return n>>16}(n),i=e;for(;t>0;)i=i[15],t--;return i}let g5=!0;function nu(n){const e=g5;return g5=n,e}let rI=0;const Ur={};function iu(n,e){const t=nm(n,e);if(-1!==t)return t;const i=e[1];i.firstCreatePass&&(n.injectorIndex=e.length,v5(i.data,n),v5(e,null),v5(i.blueprint,null));const r=y5(n,e),s=n.injectorIndex;if(Q9(r)){const o=eu(r),a=tu(r,e),c=a[1].data;for(let l=0;l<8;l++)e[s+l]=a[o+l]|c[o+l]}return e[s+8]=r,s}function v5(n,e){n.push(0,0,0,0,0,0,0,0,e)}function nm(n,e){return-1===n.injectorIndex||n.parent&&n.parent.injectorIndex===n.injectorIndex||null===e[n.injectorIndex+8]?-1:n.injectorIndex}function y5(n,e){if(n.parent&&-1!==n.parent.injectorIndex)return n.parent.injectorIndex;let t=0,i=null,r=e;for(;null!==r;){if(i=lm(r),null===i)return-1;if(t++,r=r[15],-1!==i.injectorIndex)return i.injectorIndex|t<<16}return-1}function _5(n,e,t){!function sI(n,e,t){let i;"string"==typeof t?i=t.charCodeAt(0)||0:t.hasOwnProperty(nc)&&(i=t[nc]),null==i&&(i=t[nc]=rI++);const r=255&i;e.data[n+(r>>5)]|=1<<r}(n,e,t)}function im(n,e,t){if(t&He.Optional||void 0!==n)return n;F3()}function rm(n,e,t,i){if(t&He.Optional&&void 0===i&&(i=null),0==(t&(He.Self|He.Host))){const r=n[9],s=Xi(void 0);try{return r?r.get(e,i,t&He.Optional):y9(e,i,t&He.Optional)}finally{Xi(s)}}return im(i,0,t)}function sm(n,e,t,i=He.Default,r){if(null!==n){if(1024&e[2]){const o=function uI(n,e,t,i,r){let s=n,o=e;for(;null!==s&&null!==o&&1024&o[2]&&!(256&o[2]);){const a=om(s,o,t,i|He.Self,Ur);if(a!==Ur)return a;let c=s.parent;if(!c){const l=o[21];if(l){const u=l.get(t,Ur,i);if(u!==Ur)return u}c=lm(o),o=o[15]}s=c}return r}(n,e,t,i,Ur);if(o!==Ur)return o}const s=om(n,e,t,i,Ur);if(s!==Ur)return s}return rm(e,t,i,r)}function om(n,e,t,i,r){const s=function cI(n){if("string"==typeof n)return n.charCodeAt(0)||0;const e=n.hasOwnProperty(nc)?n[nc]:void 0;return"number"==typeof e?e>=0?255&e:lI:e}(t);if("function"==typeof s){if(!W9(e,n,i))return i&He.Host?im(r,0,i):rm(e,t,i,r);try{const o=s(i);if(null!=o||i&He.Optional)return o;F3()}finally{Z9()}}else if("number"==typeof s){let o=null,a=nm(n,e),c=-1,l=i&He.Host?e[16][6]:null;for((-1===a||i&He.SkipSelf)&&(c=-1===a?y5(n,e):e[a+8],-1!==c&&cm(i,!1)?(o=e[1],a=eu(c),e=tu(c,e)):a=-1);-1!==a;){const u=e[1];if(am(s,a,u.data)){const f=aI(a,e,t,o,i,l);if(f!==Ur)return f}c=e[a+8],-1!==c&&cm(i,e[1].data[a+8]===l)&&am(s,a,e)?(o=u,a=eu(c),e=tu(c,e)):a=-1}}return r}function aI(n,e,t,i,r,s){const o=e[1],a=o.data[n+8],u=ru(a,o,t,null==i?oc(a)&&g5:i!=o&&0!=(3&a.type),r&He.Host&&s===a);return null!==u?Vo(e,o,u,a):Ur}function ru(n,e,t,i,r){const s=n.providerIndexes,o=e.data,a=1048575&s,c=n.directiveStart,u=s>>20,h=r?a+u:n.directiveEnd;for(let d=i?a:a+u;d<h;d++){const p=o[d];if(d<c&&t===p||d>=c&&p.type===t)return d}if(r){const d=o[c];if(d&&_r(d)&&d.type===t)return c}return null}function Vo(n,e,t,i){let r=n[t];const s=e.data;if(function eI(n){return n instanceof cc}(r)){const o=r;o.resolving&&function iT(n,e){const t=e?`. Dependency path: ${e.join(" > ")} > ${n}`:"";throw new de(-200,`Circular dependency in DI detected for ${n}${t}`)}(function St(n){return"function"==typeof n?n.name||n.toString():"object"==typeof n&&null!=n&&"function"==typeof n.type?n.type.name||n.type.toString():Ye(n)}(s[t]));const a=nu(o.canSeeViewProviders);o.resolving=!0;const c=o.injectImpl?Xi(o.injectImpl):null;W9(n,i,He.Default);try{r=n[t]=o.factory(void 0,s,n,i),e.firstCreatePass&&t>=i.directiveStart&&function JT(n,e,t){const{ngOnChanges:i,ngOnInit:r,ngDoCheck:s}=e.type.prototype;if(i){const o=I9(e);(t.preOrderHooks||(t.preOrderHooks=[])).push(n,o),(t.preOrderCheckHooks||(t.preOrderCheckHooks=[])).push(n,o)}r&&(t.preOrderHooks||(t.preOrderHooks=[])).push(0-n,r),s&&((t.preOrderHooks||(t.preOrderHooks=[])).push(n,s),(t.preOrderCheckHooks||(t.preOrderCheckHooks=[])).push(n,s))}(t,s[t],e)}finally{null!==c&&Xi(c),nu(a),o.resolving=!1,Z9()}}return r}function am(n,e,t){return!!(t[e+(n>>5)]&1<<n)}function cm(n,e){return!(n&He.Self||n&He.Host&&e)}class e1{constructor(e,t){this._tNode=e,this._lView=t}get(e,t,i){return sm(this._tNode,this._lView,e,H3(i),t)}}function lI(){return new e1(Wn(),ee())}function x5(n){return $s(()=>{const e=n.prototype.constructor,t=e[os]||b5(e),i=Object.prototype;let r=Object.getPrototypeOf(n.prototype).constructor;for(;r&&r!==i;){const s=r[os]||b5(r);if(s&&s!==t)return s;r=Object.getPrototypeOf(r)}return s=>new s})}function b5(n){return qf(n)?()=>{const e=b5(Ve(n));return e&&e()}:Oo(n)}function lm(n){const e=n[1],t=e.type;return 2===t?e.declTNode:1===t?n[6]:null}const n1="__parameters__";function r1(n,e,t){return $s(()=>{const i=function M5(n){return function(...t){if(n){const i=n(...t);for(const r in i)this[r]=i[r]}}}(e);function r(...s){if(this instanceof r)return i.apply(this,s),this;const o=new r(...s);return a.annotation=o,a;function a(c,l,u){const f=c.hasOwnProperty(n1)?c[n1]:Object.defineProperty(c,n1,{value:[]})[n1];for(;f.length<=u;)f.push(null);return(f[u]=f[u]||[]).push(o),c}}return t&&(r.prototype=Object.create(t.prototype)),r.prototype.ngMetadataName=n,r.annotationCls=r,r})}class ue{constructor(e,t){this._desc=e,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof t?this.__NG_ELEMENT_ID__=t:void 0!==t&&(this.\u0275prov=Te({token:this,providedIn:t.providedIn||"root",factory:t.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}}function Ho(n,e){n.forEach(t=>Array.isArray(t)?Ho(t,e):e(t))}function fm(n,e,t){e>=n.length?n.push(t):n.splice(e,0,t)}function ou(n,e){return e>=n.length-1?n.pop():n.splice(e,1)[0]}function hc(n,e){const t=[];for(let i=0;i<n;i++)t.push(e);return t}const dc=tc(r1("Inject",n=>({token:n})),-1),pc=tc(r1("Optional"),8),mc=tc(r1("SkipSelf"),4);var Mi=(()=>((Mi=Mi||{})[Mi.Important=1]="Important",Mi[Mi.DashCase=2]="DashCase",Mi))();const T5=new Map;let FI=0;const L5="__ngContext__";function Yn(n,e){Li(e)?(n[L5]=e[20],function kI(n){T5.set(n[20],n)}(e)):n[L5]=e}function P5(n,e){return undefined(n,e)}function _c(n){const e=n[3];return yr(e)?e[3]:e}function z5(n){return Rm(n[13])}function N5(n){return Rm(n[4])}function Rm(n){for(;null!==n&&!yr(n);)n=n[4];return n}function a1(n,e,t,i,r){if(null!=i){let s,o=!1;yr(i)?s=i:Li(i)&&(o=!0,i=i[0]);const a=Gn(i);0===n&&null!==t?null==r?km(e,t,a):Uo(e,t,a,r||null,!0):1===n&&null!==t?Uo(e,t,a,r||null,!0):2===n?function B5(n,e,t){const i=uu(n,e);i&&function rL(n,e,t,i){n.removeChild(e,t,i)}(n,i,e,t)}(e,a,o):3===n&&e.destroyNode(a),null!=s&&function aL(n,e,t,i,r){const s=t[7];s!==Gn(t)&&a1(e,n,i,s,r);for(let a=10;a<t.length;a++){const c=t[a];xc(c[1],c,n,e,i,s)}}(e,n,s,t,r)}}function O5(n,e,t){return n.createElement(e,t)}function zm(n,e){const t=n[9],i=t.indexOf(e),r=e[3];512&e[2]&&(e[2]&=-513,s5(r,-1)),t.splice(i,1)}function k5(n,e){if(n.length<=10)return;const t=10+e,i=n[t];if(i){const r=i[17];null!==r&&r!==n&&zm(r,i),e>0&&(n[t-1][4]=i[4]);const s=ou(n,10+e);!function YI(n,e){xc(n,e,e[11],2,null,null),e[0]=null,e[6]=null}(i[1],i);const o=s[19];null!==o&&o.detachView(s[1]),i[3]=null,i[4]=null,i[2]&=-65}return i}function Nm(n,e){if(!(128&e[2])){const t=e[11];t.destroyNode&&xc(n,e,t,3,null,null),function QI(n){let e=n[13];if(!e)return V5(n[1],n);for(;e;){let t=null;if(Li(e))t=e[13];else{const i=e[10];i&&(t=i)}if(!t){for(;e&&!e[4]&&e!==n;)Li(e)&&V5(e[1],e),e=e[3];null===e&&(e=n),Li(e)&&V5(e[1],e),t=e&&e[4]}e=t}}(e)}}function V5(n,e){if(!(128&e[2])){e[2]&=-65,e[2]|=128,function iL(n,e){let t;if(null!=n&&null!=(t=n.destroyHooks))for(let i=0;i<t.length;i+=2){const r=e[t[i]];if(!(r instanceof cc)){const s=t[i+1];if(Array.isArray(s))for(let o=0;o<s.length;o+=2){const a=r[s[o]],c=s[o+1];try{c.call(a)}finally{}}else try{s.call(r)}finally{}}}}(n,e),function nL(n,e){const t=n.cleanup,i=e[7];let r=-1;if(null!==t)for(let s=0;s<t.length-1;s+=2)if("string"==typeof t[s]){const o=t[s+3];o>=0?i[r=o]():i[r=-o].unsubscribe(),s+=2}else{const o=i[r=t[s+1]];t[s].call(o)}if(null!==i){for(let s=r+1;s<i.length;s++)(0,i[s])();e[7]=null}}(n,e),1===e[1].type&&e[11].destroy();const t=e[17];if(null!==t&&yr(e[3])){t!==e[3]&&zm(t,e);const i=e[19];null!==i&&i.detachView(n)}!function VI(n){T5.delete(n[20])}(e)}}function Fm(n,e,t){return function Om(n,e,t){let i=e;for(;null!==i&&40&i.type;)i=(e=i).parent;if(null===i)return t[0];{const{componentOffset:r}=i;if(r>-1){const{encapsulation:s}=n.data[i.directiveStart+r];if(s===Or.None||s===Or.Emulated)return null}return Ri(i,t)}}(n,e.parent,t)}function Uo(n,e,t,i,r){n.insertBefore(e,t,i,r)}function km(n,e,t){n.appendChild(e,t)}function Vm(n,e,t,i,r){null!==i?Uo(n,e,t,i,r):km(n,e,t)}function uu(n,e){return n.parentNode(e)}function Hm(n,e,t){return Bm(n,e,t)}let du,j5,pu,Bm=function Um(n,e,t){return 40&n.type?Ri(n,t):null};function fu(n,e,t,i){const r=Fm(n,i,e),s=e[11],a=Hm(i.parent||e[6],i,e);if(null!=r)if(Array.isArray(t))for(let c=0;c<t.length;c++)Vm(s,r,t[c],a,!1);else Vm(s,r,t,a,!1)}function hu(n,e){if(null!==e){const t=e.type;if(3&t)return Ri(e,n);if(4&t)return U5(-1,n[e.index]);if(8&t){const i=e.child;if(null!==i)return hu(n,i);{const r=n[e.index];return yr(r)?U5(-1,r):Gn(r)}}if(32&t)return P5(e,n)()||Gn(n[e.index]);{const i=Wm(n,e);return null!==i?Array.isArray(i)?i[0]:hu(_c(n[16]),i):hu(n,e.next)}}return null}function Wm(n,e){return null!==e?n[16][6].projection[e.projection]:null}function U5(n,e){const t=10+n+1;if(t<e.length){const i=e[t],r=i[1].firstChild;if(null!==r)return hu(i,r)}return e[7]}function G5(n,e,t,i,r,s,o){for(;null!=t;){const a=i[t.index],c=t.type;if(o&&0===e&&(a&&Yn(Gn(a),i),t.flags|=2),32!=(32&t.flags))if(8&c)G5(n,e,t.child,i,r,s,!1),a1(e,n,r,a,s);else if(32&c){const l=P5(t,i);let u;for(;u=l();)a1(e,n,r,u,s);a1(e,n,r,a,s)}else 16&c?jm(n,e,i,t,r,s):a1(e,n,r,a,s);t=o?t.projectionNext:t.next}}function xc(n,e,t,i,r,s){G5(t,i,n.firstChild,e,r,s,!1)}function jm(n,e,t,i,r,s){const o=t[16],c=o[6].projection[i.projection];if(Array.isArray(c))for(let l=0;l<c.length;l++)a1(e,n,r,c[l],s);else G5(n,e,c,o[3],r,s,!0)}function $m(n,e,t){""===t?n.removeAttribute(e,"class"):n.setAttribute(e,"class",t)}function qm(n,e,t){const{mergedAttrs:i,classes:r,styles:s}=t;null!==i&&m5(n,e,i),null!==r&&$m(n,e,r),null!==s&&function lL(n,e,t){n.setAttribute(e,"style",t)}(n,e,s)}function Bo(n){return function W5(){if(void 0===du&&(du=null,Ft.trustedTypes))try{du=Ft.trustedTypes.createPolicy("angular",{createHTML:n=>n,createScript:n=>n,createScriptURL:n=>n})}catch{}return du}()?.createHTML(n)||n}function Xm(n){return function $5(){if(void 0===pu&&(pu=null,Ft.trustedTypes))try{pu=Ft.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:n=>n,createScript:n=>n,createScriptURL:n=>n})}catch{}return pu}()?.createHTML(n)||n}class Go{constructor(e){this.changingThisBreaksApplicationSecurity=e}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${z3})`}}class pL extends Go{getTypeName(){return"HTML"}}class mL extends Go{getTypeName(){return"Style"}}class gL extends Go{getTypeName(){return"Script"}}class vL extends Go{getTypeName(){return"URL"}}class yL extends Go{getTypeName(){return"ResourceURL"}}function Ni(n){return n instanceof Go?n.changingThisBreaksApplicationSecurity:n}function Br(n,e){const t=function _L(n){return n instanceof Go&&n.getTypeName()||null}(n);if(null!=t&&t!==e){if("ResourceURL"===t&&"URL"===e)return!0;throw new Error(`Required a safe ${e}, got a ${t} (see ${z3})`)}return t===e}class SL{constructor(e){this.inertDocumentHelper=e}getInertBodyElement(e){e="<body><remove></remove>"+e;try{const t=(new window.DOMParser).parseFromString(Bo(e),"text/html").body;return null===t?this.inertDocumentHelper.getInertBodyElement(e):(t.removeChild(t.firstChild),t)}catch{return null}}}class EL{constructor(e){if(this.defaultDoc=e,this.inertDocument=this.defaultDoc.implementation.createHTMLDocument("sanitization-inert"),null==this.inertDocument.body){const t=this.inertDocument.createElement("html");this.inertDocument.appendChild(t);const i=this.inertDocument.createElement("body");t.appendChild(i)}}getInertBodyElement(e){const t=this.inertDocument.createElement("template");if("content"in t)return t.innerHTML=Bo(e),t;const i=this.inertDocument.createElement("body");return i.innerHTML=Bo(e),this.defaultDoc.documentMode&&this.stripCustomNsAttrs(i),i}stripCustomNsAttrs(e){const t=e.attributes;for(let r=t.length-1;0<r;r--){const o=t.item(r).name;("xmlns:ns1"===o||0===o.indexOf("ns1:"))&&e.removeAttribute(o)}let i=e.firstChild;for(;i;)i.nodeType===Node.ELEMENT_NODE&&this.stripCustomNsAttrs(i),i=i.nextSibling}}const AL=/^(?:(?:https?|mailto|data|ftp|tel|file|sms):|[^&:/?#]*(?:[/?#]|$))/gi;function mu(n){return(n=String(n)).match(AL)?n:"unsafe:"+n}function us(n){const e={};for(const t of n.split(","))e[t]=!0;return e}function bc(...n){const e={};for(const t of n)for(const i in t)t.hasOwnProperty(i)&&(e[i]=!0);return e}const Qm=us("area,br,col,hr,img,wbr"),eg=us("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),tg=us("rp,rt"),q5=bc(Qm,bc(eg,us("address,article,aside,blockquote,caption,center,del,details,dialog,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,main,map,menu,nav,ol,pre,section,summary,table,ul")),bc(tg,us("a,abbr,acronym,audio,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,picture,q,ruby,rp,rt,s,samp,small,source,span,strike,strong,sub,sup,time,track,tt,u,var,video")),bc(tg,eg)),Z5=us("background,cite,href,itemtype,longdesc,poster,src,xlink:href"),ng=bc(Z5,us("abbr,accesskey,align,alt,autoplay,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,controls,coords,datetime,default,dir,download,face,headers,height,hidden,hreflang,hspace,ismap,itemscope,itemprop,kind,label,lang,language,loop,media,muted,nohref,nowrap,open,preload,rel,rev,role,rows,rowspan,rules,scope,scrolling,shape,size,sizes,span,srclang,srcset,start,summary,tabindex,target,title,translate,type,usemap,valign,value,vspace,width"),us("aria-activedescendant,aria-atomic,aria-autocomplete,aria-busy,aria-checked,aria-colcount,aria-colindex,aria-colspan,aria-controls,aria-current,aria-describedby,aria-details,aria-disabled,aria-dropeffect,aria-errormessage,aria-expanded,aria-flowto,aria-grabbed,aria-haspopup,aria-hidden,aria-invalid,aria-keyshortcuts,aria-label,aria-labelledby,aria-level,aria-live,aria-modal,aria-multiline,aria-multiselectable,aria-orientation,aria-owns,aria-placeholder,aria-posinset,aria-pressed,aria-readonly,aria-relevant,aria-required,aria-roledescription,aria-rowcount,aria-rowindex,aria-rowspan,aria-selected,aria-setsize,aria-sort,aria-valuemax,aria-valuemin,aria-valuenow,aria-valuetext")),TL=us("script,style,template");class IL{constructor(){this.sanitizedSomething=!1,this.buf=[]}sanitizeChildren(e){let t=e.firstChild,i=!0;for(;t;)if(t.nodeType===Node.ELEMENT_NODE?i=this.startElement(t):t.nodeType===Node.TEXT_NODE?this.chars(t.nodeValue):this.sanitizedSomething=!0,i&&t.firstChild)t=t.firstChild;else for(;t;){t.nodeType===Node.ELEMENT_NODE&&this.endElement(t);let r=this.checkClobberedElement(t,t.nextSibling);if(r){t=r;break}t=this.checkClobberedElement(t,t.parentNode)}return this.buf.join("")}startElement(e){const t=e.nodeName.toLowerCase();if(!q5.hasOwnProperty(t))return this.sanitizedSomething=!0,!TL.hasOwnProperty(t);this.buf.push("<"),this.buf.push(t);const i=e.attributes;for(let r=0;r<i.length;r++){const s=i.item(r),o=s.name,a=o.toLowerCase();if(!ng.hasOwnProperty(a)){this.sanitizedSomething=!0;continue}let c=s.value;Z5[a]&&(c=mu(c)),this.buf.push(" ",o,'="',ig(c),'"')}return this.buf.push(">"),!0}endElement(e){const t=e.nodeName.toLowerCase();q5.hasOwnProperty(t)&&!Qm.hasOwnProperty(t)&&(this.buf.push("</"),this.buf.push(t),this.buf.push(">"))}chars(e){this.buf.push(ig(e))}checkClobberedElement(e,t){if(t&&(e.compareDocumentPosition(t)&Node.DOCUMENT_POSITION_CONTAINED_BY)===Node.DOCUMENT_POSITION_CONTAINED_BY)throw new Error(`Failed to sanitize html because the element is clobbered: ${e.outerHTML}`);return t}}const LL=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,RL=/([^\#-~ |!])/g;function ig(n){return n.replace(/&/g,"&amp;").replace(LL,function(e){return"&#"+(1024*(e.charCodeAt(0)-55296)+(e.charCodeAt(1)-56320)+65536)+";"}).replace(RL,function(e){return"&#"+e.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}let gu;function rg(n,e){let t=null;try{gu=gu||function Jm(n){const e=new EL(n);return function DL(){try{return!!(new window.DOMParser).parseFromString(Bo(""),"text/html")}catch{return!1}}()?new SL(e):e}(n);let i=e?String(e):"";t=gu.getInertBodyElement(i);let r=5,s=i;do{if(0===r)throw new Error("Failed to sanitize html because the input is unstable");r--,i=s,s=t.innerHTML,t=gu.getInertBodyElement(i)}while(i!==s);return Bo((new IL).sanitizeChildren(X5(t)||t))}finally{if(t){const i=X5(t)||t;for(;i.firstChild;)i.removeChild(i.firstChild)}}}function X5(n){return"content"in n&&function PL(n){return n.nodeType===Node.ELEMENT_NODE&&"TEMPLATE"===n.nodeName}(n)?n.content:null}var Ot=(()=>((Ot=Ot||{})[Ot.NONE=0]="NONE",Ot[Ot.HTML=1]="HTML",Ot[Ot.STYLE=2]="STYLE",Ot[Ot.SCRIPT=3]="SCRIPT",Ot[Ot.URL=4]="URL",Ot[Ot.RESOURCE_URL=5]="RESOURCE_URL",Ot))();function sg(n){const e=Mc();return e?Xm(e.sanitize(Ot.HTML,n)||""):Br(n,"HTML")?Xm(Ni(n)):rg(function Zm(){return void 0!==j5?j5:typeof document<"u"?document:void 0}(),Ye(n))}function Zs(n){const e=Mc();return e?e.sanitize(Ot.URL,n)||"":Br(n,"URL")?Ni(n):mu(Ye(n))}function Mc(){const n=ee();return n&&n[12]}const c1=new ue("ENVIRONMENT_INITIALIZER"),cg=new ue("INJECTOR",-1),lg=new ue("INJECTOR_DEF_TYPES");class ug{get(e,t=Q2){if(t===Q2){const i=new Error(`NullInjectorError: No provider for ${zt(e)}!`);throw i.name="NullInjectorError",i}return t}}function VL(...n){return{\u0275providers:fg(0,n),\u0275fromNgModule:!0}}function fg(n,...e){const t=[],i=new Set;let r;return Ho(e,s=>{const o=s;Y5(o,t,[],i)&&(r||(r=[]),r.push(o))}),void 0!==r&&hg(r,t),t}function hg(n,e){for(let t=0;t<n.length;t++){const{providers:r}=n[t];K5(r,s=>{e.push(s)})}}function Y5(n,e,t,i){if(!(n=Ve(n)))return!1;let r=null,s=g9(n);const o=!s&&Dt(n);if(s||o){if(o&&!o.standalone)return!1;r=n}else{const c=n.ngModule;if(s=g9(c),!s)return!1;r=c}const a=i.has(r);if(o){if(a)return!1;if(i.add(r),o.dependencies){const c="function"==typeof o.dependencies?o.dependencies():o.dependencies;for(const l of c)Y5(l,e,t,i)}}else{if(!s)return!1;{if(null!=s.imports&&!a){let l;i.add(r);try{Ho(s.imports,u=>{Y5(u,e,t,i)&&(l||(l=[]),l.push(u))})}finally{}void 0!==l&&hg(l,e)}if(!a){const l=Oo(r)||(()=>new r);e.push({provide:r,useFactory:l,deps:Ct},{provide:lg,useValue:r,multi:!0},{provide:c1,useValue:()=>he(r),multi:!0})}const c=s.providers;null==c||a||K5(c,u=>{e.push(u)})}}return r!==n&&void 0!==n.providers}function K5(n,e){for(let t of n)Zf(t)&&(t=t.\u0275providers),Array.isArray(t)?K5(t,e):e(t)}const HL=Pt({provide:String,useValue:Pt});function J5(n){return null!==n&&"object"==typeof n&&HL in n}function Wo(n){return"function"==typeof n}const Q5=new ue("Set Injector scope."),vu={},BL={};let eh;function yu(){return void 0===eh&&(eh=new ug),eh}class fs{}class mg extends fs{constructor(e,t,i,r){super(),this.parent=t,this.source=i,this.scopes=r,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,nh(e,o=>this.processProvider(o)),this.records.set(cg,l1(void 0,this)),r.has("environment")&&this.records.set(fs,l1(void 0,this));const s=this.records.get(Q5);null!=s&&"string"==typeof s.value&&this.scopes.add(s.value),this.injectorDefTypes=new Set(this.get(lg.multi,Ct,He.Self))}get destroyed(){return this._destroyed}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{for(const e of this._ngOnDestroyHooks)e.ngOnDestroy();for(const e of this._onDestroyHooks)e()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),this._onDestroyHooks.length=0}}onDestroy(e){this._onDestroyHooks.push(e)}runInContext(e){this.assertNotDestroyed();const t=ja(this),i=Xi(void 0);try{return e()}finally{ja(t),Xi(i)}}get(e,t=Q2,i=He.Default){this.assertNotDestroyed(),i=H3(i);const r=ja(this),s=Xi(void 0);try{if(!(i&He.SkipSelf)){let a=this.records.get(e);if(void 0===a){const c=function qL(n){return"function"==typeof n||"object"==typeof n&&n instanceof ue}(e)&&O3(e);a=c&&this.injectableDefInScope(c)?l1(th(e),vu):null,this.records.set(e,a)}if(null!=a)return this.hydrate(e,a)}return(i&He.Self?yu():this.parent).get(e,t=i&He.Optional&&t===Q2?null:t)}catch(o){if("NullInjectorError"===o.name){if((o[V3]=o[V3]||[]).unshift(zt(e)),r)throw o;return function yT(n,e,t,i){const r=n[V3];throw e[_9]&&r.unshift(e[_9]),n.message=function _T(n,e,t,i=null){n=n&&"\n"===n.charAt(0)&&"\u0275"==n.charAt(1)?n.slice(2):n;let r=zt(e);if(Array.isArray(e))r=e.map(zt).join(" -> ");else if("object"==typeof e){let s=[];for(let o in e)if(e.hasOwnProperty(o)){let a=e[o];s.push(o+":"+("string"==typeof a?JSON.stringify(a):zt(a)))}r=`{${s.join(", ")}}`}return`${t}${i?"("+i+")":""}[${r}]: ${n.replace(pT,"\n  ")}`}("\n"+n.message,r,t,i),n.ngTokenPath=r,n[V3]=null,n}(o,e,"R3InjectorError",this.source)}throw o}finally{Xi(s),ja(r)}}resolveInjectorInitializers(){const e=ja(this),t=Xi(void 0);try{const i=this.get(c1.multi,Ct,He.Self);for(const r of i)r()}finally{ja(e),Xi(t)}}toString(){const e=[],t=this.records;for(const i of t.keys())e.push(zt(i));return`R3Injector[${e.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new de(205,!1)}processProvider(e){let t=Wo(e=Ve(e))?e:Ve(e&&e.provide);const i=function WL(n){return J5(n)?l1(void 0,n.useValue):l1(function gg(n,e,t){let i;if(Wo(n)){const r=Ve(n);return Oo(r)||th(r)}if(J5(n))i=()=>Ve(n.useValue);else if(function pg(n){return!(!n||!n.useFactory)}(n))i=()=>n.useFactory(...Jf(n.deps||[]));else if(function dg(n){return!(!n||!n.useExisting)}(n))i=()=>he(Ve(n.useExisting));else{const r=Ve(n&&(n.useClass||n.provide));if(!function jL(n){return!!n.deps}(n))return Oo(r)||th(r);i=()=>new r(...Jf(n.deps))}return i}(n),vu)}(e);if(Wo(e)||!0!==e.multi)this.records.get(t);else{let r=this.records.get(t);r||(r=l1(void 0,vu,!0),r.factory=()=>Jf(r.multi),this.records.set(t,r)),t=e,r.multi.push(e)}this.records.set(t,i)}hydrate(e,t){return t.value===vu&&(t.value=BL,t.value=t.factory()),"object"==typeof t.value&&t.value&&function $L(n){return null!==n&&"object"==typeof n&&"function"==typeof n.ngOnDestroy}(t.value)&&this._ngOnDestroyHooks.add(t.value),t.value}injectableDefInScope(e){if(!e.providedIn)return!1;const t=Ve(e.providedIn);return"string"==typeof t?"any"===t||this.scopes.has(t):this.injectorDefTypes.has(t)}}function th(n){const e=O3(n),t=null!==e?e.factory:Oo(n);if(null!==t)return t;if(n instanceof ue)throw new de(204,!1);if(n instanceof Function)return function GL(n){const e=n.length;if(e>0)throw hc(e,"?"),new de(204,!1);const t=function lT(n){const e=n&&(n[k3]||n[v9]);if(e){const t=function uT(n){if(n.hasOwnProperty("name"))return n.name;const e=(""+n).match(/^function\s*([^\s(]+)/);return null===e?"":e[1]}(n);return console.warn(`DEPRECATED: DI is instantiating a token "${t}" that inherits its @Injectable decorator but does not provide one itself.\nThis will become an error in a future version of Angular. Please add @Injectable() to the "${t}" class.`),e}return null}(n);return null!==t?()=>t.factory(n):()=>new n}(n);throw new de(204,!1)}function l1(n,e,t=!1){return{factory:n,value:e,multi:t?[]:void 0}}function nh(n,e){for(const t of n)Array.isArray(t)?nh(t,e):t&&Zf(t)?nh(t.\u0275providers,e):e(t)}class ZL{}class vg{}class YL{resolveComponentFactory(e){throw function XL(n){const e=Error(`No component factory found for ${zt(n)}. Did you add it to @NgModule.entryComponents?`);return e.ngComponent=n,e}(e)}}let wc=(()=>{class n{}return n.NULL=new YL,n})();function KL(){return u1(Wn(),ee())}function u1(n,e){return new hs(Ri(n,e))}let hs=(()=>{class n{constructor(t){this.nativeElement=t}}return n.__NG_ELEMENT_ID__=KL,n})();function JL(n){return n instanceof hs?n.nativeElement:n}class _g{}let Cc=(()=>{class n{}return n.__NG_ELEMENT_ID__=()=>function QL(){const n=ee(),t=Pi(Wn().index,n);return(Li(t)?t:n)[11]}(),n})(),eR=(()=>{class n{}return n.\u0275prov=Te({token:n,providedIn:"root",factory:()=>null}),n})();class _u{constructor(e){this.full=e,this.major=e.split(".")[0],this.minor=e.split(".")[1],this.patch=e.split(".").slice(2).join(".")}}const tR=new _u("15.0.4"),ih={};function sh(n){return n.ngOriginalError}class f1{constructor(){this._console=console}handleError(e){const t=this._findOriginalError(e);this._console.error("ERROR",e),t&&this._console.error("ORIGINAL ERROR",t)}_findOriginalError(e){let t=e&&sh(e);for(;t&&sh(t);)t=sh(t);return t||null}}function ds(n){return n instanceof Function?n():n}function bg(n,e,t){let i=n.length;for(;;){const r=n.indexOf(e,t);if(-1===r)return r;if(0===r||n.charCodeAt(r-1)<=32){const s=e.length;if(r+s===i||n.charCodeAt(r+s)<=32)return r}t=r+1}}const Mg="ng-template";function hR(n,e,t){let i=0;for(;i<n.length;){let r=n[i++];if(t&&"class"===r){if(r=n[i],-1!==bg(r.toLowerCase(),e,0))return!0}else if(1===r){for(;i<n.length&&"string"==typeof(r=n[i++]);)if(r.toLowerCase()===e)return!0;return!1}}return!1}function wg(n){return 4===n.type&&n.value!==Mg}function dR(n,e,t){return e===(4!==n.type||t?n.value:Mg)}function pR(n,e,t){let i=4;const r=n.attrs||[],s=function vR(n){for(let e=0;e<n.length;e++)if(Y9(n[e]))return e;return n.length}(r);let o=!1;for(let a=0;a<e.length;a++){const c=e[a];if("number"!=typeof c){if(!o)if(4&i){if(i=2|1&i,""!==c&&!dR(n,c,t)||""===c&&1===e.length){if(xr(i))return!1;o=!0}}else{const l=8&i?c:e[++a];if(8&i&&null!==n.attrs){if(!hR(n.attrs,l,t)){if(xr(i))return!1;o=!0}continue}const f=mR(8&i?"class":c,r,wg(n),t);if(-1===f){if(xr(i))return!1;o=!0;continue}if(""!==l){let h;h=f>s?"":r[f+1].toLowerCase();const d=8&i?h:null;if(d&&-1!==bg(d,l,0)||2&i&&l!==h){if(xr(i))return!1;o=!0}}}}else{if(!o&&!xr(i)&&!xr(c))return!1;if(o&&xr(c))continue;o=!1,i=c|1&i}}return xr(i)||o}function xr(n){return 0==(1&n)}function mR(n,e,t,i){if(null===e)return-1;let r=0;if(i||!t){let s=!1;for(;r<e.length;){const o=e[r];if(o===n)return r;if(3===o||6===o)s=!0;else{if(1===o||2===o){let a=e[++r];for(;"string"==typeof a;)a=e[++r];continue}if(4===o)break;if(0===o){r+=4;continue}}r+=s?1:2}return-1}return function yR(n,e){let t=n.indexOf(4);if(t>-1)for(t++;t<n.length;){const i=n[t];if("number"==typeof i)return-1;if(i===e)return t;t++}return-1}(e,n)}function Cg(n,e,t=!1){for(let i=0;i<e.length;i++)if(pR(n,e[i],t))return!0;return!1}function _R(n,e){e:for(let t=0;t<e.length;t++){const i=e[t];if(n.length===i.length){for(let r=0;r<n.length;r++)if(n[r]!==i[r])continue e;return!0}}return!1}function Sg(n,e){return n?":not("+e.trim()+")":e}function xR(n){let e=n[0],t=1,i=2,r="",s=!1;for(;t<n.length;){let o=n[t];if("string"==typeof o)if(2&i){const a=n[++t];r+="["+o+(a.length>0?'="'+a+'"':"")+"]"}else 8&i?r+="."+o:4&i&&(r+=" "+o);else""!==r&&!xr(o)&&(e+=Sg(s,r),r=""),i=o,s=s||!xr(i);t++}return""!==r&&(e+=Sg(s,r)),e}const Je={};function Lt(n){Eg(mt(),ee(),ai()+n,!1)}function Eg(n,e,t,i){if(!i)if(3==(3&e[2])){const s=n.preOrderCheckHooks;null!==s&&J3(e,s,t)}else{const s=n.preOrderHooks;null!==s&&Q3(e,s,0,t)}ko(t)}function Ig(n,e=null,t=null,i){const r=Lg(n,e,t,i);return r.resolveInjectorInitializers(),r}function Lg(n,e=null,t=null,i,r=new Set){const s=[t||Ct,VL(n)];return i=i||("object"==typeof n?void 0:zt(n)),new mg(s,e||yu(),i||null,r)}let br=(()=>{class n{static create(t,i){if(Array.isArray(t))return Ig({name:""},i,t,"");{const r=t.name??"";return Ig({name:r},t.parent,t.providers,r)}}}return n.THROW_IF_NOT_FOUND=Q2,n.NULL=new ug,n.\u0275prov=Te({token:n,providedIn:"any",factory:()=>he(cg)}),n.__NG_ELEMENT_ID__=-1,n})();function Se(n,e=He.Default){const t=ee();return null===t?he(n,e):sm(Wn(),t,Ve(n),e)}function Vg(n,e){const t=n.contentQueries;if(null!==t)for(let i=0;i<t.length;i+=2){const r=t[i],s=t[i+1];if(-1!==s){const o=n.data[s];u5(r),o.contentQueries(2,e[s],s)}}}function bu(n,e,t,i,r,s,o,a,c,l,u){const f=e.blueprint.slice();return f[0]=r,f[2]=76|i,(null!==u||n&&1024&n[2])&&(f[2]|=1024),F9(f),f[3]=f[15]=n,f[8]=t,f[10]=o||n&&n[10],f[11]=a||n&&n[11],f[12]=c||n&&n[12]||null,f[9]=l||n&&n[9]||null,f[6]=s,f[20]=function OI(){return FI++}(),f[21]=u,f[16]=2==e.type?n[16]:f,f}function p1(n,e,t,i,r){let s=n.data[e];if(null===s)s=function uh(n,e,t,i,r){const s=V9(),o=o5(),c=n.data[e]=function $R(n,e,t,i,r,s){return{type:t,index:i,insertBeforeIndex:null,injectorIndex:e?e.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:0,providerIndexes:0,value:r,attrs:s,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tViews:null,next:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,o?s:s&&s.parent,t,e,i,r);return null===n.firstChild&&(n.firstChild=c),null!==s&&(o?null==s.child&&null!==c.parent&&(s.child=c):null===s.next&&(s.next=c)),c}(n,e,t,i,r),function UT(){return Ke.lFrame.inI18n}()&&(s.flags|=32);else if(64&s.type){s.type=t,s.value=i,s.attrs=r;const o=function ac(){const n=Ke.lFrame,e=n.currentTNode;return n.isParent?e:e.parent}();s.injectorIndex=null===o?-1:o.injectorIndex}return Hr(s,!0),s}function Sc(n,e,t,i){if(0===t)return-1;const r=e.length;for(let s=0;s<t;s++)e.push(i),n.blueprint.push(i),n.data.push(null);return r}function fh(n,e,t){f5(e);try{const i=n.viewQuery;null!==i&&bh(1,i,t);const r=n.template;null!==r&&Hg(n,e,r,1,t),n.firstCreatePass&&(n.firstCreatePass=!1),n.staticContentQueries&&Vg(n,e),n.staticViewQueries&&bh(2,n.viewQuery,t);const s=n.components;null!==s&&function GR(n,e){for(let t=0;t<e.length;t++)fP(n,e[t])}(e,s)}catch(i){throw n.firstCreatePass&&(n.incompleteFirstPass=!0,n.firstCreatePass=!1),i}finally{e[2]&=-5,h5()}}function Mu(n,e,t,i){const r=e[2];if(128!=(128&r)){f5(e);try{F9(e),function U9(n){return Ke.lFrame.bindingIndex=n}(n.bindingStartIndex),null!==t&&Hg(n,e,t,2,i);const o=3==(3&r);if(o){const l=n.preOrderCheckHooks;null!==l&&J3(e,l,null)}else{const l=n.preOrderHooks;null!==l&&Q3(e,l,0,null),d5(e,0)}if(function lP(n){for(let e=z5(n);null!==e;e=N5(e)){if(!e[2])continue;const t=e[9];for(let i=0;i<t.length;i++){const r=t[i],s=r[3];0==(512&r[2])&&s5(s,1),r[2]|=512}}}(e),function cP(n){for(let e=z5(n);null!==e;e=N5(e))for(let t=10;t<e.length;t++){const i=e[t],r=i[1];Z3(i)&&Mu(r,i,r.template,i[8])}}(e),null!==n.contentQueries&&Vg(n,e),o){const l=n.contentCheckHooks;null!==l&&J3(e,l)}else{const l=n.contentHooks;null!==l&&Q3(e,l,1),d5(e,1)}!function UR(n,e){const t=n.hostBindingOpCodes;if(null!==t)try{for(let i=0;i<t.length;i++){const r=t[i];if(r<0)ko(~r);else{const s=r,o=t[++i],a=t[++i];BT(o,s),a(2,e[s])}}}finally{ko(-1)}}(n,e);const a=n.components;null!==a&&function BR(n,e){for(let t=0;t<e.length;t++)uP(n,e[t])}(e,a);const c=n.viewQuery;if(null!==c&&bh(2,c,i),o){const l=n.viewCheckHooks;null!==l&&J3(e,l)}else{const l=n.viewHooks;null!==l&&Q3(e,l,2),d5(e,2)}!0===n.firstUpdatePass&&(n.firstUpdatePass=!1),e[2]&=-41,512&e[2]&&(e[2]&=-513,s5(e[3],-1))}finally{h5()}}}function Hg(n,e,t,i,r){const s=ai(),o=2&i;try{ko(-1),o&&e.length>22&&Eg(n,e,22,!1),t(i,r)}finally{ko(s)}}function hh(n,e,t){if(i5(e)){const r=e.directiveEnd;for(let s=e.directiveStart;s<r;s++){const o=n.data[s];o.contentQueries&&o.contentQueries(1,t[s],s)}}}function dh(n,e,t){!k9()||(function JR(n,e,t,i){const r=t.directiveStart,s=t.directiveEnd;oc(t)&&function sP(n,e,t){const i=Ri(e,n),r=Ug(t),s=n[10],o=wu(n,bu(n,r,null,t.onPush?32:16,i,e,s,s.createRenderer(i,t),null,null,null));n[e.index]=o}(e,t,n.data[r+t.componentOffset]),n.firstCreatePass||iu(t,e),Yn(i,e);const o=t.initialInputs;for(let a=r;a<s;a++){const c=n.data[a],l=Vo(e,n,a,t);Yn(l,e),null!==o&&oP(0,a-r,l,c,0,o),_r(c)&&(Pi(t.index,e)[8]=Vo(e,n,a,t))}}(n,e,t,Ri(t,e)),64==(64&t.flags)&&qg(n,e,t))}function ph(n,e,t=Ri){const i=e.localNames;if(null!==i){let r=e.index+1;for(let s=0;s<i.length;s+=2){const o=i[s+1],a=-1===o?t(e,n):n[o];n[r++]=a}}}function Ug(n){const e=n.tView;return null===e||e.incompleteFirstPass?n.tView=mh(1,null,n.template,n.decls,n.vars,n.directiveDefs,n.pipeDefs,n.viewQuery,n.schemas,n.consts):e}function mh(n,e,t,i,r,s,o,a,c,l){const u=22+i,f=u+r,h=function WR(n,e){const t=[];for(let i=0;i<e;i++)t.push(i<n?null:Je);return t}(u,f),d="function"==typeof l?l():l;return h[1]={type:n,blueprint:h,template:t,queries:null,viewQuery:a,declTNode:e,data:h.slice().fill(null,u),bindingStartIndex:u,expandoStartIndex:f,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof s?s():s,pipeRegistry:"function"==typeof o?o():o,firstChild:null,schemas:c,consts:d,incompleteFirstPass:!1}}function Bg(n,e,t,i){const r=Xg(e);null===t?r.push(i):(r.push(t),n.firstCreatePass&&Yg(n).push(i,r.length-1))}function Gg(n,e,t,i){for(let r in n)if(n.hasOwnProperty(r)){t=null===t?{}:t;const s=n[r];null===i?Wg(t,e,r,s):i.hasOwnProperty(r)&&Wg(t,e,i[r],s)}return t}function Wg(n,e,t,i){n.hasOwnProperty(t)?n[t].push(e,i):n[t]=[e,i]}function Fi(n,e,t,i,r,s,o,a){const c=Ri(e,t);let u,l=e.inputs;!a&&null!=l&&(u=l[i])?(Mh(n,t,u,i,r),oc(e)&&jg(t,e.index)):3&e.type&&(i=function ZR(n){return"class"===n?"className":"for"===n?"htmlFor":"formaction"===n?"formAction":"innerHtml"===n?"innerHTML":"readonly"===n?"readOnly":"tabindex"===n?"tabIndex":n}(i),r=null!=o?o(r,e.value||"",i):r,s.setProperty(c,i,r))}function jg(n,e){const t=Pi(e,n);16&t[2]||(t[2]|=32)}function gh(n,e,t,i){let r=!1;if(k9()){const s=null===i?null:{"":-1},o=function eP(n,e){const t=n.directiveRegistry;let i=null,r=null;if(t)for(let s=0;s<t.length;s++){const o=t[s];if(Cg(e,o.selectors,!1))if(i||(i=[]),_r(o))if(null!==o.findHostDirectiveDefs){const a=[];r=r||new Map,o.findHostDirectiveDefs(o,a,r),i.unshift(...a,o),vh(n,e,a.length)}else i.unshift(o),vh(n,e,0);else r=r||new Map,o.findHostDirectiveDefs?.(o,i,r),i.push(o)}return null===i?null:[i,r]}(n,t);let a,c;null===o?a=c=null:[a,c]=o,null!==a&&(r=!0,$g(n,e,t,a,s,c)),s&&function tP(n,e,t){if(e){const i=n.localNames=[];for(let r=0;r<e.length;r+=2){const s=t[e[r+1]];if(null==s)throw new de(-301,!1);i.push(e[r],s)}}}(t,i,s)}return t.mergedAttrs=lc(t.mergedAttrs,t.attrs),r}function $g(n,e,t,i,r,s){for(let l=0;l<i.length;l++)_5(iu(t,e),n,i[l].type);!function iP(n,e,t){n.flags|=1,n.directiveStart=e,n.directiveEnd=e+t,n.providerIndexes=e}(t,n.data.length,i.length);for(let l=0;l<i.length;l++){const u=i[l];u.providersResolver&&u.providersResolver(u)}let o=!1,a=!1,c=Sc(n,e,i.length,null);for(let l=0;l<i.length;l++){const u=i[l];t.mergedAttrs=lc(t.mergedAttrs,u.hostAttrs),rP(n,t,e,c,u),nP(c,u,r),null!==u.contentQueries&&(t.flags|=4),(null!==u.hostBindings||null!==u.hostAttrs||0!==u.hostVars)&&(t.flags|=64);const f=u.type.prototype;!o&&(f.ngOnChanges||f.ngOnInit||f.ngDoCheck)&&((n.preOrderHooks||(n.preOrderHooks=[])).push(t.index),o=!0),!a&&(f.ngOnChanges||f.ngDoCheck)&&((n.preOrderCheckHooks||(n.preOrderCheckHooks=[])).push(t.index),a=!0),c++}!function qR(n,e,t){const r=e.directiveEnd,s=n.data,o=e.attrs,a=[];let c=null,l=null;for(let u=e.directiveStart;u<r;u++){const f=s[u],h=t?t.get(f):null,p=h?h.outputs:null;c=Gg(f.inputs,u,c,h?h.inputs:null),l=Gg(f.outputs,u,l,p);const m=null===c||null===o||wg(e)?null:aP(c,u,o);a.push(m)}null!==c&&(c.hasOwnProperty("class")&&(e.flags|=8),c.hasOwnProperty("style")&&(e.flags|=16)),e.initialInputs=a,e.inputs=c,e.outputs=l}(n,t,s)}function qg(n,e,t){const i=t.directiveStart,r=t.directiveEnd,s=t.index,o=function GT(){return Ke.lFrame.currentDirectiveIndex}();try{ko(s);for(let a=i;a<r;a++){const c=n.data[a],l=e[a];c5(a),(null!==c.hostBindings||0!==c.hostVars||null!==c.hostAttrs)&&QR(c,l)}}finally{ko(-1),c5(o)}}function QR(n,e){null!==n.hostBindings&&n.hostBindings(1,e)}function vh(n,e,t){e.componentOffset=t,(n.components||(n.components=[])).push(e.index)}function nP(n,e,t){if(t){if(e.exportAs)for(let i=0;i<e.exportAs.length;i++)t[e.exportAs[i]]=n;_r(e)&&(t[""]=n)}}function rP(n,e,t,i,r){n.data[i]=r;const s=r.factory||(r.factory=Oo(r.type)),o=new cc(s,_r(r),Se);n.blueprint[i]=o,t[i]=o,function YR(n,e,t,i,r){const s=r.hostBindings;if(s){let o=n.hostBindingOpCodes;null===o&&(o=n.hostBindingOpCodes=[]);const a=~e.index;(function KR(n){let e=n.length;for(;e>0;){const t=n[--e];if("number"==typeof t&&t<0)return t}return 0})(o)!=a&&o.push(a),o.push(t,i,s)}}(n,e,i,Sc(n,t,r.hostVars,Je),r)}function Gr(n,e,t,i,r,s){const o=Ri(n,e);!function yh(n,e,t,i,r,s,o){if(null==s)n.removeAttribute(e,r,t);else{const a=null==o?Ye(s):o(s,i||"",r);n.setAttribute(e,r,a,t)}}(e[11],o,s,n.value,t,i,r)}function oP(n,e,t,i,r,s){const o=s[e];if(null!==o){const a=i.setInput;for(let c=0;c<o.length;){const l=o[c++],u=o[c++],f=o[c++];null!==a?i.setInput(t,f,l,u):t[u]=f}}}function aP(n,e,t){let i=null,r=0;for(;r<t.length;){const s=t[r];if(0!==s)if(5!==s){if("number"==typeof s)break;if(n.hasOwnProperty(s)){null===i&&(i=[]);const o=n[s];for(let a=0;a<o.length;a+=2)if(o[a]===e){i.push(s,o[a+1],t[r+1]);break}}r+=2}else r+=2;else r+=4}return i}function Zg(n,e,t,i){return[n,!0,!1,e,null,0,i,t,null,null]}function uP(n,e){const t=Pi(e,n);if(Z3(t)){const i=t[1];48&t[2]?Mu(i,t,i.template,t[8]):t[5]>0&&_h(t)}}function _h(n){for(let i=z5(n);null!==i;i=N5(i))for(let r=10;r<i.length;r++){const s=i[r];if(Z3(s))if(512&s[2]){const o=s[1];Mu(o,s,o.template,s[8])}else s[5]>0&&_h(s)}const t=n[1].components;if(null!==t)for(let i=0;i<t.length;i++){const r=Pi(t[i],n);Z3(r)&&r[5]>0&&_h(r)}}function fP(n,e){const t=Pi(e,n),i=t[1];(function hP(n,e){for(let t=e.length;t<n.blueprint.length;t++)e.push(n.blueprint[t])})(i,t),fh(i,t,t[8])}function wu(n,e){return n[13]?n[14][4]=e:n[13]=e,n[14]=e,e}function xh(n){for(;n;){n[2]|=32;const e=_c(n);if(wT(n)&&!e)return n;n=e}return null}function Cu(n,e,t,i=!0){const r=e[10];r.begin&&r.begin();try{Mu(n,e,n.template,t)}catch(o){throw i&&Jg(e,o),o}finally{r.end&&r.end()}}function bh(n,e,t){u5(0),e(n,t)}function Xg(n){return n[7]||(n[7]=[])}function Yg(n){return n.cleanup||(n.cleanup=[])}function Jg(n,e){const t=n[9],i=t?t.get(f1,null):null;i&&i.handleError(e)}function Mh(n,e,t,i,r){for(let s=0;s<t.length;){const o=t[s++],a=t[s++],c=e[o],l=n.data[o];null!==l.setInput?l.setInput(c,r,i,a):c[a]=r}}function ps(n,e,t){const i=function q3(n,e){return Gn(e[n])}(e,n);!function Pm(n,e,t){n.setValue(e,t)}(n[11],i,t)}function Su(n,e,t){let i=t?n.styles:null,r=t?n.classes:null,s=0;if(null!==e)for(let o=0;o<e.length;o++){const a=e[o];"number"==typeof a?s=a:1==s?r=jf(r,a):2==s&&(i=jf(i,a+": "+e[++o]+";"))}t?n.styles=i:n.stylesWithoutHost=i,t?n.classes=r:n.classesWithoutHost=r}function Eu(n,e,t,i,r=!1){for(;null!==t;){const s=e[t.index];if(null!==s&&i.push(Gn(s)),yr(s))for(let a=10;a<s.length;a++){const c=s[a],l=c[1].firstChild;null!==l&&Eu(c[1],c,l,i)}const o=t.type;if(8&o)Eu(n,e,t.child,i);else if(32&o){const a=P5(t,e);let c;for(;c=a();)i.push(c)}else if(16&o){const a=Wm(e,t);if(Array.isArray(a))i.push(...a);else{const c=_c(e[16]);Eu(c[1],c,a,i,!0)}}t=r?t.projectionNext:t.next}return i}class Ec{constructor(e,t){this._lView=e,this._cdRefInjectingView=t,this._appRef=null,this._attachedToViewContainer=!1}get rootNodes(){const e=this._lView,t=e[1];return Eu(t,e,t.firstChild,[])}get context(){return this._lView[8]}set context(e){this._lView[8]=e}get destroyed(){return 128==(128&this._lView[2])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const e=this._lView[3];if(yr(e)){const t=e[8],i=t?t.indexOf(this):-1;i>-1&&(k5(e,i),ou(t,i))}this._attachedToViewContainer=!1}Nm(this._lView[1],this._lView)}onDestroy(e){Bg(this._lView[1],this._lView,null,e)}markForCheck(){xh(this._cdRefInjectingView||this._lView)}detach(){this._lView[2]&=-65}reattach(){this._lView[2]|=64}detectChanges(){Cu(this._lView[1],this._lView,this.context)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new de(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function JI(n,e){xc(n,e,e[11],2,null,null)}(this._lView[1],this._lView)}attachToAppRef(e){if(this._attachedToViewContainer)throw new de(902,!1);this._appRef=e}}class dP extends Ec{constructor(e){super(e),this._view=e}detectChanges(){const e=this._view;Cu(e[1],e,e[8],!1)}checkNoChanges(){}get context(){return null}}class Qg extends wc{constructor(e){super(),this.ngModule=e}resolveComponentFactory(e){const t=Dt(e);return new Dc(t,this.ngModule)}}function ev(n){const e=[];for(let t in n)n.hasOwnProperty(t)&&e.push({propName:n[t],templateName:t});return e}class mP{constructor(e,t){this.injector=e,this.parentInjector=t}get(e,t,i){i=H3(i);const r=this.injector.get(e,ih,i);return r!==ih||t===ih?r:this.parentInjector.get(e,t,i)}}class Dc extends vg{constructor(e,t){super(),this.componentDef=e,this.ngModule=t,this.componentType=e.type,this.selector=function bR(n){return n.map(xR).join(",")}(e.selectors),this.ngContentSelectors=e.ngContentSelectors?e.ngContentSelectors:[],this.isBoundToModule=!!t}get inputs(){return ev(this.componentDef.inputs)}get outputs(){return ev(this.componentDef.outputs)}create(e,t,i,r){let s=(r=r||this.ngModule)instanceof fs?r:r?.injector;s&&null!==this.componentDef.getStandaloneInjector&&(s=this.componentDef.getStandaloneInjector(s)||s);const o=s?new mP(e,s):e,a=o.get(_g,null);if(null===a)throw new de(407,!1);const c=o.get(eR,null),l=a.createRenderer(null,this.componentDef),u=this.componentDef.selectors[0][0]||"div",f=i?function jR(n,e,t){return n.selectRootElement(e,t===Or.ShadowDom)}(l,i,this.componentDef.encapsulation):O5(l,u,function pP(n){const e=n.toLowerCase();return"svg"===e?"svg":"math"===e?"math":null}(u)),h=this.componentDef.onPush?288:272,d=mh(0,null,null,1,0,null,null,null,null,null),p=bu(null,d,null,h,null,null,a,l,c,o,null);let m,g;f5(p);try{const v=this.componentDef;let x,y=null;v.findHostDirectiveDefs?(x=[],y=new Map,v.findHostDirectiveDefs(v,x,y),x.push(v)):x=[v];const _=function vP(n,e){const t=n[1];return n[22]=e,p1(t,22,2,"#host",null)}(p,f),M=function yP(n,e,t,i,r,s,o,a){const c=r[1];!function _P(n,e,t,i){for(const r of n)e.mergedAttrs=lc(e.mergedAttrs,r.hostAttrs);null!==e.mergedAttrs&&(Su(e,e.mergedAttrs,!0),null!==t&&qm(i,t,e))}(i,n,e,o);const l=s.createRenderer(e,t),u=bu(r,Ug(t),null,t.onPush?32:16,r[n.index],n,s,l,a||null,null,null);return c.firstCreatePass&&vh(c,n,i.length-1),wu(r,u),r[n.index]=u}(_,f,v,x,p,a,l);g=N9(d,22),f&&function bP(n,e,t,i){if(i)m5(n,t,["ng-version",tR.full]);else{const{attrs:r,classes:s}=function MR(n){const e=[],t=[];let i=1,r=2;for(;i<n.length;){let s=n[i];if("string"==typeof s)2===r?""!==s&&e.push(s,n[++i]):8===r&&t.push(s);else{if(!xr(r))break;r=s}i++}return{attrs:e,classes:t}}(e.selectors[0]);r&&m5(n,t,r),s&&s.length>0&&$m(n,t,s.join(" "))}}(l,v,f,i),void 0!==t&&function MP(n,e,t){const i=n.projection=[];for(let r=0;r<e.length;r++){const s=t[r];i.push(null!=s?Array.from(s):null)}}(g,this.ngContentSelectors,t),m=function xP(n,e,t,i,r,s){const o=Wn(),a=r[1],c=Ri(o,r);$g(a,r,o,t,null,i);for(let u=0;u<t.length;u++)Yn(Vo(r,a,o.directiveStart+u,o),r);qg(a,r,o),c&&Yn(c,r);const l=Vo(r,a,o.directiveStart+o.componentOffset,o);if(n[8]=r[8]=l,null!==s)for(const u of s)u(l,e);return hh(a,o,n),l}(M,v,x,y,p,[wP]),fh(d,p,null)}finally{h5()}return new gP(this.componentType,m,u1(g,p),p,g)}}class gP extends ZL{constructor(e,t,i,r,s){super(),this.location=i,this._rootLView=r,this._tNode=s,this.instance=t,this.hostView=this.changeDetectorRef=new dP(r),this.componentType=e}setInput(e,t){const i=this._tNode.inputs;let r;if(null!==i&&(r=i[e])){const s=this._rootLView;Mh(s[1],s,r,e,t),jg(s,this._tNode.index)}}get injector(){return new e1(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(e){this.hostView.onDestroy(e)}}function wP(){const n=Wn();K3(ee()[1],n)}let Du=null;function jo(){if(!Du){const n=Ft.Symbol;if(n&&n.iterator)Du=n.iterator;else{const e=Object.getOwnPropertyNames(Map.prototype);for(let t=0;t<e.length;++t){const i=e[t];"entries"!==i&&"size"!==i&&Map.prototype[i]===Map.prototype.entries&&(Du=i)}}}return Du}function Ac(n){return!!Ch(n)&&(Array.isArray(n)||!(n instanceof Map)&&jo()in n)}function Ch(n){return null!==n&&("function"==typeof n||"object"==typeof n)}function Kn(n,e,t){return!Object.is(n[e],t)&&(n[e]=t,!0)}function Tu(n,e,t,i){const r=ee();return Kn(r,Ja(),e)&&(mt(),Gr(Yt(),r,n,e,t,i)),Tu}function g1(n,e,t,i){return Kn(n,Ja(),t)?e+Ye(t)+i:Je}function ms(n,e,t,i,r,s,o,a){const c=ee(),l=mt(),u=n+22,f=l.firstCreatePass?function OP(n,e,t,i,r,s,o,a,c){const l=e.consts,u=p1(e,n,4,o||null,qs(l,a));gh(e,t,u,qs(l,c)),K3(e,u);const f=u.tViews=mh(2,u,i,r,s,e.directiveRegistry,e.pipeRegistry,null,e.schemas,l);return null!==e.queries&&(e.queries.template(e,u),f.queries=e.queries.embeddedTView(u)),u}(u,l,c,e,t,i,r,s,o):l.data[u];Hr(f,!1);const h=c[11].createComment("");fu(l,c,h,f),Yn(h,c),wu(c,c[u]=Zg(h,c,h,f)),$3(f)&&dh(l,c,f),null!=o&&ph(c,f,a)}function Kt(n,e,t){const i=ee();return Kn(i,Ja(),e)&&Fi(mt(),Yt(),i,n,e,i[11],t,!1),Kt}function Sh(n,e,t,i,r){const o=r?"class":"style";Mh(n,t,e.inputs[o],o,i)}function Le(n,e,t,i){const r=ee(),s=mt(),o=22+n,a=r[11],c=r[o]=O5(a,e,function KT(){return Ke.lFrame.currentNamespace}()),l=s.firstCreatePass?function HP(n,e,t,i,r,s,o){const a=e.consts,l=p1(e,n,2,r,qs(a,s));return gh(e,t,l,qs(a,o)),null!==l.attrs&&Su(l,l.attrs,!1),null!==l.mergedAttrs&&Su(l,l.mergedAttrs,!0),null!==e.queries&&e.queries.elementStart(e,l),l}(o,s,r,0,e,t,i):s.data[o];return Hr(l,!0),qm(a,c,l),32!=(32&l.flags)&&fu(s,r,c,l),0===function NT(){return Ke.lFrame.elementDepthCount}()&&Yn(c,r),function FT(){Ke.lFrame.elementDepthCount++}(),$3(l)&&(dh(s,r,l),hh(s,l,r)),null!==i&&ph(r,l),Le}function Qe(){let n=Wn();o5()?a5():(n=n.parent,Hr(n,!1));const e=n;!function OT(){Ke.lFrame.elementDepthCount--}();const t=mt();return t.firstCreatePass&&(K3(t,n),i5(n)&&t.queries.elementEnd(n)),null!=e.classesWithoutHost&&function tI(n){return 0!=(8&n.flags)}(e)&&Sh(t,e,ee(),e.classesWithoutHost,!0),null!=e.stylesWithoutHost&&function nI(n){return 0!=(16&n.flags)}(e)&&Sh(t,e,ee(),e.stylesWithoutHost,!1),Qe}function nn(n,e,t,i){return Le(n,e,t,i),Qe(),nn}function Iu(){return ee()}function Lu(n){return!!n&&"function"==typeof n.then}function gv(n){return!!n&&"function"==typeof n.subscribe}const vv=gv;function Jn(n,e,t,i){const r=ee(),s=mt(),o=Wn();return function _v(n,e,t,i,r,s,o){const a=$3(i),l=n.firstCreatePass&&Yg(n),u=e[8],f=Xg(e);let h=!0;if(3&i.type||o){const m=Ri(i,e),g=o?o(m):m,v=f.length,x=o?_=>o(Gn(_[i.index])):i.index;let y=null;if(!o&&a&&(y=function BP(n,e,t,i){const r=n.cleanup;if(null!=r)for(let s=0;s<r.length-1;s+=2){const o=r[s];if(o===t&&r[s+1]===i){const a=e[7],c=r[s+2];return a.length>c?a[c]:null}"string"==typeof o&&(s+=2)}return null}(n,e,r,i.index)),null!==y)(y.__ngLastListenerFn__||y).__ngNextListenerFn__=s,y.__ngLastListenerFn__=s,h=!1;else{s=bv(i,e,u,s,!1);const _=t.listen(g,r,s);f.push(s,_),l&&l.push(r,x,v,v+1)}}else s=bv(i,e,u,s,!1);const d=i.outputs;let p;if(h&&null!==d&&(p=d[r])){const m=p.length;if(m)for(let g=0;g<m;g+=2){const M=e[p[g]][p[g+1]].subscribe(s),w=f.length;f.push(s,M),l&&l.push(r,i.index,w,-(w+1))}}}(s,r,r[11],o,n,e,i),Jn}function xv(n,e,t,i){try{return!1!==t(i)}catch(r){return Jg(n,r),!1}}function bv(n,e,t,i,r){return function s(o){if(o===Function)return i;xh(n.componentOffset>-1?Pi(n.index,e):e);let c=xv(e,0,i,o),l=s.__ngNextListenerFn__;for(;l;)c=xv(e,0,l,o)&&c,l=l.__ngNextListenerFn__;return r&&!1===c&&(o.preventDefault(),o.returnValue=!1),c}}function Ic(n=1){return function jT(n){return(Ke.lFrame.contextLView=function $T(n,e){for(;n>0;)e=e[15],n--;return e}(n,Ke.lFrame.contextLView))[8]}(n)}function GP(n,e){let t=null;const i=function gR(n){const e=n.attrs;if(null!=e){const t=e.indexOf(5);if(0==(1&t))return e[t+1]}return null}(n);for(let r=0;r<e.length;r++){const s=e[r];if("*"!==s){if(null===i?Cg(n,s,!0):_R(i,s))return r}else t=r}return t}function Xs(n,e,t){return Ah(n,"",e,"",t),Xs}function Ah(n,e,t,i,r){const s=ee(),o=g1(s,e,t,i);return o!==Je&&Fi(mt(),Yt(),s,n,o,s[11],r,!1),Ah}function _t(n,e=""){const t=ee(),i=mt(),r=n+22,s=i.firstCreatePass?p1(i,r,1,e,null):i.data[r],o=t[r]=function F5(n,e){return n.createText(e)}(t[11],e);fu(i,t,o,s),Hr(s,!1)}function Ph(n){return zu("",n,""),Ph}function zu(n,e,t){const i=ee(),r=g1(i,n,e,t);return r!==Je&&ps(i,ai(),r),zu}function zh(n,e,t){const i=ee();return Kn(i,Ja(),e)&&Fi(mt(),Yt(),i,n,e,i[11],t,!0),zh}const E1="en-US";let dy=E1;class D1{}class Vy{}class Hy extends D1{constructor(e,t){super(),this._parent=t,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new Qg(this);const i=Ii(e);this._bootstrapComponents=ds(i.bootstrap),this._r3Injector=Lg(e,t,[{provide:D1,useValue:this},{provide:wc,useValue:this.componentFactoryResolver}],zt(e),new Set(["environment"])),this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(e)}get injector(){return this._r3Injector}destroy(){const e=this._r3Injector;!e.destroyed&&e.destroy(),this.destroyCbs.forEach(t=>t()),this.destroyCbs=null}onDestroy(e){this.destroyCbs.push(e)}}class Uh extends Vy{constructor(e){super(),this.moduleType=e}create(e){return new Hy(this.moduleType,e)}}class LN extends D1{constructor(e,t,i){super(),this.componentFactoryResolver=new Qg(this),this.instance=null;const r=new mg([...e,{provide:D1,useValue:this},{provide:wc,useValue:this.componentFactoryResolver}],t||yu(),i,new Set(["environment"]));this.injector=r,r.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(e){this.injector.onDestroy(e)}}function Vu(n,e,t=null){return new LN(n,e,t).injector}let RN=(()=>{class n{constructor(t){this._injector=t,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(t){if(!t.standalone)return null;if(!this.cachedInjectors.has(t.id)){const i=fg(0,t.type),r=i.length>0?Vu([i],this._injector,`Standalone[${t.type.name}]`):null;this.cachedInjectors.set(t.id,r)}return this.cachedInjectors.get(t.id)}ngOnDestroy(){try{for(const t of this.cachedInjectors.values())null!==t&&t.destroy()}finally{this.cachedInjectors.clear()}}}return n.\u0275prov=Te({token:n,providedIn:"environment",factory:()=>new n(he(fs))}),n})();function Uy(n){n.getStandaloneInjector=e=>e.get(RN).getOrCreateStandaloneInjector(n)}function Ks(n,e,t,i){return Zy(ee(),oi(),n,e,t,i)}function Zy(n,e,t,i,r,s){const o=e+t;return Kn(n,o,r)?function Wr(n,e,t){return n[e]=t}(n,o+1,s?i.call(s,r):i(r)):function Oc(n,e){const t=n[e];return t===Je?void 0:t}(n,o+1)}function li(n,e){const t=mt();let i;const r=n+22;t.firstCreatePass?(i=function YN(n,e){if(e)for(let t=e.length-1;t>=0;t--){const i=e[t];if(n===i.name)return i}}(e,t.pipeRegistry),t.data[r]=i,i.onDestroy&&(t.destroyHooks||(t.destroyHooks=[])).push(r,i.onDestroy)):i=t.data[r];const s=i.factory||(i.factory=Oo(i.type)),o=Xi(Se);try{const a=nu(!1),c=s();return nu(a),function kP(n,e,t,i){t>=n.data.length&&(n.data[t]=null,n.blueprint[t]=null),e[t]=i}(t,ee(),r,c),c}finally{Xi(o)}}function ui(n,e,t){const i=n+22,r=ee(),s=function Ka(n,e){return n[e]}(r,i);return function kc(n,e){return n[1].data[e].pure}(r,i)?Zy(r,oi(),e,s.transform,t,s):s.transform(t)}function Gh(n){return e=>{setTimeout(n,void 0,e)}}const Qn=class tF extends Fr{constructor(e=!1){super(),this.__isAsync=e}emit(e){super.next(e)}subscribe(e,t,i){let r=e,s=t||(()=>null),o=i;if(e&&"object"==typeof e){const c=e;r=c.next?.bind(c),s=c.error?.bind(c),o=c.complete?.bind(c)}this.__isAsync&&(s=Gh(s),r&&(r=Gh(r)),o&&(o=Gh(o)));const a=super.subscribe({next:r,error:s,complete:o});return e instanceof Ai&&e.add(a),a}};function nF(){return this._results[jo()]()}class Wh{constructor(e=!1){this._emitDistinctChangesOnly=e,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const t=jo(),i=Wh.prototype;i[t]||(i[t]=nF)}get changes(){return this._changes||(this._changes=new Qn)}get(e){return this._results[e]}map(e){return this._results.map(e)}filter(e){return this._results.filter(e)}find(e){return this._results.find(e)}reduce(e,t){return this._results.reduce(e,t)}forEach(e){this._results.forEach(e)}some(e){return this._results.some(e)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(e,t){const i=this;i.dirty=!1;const r=function Ki(n){return n.flat(Number.POSITIVE_INFINITY)}(e);(this._changesDetected=!function hI(n,e,t){if(n.length!==e.length)return!1;for(let i=0;i<n.length;i++){let r=n[i],s=e[i];if(t&&(r=t(r),s=t(s)),s!==r)return!1}return!0}(i._results,r,t))&&(i._results=r,i.length=r.length,i.last=r[this.length-1],i.first=r[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}let gs=(()=>{class n{}return n.__NG_ELEMENT_ID__=sF,n})();const iF=gs,rF=class extends iF{constructor(e,t,i){super(),this._declarationLView=e,this._declarationTContainer=t,this.elementRef=i}createEmbeddedView(e,t){const i=this._declarationTContainer.tViews,r=bu(this._declarationLView,i,e,16,null,i.declTNode,null,null,null,null,t||null);r[17]=this._declarationLView[this._declarationTContainer.index];const o=this._declarationLView[19];return null!==o&&(r[19]=o.createEmbeddedView(i)),fh(i,r,e),new Ec(r)}};function sF(){return Hu(Wn(),ee())}function Hu(n,e){return 4&n.type?new rF(e,n,u1(n,e)):null}let Cr=(()=>{class n{}return n.__NG_ELEMENT_ID__=oF,n})();function oF(){return t_(Wn(),ee())}const aF=Cr,Qy=class extends aF{constructor(e,t,i){super(),this._lContainer=e,this._hostTNode=t,this._hostLView=i}get element(){return u1(this._hostTNode,this._hostLView)}get injector(){return new e1(this._hostTNode,this._hostLView)}get parentInjector(){const e=y5(this._hostTNode,this._hostLView);if(Q9(e)){const t=tu(e,this._hostLView),i=eu(e);return new e1(t[1].data[i+8],t)}return new e1(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(e){const t=e_(this._lContainer);return null!==t&&t[e]||null}get length(){return this._lContainer.length-10}createEmbeddedView(e,t,i){let r,s;"number"==typeof i?r=i:null!=i&&(r=i.index,s=i.injector);const o=e.createEmbeddedView(t||{},s);return this.insert(o,r),o}createComponent(e,t,i,r,s){const o=e&&!function fc(n){return"function"==typeof n}(e);let a;if(o)a=t;else{const f=t||{};a=f.index,i=f.injector,r=f.projectableNodes,s=f.environmentInjector||f.ngModuleRef}const c=o?e:new Dc(Dt(e)),l=i||this.parentInjector;if(!s&&null==c.ngModule){const h=(o?l:this.parentInjector).get(fs,null);h&&(s=h)}const u=c.create(l,r,void 0,s);return this.insert(u.hostView,a),u}insert(e,t){const i=e._lView,r=i[1];if(function zT(n){return yr(n[3])}(i)){const u=this.indexOf(e);if(-1!==u)this.detach(u);else{const f=i[3],h=new Qy(f,f[6],f[3]);h.detach(h.indexOf(e))}}const s=this._adjustIndex(t),o=this._lContainer;!function eL(n,e,t,i){const r=10+i,s=t.length;i>0&&(t[r-1][4]=e),i<s-10?(e[4]=t[r],fm(t,10+i,e)):(t.push(e),e[4]=null),e[3]=t;const o=e[17];null!==o&&t!==o&&function tL(n,e){const t=n[9];e[16]!==e[3][3][16]&&(n[2]=!0),null===t?n[9]=[e]:t.push(e)}(o,e);const a=e[19];null!==a&&a.insertView(n),e[2]|=64}(r,i,o,s);const a=U5(s,o),c=i[11],l=uu(c,o[7]);return null!==l&&function KI(n,e,t,i,r,s){i[0]=r,i[6]=e,xc(n,i,t,1,r,s)}(r,o[6],c,i,l,a),e.attachToViewContainerRef(),fm(jh(o),s,e),e}move(e,t){return this.insert(e,t)}indexOf(e){const t=e_(this._lContainer);return null!==t?t.indexOf(e):-1}remove(e){const t=this._adjustIndex(e,-1),i=k5(this._lContainer,t);i&&(ou(jh(this._lContainer),t),Nm(i[1],i))}detach(e){const t=this._adjustIndex(e,-1),i=k5(this._lContainer,t);return i&&null!=ou(jh(this._lContainer),t)?new Ec(i):null}_adjustIndex(e,t=0){return e??this.length+t}};function e_(n){return n[8]}function jh(n){return n[8]||(n[8]=[])}function t_(n,e){let t;const i=e[n.index];if(yr(i))t=i;else{let r;if(8&n.type)r=Gn(i);else{const s=e[11];r=s.createComment("");const o=Ri(n,e);Uo(s,uu(s,o),r,function sL(n,e){return n.nextSibling(e)}(s,o),!1)}e[n.index]=t=Zg(i,e,r,n),wu(e,t)}return new Qy(t,n,e)}class $h{constructor(e){this.queryList=e,this.matches=null}clone(){return new $h(this.queryList)}setDirty(){this.queryList.setDirty()}}class qh{constructor(e=[]){this.queries=e}createEmbeddedView(e){const t=e.queries;if(null!==t){const i=null!==e.contentQueries?e.contentQueries[0]:t.length,r=[];for(let s=0;s<i;s++){const o=t.getByIndex(s);r.push(this.queries[o.indexInDeclarationView].clone())}return new qh(r)}return null}insertView(e){this.dirtyQueriesWithMatches(e)}detachView(e){this.dirtyQueriesWithMatches(e)}dirtyQueriesWithMatches(e){for(let t=0;t<this.queries.length;t++)null!==c_(e,t).matches&&this.queries[t].setDirty()}}class n_{constructor(e,t,i=null){this.predicate=e,this.flags=t,this.read=i}}class Zh{constructor(e=[]){this.queries=e}elementStart(e,t){for(let i=0;i<this.queries.length;i++)this.queries[i].elementStart(e,t)}elementEnd(e){for(let t=0;t<this.queries.length;t++)this.queries[t].elementEnd(e)}embeddedTView(e){let t=null;for(let i=0;i<this.length;i++){const r=null!==t?t.length:0,s=this.getByIndex(i).embeddedTView(e,r);s&&(s.indexInDeclarationView=i,null!==t?t.push(s):t=[s])}return null!==t?new Zh(t):null}template(e,t){for(let i=0;i<this.queries.length;i++)this.queries[i].template(e,t)}getByIndex(e){return this.queries[e]}get length(){return this.queries.length}track(e){this.queries.push(e)}}class Xh{constructor(e,t=-1){this.metadata=e,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=t}elementStart(e,t){this.isApplyingToNode(t)&&this.matchTNode(e,t)}elementEnd(e){this._declarationNodeIndex===e.index&&(this._appliesToNextNode=!1)}template(e,t){this.elementStart(e,t)}embeddedTView(e,t){return this.isApplyingToNode(e)?(this.crossesNgTemplate=!0,this.addMatch(-e.index,t),new Xh(this.metadata)):null}isApplyingToNode(e){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const t=this._declarationNodeIndex;let i=e.parent;for(;null!==i&&8&i.type&&i.index!==t;)i=i.parent;return t===(null!==i?i.index:-1)}return this._appliesToNextNode}matchTNode(e,t){const i=this.metadata.predicate;if(Array.isArray(i))for(let r=0;r<i.length;r++){const s=i[r];this.matchTNodeWithReadOption(e,t,cF(t,s)),this.matchTNodeWithReadOption(e,t,ru(t,e,s,!1,!1))}else i===gs?4&t.type&&this.matchTNodeWithReadOption(e,t,-1):this.matchTNodeWithReadOption(e,t,ru(t,e,i,!1,!1))}matchTNodeWithReadOption(e,t,i){if(null!==i){const r=this.metadata.read;if(null!==r)if(r===hs||r===Cr||r===gs&&4&t.type)this.addMatch(t.index,-2);else{const s=ru(t,e,r,!1,!1);null!==s&&this.addMatch(t.index,s)}else this.addMatch(t.index,i)}}addMatch(e,t){null===this.matches?this.matches=[e,t]:this.matches.push(e,t)}}function cF(n,e){const t=n.localNames;if(null!==t)for(let i=0;i<t.length;i+=2)if(t[i]===e)return t[i+1];return null}function uF(n,e,t,i){return-1===t?function lF(n,e){return 11&n.type?u1(n,e):4&n.type?Hu(n,e):null}(e,n):-2===t?function fF(n,e,t){return t===hs?u1(e,n):t===gs?Hu(e,n):t===Cr?t_(e,n):void 0}(n,e,i):Vo(n,n[1],t,e)}function i_(n,e,t,i){const r=e[19].queries[i];if(null===r.matches){const s=n.data,o=t.matches,a=[];for(let c=0;c<o.length;c+=2){const l=o[c];a.push(l<0?null:uF(e,s[l],o[c+1],t.metadata.read))}r.matches=a}return r.matches}function Yh(n,e,t,i){const r=n.queries.getByIndex(t),s=r.matches;if(null!==s){const o=i_(n,e,r,t);for(let a=0;a<s.length;a+=2){const c=s[a];if(c>0)i.push(o[a/2]);else{const l=s[a+1],u=e[-c];for(let f=10;f<u.length;f++){const h=u[f];h[17]===h[3]&&Yh(h[1],h,l,i)}if(null!==u[9]){const f=u[9];for(let h=0;h<f.length;h++){const d=f[h];Yh(d[1],d,l,i)}}}}}return i}function Kh(n){const e=ee(),t=mt(),i=G9();u5(i+1);const r=c_(t,i);if(n.dirty&&function PT(n){return 4==(4&n[2])}(e)===(2==(2&r.metadata.flags))){if(null===r.matches)n.reset([]);else{const s=r.crossesNgTemplate?Yh(t,e,i,[]):i_(t,e,r,i);n.reset(s,JL),n.notifyOnChanges()}return!0}return!1}function r_(n,e,t){const i=mt();i.firstCreatePass&&(function a_(n,e,t){null===n.queries&&(n.queries=new Zh),n.queries.track(new Xh(e,t))}(i,new n_(n,e,t),-1),2==(2&e)&&(i.staticViewQueries=!0)),function o_(n,e,t){const i=new Wh(4==(4&t));Bg(n,e,i,i.destroy),null===e[19]&&(e[19]=new qh),e[19].queries.push(new $h(i))}(i,ee(),e)}function c_(n,e){return n.queries.getByIndex(e)}function Bu(...n){}const Gu=new ue("Application Initializer");let Wu=(()=>{class n{constructor(t){this.appInits=t,this.resolve=Bu,this.reject=Bu,this.initialized=!1,this.done=!1,this.donePromise=new Promise((i,r)=>{this.resolve=i,this.reject=r})}runInitializers(){if(this.initialized)return;const t=[],i=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let r=0;r<this.appInits.length;r++){const s=this.appInits[r]();if(Lu(s))t.push(s);else if(vv(s)){const o=new Promise((a,c)=>{s.subscribe({complete:a,error:c})});t.push(o)}}Promise.all(t).then(()=>{i()}).catch(r=>{this.reject(r)}),0===t.length&&i(),this.initialized=!0}}return n.\u0275fac=function(t){return new(t||n)(he(Gu,8))},n.\u0275prov=Te({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const Hc=new ue("AppId",{providedIn:"root",factory:function D_(){return`${id()}${id()}${id()}`}});function id(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const A_=new ue("Platform Initializer"),T_=new ue("Platform ID",{providedIn:"platform",factory:()=>"unknown"}),I_=new ue("appBootstrapListener");let zF=(()=>{class n{log(t){console.log(t)}warn(t){console.warn(t)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=Te({token:n,factory:n.\u0275fac,providedIn:"platform"}),n})();const vs=new ue("LocaleId",{providedIn:"root",factory:()=>ze(vs,He.Optional|He.SkipSelf)||function NF(){return typeof $localize<"u"&&$localize.locale||E1}()});class OF{constructor(e,t){this.ngModuleFactory=e,this.componentFactories=t}}let L_=(()=>{class n{compileModuleSync(t){return new Uh(t)}compileModuleAsync(t){return Promise.resolve(this.compileModuleSync(t))}compileModuleAndAllComponentsSync(t){const i=this.compileModuleSync(t),s=ds(Ii(t).declarations).reduce((o,a)=>{const c=Dt(a);return c&&o.push(new Dc(c)),o},[]);return new OF(i,s)}compileModuleAndAllComponentsAsync(t){return Promise.resolve(this.compileModuleAndAllComponentsSync(t))}clearCache(){}clearCacheFor(t){}getModuleId(t){}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=Te({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const HF=(()=>Promise.resolve(0))();function rd(n){typeof Zone>"u"?HF.then(()=>{n&&n.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",n)}class fn{constructor({enableLongStackTrace:e=!1,shouldCoalesceEventChangeDetection:t=!1,shouldCoalesceRunChangeDetection:i=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new Qn(!1),this.onMicrotaskEmpty=new Qn(!1),this.onStable=new Qn(!1),this.onError=new Qn(!1),typeof Zone>"u")throw new de(908,!1);Zone.assertZonePatched();const r=this;r._nesting=0,r._outer=r._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(r._inner=r._inner.fork(new Zone.TaskTrackingZoneSpec)),e&&Zone.longStackTraceZoneSpec&&(r._inner=r._inner.fork(Zone.longStackTraceZoneSpec)),r.shouldCoalesceEventChangeDetection=!i&&t,r.shouldCoalesceRunChangeDetection=i,r.lastRequestAnimationFrameId=-1,r.nativeRequestAnimationFrame=function UF(){let n=Ft.requestAnimationFrame,e=Ft.cancelAnimationFrame;if(typeof Zone<"u"&&n&&e){const t=n[Zone.__symbol__("OriginalDelegate")];t&&(n=t);const i=e[Zone.__symbol__("OriginalDelegate")];i&&(e=i)}return{nativeRequestAnimationFrame:n,nativeCancelAnimationFrame:e}}().nativeRequestAnimationFrame,function WF(n){const e=()=>{!function GF(n){n.isCheckStableRunning||-1!==n.lastRequestAnimationFrameId||(n.lastRequestAnimationFrameId=n.nativeRequestAnimationFrame.call(Ft,()=>{n.fakeTopEventTask||(n.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{n.lastRequestAnimationFrameId=-1,od(n),n.isCheckStableRunning=!0,sd(n),n.isCheckStableRunning=!1},void 0,()=>{},()=>{})),n.fakeTopEventTask.invoke()}),od(n))}(n)};n._inner=n._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(t,i,r,s,o,a)=>{try{return z_(n),t.invokeTask(r,s,o,a)}finally{(n.shouldCoalesceEventChangeDetection&&"eventTask"===s.type||n.shouldCoalesceRunChangeDetection)&&e(),N_(n)}},onInvoke:(t,i,r,s,o,a,c)=>{try{return z_(n),t.invoke(r,s,o,a,c)}finally{n.shouldCoalesceRunChangeDetection&&e(),N_(n)}},onHasTask:(t,i,r,s)=>{t.hasTask(r,s),i===r&&("microTask"==s.change?(n._hasPendingMicrotasks=s.microTask,od(n),sd(n)):"macroTask"==s.change&&(n.hasPendingMacrotasks=s.macroTask))},onHandleError:(t,i,r,s)=>(t.handleError(r,s),n.runOutsideAngular(()=>n.onError.emit(s)),!1)})}(r)}static isInAngularZone(){return typeof Zone<"u"&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!fn.isInAngularZone())throw new de(909,!1)}static assertNotInAngularZone(){if(fn.isInAngularZone())throw new de(909,!1)}run(e,t,i){return this._inner.run(e,t,i)}runTask(e,t,i,r){const s=this._inner,o=s.scheduleEventTask("NgZoneEvent: "+r,e,BF,Bu,Bu);try{return s.runTask(o,t,i)}finally{s.cancelTask(o)}}runGuarded(e,t,i){return this._inner.runGuarded(e,t,i)}runOutsideAngular(e){return this._outer.run(e)}}const BF={};function sd(n){if(0==n._nesting&&!n.hasPendingMicrotasks&&!n.isStable)try{n._nesting++,n.onMicrotaskEmpty.emit(null)}finally{if(n._nesting--,!n.hasPendingMicrotasks)try{n.runOutsideAngular(()=>n.onStable.emit(null))}finally{n.isStable=!0}}}function od(n){n.hasPendingMicrotasks=!!(n._hasPendingMicrotasks||(n.shouldCoalesceEventChangeDetection||n.shouldCoalesceRunChangeDetection)&&-1!==n.lastRequestAnimationFrameId)}function z_(n){n._nesting++,n.isStable&&(n.isStable=!1,n.onUnstable.emit(null))}function N_(n){n._nesting--,sd(n)}class jF{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new Qn,this.onMicrotaskEmpty=new Qn,this.onStable=new Qn,this.onError=new Qn}run(e,t,i){return e.apply(t,i)}runGuarded(e,t,i){return e.apply(t,i)}runOutsideAngular(e){return e()}runTask(e,t,i,r){return e.apply(t,i)}}const F_=new ue(""),ju=new ue("");let ld,ad=(()=>{class n{constructor(t,i,r){this._ngZone=t,this.registry=i,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,ld||(function $F(n){ld=n}(r),r.addToWindow(i)),this._watchAngularEvents(),t.run(()=>{this.taskTrackingZone=typeof Zone>"u"?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{fn.assertNotInAngularZone(),rd(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())rd(()=>{for(;0!==this._callbacks.length;){let t=this._callbacks.pop();clearTimeout(t.timeoutId),t.doneCb(this._didWork)}this._didWork=!1});else{let t=this.getPendingTasks();this._callbacks=this._callbacks.filter(i=>!i.updateCb||!i.updateCb(t)||(clearTimeout(i.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(t=>({source:t.source,creationLocation:t.creationLocation,data:t.data})):[]}addCallback(t,i,r){let s=-1;i&&i>0&&(s=setTimeout(()=>{this._callbacks=this._callbacks.filter(o=>o.timeoutId!==s),t(this._didWork,this.getPendingTasks())},i)),this._callbacks.push({doneCb:t,timeoutId:s,updateCb:r})}whenStable(t,i,r){if(r&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(t,i,r),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}registerApplication(t){this.registry.registerApplication(t,this)}unregisterApplication(t){this.registry.unregisterApplication(t)}findProviders(t,i,r){return[]}}return n.\u0275fac=function(t){return new(t||n)(he(fn),he(cd),he(ju))},n.\u0275prov=Te({token:n,factory:n.\u0275fac}),n})(),cd=(()=>{class n{constructor(){this._applications=new Map}registerApplication(t,i){this._applications.set(t,i)}unregisterApplication(t){this._applications.delete(t)}unregisterAllApplications(){this._applications.clear()}getTestability(t){return this._applications.get(t)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(t,i=!0){return ld?.findTestabilityInTree(this,t,i)??null}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=Te({token:n,factory:n.\u0275fac,providedIn:"platform"}),n})(),Js=null;const O_=new ue("AllowMultipleToken"),ud=new ue("PlatformDestroyListeners");class k_{constructor(e,t){this.name=e,this.token=t}}function H_(n,e,t=[]){const i=`Platform: ${e}`,r=new ue(i);return(s=[])=>{let o=fd();if(!o||o.injector.get(O_,!1)){const a=[...t,...s,{provide:r,useValue:!0}];n?n(a):function XF(n){if(Js&&!Js.get(O_,!1))throw new de(400,!1);Js=n;const e=n.get(B_);(function V_(n){const e=n.get(A_,null);e&&e.forEach(t=>t())})(n)}(function U_(n=[],e){return br.create({name:e,providers:[{provide:Q5,useValue:"platform"},{provide:ud,useValue:new Set([()=>Js=null])},...n]})}(a,i))}return function KF(n){const e=fd();if(!e)throw new de(401,!1);return e}()}}function fd(){return Js?.get(B_)??null}let B_=(()=>{class n{constructor(t){this._injector=t,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(t,i){const r=function W_(n,e){let t;return t="noop"===n?new jF:("zone.js"===n?void 0:n)||new fn(e),t}(i?.ngZone,function G_(n){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:!(!n||!n.ngZoneEventCoalescing)||!1,shouldCoalesceRunChangeDetection:!(!n||!n.ngZoneRunCoalescing)||!1}}(i)),s=[{provide:fn,useValue:r}];return r.run(()=>{const o=br.create({providers:s,parent:this.injector,name:t.moduleType.name}),a=t.create(o),c=a.injector.get(f1,null);if(!c)throw new de(402,!1);return r.runOutsideAngular(()=>{const l=r.onError.subscribe({next:u=>{c.handleError(u)}});a.onDestroy(()=>{qu(this._modules,a),l.unsubscribe()})}),function j_(n,e,t){try{const i=t();return Lu(i)?i.catch(r=>{throw e.runOutsideAngular(()=>n.handleError(r)),r}):i}catch(i){throw e.runOutsideAngular(()=>n.handleError(i)),i}}(c,r,()=>{const l=a.injector.get(Wu);return l.runInitializers(),l.donePromise.then(()=>(function py(n){qi(n,"Expected localeId to be defined"),"string"==typeof n&&(dy=n.toLowerCase().replace(/_/g,"-"))}(a.injector.get(vs,E1)||E1),this._moduleDoBootstrap(a),a))})})}bootstrapModule(t,i=[]){const r=$_({},i);return function qF(n,e,t){const i=new Uh(t);return Promise.resolve(i)}(0,0,t).then(s=>this.bootstrapModuleFactory(s,r))}_moduleDoBootstrap(t){const i=t.injector.get($u);if(t._bootstrapComponents.length>0)t._bootstrapComponents.forEach(r=>i.bootstrap(r));else{if(!t.instance.ngDoBootstrap)throw new de(403,!1);t.instance.ngDoBootstrap(i)}this._modules.push(t)}onDestroy(t){this._destroyListeners.push(t)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new de(404,!1);this._modules.slice().forEach(i=>i.destroy()),this._destroyListeners.forEach(i=>i());const t=this._injector.get(ud,null);t&&(t.forEach(i=>i()),t.clear()),this._destroyed=!0}get destroyed(){return this._destroyed}}return n.\u0275fac=function(t){return new(t||n)(he(br))},n.\u0275prov=Te({token:n,factory:n.\u0275fac,providedIn:"platform"}),n})();function $_(n,e){return Array.isArray(e)?e.reduce($_,n):{...n,...e}}let $u=(()=>{class n{constructor(t,i,r){this._zone=t,this._injector=i,this._exceptionHandler=r,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this._destroyed=!1,this._destroyListeners=[],this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const s=new en(a=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{a.next(this._stable),a.complete()})}),o=new en(a=>{let c;this._zone.runOutsideAngular(()=>{c=this._zone.onStable.subscribe(()=>{fn.assertNotInAngularZone(),rd(()=>{!this._stable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks&&(this._stable=!0,a.next(!0))})})});const l=this._zone.onUnstable.subscribe(()=>{fn.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{a.next(!1)}))});return()=>{c.unsubscribe(),l.unsubscribe()}});this.isStable=function eT(...n){const e=J2(n),t=function qA(n,e){return"number"==typeof Uf(n)?n.pop():e}(n,1/0),i=n;return i.length?1===i.length?pr(i[0]):Wa(t)(En(i,e)):rs}(s,o.pipe(function tT(n={}){const{connector:e=(()=>new Fr),resetOnError:t=!0,resetOnComplete:i=!0,resetOnRefCountZero:r=!0}=n;return s=>{let o,a,c,l=0,u=!1,f=!1;const h=()=>{a?.unsubscribe(),a=void 0},d=()=>{h(),o=c=void 0,u=f=!1},p=()=>{const m=o;d(),m?.unsubscribe()};return yn((m,g)=>{l++,!f&&!u&&h();const v=c=c??e();g.add(()=>{l--,0===l&&!f&&!u&&(a=Gf(p,r))}),v.subscribe(g),!o&&l>0&&(o=new K2({next:x=>v.next(x),error:x=>{f=!0,h(),a=Gf(d,t,x),v.error(x)},complete:()=>{u=!0,h(),a=Gf(d,i),v.complete()}}),pr(m).subscribe(o))})(s)}}()))}get destroyed(){return this._destroyed}get injector(){return this._injector}bootstrap(t,i){const r=t instanceof vg;if(!this._injector.get(Wu).done)throw!r&&function $a(n){const e=Dt(n)||qn(n)||ri(n);return null!==e&&e.standalone}(t),new de(405,false);let o;o=r?t:this._injector.get(wc).resolveComponentFactory(t),this.componentTypes.push(o.componentType);const a=function ZF(n){return n.isBoundToModule}(o)?void 0:this._injector.get(D1),l=o.create(br.NULL,[],i||o.selector,a),u=l.location.nativeElement,f=l.injector.get(F_,null);return f?.registerApplication(u),l.onDestroy(()=>{this.detachView(l.hostView),qu(this.components,l),f?.unregisterApplication(u)}),this._loadComponent(l),l}tick(){if(this._runningTick)throw new de(101,!1);try{this._runningTick=!0;for(let t of this._views)t.detectChanges()}catch(t){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(t))}finally{this._runningTick=!1}}attachView(t){const i=t;this._views.push(i),i.attachToAppRef(this)}detachView(t){const i=t;qu(this._views,i),i.detachFromAppRef()}_loadComponent(t){this.attachView(t.hostView),this.tick(),this.components.push(t);const i=this._injector.get(I_,[]);i.push(...this._bootstrapListeners),i.forEach(r=>r(t))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(t=>t()),this._views.slice().forEach(t=>t.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(t){return this._destroyListeners.push(t),()=>qu(this._destroyListeners,t)}destroy(){if(this._destroyed)throw new de(406,!1);const t=this._injector;t.destroy&&!t.destroyed&&t.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}}return n.\u0275fac=function(t){return new(t||n)(he(fn),he(fs),he(f1))},n.\u0275prov=Te({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function qu(n,e){const t=n.indexOf(e);t>-1&&n.splice(t,1)}let hd=(()=>{class n{}return n.__NG_ELEMENT_ID__=eO,n})();function eO(n){return function tO(n,e,t){if(oc(n)&&!t){const i=Pi(n.index,e);return new Ec(i,i)}return 47&n.type?new Ec(e[16],e):null}(Wn(),ee(),16==(16&n))}class K_{constructor(){}supports(e){return Ac(e)}create(e){return new aO(e)}}const oO=(n,e)=>e;class aO{constructor(e){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=e||oO}forEachItem(e){let t;for(t=this._itHead;null!==t;t=t._next)e(t)}forEachOperation(e){let t=this._itHead,i=this._removalsHead,r=0,s=null;for(;t||i;){const o=!i||t&&t.currentIndex<Q_(i,r,s)?t:i,a=Q_(o,r,s),c=o.currentIndex;if(o===i)r--,i=i._nextRemoved;else if(t=t._next,null==o.previousIndex)r++;else{s||(s=[]);const l=a-r,u=c-r;if(l!=u){for(let h=0;h<l;h++){const d=h<s.length?s[h]:s[h]=0,p=d+h;u<=p&&p<l&&(s[h]=d+1)}s[o.previousIndex]=u-l}}a!==c&&e(o,a,c)}}forEachPreviousItem(e){let t;for(t=this._previousItHead;null!==t;t=t._nextPrevious)e(t)}forEachAddedItem(e){let t;for(t=this._additionsHead;null!==t;t=t._nextAdded)e(t)}forEachMovedItem(e){let t;for(t=this._movesHead;null!==t;t=t._nextMoved)e(t)}forEachRemovedItem(e){let t;for(t=this._removalsHead;null!==t;t=t._nextRemoved)e(t)}forEachIdentityChange(e){let t;for(t=this._identityChangesHead;null!==t;t=t._nextIdentityChange)e(t)}diff(e){if(null==e&&(e=[]),!Ac(e))throw new de(900,!1);return this.check(e)?this:null}onDestroy(){}check(e){this._reset();let r,s,o,t=this._itHead,i=!1;if(Array.isArray(e)){this.length=e.length;for(let a=0;a<this.length;a++)s=e[a],o=this._trackByFn(a,s),null!==t&&Object.is(t.trackById,o)?(i&&(t=this._verifyReinsertion(t,s,o,a)),Object.is(t.item,s)||this._addIdentityChange(t,s)):(t=this._mismatch(t,s,o,a),i=!0),t=t._next}else r=0,function zP(n,e){if(Array.isArray(n))for(let t=0;t<n.length;t++)e(n[t]);else{const t=n[jo()]();let i;for(;!(i=t.next()).done;)e(i.value)}}(e,a=>{o=this._trackByFn(r,a),null!==t&&Object.is(t.trackById,o)?(i&&(t=this._verifyReinsertion(t,a,o,r)),Object.is(t.item,a)||this._addIdentityChange(t,a)):(t=this._mismatch(t,a,o,r),i=!0),t=t._next,r++}),this.length=r;return this._truncate(t),this.collection=e,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let e;for(e=this._previousItHead=this._itHead;null!==e;e=e._next)e._nextPrevious=e._next;for(e=this._additionsHead;null!==e;e=e._nextAdded)e.previousIndex=e.currentIndex;for(this._additionsHead=this._additionsTail=null,e=this._movesHead;null!==e;e=e._nextMoved)e.previousIndex=e.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(e,t,i,r){let s;return null===e?s=this._itTail:(s=e._prev,this._remove(e)),null!==(e=null===this._unlinkedRecords?null:this._unlinkedRecords.get(i,null))?(Object.is(e.item,t)||this._addIdentityChange(e,t),this._reinsertAfter(e,s,r)):null!==(e=null===this._linkedRecords?null:this._linkedRecords.get(i,r))?(Object.is(e.item,t)||this._addIdentityChange(e,t),this._moveAfter(e,s,r)):e=this._addAfter(new cO(t,i),s,r),e}_verifyReinsertion(e,t,i,r){let s=null===this._unlinkedRecords?null:this._unlinkedRecords.get(i,null);return null!==s?e=this._reinsertAfter(s,e._prev,r):e.currentIndex!=r&&(e.currentIndex=r,this._addToMoves(e,r)),e}_truncate(e){for(;null!==e;){const t=e._next;this._addToRemovals(this._unlink(e)),e=t}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(e,t,i){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(e);const r=e._prevRemoved,s=e._nextRemoved;return null===r?this._removalsHead=s:r._nextRemoved=s,null===s?this._removalsTail=r:s._prevRemoved=r,this._insertAfter(e,t,i),this._addToMoves(e,i),e}_moveAfter(e,t,i){return this._unlink(e),this._insertAfter(e,t,i),this._addToMoves(e,i),e}_addAfter(e,t,i){return this._insertAfter(e,t,i),this._additionsTail=null===this._additionsTail?this._additionsHead=e:this._additionsTail._nextAdded=e,e}_insertAfter(e,t,i){const r=null===t?this._itHead:t._next;return e._next=r,e._prev=t,null===r?this._itTail=e:r._prev=e,null===t?this._itHead=e:t._next=e,null===this._linkedRecords&&(this._linkedRecords=new J_),this._linkedRecords.put(e),e.currentIndex=i,e}_remove(e){return this._addToRemovals(this._unlink(e))}_unlink(e){null!==this._linkedRecords&&this._linkedRecords.remove(e);const t=e._prev,i=e._next;return null===t?this._itHead=i:t._next=i,null===i?this._itTail=t:i._prev=t,e}_addToMoves(e,t){return e.previousIndex===t||(this._movesTail=null===this._movesTail?this._movesHead=e:this._movesTail._nextMoved=e),e}_addToRemovals(e){return null===this._unlinkedRecords&&(this._unlinkedRecords=new J_),this._unlinkedRecords.put(e),e.currentIndex=null,e._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=e,e._prevRemoved=null):(e._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=e),e}_addIdentityChange(e,t){return e.item=t,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=e:this._identityChangesTail._nextIdentityChange=e,e}}class cO{constructor(e,t){this.item=e,this.trackById=t,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class lO{constructor(){this._head=null,this._tail=null}add(e){null===this._head?(this._head=this._tail=e,e._nextDup=null,e._prevDup=null):(this._tail._nextDup=e,e._prevDup=this._tail,e._nextDup=null,this._tail=e)}get(e,t){let i;for(i=this._head;null!==i;i=i._nextDup)if((null===t||t<=i.currentIndex)&&Object.is(i.trackById,e))return i;return null}remove(e){const t=e._prevDup,i=e._nextDup;return null===t?this._head=i:t._nextDup=i,null===i?this._tail=t:i._prevDup=t,null===this._head}}class J_{constructor(){this.map=new Map}put(e){const t=e.trackById;let i=this.map.get(t);i||(i=new lO,this.map.set(t,i)),i.add(e)}get(e,t){const r=this.map.get(e);return r?r.get(e,t):null}remove(e){const t=e.trackById;return this.map.get(t).remove(e)&&this.map.delete(t),e}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function Q_(n,e,t){const i=n.previousIndex;if(null===i)return i;let r=0;return t&&i<t.length&&(r=t[i]),i+e+r}class ex{constructor(){}supports(e){return e instanceof Map||Ch(e)}create(){return new uO}}class uO{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(e){let t;for(t=this._mapHead;null!==t;t=t._next)e(t)}forEachPreviousItem(e){let t;for(t=this._previousMapHead;null!==t;t=t._nextPrevious)e(t)}forEachChangedItem(e){let t;for(t=this._changesHead;null!==t;t=t._nextChanged)e(t)}forEachAddedItem(e){let t;for(t=this._additionsHead;null!==t;t=t._nextAdded)e(t)}forEachRemovedItem(e){let t;for(t=this._removalsHead;null!==t;t=t._nextRemoved)e(t)}diff(e){if(e){if(!(e instanceof Map||Ch(e)))throw new de(900,!1)}else e=new Map;return this.check(e)?this:null}onDestroy(){}check(e){this._reset();let t=this._mapHead;if(this._appendAfter=null,this._forEach(e,(i,r)=>{if(t&&t.key===r)this._maybeAddToChanges(t,i),this._appendAfter=t,t=t._next;else{const s=this._getOrCreateRecordForKey(r,i);t=this._insertBeforeOrAppend(t,s)}}),t){t._prev&&(t._prev._next=null),this._removalsHead=t;for(let i=t;null!==i;i=i._nextRemoved)i===this._mapHead&&(this._mapHead=null),this._records.delete(i.key),i._nextRemoved=i._next,i.previousValue=i.currentValue,i.currentValue=null,i._prev=null,i._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(e,t){if(e){const i=e._prev;return t._next=e,t._prev=i,e._prev=t,i&&(i._next=t),e===this._mapHead&&(this._mapHead=t),this._appendAfter=e,e}return this._appendAfter?(this._appendAfter._next=t,t._prev=this._appendAfter):this._mapHead=t,this._appendAfter=t,null}_getOrCreateRecordForKey(e,t){if(this._records.has(e)){const r=this._records.get(e);this._maybeAddToChanges(r,t);const s=r._prev,o=r._next;return s&&(s._next=o),o&&(o._prev=s),r._next=null,r._prev=null,r}const i=new fO(e);return this._records.set(e,i),i.currentValue=t,this._addToAdditions(i),i}_reset(){if(this.isDirty){let e;for(this._previousMapHead=this._mapHead,e=this._previousMapHead;null!==e;e=e._next)e._nextPrevious=e._next;for(e=this._changesHead;null!==e;e=e._nextChanged)e.previousValue=e.currentValue;for(e=this._additionsHead;null!=e;e=e._nextAdded)e.previousValue=e.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(e,t){Object.is(t,e.currentValue)||(e.previousValue=e.currentValue,e.currentValue=t,this._addToChanges(e))}_addToAdditions(e){null===this._additionsHead?this._additionsHead=this._additionsTail=e:(this._additionsTail._nextAdded=e,this._additionsTail=e)}_addToChanges(e){null===this._changesHead?this._changesHead=this._changesTail=e:(this._changesTail._nextChanged=e,this._changesTail=e)}_forEach(e,t){e instanceof Map?e.forEach(t):Object.keys(e).forEach(i=>t(e[i],i))}}class fO{constructor(e){this.key=e,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function tx(){return new Yu([new K_])}let Yu=(()=>{class n{constructor(t){this.factories=t}static create(t,i){if(null!=i){const r=i.factories.slice();t=t.concat(r)}return new n(t)}static extend(t){return{provide:n,useFactory:i=>n.create(t,i||tx()),deps:[[n,new mc,new pc]]}}find(t){const i=this.factories.find(r=>r.supports(t));if(null!=i)return i;throw new de(901,!1)}}return n.\u0275prov=Te({token:n,providedIn:"root",factory:tx}),n})();function nx(){return new Uc([new ex])}let Uc=(()=>{class n{constructor(t){this.factories=t}static create(t,i){if(i){const r=i.factories.slice();t=t.concat(r)}return new n(t)}static extend(t){return{provide:n,useFactory:i=>n.create(t,i||nx()),deps:[[n,new mc,new pc]]}}find(t){const i=this.factories.find(r=>r.supports(t));if(i)return i;throw new de(901,!1)}}return n.\u0275prov=Te({token:n,providedIn:"root",factory:nx}),n})();const pO=H_(null,"core",[]);let mO=(()=>{class n{constructor(t){}}return n.\u0275fac=function(t){return new(t||n)(he($u))},n.\u0275mod=gr({type:n}),n.\u0275inj=Zi({}),n})(),yd=null;function Qs(){return yd}class yO{}const ei=new ue("DocumentToken");let _d=(()=>{class n{historyGo(t){throw new Error("Not implemented")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=Te({token:n,factory:function(){return function _O(){return he(ix)}()},providedIn:"platform"}),n})();const xO=new ue("Location Initialized");let ix=(()=>{class n extends _d{constructor(t){super(),this._doc=t,this._init()}_init(){this.location=window.location,this._history=window.history}getBaseHrefFromDOM(){return Qs().getBaseHref(this._doc)}onPopState(t){const i=Qs().getGlobalEventTarget(this._doc,"window");return i.addEventListener("popstate",t,!1),()=>i.removeEventListener("popstate",t)}onHashChange(t){const i=Qs().getGlobalEventTarget(this._doc,"window");return i.addEventListener("hashchange",t,!1),()=>i.removeEventListener("hashchange",t)}get href(){return this.location.href}get protocol(){return this.location.protocol}get hostname(){return this.location.hostname}get port(){return this.location.port}get pathname(){return this.location.pathname}get search(){return this.location.search}get hash(){return this.location.hash}set pathname(t){this.location.pathname=t}pushState(t,i,r){rx()?this._history.pushState(t,i,r):this.location.hash=r}replaceState(t,i,r){rx()?this._history.replaceState(t,i,r):this.location.hash=r}forward(){this._history.forward()}back(){this._history.back()}historyGo(t=0){this._history.go(t)}getState(){return this._history.state}}return n.\u0275fac=function(t){return new(t||n)(he(ei))},n.\u0275prov=Te({token:n,factory:function(){return function bO(){return new ix(he(ei))}()},providedIn:"platform"}),n})();function rx(){return!!window.history.pushState}function xd(n,e){if(0==n.length)return e;if(0==e.length)return n;let t=0;return n.endsWith("/")&&t++,e.startsWith("/")&&t++,2==t?n+e.substring(1):1==t?n+e:n+"/"+e}function sx(n){const e=n.match(/#|\?|$/),t=e&&e.index||n.length;return n.slice(0,t-("/"===n[t-1]?1:0))+n.slice(t)}function _s(n){return n&&"?"!==n[0]?"?"+n:n}let Yo=(()=>{class n{historyGo(t){throw new Error("Not implemented")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=Te({token:n,factory:function(){return ze(ax)},providedIn:"root"}),n})();const ox=new ue("appBaseHref");let ax=(()=>{class n extends Yo{constructor(t,i){super(),this._platformLocation=t,this._removeListenerFns=[],this._baseHref=i??this._platformLocation.getBaseHrefFromDOM()??ze(ei).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return xd(this._baseHref,t)}path(t=!1){const i=this._platformLocation.pathname+_s(this._platformLocation.search),r=this._platformLocation.hash;return r&&t?`${i}${r}`:i}pushState(t,i,r,s){const o=this.prepareExternalUrl(r+_s(s));this._platformLocation.pushState(t,i,o)}replaceState(t,i,r,s){const o=this.prepareExternalUrl(r+_s(s));this._platformLocation.replaceState(t,i,o)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}}return n.\u0275fac=function(t){return new(t||n)(he(_d),he(ox,8))},n.\u0275prov=Te({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),MO=(()=>{class n extends Yo{constructor(t,i){super(),this._platformLocation=t,this._baseHref="",this._removeListenerFns=[],null!=i&&(this._baseHref=i)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}path(t=!1){let i=this._platformLocation.hash;return null==i&&(i="#"),i.length>0?i.substring(1):i}prepareExternalUrl(t){const i=xd(this._baseHref,t);return i.length>0?"#"+i:i}pushState(t,i,r,s){let o=this.prepareExternalUrl(r+_s(s));0==o.length&&(o=this._platformLocation.pathname),this._platformLocation.pushState(t,i,o)}replaceState(t,i,r,s){let o=this.prepareExternalUrl(r+_s(s));0==o.length&&(o=this._platformLocation.pathname),this._platformLocation.replaceState(t,i,o)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}}return n.\u0275fac=function(t){return new(t||n)(he(_d),he(ox,8))},n.\u0275prov=Te({token:n,factory:n.\u0275fac}),n})(),bd=(()=>{class n{constructor(t){this._subject=new Qn,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=t;const i=this._locationStrategy.getBaseHref();this._basePath=function SO(n){if(new RegExp("^(https?:)?//").test(n)){const[,t]=n.split(/\/\/[^\/]+/);return t}return n}(sx(cx(i))),this._locationStrategy.onPopState(r=>{this._subject.emit({url:this.path(!0),pop:!0,state:r.state,type:r.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(t=!1){return this.normalize(this._locationStrategy.path(t))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(t,i=""){return this.path()==this.normalize(t+_s(i))}normalize(t){return n.stripTrailingSlash(function CO(n,e){return n&&e.startsWith(n)?e.substring(n.length):e}(this._basePath,cx(t)))}prepareExternalUrl(t){return t&&"/"!==t[0]&&(t="/"+t),this._locationStrategy.prepareExternalUrl(t)}go(t,i="",r=null){this._locationStrategy.pushState(r,"",t,i),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+_s(i)),r)}replaceState(t,i="",r=null){this._locationStrategy.replaceState(r,"",t,i),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+_s(i)),r)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(t=0){this._locationStrategy.historyGo?.(t)}onUrlChange(t){return this._urlChangeListeners.push(t),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(i=>{this._notifyUrlChangeListeners(i.url,i.state)})),()=>{const i=this._urlChangeListeners.indexOf(t);this._urlChangeListeners.splice(i,1),0===this._urlChangeListeners.length&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(t="",i){this._urlChangeListeners.forEach(r=>r(t,i))}subscribe(t,i,r){return this._subject.subscribe({next:t,error:i,complete:r})}}return n.normalizeQueryParams=_s,n.joinWithSlash=xd,n.stripTrailingSlash=sx,n.\u0275fac=function(t){return new(t||n)(he(Yo))},n.\u0275prov=Te({token:n,factory:function(){return function wO(){return new bd(he(Yo))}()},providedIn:"root"}),n})();function cx(n){return n.replace(/\/index.html$/,"")}let Ld=(()=>{class n{constructor(t,i,r,s){this._iterableDiffers=t,this._keyValueDiffers=i,this._ngEl=r,this._renderer=s,this._iterableDiffer=null,this._keyValueDiffer=null,this._initialClasses=[],this._rawClass=null}set klass(t){this._removeClasses(this._initialClasses),this._initialClasses="string"==typeof t?t.split(/\s+/):[],this._applyClasses(this._initialClasses),this._applyClasses(this._rawClass)}set ngClass(t){this._removeClasses(this._rawClass),this._applyClasses(this._initialClasses),this._iterableDiffer=null,this._keyValueDiffer=null,this._rawClass="string"==typeof t?t.split(/\s+/):t,this._rawClass&&(Ac(this._rawClass)?this._iterableDiffer=this._iterableDiffers.find(this._rawClass).create():this._keyValueDiffer=this._keyValueDiffers.find(this._rawClass).create())}ngDoCheck(){if(this._iterableDiffer){const t=this._iterableDiffer.diff(this._rawClass);t&&this._applyIterableChanges(t)}else if(this._keyValueDiffer){const t=this._keyValueDiffer.diff(this._rawClass);t&&this._applyKeyValueChanges(t)}}_applyKeyValueChanges(t){t.forEachAddedItem(i=>this._toggleClass(i.key,i.currentValue)),t.forEachChangedItem(i=>this._toggleClass(i.key,i.currentValue)),t.forEachRemovedItem(i=>{i.previousValue&&this._toggleClass(i.key,!1)})}_applyIterableChanges(t){t.forEachAddedItem(i=>{if("string"!=typeof i.item)throw new Error(`NgClass can only toggle CSS classes expressed as strings, got ${zt(i.item)}`);this._toggleClass(i.item,!0)}),t.forEachRemovedItem(i=>this._toggleClass(i.item,!1))}_applyClasses(t){t&&(Array.isArray(t)||t instanceof Set?t.forEach(i=>this._toggleClass(i,!0)):Object.keys(t).forEach(i=>this._toggleClass(i,!!t[i])))}_removeClasses(t){t&&(Array.isArray(t)||t instanceof Set?t.forEach(i=>this._toggleClass(i,!1)):Object.keys(t).forEach(i=>this._toggleClass(i,!1)))}_toggleClass(t,i){(t=t.trim())&&t.split(/\s+/g).forEach(r=>{i?this._renderer.addClass(this._ngEl.nativeElement,r):this._renderer.removeClass(this._ngEl.nativeElement,r)})}}return n.\u0275fac=function(t){return new(t||n)(Se(Yu),Se(Uc),Se(hs),Se(Cc))},n.\u0275dir=$n({type:n,selectors:[["","ngClass",""]],inputs:{klass:["class","klass"],ngClass:"ngClass"},standalone:!0}),n})();class uk{constructor(e,t,i,r){this.$implicit=e,this.ngForOf=t,this.index=i,this.count=r}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let _x=(()=>{class n{constructor(t,i,r){this._viewContainer=t,this._template=i,this._differs=r,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForOf(t){this._ngForOf=t,this._ngForOfDirty=!0}set ngForTrackBy(t){this._trackByFn=t}get ngForTrackBy(){return this._trackByFn}set ngForTemplate(t){t&&(this._template=t)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const t=this._ngForOf;!this._differ&&t&&(this._differ=this._differs.find(t).create(this.ngForTrackBy))}if(this._differ){const t=this._differ.diff(this._ngForOf);t&&this._applyChanges(t)}}_applyChanges(t){const i=this._viewContainer;t.forEachOperation((r,s,o)=>{if(null==r.previousIndex)i.createEmbeddedView(this._template,new uk(r.item,this._ngForOf,-1,-1),null===o?void 0:o);else if(null==o)i.remove(null===s?void 0:s);else if(null!==s){const a=i.get(s);i.move(a,o),xx(a,r)}});for(let r=0,s=i.length;r<s;r++){const a=i.get(r).context;a.index=r,a.count=s,a.ngForOf=this._ngForOf}t.forEachIdentityChange(r=>{xx(i.get(r.currentIndex),r)})}static ngTemplateContextGuard(t,i){return!0}}return n.\u0275fac=function(t){return new(t||n)(Se(Cr),Se(gs),Se(Yu))},n.\u0275dir=$n({type:n,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"},standalone:!0}),n})();function xx(n,e){n.context.$implicit=e.item}let Rd=(()=>{class n{constructor(t,i){this._viewContainer=t,this._context=new hk,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=i}set ngIf(t){this._context.$implicit=this._context.ngIf=t,this._updateView()}set ngIfThen(t){bx("ngIfThen",t),this._thenTemplateRef=t,this._thenViewRef=null,this._updateView()}set ngIfElse(t){bx("ngIfElse",t),this._elseTemplateRef=t,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(t,i){return!0}}return n.\u0275fac=function(t){return new(t||n)(Se(Cr),Se(gs))},n.\u0275dir=$n({type:n,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"},standalone:!0}),n})();class hk{constructor(){this.$implicit=null,this.ngIf=null}}function bx(n,e){if(e&&!e.createEmbeddedView)throw new Error(`${n} must be a TemplateRef, but received '${zt(e)}'.`)}class yk{createSubscription(e,t){return e.subscribe({next:t,error:i=>{throw i}})}dispose(e){e.unsubscribe()}}class _k{createSubscription(e,t){return e.then(t,i=>{throw i})}dispose(e){}}const xk=new _k,bk=new yk;let Nd=(()=>{class n{constructor(t){this._latestValue=null,this._subscription=null,this._obj=null,this._strategy=null,this._ref=t}ngOnDestroy(){this._subscription&&this._dispose(),this._ref=null}transform(t){return this._obj?t!==this._obj?(this._dispose(),this.transform(t)):this._latestValue:(t&&this._subscribe(t),this._latestValue)}_subscribe(t){this._obj=t,this._strategy=this._selectStrategy(t),this._subscription=this._strategy.createSubscription(t,i=>this._updateLatestValue(t,i))}_selectStrategy(t){if(Lu(t))return xk;if(gv(t))return bk;throw function Dr(n,e){return new de(2100,!1)}()}_dispose(){this._strategy.dispose(this._subscription),this._latestValue=null,this._subscription=null,this._obj=null}_updateLatestValue(t,i){t===this._obj&&(this._latestValue=i,this._ref.markForCheck())}}return n.\u0275fac=function(t){return new(t||n)(Se(hd,16))},n.\u0275pipe=bi({name:"async",type:n,pure:!1,standalone:!0}),n})(),Hk=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=gr({type:n}),n.\u0275inj=Zi({}),n})();let Wk=(()=>{class n{}return n.\u0275prov=Te({token:n,providedIn:"root",factory:()=>new jk(he(ei),window)}),n})();class jk{constructor(e,t){this.document=e,this.window=t,this.offset=()=>[0,0]}setOffset(e){this.offset=Array.isArray(e)?()=>e:e}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(e){this.supportsScrolling()&&this.window.scrollTo(e[0],e[1])}scrollToAnchor(e){if(!this.supportsScrolling())return;const t=function $k(n,e){const t=n.getElementById(e)||n.getElementsByName(e)[0];if(t)return t;if("function"==typeof n.createTreeWalker&&n.body&&(n.body.createShadowRoot||n.body.attachShadow)){const i=n.createTreeWalker(n.body,NodeFilter.SHOW_ELEMENT);let r=i.currentNode;for(;r;){const s=r.shadowRoot;if(s){const o=s.getElementById(e)||s.querySelector(`[name="${e}"]`);if(o)return o}r=i.nextNode()}}return null}(this.document,e);t&&(this.scrollToElement(t),t.focus())}setHistoryScrollRestoration(e){if(this.supportScrollRestoration()){const t=this.window.history;t&&t.scrollRestoration&&(t.scrollRestoration=e)}}scrollToElement(e){const t=e.getBoundingClientRect(),i=t.left+this.window.pageXOffset,r=t.top+this.window.pageYOffset,s=this.offset();this.window.scrollTo(i-s[0],r-s[1])}supportScrollRestoration(){try{if(!this.supportsScrolling())return!1;const e=Sx(this.window.history)||Sx(Object.getPrototypeOf(this.window.history));return!(!e||!e.writable&&!e.set)}catch{return!1}}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch{return!1}}}function Sx(n){return Object.getOwnPropertyDescriptor(n,"scrollRestoration")}class xV extends yO{constructor(){super(...arguments),this.supportsDOMEvents=!0}}class Hd extends xV{static makeCurrent(){!function vO(n){yd||(yd=n)}(new Hd)}onAndCancel(e,t,i){return e.addEventListener(t,i,!1),()=>{e.removeEventListener(t,i,!1)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.parentNode&&e.parentNode.removeChild(e)}createElement(e,t){return(t=t||this.getDefaultDocument()).createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return"window"===t?window:"document"===t?e:"body"===t?e.body:null}getBaseHref(e){const t=function bV(){return jc=jc||document.querySelector("base"),jc?jc.getAttribute("href"):null}();return null==t?null:function MV(n){a4=a4||document.createElement("a"),a4.setAttribute("href",n);const e=a4.pathname;return"/"===e.charAt(0)?e:`/${e}`}(t)}resetBaseElement(){jc=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return function ck(n,e){e=encodeURIComponent(e);for(const t of n.split(";")){const i=t.indexOf("="),[r,s]=-1==i?[t,""]:[t.slice(0,i),t.slice(i+1)];if(r.trim()===e)return decodeURIComponent(s)}return null}(document.cookie,e)}}let a4,jc=null;const Lx=new ue("TRANSITION_ID"),CV=[{provide:Gu,useFactory:function wV(n,e,t){return()=>{t.get(Wu).donePromise.then(()=>{const i=Qs(),r=e.querySelectorAll(`style[ng-transition="${n}"]`);for(let s=0;s<r.length;s++)i.remove(r[s])})}},deps:[Lx,ei,br],multi:!0}];let EV=(()=>{class n{build(){return new XMLHttpRequest}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=Te({token:n,factory:n.\u0275fac}),n})();const c4=new ue("EventManagerPlugins");let l4=(()=>{class n{constructor(t,i){this._zone=i,this._eventNameToPlugin=new Map,t.forEach(r=>r.manager=this),this._plugins=t.slice().reverse()}addEventListener(t,i,r){return this._findPluginFor(i).addEventListener(t,i,r)}addGlobalEventListener(t,i,r){return this._findPluginFor(i).addGlobalEventListener(t,i,r)}getZone(){return this._zone}_findPluginFor(t){const i=this._eventNameToPlugin.get(t);if(i)return i;const r=this._plugins;for(let s=0;s<r.length;s++){const o=r[s];if(o.supports(t))return this._eventNameToPlugin.set(t,o),o}throw new Error(`No event manager plugin found for event ${t}`)}}return n.\u0275fac=function(t){return new(t||n)(he(c4),he(fn))},n.\u0275prov=Te({token:n,factory:n.\u0275fac}),n})();class Rx{constructor(e){this._doc=e}addGlobalEventListener(e,t,i){const r=Qs().getGlobalEventTarget(this._doc,e);if(!r)throw new Error(`Unsupported event target ${r} for event ${t}`);return this.addEventListener(r,t,i)}}let Px=(()=>{class n{constructor(){this._stylesSet=new Set}addStyles(t){const i=new Set;t.forEach(r=>{this._stylesSet.has(r)||(this._stylesSet.add(r),i.add(r))}),this.onStylesAdded(i)}onStylesAdded(t){}getAllStyles(){return Array.from(this._stylesSet)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=Te({token:n,factory:n.\u0275fac}),n})(),$c=(()=>{class n extends Px{constructor(t){super(),this._doc=t,this._hostNodes=new Map,this._hostNodes.set(t.head,[])}_addStylesToHost(t,i,r){t.forEach(s=>{const o=this._doc.createElement("style");o.textContent=s,r.push(i.appendChild(o))})}addHost(t){const i=[];this._addStylesToHost(this._stylesSet,t,i),this._hostNodes.set(t,i)}removeHost(t){const i=this._hostNodes.get(t);i&&i.forEach(zx),this._hostNodes.delete(t)}onStylesAdded(t){this._hostNodes.forEach((i,r)=>{this._addStylesToHost(t,r,i)})}ngOnDestroy(){this._hostNodes.forEach(t=>t.forEach(zx))}}return n.\u0275fac=function(t){return new(t||n)(he(ei))},n.\u0275prov=Te({token:n,factory:n.\u0275fac}),n})();function zx(n){Qs().remove(n)}const Ud={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},Bd=/%COMP%/g;function Gd(n,e){return e.flat(100).map(t=>t.replace(Bd,n))}function Ox(n){return e=>{if("__ngUnwrap__"===e)return n;!1===n(e)&&(e.preventDefault(),e.returnValue=!1)}}let Wd=(()=>{class n{constructor(t,i,r){this.eventManager=t,this.sharedStylesHost=i,this.appId=r,this.rendererByCompId=new Map,this.defaultRenderer=new jd(t)}createRenderer(t,i){if(!t||!i)return this.defaultRenderer;switch(i.encapsulation){case Or.Emulated:{let r=this.rendererByCompId.get(i.id);return r||(r=new RV(this.eventManager,this.sharedStylesHost,i,this.appId),this.rendererByCompId.set(i.id,r)),r.applyToHost(t),r}case 1:case Or.ShadowDom:return new PV(this.eventManager,this.sharedStylesHost,t,i);default:if(!this.rendererByCompId.has(i.id)){const r=Gd(i.id,i.styles);this.sharedStylesHost.addStyles(r),this.rendererByCompId.set(i.id,this.defaultRenderer)}return this.defaultRenderer}}begin(){}end(){}}return n.\u0275fac=function(t){return new(t||n)(he(l4),he($c),he(Hc))},n.\u0275prov=Te({token:n,factory:n.\u0275fac}),n})();class jd{constructor(e){this.eventManager=e,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(e,t){return t?document.createElementNS(Ud[t]||t,e):document.createElement(e)}createComment(e){return document.createComment(e)}createText(e){return document.createTextNode(e)}appendChild(e,t){(Vx(e)?e.content:e).appendChild(t)}insertBefore(e,t,i){e&&(Vx(e)?e.content:e).insertBefore(t,i)}removeChild(e,t){e&&e.removeChild(t)}selectRootElement(e,t){let i="string"==typeof e?document.querySelector(e):e;if(!i)throw new Error(`The selector "${e}" did not match any elements`);return t||(i.textContent=""),i}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,i,r){if(r){t=r+":"+t;const s=Ud[r];s?e.setAttributeNS(s,t,i):e.setAttribute(t,i)}else e.setAttribute(t,i)}removeAttribute(e,t,i){if(i){const r=Ud[i];r?e.removeAttributeNS(r,t):e.removeAttribute(`${i}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,i,r){r&(Mi.DashCase|Mi.Important)?e.style.setProperty(t,i,r&Mi.Important?"important":""):e.style[t]=i}removeStyle(e,t,i){i&Mi.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,i){e[t]=i}setValue(e,t){e.nodeValue=t}listen(e,t,i){return"string"==typeof e?this.eventManager.addGlobalEventListener(e,t,Ox(i)):this.eventManager.addEventListener(e,t,Ox(i))}}function Vx(n){return"TEMPLATE"===n.tagName&&void 0!==n.content}class RV extends jd{constructor(e,t,i,r){super(e),this.component=i;const s=Gd(r+"-"+i.id,i.styles);t.addStyles(s),this.contentAttr=function TV(n){return"_ngcontent-%COMP%".replace(Bd,n)}(r+"-"+i.id),this.hostAttr=function IV(n){return"_nghost-%COMP%".replace(Bd,n)}(r+"-"+i.id)}applyToHost(e){super.setAttribute(e,this.hostAttr,"")}createElement(e,t){const i=super.createElement(e,t);return super.setAttribute(i,this.contentAttr,""),i}}class PV extends jd{constructor(e,t,i,r){super(e),this.sharedStylesHost=t,this.hostEl=i,this.shadowRoot=i.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const s=Gd(r.id,r.styles);for(let o=0;o<s.length;o++){const a=document.createElement("style");a.textContent=s[o],this.shadowRoot.appendChild(a)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,i){return super.insertBefore(this.nodeOrShadowRoot(e),t,i)}removeChild(e,t){return super.removeChild(this.nodeOrShadowRoot(e),t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}}let zV=(()=>{class n extends Rx{constructor(t){super(t)}supports(t){return!0}addEventListener(t,i,r){return t.addEventListener(i,r,!1),()=>this.removeEventListener(t,i,r)}removeEventListener(t,i,r){return t.removeEventListener(i,r)}}return n.\u0275fac=function(t){return new(t||n)(he(ei))},n.\u0275prov=Te({token:n,factory:n.\u0275fac}),n})();const Hx=["alt","control","meta","shift"],NV={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},FV={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey};let OV=(()=>{class n extends Rx{constructor(t){super(t)}supports(t){return null!=n.parseEventName(t)}addEventListener(t,i,r){const s=n.parseEventName(i),o=n.eventCallback(s.fullKey,r,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>Qs().onAndCancel(t,s.domEventName,o))}static parseEventName(t){const i=t.toLowerCase().split("."),r=i.shift();if(0===i.length||"keydown"!==r&&"keyup"!==r)return null;const s=n._normalizeKey(i.pop());let o="",a=i.indexOf("code");if(a>-1&&(i.splice(a,1),o="code."),Hx.forEach(l=>{const u=i.indexOf(l);u>-1&&(i.splice(u,1),o+=l+".")}),o+=s,0!=i.length||0===s.length)return null;const c={};return c.domEventName=r,c.fullKey=o,c}static matchEventFullKeyCode(t,i){let r=NV[t.key]||t.key,s="";return i.indexOf("code.")>-1&&(r=t.code,s="code."),!(null==r||!r)&&(r=r.toLowerCase()," "===r?r="space":"."===r&&(r="dot"),Hx.forEach(o=>{o!==r&&(0,FV[o])(t)&&(s+=o+".")}),s+=r,s===i)}static eventCallback(t,i,r){return s=>{n.matchEventFullKeyCode(s,t)&&r.runGuarded(()=>i(s))}}static _normalizeKey(t){return"esc"===t?"escape":t}}return n.\u0275fac=function(t){return new(t||n)(he(ei))},n.\u0275prov=Te({token:n,factory:n.\u0275fac}),n})();const UV=H_(pO,"browser",[{provide:T_,useValue:"browser"},{provide:A_,useValue:function kV(){Hd.makeCurrent()},multi:!0},{provide:ei,useFactory:function HV(){return function dL(n){j5=n}(document),document},deps:[]}]),Gx=new ue(""),Wx=[{provide:ju,useClass:class SV{addToWindow(e){Ft.getAngularTestability=(i,r=!0)=>{const s=e.findTestabilityInTree(i,r);if(null==s)throw new Error("Could not find testability for element.");return s},Ft.getAllAngularTestabilities=()=>e.getAllTestabilities(),Ft.getAllAngularRootElements=()=>e.getAllRootElements(),Ft.frameworkStabilizers||(Ft.frameworkStabilizers=[]),Ft.frameworkStabilizers.push(i=>{const r=Ft.getAllAngularTestabilities();let s=r.length,o=!1;const a=function(c){o=o||c,s--,0==s&&i(o)};r.forEach(function(c){c.whenStable(a)})})}findTestabilityInTree(e,t,i){return null==t?null:e.getTestability(t)??(i?Qs().isShadowRoot(t)?this.findTestabilityInTree(e,t.host,!0):this.findTestabilityInTree(e,t.parentElement,!0):null)}},deps:[]},{provide:F_,useClass:ad,deps:[fn,cd,ju]},{provide:ad,useClass:ad,deps:[fn,cd,ju]}],jx=[{provide:Q5,useValue:"root"},{provide:f1,useFactory:function VV(){return new f1},deps:[]},{provide:c4,useClass:zV,multi:!0,deps:[ei,fn,T_]},{provide:c4,useClass:OV,multi:!0,deps:[ei]},{provide:Wd,useClass:Wd,deps:[l4,$c,Hc]},{provide:_g,useExisting:Wd},{provide:Px,useExisting:$c},{provide:$c,useClass:$c,deps:[ei]},{provide:l4,useClass:l4,deps:[c4,fn]},{provide:class qk{},useClass:EV,deps:[]},[]];let BV=(()=>{class n{constructor(t){}static withServerTransition(t){return{ngModule:n,providers:[{provide:Hc,useValue:t.appId},{provide:Lx,useExisting:Hc},CV]}}}return n.\u0275fac=function(t){return new(t||n)(he(Gx,12))},n.\u0275mod=gr({type:n}),n.\u0275inj=Zi({providers:[...jx,...Wx],imports:[Hk,mO]}),n})(),$x=(()=>{class n{constructor(t){this._doc=t}getTitle(){return this._doc.title}setTitle(t){this._doc.title=t||""}}return n.\u0275fac=function(t){return new(t||n)(he(ei))},n.\u0275prov=Te({token:n,factory:function(t){let i=null;return i=t?new t:function WV(){return new $x(he(ei))}(),i},providedIn:"root"}),n})();typeof window<"u"&&window;let Xx=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=Te({token:n,factory:function(t){let i=null;return i=t?new(t||n):he(Yx),i},providedIn:"root"}),n})(),Yx=(()=>{class n extends Xx{constructor(t){super(),this._doc=t}sanitize(t,i){if(null==i)return null;switch(t){case Ot.NONE:return i;case Ot.HTML:return Br(i,"HTML")?Ni(i):rg(this._doc,String(i)).toString();case Ot.STYLE:return Br(i,"Style")?Ni(i):i;case Ot.SCRIPT:if(Br(i,"Script"))return Ni(i);throw new Error("unsafe value used in a script context");case Ot.URL:return Br(i,"URL")?Ni(i):mu(String(i));case Ot.RESOURCE_URL:if(Br(i,"ResourceURL"))return Ni(i);throw new Error(`unsafe value used in a resource URL context (see ${z3})`);default:throw new Error(`Unexpected SecurityContext ${t} (see ${z3})`)}}bypassSecurityTrustHtml(t){return function xL(n){return new pL(n)}(t)}bypassSecurityTrustStyle(t){return function bL(n){return new mL(n)}(t)}bypassSecurityTrustScript(t){return function ML(n){return new gL(n)}(t)}bypassSecurityTrustUrl(t){return function wL(n){return new vL(n)}(t)}bypassSecurityTrustResourceUrl(t){return function CL(n){return new yL(n)}(t)}}return n.\u0275fac=function(t){return new(t||n)(he(ei))},n.\u0275prov=Te({token:n,factory:function(t){let i=null;return i=t?new t:function KV(n){return new Yx(n.get(ei))}(he(br)),i},providedIn:"root"}),n})();function Fe(...n){return En(n,J2(n))}class Si extends Fr{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){const t=super._subscribe(e);return!t.closed&&e.next(this._value),t}getValue(){const{hasError:e,thrownError:t,_value:i}=this;if(e)throw t;return this._throwIfClosed(),i}next(e){super.next(this._value=e)}}const u4=Rf(n=>function(){n(this),this.name="EmptyError",this.message="no elements in sequence"}),{isArray:JV}=Array,{getPrototypeOf:QV,prototype:eH,keys:tH}=Object;const{isArray:rH}=Array;function Kx(...n){const e=J2(n),t=h9(n),{args:i,keys:r}=function nH(n){if(1===n.length){const e=n[0];if(JV(e))return{args:e,keys:null};if(function iH(n){return n&&"object"==typeof n&&QV(n)===eH}(e)){const t=tH(e);return{args:t.map(i=>e[i]),keys:t}}}return{args:n,keys:null}}(n);if(0===i.length)return En([],e);const s=new en(function cH(n,e,t=ns){return i=>{Jx(e,()=>{const{length:r}=n,s=new Array(r);let o=r,a=r;for(let c=0;c<r;c++)Jx(e,()=>{const l=En(n[c],e);let u=!1;l.subscribe(ln(i,f=>{s[c]=f,u||(u=!0,a--),a||i.next(t(s.slice()))},()=>{--o||i.complete()}))},i)},i)}}(i,e,r?o=>function aH(n,e){return n.reduce((t,i,r)=>(t[i]=e[r],t),{})}(r,o):ns));return t?s.pipe(function oH(n){return lt(e=>function sH(n,e){return rH(e)?n(...e):n(e)}(n,e))}(t)):s}function Jx(n,e,t){n?is(t,n,e):e()}function Zd(...n){return function lH(){return Wa(1)}()(En(n,J2(n)))}function Qx(n){return new en(e=>{pr(n()).subscribe(e)})}function qc(n,e){const t=Xt(n)?n:()=>n,i=r=>r.error(t());return new en(e?r=>e.schedule(i,0,r):i)}function Xd(){return yn((n,e)=>{let t=null;n._refCount++;const i=ln(e,void 0,void 0,void 0,()=>{if(!n||n._refCount<=0||0<--n._refCount)return void(t=null);const r=n._connection,s=t;t=null,r&&(!s||r===s)&&r.unsubscribe(),e.unsubscribe()});n.subscribe(i),i.closed||(t=n.connect())})}class eb extends en{constructor(e,t){super(),this.source=e,this.subjectFactory=t,this._subject=null,this._refCount=0,this._connection=null,Jp(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){const e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:e}=this;this._subject=this._connection=null,e?.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new Ai;const t=this.getSubject();e.add(this.source.subscribe(ln(t,void 0,()=>{this._teardown(),t.complete()},i=>{this._teardown(),t.error(i)},()=>this._teardown()))),e.closed&&(this._connection=null,e=Ai.EMPTY)}return e}refCount(){return Xd()(this)}}function qr(n,e){return yn((t,i)=>{let r=null,s=0,o=!1;const a=()=>o&&!r&&i.complete();t.subscribe(ln(i,c=>{r?.unsubscribe();let l=0;const u=s++;pr(n(c,u)).subscribe(r=ln(i,f=>i.next(e?e(c,f,u,l++):f),()=>{r=null,a()}))},()=>{o=!0,a()}))})}function Zc(n){return n<=0?()=>rs:yn((e,t)=>{let i=0;e.subscribe(ln(t,r=>{++i<=n&&(t.next(r),n<=i&&t.complete())}))})}function to(n,e){return yn((t,i)=>{let r=0;t.subscribe(ln(i,s=>n.call(e,s,r++)&&i.next(s)))})}function f4(n){return yn((e,t)=>{let i=!1;e.subscribe(ln(t,r=>{i=!0,t.next(r)},()=>{i||t.next(n),t.complete()}))})}function tb(n=fH){return yn((e,t)=>{let i=!1;e.subscribe(ln(t,r=>{i=!0,t.next(r)},()=>i?t.complete():t.error(n())))})}function fH(){return new u4}function no(n,e){const t=arguments.length>=2;return i=>i.pipe(n?to((r,s)=>n(r,s,i)):ns,Zc(1),t?f4(e):tb(()=>new u4))}function Ko(n,e){return Xt(e)?Bn(n,e,1):Bn(n,1)}function ti(n,e,t){const i=Xt(n)||e||t?{next:n,error:e,complete:t}:n;return i?yn((r,s)=>{var o;null===(o=i.subscribe)||void 0===o||o.call(i);let a=!0;r.subscribe(ln(s,c=>{var l;null===(l=i.next)||void 0===l||l.call(i,c),s.next(c)},()=>{var c;a=!1,null===(c=i.complete)||void 0===c||c.call(i),s.complete()},c=>{var l;a=!1,null===(l=i.error)||void 0===l||l.call(i,c),s.error(c)},()=>{var c,l;a&&(null===(c=i.unsubscribe)||void 0===c||c.call(i)),null===(l=i.finalize)||void 0===l||l.call(i)}))}):ns}function io(n){return yn((e,t)=>{let s,i=null,r=!1;i=e.subscribe(ln(t,void 0,void 0,o=>{s=pr(n(o,io(n)(e))),i?(i.unsubscribe(),i=null,s.subscribe(t)):r=!0})),r&&(i.unsubscribe(),i=null,s.subscribe(t))})}function hH(n,e,t,i,r){return(s,o)=>{let a=t,c=e,l=0;s.subscribe(ln(o,u=>{const f=l++;c=a?n(c,u,f):(a=!0,u),i&&o.next(c)},r&&(()=>{a&&o.next(c),o.complete()})))}}function Yd(n,e){return yn(hH(n,e,arguments.length>=2,!0))}function Kd(n){return n<=0?()=>rs:yn((e,t)=>{let i=[];e.subscribe(ln(t,r=>{i.push(r),n<i.length&&i.shift()},()=>{for(const r of i)t.next(r);t.complete()},void 0,()=>{i=null}))})}function nb(n,e){const t=arguments.length>=2;return i=>i.pipe(n?to((r,s)=>n(r,s,i)):ns,Kd(1),t?f4(e):tb(()=>new u4))}function Jd(n){return yn((e,t)=>{try{e.subscribe(t)}finally{t.add(n)}})}const ot="primary",Xc=Symbol("RouteTitle");class mH{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t[0]:t}return null}getAll(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t:[t]}return[]}get keys(){return Object.keys(this.params)}}function I1(n){return new mH(n)}function gH(n,e,t){const i=t.path.split("/");if(i.length>n.length||"full"===t.pathMatch&&(e.hasChildren()||i.length<n.length))return null;const r={};for(let s=0;s<i.length;s++){const o=i[s],a=n[s];if(o.startsWith(":"))r[o.substring(1)]=a;else if(o!==a.path)return null}return{consumed:n.slice(0,i.length),posParams:r}}function Zr(n,e){const t=n?Object.keys(n):void 0,i=e?Object.keys(e):void 0;if(!t||!i||t.length!=i.length)return!1;let r;for(let s=0;s<t.length;s++)if(r=t[s],!ib(n[r],e[r]))return!1;return!0}function ib(n,e){if(Array.isArray(n)&&Array.isArray(e)){if(n.length!==e.length)return!1;const t=[...n].sort(),i=[...e].sort();return t.every((r,s)=>i[s]===r)}return n===e}function rb(n){return Array.prototype.concat.apply([],n)}function sb(n){return n.length>0?n[n.length-1]:null}function jn(n,e){for(const t in n)n.hasOwnProperty(t)&&e(n[t],t)}function ro(n){return vv(n)?n:Lu(n)?En(Promise.resolve(n)):Fe(n)}const h4=!1,yH={exact:function cb(n,e,t){if(!Qo(n.segments,e.segments)||!d4(n.segments,e.segments,t)||n.numberOfChildren!==e.numberOfChildren)return!1;for(const i in e.children)if(!n.children[i]||!cb(n.children[i],e.children[i],t))return!1;return!0},subset:lb},ob={exact:function _H(n,e){return Zr(n,e)},subset:function xH(n,e){return Object.keys(e).length<=Object.keys(n).length&&Object.keys(e).every(t=>ib(n[t],e[t]))},ignored:()=>!0};function ab(n,e,t){return yH[t.paths](n.root,e.root,t.matrixParams)&&ob[t.queryParams](n.queryParams,e.queryParams)&&!("exact"===t.fragment&&n.fragment!==e.fragment)}function lb(n,e,t){return ub(n,e,e.segments,t)}function ub(n,e,t,i){if(n.segments.length>t.length){const r=n.segments.slice(0,t.length);return!(!Qo(r,t)||e.hasChildren()||!d4(r,t,i))}if(n.segments.length===t.length){if(!Qo(n.segments,t)||!d4(n.segments,t,i))return!1;for(const r in e.children)if(!n.children[r]||!lb(n.children[r],e.children[r],i))return!1;return!0}{const r=t.slice(0,n.segments.length),s=t.slice(n.segments.length);return!!(Qo(n.segments,r)&&d4(n.segments,r,i)&&n.children[ot])&&ub(n.children[ot],e,s,i)}}function d4(n,e,t){return e.every((i,r)=>ob[t](n[r].parameters,i.parameters))}class Jo{constructor(e=new at([],{}),t={},i=null){this.root=e,this.queryParams=t,this.fragment=i}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=I1(this.queryParams)),this._queryParamMap}toString(){return wH.serialize(this)}}class at{constructor(e,t){this.segments=e,this.children=t,this.parent=null,jn(t,(i,r)=>i.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return p4(this)}}class Yc{constructor(e,t){this.path=e,this.parameters=t}get parameterMap(){return this._parameterMap||(this._parameterMap=I1(this.parameters)),this._parameterMap}toString(){return db(this)}}function Qo(n,e){return n.length===e.length&&n.every((t,i)=>t.path===e[i].path)}let Kc=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=Te({token:n,factory:function(){return new Qd},providedIn:"root"}),n})();class Qd{parse(e){const t=new RH(e);return new Jo(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}serialize(e){const t=`/${Jc(e.root,!0)}`,i=function EH(n){const e=Object.keys(n).map(t=>{const i=n[t];return Array.isArray(i)?i.map(r=>`${m4(t)}=${m4(r)}`).join("&"):`${m4(t)}=${m4(i)}`}).filter(t=>!!t);return e.length?`?${e.join("&")}`:""}(e.queryParams);return`${t}${i}${"string"==typeof e.fragment?`#${function CH(n){return encodeURI(n)}(e.fragment)}`:""}`}}const wH=new Qd;function p4(n){return n.segments.map(e=>db(e)).join("/")}function Jc(n,e){if(!n.hasChildren())return p4(n);if(e){const t=n.children[ot]?Jc(n.children[ot],!1):"",i=[];return jn(n.children,(r,s)=>{s!==ot&&i.push(`${s}:${Jc(r,!1)}`)}),i.length>0?`${t}(${i.join("//")})`:t}{const t=function MH(n,e){let t=[];return jn(n.children,(i,r)=>{r===ot&&(t=t.concat(e(i,r)))}),jn(n.children,(i,r)=>{r!==ot&&(t=t.concat(e(i,r)))}),t}(n,(i,r)=>r===ot?[Jc(n.children[ot],!1)]:[`${r}:${Jc(i,!1)}`]);return 1===Object.keys(n.children).length&&null!=n.children[ot]?`${p4(n)}/${t[0]}`:`${p4(n)}/(${t.join("//")})`}}function fb(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function m4(n){return fb(n).replace(/%3B/gi,";")}function e6(n){return fb(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function g4(n){return decodeURIComponent(n)}function hb(n){return g4(n.replace(/\+/g,"%20"))}function db(n){return`${e6(n.path)}${function SH(n){return Object.keys(n).map(e=>`;${e6(e)}=${e6(n[e])}`).join("")}(n.parameters)}`}const DH=/^[^\/()?;=#]+/;function v4(n){const e=n.match(DH);return e?e[0]:""}const AH=/^[^=?&#]+/,IH=/^[^&#]+/;class RH{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new at([],{}):new at([],this.parseChildren())}parseQueryParams(){const e={};if(this.consumeOptional("?"))do{this.parseQueryParam(e)}while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));let i={};return this.peekStartsWith("(")&&(i=this.parseParens(!1)),(e.length>0||Object.keys(t).length>0)&&(i[ot]=new at(e,t)),i}parseSegment(){const e=v4(this.remaining);if(""===e&&this.peekStartsWith(";"))throw new de(4009,h4);return this.capture(e),new Yc(g4(e),this.parseMatrixParams())}parseMatrixParams(){const e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){const t=v4(this.remaining);if(!t)return;this.capture(t);let i="";if(this.consumeOptional("=")){const r=v4(this.remaining);r&&(i=r,this.capture(i))}e[g4(t)]=g4(i)}parseQueryParam(e){const t=function TH(n){const e=n.match(AH);return e?e[0]:""}(this.remaining);if(!t)return;this.capture(t);let i="";if(this.consumeOptional("=")){const o=function LH(n){const e=n.match(IH);return e?e[0]:""}(this.remaining);o&&(i=o,this.capture(i))}const r=hb(t),s=hb(i);if(e.hasOwnProperty(r)){let o=e[r];Array.isArray(o)||(o=[o],e[r]=o),o.push(s)}else e[r]=s}parseParens(e){const t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const i=v4(this.remaining),r=this.remaining[i.length];if("/"!==r&&")"!==r&&";"!==r)throw new de(4010,h4);let s;i.indexOf(":")>-1?(s=i.slice(0,i.indexOf(":")),this.capture(s),this.capture(":")):e&&(s=ot);const o=this.parseChildren();t[s]=1===Object.keys(o).length?o[ot]:new at([],o),this.consumeOptional("//")}return t}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return!!this.peekStartsWith(e)&&(this.remaining=this.remaining.substring(e.length),!0)}capture(e){if(!this.consumeOptional(e))throw new de(4011,h4)}}function t6(n){return n.segments.length>0?new at([],{[ot]:n}):n}function y4(n){const e={};for(const i of Object.keys(n.children)){const s=y4(n.children[i]);(s.segments.length>0||s.hasChildren())&&(e[i]=s)}return function PH(n){if(1===n.numberOfChildren&&n.children[ot]){const e=n.children[ot];return new at(n.segments.concat(e.segments),e.children)}return n}(new at(n.segments,e))}function ea(n){return n instanceof Jo}function FH(n,e,t,i,r){if(0===t.length)return L1(e.root,e.root,e.root,i,r);const s=function gb(n){if("string"==typeof n[0]&&1===n.length&&"/"===n[0])return new mb(!0,0,n);let e=0,t=!1;const i=n.reduce((r,s,o)=>{if("object"==typeof s&&null!=s){if(s.outlets){const a={};return jn(s.outlets,(c,l)=>{a[l]="string"==typeof c?c.split("/"):c}),[...r,{outlets:a}]}if(s.segmentPath)return[...r,s.segmentPath]}return"string"!=typeof s?[...r,s]:0===o?(s.split("/").forEach((a,c)=>{0==c&&"."===a||(0==c&&""===a?t=!0:".."===a?e++:""!=a&&r.push(a))}),r):[...r,s]},[]);return new mb(t,e,i)}(t);return s.toRoot()?L1(e.root,e.root,new at([],{}),i,r):function o(c){const l=function kH(n,e,t,i){if(n.isAbsolute)return new R1(e.root,!0,0);if(-1===i)return new R1(t,t===e.root,0);return function vb(n,e,t){let i=n,r=e,s=t;for(;s>r;){if(s-=r,i=i.parent,!i)throw new de(4005,!1);r=i.segments.length}return new R1(i,!1,r-s)}(t,i+(Qc(n.commands[0])?0:1),n.numberOfDoubleDots)}(s,e,n.snapshot?._urlSegment,c),u=l.processChildren?tl(l.segmentGroup,l.index,s.commands):i6(l.segmentGroup,l.index,s.commands);return L1(e.root,l.segmentGroup,u,i,r)}(n.snapshot?._lastPathIndex)}function Qc(n){return"object"==typeof n&&null!=n&&!n.outlets&&!n.segmentPath}function el(n){return"object"==typeof n&&null!=n&&n.outlets}function L1(n,e,t,i,r){let o,s={};i&&jn(i,(c,l)=>{s[l]=Array.isArray(c)?c.map(u=>`${u}`):`${c}`}),o=n===e?t:pb(n,e,t);const a=t6(y4(o));return new Jo(a,s,r)}function pb(n,e,t){const i={};return jn(n.children,(r,s)=>{i[s]=r===e?t:pb(r,e,t)}),new at(n.segments,i)}class mb{constructor(e,t,i){if(this.isAbsolute=e,this.numberOfDoubleDots=t,this.commands=i,e&&i.length>0&&Qc(i[0]))throw new de(4003,!1);const r=i.find(el);if(r&&r!==sb(i))throw new de(4004,!1)}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class R1{constructor(e,t,i){this.segmentGroup=e,this.processChildren=t,this.index=i}}function i6(n,e,t){if(n||(n=new at([],{})),0===n.segments.length&&n.hasChildren())return tl(n,e,t);const i=function HH(n,e,t){let i=0,r=e;const s={match:!1,pathIndex:0,commandIndex:0};for(;r<n.segments.length;){if(i>=t.length)return s;const o=n.segments[r],a=t[i];if(el(a))break;const c=`${a}`,l=i<t.length-1?t[i+1]:null;if(r>0&&void 0===c)break;if(c&&l&&"object"==typeof l&&void 0===l.outlets){if(!_b(c,l,o))return s;i+=2}else{if(!_b(c,{},o))return s;i++}r++}return{match:!0,pathIndex:r,commandIndex:i}}(n,e,t),r=t.slice(i.commandIndex);if(i.match&&i.pathIndex<n.segments.length){const s=new at(n.segments.slice(0,i.pathIndex),{});return s.children[ot]=new at(n.segments.slice(i.pathIndex),n.children),tl(s,0,r)}return i.match&&0===r.length?new at(n.segments,{}):i.match&&!n.hasChildren()?r6(n,e,t):i.match?tl(n,0,r):r6(n,e,t)}function tl(n,e,t){if(0===t.length)return new at(n.segments,{});{const i=function VH(n){return el(n[0])?n[0].outlets:{[ot]:n}}(t),r={};return jn(i,(s,o)=>{"string"==typeof s&&(s=[s]),null!==s&&(r[o]=i6(n.children[o],e,s))}),jn(n.children,(s,o)=>{void 0===i[o]&&(r[o]=s)}),new at(n.segments,r)}}function r6(n,e,t){const i=n.segments.slice(0,e);let r=0;for(;r<t.length;){const s=t[r];if(el(s)){const c=UH(s.outlets);return new at(i,c)}if(0===r&&Qc(t[0])){i.push(new Yc(n.segments[e].path,yb(t[0]))),r++;continue}const o=el(s)?s.outlets[ot]:`${s}`,a=r<t.length-1?t[r+1]:null;o&&a&&Qc(a)?(i.push(new Yc(o,yb(a))),r+=2):(i.push(new Yc(o,{})),r++)}return new at(i,{})}function UH(n){const e={};return jn(n,(t,i)=>{"string"==typeof t&&(t=[t]),null!==t&&(e[i]=r6(new at([],{}),0,t))}),e}function yb(n){const e={};return jn(n,(t,i)=>e[i]=`${t}`),e}function _b(n,e,t){return n==t.path&&Zr(e,t.parameters)}class bs{constructor(e,t){this.id=e,this.url=t}}class s6 extends bs{constructor(e,t,i="imperative",r=null){super(e,t),this.type=0,this.navigationTrigger=i,this.restoredState=r}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class ta extends bs{constructor(e,t,i){super(e,t),this.urlAfterRedirects=i,this.type=1}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class _4 extends bs{constructor(e,t,i,r){super(e,t),this.reason=i,this.code=r,this.type=2}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class xb extends bs{constructor(e,t,i,r){super(e,t),this.error=i,this.target=r,this.type=3}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class BH extends bs{constructor(e,t,i,r){super(e,t),this.urlAfterRedirects=i,this.state=r,this.type=4}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class GH extends bs{constructor(e,t,i,r){super(e,t),this.urlAfterRedirects=i,this.state=r,this.type=7}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class WH extends bs{constructor(e,t,i,r,s){super(e,t),this.urlAfterRedirects=i,this.state=r,this.shouldActivate=s,this.type=8}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class jH extends bs{constructor(e,t,i,r){super(e,t),this.urlAfterRedirects=i,this.state=r,this.type=5}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class $H extends bs{constructor(e,t,i,r){super(e,t),this.urlAfterRedirects=i,this.state=r,this.type=6}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class qH{constructor(e){this.route=e,this.type=9}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class ZH{constructor(e){this.route=e,this.type=10}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class XH{constructor(e){this.snapshot=e,this.type=11}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class YH{constructor(e){this.snapshot=e,this.type=12}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class KH{constructor(e){this.snapshot=e,this.type=13}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class JH{constructor(e){this.snapshot=e,this.type=14}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class bb{constructor(e,t,i){this.routerEvent=e,this.position=t,this.anchor=i,this.type=15}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}let eU=(()=>{class n{createUrlTree(t,i,r,s,o,a){return FH(t||i.root,r,s,o,a)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=Te({token:n,factory:n.\u0275fac}),n})(),tU=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=Te({token:n,factory:function(e){return eU.\u0275fac(e)},providedIn:"root"}),n})();class Mb{constructor(e){this._root=e}get root(){return this._root.value}parent(e){const t=this.pathFromRoot(e);return t.length>1?t[t.length-2]:null}children(e){const t=o6(e,this._root);return t?t.children.map(i=>i.value):[]}firstChild(e){const t=o6(e,this._root);return t&&t.children.length>0?t.children[0].value:null}siblings(e){const t=a6(e,this._root);return t.length<2?[]:t[t.length-2].children.map(r=>r.value).filter(r=>r!==e)}pathFromRoot(e){return a6(e,this._root).map(t=>t.value)}}function o6(n,e){if(n===e.value)return e;for(const t of e.children){const i=o6(n,t);if(i)return i}return null}function a6(n,e){if(n===e.value)return[e];for(const t of e.children){const i=a6(n,t);if(i.length)return i.unshift(e),i}return[]}class Ms{constructor(e,t){this.value=e,this.children=t}toString(){return`TreeNode(${this.value})`}}function P1(n){const e={};return n&&n.children.forEach(t=>e[t.value.outlet]=t),e}class wb extends Mb{constructor(e,t){super(e),this.snapshot=t,c6(this,e)}toString(){return this.snapshot.toString()}}function Cb(n,e){const t=function nU(n,e){const o=new x4([],{},{},"",{},ot,e,null,n.root,-1,{});return new Eb("",new Ms(o,[]))}(n,e),i=new Si([new Yc("",{})]),r=new Si({}),s=new Si({}),o=new Si({}),a=new Si(""),c=new z1(i,r,o,a,s,ot,e,t.root);return c.snapshot=t.root,new wb(new Ms(c,[]),t)}class z1{constructor(e,t,i,r,s,o,a,c){this.url=e,this.params=t,this.queryParams=i,this.fragment=r,this.data=s,this.outlet=o,this.component=a,this.title=this.data?.pipe(lt(l=>l[Xc]))??Fe(void 0),this._futureSnapshot=c}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe(lt(e=>I1(e)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe(lt(e=>I1(e)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function Sb(n,e="emptyOnly"){const t=n.pathFromRoot;let i=0;if("always"!==e)for(i=t.length-1;i>=1;){const r=t[i],s=t[i-1];if(r.routeConfig&&""===r.routeConfig.path)i--;else{if(s.component)break;i--}}return function iU(n){return n.reduce((e,t)=>({params:{...e.params,...t.params},data:{...e.data,...t.data},resolve:{...t.data,...e.resolve,...t.routeConfig?.data,...t._resolvedData}}),{params:{},data:{},resolve:{}})}(t.slice(i))}class x4{constructor(e,t,i,r,s,o,a,c,l,u,f){this.url=e,this.params=t,this.queryParams=i,this.fragment=r,this.data=s,this.outlet=o,this.component=a,this.routeConfig=c,this._urlSegment=l,this._lastPathIndex=u,this._resolve=f}get title(){return this.data?.[Xc]}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=I1(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=I1(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(i=>i.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class Eb extends Mb{constructor(e,t){super(t),this.url=e,c6(this,t)}toString(){return Db(this._root)}}function c6(n,e){e.value._routerState=n,e.children.forEach(t=>c6(n,t))}function Db(n){const e=n.children.length>0?` { ${n.children.map(Db).join(", ")} } `:"";return`${n.value}${e}`}function l6(n){if(n.snapshot){const e=n.snapshot,t=n._futureSnapshot;n.snapshot=t,Zr(e.queryParams,t.queryParams)||n.queryParams.next(t.queryParams),e.fragment!==t.fragment&&n.fragment.next(t.fragment),Zr(e.params,t.params)||n.params.next(t.params),function vH(n,e){if(n.length!==e.length)return!1;for(let t=0;t<n.length;++t)if(!Zr(n[t],e[t]))return!1;return!0}(e.url,t.url)||n.url.next(t.url),Zr(e.data,t.data)||n.data.next(t.data)}else n.snapshot=n._futureSnapshot,n.data.next(n._futureSnapshot.data)}function u6(n,e){const t=Zr(n.params,e.params)&&function bH(n,e){return Qo(n,e)&&n.every((t,i)=>Zr(t.parameters,e[i].parameters))}(n.url,e.url);return t&&!(!n.parent!=!e.parent)&&(!n.parent||u6(n.parent,e.parent))}function nl(n,e,t){if(t&&n.shouldReuseRoute(e.value,t.value.snapshot)){const i=t.value;i._futureSnapshot=e.value;const r=function sU(n,e,t){return e.children.map(i=>{for(const r of t.children)if(n.shouldReuseRoute(i.value,r.value.snapshot))return nl(n,i,r);return nl(n,i)})}(n,e,t);return new Ms(i,r)}{if(n.shouldAttach(e.value)){const s=n.retrieve(e.value);if(null!==s){const o=s.route;return o.value._futureSnapshot=e.value,o.children=e.children.map(a=>nl(n,a)),o}}const i=function oU(n){return new z1(new Si(n.url),new Si(n.params),new Si(n.queryParams),new Si(n.fragment),new Si(n.data),n.outlet,n.component,n)}(e.value),r=e.children.map(s=>nl(n,s));return new Ms(i,r)}}const f6="ngNavigationCancelingError";function Ab(n,e){const{redirectTo:t,navigationBehaviorOptions:i}=ea(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,r=Tb(!1,0,e);return r.url=t,r.navigationBehaviorOptions=i,r}function Tb(n,e,t){const i=new Error("NavigationCancelingError: "+(n||""));return i[f6]=!0,i.cancellationCode=e,t&&(i.url=t),i}function Ib(n){return Lb(n)&&ea(n.url)}function Lb(n){return n&&n[f6]}class aU{constructor(){this.outlet=null,this.route=null,this.resolver=null,this.injector=null,this.children=new il,this.attachRef=null}}let il=(()=>{class n{constructor(){this.contexts=new Map}onChildOutletCreated(t,i){const r=this.getOrCreateContext(t);r.outlet=i,this.contexts.set(t,r)}onChildOutletDestroyed(t){const i=this.getContext(t);i&&(i.outlet=null,i.attachRef=null)}onOutletDeactivated(){const t=this.contexts;return this.contexts=new Map,t}onOutletReAttached(t){this.contexts=t}getOrCreateContext(t){let i=this.getContext(t);return i||(i=new aU,this.contexts.set(t,i)),i}getContext(t){return this.contexts.get(t)||null}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=Te({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const b4=!1;let Rb=(()=>{class n{constructor(){this.activated=null,this._activatedRoute=null,this.name=ot,this.activateEvents=new Qn,this.deactivateEvents=new Qn,this.attachEvents=new Qn,this.detachEvents=new Qn,this.parentContexts=ze(il),this.location=ze(Cr),this.changeDetector=ze(hd),this.environmentInjector=ze(fs)}ngOnChanges(t){if(t.name){const{firstChange:i,previousValue:r}=t.name;if(i)return;this.isTrackedInParentContexts(r)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(r)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name)}isTrackedInParentContexts(t){return this.parentContexts.getContext(t)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;const t=this.parentContexts.getContext(this.name);t?.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new de(4012,b4);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new de(4012,b4);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new de(4012,b4);this.location.detach();const t=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(t.instance),t}attach(t,i){this.activated=t,this._activatedRoute=i,this.location.insert(t.hostView),this.attachEvents.emit(t.instance)}deactivate(){if(this.activated){const t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,i){if(this.isActivated)throw new de(4013,b4);this._activatedRoute=t;const r=this.location,o=t.snapshot.component,a=this.parentContexts.getOrCreateContext(this.name).children,c=new cU(t,a,r.injector);if(i&&function lU(n){return!!n.resolveComponentFactory}(i)){const l=i.resolveComponentFactory(o);this.activated=r.createComponent(l,r.length,c)}else this.activated=r.createComponent(o,{index:r.length,injector:c,environmentInjector:i??this.environmentInjector});this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=$n({type:n,selectors:[["router-outlet"]],inputs:{name:"name"},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0,features:[Vr]}),n})();class cU{constructor(e,t,i){this.route=e,this.childContexts=t,this.parent=i}get(e,t){return e===z1?this.route:e===il?this.childContexts:this.parent.get(e,t)}}let h6=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=xi({type:n,selectors:[["ng-component"]],standalone:!0,features:[Uy],decls:1,vars:0,template:function(t,i){1&t&&nn(0,"router-outlet")},dependencies:[Rb],encapsulation:2}),n})();function Pb(n,e){return n.providers&&!n._injector&&(n._injector=Vu(n.providers,e,`Route: ${n.path}`)),n._injector??e}function p6(n){const e=n.children&&n.children.map(p6),t=e?{...n,children:e}:{...n};return!t.component&&!t.loadComponent&&(e||t.loadChildren)&&t.outlet&&t.outlet!==ot&&(t.component=h6),t}function tr(n){return n.outlet||ot}function zb(n,e){const t=n.filter(i=>tr(i)===e);return t.push(...n.filter(i=>tr(i)!==e)),t}function rl(n){if(!n)return null;if(n.routeConfig?._injector)return n.routeConfig._injector;for(let e=n.parent;e;e=e.parent){const t=e.routeConfig;if(t?._loadedInjector)return t._loadedInjector;if(t?._injector)return t._injector}return null}class pU{constructor(e,t,i,r){this.routeReuseStrategy=e,this.futureState=t,this.currState=i,this.forwardEvent=r}activate(e){const t=this.futureState._root,i=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,i,e),l6(this.futureState.root),this.activateChildRoutes(t,i,e)}deactivateChildRoutes(e,t,i){const r=P1(t);e.children.forEach(s=>{const o=s.value.outlet;this.deactivateRoutes(s,r[o],i),delete r[o]}),jn(r,(s,o)=>{this.deactivateRouteAndItsChildren(s,i)})}deactivateRoutes(e,t,i){const r=e.value,s=t?t.value:null;if(r===s)if(r.component){const o=i.getContext(r.outlet);o&&this.deactivateChildRoutes(e,t,o.children)}else this.deactivateChildRoutes(e,t,i);else s&&this.deactivateRouteAndItsChildren(t,i)}deactivateRouteAndItsChildren(e,t){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,t):this.deactivateRouteAndOutlet(e,t)}detachAndStoreRouteSubtree(e,t){const i=t.getContext(e.value.outlet),r=i&&e.value.component?i.children:t,s=P1(e);for(const o of Object.keys(s))this.deactivateRouteAndItsChildren(s[o],r);if(i&&i.outlet){const o=i.outlet.detach(),a=i.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:o,route:e,contexts:a})}}deactivateRouteAndOutlet(e,t){const i=t.getContext(e.value.outlet),r=i&&e.value.component?i.children:t,s=P1(e);for(const o of Object.keys(s))this.deactivateRouteAndItsChildren(s[o],r);i&&i.outlet&&(i.outlet.deactivate(),i.children.onOutletDeactivated(),i.attachRef=null,i.resolver=null,i.route=null)}activateChildRoutes(e,t,i){const r=P1(t);e.children.forEach(s=>{this.activateRoutes(s,r[s.value.outlet],i),this.forwardEvent(new JH(s.value.snapshot))}),e.children.length&&this.forwardEvent(new YH(e.value.snapshot))}activateRoutes(e,t,i){const r=e.value,s=t?t.value:null;if(l6(r),r===s)if(r.component){const o=i.getOrCreateContext(r.outlet);this.activateChildRoutes(e,t,o.children)}else this.activateChildRoutes(e,t,i);else if(r.component){const o=i.getOrCreateContext(r.outlet);if(this.routeReuseStrategy.shouldAttach(r.snapshot)){const a=this.routeReuseStrategy.retrieve(r.snapshot);this.routeReuseStrategy.store(r.snapshot,null),o.children.onOutletReAttached(a.contexts),o.attachRef=a.componentRef,o.route=a.route.value,o.outlet&&o.outlet.attach(a.componentRef,a.route.value),l6(a.route.value),this.activateChildRoutes(e,null,o.children)}else{const a=rl(r.snapshot),c=a?.get(wc)??null;o.attachRef=null,o.route=r,o.resolver=c,o.injector=a,o.outlet&&o.outlet.activateWith(r,o.injector),this.activateChildRoutes(e,null,o.children)}}else this.activateChildRoutes(e,null,i)}}class Nb{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}}class M4{constructor(e,t){this.component=e,this.route=t}}function mU(n,e,t){const i=n._root;return sl(i,e?e._root:null,t,[i.value])}function N1(n,e){const t=Symbol(),i=e.get(n,t);return i===t?"function"!=typeof n||function cT(n){return null!==O3(n)}(n)?e.get(n):n:i}function sl(n,e,t,i,r={canDeactivateChecks:[],canActivateChecks:[]}){const s=P1(e);return n.children.forEach(o=>{(function vU(n,e,t,i,r={canDeactivateChecks:[],canActivateChecks:[]}){const s=n.value,o=e?e.value:null,a=t?t.getContext(n.value.outlet):null;if(o&&s.routeConfig===o.routeConfig){const c=function yU(n,e,t){if("function"==typeof t)return t(n,e);switch(t){case"pathParamsChange":return!Qo(n.url,e.url);case"pathParamsOrQueryParamsChange":return!Qo(n.url,e.url)||!Zr(n.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!u6(n,e)||!Zr(n.queryParams,e.queryParams);default:return!u6(n,e)}}(o,s,s.routeConfig.runGuardsAndResolvers);c?r.canActivateChecks.push(new Nb(i)):(s.data=o.data,s._resolvedData=o._resolvedData),sl(n,e,s.component?a?a.children:null:t,i,r),c&&a&&a.outlet&&a.outlet.isActivated&&r.canDeactivateChecks.push(new M4(a.outlet.component,o))}else o&&ol(e,a,r),r.canActivateChecks.push(new Nb(i)),sl(n,null,s.component?a?a.children:null:t,i,r)})(o,s[o.value.outlet],t,i.concat([o.value]),r),delete s[o.value.outlet]}),jn(s,(o,a)=>ol(o,t.getContext(a),r)),r}function ol(n,e,t){const i=P1(n),r=n.value;jn(i,(s,o)=>{ol(s,r.component?e?e.children.getContext(o):null:e,t)}),t.canDeactivateChecks.push(new M4(r.component&&e&&e.outlet&&e.outlet.isActivated?e.outlet.component:null,r))}function al(n){return"function"==typeof n}function m6(n){return n instanceof u4||"EmptyError"===n?.name}const w4=Symbol("INITIAL_VALUE");function F1(){return qr(n=>Kx(n.map(e=>e.pipe(Zc(1),function uH(...n){const e=J2(n);return yn((t,i)=>{(e?Zd(n,t,e):Zd(n,t)).subscribe(i)})}(w4)))).pipe(lt(e=>{for(const t of e)if(!0!==t){if(t===w4)return w4;if(!1===t||t instanceof Jo)return t}return!0}),to(e=>e!==w4),Zc(1)))}function Fb(n){return function DA(...n){return Xp(n)}(ti(e=>{if(ea(e))throw Ab(0,e)}),lt(e=>!0===e))}const g6={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function Ob(n,e,t,i,r){const s=v6(n,e,t);return s.matched?function NU(n,e,t,i){const r=e.canMatch;return r&&0!==r.length?Fe(r.map(o=>{const a=N1(o,n);return ro(function CU(n){return n&&al(n.canMatch)}(a)?a.canMatch(e,t):n.runInContext(()=>a(e,t)))})).pipe(F1(),Fb()):Fe(!0)}(i=Pb(e,i),e,t).pipe(lt(o=>!0===o?s:{...g6})):Fe(s)}function v6(n,e,t){if(""===e.path)return"full"===e.pathMatch&&(n.hasChildren()||t.length>0)?{...g6}:{matched:!0,consumedSegments:[],remainingSegments:t,parameters:{},positionalParamSegments:{}};const r=(e.matcher||gH)(t,n,e);if(!r)return{...g6};const s={};jn(r.posParams,(a,c)=>{s[c]=a.path});const o=r.consumed.length>0?{...s,...r.consumed[r.consumed.length-1].parameters}:s;return{matched:!0,consumedSegments:r.consumed,remainingSegments:t.slice(r.consumed.length),parameters:o,positionalParamSegments:r.posParams??{}}}function C4(n,e,t,i){if(t.length>0&&function kU(n,e,t){return t.some(i=>S4(n,e,i)&&tr(i)!==ot)}(n,t,i)){const s=new at(e,function OU(n,e,t,i){const r={};r[ot]=i,i._sourceSegment=n,i._segmentIndexShift=e.length;for(const s of t)if(""===s.path&&tr(s)!==ot){const o=new at([],{});o._sourceSegment=n,o._segmentIndexShift=e.length,r[tr(s)]=o}return r}(n,e,i,new at(t,n.children)));return s._sourceSegment=n,s._segmentIndexShift=e.length,{segmentGroup:s,slicedSegments:[]}}if(0===t.length&&function VU(n,e,t){return t.some(i=>S4(n,e,i))}(n,t,i)){const s=new at(n.segments,function FU(n,e,t,i,r){const s={};for(const o of i)if(S4(n,t,o)&&!r[tr(o)]){const a=new at([],{});a._sourceSegment=n,a._segmentIndexShift=e.length,s[tr(o)]=a}return{...r,...s}}(n,e,t,i,n.children));return s._sourceSegment=n,s._segmentIndexShift=e.length,{segmentGroup:s,slicedSegments:t}}const r=new at(n.segments,n.children);return r._sourceSegment=n,r._segmentIndexShift=e.length,{segmentGroup:r,slicedSegments:t}}function S4(n,e,t){return(!(n.hasChildren()||e.length>0)||"full"!==t.pathMatch)&&""===t.path}function kb(n,e,t,i){return!!(tr(n)===i||i!==ot&&S4(e,t,n))&&("**"===n.path||v6(e,n,t).matched)}function Vb(n,e,t){return 0===e.length&&!n.children[t]}const E4=!1;class D4{constructor(e){this.segmentGroup=e||null}}class Hb{constructor(e){this.urlTree=e}}function cl(n){return qc(new D4(n))}function Ub(n){return qc(new Hb(n))}class GU{constructor(e,t,i,r,s){this.injector=e,this.configLoader=t,this.urlSerializer=i,this.urlTree=r,this.config=s,this.allowRedirects=!0}apply(){const e=C4(this.urlTree.root,[],[],this.config).segmentGroup,t=new at(e.segments,e.children);return this.expandSegmentGroup(this.injector,this.config,t,ot).pipe(lt(s=>this.createUrlTree(y4(s),this.urlTree.queryParams,this.urlTree.fragment))).pipe(io(s=>{if(s instanceof Hb)return this.allowRedirects=!1,this.match(s.urlTree);throw s instanceof D4?this.noMatchError(s):s}))}match(e){return this.expandSegmentGroup(this.injector,this.config,e.root,ot).pipe(lt(r=>this.createUrlTree(y4(r),e.queryParams,e.fragment))).pipe(io(r=>{throw r instanceof D4?this.noMatchError(r):r}))}noMatchError(e){return new de(4002,E4)}createUrlTree(e,t,i){const r=t6(e);return new Jo(r,t,i)}expandSegmentGroup(e,t,i,r){return 0===i.segments.length&&i.hasChildren()?this.expandChildren(e,t,i).pipe(lt(s=>new at([],s))):this.expandSegment(e,i,t,i.segments,r,!0)}expandChildren(e,t,i){const r=[];for(const s of Object.keys(i.children))"primary"===s?r.unshift(s):r.push(s);return En(r).pipe(Ko(s=>{const o=i.children[s],a=zb(t,s);return this.expandSegmentGroup(e,a,o,s).pipe(lt(c=>({segment:c,outlet:s})))}),Yd((s,o)=>(s[o.outlet]=o.segment,s),{}),nb())}expandSegment(e,t,i,r,s,o){return En(i).pipe(Ko(a=>this.expandSegmentAgainstRoute(e,t,i,a,r,s,o).pipe(io(l=>{if(l instanceof D4)return Fe(null);throw l}))),no(a=>!!a),io((a,c)=>{if(m6(a))return Vb(t,r,s)?Fe(new at([],{})):cl(t);throw a}))}expandSegmentAgainstRoute(e,t,i,r,s,o,a){return kb(r,t,s,o)?void 0===r.redirectTo?this.matchSegmentAgainstRoute(e,t,r,s,o):a&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(e,t,i,r,s,o):cl(t):cl(t)}expandSegmentAgainstRouteUsingRedirect(e,t,i,r,s,o){return"**"===r.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(e,i,r,o):this.expandRegularSegmentAgainstRouteUsingRedirect(e,t,i,r,s,o)}expandWildCardWithParamsAgainstRouteUsingRedirect(e,t,i,r){const s=this.applyRedirectCommands([],i.redirectTo,{});return i.redirectTo.startsWith("/")?Ub(s):this.lineralizeSegments(i,s).pipe(Bn(o=>{const a=new at(o,{});return this.expandSegment(e,a,t,o,r,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(e,t,i,r,s,o){const{matched:a,consumedSegments:c,remainingSegments:l,positionalParamSegments:u}=v6(t,r,s);if(!a)return cl(t);const f=this.applyRedirectCommands(c,r.redirectTo,u);return r.redirectTo.startsWith("/")?Ub(f):this.lineralizeSegments(r,f).pipe(Bn(h=>this.expandSegment(e,t,i,h.concat(l),o,!1)))}matchSegmentAgainstRoute(e,t,i,r,s){return"**"===i.path?(e=Pb(i,e),i.loadChildren?(i._loadedRoutes?Fe({routes:i._loadedRoutes,injector:i._loadedInjector}):this.configLoader.loadChildren(e,i)).pipe(lt(a=>(i._loadedRoutes=a.routes,i._loadedInjector=a.injector,new at(r,{})))):Fe(new at(r,{}))):Ob(t,i,r,e).pipe(qr(({matched:o,consumedSegments:a,remainingSegments:c})=>o?this.getChildConfig(e=i._injector??e,i,r).pipe(Bn(u=>{const f=u.injector??e,h=u.routes,{segmentGroup:d,slicedSegments:p}=C4(t,a,c,h),m=new at(d.segments,d.children);if(0===p.length&&m.hasChildren())return this.expandChildren(f,h,m).pipe(lt(y=>new at(a,y)));if(0===h.length&&0===p.length)return Fe(new at(a,{}));const g=tr(i)===s;return this.expandSegment(f,m,h,p,g?ot:s,!0).pipe(lt(x=>new at(a.concat(x.segments),x.children)))})):cl(t)))}getChildConfig(e,t,i){return t.children?Fe({routes:t.children,injector:e}):t.loadChildren?void 0!==t._loadedRoutes?Fe({routes:t._loadedRoutes,injector:t._loadedInjector}):function zU(n,e,t,i){const r=e.canLoad;return void 0===r||0===r.length?Fe(!0):Fe(r.map(o=>{const a=N1(o,n);return ro(function xU(n){return n&&al(n.canLoad)}(a)?a.canLoad(e,t):n.runInContext(()=>a(e,t)))})).pipe(F1(),Fb())}(e,t,i).pipe(Bn(r=>r?this.configLoader.loadChildren(e,t).pipe(ti(s=>{t._loadedRoutes=s.routes,t._loadedInjector=s.injector})):function UU(n){return qc(Tb(E4,3))}())):Fe({routes:[],injector:e})}lineralizeSegments(e,t){let i=[],r=t.root;for(;;){if(i=i.concat(r.segments),0===r.numberOfChildren)return Fe(i);if(r.numberOfChildren>1||!r.children[ot])return qc(new de(4e3,E4));r=r.children[ot]}}applyRedirectCommands(e,t,i){return this.applyRedirectCreateUrlTree(t,this.urlSerializer.parse(t),e,i)}applyRedirectCreateUrlTree(e,t,i,r){const s=this.createSegmentGroup(e,t.root,i,r);return new Jo(s,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}createQueryParams(e,t){const i={};return jn(e,(r,s)=>{if("string"==typeof r&&r.startsWith(":")){const a=r.substring(1);i[s]=t[a]}else i[s]=r}),i}createSegmentGroup(e,t,i,r){const s=this.createSegments(e,t.segments,i,r);let o={};return jn(t.children,(a,c)=>{o[c]=this.createSegmentGroup(e,a,i,r)}),new at(s,o)}createSegments(e,t,i,r){return t.map(s=>s.path.startsWith(":")?this.findPosParam(e,s,r):this.findOrReturn(s,i))}findPosParam(e,t,i){const r=i[t.path.substring(1)];if(!r)throw new de(4001,E4);return r}findOrReturn(e,t){let i=0;for(const r of t){if(r.path===e.path)return t.splice(i),r;i++}return e}}class jU{}class ZU{constructor(e,t,i,r,s,o,a){this.injector=e,this.rootComponentType=t,this.config=i,this.urlTree=r,this.url=s,this.paramsInheritanceStrategy=o,this.urlSerializer=a}recognize(){const e=C4(this.urlTree.root,[],[],this.config.filter(t=>void 0===t.redirectTo)).segmentGroup;return this.processSegmentGroup(this.injector,this.config,e,ot).pipe(lt(t=>{if(null===t)return null;const i=new x4([],Object.freeze({}),Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,{},ot,this.rootComponentType,null,this.urlTree.root,-1,{}),r=new Ms(i,t),s=new Eb(this.url,r);return this.inheritParamsAndData(s._root),s}))}inheritParamsAndData(e){const t=e.value,i=Sb(t,this.paramsInheritanceStrategy);t.params=Object.freeze(i.params),t.data=Object.freeze(i.data),e.children.forEach(r=>this.inheritParamsAndData(r))}processSegmentGroup(e,t,i,r){return 0===i.segments.length&&i.hasChildren()?this.processChildren(e,t,i):this.processSegment(e,t,i,i.segments,r)}processChildren(e,t,i){return En(Object.keys(i.children)).pipe(Ko(r=>{const s=i.children[r],o=zb(t,r);return this.processSegmentGroup(e,o,s,r)}),Yd((r,s)=>r&&s?(r.push(...s),r):null),function dH(n,e=!1){return yn((t,i)=>{let r=0;t.subscribe(ln(i,s=>{const o=n(s,r++);(o||e)&&i.next(s),!o&&i.complete()}))})}(r=>null!==r),f4(null),nb(),lt(r=>{if(null===r)return null;const s=Gb(r);return function XU(n){n.sort((e,t)=>e.value.outlet===ot?-1:t.value.outlet===ot?1:e.value.outlet.localeCompare(t.value.outlet))}(s),s}))}processSegment(e,t,i,r,s){return En(t).pipe(Ko(o=>this.processSegmentAgainstRoute(o._injector??e,o,i,r,s)),no(o=>!!o),io(o=>{if(m6(o))return Vb(i,r,s)?Fe([]):Fe(null);throw o}))}processSegmentAgainstRoute(e,t,i,r,s){if(t.redirectTo||!kb(t,i,r,s))return Fe(null);let o;if("**"===t.path){const a=r.length>0?sb(r).parameters:{},c=jb(i)+r.length;o=Fe({snapshot:new x4(r,a,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,$b(t),tr(t),t.component??t._loadedComponent??null,t,Wb(i),c,qb(t)),consumedSegments:[],remainingSegments:[]})}else o=Ob(i,t,r,e).pipe(lt(({matched:a,consumedSegments:c,remainingSegments:l,parameters:u})=>{if(!a)return null;const f=jb(i)+c.length;return{snapshot:new x4(c,u,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,$b(t),tr(t),t.component??t._loadedComponent??null,t,Wb(i),f,qb(t)),consumedSegments:c,remainingSegments:l}}));return o.pipe(qr(a=>{if(null===a)return Fe(null);const{snapshot:c,consumedSegments:l,remainingSegments:u}=a;e=t._injector??e;const f=t._loadedInjector??e,h=function YU(n){return n.children?n.children:n.loadChildren?n._loadedRoutes:[]}(t),{segmentGroup:d,slicedSegments:p}=C4(i,l,u,h.filter(g=>void 0===g.redirectTo));if(0===p.length&&d.hasChildren())return this.processChildren(f,h,d).pipe(lt(g=>null===g?null:[new Ms(c,g)]));if(0===h.length&&0===p.length)return Fe([new Ms(c,[])]);const m=tr(t)===s;return this.processSegment(f,h,d,p,m?ot:s).pipe(lt(g=>null===g?null:[new Ms(c,g)]))}))}}function KU(n){const e=n.value.routeConfig;return e&&""===e.path&&void 0===e.redirectTo}function Gb(n){const e=[],t=new Set;for(const i of n){if(!KU(i)){e.push(i);continue}const r=e.find(s=>i.value.routeConfig===s.value.routeConfig);void 0!==r?(r.children.push(...i.children),t.add(r)):e.push(i)}for(const i of t){const r=Gb(i.children);e.push(new Ms(i.value,r))}return e.filter(i=>!t.has(i))}function Wb(n){let e=n;for(;e._sourceSegment;)e=e._sourceSegment;return e}function jb(n){let e=n,t=e._segmentIndexShift??0;for(;e._sourceSegment;)e=e._sourceSegment,t+=e._segmentIndexShift??0;return t-1}function $b(n){return n.data||{}}function qb(n){return n.resolve||{}}function Zb(n){return"string"==typeof n.title||null===n.title}function y6(n){return qr(e=>{const t=n(e);return t?En(t).pipe(lt(()=>e)):Fe(e)})}const O1=new ue("ROUTES");let _6=(()=>{class n{constructor(t,i){this.injector=t,this.compiler=i,this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap}loadComponent(t){if(this.componentLoaders.get(t))return this.componentLoaders.get(t);if(t._loadedComponent)return Fe(t._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(t);const i=ro(t.loadComponent()).pipe(lt(Yb),ti(s=>{this.onLoadEndListener&&this.onLoadEndListener(t),t._loadedComponent=s}),Jd(()=>{this.componentLoaders.delete(t)})),r=new eb(i,()=>new Fr).pipe(Xd());return this.componentLoaders.set(t,r),r}loadChildren(t,i){if(this.childrenLoaders.get(i))return this.childrenLoaders.get(i);if(i._loadedRoutes)return Fe({routes:i._loadedRoutes,injector:i._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(i);const s=this.loadModuleFactoryOrRoutes(i.loadChildren).pipe(lt(a=>{this.onLoadEndListener&&this.onLoadEndListener(i);let c,l,u=!1;Array.isArray(a)?l=a:(c=a.create(t).injector,l=rb(c.get(O1,[],He.Self|He.Optional)));return{routes:l.map(p6),injector:c}}),Jd(()=>{this.childrenLoaders.delete(i)})),o=new eb(s,()=>new Fr).pipe(Xd());return this.childrenLoaders.set(i,o),o}loadModuleFactoryOrRoutes(t){return ro(t()).pipe(lt(Yb),Bn(r=>r instanceof Vy||Array.isArray(r)?Fe(r):En(this.compiler.compileModuleAsync(r))))}}return n.\u0275fac=function(t){return new(t||n)(he(br),he(L_))},n.\u0275prov=Te({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function Yb(n){return function oB(n){return n&&"object"==typeof n&&"default"in n}(n)?n.default:n}let x6=(()=>{class n{constructor(){this.currentNavigation=null,this.lastSuccessfulNavigation=null,this.events=new Fr,this.configLoader=ze(_6),this.environmentInjector=ze(fs),this.urlSerializer=ze(Kc),this.rootContexts=ze(il),this.navigationId=0,this.configLoader.onLoadEndListener=r=>this.events.next(new ZH(r)),this.configLoader.onLoadStartListener=r=>this.events.next(new qH(r))}get hasRequestedNavigation(){return 0!==this.navigationId}complete(){this.transitions?.complete()}handleNavigationRequest(t){const i=++this.navigationId;this.transitions?.next({...this.transitions.value,...t,id:i})}setupNavigations(t){return this.transitions=new Si({id:0,targetPageId:0,currentUrlTree:t.currentUrlTree,currentRawUrl:t.currentUrlTree,extractedUrl:t.urlHandlingStrategy.extract(t.currentUrlTree),urlAfterRedirects:t.urlHandlingStrategy.extract(t.currentUrlTree),rawUrl:t.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:"imperative",restoredState:null,currentSnapshot:t.routerState.snapshot,targetSnapshot:null,currentRouterState:t.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.transitions.pipe(to(i=>0!==i.id),lt(i=>({...i,extractedUrl:t.urlHandlingStrategy.extract(i.rawUrl)})),qr(i=>{let r=!1,s=!1;return Fe(i).pipe(ti(o=>{this.currentNavigation={id:o.id,initialUrl:o.rawUrl,extractedUrl:o.extractedUrl,trigger:o.source,extras:o.extras,previousNavigation:this.lastSuccessfulNavigation?{...this.lastSuccessfulNavigation,previousNavigation:null}:null}}),qr(o=>{const a=t.browserUrlTree.toString(),c=!t.navigated||o.extractedUrl.toString()!==a||a!==t.currentUrlTree.toString();if(("reload"===t.onSameUrlNavigation||c)&&t.urlHandlingStrategy.shouldProcessUrl(o.rawUrl))return Jb(o.source)&&(t.browserUrlTree=o.extractedUrl),Fe(o).pipe(qr(u=>{const f=this.transitions?.getValue();return this.events.next(new s6(u.id,this.urlSerializer.serialize(u.extractedUrl),u.source,u.restoredState)),f!==this.transitions?.getValue()?rs:Promise.resolve(u)}),function WU(n,e,t,i){return qr(r=>function BU(n,e,t,i,r){return new GU(n,e,t,i,r).apply()}(n,e,t,r.extractedUrl,i).pipe(lt(s=>({...r,urlAfterRedirects:s}))))}(this.environmentInjector,this.configLoader,this.urlSerializer,t.config),ti(u=>{this.currentNavigation={...this.currentNavigation,finalUrl:u.urlAfterRedirects},i.urlAfterRedirects=u.urlAfterRedirects}),function QU(n,e,t,i,r){return Bn(s=>function qU(n,e,t,i,r,s,o="emptyOnly"){return new ZU(n,e,t,i,r,o,s).recognize().pipe(qr(a=>null===a?function $U(n){return new en(e=>e.error(n))}(new jU):Fe(a)))}(n,e,t,s.urlAfterRedirects,i.serialize(s.urlAfterRedirects),i,r).pipe(lt(o=>({...s,targetSnapshot:o}))))}(this.environmentInjector,t.rootComponentType,t.config,this.urlSerializer,t.paramsInheritanceStrategy),ti(u=>{if(i.targetSnapshot=u.targetSnapshot,"eager"===t.urlUpdateStrategy){if(!u.extras.skipLocationChange){const h=t.urlHandlingStrategy.merge(u.urlAfterRedirects,u.rawUrl);t.setBrowserUrl(h,u)}t.browserUrlTree=u.urlAfterRedirects}const f=new BH(u.id,this.urlSerializer.serialize(u.extractedUrl),this.urlSerializer.serialize(u.urlAfterRedirects),u.targetSnapshot);this.events.next(f)}));if(c&&t.rawUrlTree&&t.urlHandlingStrategy.shouldProcessUrl(t.rawUrlTree)){const{id:f,extractedUrl:h,source:d,restoredState:p,extras:m}=o,g=new s6(f,this.urlSerializer.serialize(h),d,p);this.events.next(g);const v=Cb(h,t.rootComponentType).snapshot;return Fe(i={...o,targetSnapshot:v,urlAfterRedirects:h,extras:{...m,skipLocationChange:!1,replaceUrl:!1}})}return t.rawUrlTree=o.rawUrl,o.resolve(null),rs}),ti(o=>{const a=new GH(o.id,this.urlSerializer.serialize(o.extractedUrl),this.urlSerializer.serialize(o.urlAfterRedirects),o.targetSnapshot);this.events.next(a)}),lt(o=>i={...o,guards:mU(o.targetSnapshot,o.currentSnapshot,this.rootContexts)}),function EU(n,e){return Bn(t=>{const{targetSnapshot:i,currentSnapshot:r,guards:{canActivateChecks:s,canDeactivateChecks:o}}=t;return 0===o.length&&0===s.length?Fe({...t,guardsResult:!0}):function DU(n,e,t,i){return En(n).pipe(Bn(r=>function PU(n,e,t,i,r){const s=e&&e.routeConfig?e.routeConfig.canDeactivate:null;return s&&0!==s.length?Fe(s.map(a=>{const c=rl(e)??r,l=N1(a,c);return ro(function wU(n){return n&&al(n.canDeactivate)}(l)?l.canDeactivate(n,e,t,i):c.runInContext(()=>l(n,e,t,i))).pipe(no())})).pipe(F1()):Fe(!0)}(r.component,r.route,t,e,i)),no(r=>!0!==r,!0))}(o,i,r,n).pipe(Bn(a=>a&&function _U(n){return"boolean"==typeof n}(a)?function AU(n,e,t,i){return En(e).pipe(Ko(r=>Zd(function IU(n,e){return null!==n&&e&&e(new XH(n)),Fe(!0)}(r.route.parent,i),function TU(n,e){return null!==n&&e&&e(new KH(n)),Fe(!0)}(r.route,i),function RU(n,e,t){const i=e[e.length-1],s=e.slice(0,e.length-1).reverse().map(o=>function gU(n){const e=n.routeConfig?n.routeConfig.canActivateChild:null;return e&&0!==e.length?{node:n,guards:e}:null}(o)).filter(o=>null!==o).map(o=>Qx(()=>Fe(o.guards.map(c=>{const l=rl(o.node)??t,u=N1(c,l);return ro(function MU(n){return n&&al(n.canActivateChild)}(u)?u.canActivateChild(i,n):l.runInContext(()=>u(i,n))).pipe(no())})).pipe(F1())));return Fe(s).pipe(F1())}(n,r.path,t),function LU(n,e,t){const i=e.routeConfig?e.routeConfig.canActivate:null;if(!i||0===i.length)return Fe(!0);const r=i.map(s=>Qx(()=>{const o=rl(e)??t,a=N1(s,o);return ro(function bU(n){return n&&al(n.canActivate)}(a)?a.canActivate(e,n):o.runInContext(()=>a(e,n))).pipe(no())}));return Fe(r).pipe(F1())}(n,r.route,t))),no(r=>!0!==r,!0))}(i,s,n,e):Fe(a)),lt(a=>({...t,guardsResult:a})))})}(this.environmentInjector,o=>this.events.next(o)),ti(o=>{if(i.guardsResult=o.guardsResult,ea(o.guardsResult))throw Ab(0,o.guardsResult);const a=new WH(o.id,this.urlSerializer.serialize(o.extractedUrl),this.urlSerializer.serialize(o.urlAfterRedirects),o.targetSnapshot,!!o.guardsResult);this.events.next(a)}),to(o=>!!o.guardsResult||(t.restoreHistory(o),this.cancelNavigationTransition(o,"",3,t),!1)),y6(o=>{if(o.guards.canActivateChecks.length)return Fe(o).pipe(ti(a=>{const c=new jH(a.id,this.urlSerializer.serialize(a.extractedUrl),this.urlSerializer.serialize(a.urlAfterRedirects),a.targetSnapshot);this.events.next(c)}),qr(a=>{let c=!1;return Fe(a).pipe(function eB(n,e){return Bn(t=>{const{targetSnapshot:i,guards:{canActivateChecks:r}}=t;if(!r.length)return Fe(t);let s=0;return En(r).pipe(Ko(o=>function tB(n,e,t,i){const r=n.routeConfig,s=n._resolve;return void 0!==r?.title&&!Zb(r)&&(s[Xc]=r.title),function nB(n,e,t,i){const r=function iB(n){return[...Object.keys(n),...Object.getOwnPropertySymbols(n)]}(n);if(0===r.length)return Fe({});const s={};return En(r).pipe(Bn(o=>function rB(n,e,t,i){const r=rl(e)??i,s=N1(n,r);return ro(s.resolve?s.resolve(e,t):r.runInContext(()=>s(e,t)))}(n[o],e,t,i).pipe(no(),ti(a=>{s[o]=a}))),Kd(1),function pH(n){return lt(()=>n)}(s),io(o=>m6(o)?rs:qc(o)))}(s,n,e,i).pipe(lt(o=>(n._resolvedData=o,n.data=Sb(n,t).resolve,r&&Zb(r)&&(n.data[Xc]=r.title),null)))}(o.route,i,n,e)),ti(()=>s++),Kd(1),Bn(o=>s===r.length?Fe(t):rs))})}(t.paramsInheritanceStrategy,this.environmentInjector),ti({next:()=>c=!0,complete:()=>{c||(t.restoreHistory(a),this.cancelNavigationTransition(a,"",2,t))}}))}),ti(a=>{const c=new $H(a.id,this.urlSerializer.serialize(a.extractedUrl),this.urlSerializer.serialize(a.urlAfterRedirects),a.targetSnapshot);this.events.next(c)}))}),y6(o=>{const a=c=>{const l=[];c.routeConfig?.loadComponent&&!c.routeConfig._loadedComponent&&l.push(this.configLoader.loadComponent(c.routeConfig).pipe(ti(u=>{c.component=u}),lt(()=>{})));for(const u of c.children)l.push(...a(u));return l};return Kx(a(o.targetSnapshot.root)).pipe(f4(),Zc(1))}),y6(()=>t.afterPreactivation()),lt(o=>{const a=function rU(n,e,t){const i=nl(n,e._root,t?t._root:void 0);return new wb(i,e)}(t.routeReuseStrategy,o.targetSnapshot,o.currentRouterState);return i={...o,targetRouterState:a}}),ti(o=>{t.currentUrlTree=o.urlAfterRedirects,t.rawUrlTree=t.urlHandlingStrategy.merge(o.urlAfterRedirects,o.rawUrl),t.routerState=o.targetRouterState,"deferred"===t.urlUpdateStrategy&&(o.extras.skipLocationChange||t.setBrowserUrl(t.rawUrlTree,o),t.browserUrlTree=o.urlAfterRedirects)}),((n,e,t)=>lt(i=>(new pU(e,i.targetRouterState,i.currentRouterState,t).activate(n),i)))(this.rootContexts,t.routeReuseStrategy,o=>this.events.next(o)),ti({next:o=>{r=!0,this.lastSuccessfulNavigation=this.currentNavigation,t.navigated=!0,this.events.next(new ta(o.id,this.urlSerializer.serialize(o.extractedUrl),this.urlSerializer.serialize(t.currentUrlTree))),t.titleStrategy?.updateTitle(o.targetRouterState.snapshot),o.resolve(!0)},complete:()=>{r=!0}}),Jd(()=>{r||s||this.cancelNavigationTransition(i,"",1,t),this.currentNavigation?.id===i.id&&(this.currentNavigation=null)}),io(o=>{if(s=!0,Lb(o)){Ib(o)||(t.navigated=!0,t.restoreHistory(i,!0));const a=new _4(i.id,this.urlSerializer.serialize(i.extractedUrl),o.message,o.cancellationCode);if(this.events.next(a),Ib(o)){const c=t.urlHandlingStrategy.merge(o.url,t.rawUrlTree),l={skipLocationChange:i.extras.skipLocationChange,replaceUrl:"eager"===t.urlUpdateStrategy||Jb(i.source)};t.scheduleNavigation(c,"imperative",null,l,{resolve:i.resolve,reject:i.reject,promise:i.promise})}else i.resolve(!1)}else{t.restoreHistory(i,!0);const a=new xb(i.id,this.urlSerializer.serialize(i.extractedUrl),o,i.targetSnapshot??void 0);this.events.next(a);try{i.resolve(t.errorHandler(o))}catch(c){i.reject(c)}}return rs}))}))}cancelNavigationTransition(t,i,r,s){const o=new _4(t.id,this.urlSerializer.serialize(t.extractedUrl),i,r);this.events.next(o),t.resolve(!1)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=Te({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function Jb(n){return"imperative"!==n}let Qb=(()=>{class n{buildTitle(t){let i,r=t.root;for(;void 0!==r;)i=this.getResolvedTitleForRoute(r)??i,r=r.children.find(s=>s.outlet===ot);return i}getResolvedTitleForRoute(t){return t.data[Xc]}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=Te({token:n,factory:function(){return ze(aB)},providedIn:"root"}),n})(),aB=(()=>{class n extends Qb{constructor(t){super(),this.title=t}updateTitle(t){const i=this.buildTitle(t);void 0!==i&&this.title.setTitle(i)}}return n.\u0275fac=function(t){return new(t||n)(he($x))},n.\u0275prov=Te({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),cB=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=Te({token:n,factory:function(){return ze(uB)},providedIn:"root"}),n})();class lB{shouldDetach(e){return!1}store(e,t){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,t){return e.routeConfig===t.routeConfig}}let uB=(()=>{class n extends lB{}return n.\u0275fac=function(){let e;return function(i){return(e||(e=x5(n)))(i||n)}}(),n.\u0275prov=Te({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const A4=new ue("",{providedIn:"root",factory:()=>({})});let hB=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=Te({token:n,factory:function(){return ze(dB)},providedIn:"root"}),n})(),dB=(()=>{class n{shouldProcessUrl(t){return!0}extract(t){return t}merge(t,i){return t}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=Te({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function pB(n){throw n}function mB(n,e,t){return e.parse("/")}const gB={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},vB={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};let Oi=(()=>{class n{constructor(){this.disposed=!1,this.currentPageId=0,this.console=ze(zF),this.isNgZoneEnabled=!1,this.options=ze(A4,{optional:!0})||{},this.errorHandler=this.options.errorHandler||pB,this.malformedUriErrorHandler=this.options.malformedUriErrorHandler||mB,this.navigated=!1,this.lastSuccessfulId=-1,this.afterPreactivation=()=>Fe(void 0),this.urlHandlingStrategy=ze(hB),this.routeReuseStrategy=ze(cB),this.urlCreationStrategy=ze(tU),this.titleStrategy=ze(Qb),this.onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore",this.paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly",this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.canceledNavigationResolution=this.options.canceledNavigationResolution||"replace",this.config=rb(ze(O1,{optional:!0})??[]),this.navigationTransitions=ze(x6),this.urlSerializer=ze(Kc),this.location=ze(bd),this.rootComponentType=null,this.isNgZoneEnabled=ze(fn)instanceof fn&&fn.isInAngularZone(),this.resetConfig(this.config),this.currentUrlTree=new Jo,this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.routerState=Cb(this.currentUrlTree,this.rootComponentType),this.navigationTransitions.setupNavigations(this).subscribe(t=>{this.lastSuccessfulId=t.id,this.currentPageId=t.targetPageId},t=>{this.console.warn(`Unhandled Navigation Error: ${t}`)})}get navigationId(){return this.navigationTransitions.navigationId}get browserPageId(){return this.location.getState()?.\u0275routerPageId}get events(){return this.navigationTransitions.events}resetRootComponentType(t){this.rootComponentType=t,this.routerState.root.component=this.rootComponentType}initialNavigation(){this.setUpLocationChangeListener(),this.navigationTransitions.hasRequestedNavigation||this.navigateByUrl(this.location.path(!0),{replaceUrl:!0})}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(t=>{const i="popstate"===t.type?"popstate":"hashchange";"popstate"===i&&setTimeout(()=>{const r={replaceUrl:!0},s=t.state?.navigationId?t.state:null;if(t.state){const a={...t.state};delete a.navigationId,delete a.\u0275routerPageId,0!==Object.keys(a).length&&(r.state=a)}const o=this.parseUrl(t.url);this.scheduleNavigation(o,i,s,r)},0)}))}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}resetConfig(t){this.config=t.map(p6),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.navigationTransitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}createUrlTree(t,i={}){const{relativeTo:r,queryParams:s,fragment:o,queryParamsHandling:a,preserveFragment:c}=i,l=c?this.currentUrlTree.fragment:o;let u=null;switch(a){case"merge":u={...this.currentUrlTree.queryParams,...s};break;case"preserve":u=this.currentUrlTree.queryParams;break;default:u=s||null}return null!==u&&(u=this.removeEmptyProps(u)),this.urlCreationStrategy.createUrlTree(r,this.routerState,this.currentUrlTree,t,u,l??null)}navigateByUrl(t,i={skipLocationChange:!1}){const r=ea(t)?t:this.parseUrl(t),s=this.urlHandlingStrategy.merge(r,this.rawUrlTree);return this.scheduleNavigation(s,"imperative",null,i)}navigate(t,i={skipLocationChange:!1}){return function yB(n){for(let e=0;e<n.length;e++){if(null==n[e])throw new de(4008,!1)}}(t),this.navigateByUrl(this.createUrlTree(t,i),i)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){let i;try{i=this.urlSerializer.parse(t)}catch(r){i=this.malformedUriErrorHandler(r,this.urlSerializer,t)}return i}isActive(t,i){let r;if(r=!0===i?{...gB}:!1===i?{...vB}:i,ea(t))return ab(this.currentUrlTree,t,r);const s=this.parseUrl(t);return ab(this.currentUrlTree,s,r)}removeEmptyProps(t){return Object.keys(t).reduce((i,r)=>{const s=t[r];return null!=s&&(i[r]=s),i},{})}scheduleNavigation(t,i,r,s,o){if(this.disposed)return Promise.resolve(!1);let a,c,l,u;return o?(a=o.resolve,c=o.reject,l=o.promise):l=new Promise((f,h)=>{a=f,c=h}),"computed"===this.canceledNavigationResolution?(0===this.currentPageId&&(r=this.location.getState()),u=r&&r.\u0275routerPageId?r.\u0275routerPageId:s.replaceUrl||s.skipLocationChange?this.browserPageId??0:(this.browserPageId??0)+1):u=0,this.navigationTransitions.handleNavigationRequest({targetPageId:u,source:i,restoredState:r,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:t,extras:s,resolve:a,reject:c,promise:l,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),l.catch(f=>Promise.reject(f))}setBrowserUrl(t,i){const r=this.urlSerializer.serialize(t),s={...i.extras.state,...this.generateNgRouterState(i.id,i.targetPageId)};this.location.isCurrentPathEqualTo(r)||i.extras.replaceUrl?this.location.replaceState(r,"",s):this.location.go(r,"",s)}restoreHistory(t,i=!1){if("computed"===this.canceledNavigationResolution){const r=this.currentPageId-t.targetPageId;"popstate"!==t.source&&"eager"!==this.urlUpdateStrategy&&this.currentUrlTree!==this.getCurrentNavigation()?.finalUrl||0===r?this.currentUrlTree===this.getCurrentNavigation()?.finalUrl&&0===r&&(this.resetState(t),this.browserUrlTree=t.currentUrlTree,this.resetUrlToCurrentUrlTree()):this.location.historyGo(r)}else"replace"===this.canceledNavigationResolution&&(i&&this.resetState(t),this.resetUrlToCurrentUrlTree())}resetState(t){this.routerState=t.currentRouterState,this.currentUrlTree=t.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(t,i){return"computed"===this.canceledNavigationResolution?{navigationId:t,\u0275routerPageId:i}:{navigationId:t}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=Te({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();class tM{}let bB=(()=>{class n{constructor(t,i,r,s,o){this.router=t,this.injector=r,this.preloadingStrategy=s,this.loader=o}setUpPreloading(){this.subscription=this.router.events.pipe(to(t=>t instanceof ta),Ko(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(t,i){const r=[];for(const s of i){s.providers&&!s._injector&&(s._injector=Vu(s.providers,t,`Route: ${s.path}`));const o=s._injector??t,a=s._loadedInjector??o;s.loadChildren&&!s._loadedRoutes&&void 0===s.canLoad||s.loadComponent&&!s._loadedComponent?r.push(this.preloadConfig(o,s)):(s.children||s._loadedRoutes)&&r.push(this.processRoutes(a,s.children??s._loadedRoutes))}return En(r).pipe(Wa())}preloadConfig(t,i){return this.preloadingStrategy.preload(i,()=>{let r;r=i.loadChildren&&void 0===i.canLoad?this.loader.loadChildren(t,i):Fe(null);const s=r.pipe(Bn(o=>null===o?Fe(void 0):(i._loadedRoutes=o.routes,i._loadedInjector=o.injector,this.processRoutes(o.injector??t,o.routes))));return i.loadComponent&&!i._loadedComponent?En([s,this.loader.loadComponent(i)]).pipe(Wa()):s})}}return n.\u0275fac=function(t){return new(t||n)(he(Oi),he(L_),he(fs),he(tM),he(_6))},n.\u0275prov=Te({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const M6=new ue("");let nM=(()=>{class n{constructor(t,i,r,s,o={}){this.urlSerializer=t,this.transitions=i,this.viewportScroller=r,this.zone=s,this.options=o,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},o.scrollPositionRestoration=o.scrollPositionRestoration||"disabled",o.anchorScrolling=o.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.transitions.events.subscribe(t=>{t instanceof s6?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=t.navigationTrigger,this.restoredId=t.restoredState?t.restoredState.navigationId:0):t instanceof ta&&(this.lastId=t.id,this.scheduleScrollEvent(t,this.urlSerializer.parse(t.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.transitions.events.subscribe(t=>{t instanceof bb&&(t.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(t.position):t.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(t.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(t,i){this.zone.runOutsideAngular(()=>{setTimeout(()=>{this.zone.run(()=>{this.transitions.events.next(new bb(t,"popstate"===this.lastSource?this.store[this.restoredId]:null,i))})},0)})}ngOnDestroy(){this.routerEventsSubscription?.unsubscribe(),this.scrollEventsSubscription?.unsubscribe()}}return n.\u0275fac=function(t){!function kg(){throw new Error("invalid")}()},n.\u0275prov=Te({token:n,factory:n.\u0275fac}),n})();function V1(n,e){return{\u0275kind:n,\u0275providers:e}}function rM(){const n=ze(br);return e=>{const t=n.get($u);if(e!==t.components[0])return;const i=n.get(Oi),r=n.get(sM);1===n.get(C6)&&i.initialNavigation(),n.get(oM,null,He.Optional)?.setUpPreloading(),n.get(M6,null,He.Optional)?.init(),i.resetRootComponentType(t.componentTypes[0]),r.closed||(r.next(),r.unsubscribe())}}const sM=new ue("",{factory:()=>new Fr}),C6=new ue("",{providedIn:"root",factory:()=>1});const oM=new ue("");function EB(n){return V1(0,[{provide:oM,useExisting:bB},{provide:tM,useExisting:n}])}const aM=new ue("ROUTER_FORROOT_GUARD"),DB=[bd,{provide:Kc,useClass:Qd},Oi,il,{provide:z1,useFactory:function iM(n){return n.routerState.root},deps:[Oi]},_6,[]];function AB(){return new k_("Router",Oi)}let cM=(()=>{class n{constructor(t){}static forRoot(t,i){return{ngModule:n,providers:[DB,[],{provide:O1,multi:!0,useValue:t},{provide:aM,useFactory:RB,deps:[[Oi,new pc,new mc]]},{provide:A4,useValue:i||{}},i?.useHash?{provide:Yo,useClass:MO}:{provide:Yo,useClass:ax},{provide:M6,useFactory:()=>{const n=ze(Wk),e=ze(fn),t=ze(A4),i=ze(x6),r=ze(Kc);return t.scrollOffset&&n.setOffset(t.scrollOffset),new nM(r,i,n,e,t)}},i?.preloadingStrategy?EB(i.preloadingStrategy).\u0275providers:[],{provide:k_,multi:!0,useFactory:AB},i?.initialNavigation?PB(i):[],[{provide:lM,useFactory:rM},{provide:I_,multi:!0,useExisting:lM}]]}}static forChild(t){return{ngModule:n,providers:[{provide:O1,multi:!0,useValue:t}]}}}return n.\u0275fac=function(t){return new(t||n)(he(aM,8))},n.\u0275mod=gr({type:n}),n.\u0275inj=Zi({imports:[h6]}),n})();function RB(n){return"guarded"}function PB(n){return["disabled"===n.initialNavigation?V1(3,[{provide:Gu,multi:!0,useFactory:()=>{const e=ze(Oi);return()=>{e.setUpLocationChangeListener()}}},{provide:C6,useValue:2}]).\u0275providers:[],"enabledBlocking"===n.initialNavigation?V1(2,[{provide:C6,useValue:0},{provide:Gu,multi:!0,deps:[br],useFactory:e=>{const t=e.get(xO,Promise.resolve());return()=>t.then(()=>new Promise(r=>{const s=e.get(Oi),o=e.get(sM);(function i(r){e.get(Oi).events.pipe(to(o=>o instanceof ta||o instanceof _4||o instanceof xb),lt(o=>o instanceof ta||o instanceof _4&&(0===o.code||1===o.code)&&null),to(o=>null!==o),Zc(1)).subscribe(()=>{r()})})(()=>{r(!0)}),s.afterPreactivation=()=>(r(!0),o.closed?Fe(void 0):o),s.initialNavigation()}))}}]).\u0275providers:[]]}const lM=new ue("");class H1{}H1.\u0275fac=function(e){return new(e||H1)},H1.\u0275mod=gr({type:H1}),H1.\u0275inj=Zi({imports:[cM.forRoot([]),cM]});class FB extends Ai{constructor(e,t){super()}schedule(e,t=0){return this}}const T4={setInterval(n,e,...t){const{delegate:i}=T4;return i?.setInterval?i.setInterval(n,e,...t):setInterval(n,e,...t)},clearInterval(n){const{delegate:e}=T4;return(e?.clearInterval||clearInterval)(n)},delegate:void 0};class OB extends FB{constructor(e,t){super(e,t),this.scheduler=e,this.work=t,this.pending=!1}schedule(e,t=0){var i;if(this.closed)return this;this.state=e;const r=this.id,s=this.scheduler;return null!=r&&(this.id=this.recycleAsyncId(s,r,t)),this.pending=!0,this.delay=t,this.id=null!==(i=this.id)&&void 0!==i?i:this.requestAsyncId(s,this.id,t),this}requestAsyncId(e,t,i=0){return T4.setInterval(e.flush.bind(e,this),i)}recycleAsyncId(e,t,i=0){if(null!=i&&this.delay===i&&!1===this.pending)return t;null!=t&&T4.clearInterval(t)}execute(e,t){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const i=this._execute(e,t);if(i)return i;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(e,t){let r,i=!1;try{this.work(e)}catch(s){i=!0,r=s||new Error("Scheduled action threw falsy error")}if(i)return this.unsubscribe(),r}unsubscribe(){if(!this.closed){const{id:e,scheduler:t}=this,{actions:i}=t;this.work=this.state=this.scheduler=null,this.pending=!1,I3(i,this),null!=e&&(this.id=this.recycleAsyncId(t,e,null)),this.delay=null,super.unsubscribe()}}}const uM={now:()=>(uM.delegate||Date).now(),delegate:void 0};class ul{constructor(e,t=ul.now){this.schedulerActionCtor=e,this.now=t}schedule(e,t=0,i){return new this.schedulerActionCtor(this,e).schedule(i,t)}}ul.now=uM.now;class VB extends ul{constructor(e,t=ul.now){super(e,t),this.actions=[],this._active=!1}flush(e){const{actions:t}=this;if(this._active)return void t.push(e);let i;this._active=!0;do{if(i=e.execute(e.state,e.delay))break}while(e=t.shift());if(this._active=!1,i){for(;e=t.shift();)e.unsubscribe();throw i}}}const UB=new class HB extends VB{}(class kB extends OB{constructor(e,t){super(e,t),this.scheduler=e,this.work=t}schedule(e,t=0){return t>0?super.schedule(e,t):(this.delay=t,this.state=e,this.scheduler.flush(this),this)}execute(e,t){return t>0||this.closed?super.execute(e,t):this._execute(e,t)}requestAsyncId(e,t,i=0){return null!=i&&i>0||null==i&&this.delay>0?super.requestAsyncId(e,t,i):(e.flush(this),0)}});function jB(n,e){return n===e}const fl={};function hl(n,e){if(fl[n]=(fl[n]||0)+1,"function"==typeof e)return S6(n,(...i)=>({...e(...i),type:n}));switch(e?e._as:"empty"){case"empty":return S6(n,()=>({type:n}));case"props":return S6(n,i=>({...i,type:n}));default:throw new Error("Unexpected config.")}}function S6(n,e){return Object.defineProperty(e,"type",{value:n,writable:!1})}const hM="@ngrx/store/init";let na=(()=>{class n extends Si{constructor(){super({type:hM})}next(t){if("function"==typeof t)throw new TypeError("\n        Dispatch expected an object, instead it received a function.\n        If you're using the createAction function, make sure to invoke the function\n        before dispatching the action. For example, someAction should be someAction().");if(typeof t>"u")throw new TypeError("Actions must be objects");if(typeof t.type>"u")throw new TypeError("Actions must have a type property");super.next(t)}complete(){}ngOnDestroy(){super.complete()}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=Te({token:n,factory:n.\u0275fac}),n})();const ZB=[na],D6=new ue("@ngrx/store Internal Root Guard"),dM=new ue("@ngrx/store Internal Initial State"),A6=new ue("@ngrx/store Initial State"),pM=new ue("@ngrx/store Reducer Factory"),mM=new ue("@ngrx/store Internal Reducer Factory Provider"),gM=new ue("@ngrx/store Initial Reducers"),T6=new ue("@ngrx/store Internal Initial Reducers"),vM=new ue("@ngrx/store Store Features"),yM=new ue("@ngrx/store Internal Store Reducers"),I6=new ue("@ngrx/store Internal Feature Reducers"),_M=new ue("@ngrx/store Internal Feature Configs"),L6=new ue("@ngrx/store Internal Store Features"),xM=new ue("@ngrx/store Internal Feature Reducers Token"),R6=new ue("@ngrx/store Feature Reducers"),bM=new ue("@ngrx/store User Provided Meta Reducers"),I4=new ue("@ngrx/store Meta Reducers"),MM=new ue("@ngrx/store Internal Resolved Meta Reducers"),wM=new ue("@ngrx/store User Runtime Checks Config"),CM=new ue("@ngrx/store Internal User Runtime Checks Config"),dl=new ue("@ngrx/store Internal Runtime Checks"),pl=new ue("@ngrx/store Check if Action types are unique");function z6(n,e={}){const t=Object.keys(n),i={};for(let s=0;s<t.length;s++){const o=t[s];"function"==typeof n[o]&&(i[o]=n[o])}const r=Object.keys(i);return function(o,a){o=void 0===o?e:o;let c=!1;const l={};for(let u=0;u<r.length;u++){const f=r[u],d=o[f],p=(0,i[f])(d,a);l[f]=p,c=c||p!==d}return c?l:o}}function EM(...n){return function(e){if(0===n.length)return e;const t=n[n.length-1];return n.slice(0,-1).reduceRight((r,s)=>s(r),t(e))}}function DM(n,e){return Array.isArray(e)&&e.length>0&&(n=EM.apply(null,[...e,n])),(t,i)=>{const r=n(t);return(s,o)=>r(s=void 0===s?i:s,o)}}new ue("@ngrx/store Root Store Provider"),new ue("@ngrx/store Feature State Provider");class L4 extends en{}class AM extends na{}let ml=(()=>{class n extends Si{constructor(t,i,r,s){super(s(r,i)),this.dispatcher=t,this.initialState=i,this.reducers=r,this.reducerFactory=s}get currentReducers(){return this.reducers}addFeature(t){this.addFeatures([t])}addFeatures(t){const i=t.reduce((r,{reducers:s,reducerFactory:o,metaReducers:a,initialState:c,key:l})=>{const u="function"==typeof s?function YB(n){const e=Array.isArray(n)&&n.length>0?EM(...n):t=>t;return(t,i)=>(t=e(t),(r,s)=>t(r=void 0===r?i:r,s))}(a)(s,c):DM(o,a)(s,c);return r[l]=u,r},{});this.addReducers(i)}removeFeature(t){this.removeFeatures([t])}removeFeatures(t){this.removeReducers(t.map(i=>i.key))}addReducer(t,i){this.addReducers({[t]:i})}addReducers(t){this.reducers={...this.reducers,...t},this.updateReducers(Object.keys(t))}removeReducer(t){this.removeReducers([t])}removeReducers(t){t.forEach(i=>{this.reducers=function XB(n,e){return Object.keys(n).filter(t=>t!==e).reduce((t,i)=>Object.assign(t,{[i]:n[i]}),{})}(this.reducers,i)}),this.updateReducers(t)}updateReducers(t){this.next(this.reducerFactory(this.reducers,this.initialState)),this.dispatcher.next({type:"@ngrx/store/update-reducers",features:t})}ngOnDestroy(){this.complete()}}return n.\u0275fac=function(t){return new(t||n)(he(AM),he(A6),he(gM),he(pM))},n.\u0275prov=Te({token:n,factory:n.\u0275fac}),n})();const JB=[ml,{provide:L4,useExisting:ml},{provide:AM,useExisting:na}];let R4=(()=>{class n extends Fr{ngOnDestroy(){this.complete()}}return n.\u0275fac=function(){let e;return function(i){return(e||(e=x5(n)))(i||n)}}(),n.\u0275prov=Te({token:n,factory:n.\u0275fac}),n})();const QB=[R4];class TM extends en{}let IM=(()=>{class n extends Si{constructor(t,i,r,s){super(s);const a=t.pipe(Bf(UB)).pipe(function BB(...n){const e=h9(n);return yn((t,i)=>{const r=n.length,s=new Array(r);let o=n.map(()=>!1),a=!1;for(let c=0;c<r;c++)pr(n[c]).subscribe(ln(i,l=>{s[c]=l,!a&&!o[c]&&(o[c]=!0,(a=o.every(ns))&&(o=null))},zf));t.subscribe(ln(i,c=>{if(a){const l=[c,...s];i.next(e?e(...l):l)}}))})}(i)),l=a.pipe(Yd(eG,{state:s}));this.stateSubscription=l.subscribe(({state:u,action:f})=>{this.next(u),r.next(f)})}ngOnDestroy(){this.stateSubscription.unsubscribe(),this.complete()}}return n.INIT=hM,n.\u0275fac=function(t){return new(t||n)(he(na),he(L4),he(R4),he(A6))},n.\u0275prov=Te({token:n,factory:n.\u0275fac}),n})();function eG(n={state:void 0},[e,t]){const{state:i}=n;return{state:t(i,e),action:e}}const tG=[IM,{provide:TM,useExisting:IM}];let so=(()=>{class n extends en{constructor(t,i,r){super(),this.actionsObserver=i,this.reducerManager=r,this.source=t}select(t,...i){return N6.call(null,t,...i)(this)}lift(t){const i=new n(this,this.actionsObserver,this.reducerManager);return i.operator=t,i}dispatch(t){this.actionsObserver.next(t)}next(t){this.actionsObserver.next(t)}error(t){this.actionsObserver.error(t)}complete(){this.actionsObserver.complete()}addReducer(t,i){this.reducerManager.addReducer(t,i)}removeReducer(t){this.reducerManager.removeReducer(t)}}return n.\u0275fac=function(t){return new(t||n)(he(TM),he(na),he(ml))},n.\u0275prov=Te({token:n,factory:n.\u0275fac}),n})();const nG=[so];function N6(n,e,...t){return function(r){let s;if("string"==typeof n){const o=[e,...t].filter(Boolean);s=r.pipe(function GB(...n){const e=n.length;if(0===e)throw new Error("list of properties cannot be empty.");return lt(t=>{let i=t;for(let r=0;r<e;r++){const s=i?.[n[r]];if(!(typeof s<"u"))return;i=s}return i})}(n,...o))}else{if("function"!=typeof n)throw new TypeError(`Unexpected type '${typeof n}' in select operator, expected 'string' or 'function'`);s=r.pipe(lt(o=>n(o,e)))}return s.pipe(function WB(n,e=ns){return n=n??jB,yn((t,i)=>{let r,s=!0;t.subscribe(ln(i,o=>{const a=e(o);(s||!n(r,a))&&(s=!1,r=a,i.next(o))}))})}())}}const F6="https://ngrx.io/guide/store/configuration/runtime-checks";function LM(n){return void 0===n}function RM(n){return null===n}function PM(n){return Array.isArray(n)}function zM(n){return"object"==typeof n&&null!==n}function O6(n){return"function"==typeof n}function gG(n){return n instanceof ue?ze(n):n}function vG(n,e){return e.map((t,i)=>{if(n[i]instanceof ue){const r=ze(n[i]);return{key:t.key,reducerFactory:r.reducerFactory?r.reducerFactory:z6,metaReducers:r.metaReducers?r.metaReducers:[],initialState:r.initialState}}return t})}function yG(n){return n.map(e=>e instanceof ue?ze(e):e)}function H6(n){return"function"==typeof n?n():n}function _G(n,e){return n.concat(e)}function xG(){if(ze(so,{optional:!0,skipSelf:!0}))throw new TypeError("The root Store has been provided more than once. Feature modules should provide feature states instead.");return"guarded"}function U6(n){Object.freeze(n);const e=O6(n);return Object.getOwnPropertyNames(n).forEach(t=>{if(!t.startsWith("\u0275")&&function cG(n,e){return Object.prototype.hasOwnProperty.call(n,e)}(n,t)&&(!e||"caller"!==t&&"callee"!==t&&"arguments"!==t)){const i=n[t];(zM(i)||O6(i))&&!Object.isFrozen(i)&&U6(i)}}),n}function B6(n,e=[]){return(LM(n)||RM(n))&&0===e.length?{path:["root"],value:n}:Object.keys(n).reduce((i,r)=>{if(i)return i;const s=n[r];return function aG(n){return O6(n)&&n.hasOwnProperty("\u0275cmp")}(s)?i:!(LM(s)||RM(s)||function sG(n){return"number"==typeof n}(s)||function rG(n){return"boolean"==typeof n}(s)||function iG(n){return"string"==typeof n}(s)||PM(s))&&(function NM(n){if(!function oG(n){return zM(n)&&!PM(n)}(n))return!1;const e=Object.getPrototypeOf(n);return e===Object.prototype||null===e}(s)?B6(s,[...e,r]):{path:[...e,r],value:s})},!1)}function kM(n,e){if(!1===n)return;const t=n.path.join("."),i=new Error(`Detected unserializable ${e} at "${t}". ${F6}#strict${e}serializability`);throw i.value=n.value,i.unserializablePath=t,i}function CG(n){return{strictStateSerializability:!1,strictActionSerializability:!1,strictStateImmutability:!1,strictActionImmutability:!1,strictActionWithinNgZone:!1,strictActionTypeUniqueness:!1}}function SG({strictActionSerializability:n,strictStateSerializability:e}){return t=>n||e?function MG(n,e){return function(t,i){e.action(i)&&kM(B6(i),"action");const r=n(t,i);return e.state()&&kM(B6(r),"state"),r}}(t,{action:i=>n&&!G6(i),state:()=>e}):t}function EG({strictActionImmutability:n,strictStateImmutability:e}){return t=>n||e?function bG(n,e){return function(t,i){const r=e.action(i)?U6(i):i,s=n(t,r);return e.state()?U6(s):s}}(t,{action:i=>n&&!G6(i),state:()=>e}):t}function G6(n){return n.type.startsWith("@ngrx")}function DG({strictActionWithinNgZone:n}){return e=>n?function wG(n,e){return function(t,i){if(e.action(i)&&!fn.isInAngularZone())throw new Error(`Action '${i.type}' running outside NgZone. ${F6}#strictactionwithinngzone`);return n(t,i)}}(e,{action:t=>n&&!G6(t)}):e}function AG(n){return[{provide:CM,useValue:n},{provide:wM,useFactory:TG,deps:[CM]},{provide:dl,deps:[wM],useFactory:CG},{provide:I4,multi:!0,deps:[dl],useFactory:EG},{provide:I4,multi:!0,deps:[dl],useFactory:SG},{provide:I4,multi:!0,deps:[dl],useFactory:DG}]}function VM(){return[{provide:pl,multi:!0,deps:[dl],useFactory:IG}]}function TG(n){return n}function IG(n){if(!n.strictActionTypeUniqueness)return;const e=Object.entries(fl).filter(([,t])=>t>1).map(([t])=>t);if(e.length)throw new Error(`Action types are registered more than once, ${e.map(t=>`"${t}"`).join(", ")}. ${F6}#strictactiontypeuniqueness`)}function HM(n={},e={}){return[{provide:D6,useFactory:xG},{provide:dM,useValue:e.initialState},{provide:A6,useFactory:H6,deps:[dM]},{provide:T6,useValue:n},{provide:yM,useExisting:n instanceof ue?n:T6},{provide:gM,deps:[T6,[new dc(yM)]],useFactory:gG},{provide:bM,useValue:e.metaReducers?e.metaReducers:[]},{provide:MM,deps:[I4,bM],useFactory:_G},{provide:mM,useValue:e.reducerFactory?e.reducerFactory:z6},{provide:pM,deps:[mM,MM],useFactory:DM},ZB,JB,QB,tG,nG,AG(e.runtimeChecks),VM()]}function UM(n,e,t={}){return[{provide:_M,multi:!0,useValue:n instanceof Object?{}:t},{provide:vM,multi:!0,useValue:{key:n instanceof Object?n.name:n,reducerFactory:t instanceof ue||!t.reducerFactory?z6:t.reducerFactory,metaReducers:t instanceof ue||!t.metaReducers?[]:t.metaReducers,initialState:t instanceof ue||!t.initialState?void 0:t.initialState}},{provide:L6,deps:[_M,vM],useFactory:vG},{provide:I6,multi:!0,useValue:n instanceof Object?n.reducer:e},{provide:xM,multi:!0,useExisting:e instanceof ue?e:I6},{provide:R6,multi:!0,deps:[I6,[new dc(xM)]],useFactory:yG},VM()]}let BM=(()=>{class n{constructor(t,i,r,s,o,a){}}return n.\u0275fac=function(t){return new(t||n)(he(na),he(L4),he(R4),he(so),he(D6,8),he(pl,8))},n.\u0275mod=gr({type:n}),n.\u0275inj=Zi({}),n})(),NG=(()=>{class n{constructor(t,i,r,s,o){this.features=t,this.featureReducers=i,this.reducerManager=r;const a=t.map((c,l)=>{const f=i.shift()[l];return{...c,reducers:f,initialState:H6(c.initialState)}});r.addFeatures(a)}ngOnDestroy(){this.reducerManager.removeFeatures(this.features)}}return n.\u0275fac=function(t){return new(t||n)(he(L6),he(R6),he(ml),he(BM),he(pl,8))},n.\u0275mod=gr({type:n}),n.\u0275inj=Zi({}),n})(),FG=(()=>{class n{static forRoot(t,i){return{ngModule:BM,providers:[...HM(t,i)]}}static forFeature(t,i,r={}){return{ngModule:NG,providers:[...UM(t,i,r)]}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=gr({type:n}),n.\u0275inj=Zi({}),n})();function W6(...n){return{reducer:n.pop(),types:n.map(i=>i.type)}}var P4=(()=>{return(n=P4||(P4={})).MAKERS_FUND="Makers Fund",n.BlockXYZ="Block XYZ",n.REVEAL="Reveal",n.BIRD="Bird",n.WATCH="Watch",n.TOY_SHADER="Toy Shader",n.DISPLACEMENT_SHADER="Displacement Shader",n.SPACE_DUST="Space Dust",n.TEXT_DUST_ANIM="Text Dust Anim",n.YogForm="Yog Form",n.TEXT_STRACE="Text Strace",n.FACE_SELECTION="Face Selection",n.STRIP_GLOBE="Strip Globe",P4;var n})(),oo=(()=>{return(n=oo||(oo={})).HOME="HOME",n.ABOUT="ABOUT",n.PORTFOLIO="PORTFOLIO",n.CONTACT="CONTACT",n.PLAY="PLAY",n.HEADLIGHTS="HEADLIGHTS",oo;var n})(),ws=(()=>{return(n=ws||(ws={})).touchDown="touchDown",n.touchMove="touchMove",n.touchUp="touchUp",ws;var n})();function kG(n,e){if(1&n){const t=Iu();Le(0,"div",3)(1,"div",4),Jn("click",function(){const s=X3(t).$implicit;return Y3(Ic().onItemClick(s))}),_t(2," \u27bd "),Le(3,"span",5),_t(4),Qe()(),nn(5,"hr"),Qe()}if(2&n){const t=e.$implicit;Lt(4),zu("",t," ")}}const VG=function(n){return{show:n}};class gl{constructor(){this.menuItems=Object.values(P4),this.show=!1}onMenuClick(){this.show=!this.show,console.log("onMenuClick ~~~",this.show)}onItemClick(e){console.log("item ~~~",e)}}gl.\u0275fac=function(e){return new(e||gl)},gl.\u0275cmp=xi({type:gl,selectors:[["app-menu"]],decls:4,vars:4,consts:[[1,"menu-nav","btn",3,"click"],[1,"nav-container",3,"ngClass"],["class","nav-btn btn",4,"ngFor","ngForOf"],[1,"nav-btn","btn"],[1,"menu-select",3,"click"],[1,"nav-text"]],template:function(e,t){1&e&&(Le(0,"button",0),Jn("click",function(){return t.onMenuClick()}),_t(1,"\u2630"),Qe(),Le(2,"div",1),ms(3,kG,6,1,"div",2),Qe()),2&e&&(Lt(2),Kt("ngClass",Ks(2,VG,t.show)),Lt(1),Kt("ngForOf",t.menuItems))},dependencies:[Ld,_x],styles:[".menu-nav[_ngcontent-%COMP%]{font-size:22px;left:auto;right:0;top:0;margin:5px 5px 0 0;position:fixed;padding-top:6px;z-index:100;background-color:#111}.nav-container[_ngcontent-%COMP%]{position:fixed;inset:50px -300px 0 auto;text-align:left;width:250px;z-index:41;overflow-y:auto;opacity:0;transition:all .2s ease-in-out;color:#fff;display:flex;flex-direction:column;align-items:flex-start;background-color:#111;border-radius:10px}.show[_ngcontent-%COMP%]{transform:translate(-300px);opacity:1}.nav-btn[_ngcontent-%COMP%]{width:100%;text-align:left}.nav-btn[_ngcontent-%COMP%]   hr[_ngcontent-%COMP%]{margin:5px;color:#fff5}.btn[_ngcontent-%COMP%]{color:#fff9}.btn[_ngcontent-%COMP%]   [_ngcontent-%COMP%]:hover{color:#fff}"]});var j6={prefix:"fab",iconName:"skype",icon:[448,512,[],"f17e","M424.7 299.8c2.9-14 4.7-28.9 4.7-43.8 0-113.5-91.9-205.3-205.3-205.3-14.9 0-29.7 1.7-43.8 4.7C161.3 40.7 137.7 32 112 32 50.2 32 0 82.2 0 144c0 25.7 8.7 49.3 23.3 68.2-2.9 14-4.7 28.9-4.7 43.8 0 113.5 91.9 205.3 205.3 205.3 14.9 0 29.7-1.7 43.8-4.7 19 14.6 42.6 23.3 68.2 23.3 61.8 0 112-50.2 112-112 .1-25.6-8.6-49.2-23.2-68.1zm-194.6 91.5c-65.6 0-120.5-29.2-120.5-65 0-16 9-30.6 29.5-30.6 31.2 0 34.1 44.9 88.1 44.9 25.7 0 42.3-11.4 42.3-26.3 0-18.7-16-21.6-42-28-62.5-15.4-117.8-22-117.8-87.2 0-59.2 58.6-81.1 109.1-81.1 55.1 0 110.8 21.9 110.8 55.4 0 16.9-11.4 31.8-30.3 31.8-28.3 0-29.2-33.5-75-33.5-25.7 0-42 7-42 22.5 0 19.8 20.8 21.8 69.1 33 41.4 9.3 90.7 26.8 90.7 77.6 0 59.1-57.1 86.5-112 86.5z"]},fw={prefix:"fab",iconName:"linkedin",icon:[448,512,[],"f08c","M416 32H31.9C14.3 32 0 46.5 0 64.3v383.4C0 465.5 14.3 480 31.9 480H416c17.6 0 32-14.5 32-32.3V64.3c0-17.8-14.4-32.3-32-32.3zM135.4 416H69V202.2h66.5V416zm-33.2-243c-21.3 0-38.5-17.3-38.5-38.5S80.9 96 102.2 96c21.2 0 38.5 17.3 38.5 38.5 0 21.3-17.2 38.5-38.5 38.5zm282.1 243h-66.4V312c0-24.8-.5-56.7-34.5-56.7-34.6 0-39.9 27-39.9 54.9V416h-66.4V202.2h63.7v29.2h.9c8.9-16.8 30.6-34.5 62.9-34.5 67.2 0 79.7 44.3 79.7 101.9V416z"]},yw={prefix:"fab",iconName:"dev",icon:[448,512,[],"f6cc","M120.12 208.29c-3.88-2.9-7.77-4.35-11.65-4.35H91.03v104.47h17.45c3.88 0 7.77-1.45 11.65-4.35 3.88-2.9 5.82-7.25 5.82-13.06v-69.65c-.01-5.8-1.96-10.16-5.83-13.06zM404.1 32H43.9C19.7 32 .06 51.59 0 75.8v360.4C.06 460.41 19.7 480 43.9 480h360.2c24.21 0 43.84-19.59 43.9-43.8V75.8c-.06-24.21-19.7-43.8-43.9-43.8zM154.2 291.19c0 18.81-11.61 47.31-48.36 47.25h-46.4V172.98h47.38c35.44 0 47.36 28.46 47.37 47.28l.01 70.93zm100.68-88.66H201.6v38.42h32.57v29.57H201.6v38.41h53.29v29.57h-62.18c-11.16.29-20.44-8.53-20.72-19.69V193.7c-.27-11.15 8.56-20.41 19.71-20.69h63.19l-.01 29.52zm103.64 115.29c-13.2 30.75-36.85 24.63-47.44 0l-38.53-144.8h32.57l29.71 113.72 29.57-113.72h32.58l-38.46 144.8z"]},_w={prefix:"fab",iconName:"github",icon:[496,512,[],"f09b","M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"]};const q6=hl("increment"),Z6=hl("decrement"),X6=hl("reset"),Y6=hl("actionSetPage",{_as:"props",_p:void 0});function Cw(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(n);e&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(n,r).enumerable})),t.push.apply(t,i)}return t}function be(n){for(var e=1;e<arguments.length;e++){var t=null!=arguments[e]?arguments[e]:{};e%2?Cw(Object(t),!0).forEach(function(i){Ln(n,i,t[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):Cw(Object(t)).forEach(function(i){Object.defineProperty(n,i,Object.getOwnPropertyDescriptor(t,i))})}return n}function z4(n){return(z4="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(n)}function Sw(n,e){for(var t=0;t<e.length;t++){var i=e[t];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(n,i.key,i)}}function Ln(n,e,t){return e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function K6(n,e){return function xJ(n){if(Array.isArray(n))return n}(n)||function MJ(n,e){var t=null==n?null:typeof Symbol<"u"&&n[Symbol.iterator]||n["@@iterator"];if(null!=t){var o,a,i=[],r=!0,s=!1;try{for(t=t.call(n);!(r=(o=t.next()).done)&&(i.push(o.value),!e||i.length!==e);r=!0);}catch(c){s=!0,a=c}finally{try{!r&&null!=t.return&&t.return()}finally{if(s)throw a}}return i}}(n,e)||Ew(n,e)||function CJ(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function yl(n){return function _J(n){if(Array.isArray(n))return J6(n)}(n)||function bJ(n){if(typeof Symbol<"u"&&null!=n[Symbol.iterator]||null!=n["@@iterator"])return Array.from(n)}(n)||Ew(n)||function wJ(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ew(n,e){if(n){if("string"==typeof n)return J6(n,e);var t=Object.prototype.toString.call(n).slice(8,-1);if("Object"===t&&n.constructor&&(t=n.constructor.name),"Map"===t||"Set"===t)return Array.from(n);if("Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return J6(n,e)}}function J6(n,e){(null==e||e>n.length)&&(e=n.length);for(var t=0,i=new Array(e);t<e;t++)i[t]=n[t];return i}var Dw=function(){},Q6={},Aw={},Tw=null,Iw={mark:Dw,measure:Dw};try{typeof window<"u"&&(Q6=window),typeof document<"u"&&(Aw=document),typeof MutationObserver<"u"&&(Tw=MutationObserver),typeof performance<"u"&&(Iw=performance)}catch{}var O4,k4,V4,H4,U4,Lw=(Q6.navigator||{}).userAgent,Rw=void 0===Lw?"":Lw,ao=Q6,Ut=Aw,Pw=Tw,F4=Iw,Cs=!!Ut.documentElement&&!!Ut.head&&"function"==typeof Ut.addEventListener&&"function"==typeof Ut.createElement,zw=~Rw.indexOf("MSIE")||~Rw.indexOf("Trident/"),Ss="___FONT_AWESOME___",Fw="svg-inline--fa",ia="data-fa-i2svg",t8="data-fa-pseudo-element",n8="data-prefix",i8="data-icon",Ow="fontawesome-i2svg",AJ=["HTML","HEAD","STYLE","SCRIPT"],kw=function(){try{return!0}catch{return!1}}(),Bt="classic",sn="sharp",r8=[Bt,sn];function _l(n){return new Proxy(n,{get:function(t,i){return i in t?t[i]:t[Bt]}})}var xl=_l((Ln(O4={},Bt,{fa:"solid",fas:"solid","fa-solid":"solid",far:"regular","fa-regular":"regular",fal:"light","fa-light":"light",fat:"thin","fa-thin":"thin",fad:"duotone","fa-duotone":"duotone",fab:"brands","fa-brands":"brands",fak:"kit","fa-kit":"kit"}),Ln(O4,sn,{fa:"solid",fass:"solid","fa-solid":"solid"}),O4)),bl=_l((Ln(k4={},Bt,{solid:"fas",regular:"far",light:"fal",thin:"fat",duotone:"fad",brands:"fab",kit:"fak"}),Ln(k4,sn,{solid:"fass"}),k4)),Ml=_l((Ln(V4={},Bt,{fab:"fa-brands",fad:"fa-duotone",fak:"fa-kit",fal:"fa-light",far:"fa-regular",fas:"fa-solid",fat:"fa-thin"}),Ln(V4,sn,{fass:"fa-solid"}),V4)),TJ=_l((Ln(H4={},Bt,{"fa-brands":"fab","fa-duotone":"fad","fa-kit":"fak","fa-light":"fal","fa-regular":"far","fa-solid":"fas","fa-thin":"fat"}),Ln(H4,sn,{"fa-solid":"fass"}),H4)),IJ=/fa(s|r|l|t|d|b|k|ss)?[\-\ ]/,Vw="fa-layers-text",LJ=/Font ?Awesome ?([56 ]*)(Solid|Regular|Light|Thin|Duotone|Brands|Free|Pro|Sharp|Kit)?.*/i,RJ=_l((Ln(U4={},Bt,{900:"fas",400:"far",normal:"far",300:"fal",100:"fat"}),Ln(U4,sn,{900:"fass"}),U4)),Hw=[1,2,3,4,5,6,7,8,9,10],PJ=Hw.concat([11,12,13,14,15,16,17,18,19,20]),zJ=["class","data-prefix","data-icon","data-fa-transform","data-fa-mask"],wl=new Set;Object.keys(bl[Bt]).map(wl.add.bind(wl)),Object.keys(bl[sn]).map(wl.add.bind(wl));var NJ=[].concat(r8,yl(wl),["2xs","xs","sm","lg","xl","2xl","beat","border","fade","beat-fade","bounce","flip-both","flip-horizontal","flip-vertical","flip","fw","inverse","layers-counter","layers-text","layers","li","pull-left","pull-right","pulse","rotate-180","rotate-270","rotate-90","rotate-by","shake","spin-pulse","spin-reverse","spin","stack-1x","stack-2x","stack","ul","duotone-group","swap-opacity","primary","secondary"]).concat(Hw.map(function(n){return"".concat(n,"x")})).concat(PJ.map(function(n){return"w-".concat(n)})),Cl=ao.FontAwesomeConfig||{};Ut&&"function"==typeof Ut.querySelector&&[["data-family-prefix","familyPrefix"],["data-css-prefix","cssPrefix"],["data-family-default","familyDefault"],["data-style-default","styleDefault"],["data-replacement-class","replacementClass"],["data-auto-replace-svg","autoReplaceSvg"],["data-auto-add-css","autoAddCss"],["data-auto-a11y","autoA11y"],["data-search-pseudo-elements","searchPseudoElements"],["data-observe-mutations","observeMutations"],["data-mutate-approach","mutateApproach"],["data-keep-original-source","keepOriginalSource"],["data-measure-performance","measurePerformance"],["data-show-missing-icons","showMissingIcons"]].forEach(function(n){var e=K6(n,2),i=e[1],r=function OJ(n){return""===n||"false"!==n&&("true"===n||n)}(function FJ(n){var e=Ut.querySelector("script["+n+"]");if(e)return e.getAttribute(n)}(e[0]));null!=r&&(Cl[i]=r)});var Uw={styleDefault:"solid",familyDefault:"classic",cssPrefix:"fa",replacementClass:Fw,autoReplaceSvg:!0,autoAddCss:!0,autoA11y:!0,searchPseudoElements:!1,observeMutations:!0,mutateApproach:"async",keepOriginalSource:!0,measurePerformance:!1,showMissingIcons:!0};Cl.familyPrefix&&(Cl.cssPrefix=Cl.familyPrefix);var U1=be(be({},Uw),Cl);U1.autoReplaceSvg||(U1.observeMutations=!1);var Ee={};Object.keys(Uw).forEach(function(n){Object.defineProperty(Ee,n,{enumerable:!0,set:function(t){U1[n]=t,Sl.forEach(function(i){return i(Ee)})},get:function(){return U1[n]}})}),Object.defineProperty(Ee,"familyPrefix",{enumerable:!0,set:function(e){U1.cssPrefix=e,Sl.forEach(function(t){return t(Ee)})},get:function(){return U1.cssPrefix}}),ao.FontAwesomeConfig=Ee;var Sl=[],Xr={size:16,x:0,y:0,rotate:0,flipX:!1,flipY:!1};function El(){for(var n=12,e="";n-- >0;)e+="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ"[62*Math.random()|0];return e}function B1(n){for(var e=[],t=(n||[]).length>>>0;t--;)e[t]=n[t];return e}function s8(n){return n.classList?B1(n.classList):(n.getAttribute("class")||"").split(" ").filter(function(e){return e})}function Bw(n){return"".concat(n).replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/'/g,"&#39;").replace(/</g,"&lt;").replace(/>/g,"&gt;")}function B4(n){return Object.keys(n||{}).reduce(function(e,t){return e+"".concat(t,": ").concat(n[t].trim(),";")},"")}function o8(n){return n.size!==Xr.size||n.x!==Xr.x||n.y!==Xr.y||n.rotate!==Xr.rotate||n.flipX||n.flipY}function Gw(){var n="fa",e=Fw,t=Ee.cssPrefix,i=Ee.replacementClass,r=':root, :host {\n  --fa-font-solid: normal 900 1em/1 "Font Awesome 6 Solid";\n  --fa-font-regular: normal 400 1em/1 "Font Awesome 6 Regular";\n  --fa-font-light: normal 300 1em/1 "Font Awesome 6 Light";\n  --fa-font-thin: normal 100 1em/1 "Font Awesome 6 Thin";\n  --fa-font-duotone: normal 900 1em/1 "Font Awesome 6 Duotone";\n  --fa-font-sharp-solid: normal 900 1em/1 "Font Awesome 6 Sharp";\n  --fa-font-brands: normal 400 1em/1 "Font Awesome 6 Brands";\n}\n\nsvg:not(:root).svg-inline--fa, svg:not(:host).svg-inline--fa {\n  overflow: visible;\n  box-sizing: content-box;\n}\n\n.svg-inline--fa {\n  display: var(--fa-display, inline-block);\n  height: 1em;\n  overflow: visible;\n  vertical-align: -0.125em;\n}\n.svg-inline--fa.fa-2xs {\n  vertical-align: 0.1em;\n}\n.svg-inline--fa.fa-xs {\n  vertical-align: 0em;\n}\n.svg-inline--fa.fa-sm {\n  vertical-align: -0.0714285705em;\n}\n.svg-inline--fa.fa-lg {\n  vertical-align: -0.2em;\n}\n.svg-inline--fa.fa-xl {\n  vertical-align: -0.25em;\n}\n.svg-inline--fa.fa-2xl {\n  vertical-align: -0.3125em;\n}\n.svg-inline--fa.fa-pull-left {\n  margin-right: var(--fa-pull-margin, 0.3em);\n  width: auto;\n}\n.svg-inline--fa.fa-pull-right {\n  margin-left: var(--fa-pull-margin, 0.3em);\n  width: auto;\n}\n.svg-inline--fa.fa-li {\n  width: var(--fa-li-width, 2em);\n  top: 0.25em;\n}\n.svg-inline--fa.fa-fw {\n  width: var(--fa-fw-width, 1.25em);\n}\n\n.fa-layers svg.svg-inline--fa {\n  bottom: 0;\n  left: 0;\n  margin: auto;\n  position: absolute;\n  right: 0;\n  top: 0;\n}\n\n.fa-layers-counter, .fa-layers-text {\n  display: inline-block;\n  position: absolute;\n  text-align: center;\n}\n\n.fa-layers {\n  display: inline-block;\n  height: 1em;\n  position: relative;\n  text-align: center;\n  vertical-align: -0.125em;\n  width: 1em;\n}\n.fa-layers svg.svg-inline--fa {\n  -webkit-transform-origin: center center;\n          transform-origin: center center;\n}\n\n.fa-layers-text {\n  left: 50%;\n  top: 50%;\n  -webkit-transform: translate(-50%, -50%);\n          transform: translate(-50%, -50%);\n  -webkit-transform-origin: center center;\n          transform-origin: center center;\n}\n\n.fa-layers-counter {\n  background-color: var(--fa-counter-background-color, #ff253a);\n  border-radius: var(--fa-counter-border-radius, 1em);\n  box-sizing: border-box;\n  color: var(--fa-inverse, #fff);\n  line-height: var(--fa-counter-line-height, 1);\n  max-width: var(--fa-counter-max-width, 5em);\n  min-width: var(--fa-counter-min-width, 1.5em);\n  overflow: hidden;\n  padding: var(--fa-counter-padding, 0.25em 0.5em);\n  right: var(--fa-right, 0);\n  text-overflow: ellipsis;\n  top: var(--fa-top, 0);\n  -webkit-transform: scale(var(--fa-counter-scale, 0.25));\n          transform: scale(var(--fa-counter-scale, 0.25));\n  -webkit-transform-origin: top right;\n          transform-origin: top right;\n}\n\n.fa-layers-bottom-right {\n  bottom: var(--fa-bottom, 0);\n  right: var(--fa-right, 0);\n  top: auto;\n  -webkit-transform: scale(var(--fa-layers-scale, 0.25));\n          transform: scale(var(--fa-layers-scale, 0.25));\n  -webkit-transform-origin: bottom right;\n          transform-origin: bottom right;\n}\n\n.fa-layers-bottom-left {\n  bottom: var(--fa-bottom, 0);\n  left: var(--fa-left, 0);\n  right: auto;\n  top: auto;\n  -webkit-transform: scale(var(--fa-layers-scale, 0.25));\n          transform: scale(var(--fa-layers-scale, 0.25));\n  -webkit-transform-origin: bottom left;\n          transform-origin: bottom left;\n}\n\n.fa-layers-top-right {\n  top: var(--fa-top, 0);\n  right: var(--fa-right, 0);\n  -webkit-transform: scale(var(--fa-layers-scale, 0.25));\n          transform: scale(var(--fa-layers-scale, 0.25));\n  -webkit-transform-origin: top right;\n          transform-origin: top right;\n}\n\n.fa-layers-top-left {\n  left: var(--fa-left, 0);\n  right: auto;\n  top: var(--fa-top, 0);\n  -webkit-transform: scale(var(--fa-layers-scale, 0.25));\n          transform: scale(var(--fa-layers-scale, 0.25));\n  -webkit-transform-origin: top left;\n          transform-origin: top left;\n}\n\n.fa-1x {\n  font-size: 1em;\n}\n\n.fa-2x {\n  font-size: 2em;\n}\n\n.fa-3x {\n  font-size: 3em;\n}\n\n.fa-4x {\n  font-size: 4em;\n}\n\n.fa-5x {\n  font-size: 5em;\n}\n\n.fa-6x {\n  font-size: 6em;\n}\n\n.fa-7x {\n  font-size: 7em;\n}\n\n.fa-8x {\n  font-size: 8em;\n}\n\n.fa-9x {\n  font-size: 9em;\n}\n\n.fa-10x {\n  font-size: 10em;\n}\n\n.fa-2xs {\n  font-size: 0.625em;\n  line-height: 0.1em;\n  vertical-align: 0.225em;\n}\n\n.fa-xs {\n  font-size: 0.75em;\n  line-height: 0.0833333337em;\n  vertical-align: 0.125em;\n}\n\n.fa-sm {\n  font-size: 0.875em;\n  line-height: 0.0714285718em;\n  vertical-align: 0.0535714295em;\n}\n\n.fa-lg {\n  font-size: 1.25em;\n  line-height: 0.05em;\n  vertical-align: -0.075em;\n}\n\n.fa-xl {\n  font-size: 1.5em;\n  line-height: 0.0416666682em;\n  vertical-align: -0.125em;\n}\n\n.fa-2xl {\n  font-size: 2em;\n  line-height: 0.03125em;\n  vertical-align: -0.1875em;\n}\n\n.fa-fw {\n  text-align: center;\n  width: 1.25em;\n}\n\n.fa-ul {\n  list-style-type: none;\n  margin-left: var(--fa-li-margin, 2.5em);\n  padding-left: 0;\n}\n.fa-ul > li {\n  position: relative;\n}\n\n.fa-li {\n  left: calc(var(--fa-li-width, 2em) * -1);\n  position: absolute;\n  text-align: center;\n  width: var(--fa-li-width, 2em);\n  line-height: inherit;\n}\n\n.fa-border {\n  border-color: var(--fa-border-color, #eee);\n  border-radius: var(--fa-border-radius, 0.1em);\n  border-style: var(--fa-border-style, solid);\n  border-width: var(--fa-border-width, 0.08em);\n  padding: var(--fa-border-padding, 0.2em 0.25em 0.15em);\n}\n\n.fa-pull-left {\n  float: left;\n  margin-right: var(--fa-pull-margin, 0.3em);\n}\n\n.fa-pull-right {\n  float: right;\n  margin-left: var(--fa-pull-margin, 0.3em);\n}\n\n.fa-beat {\n  -webkit-animation-name: fa-beat;\n          animation-name: fa-beat;\n  -webkit-animation-delay: var(--fa-animation-delay, 0s);\n          animation-delay: var(--fa-animation-delay, 0s);\n  -webkit-animation-direction: var(--fa-animation-direction, normal);\n          animation-direction: var(--fa-animation-direction, normal);\n  -webkit-animation-duration: var(--fa-animation-duration, 1s);\n          animation-duration: var(--fa-animation-duration, 1s);\n  -webkit-animation-iteration-count: var(--fa-animation-iteration-count, infinite);\n          animation-iteration-count: var(--fa-animation-iteration-count, infinite);\n  -webkit-animation-timing-function: var(--fa-animation-timing, ease-in-out);\n          animation-timing-function: var(--fa-animation-timing, ease-in-out);\n}\n\n.fa-bounce {\n  -webkit-animation-name: fa-bounce;\n          animation-name: fa-bounce;\n  -webkit-animation-delay: var(--fa-animation-delay, 0s);\n          animation-delay: var(--fa-animation-delay, 0s);\n  -webkit-animation-direction: var(--fa-animation-direction, normal);\n          animation-direction: var(--fa-animation-direction, normal);\n  -webkit-animation-duration: var(--fa-animation-duration, 1s);\n          animation-duration: var(--fa-animation-duration, 1s);\n  -webkit-animation-iteration-count: var(--fa-animation-iteration-count, infinite);\n          animation-iteration-count: var(--fa-animation-iteration-count, infinite);\n  -webkit-animation-timing-function: var(--fa-animation-timing, cubic-bezier(0.28, 0.84, 0.42, 1));\n          animation-timing-function: var(--fa-animation-timing, cubic-bezier(0.28, 0.84, 0.42, 1));\n}\n\n.fa-fade {\n  -webkit-animation-name: fa-fade;\n          animation-name: fa-fade;\n  -webkit-animation-delay: var(--fa-animation-delay, 0s);\n          animation-delay: var(--fa-animation-delay, 0s);\n  -webkit-animation-direction: var(--fa-animation-direction, normal);\n          animation-direction: var(--fa-animation-direction, normal);\n  -webkit-animation-duration: var(--fa-animation-duration, 1s);\n          animation-duration: var(--fa-animation-duration, 1s);\n  -webkit-animation-iteration-count: var(--fa-animation-iteration-count, infinite);\n          animation-iteration-count: var(--fa-animation-iteration-count, infinite);\n  -webkit-animation-timing-function: var(--fa-animation-timing, cubic-bezier(0.4, 0, 0.6, 1));\n          animation-timing-function: var(--fa-animation-timing, cubic-bezier(0.4, 0, 0.6, 1));\n}\n\n.fa-beat-fade {\n  -webkit-animation-name: fa-beat-fade;\n          animation-name: fa-beat-fade;\n  -webkit-animation-delay: var(--fa-animation-delay, 0s);\n          animation-delay: var(--fa-animation-delay, 0s);\n  -webkit-animation-direction: var(--fa-animation-direction, normal);\n          animation-direction: var(--fa-animation-direction, normal);\n  -webkit-animation-duration: var(--fa-animation-duration, 1s);\n          animation-duration: var(--fa-animation-duration, 1s);\n  -webkit-animation-iteration-count: var(--fa-animation-iteration-count, infinite);\n          animation-iteration-count: var(--fa-animation-iteration-count, infinite);\n  -webkit-animation-timing-function: var(--fa-animation-timing, cubic-bezier(0.4, 0, 0.6, 1));\n          animation-timing-function: var(--fa-animation-timing, cubic-bezier(0.4, 0, 0.6, 1));\n}\n\n.fa-flip {\n  -webkit-animation-name: fa-flip;\n          animation-name: fa-flip;\n  -webkit-animation-delay: var(--fa-animation-delay, 0s);\n          animation-delay: var(--fa-animation-delay, 0s);\n  -webkit-animation-direction: var(--fa-animation-direction, normal);\n          animation-direction: var(--fa-animation-direction, normal);\n  -webkit-animation-duration: var(--fa-animation-duration, 1s);\n          animation-duration: var(--fa-animation-duration, 1s);\n  -webkit-animation-iteration-count: var(--fa-animation-iteration-count, infinite);\n          animation-iteration-count: var(--fa-animation-iteration-count, infinite);\n  -webkit-animation-timing-function: var(--fa-animation-timing, ease-in-out);\n          animation-timing-function: var(--fa-animation-timing, ease-in-out);\n}\n\n.fa-shake {\n  -webkit-animation-name: fa-shake;\n          animation-name: fa-shake;\n  -webkit-animation-delay: var(--fa-animation-delay, 0s);\n          animation-delay: var(--fa-animation-delay, 0s);\n  -webkit-animation-direction: var(--fa-animation-direction, normal);\n          animation-direction: var(--fa-animation-direction, normal);\n  -webkit-animation-duration: var(--fa-animation-duration, 1s);\n          animation-duration: var(--fa-animation-duration, 1s);\n  -webkit-animation-iteration-count: var(--fa-animation-iteration-count, infinite);\n          animation-iteration-count: var(--fa-animation-iteration-count, infinite);\n  -webkit-animation-timing-function: var(--fa-animation-timing, linear);\n          animation-timing-function: var(--fa-animation-timing, linear);\n}\n\n.fa-spin {\n  -webkit-animation-name: fa-spin;\n          animation-name: fa-spin;\n  -webkit-animation-delay: var(--fa-animation-delay, 0s);\n          animation-delay: var(--fa-animation-delay, 0s);\n  -webkit-animation-direction: var(--fa-animation-direction, normal);\n          animation-direction: var(--fa-animation-direction, normal);\n  -webkit-animation-duration: var(--fa-animation-duration, 2s);\n          animation-duration: var(--fa-animation-duration, 2s);\n  -webkit-animation-iteration-count: var(--fa-animation-iteration-count, infinite);\n          animation-iteration-count: var(--fa-animation-iteration-count, infinite);\n  -webkit-animation-timing-function: var(--fa-animation-timing, linear);\n          animation-timing-function: var(--fa-animation-timing, linear);\n}\n\n.fa-spin-reverse {\n  --fa-animation-direction: reverse;\n}\n\n.fa-pulse,\n.fa-spin-pulse {\n  -webkit-animation-name: fa-spin;\n          animation-name: fa-spin;\n  -webkit-animation-direction: var(--fa-animation-direction, normal);\n          animation-direction: var(--fa-animation-direction, normal);\n  -webkit-animation-duration: var(--fa-animation-duration, 1s);\n          animation-duration: var(--fa-animation-duration, 1s);\n  -webkit-animation-iteration-count: var(--fa-animation-iteration-count, infinite);\n          animation-iteration-count: var(--fa-animation-iteration-count, infinite);\n  -webkit-animation-timing-function: var(--fa-animation-timing, steps(8));\n          animation-timing-function: var(--fa-animation-timing, steps(8));\n}\n\n@media (prefers-reduced-motion: reduce) {\n  .fa-beat,\n.fa-bounce,\n.fa-fade,\n.fa-beat-fade,\n.fa-flip,\n.fa-pulse,\n.fa-shake,\n.fa-spin,\n.fa-spin-pulse {\n    -webkit-animation-delay: -1ms;\n            animation-delay: -1ms;\n    -webkit-animation-duration: 1ms;\n            animation-duration: 1ms;\n    -webkit-animation-iteration-count: 1;\n            animation-iteration-count: 1;\n    transition-delay: 0s;\n    transition-duration: 0s;\n  }\n}\n@-webkit-keyframes fa-beat {\n  0%, 90% {\n    -webkit-transform: scale(1);\n            transform: scale(1);\n  }\n  45% {\n    -webkit-transform: scale(var(--fa-beat-scale, 1.25));\n            transform: scale(var(--fa-beat-scale, 1.25));\n  }\n}\n@keyframes fa-beat {\n  0%, 90% {\n    -webkit-transform: scale(1);\n            transform: scale(1);\n  }\n  45% {\n    -webkit-transform: scale(var(--fa-beat-scale, 1.25));\n            transform: scale(var(--fa-beat-scale, 1.25));\n  }\n}\n@-webkit-keyframes fa-bounce {\n  0% {\n    -webkit-transform: scale(1, 1) translateY(0);\n            transform: scale(1, 1) translateY(0);\n  }\n  10% {\n    -webkit-transform: scale(var(--fa-bounce-start-scale-x, 1.1), var(--fa-bounce-start-scale-y, 0.9)) translateY(0);\n            transform: scale(var(--fa-bounce-start-scale-x, 1.1), var(--fa-bounce-start-scale-y, 0.9)) translateY(0);\n  }\n  30% {\n    -webkit-transform: scale(var(--fa-bounce-jump-scale-x, 0.9), var(--fa-bounce-jump-scale-y, 1.1)) translateY(var(--fa-bounce-height, -0.5em));\n            transform: scale(var(--fa-bounce-jump-scale-x, 0.9), var(--fa-bounce-jump-scale-y, 1.1)) translateY(var(--fa-bounce-height, -0.5em));\n  }\n  50% {\n    -webkit-transform: scale(var(--fa-bounce-land-scale-x, 1.05), var(--fa-bounce-land-scale-y, 0.95)) translateY(0);\n            transform: scale(var(--fa-bounce-land-scale-x, 1.05), var(--fa-bounce-land-scale-y, 0.95)) translateY(0);\n  }\n  57% {\n    -webkit-transform: scale(1, 1) translateY(var(--fa-bounce-rebound, -0.125em));\n            transform: scale(1, 1) translateY(var(--fa-bounce-rebound, -0.125em));\n  }\n  64% {\n    -webkit-transform: scale(1, 1) translateY(0);\n            transform: scale(1, 1) translateY(0);\n  }\n  100% {\n    -webkit-transform: scale(1, 1) translateY(0);\n            transform: scale(1, 1) translateY(0);\n  }\n}\n@keyframes fa-bounce {\n  0% {\n    -webkit-transform: scale(1, 1) translateY(0);\n            transform: scale(1, 1) translateY(0);\n  }\n  10% {\n    -webkit-transform: scale(var(--fa-bounce-start-scale-x, 1.1), var(--fa-bounce-start-scale-y, 0.9)) translateY(0);\n            transform: scale(var(--fa-bounce-start-scale-x, 1.1), var(--fa-bounce-start-scale-y, 0.9)) translateY(0);\n  }\n  30% {\n    -webkit-transform: scale(var(--fa-bounce-jump-scale-x, 0.9), var(--fa-bounce-jump-scale-y, 1.1)) translateY(var(--fa-bounce-height, -0.5em));\n            transform: scale(var(--fa-bounce-jump-scale-x, 0.9), var(--fa-bounce-jump-scale-y, 1.1)) translateY(var(--fa-bounce-height, -0.5em));\n  }\n  50% {\n    -webkit-transform: scale(var(--fa-bounce-land-scale-x, 1.05), var(--fa-bounce-land-scale-y, 0.95)) translateY(0);\n            transform: scale(var(--fa-bounce-land-scale-x, 1.05), var(--fa-bounce-land-scale-y, 0.95)) translateY(0);\n  }\n  57% {\n    -webkit-transform: scale(1, 1) translateY(var(--fa-bounce-rebound, -0.125em));\n            transform: scale(1, 1) translateY(var(--fa-bounce-rebound, -0.125em));\n  }\n  64% {\n    -webkit-transform: scale(1, 1) translateY(0);\n            transform: scale(1, 1) translateY(0);\n  }\n  100% {\n    -webkit-transform: scale(1, 1) translateY(0);\n            transform: scale(1, 1) translateY(0);\n  }\n}\n@-webkit-keyframes fa-fade {\n  50% {\n    opacity: var(--fa-fade-opacity, 0.4);\n  }\n}\n@keyframes fa-fade {\n  50% {\n    opacity: var(--fa-fade-opacity, 0.4);\n  }\n}\n@-webkit-keyframes fa-beat-fade {\n  0%, 100% {\n    opacity: var(--fa-beat-fade-opacity, 0.4);\n    -webkit-transform: scale(1);\n            transform: scale(1);\n  }\n  50% {\n    opacity: 1;\n    -webkit-transform: scale(var(--fa-beat-fade-scale, 1.125));\n            transform: scale(var(--fa-beat-fade-scale, 1.125));\n  }\n}\n@keyframes fa-beat-fade {\n  0%, 100% {\n    opacity: var(--fa-beat-fade-opacity, 0.4);\n    -webkit-transform: scale(1);\n            transform: scale(1);\n  }\n  50% {\n    opacity: 1;\n    -webkit-transform: scale(var(--fa-beat-fade-scale, 1.125));\n            transform: scale(var(--fa-beat-fade-scale, 1.125));\n  }\n}\n@-webkit-keyframes fa-flip {\n  50% {\n    -webkit-transform: rotate3d(var(--fa-flip-x, 0), var(--fa-flip-y, 1), var(--fa-flip-z, 0), var(--fa-flip-angle, -180deg));\n            transform: rotate3d(var(--fa-flip-x, 0), var(--fa-flip-y, 1), var(--fa-flip-z, 0), var(--fa-flip-angle, -180deg));\n  }\n}\n@keyframes fa-flip {\n  50% {\n    -webkit-transform: rotate3d(var(--fa-flip-x, 0), var(--fa-flip-y, 1), var(--fa-flip-z, 0), var(--fa-flip-angle, -180deg));\n            transform: rotate3d(var(--fa-flip-x, 0), var(--fa-flip-y, 1), var(--fa-flip-z, 0), var(--fa-flip-angle, -180deg));\n  }\n}\n@-webkit-keyframes fa-shake {\n  0% {\n    -webkit-transform: rotate(-15deg);\n            transform: rotate(-15deg);\n  }\n  4% {\n    -webkit-transform: rotate(15deg);\n            transform: rotate(15deg);\n  }\n  8%, 24% {\n    -webkit-transform: rotate(-18deg);\n            transform: rotate(-18deg);\n  }\n  12%, 28% {\n    -webkit-transform: rotate(18deg);\n            transform: rotate(18deg);\n  }\n  16% {\n    -webkit-transform: rotate(-22deg);\n            transform: rotate(-22deg);\n  }\n  20% {\n    -webkit-transform: rotate(22deg);\n            transform: rotate(22deg);\n  }\n  32% {\n    -webkit-transform: rotate(-12deg);\n            transform: rotate(-12deg);\n  }\n  36% {\n    -webkit-transform: rotate(12deg);\n            transform: rotate(12deg);\n  }\n  40%, 100% {\n    -webkit-transform: rotate(0deg);\n            transform: rotate(0deg);\n  }\n}\n@keyframes fa-shake {\n  0% {\n    -webkit-transform: rotate(-15deg);\n            transform: rotate(-15deg);\n  }\n  4% {\n    -webkit-transform: rotate(15deg);\n            transform: rotate(15deg);\n  }\n  8%, 24% {\n    -webkit-transform: rotate(-18deg);\n            transform: rotate(-18deg);\n  }\n  12%, 28% {\n    -webkit-transform: rotate(18deg);\n            transform: rotate(18deg);\n  }\n  16% {\n    -webkit-transform: rotate(-22deg);\n            transform: rotate(-22deg);\n  }\n  20% {\n    -webkit-transform: rotate(22deg);\n            transform: rotate(22deg);\n  }\n  32% {\n    -webkit-transform: rotate(-12deg);\n            transform: rotate(-12deg);\n  }\n  36% {\n    -webkit-transform: rotate(12deg);\n            transform: rotate(12deg);\n  }\n  40%, 100% {\n    -webkit-transform: rotate(0deg);\n            transform: rotate(0deg);\n  }\n}\n@-webkit-keyframes fa-spin {\n  0% {\n    -webkit-transform: rotate(0deg);\n            transform: rotate(0deg);\n  }\n  100% {\n    -webkit-transform: rotate(360deg);\n            transform: rotate(360deg);\n  }\n}\n@keyframes fa-spin {\n  0% {\n    -webkit-transform: rotate(0deg);\n            transform: rotate(0deg);\n  }\n  100% {\n    -webkit-transform: rotate(360deg);\n            transform: rotate(360deg);\n  }\n}\n.fa-rotate-90 {\n  -webkit-transform: rotate(90deg);\n          transform: rotate(90deg);\n}\n\n.fa-rotate-180 {\n  -webkit-transform: rotate(180deg);\n          transform: rotate(180deg);\n}\n\n.fa-rotate-270 {\n  -webkit-transform: rotate(270deg);\n          transform: rotate(270deg);\n}\n\n.fa-flip-horizontal {\n  -webkit-transform: scale(-1, 1);\n          transform: scale(-1, 1);\n}\n\n.fa-flip-vertical {\n  -webkit-transform: scale(1, -1);\n          transform: scale(1, -1);\n}\n\n.fa-flip-both,\n.fa-flip-horizontal.fa-flip-vertical {\n  -webkit-transform: scale(-1, -1);\n          transform: scale(-1, -1);\n}\n\n.fa-rotate-by {\n  -webkit-transform: rotate(var(--fa-rotate-angle, none));\n          transform: rotate(var(--fa-rotate-angle, none));\n}\n\n.fa-stack {\n  display: inline-block;\n  vertical-align: middle;\n  height: 2em;\n  position: relative;\n  width: 2.5em;\n}\n\n.fa-stack-1x,\n.fa-stack-2x {\n  bottom: 0;\n  left: 0;\n  margin: auto;\n  position: absolute;\n  right: 0;\n  top: 0;\n  z-index: var(--fa-stack-z-index, auto);\n}\n\n.svg-inline--fa.fa-stack-1x {\n  height: 1em;\n  width: 1.25em;\n}\n.svg-inline--fa.fa-stack-2x {\n  height: 2em;\n  width: 2.5em;\n}\n\n.fa-inverse {\n  color: var(--fa-inverse, #fff);\n}\n\n.sr-only,\n.fa-sr-only {\n  position: absolute;\n  width: 1px;\n  height: 1px;\n  padding: 0;\n  margin: -1px;\n  overflow: hidden;\n  clip: rect(0, 0, 0, 0);\n  white-space: nowrap;\n  border-width: 0;\n}\n\n.sr-only-focusable:not(:focus),\n.fa-sr-only-focusable:not(:focus) {\n  position: absolute;\n  width: 1px;\n  height: 1px;\n  padding: 0;\n  margin: -1px;\n  overflow: hidden;\n  clip: rect(0, 0, 0, 0);\n  white-space: nowrap;\n  border-width: 0;\n}\n\n.svg-inline--fa .fa-primary {\n  fill: var(--fa-primary-color, currentColor);\n  opacity: var(--fa-primary-opacity, 1);\n}\n\n.svg-inline--fa .fa-secondary {\n  fill: var(--fa-secondary-color, currentColor);\n  opacity: var(--fa-secondary-opacity, 0.4);\n}\n\n.svg-inline--fa.fa-swap-opacity .fa-primary {\n  opacity: var(--fa-secondary-opacity, 0.4);\n}\n\n.svg-inline--fa.fa-swap-opacity .fa-secondary {\n  opacity: var(--fa-primary-opacity, 1);\n}\n\n.svg-inline--fa mask .fa-primary,\n.svg-inline--fa mask .fa-secondary {\n  fill: black;\n}\n\n.fad.fa-inverse,\n.fa-duotone.fa-inverse {\n  color: var(--fa-inverse, #fff);\n}';if(t!==n||i!==e){var s=new RegExp("\\.".concat(n,"\\-"),"g"),o=new RegExp("\\--".concat(n,"\\-"),"g"),a=new RegExp("\\.".concat(e),"g");r=r.replace(s,".".concat(t,"-")).replace(o,"--".concat(t,"-")).replace(a,".".concat(i))}return r}var Ww=!1;function a8(){Ee.autoAddCss&&!Ww&&(function HJ(n){if(n&&Cs){var e=Ut.createElement("style");e.setAttribute("type","text/css"),e.innerHTML=n;for(var t=Ut.head.childNodes,i=null,r=t.length-1;r>-1;r--){var s=t[r],o=(s.tagName||"").toUpperCase();["STYLE","LINK"].indexOf(o)>-1&&(i=s)}Ut.head.insertBefore(e,i)}}(Gw()),Ww=!0)}var $J={mixout:function(){return{dom:{css:Gw,insertCss:a8}}},hooks:function(){return{beforeDOMElementCreation:function(){a8()},beforeI2svg:function(){a8()}}}},Es=ao||{};Es[Ss]||(Es[Ss]={}),Es[Ss].styles||(Es[Ss].styles={}),Es[Ss].hooks||(Es[Ss].hooks={}),Es[Ss].shims||(Es[Ss].shims=[]);var Ar=Es[Ss],jw=[],G4=!1;function ZJ(n){!Cs||(G4?setTimeout(n,0):jw.push(n))}function Dl(n){var e=n.tag,t=n.attributes,i=void 0===t?{}:t,r=n.children,s=void 0===r?[]:r;return"string"==typeof n?Bw(n):"<".concat(e," ").concat(function BJ(n){return Object.keys(n||{}).reduce(function(e,t){return e+"".concat(t,'="').concat(Bw(n[t]),'" ')},"").trim()}(i),">").concat(s.map(Dl).join(""),"</").concat(e,">")}function $w(n,e,t){if(n&&n[e]&&n[e][t])return{prefix:e,iconName:t,icon:n[e][t]}}Cs&&((G4=(Ut.documentElement.doScroll?/^loaded|^c/:/^loaded|^i|^c/).test(Ut.readyState))||Ut.addEventListener("DOMContentLoaded",function n(){Ut.removeEventListener("DOMContentLoaded",n),G4=1,jw.map(function(e){return e()})}));var c8=function(e,t,i,r){var c,l,u,s=Object.keys(e),o=s.length,a=void 0!==r?function(e,t){return function(i,r,s,o){return e.call(t,i,r,s,o)}}(t,r):t;for(void 0===i?(c=1,u=e[s[0]]):(c=0,u=i);c<o;c++)u=a(u,e[l=s[c]],l,e);return u};function l8(n){var e=function YJ(n){for(var e=[],t=0,i=n.length;t<i;){var r=n.charCodeAt(t++);if(r>=55296&&r<=56319&&t<i){var s=n.charCodeAt(t++);56320==(64512&s)?e.push(((1023&r)<<10)+(1023&s)+65536):(e.push(r),t--)}else e.push(r)}return e}(n);return 1===e.length?e[0].toString(16):null}function qw(n){return Object.keys(n).reduce(function(e,t){var i=n[t];return i.icon?e[i.iconName]=i.icon:e[t]=i,e},{})}function u8(n,e){var t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=t.skipHooks,r=void 0!==i&&i,s=qw(e);"function"!=typeof Ar.hooks.addPack||r?Ar.styles[n]=be(be({},Ar.styles[n]||{}),s):Ar.hooks.addPack(n,qw(e)),"fas"===n&&u8("fa",e)}var W4,j4,$4,G1=Ar.styles,JJ=Ar.shims,QJ=(Ln(W4={},Bt,Object.values(Ml[Bt])),Ln(W4,sn,Object.values(Ml[sn])),W4),f8=null,Zw={},Xw={},Yw={},Kw={},Jw={},eQ=(Ln(j4={},Bt,Object.keys(xl[Bt])),Ln(j4,sn,Object.keys(xl[sn])),j4);function nQ(n,e){var t=e.split("-"),i=t[0],r=t.slice(1).join("-");return i!==n||""===r||function tQ(n){return~NJ.indexOf(n)}(r)?null:r}var Qw=function(){var e=function(s){return c8(G1,function(o,a,c){return o[c]=c8(a,s,{}),o},{})};Zw=e(function(r,s,o){return s[3]&&(r[s[3]]=o),s[2]&&s[2].filter(function(c){return"number"==typeof c}).forEach(function(c){r[c.toString(16)]=o}),r}),Xw=e(function(r,s,o){return r[o]=o,s[2]&&s[2].filter(function(c){return"string"==typeof c}).forEach(function(c){r[c]=o}),r}),Jw=e(function(r,s,o){var a=s[2];return r[o]=o,a.forEach(function(c){r[c]=o}),r});var t="far"in G1||Ee.autoFetchSvg,i=c8(JJ,function(r,s){var o=s[0],a=s[1],c=s[2];return"far"===a&&!t&&(a="fas"),"string"==typeof o&&(r.names[o]={prefix:a,iconName:c}),"number"==typeof o&&(r.unicodes[o.toString(16)]={prefix:a,iconName:c}),r},{names:{},unicodes:{}});Yw=i.names,Kw=i.unicodes,f8=q4(Ee.styleDefault,{family:Ee.familyDefault})};function h8(n,e){return(Zw[n]||{})[e]}function sa(n,e){return(Jw[n]||{})[e]}function eC(n){return Yw[n]||{prefix:null,iconName:null}}function lo(){return f8}function q4(n){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},t=e.family,i=void 0===t?Bt:t,r=xl[i][n],s=bl[i][n]||bl[i][r],o=n in Ar.styles?n:null;return s||o||null}(function VJ(n){Sl.push(n)})(function(n){f8=q4(n.styleDefault,{family:Ee.familyDefault})}),Qw();var tC=(Ln($4={},Bt,Object.keys(Ml[Bt])),Ln($4,sn,Object.keys(Ml[sn])),$4);function Z4(n){var e,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=t.skipLookups,r=void 0!==i&&i,s=(Ln(e={},Bt,"".concat(Ee.cssPrefix,"-").concat(Bt)),Ln(e,sn,"".concat(Ee.cssPrefix,"-").concat(sn)),e),o=null,a=Bt;(n.includes(s[Bt])||n.some(function(l){return tC[Bt].includes(l)}))&&(a=Bt),(n.includes(s[sn])||n.some(function(l){return tC[sn].includes(l)}))&&(a=sn);var c=n.reduce(function(l,u){var f=nQ(Ee.cssPrefix,u);if(G1[u]?(u=QJ[a].includes(u)?TJ[a][u]:u,o=u,l.prefix=u):eQ[a].indexOf(u)>-1?(o=u,l.prefix=q4(u,{family:a})):f?l.iconName=f:u!==Ee.replacementClass&&u!==s[Bt]&&u!==s[sn]&&l.rest.push(u),!r&&l.prefix&&l.iconName){var h="fa"===o?eC(l.iconName):{},d=sa(l.prefix,l.iconName);h.prefix&&(o=null),l.iconName=h.iconName||d||l.iconName,l.prefix=h.prefix||l.prefix,"far"===l.prefix&&!G1.far&&G1.fas&&!Ee.autoFetchSvg&&(l.prefix="fas")}return l},{prefix:null,iconName:null,rest:[]});return(n.includes("fa-brands")||n.includes("fab"))&&(c.prefix="fab"),(n.includes("fa-duotone")||n.includes("fad"))&&(c.prefix="fad"),!c.prefix&&a===sn&&(G1.fass||Ee.autoFetchSvg)&&(c.prefix="fass",c.iconName=sa(c.prefix,c.iconName)||c.iconName),("fa"===c.prefix||"fa"===o)&&(c.prefix=lo()||"fas"),c}var sQ=function(){function n(){(function gJ(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")})(this,n),this.definitions={}}return function vJ(n,e,t){e&&Sw(n.prototype,e),t&&Sw(n,t),Object.defineProperty(n,"prototype",{writable:!1})}(n,[{key:"add",value:function(){for(var t=this,i=arguments.length,r=new Array(i),s=0;s<i;s++)r[s]=arguments[s];var o=r.reduce(this._pullDefinitions,{});Object.keys(o).forEach(function(a){t.definitions[a]=be(be({},t.definitions[a]||{}),o[a]),u8(a,o[a]);var c=Ml[Bt][a];c&&u8(c,o[a]),Qw()})}},{key:"reset",value:function(){this.definitions={}}},{key:"_pullDefinitions",value:function(t,i){var r=i.prefix&&i.iconName&&i.icon?{0:i}:i;return Object.keys(r).map(function(s){var o=r[s],a=o.prefix,c=o.iconName,l=o.icon,u=l[2];t[a]||(t[a]={}),u.length>0&&u.forEach(function(f){"string"==typeof f&&(t[a][f]=l)}),t[a][c]=l}),t}}]),n}(),nC=[],W1={},j1={},oQ=Object.keys(j1);function p8(n,e){for(var t=arguments.length,i=new Array(t>2?t-2:0),r=2;r<t;r++)i[r-2]=arguments[r];var s=W1[n]||[];return s.forEach(function(o){e=o.apply(null,[e].concat(i))}),e}function oa(n){for(var e=arguments.length,t=new Array(e>1?e-1:0),i=1;i<e;i++)t[i-1]=arguments[i];var r=W1[n]||[];r.forEach(function(s){s.apply(null,t)})}function Ds(){var n=arguments[0],e=Array.prototype.slice.call(arguments,1);return j1[n]?j1[n].apply(null,e):void 0}function m8(n){"fa"===n.prefix&&(n.prefix="fas");var e=n.iconName,t=n.prefix||lo();if(e)return e=sa(t,e)||e,$w(iC.definitions,t,e)||$w(Ar.styles,t,e)}var iC=new sQ,lQ={i2svg:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Cs?(oa("beforeI2svg",e),Ds("pseudoElements2svg",e),Ds("i2svg",e)):Promise.reject("Operation requires a DOM of some kind.")},watch:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.autoReplaceSvgRoot;!1===Ee.autoReplaceSvg&&(Ee.autoReplaceSvg=!0),Ee.observeMutations=!0,ZJ(function(){fQ({autoReplaceSvgRoot:t}),oa("watch",e)})}},ki={noAuto:function(){Ee.autoReplaceSvg=!1,Ee.observeMutations=!1,oa("noAuto")},config:Ee,dom:lQ,parse:{icon:function(e){if(null===e)return null;if("object"===z4(e)&&e.prefix&&e.iconName)return{prefix:e.prefix,iconName:sa(e.prefix,e.iconName)||e.iconName};if(Array.isArray(e)&&2===e.length){var t=0===e[1].indexOf("fa-")?e[1].slice(3):e[1],i=q4(e[0]);return{prefix:i,iconName:sa(i,t)||t}}if("string"==typeof e&&(e.indexOf("".concat(Ee.cssPrefix,"-"))>-1||e.match(IJ))){var r=Z4(e.split(" "),{skipLookups:!0});return{prefix:r.prefix||lo(),iconName:sa(r.prefix,r.iconName)||r.iconName}}if("string"==typeof e){var s=lo();return{prefix:s,iconName:sa(s,e)||e}}}},library:iC,findIconDefinition:m8,toHtml:Dl},fQ=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.autoReplaceSvgRoot,i=void 0===t?Ut:t;(Object.keys(Ar.styles).length>0||Ee.autoFetchSvg)&&Cs&&Ee.autoReplaceSvg&&ki.dom.i2svg({node:i})};function X4(n,e){return Object.defineProperty(n,"abstract",{get:e}),Object.defineProperty(n,"html",{get:function(){return n.abstract.map(function(i){return Dl(i)})}}),Object.defineProperty(n,"node",{get:function(){if(Cs){var i=Ut.createElement("div");return i.innerHTML=n.html,i.children}}}),n}function g8(n){var e=n.icons,t=e.main,i=e.mask,r=n.prefix,s=n.iconName,o=n.transform,a=n.symbol,c=n.title,l=n.maskId,u=n.titleId,f=n.extra,h=n.watchable,d=void 0!==h&&h,p=i.found?i:t,m=p.width,g=p.height,v="fak"===r,x=[Ee.replacementClass,s?"".concat(Ee.cssPrefix,"-").concat(s):""].filter(function(E){return-1===f.classes.indexOf(E)}).filter(function(E){return""!==E||!!E}).concat(f.classes).join(" "),y={children:[],attributes:be(be({},f.attributes),{},{"data-prefix":r,"data-icon":s,class:x,role:f.attributes.role||"img",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 ".concat(m," ").concat(g)})},_=v&&!~f.classes.indexOf("fa-fw")?{width:"".concat(m/g*16*.0625,"em")}:{};d&&(y.attributes[ia]=""),c&&(y.children.push({tag:"title",attributes:{id:y.attributes["aria-labelledby"]||"title-".concat(u||El())},children:[c]}),delete y.attributes.title);var M=be(be({},y),{},{prefix:r,iconName:s,main:t,mask:i,maskId:l,transform:o,symbol:a,styles:be(be({},_),f.styles)}),w=i.found&&t.found?Ds("generateAbstractMask",M)||{children:[],attributes:{}}:Ds("generateAbstractIcon",M)||{children:[],attributes:{}},b=w.attributes;return M.children=w.children,M.attributes=b,a?function dQ(n){var t=n.iconName,i=n.children,r=n.attributes,s=n.symbol,o=!0===s?"".concat(n.prefix,"-").concat(Ee.cssPrefix,"-").concat(t):s;return[{tag:"svg",attributes:{style:"display: none;"},children:[{tag:"symbol",attributes:be(be({},r),{},{id:o}),children:i}]}]}(M):function hQ(n){var e=n.children,t=n.main,i=n.mask,r=n.attributes,s=n.styles,o=n.transform;if(o8(o)&&t.found&&!i.found){var l={x:t.width/t.height/2,y:.5};r.style=B4(be(be({},s),{},{"transform-origin":"".concat(l.x+o.x/16,"em ").concat(l.y+o.y/16,"em")}))}return[{tag:"svg",attributes:r,children:e}]}(M)}function rC(n){var e=n.content,t=n.width,i=n.height,r=n.transform,s=n.title,o=n.extra,a=n.watchable,c=void 0!==a&&a,l=be(be(be({},o.attributes),s?{title:s}:{}),{},{class:o.classes.join(" ")});c&&(l[ia]="");var u=be({},o.styles);o8(r)&&(u.transform=function WJ(n){var e=n.transform,t=n.width,r=n.height,s=void 0===r?16:r,o=n.startCentered,a=void 0!==o&&o,c="";return c+=a&&zw?"translate(".concat(e.x/16-(void 0===t?16:t)/2,"em, ").concat(e.y/16-s/2,"em) "):a?"translate(calc(-50% + ".concat(e.x/16,"em), calc(-50% + ").concat(e.y/16,"em)) "):"translate(".concat(e.x/16,"em, ").concat(e.y/16,"em) "),(c+="scale(".concat(e.size/16*(e.flipX?-1:1),", ").concat(e.size/16*(e.flipY?-1:1),") "))+"rotate(".concat(e.rotate,"deg) ")}({transform:r,startCentered:!0,width:t,height:i}),u["-webkit-transform"]=u.transform);var f=B4(u);f.length>0&&(l.style=f);var h=[];return h.push({tag:"span",attributes:l,children:[e]}),s&&h.push({tag:"span",attributes:{class:"sr-only"},children:[s]}),h}function pQ(n){var e=n.content,t=n.title,i=n.extra,r=be(be(be({},i.attributes),t?{title:t}:{}),{},{class:i.classes.join(" ")}),s=B4(i.styles);s.length>0&&(r.style=s);var o=[];return o.push({tag:"span",attributes:r,children:[e]}),t&&o.push({tag:"span",attributes:{class:"sr-only"},children:[t]}),o}var v8=Ar.styles;function y8(n){var e=n[0],t=n[1],s=K6(n.slice(4),1)[0];return{found:!0,width:e,height:t,icon:Array.isArray(s)?{tag:"g",attributes:{class:"".concat(Ee.cssPrefix,"-").concat("duotone-group")},children:[{tag:"path",attributes:{class:"".concat(Ee.cssPrefix,"-").concat("secondary"),fill:"currentColor",d:s[0]}},{tag:"path",attributes:{class:"".concat(Ee.cssPrefix,"-").concat("primary"),fill:"currentColor",d:s[1]}}]}:{tag:"path",attributes:{fill:"currentColor",d:s}}}}var mQ={found:!1,width:512,height:512};function _8(n,e){var t=e;return"fa"===e&&null!==Ee.styleDefault&&(e=lo()),new Promise(function(i,r){if(Ds("missingIconAbstract"),"fa"===t){var o=eC(n)||{};n=o.iconName||n,e=o.prefix||e}if(n&&e&&v8[e]&&v8[e][n])return i(y8(v8[e][n]));(function gQ(n,e){!kw&&!Ee.showMissingIcons&&n&&console.error('Icon with name "'.concat(n,'" and prefix "').concat(e,'" is missing.'))})(n,e),i(be(be({},mQ),{},{icon:Ee.showMissingIcons&&n&&Ds("missingIconAbstract")||{}}))})}var sC=function(){},x8=Ee.measurePerformance&&F4&&F4.mark&&F4.measure?F4:{mark:sC,measure:sC},Al='FA "6.2.1"',b8_begin=function(e){return x8.mark("".concat(Al," ").concat(e," begins")),function(){return function(e){x8.mark("".concat(Al," ").concat(e," ends")),x8.measure("".concat(Al," ").concat(e),"".concat(Al," ").concat(e," begins"),"".concat(Al," ").concat(e," ends"))}(e)}},Y4=function(){};function aC(n){return"string"==typeof(n.getAttribute?n.getAttribute(ia):null)}function bQ(n){return Ut.createElementNS("http://www.w3.org/2000/svg",n)}function MQ(n){return Ut.createElement(n)}function cC(n){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},t=e.ceFn,i=void 0===t?"svg"===n.tag?bQ:MQ:t;if("string"==typeof n)return Ut.createTextNode(n);var r=i(n.tag);Object.keys(n.attributes||[]).forEach(function(o){r.setAttribute(o,n.attributes[o])});var s=n.children||[];return s.forEach(function(o){r.appendChild(cC(o,{ceFn:i}))}),r}var K4={replace:function(e){var t=e[0];if(t.parentNode)if(e[1].forEach(function(r){t.parentNode.insertBefore(cC(r),t)}),null===t.getAttribute(ia)&&Ee.keepOriginalSource){var i=Ut.createComment(function wQ(n){var e=" ".concat(n.outerHTML," ");return"".concat(e,"Font Awesome fontawesome.com ")}(t));t.parentNode.replaceChild(i,t)}else t.remove()},nest:function(e){var t=e[0],i=e[1];if(~s8(t).indexOf(Ee.replacementClass))return K4.replace(e);var r=new RegExp("".concat(Ee.cssPrefix,"-.*"));if(delete i[0].attributes.id,i[0].attributes.class){var s=i[0].attributes.class.split(" ").reduce(function(a,c){return c===Ee.replacementClass||c.match(r)?a.toSvg.push(c):a.toNode.push(c),a},{toNode:[],toSvg:[]});i[0].attributes.class=s.toSvg.join(" "),0===s.toNode.length?t.removeAttribute("class"):t.setAttribute("class",s.toNode.join(" "))}var o=i.map(function(a){return Dl(a)}).join("\n");t.setAttribute(ia,""),t.innerHTML=o}};function lC(n){n()}function uC(n,e){var t="function"==typeof e?e:Y4;if(0===n.length)t();else{var i=lC;"async"===Ee.mutateApproach&&(i=ao.requestAnimationFrame||lC),i(function(){var r=function xQ(){return!0===Ee.autoReplaceSvg?K4.replace:K4[Ee.autoReplaceSvg]||K4.replace}(),s=b8_begin("mutate");n.map(r),s(),t()})}}var M8=!1;function fC(){M8=!0}function w8(){M8=!1}var J4=null;function hC(n){if(Pw&&Ee.observeMutations){var e=n.treeCallback,t=void 0===e?Y4:e,i=n.nodeCallback,r=void 0===i?Y4:i,s=n.pseudoElementsCallback,o=void 0===s?Y4:s,a=n.observeMutationsRoot,c=void 0===a?Ut:a;J4=new Pw(function(l){if(!M8){var u=lo();B1(l).forEach(function(f){if("childList"===f.type&&f.addedNodes.length>0&&!aC(f.addedNodes[0])&&(Ee.searchPseudoElements&&o(f.target),t(f.target)),"attributes"===f.type&&f.target.parentNode&&Ee.searchPseudoElements&&o(f.target.parentNode),"attributes"===f.type&&aC(f.target)&&~zJ.indexOf(f.attributeName))if("class"===f.attributeName&&function yQ(n){var e=n.getAttribute?n.getAttribute(n8):null,t=n.getAttribute?n.getAttribute(i8):null;return e&&t}(f.target)){var h=Z4(s8(f.target)),p=h.iconName;f.target.setAttribute(n8,h.prefix||u),p&&f.target.setAttribute(i8,p)}else(function _Q(n){return n&&n.classList&&n.classList.contains&&n.classList.contains(Ee.replacementClass)})(f.target)&&r(f.target)})}}),Cs&&J4.observe(c,{childList:!0,attributes:!0,characterData:!0,subtree:!0})}}function SQ(n){var e=n.getAttribute("style"),t=[];return e&&(t=e.split(";").reduce(function(i,r){var s=r.split(":"),o=s[0],a=s.slice(1);return o&&a.length>0&&(i[o]=a.join(":").trim()),i},{})),t}function EQ(n){var e=n.getAttribute("data-prefix"),t=n.getAttribute("data-icon"),i=void 0!==n.innerText?n.innerText.trim():"",r=Z4(s8(n));return r.prefix||(r.prefix=lo()),e&&t&&(r.prefix=e,r.iconName=t),r.iconName&&r.prefix||(r.prefix&&i.length>0&&(r.iconName=function iQ(n,e){return(Xw[n]||{})[e]}(r.prefix,n.innerText)||h8(r.prefix,l8(n.innerText))),!r.iconName&&Ee.autoFetchSvg&&n.firstChild&&n.firstChild.nodeType===Node.TEXT_NODE&&(r.iconName=n.firstChild.data)),r}function DQ(n){var e=B1(n.attributes).reduce(function(r,s){return"class"!==r.name&&"style"!==r.name&&(r[s.name]=s.value),r},{}),t=n.getAttribute("title"),i=n.getAttribute("data-fa-title-id");return Ee.autoA11y&&(t?e["aria-labelledby"]="".concat(Ee.replacementClass,"-title-").concat(i||El()):(e["aria-hidden"]="true",e.focusable="false")),e}function dC(n){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{styleParser:!0},t=EQ(n),i=t.iconName,r=t.prefix,s=t.rest,o=DQ(n),a=p8("parseNodeAttributes",{},n),c=e.styleParser?SQ(n):[];return be({iconName:i,title:n.getAttribute("title"),titleId:n.getAttribute("data-fa-title-id"),prefix:r,transform:Xr,mask:{iconName:null,prefix:null,rest:[]},maskId:null,symbol:!1,extra:{classes:s,styles:c,attributes:o}},a)}var TQ=Ar.styles;function pC(n){var e="nest"===Ee.autoReplaceSvg?dC(n,{styleParser:!1}):dC(n);return~e.extra.classes.indexOf(Vw)?Ds("generateLayersText",n,e):Ds("generateSvgReplacementMutation",n,e)}var uo=new Set;function mC(n){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(!Cs)return Promise.resolve();var t=Ut.documentElement.classList,i=function(f){return t.add("".concat(Ow,"-").concat(f))},r=function(f){return t.remove("".concat(Ow,"-").concat(f))},s=Ee.autoFetchSvg?uo:r8.map(function(u){return"fa-".concat(u)}).concat(Object.keys(TQ));s.includes("fa")||s.push("fa");var o=[".".concat(Vw,":not([").concat(ia,"])")].concat(s.map(function(u){return".".concat(u,":not([").concat(ia,"])")})).join(", ");if(0===o.length)return Promise.resolve();var a=[];try{a=B1(n.querySelectorAll(o))}catch{}if(!(a.length>0))return Promise.resolve();i("pending"),r("complete");var c=b8_begin("onTree"),l=a.reduce(function(u,f){try{var h=pC(f);h&&u.push(h)}catch(d){kw||"MissingIcon"===d.name&&console.error(d)}return u},[]);return new Promise(function(u,f){Promise.all(l).then(function(h){uC(h,function(){i("active"),i("complete"),r("pending"),"function"==typeof e&&e(),c(),u()})}).catch(function(h){c(),f(h)})})}function IQ(n){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;pC(n).then(function(t){t&&uC([t],e)})}r8.map(function(n){uo.add("fa-".concat(n))}),Object.keys(xl[Bt]).map(uo.add.bind(uo)),Object.keys(xl[sn]).map(uo.add.bind(uo)),uo=yl(uo);var RQ=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=t.transform,r=void 0===i?Xr:i,s=t.symbol,o=void 0!==s&&s,a=t.mask,c=void 0===a?null:a,l=t.maskId,u=void 0===l?null:l,f=t.title,h=void 0===f?null:f,d=t.titleId,p=void 0===d?null:d,m=t.classes,g=void 0===m?[]:m,v=t.attributes,x=void 0===v?{}:v,y=t.styles,_=void 0===y?{}:y;if(e){var M=e.prefix,w=e.iconName,D=e.icon;return X4(be({type:"icon"},e),function(){return oa("beforeDOMElementCreation",{iconDefinition:e,params:t}),Ee.autoA11y&&(h?x["aria-labelledby"]="".concat(Ee.replacementClass,"-title-").concat(p||El()):(x["aria-hidden"]="true",x.focusable="false")),g8({icons:{main:y8(D),mask:c?y8(c.icon):{found:!1,width:null,height:null,icon:{}}},prefix:M,iconName:w,transform:be(be({},Xr),r),symbol:o,title:h,maskId:u,titleId:p,extra:{attributes:x,styles:_,classes:g}})})}},PQ={mixout:function(){return{icon:(n=RQ,function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=(e||{}).icon?e:m8(e||{}),r=t.mask;return r&&(r=(r||{}).icon?r:m8(r||{})),n(i,be(be({},t),{},{mask:r}))})};var n},hooks:function(){return{mutationObserverCallbacks:function(t){return t.treeCallback=mC,t.nodeCallback=IQ,t}}},provides:function(e){e.i2svg=function(t){var i=t.node,s=t.callback;return mC(void 0===i?Ut:i,void 0===s?function(){}:s)},e.generateSvgReplacementMutation=function(t,i){var r=i.iconName,s=i.title,o=i.titleId,a=i.prefix,c=i.transform,l=i.symbol,u=i.mask,f=i.maskId,h=i.extra;return new Promise(function(d,p){Promise.all([_8(r,a),u.iconName?_8(u.iconName,u.prefix):Promise.resolve({found:!1,width:512,height:512,icon:{}})]).then(function(m){var g=K6(m,2);d([t,g8({icons:{main:g[0],mask:g[1]},prefix:a,iconName:r,transform:c,symbol:l,maskId:f,title:s,titleId:o,extra:h,watchable:!0})])}).catch(p)})},e.generateAbstractIcon=function(t){var l,i=t.children,r=t.attributes,s=t.main,o=t.transform,c=B4(t.styles);return c.length>0&&(r.style=c),o8(o)&&(l=Ds("generateAbstractTransformGrouping",{main:s,transform:o,containerWidth:s.width,iconWidth:s.width})),i.push(l||s.icon),{children:i,attributes:r}}}},zQ={mixout:function(){return{layer:function(t){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=i.classes,s=void 0===r?[]:r;return X4({type:"layer"},function(){oa("beforeDOMElementCreation",{assembler:t,params:i});var o=[];return t(function(a){Array.isArray(a)?a.map(function(c){o=o.concat(c.abstract)}):o=o.concat(a.abstract)}),[{tag:"span",attributes:{class:["".concat(Ee.cssPrefix,"-layers")].concat(yl(s)).join(" ")},children:o}]})}}}},NQ={mixout:function(){return{counter:function(t){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=i.title,s=void 0===r?null:r,o=i.classes,a=void 0===o?[]:o,c=i.attributes,l=void 0===c?{}:c,u=i.styles,f=void 0===u?{}:u;return X4({type:"counter",content:t},function(){return oa("beforeDOMElementCreation",{content:t,params:i}),pQ({content:t.toString(),title:s,extra:{attributes:l,styles:f,classes:["".concat(Ee.cssPrefix,"-layers-counter")].concat(yl(a))}})})}}}},FQ={mixout:function(){return{text:function(t){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=i.transform,s=void 0===r?Xr:r,o=i.title,a=void 0===o?null:o,c=i.classes,l=void 0===c?[]:c,u=i.attributes,f=void 0===u?{}:u,h=i.styles,d=void 0===h?{}:h;return X4({type:"text",content:t},function(){return oa("beforeDOMElementCreation",{content:t,params:i}),rC({content:t,transform:be(be({},Xr),s),title:a,extra:{attributes:f,styles:d,classes:["".concat(Ee.cssPrefix,"-layers-text")].concat(yl(l))}})})}}},provides:function(e){e.generateLayersText=function(t,i){var r=i.title,s=i.transform,o=i.extra,a=null,c=null;if(zw){var l=parseInt(getComputedStyle(t).fontSize,10),u=t.getBoundingClientRect();a=u.width/l,c=u.height/l}return Ee.autoA11y&&!r&&(o.attributes["aria-hidden"]="true"),Promise.resolve([t,rC({content:t.innerHTML,width:a,height:c,transform:s,title:r,extra:o,watchable:!0})])}}},OQ=new RegExp('"',"ug"),gC=[1105920,1112319];function vC(n,e){var t="".concat("data-fa-pseudo-element-pending").concat(e.replace(":","-"));return new Promise(function(i,r){if(null!==n.getAttribute(t))return i();var o=B1(n.children).filter(function(D){return D.getAttribute(t8)===e})[0],a=ao.getComputedStyle(n,e),c=a.getPropertyValue("font-family").match(LJ),l=a.getPropertyValue("font-weight"),u=a.getPropertyValue("content");if(o&&!c)return n.removeChild(o),i();if(c&&"none"!==u&&""!==u){var f=a.getPropertyValue("content"),h=~["Sharp"].indexOf(c[2])?sn:Bt,d=~["Solid","Regular","Light","Thin","Duotone","Brands","Kit"].indexOf(c[2])?bl[h][c[2].toLowerCase()]:RJ[h][l],p=function kQ(n){var e=n.replace(OQ,""),t=function KJ(n,e){var r,t=n.length,i=n.charCodeAt(e);return i>=55296&&i<=56319&&t>e+1&&(r=n.charCodeAt(e+1))>=56320&&r<=57343?1024*(i-55296)+r-56320+65536:i}(e,0),i=t>=gC[0]&&t<=gC[1],r=2===e.length&&e[0]===e[1];return{value:l8(r?e[0]:e),isSecondary:i||r}}(f),m=p.value,g=p.isSecondary,v=c[0].startsWith("FontAwesome"),x=h8(d,m),y=x;if(v){var _=function rQ(n){var e=Kw[n],t=h8("fas",n);return e||(t?{prefix:"fas",iconName:t}:null)||{prefix:null,iconName:null}}(m);_.iconName&&_.prefix&&(x=_.iconName,d=_.prefix)}if(!x||g||o&&o.getAttribute(n8)===d&&o.getAttribute(i8)===y)i();else{n.setAttribute(t,y),o&&n.removeChild(o);var M=function AQ(){return{iconName:null,title:null,titleId:null,prefix:null,transform:Xr,symbol:!1,mask:{iconName:null,prefix:null,rest:[]},maskId:null,extra:{classes:[],styles:{},attributes:{}}}}(),w=M.extra;w.attributes[t8]=e,_8(x,d).then(function(D){var b=g8(be(be({},M),{},{icons:{main:D,mask:{prefix:null,iconName:null,rest:[]}},prefix:d,iconName:y,extra:w,watchable:!0})),E=Ut.createElement("svg");"::before"===e?n.insertBefore(E,n.firstChild):n.appendChild(E),E.outerHTML=b.map(function(I){return Dl(I)}).join("\n"),n.removeAttribute(t),i()}).catch(r)}}else i()})}function VQ(n){return Promise.all([vC(n,"::before"),vC(n,"::after")])}function HQ(n){return!(n.parentNode===document.head||~AJ.indexOf(n.tagName.toUpperCase())||n.getAttribute(t8)||n.parentNode&&"svg"===n.parentNode.tagName)}function yC(n){if(Cs)return new Promise(function(e,t){var i=B1(n.querySelectorAll("*")).filter(HQ).map(VQ),r=b8_begin("searchPseudoElements");fC(),Promise.all(i).then(function(){r(),w8(),e()}).catch(function(){r(),w8(),t()})})}var _C=!1,xC=function(e){return e.toLowerCase().split(" ").reduce(function(i,r){var s=r.toLowerCase().split("-"),o=s[0],a=s.slice(1).join("-");if(o&&"h"===a)return i.flipX=!0,i;if(o&&"v"===a)return i.flipY=!0,i;if(a=parseFloat(a),isNaN(a))return i;switch(o){case"grow":i.size=i.size+a;break;case"shrink":i.size=i.size-a;break;case"left":i.x=i.x-a;break;case"right":i.x=i.x+a;break;case"up":i.y=i.y-a;break;case"down":i.y=i.y+a;break;case"rotate":i.rotate=i.rotate+a}return i},{size:16,x:0,y:0,flipX:!1,flipY:!1,rotate:0})},C8={x:0,y:0,width:"100%",height:"100%"};function bC(n){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return n.attributes&&(n.attributes.fill||e)&&(n.attributes.fill="black"),n}!function aQ(n,e){var t=e.mixoutsTo;nC=n,W1={},Object.keys(j1).forEach(function(i){-1===oQ.indexOf(i)&&delete j1[i]}),nC.forEach(function(i){var r=i.mixout?i.mixout():{};if(Object.keys(r).forEach(function(o){"function"==typeof r[o]&&(t[o]=r[o]),"object"===z4(r[o])&&Object.keys(r[o]).forEach(function(a){t[o]||(t[o]={}),t[o][a]=r[o][a]})}),i.hooks){var s=i.hooks();Object.keys(s).forEach(function(o){W1[o]||(W1[o]=[]),W1[o].push(s[o])})}i.provides&&i.provides(j1)})}([$J,PQ,zQ,NQ,FQ,{hooks:function(){return{mutationObserverCallbacks:function(t){return t.pseudoElementsCallback=yC,t}}},provides:function(e){e.pseudoElements2svg=function(t){var i=t.node;Ee.searchPseudoElements&&yC(void 0===i?Ut:i)}}},{mixout:function(){return{dom:{unwatch:function(){fC(),_C=!0}}}},hooks:function(){return{bootstrap:function(){hC(p8("mutationObserverCallbacks",{}))},noAuto:function(){!function CQ(){!J4||J4.disconnect()}()},watch:function(t){var i=t.observeMutationsRoot;_C?w8():hC(p8("mutationObserverCallbacks",{observeMutationsRoot:i}))}}}},{mixout:function(){return{parse:{transform:function(t){return xC(t)}}}},hooks:function(){return{parseNodeAttributes:function(t,i){var r=i.getAttribute("data-fa-transform");return r&&(t.transform=xC(r)),t}}},provides:function(e){e.generateAbstractTransformGrouping=function(t){var i=t.main,r=t.transform,o=t.iconWidth,a={transform:"translate(".concat(t.containerWidth/2," 256)")},c="translate(".concat(32*r.x,", ").concat(32*r.y,") "),l="scale(".concat(r.size/16*(r.flipX?-1:1),", ").concat(r.size/16*(r.flipY?-1:1),") "),u="rotate(".concat(r.rotate," 0 0)"),d={outer:a,inner:{transform:"".concat(c," ").concat(l," ").concat(u)},path:{transform:"translate(".concat(o/2*-1," -256)")}};return{tag:"g",attributes:be({},d.outer),children:[{tag:"g",attributes:be({},d.inner),children:[{tag:i.icon.tag,children:i.icon.children,attributes:be(be({},i.icon.attributes),d.path)}]}]}}}},{hooks:function(){return{parseNodeAttributes:function(t,i){var r=i.getAttribute("data-fa-mask"),s=r?Z4(r.split(" ").map(function(o){return o.trim()})):{prefix:null,iconName:null,rest:[]};return s.prefix||(s.prefix=lo()),t.mask=s,t.maskId=i.getAttribute("data-fa-mask-id"),t}}},provides:function(e){e.generateAbstractMask=function(t){var n,i=t.children,r=t.attributes,s=t.main,o=t.mask,a=t.maskId,u=s.icon,h=o.icon,d=function GJ(n){var e=n.transform,i=n.iconWidth,r={transform:"translate(".concat(n.containerWidth/2," 256)")},s="translate(".concat(32*e.x,", ").concat(32*e.y,") "),o="scale(".concat(e.size/16*(e.flipX?-1:1),", ").concat(e.size/16*(e.flipY?-1:1),") "),a="rotate(".concat(e.rotate," 0 0)");return{outer:r,inner:{transform:"".concat(s," ").concat(o," ").concat(a)},path:{transform:"translate(".concat(i/2*-1," -256)")}}}({transform:t.transform,containerWidth:o.width,iconWidth:s.width}),p={tag:"rect",attributes:be(be({},C8),{},{fill:"white"})},m=u.children?{children:u.children.map(bC)}:{},g={tag:"g",attributes:be({},d.inner),children:[bC(be({tag:u.tag,attributes:be(be({},u.attributes),d.path)},m))]},v={tag:"g",attributes:be({},d.outer),children:[g]},x="mask-".concat(a||El()),y="clip-".concat(a||El()),_={tag:"mask",attributes:be(be({},C8),{},{id:x,maskUnits:"userSpaceOnUse",maskContentUnits:"userSpaceOnUse"}),children:[p,v]},M={tag:"defs",children:[{tag:"clipPath",attributes:{id:y},children:(n=h,"g"===n.tag?n.children:[n])},_]};return i.push(M,{tag:"rect",attributes:be({fill:"currentColor","clip-path":"url(#".concat(y,")"),mask:"url(#".concat(x,")")},C8)}),{children:i,attributes:r}}}},{provides:function(e){var t=!1;ao.matchMedia&&(t=ao.matchMedia("(prefers-reduced-motion: reduce)").matches),e.missingIconAbstract=function(){var i=[],r={fill:"currentColor"},s={attributeType:"XML",repeatCount:"indefinite",dur:"2s"};i.push({tag:"path",attributes:be(be({},r),{},{d:"M156.5,447.7l-12.6,29.5c-18.7-9.5-35.9-21.2-51.5-34.9l22.7-22.7C127.6,430.5,141.5,440,156.5,447.7z M40.6,272H8.5 c1.4,21.2,5.4,41.7,11.7,61.1L50,321.2C45.1,305.5,41.8,289,40.6,272z M40.6,240c1.4-18.8,5.2-37,11.1-54.1l-29.5-12.6 C14.7,194.3,10,216.7,8.5,240H40.6z M64.3,156.5c7.8-14.9,17.2-28.8,28.1-41.5L69.7,92.3c-13.7,15.6-25.5,32.8-34.9,51.5 L64.3,156.5z M397,419.6c-13.9,12-29.4,22.3-46.1,30.4l11.9,29.8c20.7-9.9,39.8-22.6,56.9-37.6L397,419.6z M115,92.4 c13.9-12,29.4-22.3,46.1-30.4l-11.9-29.8c-20.7,9.9-39.8,22.6-56.8,37.6L115,92.4z M447.7,355.5c-7.8,14.9-17.2,28.8-28.1,41.5 l22.7,22.7c13.7-15.6,25.5-32.9,34.9-51.5L447.7,355.5z M471.4,272c-1.4,18.8-5.2,37-11.1,54.1l29.5,12.6 c7.5-21.1,12.2-43.5,13.6-66.8H471.4z M321.2,462c-15.7,5-32.2,8.2-49.2,9.4v32.1c21.2-1.4,41.7-5.4,61.1-11.7L321.2,462z M240,471.4c-18.8-1.4-37-5.2-54.1-11.1l-12.6,29.5c21.1,7.5,43.5,12.2,66.8,13.6V471.4z M462,190.8c5,15.7,8.2,32.2,9.4,49.2h32.1 c-1.4-21.2-5.4-41.7-11.7-61.1L462,190.8z M92.4,397c-12-13.9-22.3-29.4-30.4-46.1l-29.8,11.9c9.9,20.7,22.6,39.8,37.6,56.9 L92.4,397z M272,40.6c18.8,1.4,36.9,5.2,54.1,11.1l12.6-29.5C317.7,14.7,295.3,10,272,8.5V40.6z M190.8,50 c15.7-5,32.2-8.2,49.2-9.4V8.5c-21.2,1.4-41.7,5.4-61.1,11.7L190.8,50z M442.3,92.3L419.6,115c12,13.9,22.3,29.4,30.5,46.1 l29.8-11.9C470,128.5,457.3,109.4,442.3,92.3z M397,92.4l22.7-22.7c-15.6-13.7-32.8-25.5-51.5-34.9l-12.6,29.5 C370.4,72.1,384.4,81.5,397,92.4z"})});var o=be(be({},s),{},{attributeName:"opacity"}),a={tag:"circle",attributes:be(be({},r),{},{cx:"256",cy:"364",r:"28"}),children:[]};return t||a.children.push({tag:"animate",attributes:be(be({},s),{},{attributeName:"r",values:"28;14;28;28;14;28;"})},{tag:"animate",attributes:be(be({},o),{},{values:"1;0;1;1;0;1;"})}),i.push(a),i.push({tag:"path",attributes:be(be({},r),{},{opacity:"1",d:"M263.7,312h-16c-6.6,0-12-5.4-12-12c0-71,77.4-63.9,77.4-107.8c0-20-17.8-40.2-57.4-40.2c-29.1,0-44.3,9.6-59.2,28.7 c-3.9,5-11.1,6-16.2,2.4l-13.1-9.2c-5.6-3.9-6.9-11.8-2.6-17.2c21.2-27.2,46.4-44.7,91.2-44.7c52.3,0,97.4,29.8,97.4,80.2 c0,67.6-77.4,63.5-77.4,107.8C275.7,306.6,270.3,312,263.7,312z"}),children:t?[]:[{tag:"animate",attributes:be(be({},o),{},{values:"1;0;0;0;0;1;"})}]}),t||i.push({tag:"path",attributes:be(be({},r),{},{opacity:"0",d:"M232.5,134.5l7,168c0.3,6.4,5.6,11.5,12,11.5h9c6.4,0,11.7-5.1,12-11.5l7-168c0.3-6.8-5.2-12.5-12-12.5h-23 C237.7,122,232.2,127.7,232.5,134.5z"}),children:[{tag:"animate",attributes:be(be({},o),{},{values:"0;0;1;1;0;0;"})}]}),{tag:"g",attributes:{class:"missing"},children:i}}}},{hooks:function(){return{parseNodeAttributes:function(t,i){var r=i.getAttribute("data-fa-symbol");return t.symbol=null!==r&&(""===r||r),t}}}}],{mixoutsTo:ki});var XQ=ki.parse,YQ=ki.icon;const KQ=["*"],eee=n=>{const e={"fa-spin":n.spin,"fa-pulse":n.pulse,"fa-fw":n.fixedWidth,"fa-border":n.border,"fa-inverse":n.inverse,"fa-layers-counter":n.counter,"fa-flip-horizontal":"horizontal"===n.flip||"both"===n.flip,"fa-flip-vertical":"vertical"===n.flip||"both"===n.flip,[`fa-${n.size}`]:null!==n.size,[`fa-rotate-${n.rotate}`]:null!==n.rotate,[`fa-pull-${n.pull}`]:null!==n.pull,[`fa-stack-${n.stackItemSize}`]:null!=n.stackItemSize};return Object.keys(e).map(t=>e[t]?t:null).filter(t=>t)};let iee=(()=>{class n{constructor(){this.defaultPrefix="fas",this.fallbackIcon=null}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=Te({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),ree=(()=>{class n{constructor(){this.definitions={}}addIcons(...t){for(const i of t){i.prefix in this.definitions||(this.definitions[i.prefix]={}),this.definitions[i.prefix][i.iconName]=i;for(const r of i.icon[2])"string"==typeof r&&(this.definitions[i.prefix][r]=i)}}addIconPacks(...t){for(const i of t){const r=Object.keys(i).map(s=>i[s]);this.addIcons(...r)}}getIconDefinition(t,i){return t in this.definitions&&i in this.definitions[t]?this.definitions[t][i]:null}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=Te({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),see=(()=>{class n{constructor(){this.stackItemSize="1x"}ngOnChanges(t){if("size"in t)throw new Error('fa-icon is not allowed to customize size when used inside fa-stack. Set size on the enclosing fa-stack instead: <fa-stack size="4x">...</fa-stack>.')}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=$n({type:n,selectors:[["fa-icon","stackItemSize",""],["fa-duotone-icon","stackItemSize",""]],inputs:{stackItemSize:"stackItemSize",size:"size"},features:[Vr]}),n})(),oee=(()=>{class n{constructor(t,i){this.renderer=t,this.elementRef=i}ngOnInit(){this.renderer.addClass(this.elementRef.nativeElement,"fa-stack")}ngOnChanges(t){"size"in t&&(null!=t.size.currentValue&&this.renderer.addClass(this.elementRef.nativeElement,`fa-${t.size.currentValue}`),null!=t.size.previousValue&&this.renderer.removeClass(this.elementRef.nativeElement,`fa-${t.size.previousValue}`))}}return n.\u0275fac=function(t){return new(t||n)(Se(Cc),Se(hs))},n.\u0275cmp=xi({type:n,selectors:[["fa-stack"]],inputs:{size:"size"},features:[Vr],ngContentSelectors:KQ,decls:1,vars:0,template:function(t,i){1&t&&(function Mv(n){const e=ee()[16][6];if(!e.projection){const i=e.projection=hc(n?n.length:1,null),r=i.slice();let s=e.child;for(;null!==s;){const o=n?GP(s,n):0;null!==o&&(r[o]?r[o].projectionNext=s:i[o]=s,r[o]=s),s=s.next}}}(),function wv(n,e=0,t){const i=ee(),r=mt(),s=p1(r,22+n,16,null,t||null);null===s.projection&&(s.projection=e),a5(),32!=(32&s.flags)&&function oL(n,e,t){jm(e[11],0,e,t,Fm(n,t,e),Hm(t.parent||e[6],t,e))}(r,i,s)}(0))},encapsulation:2}),n})(),MC=(()=>{class n{constructor(t,i,r,s,o){this.sanitizer=t,this.config=i,this.iconLibrary=r,this.stackItem=s,this.classes=[],null!=o&&null==s&&console.error('FontAwesome: fa-icon and fa-duotone-icon elements must specify stackItemSize attribute when wrapped into fa-stack. Example: <fa-icon stackItemSize="2x"></fa-icon>.')}ngOnChanges(t){if(null==this.icon&&null==this.config.fallbackIcon)return(()=>{throw new Error("Property `icon` is required for `fa-icon`/`fa-duotone-icon` components.")})();if(t){const r=this.findIconDefinition(null!=this.icon?this.icon:this.config.fallbackIcon);if(null!=r){const s=this.buildParams();this.renderIcon(r,s)}}}render(){this.ngOnChanges({})}findIconDefinition(t){const i=((n,e)=>(n=>void 0!==n.prefix&&void 0!==n.iconName)(n)?n:Array.isArray(n)&&2===n.length?{prefix:n[0],iconName:n[1]}:"string"==typeof n?{prefix:e,iconName:n}:void 0)(t,this.config.defaultPrefix);return"icon"in i?i:this.iconLibrary.getIconDefinition(i.prefix,i.iconName)??((n=>{throw new Error(`Could not find icon with iconName=${n.iconName} and prefix=${n.prefix} in the icon library.`)})(i),null)}buildParams(){const t={flip:this.flip,spin:this.spin,pulse:this.pulse,border:this.border,inverse:this.inverse,size:this.size||null,pull:this.pull||null,rotate:this.rotate||null,fixedWidth:"boolean"==typeof this.fixedWidth?this.fixedWidth:this.config.fixedWidth,stackItemSize:null!=this.stackItem?this.stackItem.stackItemSize:null},i="string"==typeof this.transform?XQ.transform(this.transform):this.transform;return{title:this.title,transform:i,classes:[...eee(t),...this.classes],mask:null!=this.mask?this.findIconDefinition(this.mask):null,styles:null!=this.styles?this.styles:{},symbol:this.symbol,attributes:{role:this.a11yRole}}}renderIcon(t,i){const r=YQ(t,i);this.renderedIconHTML=this.sanitizer.bypassSecurityTrustHtml(r.html.join("\n"))}}return n.\u0275fac=function(t){return new(t||n)(Se(Xx),Se(iee),Se(ree),Se(see,8),Se(oee,8))},n.\u0275cmp=xi({type:n,selectors:[["fa-icon"]],hostAttrs:[1,"ng-fa-icon"],hostVars:2,hostBindings:function(t,i){2&t&&(zh("innerHTML",i.renderedIconHTML,sg),Tu("title",i.title))},inputs:{icon:"icon",title:"title",spin:"spin",pulse:"pulse",mask:"mask",styles:"styles",flip:"flip",size:"size",pull:"pull",border:"border",inverse:"inverse",symbol:"symbol",rotate:"rotate",fixedWidth:"fixedWidth",classes:"classes",transform:"transform",a11yRole:"a11yRole"},features:[Vr],decls:0,vars:0,template:function(t,i){},encapsulation:2}),n})(),aee=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=gr({type:n}),n.\u0275inj=Zi({}),n})();function cee(n,e){1&n&&(Le(0,"p",17),_t(1," I am a full stack web developer based in Indore, India. This website is a personal project that serves as a portfolio. Built using Angular, three.js and blender. Feel free to contact me using the contact page or through one of the social media profiles. "),Qe())}function lee(n,e){if(1&n){const t=Iu();Le(0,"div",18),Jn("click",function(){X3(t);const r=Ic();return Y3(r.actionSetPage(r.pageView.ABOUT))}),Le(1,"span",19),_t(2,"Regarding"),Qe()()}}class Tl{constructor(e){this.store=e,this.faFacebookF=yw,this.faGit=_w,this.faSkype=j6,this.faLinkedin=fw,this.onChildUpdate=new Qn,this.pageView=oo}onSubmit(){this.onChildUpdate.emit("New"+Math.random())}actionSetPage(e){this.store.dispatch(Y6({payload:e}))}}function wC(n,e,t,i,r,s,o){try{var a=n[s](o),c=a.value}catch(l){return void t(l)}a.done?e(c):Promise.resolve(c).then(i,r)}Tl.\u0275fac=function(e){return new(e||Tl)(Se(so))},Tl.\u0275cmp=xi({type:Tl,selectors:[["app-home"]],inputs:{page:"page"},outputs:{onChildUpdate:"onChildUpdate"},decls:25,vars:6,consts:[[1,"main-content","home-bg"],["data-wow-duration","2s","data-wow-delay",".5s",1,"pre-title","wow","fadeIn"],["data-wow-duration","3s","data-wow-delay","1s",1,"wow","fadeIn"],[1,"gradientText"],["data-wow-duration","4s","data-wow-delay","1.5s",1,"post-title","wow","fadeIn",3,"click"],["class","detail wow fadeIn","data-wow-duration","4s","data-wow-delay","1.5s",4,"ngIf"],["data-wow-duration","1s","data-wow-delay","3s",1,"wow","fadeInUp"],[1,"home-social"],["data-wow-duration","4s","data-wow-delay","1.25s",1,"wow","fadeIn"],["href","https://www.upwork.com/freelancers/~013cbef28a7f7be37d","target","_blank"],[3,"icon"],["data-wow-duration","4s","data-wow-delay","1.5s",1,"wow","fadeIn"],["href","https://github.com/yogeshbangar","target","_blank"],["data-wow-duration","4s","data-wow-delay","1.75s",1,"wow","fadeIn"],["data-wow-duration","4s","data-wow-delay","2s",1,"wow","fadeIn"],["href","https://www.linkedin.com/in/yogesh-bangar-45632b18/","target","_blank"],["class","box",3,"click",4,"ngIf"],["data-wow-duration","4s","data-wow-delay","1.5s",1,"detail","wow","fadeIn"],[1,"box",3,"click"],[2,"padding-top","5px"]],template:function(e,t){1&e&&(Le(0,"div",0)(1,"span",1),_t(2,"HELLO,"),Qe(),Le(3,"h2",2)(4,"span",3),_t(5,"I'M Yogesh Bangar"),Qe()(),Le(6,"p",4),Jn("click",function(){return t.onSubmit()}),_t(7," WEBGL & FRONT-END DEVELOPER "),Qe(),ms(8,cee,2,0,"p",5),nn(9,"hr",6),Le(10,"div",7)(11,"ul")(12,"li",8)(13,"a",9),nn(14,"fa-icon",10),Qe()(),Le(15,"li",11)(16,"a",12),nn(17,"fa-icon",10),Qe()(),Le(18,"li",13)(19,"a",12),nn(20,"fa-icon",10),Qe()(),Le(21,"li",14)(22,"a",15),nn(23,"fa-icon",10),Qe()()()(),ms(24,lee,3,0,"div",16),Qe()),2&e&&(Lt(8),Kt("ngIf",t.page===t.pageView.ABOUT),Lt(6),Kt("icon",t.faFacebookF),Lt(3),Kt("icon",t.faGit),Lt(3),Kt("icon",t.faSkype),Lt(3),Kt("icon",t.faLinkedin),Lt(1),Kt("ngIf",t.page===t.pageView.HOME))},dependencies:[Rd,MC],styles:['.main-content[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:center;align-items:center;background-color:#000e;height:100vh}.main-content[_ngcontent-%COMP%]   hr[_ngcontent-%COMP%]{width:70px;height:1px;border:0;background-color:#787878;margin:10px 0;position:relative}.main-content[_ngcontent-%COMP%]   .detail[_ngcontent-%COMP%]{max-width:400px;text-align:justify}.home-social[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{list-style:none;background-color:#000;padding:0 0 0 40px;margin:0}.home-social[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{position:relative;display:inline-block;width:50px;text-align:left}.home-bg[_ngcontent-%COMP%]{max-width:500px;max-height:400px;transform:translate(-50%,-50%);top:45%;left:50%;position:absolute;padding:20px;border-radius:10px;text-align:center}@media (max-width: 580px){.home-bg[_ngcontent-%COMP%]{left:0;transform:translate(0);padding:20px;width:100%;max-width:100%;top:25%}}.box[_ngcontent-%COMP%]{--border-size: 1px;--border-angle: 0turn;width:100px;height:30px;margin-top:20px;text-align:center;cursor:pointer;background-image:conic-gradient(from var(--border-angle),#213,#112 50%,#213),conic-gradient(from var(--border-angle),transparent 20%,#08f,#f03);background-size:calc(100% - var(--border-size) * 2) calc(100% - var(--border-size) * 2),cover;background-position:center center;background-repeat:no-repeat;animation:_ngcontent-%COMP%_bg-spin 3s linear infinite}@keyframes _ngcontent-%COMP%_bg-spin{to{--border-angle: 2turn}}@property --border-angle{syntax: "<angle>"; inherits: true; initial-value: 0turn;}']});const Ts=1e3,Fn=1001,bn=1003,on=1006,ho=1008,ua=1009,fa=1014,po=1015,zl=1016,Z1=1020,ir=1023,ha=1026,X1=1027,Nl=2300,Y1=2301,K1=2400,J1=2401,da=3e3,bt=3001,Kr="srgb",Fl="srgb-linear";class ma{addEventListener(e,t){void 0===this._listeners&&(this._listeners={});const i=this._listeners;void 0===i[e]&&(i[e]=[]),-1===i[e].indexOf(t)&&i[e].push(t)}hasEventListener(e,t){if(void 0===this._listeners)return!1;const i=this._listeners;return void 0!==i[e]&&-1!==i[e].indexOf(t)}removeEventListener(e,t){if(void 0===this._listeners)return;const r=this._listeners[e];if(void 0!==r){const s=r.indexOf(t);-1!==s&&r.splice(s,1)}}dispatchEvent(e){if(void 0===this._listeners)return;const i=this._listeners[e.type];if(void 0!==i){e.target=this;const r=i.slice(0);for(let s=0,o=r.length;s<o;s++)r[s].call(this,e);e.target=null}}}const ni=["00","01","02","03","04","05","06","07","08","09","0a","0b","0c","0d","0e","0f","10","11","12","13","14","15","16","17","18","19","1a","1b","1c","1d","1e","1f","20","21","22","23","24","25","26","27","28","29","2a","2b","2c","2d","2e","2f","30","31","32","33","34","35","36","37","38","39","3a","3b","3c","3d","3e","3f","40","41","42","43","44","45","46","47","48","49","4a","4b","4c","4d","4e","4f","50","51","52","53","54","55","56","57","58","59","5a","5b","5c","5d","5e","5f","60","61","62","63","64","65","66","67","68","69","6a","6b","6c","6d","6e","6f","70","71","72","73","74","75","76","77","78","79","7a","7b","7c","7d","7e","7f","80","81","82","83","84","85","86","87","88","89","8a","8b","8c","8d","8e","8f","90","91","92","93","94","95","96","97","98","99","9a","9b","9c","9d","9e","9f","a0","a1","a2","a3","a4","a5","a6","a7","a8","a9","aa","ab","ac","ad","ae","af","b0","b1","b2","b3","b4","b5","b6","b7","b8","b9","ba","bb","bc","bd","be","bf","c0","c1","c2","c3","c4","c5","c6","c7","c8","c9","ca","cb","cc","cd","ce","cf","d0","d1","d2","d3","d4","d5","d6","d7","d8","d9","da","db","dc","dd","de","df","e0","e1","e2","e3","e4","e5","e6","e7","e8","e9","ea","eb","ec","ed","ee","ef","f0","f1","f2","f3","f4","f5","f6","f7","f8","f9","fa","fb","fc","fd","fe","ff"];let rS=1234567;const ga=Math.PI/180,Ol=180/Math.PI;function Vi(){const n=4294967295*Math.random()|0,e=4294967295*Math.random()|0,t=4294967295*Math.random()|0,i=4294967295*Math.random()|0;return(ni[255&n]+ni[n>>8&255]+ni[n>>16&255]+ni[n>>24&255]+"-"+ni[255&e]+ni[e>>8&255]+"-"+ni[e>>16&15|64]+ni[e>>24&255]+"-"+ni[63&t|128]+ni[t>>8&255]+"-"+ni[t>>16&255]+ni[t>>24&255]+ni[255&i]+ni[i>>8&255]+ni[i>>16&255]+ni[i>>24&255]).toLowerCase()}function dn(n,e,t){return Math.max(e,Math.min(t,n))}function O8(n,e){return(n%e+e)%e}function kl(n,e,t){return(1-t)*n+t*e}function k8(n){return 0==(n&n-1)&&0!==n}function sS(n){return Math.pow(2,Math.ceil(Math.log(n)/Math.LN2))}function o0(n){return Math.pow(2,Math.floor(Math.log(n)/Math.LN2))}function Is(n,e){switch(e.constructor){case Float32Array:return n;case Uint16Array:return n/65535;case Uint8Array:return n/255;case Int16Array:return Math.max(n/32767,-1);case Int8Array:return Math.max(n/127,-1);default:throw new Error("Invalid component type.")}}function Nt(n,e){switch(e.constructor){case Float32Array:return n;case Uint16Array:return Math.round(65535*n);case Uint8Array:return Math.round(255*n);case Int16Array:return Math.round(32767*n);case Int8Array:return Math.round(127*n);default:throw new Error("Invalid component type.")}}var Tr=Object.freeze({__proto__:null,DEG2RAD:ga,RAD2DEG:Ol,generateUUID:Vi,clamp:dn,euclideanModulo:O8,mapLinear:function lte(n,e,t,i,r){return i+(n-e)*(r-i)/(t-e)},inverseLerp:function ute(n,e,t){return n!==e?(t-n)/(e-n):0},lerp:kl,damp:function fte(n,e,t,i){return kl(n,e,1-Math.exp(-t*i))},pingpong:function hte(n,e=1){return e-Math.abs(O8(n,2*e)-e)},smoothstep:function dte(n,e,t){return n<=e?0:n>=t?1:(n=(n-e)/(t-e))*n*(3-2*n)},smootherstep:function pte(n,e,t){return n<=e?0:n>=t?1:(n=(n-e)/(t-e))*n*n*(n*(6*n-15)+10)},randInt:function mte(n,e){return n+Math.floor(Math.random()*(e-n+1))},randFloat:function gte(n,e){return n+Math.random()*(e-n)},randFloatSpread:function vte(n){return n*(.5-Math.random())},seededRandom:function yte(n){void 0!==n&&(rS=n);let e=rS+=1831565813;return e=Math.imul(e^e>>>15,1|e),e^=e+Math.imul(e^e>>>7,61|e),((e^e>>>14)>>>0)/4294967296},degToRad:function _te(n){return n*ga},radToDeg:function xte(n){return n*Ol},isPowerOfTwo:k8,ceilPowerOfTwo:sS,floorPowerOfTwo:o0,setQuaternionFromProperEuler:function bte(n,e,t,i,r){const s=Math.cos,o=Math.sin,a=s(t/2),c=o(t/2),l=s((e+i)/2),u=o((e+i)/2),f=s((e-i)/2),h=o((e-i)/2),d=s((i-e)/2),p=o((i-e)/2);switch(r){case"XYX":n.set(a*u,c*f,c*h,a*l);break;case"YZY":n.set(c*h,a*u,c*f,a*l);break;case"ZXZ":n.set(c*f,c*h,a*u,a*l);break;case"XZX":n.set(a*u,c*p,c*d,a*l);break;case"YXY":n.set(c*d,a*u,c*p,a*l);break;case"ZYZ":n.set(c*p,c*d,a*u,a*l);break;default:console.warn("THREE.MathUtils: .setQuaternionFromProperEuler() encountered an unknown order: "+r)}},normalize:Nt,denormalize:Is});class q{constructor(e=0,t=0){q.prototype.isVector2=!0,this.x=e,this.y=t}get width(){return this.x}set width(e){this.x=e}get height(){return this.y}set height(e){this.y=e}set(e,t){return this.x=e,this.y=t,this}setScalar(e){return this.x=e,this.y=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y)}copy(e){return this.x=e.x,this.y=e.y,this}add(e){return this.x+=e.x,this.y+=e.y,this}addScalar(e){return this.x+=e,this.y+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this}subScalar(e){return this.x-=e,this.y-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this}multiply(e){return this.x*=e.x,this.y*=e.y,this}multiplyScalar(e){return this.x*=e,this.y*=e,this}divide(e){return this.x/=e.x,this.y/=e.y,this}divideScalar(e){return this.multiplyScalar(1/e)}applyMatrix3(e){const t=this.x,i=this.y,r=e.elements;return this.x=r[0]*t+r[3]*i+r[6],this.y=r[1]*t+r[4]*i+r[7],this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this}clampLength(e,t){const i=this.length();return this.divideScalar(i||1).multiplyScalar(Math.max(e,Math.min(t,i)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this}negate(){return this.x=-this.x,this.y=-this.y,this}dot(e){return this.x*e.x+this.y*e.y}cross(e){return this.x*e.y-this.y*e.x}lengthSq(){return this.x*this.x+this.y*this.y}length(){return Math.sqrt(this.x*this.x+this.y*this.y)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)}normalize(){return this.divideScalar(this.length()||1)}angle(){return Math.atan2(-this.y,-this.x)+Math.PI}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const t=this.x-e.x,i=this.y-e.y;return t*t+i*i}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this}lerpVectors(e,t,i){return this.x=e.x+(t.x-e.x)*i,this.y=e.y+(t.y-e.y)*i,this}equals(e){return e.x===this.x&&e.y===this.y}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this}rotateAround(e,t){const i=Math.cos(t),r=Math.sin(t),s=this.x-e.x,o=this.y-e.y;return this.x=s*i-o*r+e.x,this.y=s*r+o*i+e.y,this}random(){return this.x=Math.random(),this.y=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y}}class hi{constructor(){hi.prototype.isMatrix3=!0,this.elements=[1,0,0,0,1,0,0,0,1]}set(e,t,i,r,s,o,a,c,l){const u=this.elements;return u[0]=e,u[1]=r,u[2]=a,u[3]=t,u[4]=s,u[5]=c,u[6]=i,u[7]=o,u[8]=l,this}identity(){return this.set(1,0,0,0,1,0,0,0,1),this}copy(e){const t=this.elements,i=e.elements;return t[0]=i[0],t[1]=i[1],t[2]=i[2],t[3]=i[3],t[4]=i[4],t[5]=i[5],t[6]=i[6],t[7]=i[7],t[8]=i[8],this}extractBasis(e,t,i){return e.setFromMatrix3Column(this,0),t.setFromMatrix3Column(this,1),i.setFromMatrix3Column(this,2),this}setFromMatrix4(e){const t=e.elements;return this.set(t[0],t[4],t[8],t[1],t[5],t[9],t[2],t[6],t[10]),this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){const i=e.elements,r=t.elements,s=this.elements,o=i[0],a=i[3],c=i[6],l=i[1],u=i[4],f=i[7],h=i[2],d=i[5],p=i[8],m=r[0],g=r[3],v=r[6],x=r[1],y=r[4],_=r[7],M=r[2],w=r[5],D=r[8];return s[0]=o*m+a*x+c*M,s[3]=o*g+a*y+c*w,s[6]=o*v+a*_+c*D,s[1]=l*m+u*x+f*M,s[4]=l*g+u*y+f*w,s[7]=l*v+u*_+f*D,s[2]=h*m+d*x+p*M,s[5]=h*g+d*y+p*w,s[8]=h*v+d*_+p*D,this}multiplyScalar(e){const t=this.elements;return t[0]*=e,t[3]*=e,t[6]*=e,t[1]*=e,t[4]*=e,t[7]*=e,t[2]*=e,t[5]*=e,t[8]*=e,this}determinant(){const e=this.elements,t=e[0],i=e[1],r=e[2],s=e[3],o=e[4],a=e[5],c=e[6],l=e[7],u=e[8];return t*o*u-t*a*l-i*s*u+i*a*c+r*s*l-r*o*c}invert(){const e=this.elements,t=e[0],i=e[1],r=e[2],s=e[3],o=e[4],a=e[5],c=e[6],l=e[7],u=e[8],f=u*o-a*l,h=a*c-u*s,d=l*s-o*c,p=t*f+i*h+r*d;if(0===p)return this.set(0,0,0,0,0,0,0,0,0);const m=1/p;return e[0]=f*m,e[1]=(r*l-u*i)*m,e[2]=(a*i-r*o)*m,e[3]=h*m,e[4]=(u*t-r*c)*m,e[5]=(r*s-a*t)*m,e[6]=d*m,e[7]=(i*c-l*t)*m,e[8]=(o*t-i*s)*m,this}transpose(){let e;const t=this.elements;return e=t[1],t[1]=t[3],t[3]=e,e=t[2],t[2]=t[6],t[6]=e,e=t[5],t[5]=t[7],t[7]=e,this}getNormalMatrix(e){return this.setFromMatrix4(e).invert().transpose()}transposeIntoArray(e){const t=this.elements;return e[0]=t[0],e[1]=t[3],e[2]=t[6],e[3]=t[1],e[4]=t[4],e[5]=t[7],e[6]=t[2],e[7]=t[5],e[8]=t[8],this}setUvTransform(e,t,i,r,s,o,a){const c=Math.cos(s),l=Math.sin(s);return this.set(i*c,i*l,-i*(c*o+l*a)+o+e,-r*l,r*c,-r*(-l*o+c*a)+a+t,0,0,1),this}scale(e,t){return this.premultiply(V8.makeScale(e,t)),this}rotate(e){return this.premultiply(V8.makeRotation(-e)),this}translate(e,t){return this.premultiply(V8.makeTranslation(e,t)),this}makeTranslation(e,t){return this.set(1,0,e,0,1,t,0,0,1),this}makeRotation(e){const t=Math.cos(e),i=Math.sin(e);return this.set(t,-i,0,i,t,0,0,0,1),this}makeScale(e,t){return this.set(e,0,0,0,t,0,0,0,1),this}equals(e){const t=this.elements,i=e.elements;for(let r=0;r<9;r++)if(t[r]!==i[r])return!1;return!0}fromArray(e,t=0){for(let i=0;i<9;i++)this.elements[i]=e[i+t];return this}toArray(e=[],t=0){const i=this.elements;return e[t]=i[0],e[t+1]=i[1],e[t+2]=i[2],e[t+3]=i[3],e[t+4]=i[4],e[t+5]=i[5],e[t+6]=i[6],e[t+7]=i[7],e[t+8]=i[8],e}clone(){return(new this.constructor).fromArray(this.elements)}}const V8=new hi;function oS(n){for(let e=n.length-1;e>=0;--e)if(n[e]>=65535)return!0;return!1}function Vl(n){return document.createElementNS("http://www.w3.org/1999/xhtml",n)}function va(n){return n<.04045?.0773993808*n:Math.pow(.9478672986*n+.0521327014,2.4)}function a0(n){return n<.0031308?12.92*n:1.055*Math.pow(n,.41666)-.055}Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array;const H8={[Kr]:{[Fl]:va},[Fl]:{[Kr]:a0}},di={legacyMode:!0,get workingColorSpace(){return Fl},set workingColorSpace(n){console.warn("THREE.ColorManagement: .workingColorSpace is readonly.")},convert:function(n,e,t){if(this.legacyMode||e===t||!e||!t)return n;if(H8[e]&&void 0!==H8[e][t]){const i=H8[e][t];return n.r=i(n.r),n.g=i(n.g),n.b=i(n.b),n}throw new Error("Unsupported color space conversion.")},fromWorkingColorSpace:function(n,e){return this.convert(n,this.workingColorSpace,e)},toWorkingColorSpace:function(n,e){return this.convert(n,e,this.workingColorSpace)}},aS={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},Rn={r:0,g:0,b:0},Ir={h:0,s:0,l:0},c0={h:0,s:0,l:0};function U8(n,e,t){return t<0&&(t+=1),t>1&&(t-=1),t<1/6?n+6*(e-n)*t:t<.5?e:t<2/3?n+6*(e-n)*(2/3-t):n}function l0(n,e){return e.r=n.r,e.g=n.g,e.b=n.b,e}let e2,ae=(()=>{class n{constructor(t,i,r){return this.isColor=!0,this.r=1,this.g=1,this.b=1,void 0===i&&void 0===r?this.set(t):this.setRGB(t,i,r)}set(t){return t&&t.isColor?this.copy(t):"number"==typeof t?this.setHex(t):"string"==typeof t&&this.setStyle(t),this}setScalar(t){return this.r=t,this.g=t,this.b=t,this}setHex(t,i=Kr){return t=Math.floor(t),this.r=(t>>16&255)/255,this.g=(t>>8&255)/255,this.b=(255&t)/255,di.toWorkingColorSpace(this,i),this}setRGB(t,i,r,s=di.workingColorSpace){return this.r=t,this.g=i,this.b=r,di.toWorkingColorSpace(this,s),this}setHSL(t,i,r,s=di.workingColorSpace){if(t=O8(t,1),i=dn(i,0,1),r=dn(r,0,1),0===i)this.r=this.g=this.b=r;else{const o=r<=.5?r*(1+i):r+i-r*i,a=2*r-o;this.r=U8(a,o,t+1/3),this.g=U8(a,o,t),this.b=U8(a,o,t-1/3)}return di.toWorkingColorSpace(this,s),this}setStyle(t,i=Kr){function r(o){void 0!==o&&parseFloat(o)<1&&console.warn("THREE.Color: Alpha component of "+t+" will be ignored.")}let s;if(s=/^((?:rgb|hsl)a?)\(([^\)]*)\)/.exec(t)){let o;const c=s[2];switch(s[1]){case"rgb":case"rgba":if(o=/^\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(c))return this.r=Math.min(255,parseInt(o[1],10))/255,this.g=Math.min(255,parseInt(o[2],10))/255,this.b=Math.min(255,parseInt(o[3],10))/255,di.toWorkingColorSpace(this,i),r(o[4]),this;if(o=/^\s*(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(c))return this.r=Math.min(100,parseInt(o[1],10))/100,this.g=Math.min(100,parseInt(o[2],10))/100,this.b=Math.min(100,parseInt(o[3],10))/100,di.toWorkingColorSpace(this,i),r(o[4]),this;break;case"hsl":case"hsla":if(o=/^\s*(\d*\.?\d+)\s*,\s*(\d*\.?\d+)\%\s*,\s*(\d*\.?\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(c)){const l=parseFloat(o[1])/360,u=parseFloat(o[2])/100,f=parseFloat(o[3])/100;return r(o[4]),this.setHSL(l,u,f,i)}}}else if(s=/^\#([A-Fa-f\d]+)$/.exec(t)){const o=s[1],a=o.length;if(3===a)return this.r=parseInt(o.charAt(0)+o.charAt(0),16)/255,this.g=parseInt(o.charAt(1)+o.charAt(1),16)/255,this.b=parseInt(o.charAt(2)+o.charAt(2),16)/255,di.toWorkingColorSpace(this,i),this;if(6===a)return this.r=parseInt(o.charAt(0)+o.charAt(1),16)/255,this.g=parseInt(o.charAt(2)+o.charAt(3),16)/255,this.b=parseInt(o.charAt(4)+o.charAt(5),16)/255,di.toWorkingColorSpace(this,i),this}return t&&t.length>0?this.setColorName(t,i):this}setColorName(t,i=Kr){const r=aS[t.toLowerCase()];return void 0!==r?this.setHex(r,i):console.warn("THREE.Color: Unknown color "+t),this}clone(){return new this.constructor(this.r,this.g,this.b)}copy(t){return this.r=t.r,this.g=t.g,this.b=t.b,this}copySRGBToLinear(t){return this.r=va(t.r),this.g=va(t.g),this.b=va(t.b),this}copyLinearToSRGB(t){return this.r=a0(t.r),this.g=a0(t.g),this.b=a0(t.b),this}convertSRGBToLinear(){return this.copySRGBToLinear(this),this}convertLinearToSRGB(){return this.copyLinearToSRGB(this),this}getHex(t=Kr){return di.fromWorkingColorSpace(l0(this,Rn),t),dn(255*Rn.r,0,255)<<16^dn(255*Rn.g,0,255)<<8^dn(255*Rn.b,0,255)<<0}getHexString(t=Kr){return("000000"+this.getHex(t).toString(16)).slice(-6)}getHSL(t,i=di.workingColorSpace){di.fromWorkingColorSpace(l0(this,Rn),i);const r=Rn.r,s=Rn.g,o=Rn.b,a=Math.max(r,s,o),c=Math.min(r,s,o);let l,u;const f=(c+a)/2;if(c===a)l=0,u=0;else{const h=a-c;switch(u=f<=.5?h/(a+c):h/(2-a-c),a){case r:l=(s-o)/h+(s<o?6:0);break;case s:l=(o-r)/h+2;break;case o:l=(r-s)/h+4}l/=6}return t.h=l,t.s=u,t.l=f,t}getRGB(t,i=di.workingColorSpace){return di.fromWorkingColorSpace(l0(this,Rn),i),t.r=Rn.r,t.g=Rn.g,t.b=Rn.b,t}getStyle(t=Kr){return di.fromWorkingColorSpace(l0(this,Rn),t),t!==Kr?`color(${t} ${Rn.r} ${Rn.g} ${Rn.b})`:`rgb(${255*Rn.r|0},${255*Rn.g|0},${255*Rn.b|0})`}offsetHSL(t,i,r){return this.getHSL(Ir),Ir.h+=t,Ir.s+=i,Ir.l+=r,this.setHSL(Ir.h,Ir.s,Ir.l),this}add(t){return this.r+=t.r,this.g+=t.g,this.b+=t.b,this}addColors(t,i){return this.r=t.r+i.r,this.g=t.g+i.g,this.b=t.b+i.b,this}addScalar(t){return this.r+=t,this.g+=t,this.b+=t,this}sub(t){return this.r=Math.max(0,this.r-t.r),this.g=Math.max(0,this.g-t.g),this.b=Math.max(0,this.b-t.b),this}multiply(t){return this.r*=t.r,this.g*=t.g,this.b*=t.b,this}multiplyScalar(t){return this.r*=t,this.g*=t,this.b*=t,this}lerp(t,i){return this.r+=(t.r-this.r)*i,this.g+=(t.g-this.g)*i,this.b+=(t.b-this.b)*i,this}lerpColors(t,i,r){return this.r=t.r+(i.r-t.r)*r,this.g=t.g+(i.g-t.g)*r,this.b=t.b+(i.b-t.b)*r,this}lerpHSL(t,i){this.getHSL(Ir),t.getHSL(c0);const r=kl(Ir.h,c0.h,i),s=kl(Ir.s,c0.s,i),o=kl(Ir.l,c0.l,i);return this.setHSL(r,s,o),this}equals(t){return t.r===this.r&&t.g===this.g&&t.b===this.b}fromArray(t,i=0){return this.r=t[i],this.g=t[i+1],this.b=t[i+2],this}toArray(t=[],i=0){return t[i]=this.r,t[i+1]=this.g,t[i+2]=this.b,t}fromBufferAttribute(t,i){return this.r=t.getX(i),this.g=t.getY(i),this.b=t.getZ(i),this}toJSON(){return this.getHex()}*[Symbol.iterator](){yield this.r,yield this.g,yield this.b}}return n.NAMES=aS,n})();class cS{static getDataURL(e){if(/^data:/i.test(e.src)||typeof HTMLCanvasElement>"u")return e.src;let t;if(e instanceof HTMLCanvasElement)t=e;else{void 0===e2&&(e2=Vl("canvas")),e2.width=e.width,e2.height=e.height;const i=e2.getContext("2d");e instanceof ImageData?i.putImageData(e,0,0):i.drawImage(e,0,0,e.width,e.height),t=e2}return t.width>2048||t.height>2048?(console.warn("THREE.ImageUtils.getDataURL: Image converted to jpg for performance reasons",e),t.toDataURL("image/jpeg",.6)):t.toDataURL("image/png")}static sRGBToLinear(e){if(typeof HTMLImageElement<"u"&&e instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&e instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&e instanceof ImageBitmap){const t=Vl("canvas");t.width=e.width,t.height=e.height;const i=t.getContext("2d");i.drawImage(e,0,0,e.width,e.height);const r=i.getImageData(0,0,e.width,e.height),s=r.data;for(let o=0;o<s.length;o++)s[o]=255*va(s[o]/255);return i.putImageData(r,0,0),t}if(e.data){const t=e.data.slice(0);for(let i=0;i<t.length;i++)t[i]=t instanceof Uint8Array||t instanceof Uint8ClampedArray?Math.floor(255*va(t[i]/255)):va(t[i]);return{data:t,width:e.width,height:e.height}}return console.warn("THREE.ImageUtils.sRGBToLinear(): Unsupported image type. No color space conversion applied."),e}}class t2{constructor(e=null){this.isSource=!0,this.uuid=Vi(),this.data=e,this.version=0}set needsUpdate(e){!0===e&&this.version++}toJSON(e){const t=void 0===e||"string"==typeof e;if(!t&&void 0!==e.images[this.uuid])return e.images[this.uuid];const i={uuid:this.uuid,url:""},r=this.data;if(null!==r){let s;if(Array.isArray(r)){s=[];for(let o=0,a=r.length;o<a;o++)s.push(B8(r[o].isDataTexture?r[o].image:r[o]))}else s=B8(r);i.url=s}return t||(e.images[this.uuid]=i),i}}function B8(n){return typeof HTMLImageElement<"u"&&n instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&n instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&n instanceof ImageBitmap?cS.getDataURL(n):n.data?{data:Array.from(n.data),width:n.width,height:n.height,type:n.data.constructor.name}:(console.warn("THREE.Texture: Unable to serialize Texture."),{})}let wte=0,Hi=(()=>{class n extends ma{constructor(t=n.DEFAULT_IMAGE,i=n.DEFAULT_MAPPING,r=Fn,s=Fn,o=on,a=ho,c=ir,l=ua,u=n.DEFAULT_ANISOTROPY,f=da){super(),this.isTexture=!0,Object.defineProperty(this,"id",{value:wte++}),this.uuid=Vi(),this.name="",this.source=new t2(t),this.mipmaps=[],this.mapping=i,this.wrapS=r,this.wrapT=s,this.magFilter=o,this.minFilter=a,this.anisotropy=u,this.format=c,this.internalFormat=null,this.type=l,this.offset=new q(0,0),this.repeat=new q(1,1),this.center=new q(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new hi,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,this.encoding=f,this.userData={},this.version=0,this.onUpdate=null,this.isRenderTargetTexture=!1,this.needsPMREMUpdate=!1}get image(){return this.source.data}set image(t){this.source.data=t}updateMatrix(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)}clone(){return(new this.constructor).copy(this)}copy(t){return this.name=t.name,this.source=t.source,this.mipmaps=t.mipmaps.slice(0),this.mapping=t.mapping,this.wrapS=t.wrapS,this.wrapT=t.wrapT,this.magFilter=t.magFilter,this.minFilter=t.minFilter,this.anisotropy=t.anisotropy,this.format=t.format,this.internalFormat=t.internalFormat,this.type=t.type,this.offset.copy(t.offset),this.repeat.copy(t.repeat),this.center.copy(t.center),this.rotation=t.rotation,this.matrixAutoUpdate=t.matrixAutoUpdate,this.matrix.copy(t.matrix),this.generateMipmaps=t.generateMipmaps,this.premultiplyAlpha=t.premultiplyAlpha,this.flipY=t.flipY,this.unpackAlignment=t.unpackAlignment,this.encoding=t.encoding,this.userData=JSON.parse(JSON.stringify(t.userData)),this.needsUpdate=!0,this}toJSON(t){const i=void 0===t||"string"==typeof t;if(!i&&void 0!==t.textures[this.uuid])return t.textures[this.uuid];const r={metadata:{version:4.5,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,image:this.source.toJSON(t).uuid,mapping:this.mapping,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,type:this.type,encoding:this.encoding,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};return"{}"!==JSON.stringify(this.userData)&&(r.userData=this.userData),i||(t.textures[this.uuid]=r),r}dispose(){this.dispatchEvent({type:"dispose"})}transformUv(t){if(300!==this.mapping)return t;if(t.applyMatrix3(this.matrix),t.x<0||t.x>1)switch(this.wrapS){case Ts:t.x=t.x-Math.floor(t.x);break;case Fn:t.x=t.x<0?0:1;break;case 1002:t.x=1===Math.abs(Math.floor(t.x)%2)?Math.ceil(t.x)-t.x:t.x-Math.floor(t.x)}if(t.y<0||t.y>1)switch(this.wrapT){case Ts:t.y=t.y-Math.floor(t.y);break;case Fn:t.y=t.y<0?0:1;break;case 1002:t.y=1===Math.abs(Math.floor(t.y)%2)?Math.ceil(t.y)-t.y:t.y-Math.floor(t.y)}return this.flipY&&(t.y=1-t.y),t}set needsUpdate(t){!0===t&&(this.version++,this.source.needsUpdate=!0)}}return n.DEFAULT_IMAGE=null,n.DEFAULT_MAPPING=300,n.DEFAULT_ANISOTROPY=1,n})();class ft{constructor(e=0,t=0,i=0,r=1){ft.prototype.isVector4=!0,this.x=e,this.y=t,this.z=i,this.w=r}get width(){return this.z}set width(e){this.z=e}get height(){return this.w}set height(e){this.w=e}set(e,t,i,r){return this.x=e,this.y=t,this.z=i,this.w=r,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this.w=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setW(e){return this.w=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;case 3:this.w=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z,this.w)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this.w=void 0!==e.w?e.w:1,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this.w+=e.w,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this.w+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this.w=e.w+t.w,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this.w+=e.w*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this.w-=e.w,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this.w-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this.w=e.w-t.w,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this.w*=e.w,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this.w*=e,this}applyMatrix4(e){const t=this.x,i=this.y,r=this.z,s=this.w,o=e.elements;return this.x=o[0]*t+o[4]*i+o[8]*r+o[12]*s,this.y=o[1]*t+o[5]*i+o[9]*r+o[13]*s,this.z=o[2]*t+o[6]*i+o[10]*r+o[14]*s,this.w=o[3]*t+o[7]*i+o[11]*r+o[15]*s,this}divideScalar(e){return this.multiplyScalar(1/e)}setAxisAngleFromQuaternion(e){this.w=2*Math.acos(e.w);const t=Math.sqrt(1-e.w*e.w);return t<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=e.x/t,this.y=e.y/t,this.z=e.z/t),this}setAxisAngleFromRotationMatrix(e){let t,i,r,s;const c=e.elements,l=c[0],u=c[4],f=c[8],h=c[1],d=c[5],p=c[9],m=c[2],g=c[6],v=c[10];if(Math.abs(u-h)<.01&&Math.abs(f-m)<.01&&Math.abs(p-g)<.01){if(Math.abs(u+h)<.1&&Math.abs(f+m)<.1&&Math.abs(p+g)<.1&&Math.abs(l+d+v-3)<.1)return this.set(1,0,0,0),this;t=Math.PI;const y=(l+1)/2,_=(d+1)/2,M=(v+1)/2,w=(u+h)/4,D=(f+m)/4,b=(p+g)/4;return y>_&&y>M?y<.01?(i=0,r=.707106781,s=.707106781):(i=Math.sqrt(y),r=w/i,s=D/i):_>M?_<.01?(i=.707106781,r=0,s=.707106781):(r=Math.sqrt(_),i=w/r,s=b/r):M<.01?(i=.707106781,r=.707106781,s=0):(s=Math.sqrt(M),i=D/s,r=b/s),this.set(i,r,s,t),this}let x=Math.sqrt((g-p)*(g-p)+(f-m)*(f-m)+(h-u)*(h-u));return Math.abs(x)<.001&&(x=1),this.x=(g-p)/x,this.y=(f-m)/x,this.z=(h-u)/x,this.w=Math.acos((l+d+v-1)/2),this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this.w=Math.min(this.w,e.w),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this.w=Math.max(this.w,e.w),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this.z=Math.max(e.z,Math.min(t.z,this.z)),this.w=Math.max(e.w,Math.min(t.w,this.w)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this.z=Math.max(e,Math.min(t,this.z)),this.w=Math.max(e,Math.min(t,this.w)),this}clampLength(e,t){const i=this.length();return this.divideScalar(i||1).multiplyScalar(Math.max(e,Math.min(t,i)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this.w=this.w<0?Math.ceil(this.w):Math.floor(this.w),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z+this.w*e.w}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this.w+=(e.w-this.w)*t,this}lerpVectors(e,t,i){return this.x=e.x+(t.x-e.x)*i,this.y=e.y+(t.y-e.y)*i,this.z=e.z+(t.z-e.z)*i,this.w=e.w+(t.w-e.w)*i,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z&&e.w===this.w}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this.w=e[t+3],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e[t+3]=this.w,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this.w=e.getW(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this.w=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z,yield this.w}}class ya extends ma{constructor(e=1,t=1,i={}){super(),this.isWebGLRenderTarget=!0,this.width=e,this.height=t,this.depth=1,this.scissor=new ft(0,0,e,t),this.scissorTest=!1,this.viewport=new ft(0,0,e,t),this.texture=new Hi({width:e,height:t,depth:1},i.mapping,i.wrapS,i.wrapT,i.magFilter,i.minFilter,i.format,i.type,i.anisotropy,i.encoding),this.texture.isRenderTargetTexture=!0,this.texture.flipY=!1,this.texture.generateMipmaps=void 0!==i.generateMipmaps&&i.generateMipmaps,this.texture.internalFormat=void 0!==i.internalFormat?i.internalFormat:null,this.texture.minFilter=void 0!==i.minFilter?i.minFilter:on,this.depthBuffer=void 0===i.depthBuffer||i.depthBuffer,this.stencilBuffer=void 0!==i.stencilBuffer&&i.stencilBuffer,this.depthTexture=void 0!==i.depthTexture?i.depthTexture:null,this.samples=void 0!==i.samples?i.samples:0}setSize(e,t,i=1){(this.width!==e||this.height!==t||this.depth!==i)&&(this.width=e,this.height=t,this.depth=i,this.texture.image.width=e,this.texture.image.height=t,this.texture.image.depth=i,this.dispose()),this.viewport.set(0,0,e,t),this.scissor.set(0,0,e,t)}clone(){return(new this.constructor).copy(this)}copy(e){this.width=e.width,this.height=e.height,this.depth=e.depth,this.viewport.copy(e.viewport),this.texture=e.texture.clone(),this.texture.isRenderTargetTexture=!0;const t=Object.assign({},e.texture.image);return this.texture.source=new t2(t),this.depthBuffer=e.depthBuffer,this.stencilBuffer=e.stencilBuffer,null!==e.depthTexture&&(this.depthTexture=e.depthTexture.clone()),this.samples=e.samples,this}dispose(){this.dispatchEvent({type:"dispose"})}}class G8 extends Hi{constructor(e=null,t=1,i=1,r=1){super(null),this.isDataArrayTexture=!0,this.image={data:e,width:t,height:i,depth:r},this.magFilter=bn,this.minFilter=bn,this.wrapR=Fn,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}class lS extends Hi{constructor(e=null,t=1,i=1,r=1){super(null),this.isData3DTexture=!0,this.image={data:e,width:t,height:i,depth:r},this.magFilter=bn,this.minFilter=bn,this.wrapR=Fn,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}class Mn{constructor(e=0,t=0,i=0,r=1){this.isQuaternion=!0,this._x=e,this._y=t,this._z=i,this._w=r}static slerpFlat(e,t,i,r,s,o,a){let c=i[r+0],l=i[r+1],u=i[r+2],f=i[r+3];const h=s[o+0],d=s[o+1],p=s[o+2],m=s[o+3];if(0===a)return e[t+0]=c,e[t+1]=l,e[t+2]=u,void(e[t+3]=f);if(1===a)return e[t+0]=h,e[t+1]=d,e[t+2]=p,void(e[t+3]=m);if(f!==m||c!==h||l!==d||u!==p){let g=1-a;const v=c*h+l*d+u*p+f*m,x=v>=0?1:-1,y=1-v*v;if(y>Number.EPSILON){const M=Math.sqrt(y),w=Math.atan2(M,v*x);g=Math.sin(g*w)/M,a=Math.sin(a*w)/M}const _=a*x;if(c=c*g+h*_,l=l*g+d*_,u=u*g+p*_,f=f*g+m*_,g===1-a){const M=1/Math.sqrt(c*c+l*l+u*u+f*f);c*=M,l*=M,u*=M,f*=M}}e[t]=c,e[t+1]=l,e[t+2]=u,e[t+3]=f}static multiplyQuaternionsFlat(e,t,i,r,s,o){const a=i[r],c=i[r+1],l=i[r+2],u=i[r+3],f=s[o],h=s[o+1],d=s[o+2],p=s[o+3];return e[t]=a*p+u*f+c*d-l*h,e[t+1]=c*p+u*h+l*f-a*d,e[t+2]=l*p+u*d+a*h-c*f,e[t+3]=u*p-a*f-c*h-l*d,e}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get w(){return this._w}set w(e){this._w=e,this._onChangeCallback()}set(e,t,i,r){return this._x=e,this._y=t,this._z=i,this._w=r,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._w)}copy(e){return this._x=e.x,this._y=e.y,this._z=e.z,this._w=e.w,this._onChangeCallback(),this}setFromEuler(e,t){const i=e._x,r=e._y,s=e._z,o=e._order,a=Math.cos,c=Math.sin,l=a(i/2),u=a(r/2),f=a(s/2),h=c(i/2),d=c(r/2),p=c(s/2);switch(o){case"XYZ":this._x=h*u*f+l*d*p,this._y=l*d*f-h*u*p,this._z=l*u*p+h*d*f,this._w=l*u*f-h*d*p;break;case"YXZ":this._x=h*u*f+l*d*p,this._y=l*d*f-h*u*p,this._z=l*u*p-h*d*f,this._w=l*u*f+h*d*p;break;case"ZXY":this._x=h*u*f-l*d*p,this._y=l*d*f+h*u*p,this._z=l*u*p+h*d*f,this._w=l*u*f-h*d*p;break;case"ZYX":this._x=h*u*f-l*d*p,this._y=l*d*f+h*u*p,this._z=l*u*p-h*d*f,this._w=l*u*f+h*d*p;break;case"YZX":this._x=h*u*f+l*d*p,this._y=l*d*f+h*u*p,this._z=l*u*p-h*d*f,this._w=l*u*f-h*d*p;break;case"XZY":this._x=h*u*f-l*d*p,this._y=l*d*f-h*u*p,this._z=l*u*p+h*d*f,this._w=l*u*f+h*d*p;break;default:console.warn("THREE.Quaternion: .setFromEuler() encountered an unknown order: "+o)}return!1!==t&&this._onChangeCallback(),this}setFromAxisAngle(e,t){const i=t/2,r=Math.sin(i);return this._x=e.x*r,this._y=e.y*r,this._z=e.z*r,this._w=Math.cos(i),this._onChangeCallback(),this}setFromRotationMatrix(e){const t=e.elements,i=t[0],r=t[4],s=t[8],o=t[1],a=t[5],c=t[9],l=t[2],u=t[6],f=t[10],h=i+a+f;if(h>0){const d=.5/Math.sqrt(h+1);this._w=.25/d,this._x=(u-c)*d,this._y=(s-l)*d,this._z=(o-r)*d}else if(i>a&&i>f){const d=2*Math.sqrt(1+i-a-f);this._w=(u-c)/d,this._x=.25*d,this._y=(r+o)/d,this._z=(s+l)/d}else if(a>f){const d=2*Math.sqrt(1+a-i-f);this._w=(s-l)/d,this._x=(r+o)/d,this._y=.25*d,this._z=(c+u)/d}else{const d=2*Math.sqrt(1+f-i-a);this._w=(o-r)/d,this._x=(s+l)/d,this._y=(c+u)/d,this._z=.25*d}return this._onChangeCallback(),this}setFromUnitVectors(e,t){let i=e.dot(t)+1;return i<Number.EPSILON?(i=0,Math.abs(e.x)>Math.abs(e.z)?(this._x=-e.y,this._y=e.x,this._z=0,this._w=i):(this._x=0,this._y=-e.z,this._z=e.y,this._w=i)):(this._x=e.y*t.z-e.z*t.y,this._y=e.z*t.x-e.x*t.z,this._z=e.x*t.y-e.y*t.x,this._w=i),this.normalize()}angleTo(e){return 2*Math.acos(Math.abs(dn(this.dot(e),-1,1)))}rotateTowards(e,t){const i=this.angleTo(e);if(0===i)return this;const r=Math.min(1,t/i);return this.slerp(e,r),this}identity(){return this.set(0,0,0,1)}invert(){return this.conjugate()}conjugate(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this}dot(e){return this._x*e._x+this._y*e._y+this._z*e._z+this._w*e._w}lengthSq(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w}length(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)}normalize(){let e=this.length();return 0===e?(this._x=0,this._y=0,this._z=0,this._w=1):(e=1/e,this._x=this._x*e,this._y=this._y*e,this._z=this._z*e,this._w=this._w*e),this._onChangeCallback(),this}multiply(e){return this.multiplyQuaternions(this,e)}premultiply(e){return this.multiplyQuaternions(e,this)}multiplyQuaternions(e,t){const i=e._x,r=e._y,s=e._z,o=e._w,a=t._x,c=t._y,l=t._z,u=t._w;return this._x=i*u+o*a+r*l-s*c,this._y=r*u+o*c+s*a-i*l,this._z=s*u+o*l+i*c-r*a,this._w=o*u-i*a-r*c-s*l,this._onChangeCallback(),this}slerp(e,t){if(0===t)return this;if(1===t)return this.copy(e);const i=this._x,r=this._y,s=this._z,o=this._w;let a=o*e._w+i*e._x+r*e._y+s*e._z;if(a<0?(this._w=-e._w,this._x=-e._x,this._y=-e._y,this._z=-e._z,a=-a):this.copy(e),a>=1)return this._w=o,this._x=i,this._y=r,this._z=s,this;const c=1-a*a;if(c<=Number.EPSILON){const d=1-t;return this._w=d*o+t*this._w,this._x=d*i+t*this._x,this._y=d*r+t*this._y,this._z=d*s+t*this._z,this.normalize(),this._onChangeCallback(),this}const l=Math.sqrt(c),u=Math.atan2(l,a),f=Math.sin((1-t)*u)/l,h=Math.sin(t*u)/l;return this._w=o*f+this._w*h,this._x=i*f+this._x*h,this._y=r*f+this._y*h,this._z=s*f+this._z*h,this._onChangeCallback(),this}slerpQuaternions(e,t,i){return this.copy(e).slerp(t,i)}random(){const e=Math.random(),t=Math.sqrt(1-e),i=Math.sqrt(e),r=2*Math.PI*Math.random(),s=2*Math.PI*Math.random();return this.set(t*Math.cos(r),i*Math.sin(s),i*Math.cos(s),t*Math.sin(r))}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._w===this._w}fromArray(e,t=0){return this._x=e[t],this._y=e[t+1],this._z=e[t+2],this._w=e[t+3],this._onChangeCallback(),this}toArray(e=[],t=0){return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._w,e}fromBufferAttribute(e,t){return this._x=e.getX(t),this._y=e.getY(t),this._z=e.getZ(t),this._w=e.getW(t),this}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._w}}class C{constructor(e=0,t=0,i=0){C.prototype.isVector3=!0,this.x=e,this.y=t,this.z=i}set(e,t,i){return void 0===i&&(i=this.z),this.x=e,this.y=t,this.z=i,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this}multiplyVectors(e,t){return this.x=e.x*t.x,this.y=e.y*t.y,this.z=e.z*t.z,this}applyEuler(e){return this.applyQuaternion(uS.setFromEuler(e))}applyAxisAngle(e,t){return this.applyQuaternion(uS.setFromAxisAngle(e,t))}applyMatrix3(e){const t=this.x,i=this.y,r=this.z,s=e.elements;return this.x=s[0]*t+s[3]*i+s[6]*r,this.y=s[1]*t+s[4]*i+s[7]*r,this.z=s[2]*t+s[5]*i+s[8]*r,this}applyNormalMatrix(e){return this.applyMatrix3(e).normalize()}applyMatrix4(e){const t=this.x,i=this.y,r=this.z,s=e.elements,o=1/(s[3]*t+s[7]*i+s[11]*r+s[15]);return this.x=(s[0]*t+s[4]*i+s[8]*r+s[12])*o,this.y=(s[1]*t+s[5]*i+s[9]*r+s[13])*o,this.z=(s[2]*t+s[6]*i+s[10]*r+s[14])*o,this}applyQuaternion(e){const t=this.x,i=this.y,r=this.z,s=e.x,o=e.y,a=e.z,c=e.w,l=c*t+o*r-a*i,u=c*i+a*t-s*r,f=c*r+s*i-o*t,h=-s*t-o*i-a*r;return this.x=l*c+h*-s+u*-a-f*-o,this.y=u*c+h*-o+f*-s-l*-a,this.z=f*c+h*-a+l*-o-u*-s,this}project(e){return this.applyMatrix4(e.matrixWorldInverse).applyMatrix4(e.projectionMatrix)}unproject(e){return this.applyMatrix4(e.projectionMatrixInverse).applyMatrix4(e.matrixWorld)}transformDirection(e){const t=this.x,i=this.y,r=this.z,s=e.elements;return this.x=s[0]*t+s[4]*i+s[8]*r,this.y=s[1]*t+s[5]*i+s[9]*r,this.z=s[2]*t+s[6]*i+s[10]*r,this.normalize()}divide(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this}divideScalar(e){return this.multiplyScalar(1/e)}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this.z=Math.max(e.z,Math.min(t.z,this.z)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this.z=Math.max(e,Math.min(t,this.z)),this}clampLength(e,t){const i=this.length();return this.divideScalar(i||1).multiplyScalar(Math.max(e,Math.min(t,i)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this}lerpVectors(e,t,i){return this.x=e.x+(t.x-e.x)*i,this.y=e.y+(t.y-e.y)*i,this.z=e.z+(t.z-e.z)*i,this}cross(e){return this.crossVectors(this,e)}crossVectors(e,t){const i=e.x,r=e.y,s=e.z,o=t.x,a=t.y,c=t.z;return this.x=r*c-s*a,this.y=s*o-i*c,this.z=i*a-r*o,this}projectOnVector(e){const t=e.lengthSq();if(0===t)return this.set(0,0,0);const i=e.dot(this)/t;return this.copy(e).multiplyScalar(i)}projectOnPlane(e){return W8.copy(this).projectOnVector(e),this.sub(W8)}reflect(e){return this.sub(W8.copy(e).multiplyScalar(2*this.dot(e)))}angleTo(e){const t=Math.sqrt(this.lengthSq()*e.lengthSq());if(0===t)return Math.PI/2;const i=this.dot(e)/t;return Math.acos(dn(i,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const t=this.x-e.x,i=this.y-e.y,r=this.z-e.z;return t*t+i*i+r*r}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)+Math.abs(this.z-e.z)}setFromSpherical(e){return this.setFromSphericalCoords(e.radius,e.phi,e.theta)}setFromSphericalCoords(e,t,i){const r=Math.sin(t)*e;return this.x=r*Math.sin(i),this.y=Math.cos(t)*e,this.z=r*Math.cos(i),this}setFromCylindrical(e){return this.setFromCylindricalCoords(e.radius,e.theta,e.y)}setFromCylindricalCoords(e,t,i){return this.x=e*Math.sin(t),this.y=i,this.z=e*Math.cos(t),this}setFromMatrixPosition(e){const t=e.elements;return this.x=t[12],this.y=t[13],this.z=t[14],this}setFromMatrixScale(e){const t=this.setFromMatrixColumn(e,0).length(),i=this.setFromMatrixColumn(e,1).length(),r=this.setFromMatrixColumn(e,2).length();return this.x=t,this.y=i,this.z=r,this}setFromMatrixColumn(e,t){return this.fromArray(e.elements,4*t)}setFromMatrix3Column(e,t){return this.fromArray(e.elements,3*t)}setFromEuler(e){return this.x=e._x,this.y=e._y,this.z=e._z,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}randomDirection(){const e=2*(Math.random()-.5),t=Math.random()*Math.PI*2,i=Math.sqrt(1-e**2);return this.x=i*Math.cos(t),this.y=i*Math.sin(t),this.z=e,this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z}}const W8=new C,uS=new Mn;class _a{constructor(e=new C(1/0,1/0,1/0),t=new C(-1/0,-1/0,-1/0)){this.isBox3=!0,this.min=e,this.max=t}set(e,t){return this.min.copy(e),this.max.copy(t),this}setFromArray(e){let t=1/0,i=1/0,r=1/0,s=-1/0,o=-1/0,a=-1/0;for(let c=0,l=e.length;c<l;c+=3){const u=e[c],f=e[c+1],h=e[c+2];u<t&&(t=u),f<i&&(i=f),h<r&&(r=h),u>s&&(s=u),f>o&&(o=f),h>a&&(a=h)}return this.min.set(t,i,r),this.max.set(s,o,a),this}setFromBufferAttribute(e){let t=1/0,i=1/0,r=1/0,s=-1/0,o=-1/0,a=-1/0;for(let c=0,l=e.count;c<l;c++){const u=e.getX(c),f=e.getY(c),h=e.getZ(c);u<t&&(t=u),f<i&&(i=f),h<r&&(r=h),u>s&&(s=u),f>o&&(o=f),h>a&&(a=h)}return this.min.set(t,i,r),this.max.set(s,o,a),this}setFromPoints(e){this.makeEmpty();for(let t=0,i=e.length;t<i;t++)this.expandByPoint(e[t]);return this}setFromCenterAndSize(e,t){const i=xa.copy(t).multiplyScalar(.5);return this.min.copy(e).sub(i),this.max.copy(e).add(i),this}setFromObject(e,t=!1){return this.makeEmpty(),this.expandByObject(e,t)}clone(){return(new this.constructor).copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z}getCenter(e){return this.isEmpty()?e.set(0,0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return this.isEmpty()?e.set(0,0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}expandByObject(e,t=!1){e.updateWorldMatrix(!1,!1);const i=e.geometry;if(void 0!==i)if(t&&null!=i.attributes&&void 0!==i.attributes.position){const s=i.attributes.position;for(let o=0,a=s.count;o<a;o++)xa.fromBufferAttribute(s,o).applyMatrix4(e.matrixWorld),this.expandByPoint(xa)}else null===i.boundingBox&&i.computeBoundingBox(),j8.copy(i.boundingBox),j8.applyMatrix4(e.matrixWorld),this.union(j8);const r=e.children;for(let s=0,o=r.length;s<o;s++)this.expandByObject(r[s],t);return this}containsPoint(e){return!(e.x<this.min.x||e.x>this.max.x||e.y<this.min.y||e.y>this.max.y||e.z<this.min.z||e.z>this.max.z)}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y&&this.min.z<=e.min.z&&e.max.z<=this.max.z}getParameter(e,t){return t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y),(e.z-this.min.z)/(this.max.z-this.min.z))}intersectsBox(e){return!(e.max.x<this.min.x||e.min.x>this.max.x||e.max.y<this.min.y||e.min.y>this.max.y||e.max.z<this.min.z||e.min.z>this.max.z)}intersectsSphere(e){return this.clampPoint(e.center,xa),xa.distanceToSquared(e.center)<=e.radius*e.radius}intersectsPlane(e){let t,i;return e.normal.x>0?(t=e.normal.x*this.min.x,i=e.normal.x*this.max.x):(t=e.normal.x*this.max.x,i=e.normal.x*this.min.x),e.normal.y>0?(t+=e.normal.y*this.min.y,i+=e.normal.y*this.max.y):(t+=e.normal.y*this.max.y,i+=e.normal.y*this.min.y),e.normal.z>0?(t+=e.normal.z*this.min.z,i+=e.normal.z*this.max.z):(t+=e.normal.z*this.max.z,i+=e.normal.z*this.min.z),t<=-e.constant&&i>=-e.constant}intersectsTriangle(e){if(this.isEmpty())return!1;this.getCenter(Hl),u0.subVectors(this.max,Hl),n2.subVectors(e.a,Hl),r2.subVectors(e.b,Hl),s2.subVectors(e.c,Hl),mo.subVectors(r2,n2),go.subVectors(s2,r2),ba.subVectors(n2,s2);let t=[0,-mo.z,mo.y,0,-go.z,go.y,0,-ba.z,ba.y,mo.z,0,-mo.x,go.z,0,-go.x,ba.z,0,-ba.x,-mo.y,mo.x,0,-go.y,go.x,0,-ba.y,ba.x,0];return!(!$8(t,n2,r2,s2,u0)||(t=[1,0,0,0,1,0,0,0,1],!$8(t,n2,r2,s2,u0)))&&(f0.crossVectors(mo,go),t=[f0.x,f0.y,f0.z],$8(t,n2,r2,s2,u0))}clampPoint(e,t){return t.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return xa.copy(e).clamp(this.min,this.max).sub(e).length()}getBoundingSphere(e){return this.getCenter(e.center),e.radius=.5*this.getSize(xa).length(),e}intersect(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}applyMatrix4(e){return this.isEmpty()||(Ls[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(e),Ls[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(e),Ls[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(e),Ls[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(e),Ls[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(e),Ls[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(e),Ls[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(e),Ls[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(e),this.setFromPoints(Ls)),this}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}const Ls=[new C,new C,new C,new C,new C,new C,new C,new C],xa=new C,j8=new _a,n2=new C,r2=new C,s2=new C,mo=new C,go=new C,ba=new C,Hl=new C,u0=new C,f0=new C,Ma=new C;function $8(n,e,t,i,r){for(let s=0,o=n.length-3;s<=o;s+=3){Ma.fromArray(n,s);const a=r.x*Math.abs(Ma.x)+r.y*Math.abs(Ma.y)+r.z*Math.abs(Ma.z),c=e.dot(Ma),l=t.dot(Ma),u=i.dot(Ma);if(Math.max(-Math.max(c,l,u),Math.min(c,l,u))>a)return!1}return!0}const Cte=new _a,Ul=new C,q8=new C;class wa{constructor(e=new C,t=-1){this.center=e,this.radius=t}set(e,t){return this.center.copy(e),this.radius=t,this}setFromPoints(e,t){const i=this.center;void 0!==t?i.copy(t):Cte.setFromPoints(e).getCenter(i);let r=0;for(let s=0,o=e.length;s<o;s++)r=Math.max(r,i.distanceToSquared(e[s]));return this.radius=Math.sqrt(r),this}copy(e){return this.center.copy(e.center),this.radius=e.radius,this}isEmpty(){return this.radius<0}makeEmpty(){return this.center.set(0,0,0),this.radius=-1,this}containsPoint(e){return e.distanceToSquared(this.center)<=this.radius*this.radius}distanceToPoint(e){return e.distanceTo(this.center)-this.radius}intersectsSphere(e){const t=this.radius+e.radius;return e.center.distanceToSquared(this.center)<=t*t}intersectsBox(e){return e.intersectsSphere(this)}intersectsPlane(e){return Math.abs(e.distanceToPoint(this.center))<=this.radius}clampPoint(e,t){const i=this.center.distanceToSquared(e);return t.copy(e),i>this.radius*this.radius&&(t.sub(this.center).normalize(),t.multiplyScalar(this.radius).add(this.center)),t}getBoundingBox(e){return this.isEmpty()?(e.makeEmpty(),e):(e.set(this.center,this.center),e.expandByScalar(this.radius),e)}applyMatrix4(e){return this.center.applyMatrix4(e),this.radius=this.radius*e.getMaxScaleOnAxis(),this}translate(e){return this.center.add(e),this}expandByPoint(e){if(this.isEmpty())return this.center.copy(e),this.radius=0,this;Ul.subVectors(e,this.center);const t=Ul.lengthSq();if(t>this.radius*this.radius){const i=Math.sqrt(t),r=.5*(i-this.radius);this.center.addScaledVector(Ul,r/i),this.radius+=r}return this}union(e){return e.isEmpty()?this:this.isEmpty()?(this.copy(e),this):(!0===this.center.equals(e.center)?this.radius=Math.max(this.radius,e.radius):(q8.subVectors(e.center,this.center).setLength(e.radius),this.expandByPoint(Ul.copy(e.center).add(q8)),this.expandByPoint(Ul.copy(e.center).sub(q8))),this)}equals(e){return e.center.equals(this.center)&&e.radius===this.radius}clone(){return(new this.constructor).copy(this)}}const Rs=new C,Z8=new C,h0=new C,vo=new C,X8=new C,d0=new C,Y8=new C;class p0{constructor(e=new C,t=new C(0,0,-1)){this.origin=e,this.direction=t}set(e,t){return this.origin.copy(e),this.direction.copy(t),this}copy(e){return this.origin.copy(e.origin),this.direction.copy(e.direction),this}at(e,t){return t.copy(this.direction).multiplyScalar(e).add(this.origin)}lookAt(e){return this.direction.copy(e).sub(this.origin).normalize(),this}recast(e){return this.origin.copy(this.at(e,Rs)),this}closestPointToPoint(e,t){t.subVectors(e,this.origin);const i=t.dot(this.direction);return i<0?t.copy(this.origin):t.copy(this.direction).multiplyScalar(i).add(this.origin)}distanceToPoint(e){return Math.sqrt(this.distanceSqToPoint(e))}distanceSqToPoint(e){const t=Rs.subVectors(e,this.origin).dot(this.direction);return t<0?this.origin.distanceToSquared(e):(Rs.copy(this.direction).multiplyScalar(t).add(this.origin),Rs.distanceToSquared(e))}distanceSqToSegment(e,t,i,r){Z8.copy(e).add(t).multiplyScalar(.5),h0.copy(t).sub(e).normalize(),vo.copy(this.origin).sub(Z8);const s=.5*e.distanceTo(t),o=-this.direction.dot(h0),a=vo.dot(this.direction),c=-vo.dot(h0),l=vo.lengthSq(),u=Math.abs(1-o*o);let f,h,d,p;if(u>0)if(f=o*c-a,h=o*a-c,p=s*u,f>=0)if(h>=-p)if(h<=p){const m=1/u;f*=m,h*=m,d=f*(f+o*h+2*a)+h*(o*f+h+2*c)+l}else h=s,f=Math.max(0,-(o*h+a)),d=-f*f+h*(h+2*c)+l;else h=-s,f=Math.max(0,-(o*h+a)),d=-f*f+h*(h+2*c)+l;else h<=-p?(f=Math.max(0,-(-o*s+a)),h=f>0?-s:Math.min(Math.max(-s,-c),s),d=-f*f+h*(h+2*c)+l):h<=p?(f=0,h=Math.min(Math.max(-s,-c),s),d=h*(h+2*c)+l):(f=Math.max(0,-(o*s+a)),h=f>0?s:Math.min(Math.max(-s,-c),s),d=-f*f+h*(h+2*c)+l);else h=o>0?-s:s,f=Math.max(0,-(o*h+a)),d=-f*f+h*(h+2*c)+l;return i&&i.copy(this.direction).multiplyScalar(f).add(this.origin),r&&r.copy(h0).multiplyScalar(h).add(Z8),d}intersectSphere(e,t){Rs.subVectors(e.center,this.origin);const i=Rs.dot(this.direction),r=Rs.dot(Rs)-i*i,s=e.radius*e.radius;if(r>s)return null;const o=Math.sqrt(s-r),a=i-o,c=i+o;return a<0&&c<0?null:this.at(a<0?c:a,t)}intersectsSphere(e){return this.distanceSqToPoint(e.center)<=e.radius*e.radius}distanceToPlane(e){const t=e.normal.dot(this.direction);if(0===t)return 0===e.distanceToPoint(this.origin)?0:null;const i=-(this.origin.dot(e.normal)+e.constant)/t;return i>=0?i:null}intersectPlane(e,t){const i=this.distanceToPlane(e);return null===i?null:this.at(i,t)}intersectsPlane(e){const t=e.distanceToPoint(this.origin);return 0===t||e.normal.dot(this.direction)*t<0}intersectBox(e,t){let i,r,s,o,a,c;const l=1/this.direction.x,u=1/this.direction.y,f=1/this.direction.z,h=this.origin;return l>=0?(i=(e.min.x-h.x)*l,r=(e.max.x-h.x)*l):(i=(e.max.x-h.x)*l,r=(e.min.x-h.x)*l),u>=0?(s=(e.min.y-h.y)*u,o=(e.max.y-h.y)*u):(s=(e.max.y-h.y)*u,o=(e.min.y-h.y)*u),i>o||s>r||((s>i||isNaN(i))&&(i=s),(o<r||isNaN(r))&&(r=o),f>=0?(a=(e.min.z-h.z)*f,c=(e.max.z-h.z)*f):(a=(e.max.z-h.z)*f,c=(e.min.z-h.z)*f),i>c||a>r)||((a>i||i!=i)&&(i=a),(c<r||r!=r)&&(r=c),r<0)?null:this.at(i>=0?i:r,t)}intersectsBox(e){return null!==this.intersectBox(e,Rs)}intersectTriangle(e,t,i,r,s){X8.subVectors(t,e),d0.subVectors(i,e),Y8.crossVectors(X8,d0);let a,o=this.direction.dot(Y8);if(o>0){if(r)return null;a=1}else{if(!(o<0))return null;a=-1,o=-o}vo.subVectors(this.origin,e);const c=a*this.direction.dot(d0.crossVectors(vo,d0));if(c<0)return null;const l=a*this.direction.dot(X8.cross(vo));if(l<0||c+l>o)return null;const u=-a*vo.dot(Y8);return u<0?null:this.at(u/o,s)}applyMatrix4(e){return this.origin.applyMatrix4(e),this.direction.transformDirection(e),this}equals(e){return e.origin.equals(this.origin)&&e.direction.equals(this.direction)}clone(){return(new this.constructor).copy(this)}}class Ce{constructor(){Ce.prototype.isMatrix4=!0,this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]}set(e,t,i,r,s,o,a,c,l,u,f,h,d,p,m,g){const v=this.elements;return v[0]=e,v[4]=t,v[8]=i,v[12]=r,v[1]=s,v[5]=o,v[9]=a,v[13]=c,v[2]=l,v[6]=u,v[10]=f,v[14]=h,v[3]=d,v[7]=p,v[11]=m,v[15]=g,this}identity(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this}clone(){return(new Ce).fromArray(this.elements)}copy(e){const t=this.elements,i=e.elements;return t[0]=i[0],t[1]=i[1],t[2]=i[2],t[3]=i[3],t[4]=i[4],t[5]=i[5],t[6]=i[6],t[7]=i[7],t[8]=i[8],t[9]=i[9],t[10]=i[10],t[11]=i[11],t[12]=i[12],t[13]=i[13],t[14]=i[14],t[15]=i[15],this}copyPosition(e){const t=this.elements,i=e.elements;return t[12]=i[12],t[13]=i[13],t[14]=i[14],this}setFromMatrix3(e){const t=e.elements;return this.set(t[0],t[3],t[6],0,t[1],t[4],t[7],0,t[2],t[5],t[8],0,0,0,0,1),this}extractBasis(e,t,i){return e.setFromMatrixColumn(this,0),t.setFromMatrixColumn(this,1),i.setFromMatrixColumn(this,2),this}makeBasis(e,t,i){return this.set(e.x,t.x,i.x,0,e.y,t.y,i.y,0,e.z,t.z,i.z,0,0,0,0,1),this}extractRotation(e){const t=this.elements,i=e.elements,r=1/o2.setFromMatrixColumn(e,0).length(),s=1/o2.setFromMatrixColumn(e,1).length(),o=1/o2.setFromMatrixColumn(e,2).length();return t[0]=i[0]*r,t[1]=i[1]*r,t[2]=i[2]*r,t[3]=0,t[4]=i[4]*s,t[5]=i[5]*s,t[6]=i[6]*s,t[7]=0,t[8]=i[8]*o,t[9]=i[9]*o,t[10]=i[10]*o,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromEuler(e){const t=this.elements,i=e.x,r=e.y,s=e.z,o=Math.cos(i),a=Math.sin(i),c=Math.cos(r),l=Math.sin(r),u=Math.cos(s),f=Math.sin(s);if("XYZ"===e.order){const h=o*u,d=o*f,p=a*u,m=a*f;t[0]=c*u,t[4]=-c*f,t[8]=l,t[1]=d+p*l,t[5]=h-m*l,t[9]=-a*c,t[2]=m-h*l,t[6]=p+d*l,t[10]=o*c}else if("YXZ"===e.order){const h=c*u,d=c*f,p=l*u,m=l*f;t[0]=h+m*a,t[4]=p*a-d,t[8]=o*l,t[1]=o*f,t[5]=o*u,t[9]=-a,t[2]=d*a-p,t[6]=m+h*a,t[10]=o*c}else if("ZXY"===e.order){const h=c*u,d=c*f,p=l*u,m=l*f;t[0]=h-m*a,t[4]=-o*f,t[8]=p+d*a,t[1]=d+p*a,t[5]=o*u,t[9]=m-h*a,t[2]=-o*l,t[6]=a,t[10]=o*c}else if("ZYX"===e.order){const h=o*u,d=o*f,p=a*u,m=a*f;t[0]=c*u,t[4]=p*l-d,t[8]=h*l+m,t[1]=c*f,t[5]=m*l+h,t[9]=d*l-p,t[2]=-l,t[6]=a*c,t[10]=o*c}else if("YZX"===e.order){const h=o*c,d=o*l,p=a*c,m=a*l;t[0]=c*u,t[4]=m-h*f,t[8]=p*f+d,t[1]=f,t[5]=o*u,t[9]=-a*u,t[2]=-l*u,t[6]=d*f+p,t[10]=h-m*f}else if("XZY"===e.order){const h=o*c,d=o*l,p=a*c,m=a*l;t[0]=c*u,t[4]=-f,t[8]=l*u,t[1]=h*f+m,t[5]=o*u,t[9]=d*f-p,t[2]=p*f-d,t[6]=a*u,t[10]=m*f+h}return t[3]=0,t[7]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromQuaternion(e){return this.compose(Ste,e,Ete)}lookAt(e,t,i){const r=this.elements;return Ui.subVectors(e,t),0===Ui.lengthSq()&&(Ui.z=1),Ui.normalize(),yo.crossVectors(i,Ui),0===yo.lengthSq()&&(1===Math.abs(i.z)?Ui.x+=1e-4:Ui.z+=1e-4,Ui.normalize(),yo.crossVectors(i,Ui)),yo.normalize(),m0.crossVectors(Ui,yo),r[0]=yo.x,r[4]=m0.x,r[8]=Ui.x,r[1]=yo.y,r[5]=m0.y,r[9]=Ui.y,r[2]=yo.z,r[6]=m0.z,r[10]=Ui.z,this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){const i=e.elements,r=t.elements,s=this.elements,o=i[0],a=i[4],c=i[8],l=i[12],u=i[1],f=i[5],h=i[9],d=i[13],p=i[2],m=i[6],g=i[10],v=i[14],x=i[3],y=i[7],_=i[11],M=i[15],w=r[0],D=r[4],b=r[8],E=r[12],I=r[1],z=r[5],U=r[9],P=r[13],L=r[2],F=r[6],H=r[10],X=r[14],B=r[3],te=r[7],Y=r[11],k=r[15];return s[0]=o*w+a*I+c*L+l*B,s[4]=o*D+a*z+c*F+l*te,s[8]=o*b+a*U+c*H+l*Y,s[12]=o*E+a*P+c*X+l*k,s[1]=u*w+f*I+h*L+d*B,s[5]=u*D+f*z+h*F+d*te,s[9]=u*b+f*U+h*H+d*Y,s[13]=u*E+f*P+h*X+d*k,s[2]=p*w+m*I+g*L+v*B,s[6]=p*D+m*z+g*F+v*te,s[10]=p*b+m*U+g*H+v*Y,s[14]=p*E+m*P+g*X+v*k,s[3]=x*w+y*I+_*L+M*B,s[7]=x*D+y*z+_*F+M*te,s[11]=x*b+y*U+_*H+M*Y,s[15]=x*E+y*P+_*X+M*k,this}multiplyScalar(e){const t=this.elements;return t[0]*=e,t[4]*=e,t[8]*=e,t[12]*=e,t[1]*=e,t[5]*=e,t[9]*=e,t[13]*=e,t[2]*=e,t[6]*=e,t[10]*=e,t[14]*=e,t[3]*=e,t[7]*=e,t[11]*=e,t[15]*=e,this}determinant(){const e=this.elements,t=e[0],i=e[4],r=e[8],s=e[12],o=e[1],a=e[5],c=e[9],l=e[13],u=e[2],f=e[6],h=e[10],d=e[14];return e[3]*(+s*c*f-r*l*f-s*a*h+i*l*h+r*a*d-i*c*d)+e[7]*(+t*c*d-t*l*h+s*o*h-r*o*d+r*l*u-s*c*u)+e[11]*(+t*l*f-t*a*d-s*o*f+i*o*d+s*a*u-i*l*u)+e[15]*(-r*a*u-t*c*f+t*a*h+r*o*f-i*o*h+i*c*u)}transpose(){const e=this.elements;let t;return t=e[1],e[1]=e[4],e[4]=t,t=e[2],e[2]=e[8],e[8]=t,t=e[6],e[6]=e[9],e[9]=t,t=e[3],e[3]=e[12],e[12]=t,t=e[7],e[7]=e[13],e[13]=t,t=e[11],e[11]=e[14],e[14]=t,this}setPosition(e,t,i){const r=this.elements;return e.isVector3?(r[12]=e.x,r[13]=e.y,r[14]=e.z):(r[12]=e,r[13]=t,r[14]=i),this}invert(){const e=this.elements,t=e[0],i=e[1],r=e[2],s=e[3],o=e[4],a=e[5],c=e[6],l=e[7],u=e[8],f=e[9],h=e[10],d=e[11],p=e[12],m=e[13],g=e[14],v=e[15],x=f*g*l-m*h*l+m*c*d-a*g*d-f*c*v+a*h*v,y=p*h*l-u*g*l-p*c*d+o*g*d+u*c*v-o*h*v,_=u*m*l-p*f*l+p*a*d-o*m*d-u*a*v+o*f*v,M=p*f*c-u*m*c-p*a*h+o*m*h+u*a*g-o*f*g,w=t*x+i*y+r*_+s*M;if(0===w)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);const D=1/w;return e[0]=x*D,e[1]=(m*h*s-f*g*s-m*r*d+i*g*d+f*r*v-i*h*v)*D,e[2]=(a*g*s-m*c*s+m*r*l-i*g*l-a*r*v+i*c*v)*D,e[3]=(f*c*s-a*h*s-f*r*l+i*h*l+a*r*d-i*c*d)*D,e[4]=y*D,e[5]=(u*g*s-p*h*s+p*r*d-t*g*d-u*r*v+t*h*v)*D,e[6]=(p*c*s-o*g*s-p*r*l+t*g*l+o*r*v-t*c*v)*D,e[7]=(o*h*s-u*c*s+u*r*l-t*h*l-o*r*d+t*c*d)*D,e[8]=_*D,e[9]=(p*f*s-u*m*s-p*i*d+t*m*d+u*i*v-t*f*v)*D,e[10]=(o*m*s-p*a*s+p*i*l-t*m*l-o*i*v+t*a*v)*D,e[11]=(u*a*s-o*f*s-u*i*l+t*f*l+o*i*d-t*a*d)*D,e[12]=M*D,e[13]=(u*m*r-p*f*r+p*i*h-t*m*h-u*i*g+t*f*g)*D,e[14]=(p*a*r-o*m*r-p*i*c+t*m*c+o*i*g-t*a*g)*D,e[15]=(o*f*r-u*a*r+u*i*c-t*f*c-o*i*h+t*a*h)*D,this}scale(e){const t=this.elements,i=e.x,r=e.y,s=e.z;return t[0]*=i,t[4]*=r,t[8]*=s,t[1]*=i,t[5]*=r,t[9]*=s,t[2]*=i,t[6]*=r,t[10]*=s,t[3]*=i,t[7]*=r,t[11]*=s,this}getMaxScaleOnAxis(){const e=this.elements;return Math.sqrt(Math.max(e[0]*e[0]+e[1]*e[1]+e[2]*e[2],e[4]*e[4]+e[5]*e[5]+e[6]*e[6],e[8]*e[8]+e[9]*e[9]+e[10]*e[10]))}makeTranslation(e,t,i){return this.set(1,0,0,e,0,1,0,t,0,0,1,i,0,0,0,1),this}makeRotationX(e){const t=Math.cos(e),i=Math.sin(e);return this.set(1,0,0,0,0,t,-i,0,0,i,t,0,0,0,0,1),this}makeRotationY(e){const t=Math.cos(e),i=Math.sin(e);return this.set(t,0,i,0,0,1,0,0,-i,0,t,0,0,0,0,1),this}makeRotationZ(e){const t=Math.cos(e),i=Math.sin(e);return this.set(t,-i,0,0,i,t,0,0,0,0,1,0,0,0,0,1),this}makeRotationAxis(e,t){const i=Math.cos(t),r=Math.sin(t),s=1-i,o=e.x,a=e.y,c=e.z,l=s*o,u=s*a;return this.set(l*o+i,l*a-r*c,l*c+r*a,0,l*a+r*c,u*a+i,u*c-r*o,0,l*c-r*a,u*c+r*o,s*c*c+i,0,0,0,0,1),this}makeScale(e,t,i){return this.set(e,0,0,0,0,t,0,0,0,0,i,0,0,0,0,1),this}makeShear(e,t,i,r,s,o){return this.set(1,i,s,0,e,1,o,0,t,r,1,0,0,0,0,1),this}compose(e,t,i){const r=this.elements,s=t._x,o=t._y,a=t._z,c=t._w,l=s+s,u=o+o,f=a+a,h=s*l,d=s*u,p=s*f,m=o*u,g=o*f,v=a*f,x=c*l,y=c*u,_=c*f,M=i.x,w=i.y,D=i.z;return r[0]=(1-(m+v))*M,r[1]=(d+_)*M,r[2]=(p-y)*M,r[3]=0,r[4]=(d-_)*w,r[5]=(1-(h+v))*w,r[6]=(g+x)*w,r[7]=0,r[8]=(p+y)*D,r[9]=(g-x)*D,r[10]=(1-(h+m))*D,r[11]=0,r[12]=e.x,r[13]=e.y,r[14]=e.z,r[15]=1,this}decompose(e,t,i){const r=this.elements;let s=o2.set(r[0],r[1],r[2]).length();const o=o2.set(r[4],r[5],r[6]).length(),a=o2.set(r[8],r[9],r[10]).length();this.determinant()<0&&(s=-s),e.x=r[12],e.y=r[13],e.z=r[14],Lr.copy(this);const l=1/s,u=1/o,f=1/a;return Lr.elements[0]*=l,Lr.elements[1]*=l,Lr.elements[2]*=l,Lr.elements[4]*=u,Lr.elements[5]*=u,Lr.elements[6]*=u,Lr.elements[8]*=f,Lr.elements[9]*=f,Lr.elements[10]*=f,t.setFromRotationMatrix(Lr),i.x=s,i.y=o,i.z=a,this}makePerspective(e,t,i,r,s,o){const a=this.elements,l=2*s/(i-r),u=(t+e)/(t-e),f=(i+r)/(i-r),h=-(o+s)/(o-s),d=-2*o*s/(o-s);return a[0]=2*s/(t-e),a[4]=0,a[8]=u,a[12]=0,a[1]=0,a[5]=l,a[9]=f,a[13]=0,a[2]=0,a[6]=0,a[10]=h,a[14]=d,a[3]=0,a[7]=0,a[11]=-1,a[15]=0,this}makeOrthographic(e,t,i,r,s,o){const a=this.elements,c=1/(t-e),l=1/(i-r),u=1/(o-s),f=(t+e)*c,h=(i+r)*l,d=(o+s)*u;return a[0]=2*c,a[4]=0,a[8]=0,a[12]=-f,a[1]=0,a[5]=2*l,a[9]=0,a[13]=-h,a[2]=0,a[6]=0,a[10]=-2*u,a[14]=-d,a[3]=0,a[7]=0,a[11]=0,a[15]=1,this}equals(e){const t=this.elements,i=e.elements;for(let r=0;r<16;r++)if(t[r]!==i[r])return!1;return!0}fromArray(e,t=0){for(let i=0;i<16;i++)this.elements[i]=e[i+t];return this}toArray(e=[],t=0){const i=this.elements;return e[t]=i[0],e[t+1]=i[1],e[t+2]=i[2],e[t+3]=i[3],e[t+4]=i[4],e[t+5]=i[5],e[t+6]=i[6],e[t+7]=i[7],e[t+8]=i[8],e[t+9]=i[9],e[t+10]=i[10],e[t+11]=i[11],e[t+12]=i[12],e[t+13]=i[13],e[t+14]=i[14],e[t+15]=i[15],e}}const o2=new C,Lr=new Ce,Ste=new C(0,0,0),Ete=new C(1,1,1),yo=new C,m0=new C,Ui=new C,fS=new Ce,hS=new Mn;let Ps=(()=>{class n{constructor(t=0,i=0,r=0,s=n.DefaultOrder){this.isEuler=!0,this._x=t,this._y=i,this._z=r,this._order=s}get x(){return this._x}set x(t){this._x=t,this._onChangeCallback()}get y(){return this._y}set y(t){this._y=t,this._onChangeCallback()}get z(){return this._z}set z(t){this._z=t,this._onChangeCallback()}get order(){return this._order}set order(t){this._order=t,this._onChangeCallback()}set(t,i,r,s=this._order){return this._x=t,this._y=i,this._z=r,this._order=s,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._order)}copy(t){return this._x=t._x,this._y=t._y,this._z=t._z,this._order=t._order,this._onChangeCallback(),this}setFromRotationMatrix(t,i=this._order,r=!0){const s=t.elements,o=s[0],a=s[4],c=s[8],l=s[1],u=s[5],f=s[9],h=s[2],d=s[6],p=s[10];switch(i){case"XYZ":this._y=Math.asin(dn(c,-1,1)),Math.abs(c)<.9999999?(this._x=Math.atan2(-f,p),this._z=Math.atan2(-a,o)):(this._x=Math.atan2(d,u),this._z=0);break;case"YXZ":this._x=Math.asin(-dn(f,-1,1)),Math.abs(f)<.9999999?(this._y=Math.atan2(c,p),this._z=Math.atan2(l,u)):(this._y=Math.atan2(-h,o),this._z=0);break;case"ZXY":this._x=Math.asin(dn(d,-1,1)),Math.abs(d)<.9999999?(this._y=Math.atan2(-h,p),this._z=Math.atan2(-a,u)):(this._y=0,this._z=Math.atan2(l,o));break;case"ZYX":this._y=Math.asin(-dn(h,-1,1)),Math.abs(h)<.9999999?(this._x=Math.atan2(d,p),this._z=Math.atan2(l,o)):(this._x=0,this._z=Math.atan2(-a,u));break;case"YZX":this._z=Math.asin(dn(l,-1,1)),Math.abs(l)<.9999999?(this._x=Math.atan2(-f,u),this._y=Math.atan2(-h,o)):(this._x=0,this._y=Math.atan2(c,p));break;case"XZY":this._z=Math.asin(-dn(a,-1,1)),Math.abs(a)<.9999999?(this._x=Math.atan2(d,u),this._y=Math.atan2(c,o)):(this._x=Math.atan2(-f,p),this._y=0);break;default:console.warn("THREE.Euler: .setFromRotationMatrix() encountered an unknown order: "+i)}return this._order=i,!0===r&&this._onChangeCallback(),this}setFromQuaternion(t,i,r){return fS.makeRotationFromQuaternion(t),this.setFromRotationMatrix(fS,i,r)}setFromVector3(t,i=this._order){return this.set(t.x,t.y,t.z,i)}reorder(t){return hS.setFromEuler(this),this.setFromQuaternion(hS,t)}equals(t){return t._x===this._x&&t._y===this._y&&t._z===this._z&&t._order===this._order}fromArray(t){return this._x=t[0],this._y=t[1],this._z=t[2],void 0!==t[3]&&(this._order=t[3]),this._onChangeCallback(),this}toArray(t=[],i=0){return t[i]=this._x,t[i+1]=this._y,t[i+2]=this._z,t[i+3]=this._order,t}_onChange(t){return this._onChangeCallback=t,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._order}toVector3(){console.error("THREE.Euler: .toVector3() has been removed. Use Vector3.setFromEuler() instead")}}return n.DefaultOrder="XYZ",n.RotationOrders=["XYZ","YZX","ZXY","XZY","YXZ","ZYX"],n})();class K8{constructor(){this.mask=1}set(e){this.mask=(1<<e|0)>>>0}enable(e){this.mask|=1<<e|0}enableAll(){this.mask=-1}toggle(e){this.mask^=1<<e|0}disable(e){this.mask&=~(1<<e|0)}disableAll(){this.mask=0}test(e){return 0!=(this.mask&e.mask)}isEnabled(e){return 0!=(this.mask&(1<<e|0))}}let Dte=0;const dS=new C,a2=new Mn,zs=new Ce,g0=new C,Bl=new C,Ate=new C,Tte=new Mn,pS=new C(1,0,0),mS=new C(0,1,0),gS=new C(0,0,1),Ite={type:"added"},vS={type:"removed"};let pn=(()=>{class n extends ma{constructor(){super(),this.isObject3D=!0,Object.defineProperty(this,"id",{value:Dte++}),this.uuid=Vi(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=n.DefaultUp.clone();const t=new C,i=new Ps,r=new Mn,s=new C(1,1,1);i._onChange(function o(){r.setFromEuler(i,!1)}),r._onChange(function a(){i.setFromQuaternion(r,void 0,!1)}),Object.defineProperties(this,{position:{configurable:!0,enumerable:!0,value:t},rotation:{configurable:!0,enumerable:!0,value:i},quaternion:{configurable:!0,enumerable:!0,value:r},scale:{configurable:!0,enumerable:!0,value:s},modelViewMatrix:{value:new Ce},normalMatrix:{value:new hi}}),this.matrix=new Ce,this.matrixWorld=new Ce,this.matrixAutoUpdate=n.DefaultMatrixAutoUpdate,this.matrixWorldNeedsUpdate=!1,this.matrixWorldAutoUpdate=n.DefaultMatrixWorldAutoUpdate,this.layers=new K8,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.animations=[],this.userData={}}onBeforeRender(){}onAfterRender(){}applyMatrix4(t){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(t),this.matrix.decompose(this.position,this.quaternion,this.scale)}applyQuaternion(t){return this.quaternion.premultiply(t),this}setRotationFromAxisAngle(t,i){this.quaternion.setFromAxisAngle(t,i)}setRotationFromEuler(t){this.quaternion.setFromEuler(t,!0)}setRotationFromMatrix(t){this.quaternion.setFromRotationMatrix(t)}setRotationFromQuaternion(t){this.quaternion.copy(t)}rotateOnAxis(t,i){return a2.setFromAxisAngle(t,i),this.quaternion.multiply(a2),this}rotateOnWorldAxis(t,i){return a2.setFromAxisAngle(t,i),this.quaternion.premultiply(a2),this}rotateX(t){return this.rotateOnAxis(pS,t)}rotateY(t){return this.rotateOnAxis(mS,t)}rotateZ(t){return this.rotateOnAxis(gS,t)}translateOnAxis(t,i){return dS.copy(t).applyQuaternion(this.quaternion),this.position.add(dS.multiplyScalar(i)),this}translateX(t){return this.translateOnAxis(pS,t)}translateY(t){return this.translateOnAxis(mS,t)}translateZ(t){return this.translateOnAxis(gS,t)}localToWorld(t){return t.applyMatrix4(this.matrixWorld)}worldToLocal(t){return t.applyMatrix4(zs.copy(this.matrixWorld).invert())}lookAt(t,i,r){t.isVector3?g0.copy(t):g0.set(t,i,r);const s=this.parent;this.updateWorldMatrix(!0,!1),Bl.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?zs.lookAt(Bl,g0,this.up):zs.lookAt(g0,Bl,this.up),this.quaternion.setFromRotationMatrix(zs),s&&(zs.extractRotation(s.matrixWorld),a2.setFromRotationMatrix(zs),this.quaternion.premultiply(a2.invert()))}add(t){if(arguments.length>1){for(let i=0;i<arguments.length;i++)this.add(arguments[i]);return this}return t===this?(console.error("THREE.Object3D.add: object can't be added as a child of itself.",t),this):(t&&t.isObject3D?(null!==t.parent&&t.parent.remove(t),t.parent=this,this.children.push(t),t.dispatchEvent(Ite)):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",t),this)}remove(t){if(arguments.length>1){for(let r=0;r<arguments.length;r++)this.remove(arguments[r]);return this}const i=this.children.indexOf(t);return-1!==i&&(t.parent=null,this.children.splice(i,1),t.dispatchEvent(vS)),this}removeFromParent(){const t=this.parent;return null!==t&&t.remove(this),this}clear(){for(let t=0;t<this.children.length;t++){const i=this.children[t];i.parent=null,i.dispatchEvent(vS)}return this.children.length=0,this}attach(t){return this.updateWorldMatrix(!0,!1),zs.copy(this.matrixWorld).invert(),null!==t.parent&&(t.parent.updateWorldMatrix(!0,!1),zs.multiply(t.parent.matrixWorld)),t.applyMatrix4(zs),this.add(t),t.updateWorldMatrix(!1,!0),this}getObjectById(t){return this.getObjectByProperty("id",t)}getObjectByName(t){return this.getObjectByProperty("name",t)}getObjectByProperty(t,i){if(this[t]===i)return this;for(let r=0,s=this.children.length;r<s;r++){const a=this.children[r].getObjectByProperty(t,i);if(void 0!==a)return a}}getWorldPosition(t){return this.updateWorldMatrix(!0,!1),t.setFromMatrixPosition(this.matrixWorld)}getWorldQuaternion(t){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(Bl,t,Ate),t}getWorldScale(t){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(Bl,Tte,t),t}getWorldDirection(t){this.updateWorldMatrix(!0,!1);const i=this.matrixWorld.elements;return t.set(i[8],i[9],i[10]).normalize()}raycast(){}traverse(t){t(this);const i=this.children;for(let r=0,s=i.length;r<s;r++)i[r].traverse(t)}traverseVisible(t){if(!1===this.visible)return;t(this);const i=this.children;for(let r=0,s=i.length;r<s;r++)i[r].traverseVisible(t)}traverseAncestors(t){const i=this.parent;null!==i&&(t(i),i.traverseAncestors(t))}updateMatrix(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0}updateMatrixWorld(t){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||t)&&(null===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),this.matrixWorldNeedsUpdate=!1,t=!0);const i=this.children;for(let r=0,s=i.length;r<s;r++){const o=i[r];(!0===o.matrixWorldAutoUpdate||!0===t)&&o.updateMatrixWorld(t)}}updateWorldMatrix(t,i){const r=this.parent;if(!0===t&&null!==r&&!0===r.matrixWorldAutoUpdate&&r.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),null===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),!0===i){const s=this.children;for(let o=0,a=s.length;o<a;o++){const c=s[o];!0===c.matrixWorldAutoUpdate&&c.updateWorldMatrix(!1,!0)}}}toJSON(t){const i=void 0===t||"string"==typeof t,r={};i&&(t={geometries:{},materials:{},textures:{},images:{},shapes:{},skeletons:{},animations:{},nodes:{}},r.metadata={version:4.5,type:"Object",generator:"Object3D.toJSON"});const s={};function o(c,l){return void 0===c[l.uuid]&&(c[l.uuid]=l.toJSON(t)),l.uuid}if(s.uuid=this.uuid,s.type=this.type,""!==this.name&&(s.name=this.name),!0===this.castShadow&&(s.castShadow=!0),!0===this.receiveShadow&&(s.receiveShadow=!0),!1===this.visible&&(s.visible=!1),!1===this.frustumCulled&&(s.frustumCulled=!1),0!==this.renderOrder&&(s.renderOrder=this.renderOrder),"{}"!==JSON.stringify(this.userData)&&(s.userData=this.userData),s.layers=this.layers.mask,s.matrix=this.matrix.toArray(),!1===this.matrixAutoUpdate&&(s.matrixAutoUpdate=!1),this.isInstancedMesh&&(s.type="InstancedMesh",s.count=this.count,s.instanceMatrix=this.instanceMatrix.toJSON(),null!==this.instanceColor&&(s.instanceColor=this.instanceColor.toJSON())),this.isScene)this.background&&(this.background.isColor?s.background=this.background.toJSON():this.background.isTexture&&(s.background=this.background.toJSON(t).uuid)),this.environment&&this.environment.isTexture&&!0!==this.environment.isRenderTargetTexture&&(s.environment=this.environment.toJSON(t).uuid);else if(this.isMesh||this.isLine||this.isPoints){s.geometry=o(t.geometries,this.geometry);const c=this.geometry.parameters;if(void 0!==c&&void 0!==c.shapes){const l=c.shapes;if(Array.isArray(l))for(let u=0,f=l.length;u<f;u++)o(t.shapes,l[u]);else o(t.shapes,l)}}if(this.isSkinnedMesh&&(s.bindMode=this.bindMode,s.bindMatrix=this.bindMatrix.toArray(),void 0!==this.skeleton&&(o(t.skeletons,this.skeleton),s.skeleton=this.skeleton.uuid)),void 0!==this.material)if(Array.isArray(this.material)){const c=[];for(let l=0,u=this.material.length;l<u;l++)c.push(o(t.materials,this.material[l]));s.material=c}else s.material=o(t.materials,this.material);if(this.children.length>0){s.children=[];for(let c=0;c<this.children.length;c++)s.children.push(this.children[c].toJSON(t).object)}if(this.animations.length>0){s.animations=[];for(let c=0;c<this.animations.length;c++)s.animations.push(o(t.animations,this.animations[c]))}if(i){const c=a(t.geometries),l=a(t.materials),u=a(t.textures),f=a(t.images),h=a(t.shapes),d=a(t.skeletons),p=a(t.animations),m=a(t.nodes);c.length>0&&(r.geometries=c),l.length>0&&(r.materials=l),u.length>0&&(r.textures=u),f.length>0&&(r.images=f),h.length>0&&(r.shapes=h),d.length>0&&(r.skeletons=d),p.length>0&&(r.animations=p),m.length>0&&(r.nodes=m)}return r.object=s,r;function a(c){const l=[];for(const u in c){const f=c[u];delete f.metadata,l.push(f)}return l}}clone(t){return(new this.constructor).copy(this,t)}copy(t,i=!0){if(this.name=t.name,this.up.copy(t.up),this.position.copy(t.position),this.rotation.order=t.rotation.order,this.quaternion.copy(t.quaternion),this.scale.copy(t.scale),this.matrix.copy(t.matrix),this.matrixWorld.copy(t.matrixWorld),this.matrixAutoUpdate=t.matrixAutoUpdate,this.matrixWorldNeedsUpdate=t.matrixWorldNeedsUpdate,this.matrixWorldAutoUpdate=t.matrixWorldAutoUpdate,this.layers.mask=t.layers.mask,this.visible=t.visible,this.castShadow=t.castShadow,this.receiveShadow=t.receiveShadow,this.frustumCulled=t.frustumCulled,this.renderOrder=t.renderOrder,this.userData=JSON.parse(JSON.stringify(t.userData)),!0===i)for(let r=0;r<t.children.length;r++)this.add(t.children[r].clone());return this}}return n.DefaultUp=new C(0,1,0),n.DefaultMatrixAutoUpdate=!0,n.DefaultMatrixWorldAutoUpdate=!0,n})();const Rr=new C,Ns=new C,J8=new C,Fs=new C,c2=new C,l2=new C,yS=new C,Q8=new C,e7=new C,t7=new C;class Pr{constructor(e=new C,t=new C,i=new C){this.a=e,this.b=t,this.c=i}static getNormal(e,t,i,r){r.subVectors(i,t),Rr.subVectors(e,t),r.cross(Rr);const s=r.lengthSq();return s>0?r.multiplyScalar(1/Math.sqrt(s)):r.set(0,0,0)}static getBarycoord(e,t,i,r,s){Rr.subVectors(r,t),Ns.subVectors(i,t),J8.subVectors(e,t);const o=Rr.dot(Rr),a=Rr.dot(Ns),c=Rr.dot(J8),l=Ns.dot(Ns),u=Ns.dot(J8),f=o*l-a*a;if(0===f)return s.set(-2,-1,-1);const h=1/f,d=(l*c-a*u)*h,p=(o*u-a*c)*h;return s.set(1-d-p,p,d)}static containsPoint(e,t,i,r){return this.getBarycoord(e,t,i,r,Fs),Fs.x>=0&&Fs.y>=0&&Fs.x+Fs.y<=1}static getUV(e,t,i,r,s,o,a,c){return this.getBarycoord(e,t,i,r,Fs),c.set(0,0),c.addScaledVector(s,Fs.x),c.addScaledVector(o,Fs.y),c.addScaledVector(a,Fs.z),c}static isFrontFacing(e,t,i,r){return Rr.subVectors(i,t),Ns.subVectors(e,t),Rr.cross(Ns).dot(r)<0}set(e,t,i){return this.a.copy(e),this.b.copy(t),this.c.copy(i),this}setFromPointsAndIndices(e,t,i,r){return this.a.copy(e[t]),this.b.copy(e[i]),this.c.copy(e[r]),this}setFromAttributeAndIndices(e,t,i,r){return this.a.fromBufferAttribute(e,t),this.b.fromBufferAttribute(e,i),this.c.fromBufferAttribute(e,r),this}clone(){return(new this.constructor).copy(this)}copy(e){return this.a.copy(e.a),this.b.copy(e.b),this.c.copy(e.c),this}getArea(){return Rr.subVectors(this.c,this.b),Ns.subVectors(this.a,this.b),.5*Rr.cross(Ns).length()}getMidpoint(e){return e.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)}getNormal(e){return Pr.getNormal(this.a,this.b,this.c,e)}getPlane(e){return e.setFromCoplanarPoints(this.a,this.b,this.c)}getBarycoord(e,t){return Pr.getBarycoord(e,this.a,this.b,this.c,t)}getUV(e,t,i,r,s){return Pr.getUV(e,this.a,this.b,this.c,t,i,r,s)}containsPoint(e){return Pr.containsPoint(e,this.a,this.b,this.c)}isFrontFacing(e){return Pr.isFrontFacing(this.a,this.b,this.c,e)}intersectsBox(e){return e.intersectsTriangle(this)}closestPointToPoint(e,t){const i=this.a,r=this.b,s=this.c;let o,a;c2.subVectors(r,i),l2.subVectors(s,i),Q8.subVectors(e,i);const c=c2.dot(Q8),l=l2.dot(Q8);if(c<=0&&l<=0)return t.copy(i);e7.subVectors(e,r);const u=c2.dot(e7),f=l2.dot(e7);if(u>=0&&f<=u)return t.copy(r);const h=c*f-u*l;if(h<=0&&c>=0&&u<=0)return o=c/(c-u),t.copy(i).addScaledVector(c2,o);t7.subVectors(e,s);const d=c2.dot(t7),p=l2.dot(t7);if(p>=0&&d<=p)return t.copy(s);const m=d*l-c*p;if(m<=0&&l>=0&&p<=0)return a=l/(l-p),t.copy(i).addScaledVector(l2,a);const g=u*p-d*f;if(g<=0&&f-u>=0&&d-p>=0)return yS.subVectors(s,r),a=(f-u)/(f-u+(d-p)),t.copy(r).addScaledVector(yS,a);const v=1/(g+m+h);return o=m*v,a=h*v,t.copy(i).addScaledVector(c2,o).addScaledVector(l2,a)}equals(e){return e.a.equals(this.a)&&e.b.equals(this.b)&&e.c.equals(this.c)}}let Lte=0;class Bi extends ma{constructor(){super(),this.isMaterial=!0,Object.defineProperty(this,"id",{value:Lte++}),this.uuid=Vi(),this.name="",this.type="Material",this.blending=1,this.side=0,this.vertexColors=!1,this.opacity=1,this.transparent=!1,this.blendSrc=204,this.blendDst=205,this.blendEquation=100,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.depthFunc=3,this.depthTest=!0,this.depthWrite=!0,this.stencilWriteMask=255,this.stencilFunc=519,this.stencilRef=0,this.stencilFuncMask=255,this.stencilFail=7680,this.stencilZFail=7680,this.stencilZPass=7680,this.stencilWrite=!1,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.shadowSide=null,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.dithering=!1,this.alphaToCoverage=!1,this.premultipliedAlpha=!1,this.visible=!0,this.toneMapped=!0,this.userData={},this.version=0,this._alphaTest=0}get alphaTest(){return this._alphaTest}set alphaTest(e){this._alphaTest>0!=e>0&&this.version++,this._alphaTest=e}onBuild(){}onBeforeRender(){}onBeforeCompile(){}customProgramCacheKey(){return this.onBeforeCompile.toString()}setValues(e){if(void 0!==e)for(const t in e){const i=e[t];if(void 0===i){console.warn("THREE.Material: '"+t+"' parameter is undefined.");continue}const r=this[t];void 0!==r?r&&r.isColor?r.set(i):r&&r.isVector3&&i&&i.isVector3?r.copy(i):this[t]=i:console.warn("THREE."+this.type+": '"+t+"' is not a property of this material.")}}toJSON(e){const t=void 0===e||"string"==typeof e;t&&(e={textures:{},images:{}});const i={metadata:{version:4.5,type:"Material",generator:"Material.toJSON"}};function r(s){const o=[];for(const a in s){const c=s[a];delete c.metadata,o.push(c)}return o}if(i.uuid=this.uuid,i.type=this.type,""!==this.name&&(i.name=this.name),this.color&&this.color.isColor&&(i.color=this.color.getHex()),void 0!==this.roughness&&(i.roughness=this.roughness),void 0!==this.metalness&&(i.metalness=this.metalness),void 0!==this.sheen&&(i.sheen=this.sheen),this.sheenColor&&this.sheenColor.isColor&&(i.sheenColor=this.sheenColor.getHex()),void 0!==this.sheenRoughness&&(i.sheenRoughness=this.sheenRoughness),this.emissive&&this.emissive.isColor&&(i.emissive=this.emissive.getHex()),this.emissiveIntensity&&1!==this.emissiveIntensity&&(i.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(i.specular=this.specular.getHex()),void 0!==this.specularIntensity&&(i.specularIntensity=this.specularIntensity),this.specularColor&&this.specularColor.isColor&&(i.specularColor=this.specularColor.getHex()),void 0!==this.shininess&&(i.shininess=this.shininess),void 0!==this.clearcoat&&(i.clearcoat=this.clearcoat),void 0!==this.clearcoatRoughness&&(i.clearcoatRoughness=this.clearcoatRoughness),this.clearcoatMap&&this.clearcoatMap.isTexture&&(i.clearcoatMap=this.clearcoatMap.toJSON(e).uuid),this.clearcoatRoughnessMap&&this.clearcoatRoughnessMap.isTexture&&(i.clearcoatRoughnessMap=this.clearcoatRoughnessMap.toJSON(e).uuid),this.clearcoatNormalMap&&this.clearcoatNormalMap.isTexture&&(i.clearcoatNormalMap=this.clearcoatNormalMap.toJSON(e).uuid,i.clearcoatNormalScale=this.clearcoatNormalScale.toArray()),void 0!==this.iridescence&&(i.iridescence=this.iridescence),void 0!==this.iridescenceIOR&&(i.iridescenceIOR=this.iridescenceIOR),void 0!==this.iridescenceThicknessRange&&(i.iridescenceThicknessRange=this.iridescenceThicknessRange),this.iridescenceMap&&this.iridescenceMap.isTexture&&(i.iridescenceMap=this.iridescenceMap.toJSON(e).uuid),this.iridescenceThicknessMap&&this.iridescenceThicknessMap.isTexture&&(i.iridescenceThicknessMap=this.iridescenceThicknessMap.toJSON(e).uuid),this.map&&this.map.isTexture&&(i.map=this.map.toJSON(e).uuid),this.matcap&&this.matcap.isTexture&&(i.matcap=this.matcap.toJSON(e).uuid),this.alphaMap&&this.alphaMap.isTexture&&(i.alphaMap=this.alphaMap.toJSON(e).uuid),this.lightMap&&this.lightMap.isTexture&&(i.lightMap=this.lightMap.toJSON(e).uuid,i.lightMapIntensity=this.lightMapIntensity),this.aoMap&&this.aoMap.isTexture&&(i.aoMap=this.aoMap.toJSON(e).uuid,i.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(i.bumpMap=this.bumpMap.toJSON(e).uuid,i.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(i.normalMap=this.normalMap.toJSON(e).uuid,i.normalMapType=this.normalMapType,i.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(i.displacementMap=this.displacementMap.toJSON(e).uuid,i.displacementScale=this.displacementScale,i.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(i.roughnessMap=this.roughnessMap.toJSON(e).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(i.metalnessMap=this.metalnessMap.toJSON(e).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(i.emissiveMap=this.emissiveMap.toJSON(e).uuid),this.specularMap&&this.specularMap.isTexture&&(i.specularMap=this.specularMap.toJSON(e).uuid),this.specularIntensityMap&&this.specularIntensityMap.isTexture&&(i.specularIntensityMap=this.specularIntensityMap.toJSON(e).uuid),this.specularColorMap&&this.specularColorMap.isTexture&&(i.specularColorMap=this.specularColorMap.toJSON(e).uuid),this.envMap&&this.envMap.isTexture&&(i.envMap=this.envMap.toJSON(e).uuid,void 0!==this.combine&&(i.combine=this.combine)),void 0!==this.envMapIntensity&&(i.envMapIntensity=this.envMapIntensity),void 0!==this.reflectivity&&(i.reflectivity=this.reflectivity),void 0!==this.refractionRatio&&(i.refractionRatio=this.refractionRatio),this.gradientMap&&this.gradientMap.isTexture&&(i.gradientMap=this.gradientMap.toJSON(e).uuid),void 0!==this.transmission&&(i.transmission=this.transmission),this.transmissionMap&&this.transmissionMap.isTexture&&(i.transmissionMap=this.transmissionMap.toJSON(e).uuid),void 0!==this.thickness&&(i.thickness=this.thickness),this.thicknessMap&&this.thicknessMap.isTexture&&(i.thicknessMap=this.thicknessMap.toJSON(e).uuid),void 0!==this.attenuationDistance&&this.attenuationDistance!==1/0&&(i.attenuationDistance=this.attenuationDistance),void 0!==this.attenuationColor&&(i.attenuationColor=this.attenuationColor.getHex()),void 0!==this.size&&(i.size=this.size),null!==this.shadowSide&&(i.shadowSide=this.shadowSide),void 0!==this.sizeAttenuation&&(i.sizeAttenuation=this.sizeAttenuation),1!==this.blending&&(i.blending=this.blending),0!==this.side&&(i.side=this.side),this.vertexColors&&(i.vertexColors=!0),this.opacity<1&&(i.opacity=this.opacity),!0===this.transparent&&(i.transparent=this.transparent),i.depthFunc=this.depthFunc,i.depthTest=this.depthTest,i.depthWrite=this.depthWrite,i.colorWrite=this.colorWrite,i.stencilWrite=this.stencilWrite,i.stencilWriteMask=this.stencilWriteMask,i.stencilFunc=this.stencilFunc,i.stencilRef=this.stencilRef,i.stencilFuncMask=this.stencilFuncMask,i.stencilFail=this.stencilFail,i.stencilZFail=this.stencilZFail,i.stencilZPass=this.stencilZPass,void 0!==this.rotation&&0!==this.rotation&&(i.rotation=this.rotation),!0===this.polygonOffset&&(i.polygonOffset=!0),0!==this.polygonOffsetFactor&&(i.polygonOffsetFactor=this.polygonOffsetFactor),0!==this.polygonOffsetUnits&&(i.polygonOffsetUnits=this.polygonOffsetUnits),void 0!==this.linewidth&&1!==this.linewidth&&(i.linewidth=this.linewidth),void 0!==this.dashSize&&(i.dashSize=this.dashSize),void 0!==this.gapSize&&(i.gapSize=this.gapSize),void 0!==this.scale&&(i.scale=this.scale),!0===this.dithering&&(i.dithering=!0),this.alphaTest>0&&(i.alphaTest=this.alphaTest),!0===this.alphaToCoverage&&(i.alphaToCoverage=this.alphaToCoverage),!0===this.premultipliedAlpha&&(i.premultipliedAlpha=this.premultipliedAlpha),!0===this.wireframe&&(i.wireframe=this.wireframe),this.wireframeLinewidth>1&&(i.wireframeLinewidth=this.wireframeLinewidth),"round"!==this.wireframeLinecap&&(i.wireframeLinecap=this.wireframeLinecap),"round"!==this.wireframeLinejoin&&(i.wireframeLinejoin=this.wireframeLinejoin),!0===this.flatShading&&(i.flatShading=this.flatShading),!1===this.visible&&(i.visible=!1),!1===this.toneMapped&&(i.toneMapped=!1),!1===this.fog&&(i.fog=!1),"{}"!==JSON.stringify(this.userData)&&(i.userData=this.userData),t){const s=r(e.textures),o=r(e.images);s.length>0&&(i.textures=s),o.length>0&&(i.images=o)}return i}clone(){return(new this.constructor).copy(this)}copy(e){this.name=e.name,this.blending=e.blending,this.side=e.side,this.vertexColors=e.vertexColors,this.opacity=e.opacity,this.transparent=e.transparent,this.blendSrc=e.blendSrc,this.blendDst=e.blendDst,this.blendEquation=e.blendEquation,this.blendSrcAlpha=e.blendSrcAlpha,this.blendDstAlpha=e.blendDstAlpha,this.blendEquationAlpha=e.blendEquationAlpha,this.depthFunc=e.depthFunc,this.depthTest=e.depthTest,this.depthWrite=e.depthWrite,this.stencilWriteMask=e.stencilWriteMask,this.stencilFunc=e.stencilFunc,this.stencilRef=e.stencilRef,this.stencilFuncMask=e.stencilFuncMask,this.stencilFail=e.stencilFail,this.stencilZFail=e.stencilZFail,this.stencilZPass=e.stencilZPass,this.stencilWrite=e.stencilWrite;const t=e.clippingPlanes;let i=null;if(null!==t){const r=t.length;i=new Array(r);for(let s=0;s!==r;++s)i[s]=t[s].clone()}return this.clippingPlanes=i,this.clipIntersection=e.clipIntersection,this.clipShadows=e.clipShadows,this.shadowSide=e.shadowSide,this.colorWrite=e.colorWrite,this.precision=e.precision,this.polygonOffset=e.polygonOffset,this.polygonOffsetFactor=e.polygonOffsetFactor,this.polygonOffsetUnits=e.polygonOffsetUnits,this.dithering=e.dithering,this.alphaTest=e.alphaTest,this.alphaToCoverage=e.alphaToCoverage,this.premultipliedAlpha=e.premultipliedAlpha,this.visible=e.visible,this.toneMapped=e.toneMapped,this.userData=JSON.parse(JSON.stringify(e.userData)),this}dispose(){this.dispatchEvent({type:"dispose"})}set needsUpdate(e){!0===e&&this.version++}}class pi extends Bi{constructor(e){super(),this.isMeshBasicMaterial=!0,this.type="MeshBasicMaterial",this.color=new ae(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=0,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.fog=e.fog,this}}const wn=new C,v0=new q;class Vt{constructor(e,t,i){if(Array.isArray(e))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.isBufferAttribute=!0,this.name="",this.array=e,this.itemSize=t,this.count=void 0!==e?e.length/t:0,this.normalized=!0===i,this.usage=35044,this.updateRange={offset:0,count:-1},this.version=0}onUploadCallback(){}set needsUpdate(e){!0===e&&this.version++}setUsage(e){return this.usage=e,this}copy(e){return this.name=e.name,this.array=new e.array.constructor(e.array),this.itemSize=e.itemSize,this.count=e.count,this.normalized=e.normalized,this.usage=e.usage,this}copyAt(e,t,i){e*=this.itemSize,i*=t.itemSize;for(let r=0,s=this.itemSize;r<s;r++)this.array[e+r]=t.array[i+r];return this}copyArray(e){return this.array.set(e),this}applyMatrix3(e){if(2===this.itemSize)for(let t=0,i=this.count;t<i;t++)v0.fromBufferAttribute(this,t),v0.applyMatrix3(e),this.setXY(t,v0.x,v0.y);else if(3===this.itemSize)for(let t=0,i=this.count;t<i;t++)wn.fromBufferAttribute(this,t),wn.applyMatrix3(e),this.setXYZ(t,wn.x,wn.y,wn.z);return this}applyMatrix4(e){for(let t=0,i=this.count;t<i;t++)wn.fromBufferAttribute(this,t),wn.applyMatrix4(e),this.setXYZ(t,wn.x,wn.y,wn.z);return this}applyNormalMatrix(e){for(let t=0,i=this.count;t<i;t++)wn.fromBufferAttribute(this,t),wn.applyNormalMatrix(e),this.setXYZ(t,wn.x,wn.y,wn.z);return this}transformDirection(e){for(let t=0,i=this.count;t<i;t++)wn.fromBufferAttribute(this,t),wn.transformDirection(e),this.setXYZ(t,wn.x,wn.y,wn.z);return this}set(e,t=0){return this.array.set(e,t),this}getX(e){let t=this.array[e*this.itemSize];return this.normalized&&(t=Is(t,this.array)),t}setX(e,t){return this.normalized&&(t=Nt(t,this.array)),this.array[e*this.itemSize]=t,this}getY(e){let t=this.array[e*this.itemSize+1];return this.normalized&&(t=Is(t,this.array)),t}setY(e,t){return this.normalized&&(t=Nt(t,this.array)),this.array[e*this.itemSize+1]=t,this}getZ(e){let t=this.array[e*this.itemSize+2];return this.normalized&&(t=Is(t,this.array)),t}setZ(e,t){return this.normalized&&(t=Nt(t,this.array)),this.array[e*this.itemSize+2]=t,this}getW(e){let t=this.array[e*this.itemSize+3];return this.normalized&&(t=Is(t,this.array)),t}setW(e,t){return this.normalized&&(t=Nt(t,this.array)),this.array[e*this.itemSize+3]=t,this}setXY(e,t,i){return e*=this.itemSize,this.normalized&&(t=Nt(t,this.array),i=Nt(i,this.array)),this.array[e+0]=t,this.array[e+1]=i,this}setXYZ(e,t,i,r){return e*=this.itemSize,this.normalized&&(t=Nt(t,this.array),i=Nt(i,this.array),r=Nt(r,this.array)),this.array[e+0]=t,this.array[e+1]=i,this.array[e+2]=r,this}setXYZW(e,t,i,r,s){return e*=this.itemSize,this.normalized&&(t=Nt(t,this.array),i=Nt(i,this.array),r=Nt(r,this.array),s=Nt(s,this.array)),this.array[e+0]=t,this.array[e+1]=i,this.array[e+2]=r,this.array[e+3]=s,this}onUpload(e){return this.onUploadCallback=e,this}clone(){return new this.constructor(this.array,this.itemSize).copy(this)}toJSON(){const e={itemSize:this.itemSize,type:this.array.constructor.name,array:Array.from(this.array),normalized:this.normalized};return""!==this.name&&(e.name=this.name),35044!==this.usage&&(e.usage=this.usage),(0!==this.updateRange.offset||-1!==this.updateRange.count)&&(e.updateRange=this.updateRange),e}copyColorsArray(){console.error("THREE.BufferAttribute: copyColorsArray() was removed in r144.")}copyVector2sArray(){console.error("THREE.BufferAttribute: copyVector2sArray() was removed in r144.")}copyVector3sArray(){console.error("THREE.BufferAttribute: copyVector3sArray() was removed in r144.")}copyVector4sArray(){console.error("THREE.BufferAttribute: copyVector4sArray() was removed in r144.")}}class n7 extends Vt{constructor(e,t,i){super(new Uint16Array(e),t,i)}}class _S extends Vt{constructor(e,t,i){super(new Uint32Array(e),t,i)}}class Me extends Vt{constructor(e,t,i){super(new Float32Array(e),t,i)}}let Rte=0;const rr=new Ce,i7=new pn,u2=new C,Gi=new _a,Gl=new _a,On=new C;class Ze extends ma{constructor(){super(),this.isBufferGeometry=!0,Object.defineProperty(this,"id",{value:Rte++}),this.uuid=Vi(),this.name="",this.type="BufferGeometry",this.index=null,this.attributes={},this.morphAttributes={},this.morphTargetsRelative=!1,this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0},this.userData={}}getIndex(){return this.index}setIndex(e){return this.index=Array.isArray(e)?new(oS(e)?_S:n7)(e,1):e,this}getAttribute(e){return this.attributes[e]}setAttribute(e,t){return this.attributes[e]=t,this}deleteAttribute(e){return delete this.attributes[e],this}hasAttribute(e){return void 0!==this.attributes[e]}addGroup(e,t,i=0){this.groups.push({start:e,count:t,materialIndex:i})}clearGroups(){this.groups=[]}setDrawRange(e,t){this.drawRange.start=e,this.drawRange.count=t}applyMatrix4(e){const t=this.attributes.position;void 0!==t&&(t.applyMatrix4(e),t.needsUpdate=!0);const i=this.attributes.normal;if(void 0!==i){const s=(new hi).getNormalMatrix(e);i.applyNormalMatrix(s),i.needsUpdate=!0}const r=this.attributes.tangent;return void 0!==r&&(r.transformDirection(e),r.needsUpdate=!0),null!==this.boundingBox&&this.computeBoundingBox(),null!==this.boundingSphere&&this.computeBoundingSphere(),this}applyQuaternion(e){return rr.makeRotationFromQuaternion(e),this.applyMatrix4(rr),this}rotateX(e){return rr.makeRotationX(e),this.applyMatrix4(rr),this}rotateY(e){return rr.makeRotationY(e),this.applyMatrix4(rr),this}rotateZ(e){return rr.makeRotationZ(e),this.applyMatrix4(rr),this}translate(e,t,i){return rr.makeTranslation(e,t,i),this.applyMatrix4(rr),this}scale(e,t,i){return rr.makeScale(e,t,i),this.applyMatrix4(rr),this}lookAt(e){return i7.lookAt(e),i7.updateMatrix(),this.applyMatrix4(i7.matrix),this}center(){return this.computeBoundingBox(),this.boundingBox.getCenter(u2).negate(),this.translate(u2.x,u2.y,u2.z),this}setFromPoints(e){const t=[];for(let i=0,r=e.length;i<r;i++){const s=e[i];t.push(s.x,s.y,s.z||0)}return this.setAttribute("position",new Me(t,3)),this}computeBoundingBox(){null===this.boundingBox&&(this.boundingBox=new _a);const e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute)return console.error('THREE.BufferGeometry.computeBoundingBox(): GLBufferAttribute requires a manual bounding box. Alternatively set "mesh.frustumCulled" to "false".',this),void this.boundingBox.set(new C(-1/0,-1/0,-1/0),new C(1/0,1/0,1/0));if(void 0!==e){if(this.boundingBox.setFromBufferAttribute(e),t)for(let i=0,r=t.length;i<r;i++)Gi.setFromBufferAttribute(t[i]),this.morphTargetsRelative?(On.addVectors(this.boundingBox.min,Gi.min),this.boundingBox.expandByPoint(On),On.addVectors(this.boundingBox.max,Gi.max),this.boundingBox.expandByPoint(On)):(this.boundingBox.expandByPoint(Gi.min),this.boundingBox.expandByPoint(Gi.max))}else this.boundingBox.makeEmpty();(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox(): Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)}computeBoundingSphere(){null===this.boundingSphere&&(this.boundingSphere=new wa);const e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute)return console.error('THREE.BufferGeometry.computeBoundingSphere(): GLBufferAttribute requires a manual bounding sphere. Alternatively set "mesh.frustumCulled" to "false".',this),void this.boundingSphere.set(new C,1/0);if(e){const i=this.boundingSphere.center;if(Gi.setFromBufferAttribute(e),t)for(let s=0,o=t.length;s<o;s++)Gl.setFromBufferAttribute(t[s]),this.morphTargetsRelative?(On.addVectors(Gi.min,Gl.min),Gi.expandByPoint(On),On.addVectors(Gi.max,Gl.max),Gi.expandByPoint(On)):(Gi.expandByPoint(Gl.min),Gi.expandByPoint(Gl.max));Gi.getCenter(i);let r=0;for(let s=0,o=e.count;s<o;s++)On.fromBufferAttribute(e,s),r=Math.max(r,i.distanceToSquared(On));if(t)for(let s=0,o=t.length;s<o;s++){const a=t[s],c=this.morphTargetsRelative;for(let l=0,u=a.count;l<u;l++)On.fromBufferAttribute(a,l),c&&(u2.fromBufferAttribute(e,l),On.add(u2)),r=Math.max(r,i.distanceToSquared(On))}this.boundingSphere.radius=Math.sqrt(r),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}}computeTangents(){const e=this.index,t=this.attributes;if(null===e||void 0===t.position||void 0===t.normal||void 0===t.uv)return void console.error("THREE.BufferGeometry: .computeTangents() failed. Missing required attributes (index, position, normal or uv)");const i=e.array,r=t.position.array,s=t.normal.array,o=t.uv.array,a=r.length/3;!1===this.hasAttribute("tangent")&&this.setAttribute("tangent",new Vt(new Float32Array(4*a),4));const c=this.getAttribute("tangent").array,l=[],u=[];for(let I=0;I<a;I++)l[I]=new C,u[I]=new C;const f=new C,h=new C,d=new C,p=new q,m=new q,g=new q,v=new C,x=new C;function y(I,z,U){f.fromArray(r,3*I),h.fromArray(r,3*z),d.fromArray(r,3*U),p.fromArray(o,2*I),m.fromArray(o,2*z),g.fromArray(o,2*U),h.sub(f),d.sub(f),m.sub(p),g.sub(p);const P=1/(m.x*g.y-g.x*m.y);!isFinite(P)||(v.copy(h).multiplyScalar(g.y).addScaledVector(d,-m.y).multiplyScalar(P),x.copy(d).multiplyScalar(m.x).addScaledVector(h,-g.x).multiplyScalar(P),l[I].add(v),l[z].add(v),l[U].add(v),u[I].add(x),u[z].add(x),u[U].add(x))}let _=this.groups;0===_.length&&(_=[{start:0,count:i.length}]);for(let I=0,z=_.length;I<z;++I){const U=_[I],P=U.start;for(let F=P,H=P+U.count;F<H;F+=3)y(i[F+0],i[F+1],i[F+2])}const M=new C,w=new C,D=new C,b=new C;function E(I){D.fromArray(s,3*I),b.copy(D);const z=l[I];M.copy(z),M.sub(D.multiplyScalar(D.dot(z))).normalize(),w.crossVectors(b,z);const P=w.dot(u[I])<0?-1:1;c[4*I]=M.x,c[4*I+1]=M.y,c[4*I+2]=M.z,c[4*I+3]=P}for(let I=0,z=_.length;I<z;++I){const U=_[I],P=U.start;for(let F=P,H=P+U.count;F<H;F+=3)E(i[F+0]),E(i[F+1]),E(i[F+2])}}computeVertexNormals(){const e=this.index,t=this.getAttribute("position");if(void 0!==t){let i=this.getAttribute("normal");if(void 0===i)i=new Vt(new Float32Array(3*t.count),3),this.setAttribute("normal",i);else for(let h=0,d=i.count;h<d;h++)i.setXYZ(h,0,0,0);const r=new C,s=new C,o=new C,a=new C,c=new C,l=new C,u=new C,f=new C;if(e)for(let h=0,d=e.count;h<d;h+=3){const p=e.getX(h+0),m=e.getX(h+1),g=e.getX(h+2);r.fromBufferAttribute(t,p),s.fromBufferAttribute(t,m),o.fromBufferAttribute(t,g),u.subVectors(o,s),f.subVectors(r,s),u.cross(f),a.fromBufferAttribute(i,p),c.fromBufferAttribute(i,m),l.fromBufferAttribute(i,g),a.add(u),c.add(u),l.add(u),i.setXYZ(p,a.x,a.y,a.z),i.setXYZ(m,c.x,c.y,c.z),i.setXYZ(g,l.x,l.y,l.z)}else for(let h=0,d=t.count;h<d;h+=3)r.fromBufferAttribute(t,h+0),s.fromBufferAttribute(t,h+1),o.fromBufferAttribute(t,h+2),u.subVectors(o,s),f.subVectors(r,s),u.cross(f),i.setXYZ(h+0,u.x,u.y,u.z),i.setXYZ(h+1,u.x,u.y,u.z),i.setXYZ(h+2,u.x,u.y,u.z);this.normalizeNormals(),i.needsUpdate=!0}}merge(){return console.error("THREE.BufferGeometry.merge() has been removed. Use THREE.BufferGeometryUtils.mergeBufferGeometries() instead."),this}normalizeNormals(){const e=this.attributes.normal;for(let t=0,i=e.count;t<i;t++)On.fromBufferAttribute(e,t),On.normalize(),e.setXYZ(t,On.x,On.y,On.z)}toNonIndexed(){function e(a,c){const l=a.array,u=a.itemSize,f=a.normalized,h=new l.constructor(c.length*u);let d=0,p=0;for(let m=0,g=c.length;m<g;m++){d=a.isInterleavedBufferAttribute?c[m]*a.data.stride+a.offset:c[m]*u;for(let v=0;v<u;v++)h[p++]=l[d++]}return new Vt(h,u,f)}if(null===this.index)return console.warn("THREE.BufferGeometry.toNonIndexed(): BufferGeometry is already non-indexed."),this;const t=new Ze,i=this.index.array,r=this.attributes;for(const a in r){const l=e(r[a],i);t.setAttribute(a,l)}const s=this.morphAttributes;for(const a in s){const c=[],l=s[a];for(let u=0,f=l.length;u<f;u++){const d=e(l[u],i);c.push(d)}t.morphAttributes[a]=c}t.morphTargetsRelative=this.morphTargetsRelative;const o=this.groups;for(let a=0,c=o.length;a<c;a++){const l=o[a];t.addGroup(l.start,l.count,l.materialIndex)}return t}toJSON(){const e={metadata:{version:4.5,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(e.uuid=this.uuid,e.type=this.type,""!==this.name&&(e.name=this.name),Object.keys(this.userData).length>0&&(e.userData=this.userData),void 0!==this.parameters){const c=this.parameters;for(const l in c)void 0!==c[l]&&(e[l]=c[l]);return e}e.data={attributes:{}};const t=this.index;null!==t&&(e.data.index={type:t.array.constructor.name,array:Array.prototype.slice.call(t.array)});const i=this.attributes;for(const c in i)e.data.attributes[c]=i[c].toJSON(e.data);const r={};let s=!1;for(const c in this.morphAttributes){const l=this.morphAttributes[c],u=[];for(let f=0,h=l.length;f<h;f++)u.push(l[f].toJSON(e.data));u.length>0&&(r[c]=u,s=!0)}s&&(e.data.morphAttributes=r,e.data.morphTargetsRelative=this.morphTargetsRelative);const o=this.groups;o.length>0&&(e.data.groups=JSON.parse(JSON.stringify(o)));const a=this.boundingSphere;return null!==a&&(e.data.boundingSphere={center:a.center.toArray(),radius:a.radius}),e}clone(){return(new this.constructor).copy(this)}copy(e){this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null;const t={};this.name=e.name;const i=e.index;null!==i&&this.setIndex(i.clone(t));const r=e.attributes;for(const l in r)this.setAttribute(l,r[l].clone(t));const s=e.morphAttributes;for(const l in s){const u=[],f=s[l];for(let h=0,d=f.length;h<d;h++)u.push(f[h].clone(t));this.morphAttributes[l]=u}this.morphTargetsRelative=e.morphTargetsRelative;const o=e.groups;for(let l=0,u=o.length;l<u;l++){const f=o[l];this.addGroup(f.start,f.count,f.materialIndex)}const a=e.boundingBox;null!==a&&(this.boundingBox=a.clone());const c=e.boundingSphere;return null!==c&&(this.boundingSphere=c.clone()),this.drawRange.start=e.drawRange.start,this.drawRange.count=e.drawRange.count,this.userData=e.userData,void 0!==e.parameters&&(this.parameters=Object.assign({},e.parameters)),this}dispose(){this.dispatchEvent({type:"dispose"})}}const xS=new Ce,f2=new p0,r7=new wa,_o=new C,xo=new C,bo=new C,s7=new C,o7=new C,a7=new C,y0=new C,_0=new C,x0=new C,b0=new q,M0=new q,w0=new q,c7=new C,C0=new C;class an extends pn{constructor(e=new Ze,t=new pi){super(),this.isMesh=!0,this.type="Mesh",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),void 0!==e.morphTargetInfluences&&(this.morphTargetInfluences=e.morphTargetInfluences.slice()),void 0!==e.morphTargetDictionary&&(this.morphTargetDictionary=Object.assign({},e.morphTargetDictionary)),this.material=e.material,this.geometry=e.geometry,this}updateMorphTargets(){const t=this.geometry.morphAttributes,i=Object.keys(t);if(i.length>0){const r=t[i[0]];if(void 0!==r){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let s=0,o=r.length;s<o;s++){const a=r[s].name||String(s);this.morphTargetInfluences.push(0),this.morphTargetDictionary[a]=s}}}}raycast(e,t){const i=this.geometry,r=this.material,s=this.matrixWorld;if(void 0===r||(null===i.boundingSphere&&i.computeBoundingSphere(),r7.copy(i.boundingSphere),r7.applyMatrix4(s),!1===e.ray.intersectsSphere(r7))||(xS.copy(s).invert(),f2.copy(e.ray).applyMatrix4(xS),null!==i.boundingBox&&!1===f2.intersectsBox(i.boundingBox)))return;let o;const a=i.index,c=i.attributes.position,l=i.morphAttributes.position,u=i.morphTargetsRelative,f=i.attributes.uv,h=i.attributes.uv2,d=i.groups,p=i.drawRange;if(null!==a)if(Array.isArray(r))for(let m=0,g=d.length;m<g;m++){const v=d[m],x=r[v.materialIndex];for(let M=Math.max(v.start,p.start),w=Math.min(a.count,Math.min(v.start+v.count,p.start+p.count));M<w;M+=3){const D=a.getX(M),b=a.getX(M+1),E=a.getX(M+2);o=S0(this,x,e,f2,c,l,u,f,h,D,b,E),o&&(o.faceIndex=Math.floor(M/3),o.face.materialIndex=v.materialIndex,t.push(o))}}else for(let v=Math.max(0,p.start),x=Math.min(a.count,p.start+p.count);v<x;v+=3){const y=a.getX(v),_=a.getX(v+1),M=a.getX(v+2);o=S0(this,r,e,f2,c,l,u,f,h,y,_,M),o&&(o.faceIndex=Math.floor(v/3),t.push(o))}else if(void 0!==c)if(Array.isArray(r))for(let m=0,g=d.length;m<g;m++){const v=d[m],x=r[v.materialIndex];for(let M=Math.max(v.start,p.start),w=Math.min(c.count,Math.min(v.start+v.count,p.start+p.count));M<w;M+=3)o=S0(this,x,e,f2,c,l,u,f,h,M,M+1,M+2),o&&(o.faceIndex=Math.floor(M/3),o.face.materialIndex=v.materialIndex,t.push(o))}else for(let v=Math.max(0,p.start),x=Math.min(c.count,p.start+p.count);v<x;v+=3)o=S0(this,r,e,f2,c,l,u,f,h,v,v+1,v+2),o&&(o.faceIndex=Math.floor(v/3),t.push(o))}}function S0(n,e,t,i,r,s,o,a,c,l,u,f){_o.fromBufferAttribute(r,l),xo.fromBufferAttribute(r,u),bo.fromBufferAttribute(r,f);const h=n.morphTargetInfluences;if(s&&h){y0.set(0,0,0),_0.set(0,0,0),x0.set(0,0,0);for(let p=0,m=s.length;p<m;p++){const g=h[p],v=s[p];0!==g&&(s7.fromBufferAttribute(v,l),o7.fromBufferAttribute(v,u),a7.fromBufferAttribute(v,f),o?(y0.addScaledVector(s7,g),_0.addScaledVector(o7,g),x0.addScaledVector(a7,g)):(y0.addScaledVector(s7.sub(_o),g),_0.addScaledVector(o7.sub(xo),g),x0.addScaledVector(a7.sub(bo),g)))}_o.add(y0),xo.add(_0),bo.add(x0)}n.isSkinnedMesh&&(n.boneTransform(l,_o),n.boneTransform(u,xo),n.boneTransform(f,bo));const d=function Pte(n,e,t,i,r,s,o,a){let c;if(c=1===e.side?i.intersectTriangle(o,s,r,!0,a):i.intersectTriangle(r,s,o,2!==e.side,a),null===c)return null;C0.copy(a),C0.applyMatrix4(n.matrixWorld);const l=t.ray.origin.distanceTo(C0);return l<t.near||l>t.far?null:{distance:l,point:C0.clone(),object:n}}(n,e,t,i,_o,xo,bo,c7);if(d){a&&(b0.fromBufferAttribute(a,l),M0.fromBufferAttribute(a,u),w0.fromBufferAttribute(a,f),d.uv=Pr.getUV(c7,_o,xo,bo,b0,M0,w0,new q)),c&&(b0.fromBufferAttribute(c,l),M0.fromBufferAttribute(c,u),w0.fromBufferAttribute(c,f),d.uv2=Pr.getUV(c7,_o,xo,bo,b0,M0,w0,new q));const p={a:l,b:u,c:f,normal:new C,materialIndex:0};Pr.getNormal(_o,xo,bo,p.normal),d.face=p}return d}class Ca extends Ze{constructor(e=1,t=1,i=1,r=1,s=1,o=1){super(),this.type="BoxGeometry",this.parameters={width:e,height:t,depth:i,widthSegments:r,heightSegments:s,depthSegments:o};const a=this;r=Math.floor(r),s=Math.floor(s),o=Math.floor(o);const c=[],l=[],u=[],f=[];let h=0,d=0;function p(m,g,v,x,y,_,M,w,D,b,E){const I=_/D,z=M/b,U=_/2,P=M/2,L=w/2,F=D+1,H=b+1;let X=0,B=0;const te=new C;for(let Y=0;Y<H;Y++){const k=Y*z-P;for(let V=0;V<F;V++)te[m]=(V*I-U)*x,te[g]=k*y,te[v]=L,l.push(te.x,te.y,te.z),te[m]=0,te[g]=0,te[v]=w>0?1:-1,u.push(te.x,te.y,te.z),f.push(V/D),f.push(1-Y/b),X+=1}for(let Y=0;Y<b;Y++)for(let k=0;k<D;k++){const ie=h+k+F*(Y+1),ne=h+(k+1)+F*(Y+1),se=h+(k+1)+F*Y;c.push(h+k+F*Y,ie,se),c.push(ie,ne,se),B+=6}a.addGroup(d,B,E),d+=B,h+=X}p("z","y","x",-1,-1,i,t,e,o,s,0),p("z","y","x",1,-1,i,t,-e,o,s,1),p("x","z","y",1,1,e,i,t,r,o,2),p("x","z","y",1,-1,e,i,-t,r,o,3),p("x","y","z",1,-1,e,t,i,r,s,4),p("x","y","z",-1,-1,e,t,-i,r,s,5),this.setIndex(c),this.setAttribute("position",new Me(l,3)),this.setAttribute("normal",new Me(u,3)),this.setAttribute("uv",new Me(f,2))}static fromJSON(e){return new Ca(e.width,e.height,e.depth,e.widthSegments,e.heightSegments,e.depthSegments)}}function h2(n){const e={};for(const t in n){e[t]={};for(const i in n[t]){const r=n[t][i];e[t][i]=r&&(r.isColor||r.isMatrix3||r.isMatrix4||r.isVector2||r.isVector3||r.isVector4||r.isTexture||r.isQuaternion)?r.clone():Array.isArray(r)?r.slice():r}}return e}function mi(n){const e={};for(let t=0;t<n.length;t++){const i=h2(n[t]);for(const r in i)e[r]=i[r]}return e}function bS(n){return null===n.getRenderTarget()&&n.outputEncoding===bt?Kr:Fl}const Nte={clone:h2,merge:mi};class Wi extends Bi{constructor(e){super(),this.isShaderMaterial=!0,this.type="ShaderMaterial",this.defines={},this.uniforms={},this.uniformsGroups=[],this.vertexShader="void main() {\n\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n}",this.fragmentShader="void main() {\n\tgl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );\n}",this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.clipping=!1,this.extensions={derivatives:!1,fragDepth:!1,drawBuffers:!1,shaderTextureLOD:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv2:[0,0]},this.index0AttributeName=void 0,this.uniformsNeedUpdate=!1,this.glslVersion=null,void 0!==e&&this.setValues(e)}copy(e){return super.copy(e),this.fragmentShader=e.fragmentShader,this.vertexShader=e.vertexShader,this.uniforms=h2(e.uniforms),this.uniformsGroups=function zte(n){const e=[];for(let t=0;t<n.length;t++)e.push(n[t].clone());return e}(e.uniformsGroups),this.defines=Object.assign({},e.defines),this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.fog=e.fog,this.lights=e.lights,this.clipping=e.clipping,this.extensions=Object.assign({},e.extensions),this.glslVersion=e.glslVersion,this}toJSON(e){const t=super.toJSON(e);t.glslVersion=this.glslVersion,t.uniforms={};for(const r in this.uniforms){const o=this.uniforms[r].value;t.uniforms[r]=o&&o.isTexture?{type:"t",value:o.toJSON(e).uuid}:o&&o.isColor?{type:"c",value:o.getHex()}:o&&o.isVector2?{type:"v2",value:o.toArray()}:o&&o.isVector3?{type:"v3",value:o.toArray()}:o&&o.isVector4?{type:"v4",value:o.toArray()}:o&&o.isMatrix3?{type:"m3",value:o.toArray()}:o&&o.isMatrix4?{type:"m4",value:o.toArray()}:{value:o}}Object.keys(this.defines).length>0&&(t.defines=this.defines),t.vertexShader=this.vertexShader,t.fragmentShader=this.fragmentShader;const i={};for(const r in this.extensions)!0===this.extensions[r]&&(i[r]=!0);return Object.keys(i).length>0&&(t.extensions=i),t}}class l7 extends pn{constructor(){super(),this.isCamera=!0,this.type="Camera",this.matrixWorldInverse=new Ce,this.projectionMatrix=new Ce,this.projectionMatrixInverse=new Ce}copy(e,t){return super.copy(e,t),this.matrixWorldInverse.copy(e.matrixWorldInverse),this.projectionMatrix.copy(e.projectionMatrix),this.projectionMatrixInverse.copy(e.projectionMatrixInverse),this}getWorldDirection(e){this.updateWorldMatrix(!0,!1);const t=this.matrixWorld.elements;return e.set(-t[8],-t[9],-t[10]).normalize()}updateMatrixWorld(e){super.updateMatrixWorld(e),this.matrixWorldInverse.copy(this.matrixWorld).invert()}updateWorldMatrix(e,t){super.updateWorldMatrix(e,t),this.matrixWorldInverse.copy(this.matrixWorld).invert()}clone(){return(new this.constructor).copy(this)}}class Pn extends l7{constructor(e=50,t=1,i=.1,r=2e3){super(),this.isPerspectiveCamera=!0,this.type="PerspectiveCamera",this.fov=e,this.zoom=1,this.near=i,this.far=r,this.focus=10,this.aspect=t,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}copy(e,t){return super.copy(e,t),this.fov=e.fov,this.zoom=e.zoom,this.near=e.near,this.far=e.far,this.focus=e.focus,this.aspect=e.aspect,this.view=null===e.view?null:Object.assign({},e.view),this.filmGauge=e.filmGauge,this.filmOffset=e.filmOffset,this}setFocalLength(e){const t=.5*this.getFilmHeight()/e;this.fov=2*Ol*Math.atan(t),this.updateProjectionMatrix()}getFocalLength(){const e=Math.tan(.5*ga*this.fov);return.5*this.getFilmHeight()/e}getEffectiveFOV(){return 2*Ol*Math.atan(Math.tan(.5*ga*this.fov)/this.zoom)}getFilmWidth(){return this.filmGauge*Math.min(this.aspect,1)}getFilmHeight(){return this.filmGauge/Math.max(this.aspect,1)}setViewOffset(e,t,i,r,s,o){this.aspect=e/t,null===this.view&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=i,this.view.offsetY=r,this.view.width=s,this.view.height=o,this.updateProjectionMatrix()}clearViewOffset(){null!==this.view&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=this.near;let t=e*Math.tan(.5*ga*this.fov)/this.zoom,i=2*t,r=this.aspect*i,s=-.5*r;const o=this.view;if(null!==this.view&&this.view.enabled){const c=o.fullWidth,l=o.fullHeight;s+=o.offsetX*r/c,t-=o.offsetY*i/l,r*=o.width/c,i*=o.height/l}const a=this.filmOffset;0!==a&&(s+=e*a/this.getFilmWidth()),this.projectionMatrix.makePerspective(s,s+r,t,t-i,e,this.far),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const t=super.toJSON(e);return t.object.fov=this.fov,t.object.zoom=this.zoom,t.object.near=this.near,t.object.far=this.far,t.object.focus=this.focus,t.object.aspect=this.aspect,null!==this.view&&(t.object.view=Object.assign({},this.view)),t.object.filmGauge=this.filmGauge,t.object.filmOffset=this.filmOffset,t}}class kte extends pn{constructor(e,t,i){super(),this.type="CubeCamera",this.renderTarget=i;const r=new Pn(-90,1,e,t);r.layers=this.layers,r.up.set(0,1,0),r.lookAt(1,0,0),this.add(r);const s=new Pn(-90,1,e,t);s.layers=this.layers,s.up.set(0,1,0),s.lookAt(-1,0,0),this.add(s);const o=new Pn(-90,1,e,t);o.layers=this.layers,o.up.set(0,0,-1),o.lookAt(0,1,0),this.add(o);const a=new Pn(-90,1,e,t);a.layers=this.layers,a.up.set(0,0,1),a.lookAt(0,-1,0),this.add(a);const c=new Pn(-90,1,e,t);c.layers=this.layers,c.up.set(0,1,0),c.lookAt(0,0,1),this.add(c);const l=new Pn(-90,1,e,t);l.layers=this.layers,l.up.set(0,1,0),l.lookAt(0,0,-1),this.add(l)}update(e,t){null===this.parent&&this.updateMatrixWorld();const i=this.renderTarget,[r,s,o,a,c,l]=this.children,u=e.getRenderTarget(),f=e.toneMapping,h=e.xr.enabled;e.toneMapping=0,e.xr.enabled=!1;const d=i.texture.generateMipmaps;i.texture.generateMipmaps=!1,e.setRenderTarget(i,0),e.render(t,r),e.setRenderTarget(i,1),e.render(t,s),e.setRenderTarget(i,2),e.render(t,o),e.setRenderTarget(i,3),e.render(t,a),e.setRenderTarget(i,4),e.render(t,c),i.texture.generateMipmaps=d,e.setRenderTarget(i,5),e.render(t,l),e.setRenderTarget(u),e.toneMapping=f,e.xr.enabled=h,i.texture.needsPMREMUpdate=!0}}class E0 extends Hi{constructor(e,t,i,r,s,o,a,c,l,u){super(e=void 0!==e?e:[],t=void 0!==t?t:301,i,r,s,o,a,c,l,u),this.isCubeTexture=!0,this.flipY=!1}get images(){return this.image}set images(e){this.image=e}}class Vte extends ya{constructor(e=1,t={}){super(e,e,t),this.isWebGLCubeRenderTarget=!0;const i={width:e,height:e,depth:1};this.texture=new E0([i,i,i,i,i,i],t.mapping,t.wrapS,t.wrapT,t.magFilter,t.minFilter,t.format,t.type,t.anisotropy,t.encoding),this.texture.isRenderTargetTexture=!0,this.texture.generateMipmaps=void 0!==t.generateMipmaps&&t.generateMipmaps,this.texture.minFilter=void 0!==t.minFilter?t.minFilter:on}fromEquirectangularTexture(e,t){this.texture.type=t.type,this.texture.encoding=t.encoding,this.texture.generateMipmaps=t.generateMipmaps,this.texture.minFilter=t.minFilter,this.texture.magFilter=t.magFilter;const i_uniforms={tEquirect:{value:null}},i_vertexShader="\n\n\t\t\t\tvarying vec3 vWorldDirection;\n\n\t\t\t\tvec3 transformDirection( in vec3 dir, in mat4 matrix ) {\n\n\t\t\t\t\treturn normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );\n\n\t\t\t\t}\n\n\t\t\t\tvoid main() {\n\n\t\t\t\t\tvWorldDirection = transformDirection( position, modelMatrix );\n\n\t\t\t\t\t#include <begin_vertex>\n\t\t\t\t\t#include <project_vertex>\n\n\t\t\t\t}\n\t\t\t",i_fragmentShader="\n\n\t\t\t\tuniform sampler2D tEquirect;\n\n\t\t\t\tvarying vec3 vWorldDirection;\n\n\t\t\t\t#include <common>\n\n\t\t\t\tvoid main() {\n\n\t\t\t\t\tvec3 direction = normalize( vWorldDirection );\n\n\t\t\t\t\tvec2 sampleUV = equirectUv( direction );\n\n\t\t\t\t\tgl_FragColor = texture2D( tEquirect, sampleUV );\n\n\t\t\t\t}\n\t\t\t",r=new Ca(5,5,5),s=new Wi({name:"CubemapFromEquirect",uniforms:h2(i_uniforms),vertexShader:i_vertexShader,fragmentShader:i_fragmentShader,side:1,blending:0});s.uniforms.tEquirect.value=t;const o=new an(r,s),a=t.minFilter;return t.minFilter===ho&&(t.minFilter=on),new kte(1,10,this).update(e,o),t.minFilter=a,o.geometry.dispose(),o.material.dispose(),this}clear(e,t,i,r){const s=e.getRenderTarget();for(let o=0;o<6;o++)e.setRenderTarget(this,o),e.clear(t,i,r);e.setRenderTarget(s)}}const u7=new C,Hte=new C,Ute=new hi;class Sa{constructor(e=new C(1,0,0),t=0){this.isPlane=!0,this.normal=e,this.constant=t}set(e,t){return this.normal.copy(e),this.constant=t,this}setComponents(e,t,i,r){return this.normal.set(e,t,i),this.constant=r,this}setFromNormalAndCoplanarPoint(e,t){return this.normal.copy(e),this.constant=-t.dot(this.normal),this}setFromCoplanarPoints(e,t,i){const r=u7.subVectors(i,t).cross(Hte.subVectors(e,t)).normalize();return this.setFromNormalAndCoplanarPoint(r,e),this}copy(e){return this.normal.copy(e.normal),this.constant=e.constant,this}normalize(){const e=1/this.normal.length();return this.normal.multiplyScalar(e),this.constant*=e,this}negate(){return this.constant*=-1,this.normal.negate(),this}distanceToPoint(e){return this.normal.dot(e)+this.constant}distanceToSphere(e){return this.distanceToPoint(e.center)-e.radius}projectPoint(e,t){return t.copy(this.normal).multiplyScalar(-this.distanceToPoint(e)).add(e)}intersectLine(e,t){const i=e.delta(u7),r=this.normal.dot(i);if(0===r)return 0===this.distanceToPoint(e.start)?t.copy(e.start):null;const s=-(e.start.dot(this.normal)+this.constant)/r;return s<0||s>1?null:t.copy(i).multiplyScalar(s).add(e.start)}intersectsLine(e){const t=this.distanceToPoint(e.start),i=this.distanceToPoint(e.end);return t<0&&i>0||i<0&&t>0}intersectsBox(e){return e.intersectsPlane(this)}intersectsSphere(e){return e.intersectsPlane(this)}coplanarPoint(e){return e.copy(this.normal).multiplyScalar(-this.constant)}applyMatrix4(e,t){const i=t||Ute.getNormalMatrix(e),r=this.coplanarPoint(u7).applyMatrix4(e),s=this.normal.applyMatrix3(i).normalize();return this.constant=-r.dot(s),this}translate(e){return this.constant-=e.dot(this.normal),this}equals(e){return e.normal.equals(this.normal)&&e.constant===this.constant}clone(){return(new this.constructor).copy(this)}}const m2=new wa,D0=new C;class f7{constructor(e=new Sa,t=new Sa,i=new Sa,r=new Sa,s=new Sa,o=new Sa){this.planes=[e,t,i,r,s,o]}set(e,t,i,r,s,o){const a=this.planes;return a[0].copy(e),a[1].copy(t),a[2].copy(i),a[3].copy(r),a[4].copy(s),a[5].copy(o),this}copy(e){const t=this.planes;for(let i=0;i<6;i++)t[i].copy(e.planes[i]);return this}setFromProjectionMatrix(e){const t=this.planes,i=e.elements,r=i[0],s=i[1],o=i[2],a=i[3],c=i[4],l=i[5],u=i[6],f=i[7],h=i[8],d=i[9],p=i[10],m=i[11],g=i[12],v=i[13],x=i[14],y=i[15];return t[0].setComponents(a-r,f-c,m-h,y-g).normalize(),t[1].setComponents(a+r,f+c,m+h,y+g).normalize(),t[2].setComponents(a+s,f+l,m+d,y+v).normalize(),t[3].setComponents(a-s,f-l,m-d,y-v).normalize(),t[4].setComponents(a-o,f-u,m-p,y-x).normalize(),t[5].setComponents(a+o,f+u,m+p,y+x).normalize(),this}intersectsObject(e){const t=e.geometry;return null===t.boundingSphere&&t.computeBoundingSphere(),m2.copy(t.boundingSphere).applyMatrix4(e.matrixWorld),this.intersectsSphere(m2)}intersectsSprite(e){return m2.center.set(0,0,0),m2.radius=.7071067811865476,m2.applyMatrix4(e.matrixWorld),this.intersectsSphere(m2)}intersectsSphere(e){const t=this.planes,i=e.center,r=-e.radius;for(let s=0;s<6;s++)if(t[s].distanceToPoint(i)<r)return!1;return!0}intersectsBox(e){const t=this.planes;for(let i=0;i<6;i++){const r=t[i];if(D0.x=r.normal.x>0?e.max.x:e.min.x,D0.y=r.normal.y>0?e.max.y:e.min.y,D0.z=r.normal.z>0?e.max.z:e.min.z,r.distanceToPoint(D0)<0)return!1}return!0}containsPoint(e){const t=this.planes;for(let i=0;i<6;i++)if(t[i].distanceToPoint(e)<0)return!1;return!0}clone(){return(new this.constructor).copy(this)}}function MS(){let n=null,e=!1,t=null,i=null;function r(s,o){t(s,o),i=n.requestAnimationFrame(r)}return{start:function(){!0!==e&&null!==t&&(i=n.requestAnimationFrame(r),e=!0)},stop:function(){n.cancelAnimationFrame(i),e=!1},setAnimationLoop:function(s){t=s},setContext:function(s){n=s}}}function Bte(n,e){const t=e.isWebGL2,i=new WeakMap;return{get:function o(l){return l.isInterleavedBufferAttribute&&(l=l.data),i.get(l)},remove:function a(l){l.isInterleavedBufferAttribute&&(l=l.data);const u=i.get(l);u&&(n.deleteBuffer(u.buffer),i.delete(l))},update:function c(l,u){if(l.isGLBufferAttribute){const h=i.get(l);return void((!h||h.version<l.version)&&i.set(l,{buffer:l.buffer,type:l.type,bytesPerElement:l.elementSize,version:l.version}))}l.isInterleavedBufferAttribute&&(l=l.data);const f=i.get(l);void 0===f?i.set(l,function r(l,u){const f=l.array,h=l.usage,d=n.createBuffer();let p;if(n.bindBuffer(u,d),n.bufferData(u,f,h),l.onUploadCallback(),f instanceof Float32Array)p=5126;else if(f instanceof Uint16Array)if(l.isFloat16BufferAttribute){if(!t)throw new Error("THREE.WebGLAttributes: Usage of Float16BufferAttribute requires WebGL2.");p=5131}else p=5123;else if(f instanceof Int16Array)p=5122;else if(f instanceof Uint32Array)p=5125;else if(f instanceof Int32Array)p=5124;else if(f instanceof Int8Array)p=5120;else if(f instanceof Uint8Array)p=5121;else{if(!(f instanceof Uint8ClampedArray))throw new Error("THREE.WebGLAttributes: Unsupported buffer data format: "+f);p=5121}return{buffer:d,type:p,bytesPerElement:f.BYTES_PER_ELEMENT,version:l.version}}(l,u)):f.version<l.version&&(function s(l,u,f){const h=u.array,d=u.updateRange;n.bindBuffer(f,l),-1===d.count?n.bufferSubData(f,0,h):(t?n.bufferSubData(f,d.offset*h.BYTES_PER_ELEMENT,h,d.offset,d.count):n.bufferSubData(f,d.offset*h.BYTES_PER_ELEMENT,h.subarray(d.offset,d.offset+d.count)),d.count=-1),u.onUploadCallback()}(f.buffer,l,u),f.version=l.version)}}}class g2 extends Ze{constructor(e=1,t=1,i=1,r=1){super(),this.type="PlaneGeometry",this.parameters={width:e,height:t,widthSegments:i,heightSegments:r};const s=e/2,o=t/2,a=Math.floor(i),c=Math.floor(r),l=a+1,u=c+1,f=e/a,h=t/c,d=[],p=[],m=[],g=[];for(let v=0;v<u;v++){const x=v*h-o;for(let y=0;y<l;y++)p.push(y*f-s,-x,0),m.push(0,0,1),g.push(y/a),g.push(1-v/c)}for(let v=0;v<c;v++)for(let x=0;x<a;x++){const _=x+l*(v+1),M=x+1+l*(v+1),w=x+1+l*v;d.push(x+l*v,_,w),d.push(_,M,w)}this.setIndex(d),this.setAttribute("position",new Me(p,3)),this.setAttribute("normal",new Me(m,3)),this.setAttribute("uv",new Me(g,2))}static fromJSON(e){return new g2(e.width,e.height,e.widthSegments,e.heightSegments)}}const $e={alphamap_fragment:"#ifdef USE_ALPHAMAP\n\tdiffuseColor.a *= texture2D( alphaMap, vUv ).g;\n#endif",alphamap_pars_fragment:"#ifdef USE_ALPHAMAP\n\tuniform sampler2D alphaMap;\n#endif",alphatest_fragment:"#ifdef USE_ALPHATEST\n\tif ( diffuseColor.a < alphaTest ) discard;\n#endif",alphatest_pars_fragment:"#ifdef USE_ALPHATEST\n\tuniform float alphaTest;\n#endif",aomap_fragment:"#ifdef USE_AOMAP\n\tfloat ambientOcclusion = ( texture2D( aoMap, vUv2 ).r - 1.0 ) * aoMapIntensity + 1.0;\n\treflectedLight.indirectDiffuse *= ambientOcclusion;\n\t#if defined( USE_ENVMAP ) && defined( STANDARD )\n\t\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\n\t\treflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.roughness );\n\t#endif\n#endif",aomap_pars_fragment:"#ifdef USE_AOMAP\n\tuniform sampler2D aoMap;\n\tuniform float aoMapIntensity;\n#endif",begin_vertex:"vec3 transformed = vec3( position );",beginnormal_vertex:"vec3 objectNormal = vec3( normal );\n#ifdef USE_TANGENT\n\tvec3 objectTangent = vec3( tangent.xyz );\n#endif",bsdfs:"vec3 BRDF_Lambert( const in vec3 diffuseColor ) {\n\treturn RECIPROCAL_PI * diffuseColor;\n}\nvec3 F_Schlick( const in vec3 f0, const in float f90, const in float dotVH ) {\n\tfloat fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );\n\treturn f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );\n}\nfloat F_Schlick( const in float f0, const in float f90, const in float dotVH ) {\n\tfloat fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );\n\treturn f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );\n}\nvec3 Schlick_to_F0( const in vec3 f, const in float f90, const in float dotVH ) {\n    float x = clamp( 1.0 - dotVH, 0.0, 1.0 );\n    float x2 = x * x;\n    float x5 = clamp( x * x2 * x2, 0.0, 0.9999 );\n    return ( f - vec3( f90 ) * x5 ) / ( 1.0 - x5 );\n}\nfloat V_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {\n\tfloat a2 = pow2( alpha );\n\tfloat gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );\n\tfloat gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );\n\treturn 0.5 / max( gv + gl, EPSILON );\n}\nfloat D_GGX( const in float alpha, const in float dotNH ) {\n\tfloat a2 = pow2( alpha );\n\tfloat denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;\n\treturn RECIPROCAL_PI * a2 / pow2( denom );\n}\nvec3 BRDF_GGX( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 f0, const in float f90, const in float roughness ) {\n\tfloat alpha = pow2( roughness );\n\tvec3 halfDir = normalize( lightDir + viewDir );\n\tfloat dotNL = saturate( dot( normal, lightDir ) );\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\tfloat dotVH = saturate( dot( viewDir, halfDir ) );\n\tvec3 F = F_Schlick( f0, f90, dotVH );\n\tfloat V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );\n\tfloat D = D_GGX( alpha, dotNH );\n\treturn F * ( V * D );\n}\n#ifdef USE_IRIDESCENCE\n\tvec3 BRDF_GGX_Iridescence( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 f0, const in float f90, const in float iridescence, const in vec3 iridescenceFresnel, const in float roughness ) {\n\t\tfloat alpha = pow2( roughness );\n\t\tvec3 halfDir = normalize( lightDir + viewDir );\n\t\tfloat dotNL = saturate( dot( normal, lightDir ) );\n\t\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\t\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\t\tfloat dotVH = saturate( dot( viewDir, halfDir ) );\n\t\tvec3 F = mix( F_Schlick( f0, f90, dotVH ), iridescenceFresnel, iridescence );\n\t\tfloat V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );\n\t\tfloat D = D_GGX( alpha, dotNH );\n\t\treturn F * ( V * D );\n\t}\n#endif\nvec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {\n\tconst float LUT_SIZE = 64.0;\n\tconst float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;\n\tconst float LUT_BIAS = 0.5 / LUT_SIZE;\n\tfloat dotNV = saturate( dot( N, V ) );\n\tvec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );\n\tuv = uv * LUT_SCALE + LUT_BIAS;\n\treturn uv;\n}\nfloat LTC_ClippedSphereFormFactor( const in vec3 f ) {\n\tfloat l = length( f );\n\treturn max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );\n}\nvec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {\n\tfloat x = dot( v1, v2 );\n\tfloat y = abs( x );\n\tfloat a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;\n\tfloat b = 3.4175940 + ( 4.1616724 + y ) * y;\n\tfloat v = a / b;\n\tfloat theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;\n\treturn cross( v1, v2 ) * theta_sintheta;\n}\nvec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {\n\tvec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];\n\tvec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];\n\tvec3 lightNormal = cross( v1, v2 );\n\tif( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );\n\tvec3 T1, T2;\n\tT1 = normalize( V - N * dot( V, N ) );\n\tT2 = - cross( N, T1 );\n\tmat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );\n\tvec3 coords[ 4 ];\n\tcoords[ 0 ] = mat * ( rectCoords[ 0 ] - P );\n\tcoords[ 1 ] = mat * ( rectCoords[ 1 ] - P );\n\tcoords[ 2 ] = mat * ( rectCoords[ 2 ] - P );\n\tcoords[ 3 ] = mat * ( rectCoords[ 3 ] - P );\n\tcoords[ 0 ] = normalize( coords[ 0 ] );\n\tcoords[ 1 ] = normalize( coords[ 1 ] );\n\tcoords[ 2 ] = normalize( coords[ 2 ] );\n\tcoords[ 3 ] = normalize( coords[ 3 ] );\n\tvec3 vectorFormFactor = vec3( 0.0 );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );\n\tfloat result = LTC_ClippedSphereFormFactor( vectorFormFactor );\n\treturn vec3( result );\n}\nfloat G_BlinnPhong_Implicit( ) {\n\treturn 0.25;\n}\nfloat D_BlinnPhong( const in float shininess, const in float dotNH ) {\n\treturn RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );\n}\nvec3 BRDF_BlinnPhong( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float shininess ) {\n\tvec3 halfDir = normalize( lightDir + viewDir );\n\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\tfloat dotVH = saturate( dot( viewDir, halfDir ) );\n\tvec3 F = F_Schlick( specularColor, 1.0, dotVH );\n\tfloat G = G_BlinnPhong_Implicit( );\n\tfloat D = D_BlinnPhong( shininess, dotNH );\n\treturn F * ( G * D );\n}\n#if defined( USE_SHEEN )\nfloat D_Charlie( float roughness, float dotNH ) {\n\tfloat alpha = pow2( roughness );\n\tfloat invAlpha = 1.0 / alpha;\n\tfloat cos2h = dotNH * dotNH;\n\tfloat sin2h = max( 1.0 - cos2h, 0.0078125 );\n\treturn ( 2.0 + invAlpha ) * pow( sin2h, invAlpha * 0.5 ) / ( 2.0 * PI );\n}\nfloat V_Neubelt( float dotNV, float dotNL ) {\n\treturn saturate( 1.0 / ( 4.0 * ( dotNL + dotNV - dotNL * dotNV ) ) );\n}\nvec3 BRDF_Sheen( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, vec3 sheenColor, const in float sheenRoughness ) {\n\tvec3 halfDir = normalize( lightDir + viewDir );\n\tfloat dotNL = saturate( dot( normal, lightDir ) );\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\tfloat D = D_Charlie( sheenRoughness, dotNH );\n\tfloat V = V_Neubelt( dotNV, dotNL );\n\treturn sheenColor * ( D * V );\n}\n#endif",iridescence_fragment:"#ifdef USE_IRIDESCENCE\n\tconst mat3 XYZ_TO_REC709 = mat3(\n\t\t 3.2404542, -0.9692660,  0.0556434,\n\t\t-1.5371385,  1.8760108, -0.2040259,\n\t\t-0.4985314,  0.0415560,  1.0572252\n\t);\n\tvec3 Fresnel0ToIor( vec3 fresnel0 ) {\n\t\tvec3 sqrtF0 = sqrt( fresnel0 );\n\t\treturn ( vec3( 1.0 ) + sqrtF0 ) / ( vec3( 1.0 ) - sqrtF0 );\n\t}\n\tvec3 IorToFresnel0( vec3 transmittedIor, float incidentIor ) {\n\t\treturn pow2( ( transmittedIor - vec3( incidentIor ) ) / ( transmittedIor + vec3( incidentIor ) ) );\n\t}\n\tfloat IorToFresnel0( float transmittedIor, float incidentIor ) {\n\t\treturn pow2( ( transmittedIor - incidentIor ) / ( transmittedIor + incidentIor ));\n\t}\n\tvec3 evalSensitivity( float OPD, vec3 shift ) {\n\t\tfloat phase = 2.0 * PI * OPD * 1.0e-9;\n\t\tvec3 val = vec3( 5.4856e-13, 4.4201e-13, 5.2481e-13 );\n\t\tvec3 pos = vec3( 1.6810e+06, 1.7953e+06, 2.2084e+06 );\n\t\tvec3 var = vec3( 4.3278e+09, 9.3046e+09, 6.6121e+09 );\n\t\tvec3 xyz = val * sqrt( 2.0 * PI * var ) * cos( pos * phase + shift ) * exp( - pow2( phase ) * var );\n\t\txyz.x += 9.7470e-14 * sqrt( 2.0 * PI * 4.5282e+09 ) * cos( 2.2399e+06 * phase + shift[ 0 ] ) * exp( - 4.5282e+09 * pow2( phase ) );\n\t\txyz /= 1.0685e-7;\n\t\tvec3 rgb = XYZ_TO_REC709 * xyz;\n\t\treturn rgb;\n\t}\n\tvec3 evalIridescence( float outsideIOR, float eta2, float cosTheta1, float thinFilmThickness, vec3 baseF0 ) {\n\t\tvec3 I;\n\t\tfloat iridescenceIOR = mix( outsideIOR, eta2, smoothstep( 0.0, 0.03, thinFilmThickness ) );\n\t\tfloat sinTheta2Sq = pow2( outsideIOR / iridescenceIOR ) * ( 1.0 - pow2( cosTheta1 ) );\n\t\tfloat cosTheta2Sq = 1.0 - sinTheta2Sq;\n\t\tif ( cosTheta2Sq < 0.0 ) {\n\t\t\t return vec3( 1.0 );\n\t\t}\n\t\tfloat cosTheta2 = sqrt( cosTheta2Sq );\n\t\tfloat R0 = IorToFresnel0( iridescenceIOR, outsideIOR );\n\t\tfloat R12 = F_Schlick( R0, 1.0, cosTheta1 );\n\t\tfloat R21 = R12;\n\t\tfloat T121 = 1.0 - R12;\n\t\tfloat phi12 = 0.0;\n\t\tif ( iridescenceIOR < outsideIOR ) phi12 = PI;\n\t\tfloat phi21 = PI - phi12;\n\t\tvec3 baseIOR = Fresnel0ToIor( clamp( baseF0, 0.0, 0.9999 ) );\t\tvec3 R1 = IorToFresnel0( baseIOR, iridescenceIOR );\n\t\tvec3 R23 = F_Schlick( R1, 1.0, cosTheta2 );\n\t\tvec3 phi23 = vec3( 0.0 );\n\t\tif ( baseIOR[ 0 ] < iridescenceIOR ) phi23[ 0 ] = PI;\n\t\tif ( baseIOR[ 1 ] < iridescenceIOR ) phi23[ 1 ] = PI;\n\t\tif ( baseIOR[ 2 ] < iridescenceIOR ) phi23[ 2 ] = PI;\n\t\tfloat OPD = 2.0 * iridescenceIOR * thinFilmThickness * cosTheta2;\n\t\tvec3 phi = vec3( phi21 ) + phi23;\n\t\tvec3 R123 = clamp( R12 * R23, 1e-5, 0.9999 );\n\t\tvec3 r123 = sqrt( R123 );\n\t\tvec3 Rs = pow2( T121 ) * R23 / ( vec3( 1.0 ) - R123 );\n\t\tvec3 C0 = R12 + Rs;\n\t\tI = C0;\n\t\tvec3 Cm = Rs - T121;\n\t\tfor ( int m = 1; m <= 2; ++ m ) {\n\t\t\tCm *= r123;\n\t\t\tvec3 Sm = 2.0 * evalSensitivity( float( m ) * OPD, float( m ) * phi );\n\t\t\tI += Cm * Sm;\n\t\t}\n\t\treturn max( I, vec3( 0.0 ) );\n\t}\n#endif",bumpmap_pars_fragment:"#ifdef USE_BUMPMAP\n\tuniform sampler2D bumpMap;\n\tuniform float bumpScale;\n\tvec2 dHdxy_fwd() {\n\t\tvec2 dSTdx = dFdx( vUv );\n\t\tvec2 dSTdy = dFdy( vUv );\n\t\tfloat Hll = bumpScale * texture2D( bumpMap, vUv ).x;\n\t\tfloat dBx = bumpScale * texture2D( bumpMap, vUv + dSTdx ).x - Hll;\n\t\tfloat dBy = bumpScale * texture2D( bumpMap, vUv + dSTdy ).x - Hll;\n\t\treturn vec2( dBx, dBy );\n\t}\n\tvec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy, float faceDirection ) {\n\t\tvec3 vSigmaX = dFdx( surf_pos.xyz );\n\t\tvec3 vSigmaY = dFdy( surf_pos.xyz );\n\t\tvec3 vN = surf_norm;\n\t\tvec3 R1 = cross( vSigmaY, vN );\n\t\tvec3 R2 = cross( vN, vSigmaX );\n\t\tfloat fDet = dot( vSigmaX, R1 ) * faceDirection;\n\t\tvec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );\n\t\treturn normalize( abs( fDet ) * surf_norm - vGrad );\n\t}\n#endif",clipping_planes_fragment:"#if NUM_CLIPPING_PLANES > 0\n\tvec4 plane;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {\n\t\tplane = clippingPlanes[ i ];\n\t\tif ( dot( vClipPosition, plane.xyz ) > plane.w ) discard;\n\t}\n\t#pragma unroll_loop_end\n\t#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES\n\t\tbool clipped = true;\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {\n\t\t\tplane = clippingPlanes[ i ];\n\t\t\tclipped = ( dot( vClipPosition, plane.xyz ) > plane.w ) && clipped;\n\t\t}\n\t\t#pragma unroll_loop_end\n\t\tif ( clipped ) discard;\n\t#endif\n#endif",clipping_planes_pars_fragment:"#if NUM_CLIPPING_PLANES > 0\n\tvarying vec3 vClipPosition;\n\tuniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];\n#endif",clipping_planes_pars_vertex:"#if NUM_CLIPPING_PLANES > 0\n\tvarying vec3 vClipPosition;\n#endif",clipping_planes_vertex:"#if NUM_CLIPPING_PLANES > 0\n\tvClipPosition = - mvPosition.xyz;\n#endif",color_fragment:"#if defined( USE_COLOR_ALPHA )\n\tdiffuseColor *= vColor;\n#elif defined( USE_COLOR )\n\tdiffuseColor.rgb *= vColor;\n#endif",color_pars_fragment:"#if defined( USE_COLOR_ALPHA )\n\tvarying vec4 vColor;\n#elif defined( USE_COLOR )\n\tvarying vec3 vColor;\n#endif",color_pars_vertex:"#if defined( USE_COLOR_ALPHA )\n\tvarying vec4 vColor;\n#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )\n\tvarying vec3 vColor;\n#endif",color_vertex:"#if defined( USE_COLOR_ALPHA )\n\tvColor = vec4( 1.0 );\n#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )\n\tvColor = vec3( 1.0 );\n#endif\n#ifdef USE_COLOR\n\tvColor *= color;\n#endif\n#ifdef USE_INSTANCING_COLOR\n\tvColor.xyz *= instanceColor.xyz;\n#endif",common:"#define PI 3.141592653589793\n#define PI2 6.283185307179586\n#define PI_HALF 1.5707963267948966\n#define RECIPROCAL_PI 0.3183098861837907\n#define RECIPROCAL_PI2 0.15915494309189535\n#define EPSILON 1e-6\n#ifndef saturate\n#define saturate( a ) clamp( a, 0.0, 1.0 )\n#endif\n#define whiteComplement( a ) ( 1.0 - saturate( a ) )\nfloat pow2( const in float x ) { return x*x; }\nvec3 pow2( const in vec3 x ) { return x*x; }\nfloat pow3( const in float x ) { return x*x*x; }\nfloat pow4( const in float x ) { float x2 = x*x; return x2*x2; }\nfloat max3( const in vec3 v ) { return max( max( v.x, v.y ), v.z ); }\nfloat average( const in vec3 v ) { return dot( v, vec3( 0.3333333 ) ); }\nhighp float rand( const in vec2 uv ) {\n\tconst highp float a = 12.9898, b = 78.233, c = 43758.5453;\n\thighp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );\n\treturn fract( sin( sn ) * c );\n}\n#ifdef HIGH_PRECISION\n\tfloat precisionSafeLength( vec3 v ) { return length( v ); }\n#else\n\tfloat precisionSafeLength( vec3 v ) {\n\t\tfloat maxComponent = max3( abs( v ) );\n\t\treturn length( v / maxComponent ) * maxComponent;\n\t}\n#endif\nstruct IncidentLight {\n\tvec3 color;\n\tvec3 direction;\n\tbool visible;\n};\nstruct ReflectedLight {\n\tvec3 directDiffuse;\n\tvec3 directSpecular;\n\tvec3 indirectDiffuse;\n\tvec3 indirectSpecular;\n};\nstruct GeometricContext {\n\tvec3 position;\n\tvec3 normal;\n\tvec3 viewDir;\n#ifdef USE_CLEARCOAT\n\tvec3 clearcoatNormal;\n#endif\n};\nvec3 transformDirection( in vec3 dir, in mat4 matrix ) {\n\treturn normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );\n}\nvec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {\n\treturn normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );\n}\nmat3 transposeMat3( const in mat3 m ) {\n\tmat3 tmp;\n\ttmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );\n\ttmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );\n\ttmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );\n\treturn tmp;\n}\nfloat luminance( const in vec3 rgb ) {\n\tconst vec3 weights = vec3( 0.2126729, 0.7151522, 0.0721750 );\n\treturn dot( weights, rgb );\n}\nbool isPerspectiveMatrix( mat4 m ) {\n\treturn m[ 2 ][ 3 ] == - 1.0;\n}\nvec2 equirectUv( in vec3 dir ) {\n\tfloat u = atan( dir.z, dir.x ) * RECIPROCAL_PI2 + 0.5;\n\tfloat v = asin( clamp( dir.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;\n\treturn vec2( u, v );\n}",cube_uv_reflection_fragment:"#ifdef ENVMAP_TYPE_CUBE_UV\n\t#define cubeUV_minMipLevel 4.0\n\t#define cubeUV_minTileSize 16.0\n\tfloat getFace( vec3 direction ) {\n\t\tvec3 absDirection = abs( direction );\n\t\tfloat face = - 1.0;\n\t\tif ( absDirection.x > absDirection.z ) {\n\t\t\tif ( absDirection.x > absDirection.y )\n\t\t\t\tface = direction.x > 0.0 ? 0.0 : 3.0;\n\t\t\telse\n\t\t\t\tface = direction.y > 0.0 ? 1.0 : 4.0;\n\t\t} else {\n\t\t\tif ( absDirection.z > absDirection.y )\n\t\t\t\tface = direction.z > 0.0 ? 2.0 : 5.0;\n\t\t\telse\n\t\t\t\tface = direction.y > 0.0 ? 1.0 : 4.0;\n\t\t}\n\t\treturn face;\n\t}\n\tvec2 getUV( vec3 direction, float face ) {\n\t\tvec2 uv;\n\t\tif ( face == 0.0 ) {\n\t\t\tuv = vec2( direction.z, direction.y ) / abs( direction.x );\n\t\t} else if ( face == 1.0 ) {\n\t\t\tuv = vec2( - direction.x, - direction.z ) / abs( direction.y );\n\t\t} else if ( face == 2.0 ) {\n\t\t\tuv = vec2( - direction.x, direction.y ) / abs( direction.z );\n\t\t} else if ( face == 3.0 ) {\n\t\t\tuv = vec2( - direction.z, direction.y ) / abs( direction.x );\n\t\t} else if ( face == 4.0 ) {\n\t\t\tuv = vec2( - direction.x, direction.z ) / abs( direction.y );\n\t\t} else {\n\t\t\tuv = vec2( direction.x, direction.y ) / abs( direction.z );\n\t\t}\n\t\treturn 0.5 * ( uv + 1.0 );\n\t}\n\tvec3 bilinearCubeUV( sampler2D envMap, vec3 direction, float mipInt ) {\n\t\tfloat face = getFace( direction );\n\t\tfloat filterInt = max( cubeUV_minMipLevel - mipInt, 0.0 );\n\t\tmipInt = max( mipInt, cubeUV_minMipLevel );\n\t\tfloat faceSize = exp2( mipInt );\n\t\tvec2 uv = getUV( direction, face ) * ( faceSize - 2.0 ) + 1.0;\n\t\tif ( face > 2.0 ) {\n\t\t\tuv.y += faceSize;\n\t\t\tface -= 3.0;\n\t\t}\n\t\tuv.x += face * faceSize;\n\t\tuv.x += filterInt * 3.0 * cubeUV_minTileSize;\n\t\tuv.y += 4.0 * ( exp2( CUBEUV_MAX_MIP ) - faceSize );\n\t\tuv.x *= CUBEUV_TEXEL_WIDTH;\n\t\tuv.y *= CUBEUV_TEXEL_HEIGHT;\n\t\t#ifdef texture2DGradEXT\n\t\t\treturn texture2DGradEXT( envMap, uv, vec2( 0.0 ), vec2( 0.0 ) ).rgb;\n\t\t#else\n\t\t\treturn texture2D( envMap, uv ).rgb;\n\t\t#endif\n\t}\n\t#define cubeUV_r0 1.0\n\t#define cubeUV_v0 0.339\n\t#define cubeUV_m0 - 2.0\n\t#define cubeUV_r1 0.8\n\t#define cubeUV_v1 0.276\n\t#define cubeUV_m1 - 1.0\n\t#define cubeUV_r4 0.4\n\t#define cubeUV_v4 0.046\n\t#define cubeUV_m4 2.0\n\t#define cubeUV_r5 0.305\n\t#define cubeUV_v5 0.016\n\t#define cubeUV_m5 3.0\n\t#define cubeUV_r6 0.21\n\t#define cubeUV_v6 0.0038\n\t#define cubeUV_m6 4.0\n\tfloat roughnessToMip( float roughness ) {\n\t\tfloat mip = 0.0;\n\t\tif ( roughness >= cubeUV_r1 ) {\n\t\t\tmip = ( cubeUV_r0 - roughness ) * ( cubeUV_m1 - cubeUV_m0 ) / ( cubeUV_r0 - cubeUV_r1 ) + cubeUV_m0;\n\t\t} else if ( roughness >= cubeUV_r4 ) {\n\t\t\tmip = ( cubeUV_r1 - roughness ) * ( cubeUV_m4 - cubeUV_m1 ) / ( cubeUV_r1 - cubeUV_r4 ) + cubeUV_m1;\n\t\t} else if ( roughness >= cubeUV_r5 ) {\n\t\t\tmip = ( cubeUV_r4 - roughness ) * ( cubeUV_m5 - cubeUV_m4 ) / ( cubeUV_r4 - cubeUV_r5 ) + cubeUV_m4;\n\t\t} else if ( roughness >= cubeUV_r6 ) {\n\t\t\tmip = ( cubeUV_r5 - roughness ) * ( cubeUV_m6 - cubeUV_m5 ) / ( cubeUV_r5 - cubeUV_r6 ) + cubeUV_m5;\n\t\t} else {\n\t\t\tmip = - 2.0 * log2( 1.16 * roughness );\t\t}\n\t\treturn mip;\n\t}\n\tvec4 textureCubeUV( sampler2D envMap, vec3 sampleDir, float roughness ) {\n\t\tfloat mip = clamp( roughnessToMip( roughness ), cubeUV_m0, CUBEUV_MAX_MIP );\n\t\tfloat mipF = fract( mip );\n\t\tfloat mipInt = floor( mip );\n\t\tvec3 color0 = bilinearCubeUV( envMap, sampleDir, mipInt );\n\t\tif ( mipF == 0.0 ) {\n\t\t\treturn vec4( color0, 1.0 );\n\t\t} else {\n\t\t\tvec3 color1 = bilinearCubeUV( envMap, sampleDir, mipInt + 1.0 );\n\t\t\treturn vec4( mix( color0, color1, mipF ), 1.0 );\n\t\t}\n\t}\n#endif",defaultnormal_vertex:"vec3 transformedNormal = objectNormal;\n#ifdef USE_INSTANCING\n\tmat3 m = mat3( instanceMatrix );\n\ttransformedNormal /= vec3( dot( m[ 0 ], m[ 0 ] ), dot( m[ 1 ], m[ 1 ] ), dot( m[ 2 ], m[ 2 ] ) );\n\ttransformedNormal = m * transformedNormal;\n#endif\ntransformedNormal = normalMatrix * transformedNormal;\n#ifdef FLIP_SIDED\n\ttransformedNormal = - transformedNormal;\n#endif\n#ifdef USE_TANGENT\n\tvec3 transformedTangent = ( modelViewMatrix * vec4( objectTangent, 0.0 ) ).xyz;\n\t#ifdef FLIP_SIDED\n\t\ttransformedTangent = - transformedTangent;\n\t#endif\n#endif",displacementmap_pars_vertex:"#ifdef USE_DISPLACEMENTMAP\n\tuniform sampler2D displacementMap;\n\tuniform float displacementScale;\n\tuniform float displacementBias;\n#endif",displacementmap_vertex:"#ifdef USE_DISPLACEMENTMAP\n\ttransformed += normalize( objectNormal ) * ( texture2D( displacementMap, vUv ).x * displacementScale + displacementBias );\n#endif",emissivemap_fragment:"#ifdef USE_EMISSIVEMAP\n\tvec4 emissiveColor = texture2D( emissiveMap, vUv );\n\ttotalEmissiveRadiance *= emissiveColor.rgb;\n#endif",emissivemap_pars_fragment:"#ifdef USE_EMISSIVEMAP\n\tuniform sampler2D emissiveMap;\n#endif",encodings_fragment:"gl_FragColor = linearToOutputTexel( gl_FragColor );",encodings_pars_fragment:"vec4 LinearToLinear( in vec4 value ) {\n\treturn value;\n}\nvec4 LinearTosRGB( in vec4 value ) {\n\treturn vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );\n}",envmap_fragment:"#ifdef USE_ENVMAP\n\t#ifdef ENV_WORLDPOS\n\t\tvec3 cameraToFrag;\n\t\tif ( isOrthographic ) {\n\t\t\tcameraToFrag = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );\n\t\t} else {\n\t\t\tcameraToFrag = normalize( vWorldPosition - cameraPosition );\n\t\t}\n\t\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvec3 reflectVec = reflect( cameraToFrag, worldNormal );\n\t\t#else\n\t\t\tvec3 reflectVec = refract( cameraToFrag, worldNormal, refractionRatio );\n\t\t#endif\n\t#else\n\t\tvec3 reflectVec = vReflect;\n\t#endif\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tvec4 envColor = textureCube( envMap, vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );\n\t#else\n\t\tvec4 envColor = vec4( 0.0 );\n\t#endif\n\t#ifdef ENVMAP_BLENDING_MULTIPLY\n\t\toutgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );\n\t#elif defined( ENVMAP_BLENDING_MIX )\n\t\toutgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );\n\t#elif defined( ENVMAP_BLENDING_ADD )\n\t\toutgoingLight += envColor.xyz * specularStrength * reflectivity;\n\t#endif\n#endif",envmap_common_pars_fragment:"#ifdef USE_ENVMAP\n\tuniform float envMapIntensity;\n\tuniform float flipEnvMap;\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tuniform samplerCube envMap;\n\t#else\n\t\tuniform sampler2D envMap;\n\t#endif\n\t\n#endif",envmap_pars_fragment:"#ifdef USE_ENVMAP\n\tuniform float reflectivity;\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )\n\t\t#define ENV_WORLDPOS\n\t#endif\n\t#ifdef ENV_WORLDPOS\n\t\tvarying vec3 vWorldPosition;\n\t\tuniform float refractionRatio;\n\t#else\n\t\tvarying vec3 vReflect;\n\t#endif\n#endif",envmap_pars_vertex:"#ifdef USE_ENVMAP\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )\n\t\t#define ENV_WORLDPOS\n\t#endif\n\t#ifdef ENV_WORLDPOS\n\t\t\n\t\tvarying vec3 vWorldPosition;\n\t#else\n\t\tvarying vec3 vReflect;\n\t\tuniform float refractionRatio;\n\t#endif\n#endif",envmap_physical_pars_fragment:"#if defined( USE_ENVMAP )\n\tvec3 getIBLIrradiance( const in vec3 normal ) {\n\t\t#if defined( ENVMAP_TYPE_CUBE_UV )\n\t\t\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\t\t\tvec4 envMapColor = textureCubeUV( envMap, worldNormal, 1.0 );\n\t\t\treturn PI * envMapColor.rgb * envMapIntensity;\n\t\t#else\n\t\t\treturn vec3( 0.0 );\n\t\t#endif\n\t}\n\tvec3 getIBLRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness ) {\n\t\t#if defined( ENVMAP_TYPE_CUBE_UV )\n\t\t\tvec3 reflectVec = reflect( - viewDir, normal );\n\t\t\treflectVec = normalize( mix( reflectVec, normal, roughness * roughness) );\n\t\t\treflectVec = inverseTransformDirection( reflectVec, viewMatrix );\n\t\t\tvec4 envMapColor = textureCubeUV( envMap, reflectVec, roughness );\n\t\t\treturn envMapColor.rgb * envMapIntensity;\n\t\t#else\n\t\t\treturn vec3( 0.0 );\n\t\t#endif\n\t}\n#endif",envmap_vertex:"#ifdef USE_ENVMAP\n\t#ifdef ENV_WORLDPOS\n\t\tvWorldPosition = worldPosition.xyz;\n\t#else\n\t\tvec3 cameraToVertex;\n\t\tif ( isOrthographic ) {\n\t\t\tcameraToVertex = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );\n\t\t} else {\n\t\t\tcameraToVertex = normalize( worldPosition.xyz - cameraPosition );\n\t\t}\n\t\tvec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvReflect = reflect( cameraToVertex, worldNormal );\n\t\t#else\n\t\t\tvReflect = refract( cameraToVertex, worldNormal, refractionRatio );\n\t\t#endif\n\t#endif\n#endif",fog_vertex:"#ifdef USE_FOG\n\tvFogDepth = - mvPosition.z;\n#endif",fog_pars_vertex:"#ifdef USE_FOG\n\tvarying float vFogDepth;\n#endif",fog_fragment:"#ifdef USE_FOG\n\t#ifdef FOG_EXP2\n\t\tfloat fogFactor = 1.0 - exp( - fogDensity * fogDensity * vFogDepth * vFogDepth );\n\t#else\n\t\tfloat fogFactor = smoothstep( fogNear, fogFar, vFogDepth );\n\t#endif\n\tgl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );\n#endif",fog_pars_fragment:"#ifdef USE_FOG\n\tuniform vec3 fogColor;\n\tvarying float vFogDepth;\n\t#ifdef FOG_EXP2\n\t\tuniform float fogDensity;\n\t#else\n\t\tuniform float fogNear;\n\t\tuniform float fogFar;\n\t#endif\n#endif",gradientmap_pars_fragment:"#ifdef USE_GRADIENTMAP\n\tuniform sampler2D gradientMap;\n#endif\nvec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {\n\tfloat dotNL = dot( normal, lightDirection );\n\tvec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );\n\t#ifdef USE_GRADIENTMAP\n\t\treturn vec3( texture2D( gradientMap, coord ).r );\n\t#else\n\t\tvec2 fw = fwidth( coord ) * 0.5;\n\t\treturn mix( vec3( 0.7 ), vec3( 1.0 ), smoothstep( 0.7 - fw.x, 0.7 + fw.x, coord.x ) );\n\t#endif\n}",lightmap_fragment:"#ifdef USE_LIGHTMAP\n\tvec4 lightMapTexel = texture2D( lightMap, vUv2 );\n\tvec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;\n\treflectedLight.indirectDiffuse += lightMapIrradiance;\n#endif",lightmap_pars_fragment:"#ifdef USE_LIGHTMAP\n\tuniform sampler2D lightMap;\n\tuniform float lightMapIntensity;\n#endif",lights_lambert_fragment:"LambertMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;\nmaterial.specularStrength = specularStrength;",lights_lambert_pars_fragment:"varying vec3 vViewPosition;\nstruct LambertMaterial {\n\tvec3 diffuseColor;\n\tfloat specularStrength;\n};\nvoid RE_Direct_Lambert( const in IncidentLight directLight, const in GeometricContext geometry, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectDiffuse_Lambert( const in vec3 irradiance, const in GeometricContext geometry, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_Lambert\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Lambert",lights_pars_begin:"uniform bool receiveShadow;\nuniform vec3 ambientLightColor;\nuniform vec3 lightProbe[ 9 ];\nvec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {\n\tfloat x = normal.x, y = normal.y, z = normal.z;\n\tvec3 result = shCoefficients[ 0 ] * 0.886227;\n\tresult += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;\n\tresult += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;\n\tresult += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;\n\tresult += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;\n\tresult += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;\n\tresult += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );\n\tresult += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;\n\tresult += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );\n\treturn result;\n}\nvec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in vec3 normal ) {\n\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\tvec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );\n\treturn irradiance;\n}\nvec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {\n\tvec3 irradiance = ambientLightColor;\n\treturn irradiance;\n}\nfloat getDistanceAttenuation( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {\n\t#if defined ( PHYSICALLY_CORRECT_LIGHTS )\n\t\tfloat distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );\n\t\tif ( cutoffDistance > 0.0 ) {\n\t\t\tdistanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );\n\t\t}\n\t\treturn distanceFalloff;\n\t#else\n\t\tif ( cutoffDistance > 0.0 && decayExponent > 0.0 ) {\n\t\t\treturn pow( saturate( - lightDistance / cutoffDistance + 1.0 ), decayExponent );\n\t\t}\n\t\treturn 1.0;\n\t#endif\n}\nfloat getSpotAttenuation( const in float coneCosine, const in float penumbraCosine, const in float angleCosine ) {\n\treturn smoothstep( coneCosine, penumbraCosine, angleCosine );\n}\n#if NUM_DIR_LIGHTS > 0\n\tstruct DirectionalLight {\n\t\tvec3 direction;\n\t\tvec3 color;\n\t};\n\tuniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];\n\tvoid getDirectionalLightInfo( const in DirectionalLight directionalLight, const in GeometricContext geometry, out IncidentLight light ) {\n\t\tlight.color = directionalLight.color;\n\t\tlight.direction = directionalLight.direction;\n\t\tlight.visible = true;\n\t}\n#endif\n#if NUM_POINT_LIGHTS > 0\n\tstruct PointLight {\n\t\tvec3 position;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t};\n\tuniform PointLight pointLights[ NUM_POINT_LIGHTS ];\n\tvoid getPointLightInfo( const in PointLight pointLight, const in GeometricContext geometry, out IncidentLight light ) {\n\t\tvec3 lVector = pointLight.position - geometry.position;\n\t\tlight.direction = normalize( lVector );\n\t\tfloat lightDistance = length( lVector );\n\t\tlight.color = pointLight.color;\n\t\tlight.color *= getDistanceAttenuation( lightDistance, pointLight.distance, pointLight.decay );\n\t\tlight.visible = ( light.color != vec3( 0.0 ) );\n\t}\n#endif\n#if NUM_SPOT_LIGHTS > 0\n\tstruct SpotLight {\n\t\tvec3 position;\n\t\tvec3 direction;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t\tfloat coneCos;\n\t\tfloat penumbraCos;\n\t};\n\tuniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];\n\tvoid getSpotLightInfo( const in SpotLight spotLight, const in GeometricContext geometry, out IncidentLight light ) {\n\t\tvec3 lVector = spotLight.position - geometry.position;\n\t\tlight.direction = normalize( lVector );\n\t\tfloat angleCos = dot( light.direction, spotLight.direction );\n\t\tfloat spotAttenuation = getSpotAttenuation( spotLight.coneCos, spotLight.penumbraCos, angleCos );\n\t\tif ( spotAttenuation > 0.0 ) {\n\t\t\tfloat lightDistance = length( lVector );\n\t\t\tlight.color = spotLight.color * spotAttenuation;\n\t\t\tlight.color *= getDistanceAttenuation( lightDistance, spotLight.distance, spotLight.decay );\n\t\t\tlight.visible = ( light.color != vec3( 0.0 ) );\n\t\t} else {\n\t\t\tlight.color = vec3( 0.0 );\n\t\t\tlight.visible = false;\n\t\t}\n\t}\n#endif\n#if NUM_RECT_AREA_LIGHTS > 0\n\tstruct RectAreaLight {\n\t\tvec3 color;\n\t\tvec3 position;\n\t\tvec3 halfWidth;\n\t\tvec3 halfHeight;\n\t};\n\tuniform sampler2D ltc_1;\tuniform sampler2D ltc_2;\n\tuniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];\n#endif\n#if NUM_HEMI_LIGHTS > 0\n\tstruct HemisphereLight {\n\t\tvec3 direction;\n\t\tvec3 skyColor;\n\t\tvec3 groundColor;\n\t};\n\tuniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];\n\tvec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in vec3 normal ) {\n\t\tfloat dotNL = dot( normal, hemiLight.direction );\n\t\tfloat hemiDiffuseWeight = 0.5 * dotNL + 0.5;\n\t\tvec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );\n\t\treturn irradiance;\n\t}\n#endif",lights_toon_fragment:"ToonMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;",lights_toon_pars_fragment:"varying vec3 vViewPosition;\nstruct ToonMaterial {\n\tvec3 diffuseColor;\n};\nvoid RE_Direct_Toon( const in IncidentLight directLight, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {\n\tvec3 irradiance = getGradientIrradiance( geometry.normal, directLight.direction ) * directLight.color;\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_Toon\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Toon",lights_phong_fragment:"BlinnPhongMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;\nmaterial.specularColor = specular;\nmaterial.specularShininess = shininess;\nmaterial.specularStrength = specularStrength;",lights_phong_pars_fragment:"varying vec3 vViewPosition;\nstruct BlinnPhongMaterial {\n\tvec3 diffuseColor;\n\tvec3 specularColor;\n\tfloat specularShininess;\n\tfloat specularStrength;\n};\nvoid RE_Direct_BlinnPhong( const in IncidentLight directLight, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n\treflectedLight.directSpecular += irradiance * BRDF_BlinnPhong( directLight.direction, geometry.viewDir, geometry.normal, material.specularColor, material.specularShininess ) * material.specularStrength;\n}\nvoid RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_BlinnPhong\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_BlinnPhong",lights_physical_fragment:"PhysicalMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );\nvec3 dxy = max( abs( dFdx( geometryNormal ) ), abs( dFdy( geometryNormal ) ) );\nfloat geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );\nmaterial.roughness = max( roughnessFactor, 0.0525 );material.roughness += geometryRoughness;\nmaterial.roughness = min( material.roughness, 1.0 );\n#ifdef IOR\n\tmaterial.ior = ior;\n\t#ifdef SPECULAR\n\t\tfloat specularIntensityFactor = specularIntensity;\n\t\tvec3 specularColorFactor = specularColor;\n\t\t#ifdef USE_SPECULARINTENSITYMAP\n\t\t\tspecularIntensityFactor *= texture2D( specularIntensityMap, vUv ).a;\n\t\t#endif\n\t\t#ifdef USE_SPECULARCOLORMAP\n\t\t\tspecularColorFactor *= texture2D( specularColorMap, vUv ).rgb;\n\t\t#endif\n\t\tmaterial.specularF90 = mix( specularIntensityFactor, 1.0, metalnessFactor );\n\t#else\n\t\tfloat specularIntensityFactor = 1.0;\n\t\tvec3 specularColorFactor = vec3( 1.0 );\n\t\tmaterial.specularF90 = 1.0;\n\t#endif\n\tmaterial.specularColor = mix( min( pow2( ( material.ior - 1.0 ) / ( material.ior + 1.0 ) ) * specularColorFactor, vec3( 1.0 ) ) * specularIntensityFactor, diffuseColor.rgb, metalnessFactor );\n#else\n\tmaterial.specularColor = mix( vec3( 0.04 ), diffuseColor.rgb, metalnessFactor );\n\tmaterial.specularF90 = 1.0;\n#endif\n#ifdef USE_CLEARCOAT\n\tmaterial.clearcoat = clearcoat;\n\tmaterial.clearcoatRoughness = clearcoatRoughness;\n\tmaterial.clearcoatF0 = vec3( 0.04 );\n\tmaterial.clearcoatF90 = 1.0;\n\t#ifdef USE_CLEARCOATMAP\n\t\tmaterial.clearcoat *= texture2D( clearcoatMap, vUv ).x;\n\t#endif\n\t#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\t\tmaterial.clearcoatRoughness *= texture2D( clearcoatRoughnessMap, vUv ).y;\n\t#endif\n\tmaterial.clearcoat = saturate( material.clearcoat );\tmaterial.clearcoatRoughness = max( material.clearcoatRoughness, 0.0525 );\n\tmaterial.clearcoatRoughness += geometryRoughness;\n\tmaterial.clearcoatRoughness = min( material.clearcoatRoughness, 1.0 );\n#endif\n#ifdef USE_IRIDESCENCE\n\tmaterial.iridescence = iridescence;\n\tmaterial.iridescenceIOR = iridescenceIOR;\n\t#ifdef USE_IRIDESCENCEMAP\n\t\tmaterial.iridescence *= texture2D( iridescenceMap, vUv ).r;\n\t#endif\n\t#ifdef USE_IRIDESCENCE_THICKNESSMAP\n\t\tmaterial.iridescenceThickness = (iridescenceThicknessMaximum - iridescenceThicknessMinimum) * texture2D( iridescenceThicknessMap, vUv ).g + iridescenceThicknessMinimum;\n\t#else\n\t\tmaterial.iridescenceThickness = iridescenceThicknessMaximum;\n\t#endif\n#endif\n#ifdef USE_SHEEN\n\tmaterial.sheenColor = sheenColor;\n\t#ifdef USE_SHEENCOLORMAP\n\t\tmaterial.sheenColor *= texture2D( sheenColorMap, vUv ).rgb;\n\t#endif\n\tmaterial.sheenRoughness = clamp( sheenRoughness, 0.07, 1.0 );\n\t#ifdef USE_SHEENROUGHNESSMAP\n\t\tmaterial.sheenRoughness *= texture2D( sheenRoughnessMap, vUv ).a;\n\t#endif\n#endif",lights_physical_pars_fragment:"struct PhysicalMaterial {\n\tvec3 diffuseColor;\n\tfloat roughness;\n\tvec3 specularColor;\n\tfloat specularF90;\n\t#ifdef USE_CLEARCOAT\n\t\tfloat clearcoat;\n\t\tfloat clearcoatRoughness;\n\t\tvec3 clearcoatF0;\n\t\tfloat clearcoatF90;\n\t#endif\n\t#ifdef USE_IRIDESCENCE\n\t\tfloat iridescence;\n\t\tfloat iridescenceIOR;\n\t\tfloat iridescenceThickness;\n\t\tvec3 iridescenceFresnel;\n\t\tvec3 iridescenceF0;\n\t#endif\n\t#ifdef USE_SHEEN\n\t\tvec3 sheenColor;\n\t\tfloat sheenRoughness;\n\t#endif\n\t#ifdef IOR\n\t\tfloat ior;\n\t#endif\n\t#ifdef USE_TRANSMISSION\n\t\tfloat transmission;\n\t\tfloat transmissionAlpha;\n\t\tfloat thickness;\n\t\tfloat attenuationDistance;\n\t\tvec3 attenuationColor;\n\t#endif\n};\nvec3 clearcoatSpecular = vec3( 0.0 );\nvec3 sheenSpecular = vec3( 0.0 );\nfloat IBLSheenBRDF( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tfloat r2 = roughness * roughness;\n\tfloat a = roughness < 0.25 ? -339.2 * r2 + 161.4 * roughness - 25.9 : -8.48 * r2 + 14.3 * roughness - 9.95;\n\tfloat b = roughness < 0.25 ? 44.0 * r2 - 23.7 * roughness + 3.26 : 1.97 * r2 - 3.27 * roughness + 0.72;\n\tfloat DG = exp( a * dotNV + b ) + ( roughness < 0.25 ? 0.0 : 0.1 * ( roughness - 0.25 ) );\n\treturn saturate( DG * RECIPROCAL_PI );\n}\nvec2 DFGApprox( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tconst vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );\n\tconst vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );\n\tvec4 r = roughness * c0 + c1;\n\tfloat a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;\n\tvec2 fab = vec2( - 1.04, 1.04 ) * a004 + r.zw;\n\treturn fab;\n}\nvec3 EnvironmentBRDF( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness ) {\n\tvec2 fab = DFGApprox( normal, viewDir, roughness );\n\treturn specularColor * fab.x + specularF90 * fab.y;\n}\n#ifdef USE_IRIDESCENCE\nvoid computeMultiscatteringIridescence( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float iridescence, const in vec3 iridescenceF0, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {\n#else\nvoid computeMultiscattering( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {\n#endif\n\tvec2 fab = DFGApprox( normal, viewDir, roughness );\n\t#ifdef USE_IRIDESCENCE\n\t\tvec3 Fr = mix( specularColor, iridescenceF0, iridescence );\n\t#else\n\t\tvec3 Fr = specularColor;\n\t#endif\n\tvec3 FssEss = Fr * fab.x + specularF90 * fab.y;\n\tfloat Ess = fab.x + fab.y;\n\tfloat Ems = 1.0 - Ess;\n\tvec3 Favg = Fr + ( 1.0 - Fr ) * 0.047619;\tvec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );\n\tsingleScatter += FssEss;\n\tmultiScatter += Fms * Ems;\n}\n#if NUM_RECT_AREA_LIGHTS > 0\n\tvoid RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\t\tvec3 normal = geometry.normal;\n\t\tvec3 viewDir = geometry.viewDir;\n\t\tvec3 position = geometry.position;\n\t\tvec3 lightPos = rectAreaLight.position;\n\t\tvec3 halfWidth = rectAreaLight.halfWidth;\n\t\tvec3 halfHeight = rectAreaLight.halfHeight;\n\t\tvec3 lightColor = rectAreaLight.color;\n\t\tfloat roughness = material.roughness;\n\t\tvec3 rectCoords[ 4 ];\n\t\trectCoords[ 0 ] = lightPos + halfWidth - halfHeight;\t\trectCoords[ 1 ] = lightPos - halfWidth - halfHeight;\n\t\trectCoords[ 2 ] = lightPos - halfWidth + halfHeight;\n\t\trectCoords[ 3 ] = lightPos + halfWidth + halfHeight;\n\t\tvec2 uv = LTC_Uv( normal, viewDir, roughness );\n\t\tvec4 t1 = texture2D( ltc_1, uv );\n\t\tvec4 t2 = texture2D( ltc_2, uv );\n\t\tmat3 mInv = mat3(\n\t\t\tvec3( t1.x, 0, t1.y ),\n\t\t\tvec3(    0, 1,    0 ),\n\t\t\tvec3( t1.z, 0, t1.w )\n\t\t);\n\t\tvec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );\n\t\treflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );\n\t\treflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );\n\t}\n#endif\nvoid RE_Direct_Physical( const in IncidentLight directLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\t#ifdef USE_CLEARCOAT\n\t\tfloat dotNLcc = saturate( dot( geometry.clearcoatNormal, directLight.direction ) );\n\t\tvec3 ccIrradiance = dotNLcc * directLight.color;\n\t\tclearcoatSpecular += ccIrradiance * BRDF_GGX( directLight.direction, geometry.viewDir, geometry.clearcoatNormal, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );\n\t#endif\n\t#ifdef USE_SHEEN\n\t\tsheenSpecular += irradiance * BRDF_Sheen( directLight.direction, geometry.viewDir, geometry.normal, material.sheenColor, material.sheenRoughness );\n\t#endif\n\t#ifdef USE_IRIDESCENCE\n\t\treflectedLight.directSpecular += irradiance * BRDF_GGX_Iridescence( directLight.direction, geometry.viewDir, geometry.normal, material.specularColor, material.specularF90, material.iridescence, material.iridescenceFresnel, material.roughness );\n\t#else\n\t\treflectedLight.directSpecular += irradiance * BRDF_GGX( directLight.direction, geometry.viewDir, geometry.normal, material.specularColor, material.specularF90, material.roughness );\n\t#endif\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearcoatRadiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {\n\t#ifdef USE_CLEARCOAT\n\t\tclearcoatSpecular += clearcoatRadiance * EnvironmentBRDF( geometry.clearcoatNormal, geometry.viewDir, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );\n\t#endif\n\t#ifdef USE_SHEEN\n\t\tsheenSpecular += irradiance * material.sheenColor * IBLSheenBRDF( geometry.normal, geometry.viewDir, material.sheenRoughness );\n\t#endif\n\tvec3 singleScattering = vec3( 0.0 );\n\tvec3 multiScattering = vec3( 0.0 );\n\tvec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;\n\t#ifdef USE_IRIDESCENCE\n\t\tcomputeMultiscatteringIridescence( geometry.normal, geometry.viewDir, material.specularColor, material.specularF90, material.iridescence, material.iridescenceFresnel, material.roughness, singleScattering, multiScattering );\n\t#else\n\t\tcomputeMultiscattering( geometry.normal, geometry.viewDir, material.specularColor, material.specularF90, material.roughness, singleScattering, multiScattering );\n\t#endif\n\tvec3 totalScattering = singleScattering + multiScattering;\n\tvec3 diffuse = material.diffuseColor * ( 1.0 - max( max( totalScattering.r, totalScattering.g ), totalScattering.b ) );\n\treflectedLight.indirectSpecular += radiance * singleScattering;\n\treflectedLight.indirectSpecular += multiScattering * cosineWeightedIrradiance;\n\treflectedLight.indirectDiffuse += diffuse * cosineWeightedIrradiance;\n}\n#define RE_Direct\t\t\t\tRE_Direct_Physical\n#define RE_Direct_RectArea\t\tRE_Direct_RectArea_Physical\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Physical\n#define RE_IndirectSpecular\t\tRE_IndirectSpecular_Physical\nfloat computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {\n\treturn saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );\n}",lights_fragment_begin:"\nGeometricContext geometry;\ngeometry.position = - vViewPosition;\ngeometry.normal = normal;\ngeometry.viewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );\n#ifdef USE_CLEARCOAT\n\tgeometry.clearcoatNormal = clearcoatNormal;\n#endif\n#ifdef USE_IRIDESCENCE\n\tfloat dotNVi = saturate( dot( normal, geometry.viewDir ) );\n\tif ( material.iridescenceThickness == 0.0 ) {\n\t\tmaterial.iridescence = 0.0;\n\t} else {\n\t\tmaterial.iridescence = saturate( material.iridescence );\n\t}\n\tif ( material.iridescence > 0.0 ) {\n\t\tmaterial.iridescenceFresnel = evalIridescence( 1.0, material.iridescenceIOR, dotNVi, material.iridescenceThickness, material.specularColor );\n\t\tmaterial.iridescenceF0 = Schlick_to_F0( material.iridescenceFresnel, 1.0, dotNVi );\n\t}\n#endif\nIncidentLight directLight;\n#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )\n\tPointLight pointLight;\n\t#if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0\n\tPointLightShadow pointLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tpointLight = pointLights[ i ];\n\t\tgetPointLightInfo( pointLight, geometry, directLight );\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS )\n\t\tpointLightShadow = pointLightShadows[ i ];\n\t\tdirectLight.color *= all( bvec2( directLight.visible, receiveShadow ) ) ? getPointShadow( pointShadowMap[ i ], pointLightShadow.shadowMapSize, pointLightShadow.shadowBias, pointLightShadow.shadowRadius, vPointShadowCoord[ i ], pointLightShadow.shadowCameraNear, pointLightShadow.shadowCameraFar ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )\n\tSpotLight spotLight;\n\tvec4 spotColor;\n\tvec3 spotLightCoord;\n\tbool inSpotLightMap;\n\t#if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0\n\tSpotLightShadow spotLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tspotLight = spotLights[ i ];\n\t\tgetSpotLightInfo( spotLight, geometry, directLight );\n\t\t#if ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )\n\t\t#define SPOT_LIGHT_MAP_INDEX UNROLLED_LOOP_INDEX\n\t\t#elif ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )\n\t\t#define SPOT_LIGHT_MAP_INDEX NUM_SPOT_LIGHT_MAPS\n\t\t#else\n\t\t#define SPOT_LIGHT_MAP_INDEX ( UNROLLED_LOOP_INDEX - NUM_SPOT_LIGHT_SHADOWS + NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )\n\t\t#endif\n\t\t#if ( SPOT_LIGHT_MAP_INDEX < NUM_SPOT_LIGHT_MAPS )\n\t\t\tspotLightCoord = vSpotLightCoord[ i ].xyz / vSpotLightCoord[ i ].w;\n\t\t\tinSpotLightMap = all( lessThan( abs( spotLightCoord * 2. - 1. ), vec3( 1.0 ) ) );\n\t\t\tspotColor = texture2D( spotLightMap[ SPOT_LIGHT_MAP_INDEX ], spotLightCoord.xy );\n\t\t\tdirectLight.color = inSpotLightMap ? directLight.color * spotColor.rgb : directLight.color;\n\t\t#endif\n\t\t#undef SPOT_LIGHT_MAP_INDEX\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )\n\t\tspotLightShadow = spotLightShadows[ i ];\n\t\tdirectLight.color *= all( bvec2( directLight.visible, receiveShadow ) ) ? getShadow( spotShadowMap[ i ], spotLightShadow.shadowMapSize, spotLightShadow.shadowBias, spotLightShadow.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )\n\tDirectionalLight directionalLight;\n\t#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0\n\tDirectionalLightShadow directionalLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tdirectionalLight = directionalLights[ i ];\n\t\tgetDirectionalLightInfo( directionalLight, geometry, directLight );\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )\n\t\tdirectionalLightShadow = directionalLightShadows[ i ];\n\t\tdirectLight.color *= all( bvec2( directLight.visible, receiveShadow ) ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )\n\tRectAreaLight rectAreaLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {\n\t\trectAreaLight = rectAreaLights[ i ];\n\t\tRE_Direct_RectArea( rectAreaLight, geometry, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if defined( RE_IndirectDiffuse )\n\tvec3 iblIrradiance = vec3( 0.0 );\n\tvec3 irradiance = getAmbientLightIrradiance( ambientLightColor );\n\tirradiance += getLightProbeIrradiance( lightProbe, geometry.normal );\n\t#if ( NUM_HEMI_LIGHTS > 0 )\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {\n\t\t\tirradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry.normal );\n\t\t}\n\t\t#pragma unroll_loop_end\n\t#endif\n#endif\n#if defined( RE_IndirectSpecular )\n\tvec3 radiance = vec3( 0.0 );\n\tvec3 clearcoatRadiance = vec3( 0.0 );\n#endif",lights_fragment_maps:"#if defined( RE_IndirectDiffuse )\n\t#ifdef USE_LIGHTMAP\n\t\tvec4 lightMapTexel = texture2D( lightMap, vUv2 );\n\t\tvec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;\n\t\tirradiance += lightMapIrradiance;\n\t#endif\n\t#if defined( USE_ENVMAP ) && defined( STANDARD ) && defined( ENVMAP_TYPE_CUBE_UV )\n\t\tiblIrradiance += getIBLIrradiance( geometry.normal );\n\t#endif\n#endif\n#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )\n\tradiance += getIBLRadiance( geometry.viewDir, geometry.normal, material.roughness );\n\t#ifdef USE_CLEARCOAT\n\t\tclearcoatRadiance += getIBLRadiance( geometry.viewDir, geometry.clearcoatNormal, material.clearcoatRoughness );\n\t#endif\n#endif",lights_fragment_end:"#if defined( RE_IndirectDiffuse )\n\tRE_IndirectDiffuse( irradiance, geometry, material, reflectedLight );\n#endif\n#if defined( RE_IndirectSpecular )\n\tRE_IndirectSpecular( radiance, iblIrradiance, clearcoatRadiance, geometry, material, reflectedLight );\n#endif",logdepthbuf_fragment:"#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )\n\tgl_FragDepthEXT = vIsPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;\n#endif",logdepthbuf_pars_fragment:"#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )\n\tuniform float logDepthBufFC;\n\tvarying float vFragDepth;\n\tvarying float vIsPerspective;\n#endif",logdepthbuf_pars_vertex:"#ifdef USE_LOGDEPTHBUF\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tvarying float vFragDepth;\n\t\tvarying float vIsPerspective;\n\t#else\n\t\tuniform float logDepthBufFC;\n\t#endif\n#endif",logdepthbuf_vertex:"#ifdef USE_LOGDEPTHBUF\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tvFragDepth = 1.0 + gl_Position.w;\n\t\tvIsPerspective = float( isPerspectiveMatrix( projectionMatrix ) );\n\t#else\n\t\tif ( isPerspectiveMatrix( projectionMatrix ) ) {\n\t\t\tgl_Position.z = log2( max( EPSILON, gl_Position.w + 1.0 ) ) * logDepthBufFC - 1.0;\n\t\t\tgl_Position.z *= gl_Position.w;\n\t\t}\n\t#endif\n#endif",map_fragment:"#ifdef USE_MAP\n\tvec4 sampledDiffuseColor = texture2D( map, vUv );\n\t#ifdef DECODE_VIDEO_TEXTURE\n\t\tsampledDiffuseColor = vec4( mix( pow( sampledDiffuseColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), sampledDiffuseColor.rgb * 0.0773993808, vec3( lessThanEqual( sampledDiffuseColor.rgb, vec3( 0.04045 ) ) ) ), sampledDiffuseColor.w );\n\t#endif\n\tdiffuseColor *= sampledDiffuseColor;\n#endif",map_pars_fragment:"#ifdef USE_MAP\n\tuniform sampler2D map;\n#endif",map_particle_fragment:"#if defined( USE_MAP ) || defined( USE_ALPHAMAP )\n\tvec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;\n#endif\n#ifdef USE_MAP\n\tdiffuseColor *= texture2D( map, uv );\n#endif\n#ifdef USE_ALPHAMAP\n\tdiffuseColor.a *= texture2D( alphaMap, uv ).g;\n#endif",map_particle_pars_fragment:"#if defined( USE_MAP ) || defined( USE_ALPHAMAP )\n\tuniform mat3 uvTransform;\n#endif\n#ifdef USE_MAP\n\tuniform sampler2D map;\n#endif\n#ifdef USE_ALPHAMAP\n\tuniform sampler2D alphaMap;\n#endif",metalnessmap_fragment:"float metalnessFactor = metalness;\n#ifdef USE_METALNESSMAP\n\tvec4 texelMetalness = texture2D( metalnessMap, vUv );\n\tmetalnessFactor *= texelMetalness.b;\n#endif",metalnessmap_pars_fragment:"#ifdef USE_METALNESSMAP\n\tuniform sampler2D metalnessMap;\n#endif",morphcolor_vertex:"#if defined( USE_MORPHCOLORS ) && defined( MORPHTARGETS_TEXTURE )\n\tvColor *= morphTargetBaseInfluence;\n\tfor ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {\n\t\t#if defined( USE_COLOR_ALPHA )\n\t\t\tif ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ) * morphTargetInfluences[ i ];\n\t\t#elif defined( USE_COLOR )\n\t\t\tif ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ).rgb * morphTargetInfluences[ i ];\n\t\t#endif\n\t}\n#endif",morphnormal_vertex:"#ifdef USE_MORPHNORMALS\n\tobjectNormal *= morphTargetBaseInfluence;\n\t#ifdef MORPHTARGETS_TEXTURE\n\t\tfor ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {\n\t\t\tif ( morphTargetInfluences[ i ] != 0.0 ) objectNormal += getMorph( gl_VertexID, i, 1 ).xyz * morphTargetInfluences[ i ];\n\t\t}\n\t#else\n\t\tobjectNormal += morphNormal0 * morphTargetInfluences[ 0 ];\n\t\tobjectNormal += morphNormal1 * morphTargetInfluences[ 1 ];\n\t\tobjectNormal += morphNormal2 * morphTargetInfluences[ 2 ];\n\t\tobjectNormal += morphNormal3 * morphTargetInfluences[ 3 ];\n\t#endif\n#endif",morphtarget_pars_vertex:"#ifdef USE_MORPHTARGETS\n\tuniform float morphTargetBaseInfluence;\n\t#ifdef MORPHTARGETS_TEXTURE\n\t\tuniform float morphTargetInfluences[ MORPHTARGETS_COUNT ];\n\t\tuniform sampler2DArray morphTargetsTexture;\n\t\tuniform ivec2 morphTargetsTextureSize;\n\t\tvec4 getMorph( const in int vertexIndex, const in int morphTargetIndex, const in int offset ) {\n\t\t\tint texelIndex = vertexIndex * MORPHTARGETS_TEXTURE_STRIDE + offset;\n\t\t\tint y = texelIndex / morphTargetsTextureSize.x;\n\t\t\tint x = texelIndex - y * morphTargetsTextureSize.x;\n\t\t\tivec3 morphUV = ivec3( x, y, morphTargetIndex );\n\t\t\treturn texelFetch( morphTargetsTexture, morphUV, 0 );\n\t\t}\n\t#else\n\t\t#ifndef USE_MORPHNORMALS\n\t\t\tuniform float morphTargetInfluences[ 8 ];\n\t\t#else\n\t\t\tuniform float morphTargetInfluences[ 4 ];\n\t\t#endif\n\t#endif\n#endif",morphtarget_vertex:"#ifdef USE_MORPHTARGETS\n\ttransformed *= morphTargetBaseInfluence;\n\t#ifdef MORPHTARGETS_TEXTURE\n\t\tfor ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {\n\t\t\tif ( morphTargetInfluences[ i ] != 0.0 ) transformed += getMorph( gl_VertexID, i, 0 ).xyz * morphTargetInfluences[ i ];\n\t\t}\n\t#else\n\t\ttransformed += morphTarget0 * morphTargetInfluences[ 0 ];\n\t\ttransformed += morphTarget1 * morphTargetInfluences[ 1 ];\n\t\ttransformed += morphTarget2 * morphTargetInfluences[ 2 ];\n\t\ttransformed += morphTarget3 * morphTargetInfluences[ 3 ];\n\t\t#ifndef USE_MORPHNORMALS\n\t\t\ttransformed += morphTarget4 * morphTargetInfluences[ 4 ];\n\t\t\ttransformed += morphTarget5 * morphTargetInfluences[ 5 ];\n\t\t\ttransformed += morphTarget6 * morphTargetInfluences[ 6 ];\n\t\t\ttransformed += morphTarget7 * morphTargetInfluences[ 7 ];\n\t\t#endif\n\t#endif\n#endif",normal_fragment_begin:"float faceDirection = gl_FrontFacing ? 1.0 : - 1.0;\n#ifdef FLAT_SHADED\n\tvec3 fdx = dFdx( vViewPosition );\n\tvec3 fdy = dFdy( vViewPosition );\n\tvec3 normal = normalize( cross( fdx, fdy ) );\n#else\n\tvec3 normal = normalize( vNormal );\n\t#ifdef DOUBLE_SIDED\n\t\tnormal = normal * faceDirection;\n\t#endif\n\t#ifdef USE_TANGENT\n\t\tvec3 tangent = normalize( vTangent );\n\t\tvec3 bitangent = normalize( vBitangent );\n\t\t#ifdef DOUBLE_SIDED\n\t\t\ttangent = tangent * faceDirection;\n\t\t\tbitangent = bitangent * faceDirection;\n\t\t#endif\n\t\t#if defined( TANGENTSPACE_NORMALMAP ) || defined( USE_CLEARCOAT_NORMALMAP )\n\t\t\tmat3 vTBN = mat3( tangent, bitangent, normal );\n\t\t#endif\n\t#endif\n#endif\nvec3 geometryNormal = normal;",normal_fragment_maps:"#ifdef OBJECTSPACE_NORMALMAP\n\tnormal = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;\n\t#ifdef FLIP_SIDED\n\t\tnormal = - normal;\n\t#endif\n\t#ifdef DOUBLE_SIDED\n\t\tnormal = normal * faceDirection;\n\t#endif\n\tnormal = normalize( normalMatrix * normal );\n#elif defined( TANGENTSPACE_NORMALMAP )\n\tvec3 mapN = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;\n\tmapN.xy *= normalScale;\n\t#ifdef USE_TANGENT\n\t\tnormal = normalize( vTBN * mapN );\n\t#else\n\t\tnormal = perturbNormal2Arb( - vViewPosition, normal, mapN, faceDirection );\n\t#endif\n#elif defined( USE_BUMPMAP )\n\tnormal = perturbNormalArb( - vViewPosition, normal, dHdxy_fwd(), faceDirection );\n#endif",normal_pars_fragment:"#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n\t#ifdef USE_TANGENT\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\t#endif\n#endif",normal_pars_vertex:"#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n\t#ifdef USE_TANGENT\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\t#endif\n#endif",normal_vertex:"#ifndef FLAT_SHADED\n\tvNormal = normalize( transformedNormal );\n\t#ifdef USE_TANGENT\n\t\tvTangent = normalize( transformedTangent );\n\t\tvBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );\n\t#endif\n#endif",normalmap_pars_fragment:"#ifdef USE_NORMALMAP\n\tuniform sampler2D normalMap;\n\tuniform vec2 normalScale;\n#endif\n#ifdef OBJECTSPACE_NORMALMAP\n\tuniform mat3 normalMatrix;\n#endif\n#if ! defined ( USE_TANGENT ) && ( defined ( TANGENTSPACE_NORMALMAP ) || defined ( USE_CLEARCOAT_NORMALMAP ) )\n\tvec3 perturbNormal2Arb( vec3 eye_pos, vec3 surf_norm, vec3 mapN, float faceDirection ) {\n\t\tvec3 q0 = dFdx( eye_pos.xyz );\n\t\tvec3 q1 = dFdy( eye_pos.xyz );\n\t\tvec2 st0 = dFdx( vUv.st );\n\t\tvec2 st1 = dFdy( vUv.st );\n\t\tvec3 N = surf_norm;\n\t\tvec3 q1perp = cross( q1, N );\n\t\tvec3 q0perp = cross( N, q0 );\n\t\tvec3 T = q1perp * st0.x + q0perp * st1.x;\n\t\tvec3 B = q1perp * st0.y + q0perp * st1.y;\n\t\tfloat det = max( dot( T, T ), dot( B, B ) );\n\t\tfloat scale = ( det == 0.0 ) ? 0.0 : faceDirection * inversesqrt( det );\n\t\treturn normalize( T * ( mapN.x * scale ) + B * ( mapN.y * scale ) + N * mapN.z );\n\t}\n#endif",clearcoat_normal_fragment_begin:"#ifdef USE_CLEARCOAT\n\tvec3 clearcoatNormal = geometryNormal;\n#endif",clearcoat_normal_fragment_maps:"#ifdef USE_CLEARCOAT_NORMALMAP\n\tvec3 clearcoatMapN = texture2D( clearcoatNormalMap, vUv ).xyz * 2.0 - 1.0;\n\tclearcoatMapN.xy *= clearcoatNormalScale;\n\t#ifdef USE_TANGENT\n\t\tclearcoatNormal = normalize( vTBN * clearcoatMapN );\n\t#else\n\t\tclearcoatNormal = perturbNormal2Arb( - vViewPosition, clearcoatNormal, clearcoatMapN, faceDirection );\n\t#endif\n#endif",clearcoat_pars_fragment:"#ifdef USE_CLEARCOATMAP\n\tuniform sampler2D clearcoatMap;\n#endif\n#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\tuniform sampler2D clearcoatRoughnessMap;\n#endif\n#ifdef USE_CLEARCOAT_NORMALMAP\n\tuniform sampler2D clearcoatNormalMap;\n\tuniform vec2 clearcoatNormalScale;\n#endif",iridescence_pars_fragment:"#ifdef USE_IRIDESCENCEMAP\n\tuniform sampler2D iridescenceMap;\n#endif\n#ifdef USE_IRIDESCENCE_THICKNESSMAP\n\tuniform sampler2D iridescenceThicknessMap;\n#endif",output_fragment:"#ifdef OPAQUE\ndiffuseColor.a = 1.0;\n#endif\n#ifdef USE_TRANSMISSION\ndiffuseColor.a *= material.transmissionAlpha + 0.1;\n#endif\ngl_FragColor = vec4( outgoingLight, diffuseColor.a );",packing:"vec3 packNormalToRGB( const in vec3 normal ) {\n\treturn normalize( normal ) * 0.5 + 0.5;\n}\nvec3 unpackRGBToNormal( const in vec3 rgb ) {\n\treturn 2.0 * rgb.xyz - 1.0;\n}\nconst float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;\nconst vec3 PackFactors = vec3( 256. * 256. * 256., 256. * 256., 256. );\nconst vec4 UnpackFactors = UnpackDownscale / vec4( PackFactors, 1. );\nconst float ShiftRight8 = 1. / 256.;\nvec4 packDepthToRGBA( const in float v ) {\n\tvec4 r = vec4( fract( v * PackFactors ), v );\n\tr.yzw -= r.xyz * ShiftRight8;\treturn r * PackUpscale;\n}\nfloat unpackRGBAToDepth( const in vec4 v ) {\n\treturn dot( v, UnpackFactors );\n}\nvec2 packDepthToRG( in highp float v ) {\n\treturn packDepthToRGBA( v ).yx;\n}\nfloat unpackRGToDepth( const in highp vec2 v ) {\n\treturn unpackRGBAToDepth( vec4( v.xy, 0.0, 0.0 ) );\n}\nvec4 pack2HalfToRGBA( vec2 v ) {\n\tvec4 r = vec4( v.x, fract( v.x * 255.0 ), v.y, fract( v.y * 255.0 ) );\n\treturn vec4( r.x - r.y / 255.0, r.y, r.z - r.w / 255.0, r.w );\n}\nvec2 unpackRGBATo2Half( vec4 v ) {\n\treturn vec2( v.x + ( v.y / 255.0 ), v.z + ( v.w / 255.0 ) );\n}\nfloat viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {\n\treturn ( viewZ + near ) / ( near - far );\n}\nfloat orthographicDepthToViewZ( const in float linearClipZ, const in float near, const in float far ) {\n\treturn linearClipZ * ( near - far ) - near;\n}\nfloat viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {\n\treturn ( ( near + viewZ ) * far ) / ( ( far - near ) * viewZ );\n}\nfloat perspectiveDepthToViewZ( const in float invClipZ, const in float near, const in float far ) {\n\treturn ( near * far ) / ( ( far - near ) * invClipZ - far );\n}",premultiplied_alpha_fragment:"#ifdef PREMULTIPLIED_ALPHA\n\tgl_FragColor.rgb *= gl_FragColor.a;\n#endif",project_vertex:"vec4 mvPosition = vec4( transformed, 1.0 );\n#ifdef USE_INSTANCING\n\tmvPosition = instanceMatrix * mvPosition;\n#endif\nmvPosition = modelViewMatrix * mvPosition;\ngl_Position = projectionMatrix * mvPosition;",dithering_fragment:"#ifdef DITHERING\n\tgl_FragColor.rgb = dithering( gl_FragColor.rgb );\n#endif",dithering_pars_fragment:"#ifdef DITHERING\n\tvec3 dithering( vec3 color ) {\n\t\tfloat grid_position = rand( gl_FragCoord.xy );\n\t\tvec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );\n\t\tdither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );\n\t\treturn color + dither_shift_RGB;\n\t}\n#endif",roughnessmap_fragment:"float roughnessFactor = roughness;\n#ifdef USE_ROUGHNESSMAP\n\tvec4 texelRoughness = texture2D( roughnessMap, vUv );\n\troughnessFactor *= texelRoughness.g;\n#endif",roughnessmap_pars_fragment:"#ifdef USE_ROUGHNESSMAP\n\tuniform sampler2D roughnessMap;\n#endif",shadowmap_pars_fragment:"#if NUM_SPOT_LIGHT_COORDS > 0\n  varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];\n#endif\n#if NUM_SPOT_LIGHT_MAPS > 0\n  uniform sampler2D spotLightMap[ NUM_SPOT_LIGHT_MAPS ];\n#endif\n#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tstruct DirectionalLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];\n\t\tstruct SpotLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tstruct PointLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t\tfloat shadowCameraNear;\n\t\t\tfloat shadowCameraFar;\n\t\t};\n\t\tuniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];\n\t#endif\n\tfloat texture2DCompare( sampler2D depths, vec2 uv, float compare ) {\n\t\treturn step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );\n\t}\n\tvec2 texture2DDistribution( sampler2D shadow, vec2 uv ) {\n\t\treturn unpackRGBATo2Half( texture2D( shadow, uv ) );\n\t}\n\tfloat VSMShadow (sampler2D shadow, vec2 uv, float compare ){\n\t\tfloat occlusion = 1.0;\n\t\tvec2 distribution = texture2DDistribution( shadow, uv );\n\t\tfloat hard_shadow = step( compare , distribution.x );\n\t\tif (hard_shadow != 1.0 ) {\n\t\t\tfloat distance = compare - distribution.x ;\n\t\t\tfloat variance = max( 0.00000, distribution.y * distribution.y );\n\t\t\tfloat softness_probability = variance / (variance + distance * distance );\t\t\tsoftness_probability = clamp( ( softness_probability - 0.3 ) / ( 0.95 - 0.3 ), 0.0, 1.0 );\t\t\tocclusion = clamp( max( hard_shadow, softness_probability ), 0.0, 1.0 );\n\t\t}\n\t\treturn occlusion;\n\t}\n\tfloat getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord ) {\n\t\tfloat shadow = 1.0;\n\t\tshadowCoord.xyz /= shadowCoord.w;\n\t\tshadowCoord.z += shadowBias;\n\t\tbvec4 inFrustumVec = bvec4 ( shadowCoord.x >= 0.0, shadowCoord.x <= 1.0, shadowCoord.y >= 0.0, shadowCoord.y <= 1.0 );\n\t\tbool inFrustum = all( inFrustumVec );\n\t\tbvec2 frustumTestVec = bvec2( inFrustum, shadowCoord.z <= 1.0 );\n\t\tbool frustumTest = all( frustumTestVec );\n\t\tif ( frustumTest ) {\n\t\t#if defined( SHADOWMAP_TYPE_PCF )\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n\t\t\tfloat dx0 = - texelSize.x * shadowRadius;\n\t\t\tfloat dy0 = - texelSize.y * shadowRadius;\n\t\t\tfloat dx1 = + texelSize.x * shadowRadius;\n\t\t\tfloat dy1 = + texelSize.y * shadowRadius;\n\t\t\tfloat dx2 = dx0 / 2.0;\n\t\t\tfloat dy2 = dy0 / 2.0;\n\t\t\tfloat dx3 = dx1 / 2.0;\n\t\t\tfloat dy3 = dy1 / 2.0;\n\t\t\tshadow = (\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )\n\t\t\t) * ( 1.0 / 17.0 );\n\t\t#elif defined( SHADOWMAP_TYPE_PCF_SOFT )\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n\t\t\tfloat dx = texelSize.x;\n\t\t\tfloat dy = texelSize.y;\n\t\t\tvec2 uv = shadowCoord.xy;\n\t\t\tvec2 f = fract( uv * shadowMapSize + 0.5 );\n\t\t\tuv -= f * texelSize;\n\t\t\tshadow = (\n\t\t\t\ttexture2DCompare( shadowMap, uv, shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + vec2( dx, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + vec2( 0.0, dy ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + texelSize, shadowCoord.z ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( -dx, 0.0 ), shadowCoord.z ),\n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 0.0 ), shadowCoord.z ),\n\t\t\t\t\t f.x ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( -dx, dy ), shadowCoord.z ),\n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, dy ), shadowCoord.z ),\n\t\t\t\t\t f.x ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( 0.0, -dy ), shadowCoord.z ),\n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 0.0, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t f.y ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( dx, -dy ), shadowCoord.z ),\n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( dx, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t f.y ) +\n\t\t\t\tmix( mix( texture2DCompare( shadowMap, uv + vec2( -dx, -dy ), shadowCoord.z ),\n\t\t\t\t\t\t  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, -dy ), shadowCoord.z ),\n\t\t\t\t\t\t  f.x ),\n\t\t\t\t\t mix( texture2DCompare( shadowMap, uv + vec2( -dx, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t\t  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t\t  f.x ),\n\t\t\t\t\t f.y )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#elif defined( SHADOWMAP_TYPE_VSM )\n\t\t\tshadow = VSMShadow( shadowMap, shadowCoord.xy, shadowCoord.z );\n\t\t#else\n\t\t\tshadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );\n\t\t#endif\n\t\t}\n\t\treturn shadow;\n\t}\n\tvec2 cubeToUV( vec3 v, float texelSizeY ) {\n\t\tvec3 absV = abs( v );\n\t\tfloat scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );\n\t\tabsV *= scaleToCube;\n\t\tv *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );\n\t\tvec2 planar = v.xy;\n\t\tfloat almostATexel = 1.5 * texelSizeY;\n\t\tfloat almostOne = 1.0 - almostATexel;\n\t\tif ( absV.z >= almostOne ) {\n\t\t\tif ( v.z > 0.0 )\n\t\t\t\tplanar.x = 4.0 - v.x;\n\t\t} else if ( absV.x >= almostOne ) {\n\t\t\tfloat signX = sign( v.x );\n\t\t\tplanar.x = v.z * signX + 2.0 * signX;\n\t\t} else if ( absV.y >= almostOne ) {\n\t\t\tfloat signY = sign( v.y );\n\t\t\tplanar.x = v.x + 2.0 * signY + 2.0;\n\t\t\tplanar.y = v.z * signY - 2.0;\n\t\t}\n\t\treturn vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );\n\t}\n\tfloat getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {\n\t\tvec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );\n\t\tvec3 lightToPosition = shadowCoord.xyz;\n\t\tfloat dp = ( length( lightToPosition ) - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );\t\tdp += shadowBias;\n\t\tvec3 bd3D = normalize( lightToPosition );\n\t\t#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT ) || defined( SHADOWMAP_TYPE_VSM )\n\t\t\tvec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;\n\t\t\treturn (\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#else\n\t\t\treturn texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );\n\t\t#endif\n\t}\n#endif",shadowmap_pars_vertex:"#if NUM_SPOT_LIGHT_COORDS > 0\n  uniform mat4 spotLightMatrix[ NUM_SPOT_LIGHT_COORDS ];\n  varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];\n#endif\n#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t\tuniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tstruct DirectionalLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\t\tstruct SpotLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t\tuniform mat4 pointShadowMatrix[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tstruct PointLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t\tfloat shadowCameraNear;\n\t\t\tfloat shadowCameraFar;\n\t\t};\n\t\tuniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];\n\t#endif\n#endif",shadowmap_vertex:"#if defined( USE_SHADOWMAP ) || ( NUM_SPOT_LIGHT_COORDS > 0 )\n\t#if NUM_DIR_LIGHT_SHADOWS > 0 || NUM_SPOT_LIGHT_COORDS > 0 || NUM_POINT_LIGHT_SHADOWS > 0\n\t\tvec3 shadowWorldNormal = inverseTransformDirection( transformedNormal, viewMatrix );\n\t\tvec4 shadowWorldPosition;\n\t#endif\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {\n\t\tshadowWorldPosition = worldPosition + vec4( shadowWorldNormal * directionalLightShadows[ i ].shadowNormalBias, 0 );\n\t\tvDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * shadowWorldPosition;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_SPOT_LIGHT_COORDS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHT_COORDS; i ++ ) {\n\t\tshadowWorldPosition = worldPosition;\n\t\t#if ( defined( USE_SHADOWMAP ) && UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )\n\t\t\tshadowWorldPosition.xyz += shadowWorldNormal * spotLightShadows[ i ].shadowNormalBias;\n\t\t#endif\n\t\tvSpotLightCoord[ i ] = spotLightMatrix[ i ] * shadowWorldPosition;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {\n\t\tshadowWorldPosition = worldPosition + vec4( shadowWorldNormal * pointLightShadows[ i ].shadowNormalBias, 0 );\n\t\tvPointShadowCoord[ i ] = pointShadowMatrix[ i ] * shadowWorldPosition;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n#endif",shadowmask_pars_fragment:"float getShadowMask() {\n\tfloat shadow = 1.0;\n\t#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\tDirectionalLightShadow directionalLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {\n\t\tdirectionalLight = directionalLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\tSpotLightShadow spotLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {\n\t\tspotLight = spotLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\tPointLightShadow pointLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {\n\t\tpointLight = pointLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#endif\n\treturn shadow;\n}",skinbase_vertex:"#ifdef USE_SKINNING\n\tmat4 boneMatX = getBoneMatrix( skinIndex.x );\n\tmat4 boneMatY = getBoneMatrix( skinIndex.y );\n\tmat4 boneMatZ = getBoneMatrix( skinIndex.z );\n\tmat4 boneMatW = getBoneMatrix( skinIndex.w );\n#endif",skinning_pars_vertex:"#ifdef USE_SKINNING\n\tuniform mat4 bindMatrix;\n\tuniform mat4 bindMatrixInverse;\n\tuniform highp sampler2D boneTexture;\n\tuniform int boneTextureSize;\n\tmat4 getBoneMatrix( const in float i ) {\n\t\tfloat j = i * 4.0;\n\t\tfloat x = mod( j, float( boneTextureSize ) );\n\t\tfloat y = floor( j / float( boneTextureSize ) );\n\t\tfloat dx = 1.0 / float( boneTextureSize );\n\t\tfloat dy = 1.0 / float( boneTextureSize );\n\t\ty = dy * ( y + 0.5 );\n\t\tvec4 v1 = texture2D( boneTexture, vec2( dx * ( x + 0.5 ), y ) );\n\t\tvec4 v2 = texture2D( boneTexture, vec2( dx * ( x + 1.5 ), y ) );\n\t\tvec4 v3 = texture2D( boneTexture, vec2( dx * ( x + 2.5 ), y ) );\n\t\tvec4 v4 = texture2D( boneTexture, vec2( dx * ( x + 3.5 ), y ) );\n\t\tmat4 bone = mat4( v1, v2, v3, v4 );\n\t\treturn bone;\n\t}\n#endif",skinning_vertex:"#ifdef USE_SKINNING\n\tvec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );\n\tvec4 skinned = vec4( 0.0 );\n\tskinned += boneMatX * skinVertex * skinWeight.x;\n\tskinned += boneMatY * skinVertex * skinWeight.y;\n\tskinned += boneMatZ * skinVertex * skinWeight.z;\n\tskinned += boneMatW * skinVertex * skinWeight.w;\n\ttransformed = ( bindMatrixInverse * skinned ).xyz;\n#endif",skinnormal_vertex:"#ifdef USE_SKINNING\n\tmat4 skinMatrix = mat4( 0.0 );\n\tskinMatrix += skinWeight.x * boneMatX;\n\tskinMatrix += skinWeight.y * boneMatY;\n\tskinMatrix += skinWeight.z * boneMatZ;\n\tskinMatrix += skinWeight.w * boneMatW;\n\tskinMatrix = bindMatrixInverse * skinMatrix * bindMatrix;\n\tobjectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;\n\t#ifdef USE_TANGENT\n\t\tobjectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;\n\t#endif\n#endif",specularmap_fragment:"float specularStrength;\n#ifdef USE_SPECULARMAP\n\tvec4 texelSpecular = texture2D( specularMap, vUv );\n\tspecularStrength = texelSpecular.r;\n#else\n\tspecularStrength = 1.0;\n#endif",specularmap_pars_fragment:"#ifdef USE_SPECULARMAP\n\tuniform sampler2D specularMap;\n#endif",tonemapping_fragment:"#if defined( TONE_MAPPING )\n\tgl_FragColor.rgb = toneMapping( gl_FragColor.rgb );\n#endif",tonemapping_pars_fragment:"#ifndef saturate\n#define saturate( a ) clamp( a, 0.0, 1.0 )\n#endif\nuniform float toneMappingExposure;\nvec3 LinearToneMapping( vec3 color ) {\n\treturn toneMappingExposure * color;\n}\nvec3 ReinhardToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\treturn saturate( color / ( vec3( 1.0 ) + color ) );\n}\nvec3 OptimizedCineonToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\tcolor = max( vec3( 0.0 ), color - 0.004 );\n\treturn pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );\n}\nvec3 RRTAndODTFit( vec3 v ) {\n\tvec3 a = v * ( v + 0.0245786 ) - 0.000090537;\n\tvec3 b = v * ( 0.983729 * v + 0.4329510 ) + 0.238081;\n\treturn a / b;\n}\nvec3 ACESFilmicToneMapping( vec3 color ) {\n\tconst mat3 ACESInputMat = mat3(\n\t\tvec3( 0.59719, 0.07600, 0.02840 ),\t\tvec3( 0.35458, 0.90834, 0.13383 ),\n\t\tvec3( 0.04823, 0.01566, 0.83777 )\n\t);\n\tconst mat3 ACESOutputMat = mat3(\n\t\tvec3(  1.60475, -0.10208, -0.00327 ),\t\tvec3( -0.53108,  1.10813, -0.07276 ),\n\t\tvec3( -0.07367, -0.00605,  1.07602 )\n\t);\n\tcolor *= toneMappingExposure / 0.6;\n\tcolor = ACESInputMat * color;\n\tcolor = RRTAndODTFit( color );\n\tcolor = ACESOutputMat * color;\n\treturn saturate( color );\n}\nvec3 CustomToneMapping( vec3 color ) { return color; }",transmission_fragment:"#ifdef USE_TRANSMISSION\n\tmaterial.transmission = transmission;\n\tmaterial.transmissionAlpha = 1.0;\n\tmaterial.thickness = thickness;\n\tmaterial.attenuationDistance = attenuationDistance;\n\tmaterial.attenuationColor = attenuationColor;\n\t#ifdef USE_TRANSMISSIONMAP\n\t\tmaterial.transmission *= texture2D( transmissionMap, vUv ).r;\n\t#endif\n\t#ifdef USE_THICKNESSMAP\n\t\tmaterial.thickness *= texture2D( thicknessMap, vUv ).g;\n\t#endif\n\tvec3 pos = vWorldPosition;\n\tvec3 v = normalize( cameraPosition - pos );\n\tvec3 n = inverseTransformDirection( normal, viewMatrix );\n\tvec4 transmission = getIBLVolumeRefraction(\n\t\tn, v, material.roughness, material.diffuseColor, material.specularColor, material.specularF90,\n\t\tpos, modelMatrix, viewMatrix, projectionMatrix, material.ior, material.thickness,\n\t\tmaterial.attenuationColor, material.attenuationDistance );\n\tmaterial.transmissionAlpha = mix( material.transmissionAlpha, transmission.a, material.transmission );\n\ttotalDiffuse = mix( totalDiffuse, transmission.rgb, material.transmission );\n#endif",transmission_pars_fragment:"#ifdef USE_TRANSMISSION\n\tuniform float transmission;\n\tuniform float thickness;\n\tuniform float attenuationDistance;\n\tuniform vec3 attenuationColor;\n\t#ifdef USE_TRANSMISSIONMAP\n\t\tuniform sampler2D transmissionMap;\n\t#endif\n\t#ifdef USE_THICKNESSMAP\n\t\tuniform sampler2D thicknessMap;\n\t#endif\n\tuniform vec2 transmissionSamplerSize;\n\tuniform sampler2D transmissionSamplerMap;\n\tuniform mat4 modelMatrix;\n\tuniform mat4 projectionMatrix;\n\tvarying vec3 vWorldPosition;\n\tvec3 getVolumeTransmissionRay( const in vec3 n, const in vec3 v, const in float thickness, const in float ior, const in mat4 modelMatrix ) {\n\t\tvec3 refractionVector = refract( - v, normalize( n ), 1.0 / ior );\n\t\tvec3 modelScale;\n\t\tmodelScale.x = length( vec3( modelMatrix[ 0 ].xyz ) );\n\t\tmodelScale.y = length( vec3( modelMatrix[ 1 ].xyz ) );\n\t\tmodelScale.z = length( vec3( modelMatrix[ 2 ].xyz ) );\n\t\treturn normalize( refractionVector ) * thickness * modelScale;\n\t}\n\tfloat applyIorToRoughness( const in float roughness, const in float ior ) {\n\t\treturn roughness * clamp( ior * 2.0 - 2.0, 0.0, 1.0 );\n\t}\n\tvec4 getTransmissionSample( const in vec2 fragCoord, const in float roughness, const in float ior ) {\n\t\tfloat framebufferLod = log2( transmissionSamplerSize.x ) * applyIorToRoughness( roughness, ior );\n\t\t#ifdef texture2DLodEXT\n\t\t\treturn texture2DLodEXT( transmissionSamplerMap, fragCoord.xy, framebufferLod );\n\t\t#else\n\t\t\treturn texture2D( transmissionSamplerMap, fragCoord.xy, framebufferLod );\n\t\t#endif\n\t}\n\tvec3 applyVolumeAttenuation( const in vec3 radiance, const in float transmissionDistance, const in vec3 attenuationColor, const in float attenuationDistance ) {\n\t\tif ( isinf( attenuationDistance ) ) {\n\t\t\treturn radiance;\n\t\t} else {\n\t\t\tvec3 attenuationCoefficient = -log( attenuationColor ) / attenuationDistance;\n\t\t\tvec3 transmittance = exp( - attenuationCoefficient * transmissionDistance );\t\t\treturn transmittance * radiance;\n\t\t}\n\t}\n\tvec4 getIBLVolumeRefraction( const in vec3 n, const in vec3 v, const in float roughness, const in vec3 diffuseColor,\n\t\tconst in vec3 specularColor, const in float specularF90, const in vec3 position, const in mat4 modelMatrix,\n\t\tconst in mat4 viewMatrix, const in mat4 projMatrix, const in float ior, const in float thickness,\n\t\tconst in vec3 attenuationColor, const in float attenuationDistance ) {\n\t\tvec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, ior, modelMatrix );\n\t\tvec3 refractedRayExit = position + transmissionRay;\n\t\tvec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );\n\t\tvec2 refractionCoords = ndcPos.xy / ndcPos.w;\n\t\trefractionCoords += 1.0;\n\t\trefractionCoords /= 2.0;\n\t\tvec4 transmittedLight = getTransmissionSample( refractionCoords, roughness, ior );\n\t\tvec3 attenuatedColor = applyVolumeAttenuation( transmittedLight.rgb, length( transmissionRay ), attenuationColor, attenuationDistance );\n\t\tvec3 F = EnvironmentBRDF( n, v, specularColor, specularF90, roughness );\n\t\treturn vec4( ( 1.0 - F ) * attenuatedColor * diffuseColor, transmittedLight.a );\n\t}\n#endif",uv_pars_fragment:"#if ( defined( USE_UV ) && ! defined( UVS_VERTEX_ONLY ) )\n\tvarying vec2 vUv;\n#endif",uv_pars_vertex:"#ifdef USE_UV\n\t#ifdef UVS_VERTEX_ONLY\n\t\tvec2 vUv;\n\t#else\n\t\tvarying vec2 vUv;\n\t#endif\n\tuniform mat3 uvTransform;\n#endif",uv_vertex:"#ifdef USE_UV\n\tvUv = ( uvTransform * vec3( uv, 1 ) ).xy;\n#endif",uv2_pars_fragment:"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tvarying vec2 vUv2;\n#endif",uv2_pars_vertex:"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tattribute vec2 uv2;\n\tvarying vec2 vUv2;\n\tuniform mat3 uv2Transform;\n#endif",uv2_vertex:"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tvUv2 = ( uv2Transform * vec3( uv2, 1 ) ).xy;\n#endif",worldpos_vertex:"#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP ) || defined ( USE_TRANSMISSION ) || NUM_SPOT_LIGHT_COORDS > 0\n\tvec4 worldPosition = vec4( transformed, 1.0 );\n\t#ifdef USE_INSTANCING\n\t\tworldPosition = instanceMatrix * worldPosition;\n\t#endif\n\tworldPosition = modelMatrix * worldPosition;\n#endif",background_vert:"varying vec2 vUv;\nuniform mat3 uvTransform;\nvoid main() {\n\tvUv = ( uvTransform * vec3( uv, 1 ) ).xy;\n\tgl_Position = vec4( position.xy, 1.0, 1.0 );\n}",background_frag:"uniform sampler2D t2D;\nuniform float backgroundIntensity;\nvarying vec2 vUv;\nvoid main() {\n\tvec4 texColor = texture2D( t2D, vUv );\n\t#ifdef DECODE_VIDEO_TEXTURE\n\t\ttexColor = vec4( mix( pow( texColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), texColor.rgb * 0.0773993808, vec3( lessThanEqual( texColor.rgb, vec3( 0.04045 ) ) ) ), texColor.w );\n\t#endif\n\ttexColor.rgb *= backgroundIntensity;\n\tgl_FragColor = texColor;\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n}",backgroundCube_vert:"varying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvWorldDirection = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n\tgl_Position.z = gl_Position.w;\n}",backgroundCube_frag:"#ifdef ENVMAP_TYPE_CUBE\n\tuniform samplerCube envMap;\n#elif defined( ENVMAP_TYPE_CUBE_UV )\n\tuniform sampler2D envMap;\n#endif\nuniform float flipEnvMap;\nuniform float backgroundBlurriness;\nuniform float backgroundIntensity;\nvarying vec3 vWorldDirection;\n#include <cube_uv_reflection_fragment>\nvoid main() {\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tvec4 texColor = textureCube( envMap, vec3( flipEnvMap * vWorldDirection.x, vWorldDirection.yz ) );\n\t#elif defined( ENVMAP_TYPE_CUBE_UV )\n\t\tvec4 texColor = textureCubeUV( envMap, vWorldDirection, backgroundBlurriness );\n\t#else\n\t\tvec4 texColor = vec4( 0.0, 0.0, 0.0, 1.0 );\n\t#endif\n\ttexColor.rgb *= backgroundIntensity;\n\tgl_FragColor = texColor;\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n}",cube_vert:"varying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvWorldDirection = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n\tgl_Position.z = gl_Position.w;\n}",cube_frag:"uniform samplerCube tCube;\nuniform float tFlip;\nuniform float opacity;\nvarying vec3 vWorldDirection;\nvoid main() {\n\tvec4 texColor = textureCube( tCube, vec3( tFlip * vWorldDirection.x, vWorldDirection.yz ) );\n\tgl_FragColor = texColor;\n\tgl_FragColor.a *= opacity;\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n}",depth_vert:"#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvarying vec2 vHighPrecisionZW;\nvoid main() {\n\t#include <uv_vertex>\n\t#include <skinbase_vertex>\n\t#ifdef USE_DISPLACEMENTMAP\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvHighPrecisionZW = gl_Position.zw;\n}",depth_frag:"#if DEPTH_PACKING == 3200\n\tuniform float opacity;\n#endif\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvarying vec2 vHighPrecisionZW;\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( 1.0 );\n\t#if DEPTH_PACKING == 3200\n\t\tdiffuseColor.a = opacity;\n\t#endif\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <logdepthbuf_fragment>\n\tfloat fragCoordZ = 0.5 * vHighPrecisionZW[0] / vHighPrecisionZW[1] + 0.5;\n\t#if DEPTH_PACKING == 3200\n\t\tgl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );\n\t#elif DEPTH_PACKING == 3201\n\t\tgl_FragColor = packDepthToRGBA( fragCoordZ );\n\t#endif\n}",distanceRGBA_vert:"#define DISTANCE\nvarying vec3 vWorldPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <skinbase_vertex>\n\t#ifdef USE_DISPLACEMENTMAP\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <worldpos_vertex>\n\t#include <clipping_planes_vertex>\n\tvWorldPosition = worldPosition.xyz;\n}",distanceRGBA_frag:"#define DISTANCE\nuniform vec3 referencePosition;\nuniform float nearDistance;\nuniform float farDistance;\nvarying vec3 vWorldPosition;\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main () {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( 1.0 );\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\tfloat dist = length( vWorldPosition - referencePosition );\n\tdist = ( dist - nearDistance ) / ( farDistance - nearDistance );\n\tdist = saturate( dist );\n\tgl_FragColor = packDepthToRGBA( dist );\n}",equirect_vert:"varying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvWorldDirection = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n}",equirect_frag:"uniform sampler2D tEquirect;\nvarying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvec3 direction = normalize( vWorldDirection );\n\tvec2 sampleUV = equirectUv( direction );\n\tgl_FragColor = texture2D( tEquirect, sampleUV );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n}",linedashed_vert:"uniform float scale;\nattribute float lineDistance;\nvarying float vLineDistance;\n#include <common>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\tvLineDistance = scale * lineDistance;\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n}",linedashed_frag:"uniform vec3 diffuse;\nuniform float opacity;\nuniform float dashSize;\nuniform float totalSize;\nvarying float vLineDistance;\n#include <common>\n#include <color_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tif ( mod( vLineDistance, totalSize ) > dashSize ) {\n\t\tdiscard;\n\t}\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <color_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n}",meshbasic_vert:"#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#if defined ( USE_ENVMAP ) || defined ( USE_SKINNING )\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinbase_vertex>\n\t\t#include <skinnormal_vertex>\n\t\t#include <defaultnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <fog_vertex>\n}",meshbasic_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\t#ifdef USE_LIGHTMAP\n\t\tvec4 lightMapTexel = texture2D( lightMap, vUv2 );\n\t\treflectedLight.indirectDiffuse += lightMapTexel.rgb * lightMapIntensity * RECIPROCAL_PI;\n\t#else\n\t\treflectedLight.indirectDiffuse += vec3( 1.0 );\n\t#endif\n\t#include <aomap_fragment>\n\treflectedLight.indirectDiffuse *= diffuseColor.rgb;\n\tvec3 outgoingLight = reflectedLight.indirectDiffuse;\n\t#include <envmap_fragment>\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshlambert_vert:"#define LAMBERT\nvarying vec3 vViewPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",meshlambert_frag:"#define LAMBERT\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_lambert_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_lambert_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;\n\t#include <envmap_fragment>\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshmatcap_vert:"#define MATCAP\nvarying vec3 vViewPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <color_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n\tvViewPosition = - mvPosition.xyz;\n}",meshmatcap_frag:"#define MATCAP\nuniform vec3 diffuse;\nuniform float opacity;\nuniform sampler2D matcap;\nvarying vec3 vViewPosition;\n#include <common>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <fog_pars_fragment>\n#include <normal_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\tvec3 viewDir = normalize( vViewPosition );\n\tvec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );\n\tvec3 y = cross( viewDir, x );\n\tvec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;\n\t#ifdef USE_MATCAP\n\t\tvec4 matcapColor = texture2D( matcap, uv );\n\t#else\n\t\tvec4 matcapColor = vec4( vec3( mix( 0.2, 0.8, uv.y ) ), 1.0 );\n\t#endif\n\tvec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshnormal_vert:"#define NORMAL\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )\n\tvarying vec3 vViewPosition;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )\n\tvViewPosition = - mvPosition.xyz;\n#endif\n}",meshnormal_frag:"#define NORMAL\nuniform float opacity;\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )\n\tvarying vec3 vViewPosition;\n#endif\n#include <packing>\n#include <uv_pars_fragment>\n#include <normal_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\t#include <logdepthbuf_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\tgl_FragColor = vec4( packNormalToRGB( normal ), opacity );\n\t#ifdef OPAQUE\n\t\tgl_FragColor.a = 1.0;\n\t#endif\n}",meshphong_vert:"#define PHONG\nvarying vec3 vViewPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",meshphong_frag:"#define PHONG\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform vec3 specular;\nuniform float shininess;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_phong_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_phong_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;\n\t#include <envmap_fragment>\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshphysical_vert:"#define STANDARD\nvarying vec3 vViewPosition;\n#ifdef USE_TRANSMISSION\n\tvarying vec3 vWorldPosition;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n#ifdef USE_TRANSMISSION\n\tvWorldPosition = worldPosition.xyz;\n#endif\n}",meshphysical_frag:"#define STANDARD\n#ifdef PHYSICAL\n\t#define IOR\n\t#define SPECULAR\n#endif\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float roughness;\nuniform float metalness;\nuniform float opacity;\n#ifdef IOR\n\tuniform float ior;\n#endif\n#ifdef SPECULAR\n\tuniform float specularIntensity;\n\tuniform vec3 specularColor;\n\t#ifdef USE_SPECULARINTENSITYMAP\n\t\tuniform sampler2D specularIntensityMap;\n\t#endif\n\t#ifdef USE_SPECULARCOLORMAP\n\t\tuniform sampler2D specularColorMap;\n\t#endif\n#endif\n#ifdef USE_CLEARCOAT\n\tuniform float clearcoat;\n\tuniform float clearcoatRoughness;\n#endif\n#ifdef USE_IRIDESCENCE\n\tuniform float iridescence;\n\tuniform float iridescenceIOR;\n\tuniform float iridescenceThicknessMinimum;\n\tuniform float iridescenceThicknessMaximum;\n#endif\n#ifdef USE_SHEEN\n\tuniform vec3 sheenColor;\n\tuniform float sheenRoughness;\n\t#ifdef USE_SHEENCOLORMAP\n\t\tuniform sampler2D sheenColorMap;\n\t#endif\n\t#ifdef USE_SHEENROUGHNESSMAP\n\t\tuniform sampler2D sheenRoughnessMap;\n\t#endif\n#endif\nvarying vec3 vViewPosition;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <bsdfs>\n#include <iridescence_fragment>\n#include <cube_uv_reflection_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_physical_pars_fragment>\n#include <fog_pars_fragment>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_physical_pars_fragment>\n#include <transmission_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <clearcoat_pars_fragment>\n#include <iridescence_pars_fragment>\n#include <roughnessmap_pars_fragment>\n#include <metalnessmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <roughnessmap_fragment>\n\t#include <metalnessmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <clearcoat_normal_fragment_begin>\n\t#include <clearcoat_normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_physical_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 totalDiffuse = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse;\n\tvec3 totalSpecular = reflectedLight.directSpecular + reflectedLight.indirectSpecular;\n\t#include <transmission_fragment>\n\tvec3 outgoingLight = totalDiffuse + totalSpecular + totalEmissiveRadiance;\n\t#ifdef USE_SHEEN\n\t\tfloat sheenEnergyComp = 1.0 - 0.157 * max3( material.sheenColor );\n\t\toutgoingLight = outgoingLight * sheenEnergyComp + sheenSpecular;\n\t#endif\n\t#ifdef USE_CLEARCOAT\n\t\tfloat dotNVcc = saturate( dot( geometry.clearcoatNormal, geometry.viewDir ) );\n\t\tvec3 Fcc = F_Schlick( material.clearcoatF0, material.clearcoatF90, dotNVcc );\n\t\toutgoingLight = outgoingLight * ( 1.0 - material.clearcoat * Fcc ) + clearcoatSpecular * material.clearcoat;\n\t#endif\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshtoon_vert:"#define TOON\nvarying vec3 vViewPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",meshtoon_frag:"#define TOON\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <gradientmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_toon_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_toon_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",points_vert:"uniform float size;\nuniform float scale;\n#include <common>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <project_vertex>\n\tgl_PointSize = size;\n\t#ifdef USE_SIZEATTENUATION\n\t\tbool isPerspective = isPerspectiveMatrix( projectionMatrix );\n\t\tif ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );\n\t#endif\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <fog_vertex>\n}",points_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#include <common>\n#include <color_pars_fragment>\n#include <map_particle_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_particle_fragment>\n\t#include <color_fragment>\n\t#include <alphatest_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n}",shadow_vert:"#include <common>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\nvoid main() {\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",shadow_frag:"uniform vec3 color;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <shadowmap_pars_fragment>\n#include <shadowmask_pars_fragment>\nvoid main() {\n\tgl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}",sprite_vert:"uniform float rotation;\nuniform vec2 center;\n#include <common>\n#include <uv_pars_vertex>\n#include <fog_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\tvec4 mvPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );\n\tvec2 scale;\n\tscale.x = length( vec3( modelMatrix[ 0 ].x, modelMatrix[ 0 ].y, modelMatrix[ 0 ].z ) );\n\tscale.y = length( vec3( modelMatrix[ 1 ].x, modelMatrix[ 1 ].y, modelMatrix[ 1 ].z ) );\n\t#ifndef USE_SIZEATTENUATION\n\t\tbool isPerspective = isPerspectiveMatrix( projectionMatrix );\n\t\tif ( isPerspective ) scale *= - mvPosition.z;\n\t#endif\n\tvec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;\n\tvec2 rotatedPosition;\n\trotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;\n\trotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;\n\tmvPosition.xy += rotatedPosition;\n\tgl_Position = projectionMatrix * mvPosition;\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n}",sprite_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#include <common>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}"},fe={common:{diffuse:{value:new ae(16777215)},opacity:{value:1},map:{value:null},uvTransform:{value:new hi},uv2Transform:{value:new hi},alphaMap:{value:null},alphaTest:{value:0}},specularmap:{specularMap:{value:null}},envmap:{envMap:{value:null},flipEnvMap:{value:-1},reflectivity:{value:1},ior:{value:1.5},refractionRatio:{value:.98}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1}},emissivemap:{emissiveMap:{value:null}},bumpmap:{bumpMap:{value:null},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalScale:{value:new q(1,1)}},displacementmap:{displacementMap:{value:null},displacementScale:{value:1},displacementBias:{value:0}},roughnessmap:{roughnessMap:{value:null}},metalnessmap:{metalnessMap:{value:null}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new ae(16777215)}},lights:{ambientLightColor:{value:[]},lightProbe:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{}}},directionalLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{}}},spotLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},spotLightMap:{value:[]},spotShadowMap:{value:[]},spotLightMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{}}},pointLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}},ltc_1:{value:null},ltc_2:{value:null}},points:{diffuse:{value:new ae(16777215)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},alphaMap:{value:null},alphaTest:{value:0},uvTransform:{value:new hi}},sprite:{diffuse:{value:new ae(16777215)},opacity:{value:1},center:{value:new q(.5,.5)},rotation:{value:0},map:{value:null},alphaMap:{value:null},alphaTest:{value:0},uvTransform:{value:new hi}}},Jr={basic:{uniforms:mi([fe.common,fe.specularmap,fe.envmap,fe.aomap,fe.lightmap,fe.fog]),vertexShader:$e.meshbasic_vert,fragmentShader:$e.meshbasic_frag},lambert:{uniforms:mi([fe.common,fe.specularmap,fe.envmap,fe.aomap,fe.lightmap,fe.emissivemap,fe.bumpmap,fe.normalmap,fe.displacementmap,fe.fog,fe.lights,{emissive:{value:new ae(0)}}]),vertexShader:$e.meshlambert_vert,fragmentShader:$e.meshlambert_frag},phong:{uniforms:mi([fe.common,fe.specularmap,fe.envmap,fe.aomap,fe.lightmap,fe.emissivemap,fe.bumpmap,fe.normalmap,fe.displacementmap,fe.fog,fe.lights,{emissive:{value:new ae(0)},specular:{value:new ae(1118481)},shininess:{value:30}}]),vertexShader:$e.meshphong_vert,fragmentShader:$e.meshphong_frag},standard:{uniforms:mi([fe.common,fe.envmap,fe.aomap,fe.lightmap,fe.emissivemap,fe.bumpmap,fe.normalmap,fe.displacementmap,fe.roughnessmap,fe.metalnessmap,fe.fog,fe.lights,{emissive:{value:new ae(0)},roughness:{value:1},metalness:{value:0},envMapIntensity:{value:1}}]),vertexShader:$e.meshphysical_vert,fragmentShader:$e.meshphysical_frag},toon:{uniforms:mi([fe.common,fe.aomap,fe.lightmap,fe.emissivemap,fe.bumpmap,fe.normalmap,fe.displacementmap,fe.gradientmap,fe.fog,fe.lights,{emissive:{value:new ae(0)}}]),vertexShader:$e.meshtoon_vert,fragmentShader:$e.meshtoon_frag},matcap:{uniforms:mi([fe.common,fe.bumpmap,fe.normalmap,fe.displacementmap,fe.fog,{matcap:{value:null}}]),vertexShader:$e.meshmatcap_vert,fragmentShader:$e.meshmatcap_frag},points:{uniforms:mi([fe.points,fe.fog]),vertexShader:$e.points_vert,fragmentShader:$e.points_frag},dashed:{uniforms:mi([fe.common,fe.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:$e.linedashed_vert,fragmentShader:$e.linedashed_frag},depth:{uniforms:mi([fe.common,fe.displacementmap]),vertexShader:$e.depth_vert,fragmentShader:$e.depth_frag},normal:{uniforms:mi([fe.common,fe.bumpmap,fe.normalmap,fe.displacementmap,{opacity:{value:1}}]),vertexShader:$e.meshnormal_vert,fragmentShader:$e.meshnormal_frag},sprite:{uniforms:mi([fe.sprite,fe.fog]),vertexShader:$e.sprite_vert,fragmentShader:$e.sprite_frag},background:{uniforms:{uvTransform:{value:new hi},t2D:{value:null},backgroundIntensity:{value:1}},vertexShader:$e.background_vert,fragmentShader:$e.background_frag},backgroundCube:{uniforms:{envMap:{value:null},flipEnvMap:{value:-1},backgroundBlurriness:{value:0},backgroundIntensity:{value:1}},vertexShader:$e.backgroundCube_vert,fragmentShader:$e.backgroundCube_frag},cube:{uniforms:{tCube:{value:null},tFlip:{value:-1},opacity:{value:1}},vertexShader:$e.cube_vert,fragmentShader:$e.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:$e.equirect_vert,fragmentShader:$e.equirect_frag},distanceRGBA:{uniforms:mi([fe.common,fe.displacementmap,{referencePosition:{value:new C},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:$e.distanceRGBA_vert,fragmentShader:$e.distanceRGBA_frag},shadow:{uniforms:mi([fe.lights,fe.fog,{color:{value:new ae(0)},opacity:{value:1}}]),vertexShader:$e.shadow_vert,fragmentShader:$e.shadow_frag}};Jr.physical={uniforms:mi([Jr.standard.uniforms,{clearcoat:{value:0},clearcoatMap:{value:null},clearcoatRoughness:{value:0},clearcoatRoughnessMap:{value:null},clearcoatNormalScale:{value:new q(1,1)},clearcoatNormalMap:{value:null},iridescence:{value:0},iridescenceMap:{value:null},iridescenceIOR:{value:1.3},iridescenceThicknessMinimum:{value:100},iridescenceThicknessMaximum:{value:400},iridescenceThicknessMap:{value:null},sheen:{value:0},sheenColor:{value:new ae(0)},sheenColorMap:{value:null},sheenRoughness:{value:1},sheenRoughnessMap:{value:null},transmission:{value:0},transmissionMap:{value:null},transmissionSamplerSize:{value:new q},transmissionSamplerMap:{value:null},thickness:{value:0},thicknessMap:{value:null},attenuationDistance:{value:0},attenuationColor:{value:new ae(0)},specularIntensity:{value:1},specularIntensityMap:{value:null},specularColor:{value:new ae(1,1,1)},specularColorMap:{value:null}}]),vertexShader:$e.meshphysical_vert,fragmentShader:$e.meshphysical_frag};const A0={r:0,b:0,g:0};function Uie(n,e,t,i,r,s,o){const a=new ae(0);let l,u,c=!0===s?0:1,f=null,h=0,d=null;function m(g,v){g.getRGB(A0,bS(n)),i.buffers.color.setClear(A0.r,A0.g,A0.b,v,o)}return{getClearColor:function(){return a},setClearColor:function(g,v=1){a.set(g),c=v,m(a,c)},getClearAlpha:function(){return c},setClearAlpha:function(g){c=g,m(a,c)},render:function p(g,v){let x=!1,y=!0===v.isScene?v.background:null;y&&y.isTexture&&(y=(v.backgroundBlurriness>0?t:e).get(y));const _=n.xr,M=_.getSession&&_.getSession();M&&"additive"===M.environmentBlendMode&&(y=null),null===y?m(a,c):y&&y.isColor&&(m(y,1),x=!0),(n.autoClear||x)&&n.clear(n.autoClearColor,n.autoClearDepth,n.autoClearStencil),y&&(y.isCubeTexture||306===y.mapping)?(void 0===u&&(u=new an(new Ca(1,1,1),new Wi({name:"BackgroundCubeMaterial",uniforms:h2(Jr.backgroundCube.uniforms),vertexShader:Jr.backgroundCube.vertexShader,fragmentShader:Jr.backgroundCube.fragmentShader,side:1,depthTest:!1,depthWrite:!1,fog:!1})),u.geometry.deleteAttribute("normal"),u.geometry.deleteAttribute("uv"),u.onBeforeRender=function(w,D,b){this.matrixWorld.copyPosition(b.matrixWorld)},Object.defineProperty(u.material,"envMap",{get:function(){return this.uniforms.envMap.value}}),r.update(u)),u.material.uniforms.envMap.value=y,u.material.uniforms.flipEnvMap.value=y.isCubeTexture&&!1===y.isRenderTargetTexture?-1:1,u.material.uniforms.backgroundBlurriness.value=v.backgroundBlurriness,u.material.uniforms.backgroundIntensity.value=v.backgroundIntensity,(f!==y||h!==y.version||d!==n.toneMapping)&&(u.material.needsUpdate=!0,f=y,h=y.version,d=n.toneMapping),u.layers.enableAll(),g.unshift(u,u.geometry,u.material,0,0,null)):y&&y.isTexture&&(void 0===l&&(l=new an(new g2(2,2),new Wi({name:"BackgroundMaterial",uniforms:h2(Jr.background.uniforms),vertexShader:Jr.background.vertexShader,fragmentShader:Jr.background.fragmentShader,side:0,depthTest:!1,depthWrite:!1,fog:!1})),l.geometry.deleteAttribute("normal"),Object.defineProperty(l.material,"map",{get:function(){return this.uniforms.t2D.value}}),r.update(l)),l.material.uniforms.t2D.value=y,l.material.uniforms.backgroundIntensity.value=v.backgroundIntensity,!0===y.matrixAutoUpdate&&y.updateMatrix(),l.material.uniforms.uvTransform.value.copy(y.matrix),(f!==y||h!==y.version||d!==n.toneMapping)&&(l.material.needsUpdate=!0,f=y,h=y.version,d=n.toneMapping),l.layers.enableAll(),g.unshift(l,l.geometry,l.material,0,0,null))}}}function Bie(n,e,t,i){const r=n.getParameter(34921),s=i.isWebGL2?null:e.get("OES_vertex_array_object"),o=i.isWebGL2||null!==s,a={},c=g(null);let l=c,u=!1;function d(L){return i.isWebGL2?n.bindVertexArray(L):s.bindVertexArrayOES(L)}function p(L){return i.isWebGL2?n.deleteVertexArray(L):s.deleteVertexArrayOES(L)}function g(L){const F=[],H=[],X=[];for(let B=0;B<r;B++)F[B]=0,H[B]=0,X[B]=0;return{geometry:null,program:null,wireframe:!1,newAttributes:F,enabledAttributes:H,attributeDivisors:X,object:L,attributes:{},index:null}}function y(){const L=l.newAttributes;for(let F=0,H=L.length;F<H;F++)L[F]=0}function _(L){M(L,0)}function M(L,F){const X=l.enabledAttributes,B=l.attributeDivisors;l.newAttributes[L]=1,0===X[L]&&(n.enableVertexAttribArray(L),X[L]=1),B[L]!==F&&((i.isWebGL2?n:e.get("ANGLE_instanced_arrays"))[i.isWebGL2?"vertexAttribDivisor":"vertexAttribDivisorANGLE"](L,F),B[L]=F)}function w(){const L=l.newAttributes,F=l.enabledAttributes;for(let H=0,X=F.length;H<X;H++)F[H]!==L[H]&&(n.disableVertexAttribArray(H),F[H]=0)}function D(L,F,H,X,B,te){!0!==i.isWebGL2||5124!==H&&5125!==H?n.vertexAttribPointer(L,F,H,X,B,te):n.vertexAttribIPointer(L,F,H,B,te)}function U(){P(),u=!0,l!==c&&(l=c,d(l.object))}function P(){c.geometry=null,c.program=null,c.wireframe=!1}return{setup:function f(L,F,H,X,B){let te=!1;if(o){const Y=function m(L,F,H){const X=!0===H.wireframe;let B=a[L.id];void 0===B&&(B={},a[L.id]=B);let te=B[F.id];void 0===te&&(te={},B[F.id]=te);let Y=te[X];return void 0===Y&&(Y=g(function h(){return i.isWebGL2?n.createVertexArray():s.createVertexArrayOES()}()),te[X]=Y),Y}(X,H,F);l!==Y&&(l=Y,d(l.object)),te=function v(L,F,H,X){const B=l.attributes,te=F.attributes;let Y=0;const k=H.getAttributes();for(const V in k)if(k[V].location>=0){const ne=B[V];let se=te[V];if(void 0===se&&("instanceMatrix"===V&&L.instanceMatrix&&(se=L.instanceMatrix),"instanceColor"===V&&L.instanceColor&&(se=L.instanceColor)),void 0===ne||ne.attribute!==se||se&&ne.data!==se.data)return!0;Y++}return l.attributesNum!==Y||l.index!==X}(L,X,H,B),te&&function x(L,F,H,X){const B={},te=F.attributes;let Y=0;const k=H.getAttributes();for(const V in k)if(k[V].location>=0){let ne=te[V];void 0===ne&&("instanceMatrix"===V&&L.instanceMatrix&&(ne=L.instanceMatrix),"instanceColor"===V&&L.instanceColor&&(ne=L.instanceColor));const se={};se.attribute=ne,ne&&ne.data&&(se.data=ne.data),B[V]=se,Y++}l.attributes=B,l.attributesNum=Y,l.index=X}(L,X,H,B)}else{const Y=!0===F.wireframe;(l.geometry!==X.id||l.program!==H.id||l.wireframe!==Y)&&(l.geometry=X.id,l.program=H.id,l.wireframe=Y,te=!0)}null!==B&&t.update(B,34963),(te||u)&&(u=!1,function b(L,F,H,X){if(!1===i.isWebGL2&&(L.isInstancedMesh||X.isInstancedBufferGeometry)&&null===e.get("ANGLE_instanced_arrays"))return;y();const B=X.attributes,te=H.getAttributes(),Y=F.defaultAttributeValues;for(const k in te){const V=te[k];if(V.location>=0){let ie=B[k];if(void 0===ie&&("instanceMatrix"===k&&L.instanceMatrix&&(ie=L.instanceMatrix),"instanceColor"===k&&L.instanceColor&&(ie=L.instanceColor)),void 0!==ie){const ne=ie.normalized,se=ie.itemSize,W=t.get(ie);if(void 0===W)continue;const Oe=W.buffer,ye=W.type,je=W.bytesPerElement;if(ie.isInterleavedBufferAttribute){const pe=ie.data,rt=pe.stride,J=ie.offset;if(pe.isInstancedInterleavedBuffer){for(let Q=0;Q<V.locationSize;Q++)M(V.location+Q,pe.meshPerAttribute);!0!==L.isInstancedMesh&&void 0===X._maxInstanceCount&&(X._maxInstanceCount=pe.meshPerAttribute*pe.count)}else for(let Q=0;Q<V.locationSize;Q++)_(V.location+Q);n.bindBuffer(34962,Oe);for(let Q=0;Q<V.locationSize;Q++)D(V.location+Q,se/V.locationSize,ye,ne,rt*je,(J+se/V.locationSize*Q)*je)}else{if(ie.isInstancedBufferAttribute){for(let pe=0;pe<V.locationSize;pe++)M(V.location+pe,ie.meshPerAttribute);!0!==L.isInstancedMesh&&void 0===X._maxInstanceCount&&(X._maxInstanceCount=ie.meshPerAttribute*ie.count)}else for(let pe=0;pe<V.locationSize;pe++)_(V.location+pe);n.bindBuffer(34962,Oe);for(let pe=0;pe<V.locationSize;pe++)D(V.location+pe,se/V.locationSize,ye,ne,se*je,se/V.locationSize*pe*je)}}else if(void 0!==Y){const ne=Y[k];if(void 0!==ne)switch(ne.length){case 2:n.vertexAttrib2fv(V.location,ne);break;case 3:n.vertexAttrib3fv(V.location,ne);break;case 4:n.vertexAttrib4fv(V.location,ne);break;default:n.vertexAttrib1fv(V.location,ne)}}}}w()}(L,F,H,X),null!==B&&n.bindBuffer(34963,t.get(B).buffer))},reset:U,resetDefaultState:P,dispose:function E(){U();for(const L in a){const F=a[L];for(const H in F){const X=F[H];for(const B in X)p(X[B].object),delete X[B];delete F[H]}delete a[L]}},releaseStatesOfGeometry:function I(L){if(void 0===a[L.id])return;const F=a[L.id];for(const H in F){const X=F[H];for(const B in X)p(X[B].object),delete X[B];delete F[H]}delete a[L.id]},releaseStatesOfProgram:function z(L){for(const F in a){const H=a[F];if(void 0===H[L.id])continue;const X=H[L.id];for(const B in X)p(X[B].object),delete X[B];delete H[L.id]}},initAttributes:y,enableAttribute:_,disableUnusedAttributes:w}}function Gie(n,e,t,i){const r=i.isWebGL2;let s;this.setMode=function o(l){s=l},this.render=function a(l,u){n.drawArrays(s,l,u),t.update(u,s,1)},this.renderInstances=function c(l,u,f){if(0===f)return;let h,d;if(r)h=n,d="drawArraysInstanced";else if(h=e.get("ANGLE_instanced_arrays"),d="drawArraysInstancedANGLE",null===h)return void console.error("THREE.WebGLBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");h[d](s,l,u,f),t.update(u,s,f)}}function Wie(n,e,t){let i;function s(D){if("highp"===D){if(n.getShaderPrecisionFormat(35633,36338).precision>0&&n.getShaderPrecisionFormat(35632,36338).precision>0)return"highp";D="mediump"}return"mediump"===D&&n.getShaderPrecisionFormat(35633,36337).precision>0&&n.getShaderPrecisionFormat(35632,36337).precision>0?"mediump":"lowp"}const o=typeof WebGL2RenderingContext<"u"&&n instanceof WebGL2RenderingContext||typeof WebGL2ComputeRenderingContext<"u"&&n instanceof WebGL2ComputeRenderingContext;let a=void 0!==t.precision?t.precision:"highp";const c=s(a);c!==a&&(console.warn("THREE.WebGLRenderer:",a,"not supported, using",c,"instead."),a=c);const l=o||e.has("WEBGL_draw_buffers"),u=!0===t.logarithmicDepthBuffer,f=n.getParameter(34930),h=n.getParameter(35660),d=n.getParameter(3379),p=n.getParameter(34076),m=n.getParameter(34921),g=n.getParameter(36347),v=n.getParameter(36348),x=n.getParameter(36349),y=h>0,_=o||e.has("OES_texture_float");return{isWebGL2:o,drawBuffers:l,getMaxAnisotropy:function r(){if(void 0!==i)return i;if(!0===e.has("EXT_texture_filter_anisotropic")){const D=e.get("EXT_texture_filter_anisotropic");i=n.getParameter(D.MAX_TEXTURE_MAX_ANISOTROPY_EXT)}else i=0;return i},getMaxPrecision:s,precision:a,logarithmicDepthBuffer:u,maxTextures:f,maxVertexTextures:h,maxTextureSize:d,maxCubemapSize:p,maxAttributes:m,maxVertexUniforms:g,maxVaryings:v,maxFragmentUniforms:x,vertexTextures:y,floatFragmentTextures:_,floatVertexTextures:y&&_,maxSamples:o?n.getParameter(36183):0}}function jie(n){const e=this;let t=null,i=0,r=!1,s=!1;const o=new Sa,a=new hi,c={value:null,needsUpdate:!1};function l(){c.value!==t&&(c.value=t,c.needsUpdate=i>0),e.numPlanes=i,e.numIntersection=0}function u(f,h,d,p){const m=null!==f?f.length:0;let g=null;if(0!==m){if(g=c.value,!0!==p||null===g){const v=d+4*m,x=h.matrixWorldInverse;a.getNormalMatrix(x),(null===g||g.length<v)&&(g=new Float32Array(v));for(let y=0,_=d;y!==m;++y,_+=4)o.copy(f[y]).applyMatrix4(x,a),o.normal.toArray(g,_),g[_+3]=o.constant}c.value=g,c.needsUpdate=!0}return e.numPlanes=m,e.numIntersection=0,g}this.uniform=c,this.numPlanes=0,this.numIntersection=0,this.init=function(f,h,d){const p=0!==f.length||h||0!==i||r;return r=h,t=u(f,d,0),i=f.length,p},this.beginShadows=function(){s=!0,u(null)},this.endShadows=function(){s=!1,l()},this.setState=function(f,h,d){const p=f.clippingPlanes,m=f.clipIntersection,g=f.clipShadows,v=n.get(f);if(!r||null===p||0===p.length||s&&!g)s?u(null):l();else{const x=s?0:i,y=4*x;let _=v.clippingState||null;c.value=_,_=u(p,h,y,d);for(let M=0;M!==y;++M)_[M]=t[M];v.clippingState=_,this.numIntersection=m?this.numPlanes:0,this.numPlanes+=x}}}function $ie(n){let e=new WeakMap;function t(o,a){return 303===a?o.mapping=301:304===a&&(o.mapping=302),o}function r(o){const a=o.target;a.removeEventListener("dispose",r);const c=e.get(a);void 0!==c&&(e.delete(a),c.dispose())}return{get:function i(o){if(o&&o.isTexture&&!1===o.isRenderTargetTexture){const a=o.mapping;if(303===a||304===a){if(e.has(o))return t(e.get(o).texture,o.mapping);{const c=o.image;if(c&&c.height>0){const l=new Vte(c.height/2);return l.fromEquirectangularTexture(n,o),e.set(o,l),o.addEventListener("dispose",r),t(l.texture,o.mapping)}return null}}}return o},dispose:function s(){e=new WeakMap}}}class Wl extends l7{constructor(e=-1,t=1,i=1,r=-1,s=.1,o=2e3){super(),this.isOrthographicCamera=!0,this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=e,this.right=t,this.top=i,this.bottom=r,this.near=s,this.far=o,this.updateProjectionMatrix()}copy(e,t){return super.copy(e,t),this.left=e.left,this.right=e.right,this.top=e.top,this.bottom=e.bottom,this.near=e.near,this.far=e.far,this.zoom=e.zoom,this.view=null===e.view?null:Object.assign({},e.view),this}setViewOffset(e,t,i,r,s,o){null===this.view&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=i,this.view.offsetY=r,this.view.width=s,this.view.height=o,this.updateProjectionMatrix()}clearViewOffset(){null!==this.view&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=(this.right-this.left)/(2*this.zoom),t=(this.top-this.bottom)/(2*this.zoom),i=(this.right+this.left)/2,r=(this.top+this.bottom)/2;let s=i-e,o=i+e,a=r+t,c=r-t;if(null!==this.view&&this.view.enabled){const l=(this.right-this.left)/this.view.fullWidth/this.zoom,u=(this.top-this.bottom)/this.view.fullHeight/this.zoom;s+=l*this.view.offsetX,o=s+l*this.view.width,a-=u*this.view.offsetY,c=a-u*this.view.height}this.projectionMatrix.makeOrthographic(s,o,a,c,this.near,this.far),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const t=super.toJSON(e);return t.object.zoom=this.zoom,t.object.left=this.left,t.object.right=this.right,t.object.top=this.top,t.object.bottom=this.bottom,t.object.near=this.near,t.object.far=this.far,null!==this.view&&(t.object.view=Object.assign({},this.view)),t}}const wS=[.125,.215,.35,.446,.526,.582],h7=new Wl,CS=new ae;let d7=null;const Da=(1+Math.sqrt(5))/2,y2=1/Da,SS=[new C(1,1,1),new C(-1,1,1),new C(1,1,-1),new C(-1,1,-1),new C(0,Da,y2),new C(0,Da,-y2),new C(y2,0,Da),new C(-y2,0,Da),new C(Da,y2,0),new C(-Da,y2,0)];class ES{constructor(e){this._renderer=e,this._pingPongRenderTarget=null,this._lodMax=0,this._cubeSize=0,this._lodPlanes=[],this._sizeLods=[],this._sigmas=[],this._blurMaterial=null,this._cubemapMaterial=null,this._equirectMaterial=null,this._compileMaterial(this._blurMaterial)}fromScene(e,t=0,i=.1,r=100){d7=this._renderer.getRenderTarget(),this._setSize(256);const s=this._allocateTargets();return s.depthBuffer=!0,this._sceneToCubeUV(e,i,r,s),t>0&&this._blur(s,0,0,t),this._applyPMREM(s),this._cleanup(s),s}fromEquirectangular(e,t=null){return this._fromTexture(e,t)}fromCubemap(e,t=null){return this._fromTexture(e,t)}compileCubemapShader(){null===this._cubemapMaterial&&(this._cubemapMaterial=TS(),this._compileMaterial(this._cubemapMaterial))}compileEquirectangularShader(){null===this._equirectMaterial&&(this._equirectMaterial=AS(),this._compileMaterial(this._equirectMaterial))}dispose(){this._dispose(),null!==this._cubemapMaterial&&this._cubemapMaterial.dispose(),null!==this._equirectMaterial&&this._equirectMaterial.dispose()}_setSize(e){this._lodMax=Math.floor(Math.log2(e)),this._cubeSize=Math.pow(2,this._lodMax)}_dispose(){null!==this._blurMaterial&&this._blurMaterial.dispose(),null!==this._pingPongRenderTarget&&this._pingPongRenderTarget.dispose();for(let e=0;e<this._lodPlanes.length;e++)this._lodPlanes[e].dispose()}_cleanup(e){this._renderer.setRenderTarget(d7),e.scissorTest=!1,T0(e,0,0,e.width,e.height)}_fromTexture(e,t){this._setSize(301===e.mapping||302===e.mapping?0===e.image.length?16:e.image[0].width||e.image[0].image.width:e.image.width/4),d7=this._renderer.getRenderTarget();const i=t||this._allocateTargets();return this._textureToCubeUV(e,i),this._applyPMREM(i),this._cleanup(i),i}_allocateTargets(){const e=3*Math.max(this._cubeSize,112),t=4*this._cubeSize,i={magFilter:on,minFilter:on,generateMipmaps:!1,type:zl,format:ir,encoding:da,depthBuffer:!1},r=DS(e,t,i);if(null===this._pingPongRenderTarget||this._pingPongRenderTarget.width!==e){null!==this._pingPongRenderTarget&&this._dispose(),this._pingPongRenderTarget=DS(e,t,i);const{_lodMax:s}=this;({sizeLods:this._sizeLods,lodPlanes:this._lodPlanes,sigmas:this._sigmas}=function qie(n){const e=[],t=[],i=[];let r=n;const s=n-4+1+wS.length;for(let o=0;o<s;o++){const a=Math.pow(2,r);t.push(a);let c=1/a;o>n-4?c=wS[o-n+4-1]:0===o&&(c=0),i.push(c);const l=1/(a-2),u=-l,f=1+l,h=[u,u,f,u,f,f,u,u,f,f,u,f],d=6,p=6,m=3,g=2,v=1,x=new Float32Array(m*p*d),y=new Float32Array(g*p*d),_=new Float32Array(v*p*d);for(let w=0;w<d;w++){const D=w%3*2/3-1,b=w>2?0:-1;x.set([D,b,0,D+2/3,b,0,D+2/3,b+1,0,D,b,0,D+2/3,b+1,0,D,b+1,0],m*p*w),y.set(h,g*p*w),_.set([w,w,w,w,w,w],v*p*w)}const M=new Ze;M.setAttribute("position",new Vt(x,m)),M.setAttribute("uv",new Vt(y,g)),M.setAttribute("faceIndex",new Vt(_,v)),e.push(M),r>4&&r--}return{lodPlanes:e,sizeLods:t,sigmas:i}}(s)),this._blurMaterial=function Zie(n,e,t){const i=new Float32Array(20),r=new C(0,1,0);return new Wi({name:"SphericalGaussianBlur",defines:{n:20,CUBEUV_TEXEL_WIDTH:1/e,CUBEUV_TEXEL_HEIGHT:1/t,CUBEUV_MAX_MIP:`${n}.0`},uniforms:{envMap:{value:null},samples:{value:1},weights:{value:i},latitudinal:{value:!1},dTheta:{value:0},mipInt:{value:0},poleAxis:{value:r}},vertexShader:"\n\n\t\tprecision mediump float;\n\t\tprecision mediump int;\n\n\t\tattribute float faceIndex;\n\n\t\tvarying vec3 vOutputDirection;\n\n\t\t// RH coordinate system; PMREM face-indexing convention\n\t\tvec3 getDirection( vec2 uv, float face ) {\n\n\t\t\tuv = 2.0 * uv - 1.0;\n\n\t\t\tvec3 direction = vec3( uv, 1.0 );\n\n\t\t\tif ( face == 0.0 ) {\n\n\t\t\t\tdirection = direction.zyx; // ( 1, v, u ) pos x\n\n\t\t\t} else if ( face == 1.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xz *= -1.0; // ( -u, 1, -v ) pos y\n\n\t\t\t} else if ( face == 2.0 ) {\n\n\t\t\t\tdirection.x *= -1.0; // ( -u, v, 1 ) pos z\n\n\t\t\t} else if ( face == 3.0 ) {\n\n\t\t\t\tdirection = direction.zyx;\n\t\t\t\tdirection.xz *= -1.0; // ( -1, v, -u ) neg x\n\n\t\t\t} else if ( face == 4.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xy *= -1.0; // ( -u, -1, v ) neg y\n\n\t\t\t} else if ( face == 5.0 ) {\n\n\t\t\t\tdirection.z *= -1.0; // ( u, v, -1 ) neg z\n\n\t\t\t}\n\n\t\t\treturn direction;\n\n\t\t}\n\n\t\tvoid main() {\n\n\t\t\tvOutputDirection = getDirection( uv, faceIndex );\n\t\t\tgl_Position = vec4( position, 1.0 );\n\n\t\t}\n\t",fragmentShader:"\n\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tvarying vec3 vOutputDirection;\n\n\t\t\tuniform sampler2D envMap;\n\t\t\tuniform int samples;\n\t\t\tuniform float weights[ n ];\n\t\t\tuniform bool latitudinal;\n\t\t\tuniform float dTheta;\n\t\t\tuniform float mipInt;\n\t\t\tuniform vec3 poleAxis;\n\n\t\t\t#define ENVMAP_TYPE_CUBE_UV\n\t\t\t#include <cube_uv_reflection_fragment>\n\n\t\t\tvec3 getSample( float theta, vec3 axis ) {\n\n\t\t\t\tfloat cosTheta = cos( theta );\n\t\t\t\t// Rodrigues' axis-angle rotation\n\t\t\t\tvec3 sampleDirection = vOutputDirection * cosTheta\n\t\t\t\t\t+ cross( axis, vOutputDirection ) * sin( theta )\n\t\t\t\t\t+ axis * dot( axis, vOutputDirection ) * ( 1.0 - cosTheta );\n\n\t\t\t\treturn bilinearCubeUV( envMap, sampleDirection, mipInt );\n\n\t\t\t}\n\n\t\t\tvoid main() {\n\n\t\t\t\tvec3 axis = latitudinal ? poleAxis : cross( poleAxis, vOutputDirection );\n\n\t\t\t\tif ( all( equal( axis, vec3( 0.0 ) ) ) ) {\n\n\t\t\t\t\taxis = vec3( vOutputDirection.z, 0.0, - vOutputDirection.x );\n\n\t\t\t\t}\n\n\t\t\t\taxis = normalize( axis );\n\n\t\t\t\tgl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );\n\t\t\t\tgl_FragColor.rgb += weights[ 0 ] * getSample( 0.0, axis );\n\n\t\t\t\tfor ( int i = 1; i < n; i++ ) {\n\n\t\t\t\t\tif ( i >= samples ) {\n\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t}\n\n\t\t\t\t\tfloat theta = dTheta * float( i );\n\t\t\t\t\tgl_FragColor.rgb += weights[ i ] * getSample( -1.0 * theta, axis );\n\t\t\t\t\tgl_FragColor.rgb += weights[ i ] * getSample( theta, axis );\n\n\t\t\t\t}\n\n\t\t\t}\n\t\t",blending:0,depthTest:!1,depthWrite:!1})}(s,e,t)}return r}_compileMaterial(e){const t=new an(this._lodPlanes[0],e);this._renderer.compile(t,h7)}_sceneToCubeUV(e,t,i,r){const a=new Pn(90,1,t,i),c=[1,-1,1,1,1,1],l=[1,1,1,-1,-1,-1],u=this._renderer,f=u.autoClear,h=u.toneMapping;u.getClearColor(CS),u.toneMapping=0,u.autoClear=!1;const d=new pi({name:"PMREM.Background",side:1,depthWrite:!1,depthTest:!1}),p=new an(new Ca,d);let m=!1;const g=e.background;g?g.isColor&&(d.color.copy(g),e.background=null,m=!0):(d.color.copy(CS),m=!0);for(let v=0;v<6;v++){const x=v%3;0===x?(a.up.set(0,c[v],0),a.lookAt(l[v],0,0)):1===x?(a.up.set(0,0,c[v]),a.lookAt(0,l[v],0)):(a.up.set(0,c[v],0),a.lookAt(0,0,l[v]));const y=this._cubeSize;T0(r,x*y,v>2?y:0,y,y),u.setRenderTarget(r),m&&u.render(p,a),u.render(e,a)}p.geometry.dispose(),p.material.dispose(),u.toneMapping=h,u.autoClear=f,e.background=g}_textureToCubeUV(e,t){const i=this._renderer,r=301===e.mapping||302===e.mapping;r?(null===this._cubemapMaterial&&(this._cubemapMaterial=TS()),this._cubemapMaterial.uniforms.flipEnvMap.value=!1===e.isRenderTargetTexture?-1:1):null===this._equirectMaterial&&(this._equirectMaterial=AS());const s=r?this._cubemapMaterial:this._equirectMaterial,o=new an(this._lodPlanes[0],s);s.uniforms.envMap.value=e;const c=this._cubeSize;T0(t,0,0,3*c,2*c),i.setRenderTarget(t),i.render(o,h7)}_applyPMREM(e){const t=this._renderer,i=t.autoClear;t.autoClear=!1;for(let r=1;r<this._lodPlanes.length;r++){const s=Math.sqrt(this._sigmas[r]*this._sigmas[r]-this._sigmas[r-1]*this._sigmas[r-1]);this._blur(e,r-1,r,s,SS[(r-1)%SS.length])}t.autoClear=i}_blur(e,t,i,r,s){const o=this._pingPongRenderTarget;this._halfBlur(e,o,t,i,r,"latitudinal",s),this._halfBlur(o,e,i,i,r,"longitudinal",s)}_halfBlur(e,t,i,r,s,o,a){const c=this._renderer,l=this._blurMaterial;"latitudinal"!==o&&"longitudinal"!==o&&console.error("blur direction must be either latitudinal or longitudinal!");const f=new an(this._lodPlanes[r],l),h=l.uniforms,d=this._sizeLods[i]-1,p=isFinite(s)?Math.PI/(2*d):2*Math.PI/39,m=s/p,g=isFinite(s)?1+Math.floor(3*m):20;g>20&&console.warn(`sigmaRadians, ${s}, is too large and will clip, as it requested ${g} samples when the maximum is set to 20`);const v=[];let x=0;for(let D=0;D<20;++D){const b=D/m,E=Math.exp(-b*b/2);v.push(E),0===D?x+=E:D<g&&(x+=2*E)}for(let D=0;D<v.length;D++)v[D]=v[D]/x;h.envMap.value=e.texture,h.samples.value=g,h.weights.value=v,h.latitudinal.value="latitudinal"===o,a&&(h.poleAxis.value=a);const{_lodMax:y}=this;h.dTheta.value=p,h.mipInt.value=y-i;const _=this._sizeLods[r];T0(t,3*_*(r>y-4?r-y+4:0),4*(this._cubeSize-_),3*_,2*_),c.setRenderTarget(t),c.render(f,h7)}}function DS(n,e,t){const i=new ya(n,e,t);return i.texture.mapping=306,i.texture.name="PMREM.cubeUv",i.scissorTest=!0,i}function T0(n,e,t,i,r){n.viewport.set(e,t,i,r),n.scissor.set(e,t,i,r)}function AS(){return new Wi({name:"EquirectangularToCubeUV",uniforms:{envMap:{value:null}},vertexShader:"\n\n\t\tprecision mediump float;\n\t\tprecision mediump int;\n\n\t\tattribute float faceIndex;\n\n\t\tvarying vec3 vOutputDirection;\n\n\t\t// RH coordinate system; PMREM face-indexing convention\n\t\tvec3 getDirection( vec2 uv, float face ) {\n\n\t\t\tuv = 2.0 * uv - 1.0;\n\n\t\t\tvec3 direction = vec3( uv, 1.0 );\n\n\t\t\tif ( face == 0.0 ) {\n\n\t\t\t\tdirection = direction.zyx; // ( 1, v, u ) pos x\n\n\t\t\t} else if ( face == 1.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xz *= -1.0; // ( -u, 1, -v ) pos y\n\n\t\t\t} else if ( face == 2.0 ) {\n\n\t\t\t\tdirection.x *= -1.0; // ( -u, v, 1 ) pos z\n\n\t\t\t} else if ( face == 3.0 ) {\n\n\t\t\t\tdirection = direction.zyx;\n\t\t\t\tdirection.xz *= -1.0; // ( -1, v, -u ) neg x\n\n\t\t\t} else if ( face == 4.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xy *= -1.0; // ( -u, -1, v ) neg y\n\n\t\t\t} else if ( face == 5.0 ) {\n\n\t\t\t\tdirection.z *= -1.0; // ( u, v, -1 ) neg z\n\n\t\t\t}\n\n\t\t\treturn direction;\n\n\t\t}\n\n\t\tvoid main() {\n\n\t\t\tvOutputDirection = getDirection( uv, faceIndex );\n\t\t\tgl_Position = vec4( position, 1.0 );\n\n\t\t}\n\t",fragmentShader:"\n\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tvarying vec3 vOutputDirection;\n\n\t\t\tuniform sampler2D envMap;\n\n\t\t\t#include <common>\n\n\t\t\tvoid main() {\n\n\t\t\t\tvec3 outputDirection = normalize( vOutputDirection );\n\t\t\t\tvec2 uv = equirectUv( outputDirection );\n\n\t\t\t\tgl_FragColor = vec4( texture2D ( envMap, uv ).rgb, 1.0 );\n\n\t\t\t}\n\t\t",blending:0,depthTest:!1,depthWrite:!1})}function TS(){return new Wi({name:"CubemapToCubeUV",uniforms:{envMap:{value:null},flipEnvMap:{value:-1}},vertexShader:"\n\n\t\tprecision mediump float;\n\t\tprecision mediump int;\n\n\t\tattribute float faceIndex;\n\n\t\tvarying vec3 vOutputDirection;\n\n\t\t// RH coordinate system; PMREM face-indexing convention\n\t\tvec3 getDirection( vec2 uv, float face ) {\n\n\t\t\tuv = 2.0 * uv - 1.0;\n\n\t\t\tvec3 direction = vec3( uv, 1.0 );\n\n\t\t\tif ( face == 0.0 ) {\n\n\t\t\t\tdirection = direction.zyx; // ( 1, v, u ) pos x\n\n\t\t\t} else if ( face == 1.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xz *= -1.0; // ( -u, 1, -v ) pos y\n\n\t\t\t} else if ( face == 2.0 ) {\n\n\t\t\t\tdirection.x *= -1.0; // ( -u, v, 1 ) pos z\n\n\t\t\t} else if ( face == 3.0 ) {\n\n\t\t\t\tdirection = direction.zyx;\n\t\t\t\tdirection.xz *= -1.0; // ( -1, v, -u ) neg x\n\n\t\t\t} else if ( face == 4.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xy *= -1.0; // ( -u, -1, v ) neg y\n\n\t\t\t} else if ( face == 5.0 ) {\n\n\t\t\t\tdirection.z *= -1.0; // ( u, v, -1 ) neg z\n\n\t\t\t}\n\n\t\t\treturn direction;\n\n\t\t}\n\n\t\tvoid main() {\n\n\t\t\tvOutputDirection = getDirection( uv, faceIndex );\n\t\t\tgl_Position = vec4( position, 1.0 );\n\n\t\t}\n\t",fragmentShader:"\n\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tuniform float flipEnvMap;\n\n\t\t\tvarying vec3 vOutputDirection;\n\n\t\t\tuniform samplerCube envMap;\n\n\t\t\tvoid main() {\n\n\t\t\t\tgl_FragColor = textureCube( envMap, vec3( flipEnvMap * vOutputDirection.x, vOutputDirection.yz ) );\n\n\t\t\t}\n\t\t",blending:0,depthTest:!1,depthWrite:!1})}function Xie(n){let e=new WeakMap,t=null;function s(a){const c=a.target;c.removeEventListener("dispose",s);const l=e.get(c);void 0!==l&&(e.delete(c),l.dispose())}return{get:function i(a){if(a&&a.isTexture){const c=a.mapping,l=303===c||304===c,u=301===c||302===c;if(l||u){if(a.isRenderTargetTexture&&!0===a.needsPMREMUpdate){a.needsPMREMUpdate=!1;let f=e.get(a);return null===t&&(t=new ES(n)),f=l?t.fromEquirectangular(a,f):t.fromCubemap(a,f),e.set(a,f),f.texture}if(e.has(a))return e.get(a).texture;{const f=a.image;if(l&&f&&f.height>0||u&&f&&function r(a){let c=0;for(let u=0;u<6;u++)void 0!==a[u]&&c++;return 6===c}(f)){null===t&&(t=new ES(n));const h=l?t.fromEquirectangular(a):t.fromCubemap(a);return e.set(a,h),a.addEventListener("dispose",s),h.texture}return null}}}return a},dispose:function o(){e=new WeakMap,null!==t&&(t.dispose(),t=null)}}}function Yie(n){const e={};function t(i){if(void 0!==e[i])return e[i];let r;switch(i){case"WEBGL_depth_texture":r=n.getExtension("WEBGL_depth_texture")||n.getExtension("MOZ_WEBGL_depth_texture")||n.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":r=n.getExtension("EXT_texture_filter_anisotropic")||n.getExtension("MOZ_EXT_texture_filter_anisotropic")||n.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":r=n.getExtension("WEBGL_compressed_texture_s3tc")||n.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||n.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":r=n.getExtension("WEBGL_compressed_texture_pvrtc")||n.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;default:r=n.getExtension(i)}return e[i]=r,r}return{has:function(i){return null!==t(i)},init:function(i){i.isWebGL2?t("EXT_color_buffer_float"):(t("WEBGL_depth_texture"),t("OES_texture_float"),t("OES_texture_half_float"),t("OES_texture_half_float_linear"),t("OES_standard_derivatives"),t("OES_element_index_uint"),t("OES_vertex_array_object"),t("ANGLE_instanced_arrays")),t("OES_texture_float_linear"),t("EXT_color_buffer_half_float"),t("WEBGL_multisampled_render_to_texture")},get:function(i){const r=t(i);return null===r&&console.warn("THREE.WebGLRenderer: "+i+" extension not supported."),r}}}function Kie(n,e,t,i){const r={},s=new WeakMap;function o(f){const h=f.target;null!==h.index&&e.remove(h.index);for(const p in h.attributes)e.remove(h.attributes[p]);h.removeEventListener("dispose",o),delete r[h.id];const d=s.get(h);d&&(e.remove(d),s.delete(h)),i.releaseStatesOfGeometry(h),!0===h.isInstancedBufferGeometry&&delete h._maxInstanceCount,t.memory.geometries--}function l(f){const h=[],d=f.index,p=f.attributes.position;let m=0;if(null!==d){const x=d.array;m=d.version;for(let y=0,_=x.length;y<_;y+=3){const M=x[y+0],w=x[y+1],D=x[y+2];h.push(M,w,w,D,D,M)}}else{m=p.version;for(let y=0,_=p.array.length/3-1;y<_;y+=3){const M=y+0,w=y+1,D=y+2;h.push(M,w,w,D,D,M)}}const g=new(oS(h)?_S:n7)(h,1);g.version=m;const v=s.get(f);v&&e.remove(v),s.set(f,g)}return{get:function a(f,h){return!0===r[h.id]||(h.addEventListener("dispose",o),r[h.id]=!0,t.memory.geometries++),h},update:function c(f){const h=f.attributes;for(const p in h)e.update(h[p],34962);const d=f.morphAttributes;for(const p in d){const m=d[p];for(let g=0,v=m.length;g<v;g++)e.update(m[g],34962)}},getWireframeAttribute:function u(f){const h=s.get(f);if(h){const d=f.index;null!==d&&h.version<d.version&&l(f)}else l(f);return s.get(f)}}}function Jie(n,e,t,i){const r=i.isWebGL2;let s,a,c;this.setMode=function o(h){s=h},this.setIndex=function l(h){a=h.type,c=h.bytesPerElement},this.render=function u(h,d){n.drawElements(s,d,a,h*c),t.update(d,s,1)},this.renderInstances=function f(h,d,p){if(0===p)return;let m,g;if(r)m=n,g="drawElementsInstanced";else if(m=e.get("ANGLE_instanced_arrays"),g="drawElementsInstancedANGLE",null===m)return void console.error("THREE.WebGLIndexedBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");m[g](s,d,a,h*c,p),t.update(d,s,p)}}function Qie(n){const t={frame:0,calls:0,triangles:0,points:0,lines:0};return{memory:{geometries:0,textures:0},render:t,programs:null,autoReset:!0,reset:function r(){t.frame++,t.calls=0,t.triangles=0,t.points=0,t.lines=0},update:function i(s,o,a){switch(t.calls++,o){case 4:t.triangles+=a*(s/3);break;case 1:t.lines+=a*(s/2);break;case 3:t.lines+=a*(s-1);break;case 2:t.lines+=a*s;break;case 0:t.points+=a*s;break;default:console.error("THREE.WebGLInfo: Unknown draw mode:",o)}}}}function ere(n,e){return n[0]-e[0]}function tre(n,e){return Math.abs(e[1])-Math.abs(n[1])}function nre(n,e,t){const i={},r=new Float32Array(8),s=new WeakMap,o=new ft,a=[];for(let l=0;l<8;l++)a[l]=[l,0];return{update:function c(l,u,f,h){const d=l.morphTargetInfluences;if(!0===e.isWebGL2){const p=u.morphAttributes.position||u.morphAttributes.normal||u.morphAttributes.color,m=void 0!==p?p.length:0;let g=s.get(u);if(void 0===g||g.count!==m){let F=function(){P.dispose(),s.delete(u),u.removeEventListener("dispose",F)};void 0!==g&&g.texture.dispose();const y=void 0!==u.morphAttributes.position,_=void 0!==u.morphAttributes.normal,M=void 0!==u.morphAttributes.color,w=u.morphAttributes.position||[],D=u.morphAttributes.normal||[],b=u.morphAttributes.color||[];let E=0;!0===y&&(E=1),!0===_&&(E=2),!0===M&&(E=3);let I=u.attributes.position.count*E,z=1;I>e.maxTextureSize&&(z=Math.ceil(I/e.maxTextureSize),I=e.maxTextureSize);const U=new Float32Array(I*z*4*m),P=new G8(U,I,z,m);P.type=po,P.needsUpdate=!0;const L=4*E;for(let H=0;H<m;H++){const X=w[H],B=D[H],te=b[H],Y=I*z*4*H;for(let k=0;k<X.count;k++){const V=k*L;!0===y&&(o.fromBufferAttribute(X,k),U[Y+V+0]=o.x,U[Y+V+1]=o.y,U[Y+V+2]=o.z,U[Y+V+3]=0),!0===_&&(o.fromBufferAttribute(B,k),U[Y+V+4]=o.x,U[Y+V+5]=o.y,U[Y+V+6]=o.z,U[Y+V+7]=0),!0===M&&(o.fromBufferAttribute(te,k),U[Y+V+8]=o.x,U[Y+V+9]=o.y,U[Y+V+10]=o.z,U[Y+V+11]=4===te.itemSize?o.w:1)}}g={count:m,texture:P,size:new q(I,z)},s.set(u,g),u.addEventListener("dispose",F)}let v=0;for(let y=0;y<d.length;y++)v+=d[y];const x=u.morphTargetsRelative?1:1-v;h.getUniforms().setValue(n,"morphTargetBaseInfluence",x),h.getUniforms().setValue(n,"morphTargetInfluences",d),h.getUniforms().setValue(n,"morphTargetsTexture",g.texture,t),h.getUniforms().setValue(n,"morphTargetsTextureSize",g.size)}else{const p=void 0===d?0:d.length;let m=i[u.id];if(void 0===m||m.length!==p){m=[];for(let _=0;_<p;_++)m[_]=[_,0];i[u.id]=m}for(let _=0;_<p;_++){const M=m[_];M[0]=_,M[1]=d[_]}m.sort(tre);for(let _=0;_<8;_++)_<p&&m[_][1]?(a[_][0]=m[_][0],a[_][1]=m[_][1]):(a[_][0]=Number.MAX_SAFE_INTEGER,a[_][1]=0);a.sort(ere);const g=u.morphAttributes.position,v=u.morphAttributes.normal;let x=0;for(let _=0;_<8;_++){const M=a[_],w=M[0],D=M[1];w!==Number.MAX_SAFE_INTEGER&&D?(g&&u.getAttribute("morphTarget"+_)!==g[w]&&u.setAttribute("morphTarget"+_,g[w]),v&&u.getAttribute("morphNormal"+_)!==v[w]&&u.setAttribute("morphNormal"+_,v[w]),r[_]=D,x+=D):(g&&!0===u.hasAttribute("morphTarget"+_)&&u.deleteAttribute("morphTarget"+_),v&&!0===u.hasAttribute("morphNormal"+_)&&u.deleteAttribute("morphNormal"+_),r[_]=0)}const y=u.morphTargetsRelative?1:1-x;h.getUniforms().setValue(n,"morphTargetBaseInfluence",y),h.getUniforms().setValue(n,"morphTargetInfluences",r)}}}}function ire(n,e,t,i){let r=new WeakMap;function a(c){const l=c.target;l.removeEventListener("dispose",a),t.remove(l.instanceMatrix),null!==l.instanceColor&&t.remove(l.instanceColor)}return{update:function s(c){const l=i.render.frame,f=e.get(c,c.geometry);return r.get(f)!==l&&(e.update(f),r.set(f,l)),c.isInstancedMesh&&(!1===c.hasEventListener("dispose",a)&&c.addEventListener("dispose",a),t.update(c.instanceMatrix,34962),null!==c.instanceColor&&t.update(c.instanceColor,34962)),f},dispose:function o(){r=new WeakMap}}}const IS=new Hi,LS=new G8,RS=new lS,PS=new E0,zS=[],NS=[],FS=new Float32Array(16),OS=new Float32Array(9),kS=new Float32Array(4);function _2(n,e,t){const i=n[0];if(i<=0||i>0)return n;const r=e*t;let s=zS[r];if(void 0===s&&(s=new Float32Array(r),zS[r]=s),0!==e){i.toArray(s,0);for(let o=1,a=0;o!==e;++o)a+=t,n[o].toArray(s,a)}return s}function zn(n,e){if(n.length!==e.length)return!1;for(let t=0,i=n.length;t<i;t++)if(n[t]!==e[t])return!1;return!0}function Nn(n,e){for(let t=0,i=e.length;t<i;t++)n[t]=e[t]}function I0(n,e){let t=NS[e];void 0===t&&(t=new Int32Array(e),NS[e]=t);for(let i=0;i!==e;++i)t[i]=n.allocateTextureUnit();return t}function rre(n,e){const t=this.cache;t[0]!==e&&(n.uniform1f(this.addr,e),t[0]=e)}function sre(n,e){const t=this.cache;if(void 0!==e.x)(t[0]!==e.x||t[1]!==e.y)&&(n.uniform2f(this.addr,e.x,e.y),t[0]=e.x,t[1]=e.y);else{if(zn(t,e))return;n.uniform2fv(this.addr,e),Nn(t,e)}}function ore(n,e){const t=this.cache;if(void 0!==e.x)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z)&&(n.uniform3f(this.addr,e.x,e.y,e.z),t[0]=e.x,t[1]=e.y,t[2]=e.z);else if(void 0!==e.r)(t[0]!==e.r||t[1]!==e.g||t[2]!==e.b)&&(n.uniform3f(this.addr,e.r,e.g,e.b),t[0]=e.r,t[1]=e.g,t[2]=e.b);else{if(zn(t,e))return;n.uniform3fv(this.addr,e),Nn(t,e)}}function are(n,e){const t=this.cache;if(void 0!==e.x)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z||t[3]!==e.w)&&(n.uniform4f(this.addr,e.x,e.y,e.z,e.w),t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.w);else{if(zn(t,e))return;n.uniform4fv(this.addr,e),Nn(t,e)}}function cre(n,e){const t=this.cache,i=e.elements;if(void 0===i){if(zn(t,e))return;n.uniformMatrix2fv(this.addr,!1,e),Nn(t,e)}else{if(zn(t,i))return;kS.set(i),n.uniformMatrix2fv(this.addr,!1,kS),Nn(t,i)}}function lre(n,e){const t=this.cache,i=e.elements;if(void 0===i){if(zn(t,e))return;n.uniformMatrix3fv(this.addr,!1,e),Nn(t,e)}else{if(zn(t,i))return;OS.set(i),n.uniformMatrix3fv(this.addr,!1,OS),Nn(t,i)}}function ure(n,e){const t=this.cache,i=e.elements;if(void 0===i){if(zn(t,e))return;n.uniformMatrix4fv(this.addr,!1,e),Nn(t,e)}else{if(zn(t,i))return;FS.set(i),n.uniformMatrix4fv(this.addr,!1,FS),Nn(t,i)}}function fre(n,e){const t=this.cache;t[0]!==e&&(n.uniform1i(this.addr,e),t[0]=e)}function hre(n,e){const t=this.cache;if(void 0!==e.x)(t[0]!==e.x||t[1]!==e.y)&&(n.uniform2i(this.addr,e.x,e.y),t[0]=e.x,t[1]=e.y);else{if(zn(t,e))return;n.uniform2iv(this.addr,e),Nn(t,e)}}function dre(n,e){const t=this.cache;if(void 0!==e.x)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z)&&(n.uniform3i(this.addr,e.x,e.y,e.z),t[0]=e.x,t[1]=e.y,t[2]=e.z);else{if(zn(t,e))return;n.uniform3iv(this.addr,e),Nn(t,e)}}function pre(n,e){const t=this.cache;if(void 0!==e.x)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z||t[3]!==e.w)&&(n.uniform4i(this.addr,e.x,e.y,e.z,e.w),t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.w);else{if(zn(t,e))return;n.uniform4iv(this.addr,e),Nn(t,e)}}function mre(n,e){const t=this.cache;t[0]!==e&&(n.uniform1ui(this.addr,e),t[0]=e)}function gre(n,e){const t=this.cache;if(void 0!==e.x)(t[0]!==e.x||t[1]!==e.y)&&(n.uniform2ui(this.addr,e.x,e.y),t[0]=e.x,t[1]=e.y);else{if(zn(t,e))return;n.uniform2uiv(this.addr,e),Nn(t,e)}}function vre(n,e){const t=this.cache;if(void 0!==e.x)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z)&&(n.uniform3ui(this.addr,e.x,e.y,e.z),t[0]=e.x,t[1]=e.y,t[2]=e.z);else{if(zn(t,e))return;n.uniform3uiv(this.addr,e),Nn(t,e)}}function yre(n,e){const t=this.cache;if(void 0!==e.x)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z||t[3]!==e.w)&&(n.uniform4ui(this.addr,e.x,e.y,e.z,e.w),t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.w);else{if(zn(t,e))return;n.uniform4uiv(this.addr,e),Nn(t,e)}}function _re(n,e,t){const i=this.cache,r=t.allocateTextureUnit();i[0]!==r&&(n.uniform1i(this.addr,r),i[0]=r),t.setTexture2D(e||IS,r)}function xre(n,e,t){const i=this.cache,r=t.allocateTextureUnit();i[0]!==r&&(n.uniform1i(this.addr,r),i[0]=r),t.setTexture3D(e||RS,r)}function bre(n,e,t){const i=this.cache,r=t.allocateTextureUnit();i[0]!==r&&(n.uniform1i(this.addr,r),i[0]=r),t.setTextureCube(e||PS,r)}function Mre(n,e,t){const i=this.cache,r=t.allocateTextureUnit();i[0]!==r&&(n.uniform1i(this.addr,r),i[0]=r),t.setTexture2DArray(e||LS,r)}function Cre(n,e){n.uniform1fv(this.addr,e)}function Sre(n,e){const t=_2(e,this.size,2);n.uniform2fv(this.addr,t)}function Ere(n,e){const t=_2(e,this.size,3);n.uniform3fv(this.addr,t)}function Dre(n,e){const t=_2(e,this.size,4);n.uniform4fv(this.addr,t)}function Are(n,e){const t=_2(e,this.size,4);n.uniformMatrix2fv(this.addr,!1,t)}function Tre(n,e){const t=_2(e,this.size,9);n.uniformMatrix3fv(this.addr,!1,t)}function Ire(n,e){const t=_2(e,this.size,16);n.uniformMatrix4fv(this.addr,!1,t)}function Lre(n,e){n.uniform1iv(this.addr,e)}function Rre(n,e){n.uniform2iv(this.addr,e)}function Pre(n,e){n.uniform3iv(this.addr,e)}function zre(n,e){n.uniform4iv(this.addr,e)}function Nre(n,e){n.uniform1uiv(this.addr,e)}function Fre(n,e){n.uniform2uiv(this.addr,e)}function Ore(n,e){n.uniform3uiv(this.addr,e)}function kre(n,e){n.uniform4uiv(this.addr,e)}function Vre(n,e,t){const i=this.cache,r=e.length,s=I0(t,r);zn(i,s)||(n.uniform1iv(this.addr,s),Nn(i,s));for(let o=0;o!==r;++o)t.setTexture2D(e[o]||IS,s[o])}function Hre(n,e,t){const i=this.cache,r=e.length,s=I0(t,r);zn(i,s)||(n.uniform1iv(this.addr,s),Nn(i,s));for(let o=0;o!==r;++o)t.setTexture3D(e[o]||RS,s[o])}function Ure(n,e,t){const i=this.cache,r=e.length,s=I0(t,r);zn(i,s)||(n.uniform1iv(this.addr,s),Nn(i,s));for(let o=0;o!==r;++o)t.setTextureCube(e[o]||PS,s[o])}function Bre(n,e,t){const i=this.cache,r=e.length,s=I0(t,r);zn(i,s)||(n.uniform1iv(this.addr,s),Nn(i,s));for(let o=0;o!==r;++o)t.setTexture2DArray(e[o]||LS,s[o])}class Wre{constructor(e,t,i){this.id=e,this.addr=i,this.cache=[],this.setValue=function wre(n){switch(n){case 5126:return rre;case 35664:return sre;case 35665:return ore;case 35666:return are;case 35674:return cre;case 35675:return lre;case 35676:return ure;case 5124:case 35670:return fre;case 35667:case 35671:return hre;case 35668:case 35672:return dre;case 35669:case 35673:return pre;case 5125:return mre;case 36294:return gre;case 36295:return vre;case 36296:return yre;case 35678:case 36198:case 36298:case 36306:case 35682:return _re;case 35679:case 36299:case 36307:return xre;case 35680:case 36300:case 36308:case 36293:return bre;case 36289:case 36303:case 36311:case 36292:return Mre}}(t.type)}}class jre{constructor(e,t,i){this.id=e,this.addr=i,this.cache=[],this.size=t.size,this.setValue=function Gre(n){switch(n){case 5126:return Cre;case 35664:return Sre;case 35665:return Ere;case 35666:return Dre;case 35674:return Are;case 35675:return Tre;case 35676:return Ire;case 5124:case 35670:return Lre;case 35667:case 35671:return Rre;case 35668:case 35672:return Pre;case 35669:case 35673:return zre;case 5125:return Nre;case 36294:return Fre;case 36295:return Ore;case 36296:return kre;case 35678:case 36198:case 36298:case 36306:case 35682:return Vre;case 35679:case 36299:case 36307:return Hre;case 35680:case 36300:case 36308:case 36293:return Ure;case 36289:case 36303:case 36311:case 36292:return Bre}}(t.type)}}class $re{constructor(e){this.id=e,this.seq=[],this.map={}}setValue(e,t,i){const r=this.seq;for(let s=0,o=r.length;s!==o;++s){const a=r[s];a.setValue(e,t[a.id],i)}}}const m7=/(\w+)(\])?(\[|\.)?/g;function VS(n,e){n.seq.push(e),n.map[e.id]=e}function qre(n,e,t){const i=n.name,r=i.length;for(m7.lastIndex=0;;){const s=m7.exec(i),o=m7.lastIndex;let a=s[1];const l=s[3];if("]"===s[2]&&(a|=0),void 0===l||"["===l&&o+2===r){VS(t,void 0===l?new Wre(a,n,e):new jre(a,n,e));break}{let f=t.map[a];void 0===f&&(f=new $re(a),VS(t,f)),t=f}}}class L0{constructor(e,t){this.seq=[],this.map={};const i=e.getProgramParameter(t,35718);for(let r=0;r<i;++r){const s=e.getActiveUniform(t,r);qre(s,e.getUniformLocation(t,s.name),this)}}setValue(e,t,i,r){const s=this.map[t];void 0!==s&&s.setValue(e,i,r)}setOptional(e,t,i){const r=t[i];void 0!==r&&this.setValue(e,i,r)}static upload(e,t,i,r){for(let s=0,o=t.length;s!==o;++s){const a=t[s],c=i[a.id];!1!==c.needsUpdate&&a.setValue(e,c.value,r)}}static seqWithValue(e,t){const i=[];for(let r=0,s=e.length;r!==s;++r){const o=e[r];o.id in t&&i.push(o)}return i}}function HS(n,e,t){const i=n.createShader(e);return n.shaderSource(i,t),n.compileShader(i),i}let Zre=0;function US(n,e,t){const i=n.getShaderParameter(e,35713),r=n.getShaderInfoLog(e).trim();if(i&&""===r)return"";const s=/ERROR: 0:(\d+)/.exec(r);if(s){const o=parseInt(s[1]);return t.toUpperCase()+"\n\n"+r+"\n\n"+function Xre(n,e){const t=n.split("\n"),i=[],r=Math.max(e-6,0),s=Math.min(e+6,t.length);for(let o=r;o<s;o++){const a=o+1;i.push(`${a===e?">":" "} ${a}: ${t[o]}`)}return i.join("\n")}(n.getShaderSource(e),o)}return r}function Kre(n,e){const t=function Yre(n){switch(n){case da:return["Linear","( value )"];case bt:return["sRGB","( value )"];default:return console.warn("THREE.WebGLProgram: Unsupported encoding:",n),["Linear","( value )"]}}(e);return"vec4 "+n+"( vec4 value ) { return LinearTo"+t[0]+t[1]+"; }"}function Jre(n,e){let t;switch(e){case 1:t="Linear";break;case 2:t="Reinhard";break;case 3:t="OptimizedCineon";break;case 4:t="ACESFilmic";break;case 5:t="Custom";break;default:console.warn("THREE.WebGLProgram: Unsupported toneMapping:",e),t="Linear"}return"vec3 "+n+"( vec3 color ) { return "+t+"ToneMapping( color ); }"}function jl(n){return""!==n}function BS(n,e){const t=e.numSpotLightShadows+e.numSpotLightMaps-e.numSpotLightShadowsWithMaps;return n.replace(/NUM_DIR_LIGHTS/g,e.numDirLights).replace(/NUM_SPOT_LIGHTS/g,e.numSpotLights).replace(/NUM_SPOT_LIGHT_MAPS/g,e.numSpotLightMaps).replace(/NUM_SPOT_LIGHT_COORDS/g,t).replace(/NUM_RECT_AREA_LIGHTS/g,e.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,e.numPointLights).replace(/NUM_HEMI_LIGHTS/g,e.numHemiLights).replace(/NUM_DIR_LIGHT_SHADOWS/g,e.numDirLightShadows).replace(/NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS/g,e.numSpotLightShadowsWithMaps).replace(/NUM_SPOT_LIGHT_SHADOWS/g,e.numSpotLightShadows).replace(/NUM_POINT_LIGHT_SHADOWS/g,e.numPointLightShadows)}function GS(n,e){return n.replace(/NUM_CLIPPING_PLANES/g,e.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,e.numClippingPlanes-e.numClipIntersection)}const nse=/^[ \t]*#include +<([\w\d./]+)>/gm;function g7(n){return n.replace(nse,ise)}function ise(n,e){const t=$e[e];if(void 0===t)throw new Error("Can not resolve #include <"+e+">");return g7(t)}const rse=/#pragma unroll_loop_start\s+for\s*\(\s*int\s+i\s*=\s*(\d+)\s*;\s*i\s*<\s*(\d+)\s*;\s*i\s*\+\+\s*\)\s*{([\s\S]+?)}\s+#pragma unroll_loop_end/g;function WS(n){return n.replace(rse,sse)}function sse(n,e,t,i){let r="";for(let s=parseInt(e);s<parseInt(t);s++)r+=i.replace(/\[\s*i\s*\]/g,"[ "+s+" ]").replace(/UNROLLED_LOOP_INDEX/g,s);return r}function jS(n){let e="precision "+n.precision+" float;\nprecision "+n.precision+" int;";return"highp"===n.precision?e+="\n#define HIGH_PRECISION":"mediump"===n.precision?e+="\n#define MEDIUM_PRECISION":"lowp"===n.precision&&(e+="\n#define LOW_PRECISION"),e}function fse(n,e,t,i){const r=n.getContext(),s=t.defines;let o=t.vertexShader,a=t.fragmentShader;const c=function ose(n){let e="SHADOWMAP_TYPE_BASIC";return 1===n.shadowMapType?e="SHADOWMAP_TYPE_PCF":2===n.shadowMapType?e="SHADOWMAP_TYPE_PCF_SOFT":3===n.shadowMapType&&(e="SHADOWMAP_TYPE_VSM"),e}(t),l=function ase(n){let e="ENVMAP_TYPE_CUBE";if(n.envMap)switch(n.envMapMode){case 301:case 302:e="ENVMAP_TYPE_CUBE";break;case 306:e="ENVMAP_TYPE_CUBE_UV"}return e}(t),u=function cse(n){let e="ENVMAP_MODE_REFLECTION";return n.envMap&&302===n.envMapMode&&(e="ENVMAP_MODE_REFRACTION"),e}(t),f=function lse(n){let e="ENVMAP_BLENDING_NONE";if(n.envMap)switch(n.combine){case 0:e="ENVMAP_BLENDING_MULTIPLY";break;case 1:e="ENVMAP_BLENDING_MIX";break;case 2:e="ENVMAP_BLENDING_ADD"}return e}(t),h=function use(n){const e=n.envMapCubeUVHeight;if(null===e)return null;const t=Math.log2(e)-2,i=1/e;return{texelWidth:1/(3*Math.max(Math.pow(2,t),112)),texelHeight:i,maxMip:t}}(t),d=t.isWebGL2?"":function Qre(n){return[n.extensionDerivatives||n.envMapCubeUVHeight||n.bumpMap||n.tangentSpaceNormalMap||n.clearcoatNormalMap||n.flatShading||"physical"===n.shaderID?"#extension GL_OES_standard_derivatives : enable":"",(n.extensionFragDepth||n.logarithmicDepthBuffer)&&n.rendererExtensionFragDepth?"#extension GL_EXT_frag_depth : enable":"",n.extensionDrawBuffers&&n.rendererExtensionDrawBuffers?"#extension GL_EXT_draw_buffers : require":"",(n.extensionShaderTextureLOD||n.envMap||n.transmission)&&n.rendererExtensionShaderTextureLod?"#extension GL_EXT_shader_texture_lod : enable":""].filter(jl).join("\n")}(t),p=function ese(n){const e=[];for(const t in n){const i=n[t];!1!==i&&e.push("#define "+t+" "+i)}return e.join("\n")}(s),m=r.createProgram();let g,v,x=t.glslVersion?"#version "+t.glslVersion+"\n":"";t.isRawShaderMaterial?(g=[p].filter(jl).join("\n"),g.length>0&&(g+="\n"),v=[d,p].filter(jl).join("\n"),v.length>0&&(v+="\n")):(g=[jS(t),"#define SHADER_NAME "+t.shaderName,p,t.instancing?"#define USE_INSTANCING":"",t.instancingColor?"#define USE_INSTANCING_COLOR":"",t.supportsVertexTextures?"#define VERTEX_TEXTURES":"",t.useFog&&t.fog?"#define USE_FOG":"",t.useFog&&t.fogExp2?"#define FOG_EXP2":"",t.map?"#define USE_MAP":"",t.envMap?"#define USE_ENVMAP":"",t.envMap?"#define "+u:"",t.lightMap?"#define USE_LIGHTMAP":"",t.aoMap?"#define USE_AOMAP":"",t.emissiveMap?"#define USE_EMISSIVEMAP":"",t.bumpMap?"#define USE_BUMPMAP":"",t.normalMap?"#define USE_NORMALMAP":"",t.normalMap&&t.objectSpaceNormalMap?"#define OBJECTSPACE_NORMALMAP":"",t.normalMap&&t.tangentSpaceNormalMap?"#define TANGENTSPACE_NORMALMAP":"",t.clearcoatMap?"#define USE_CLEARCOATMAP":"",t.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",t.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",t.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",t.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",t.displacementMap&&t.supportsVertexTextures?"#define USE_DISPLACEMENTMAP":"",t.specularMap?"#define USE_SPECULARMAP":"",t.specularIntensityMap?"#define USE_SPECULARINTENSITYMAP":"",t.specularColorMap?"#define USE_SPECULARCOLORMAP":"",t.roughnessMap?"#define USE_ROUGHNESSMAP":"",t.metalnessMap?"#define USE_METALNESSMAP":"",t.alphaMap?"#define USE_ALPHAMAP":"",t.transmission?"#define USE_TRANSMISSION":"",t.transmissionMap?"#define USE_TRANSMISSIONMAP":"",t.thicknessMap?"#define USE_THICKNESSMAP":"",t.sheenColorMap?"#define USE_SHEENCOLORMAP":"",t.sheenRoughnessMap?"#define USE_SHEENROUGHNESSMAP":"",t.vertexTangents?"#define USE_TANGENT":"",t.vertexColors?"#define USE_COLOR":"",t.vertexAlphas?"#define USE_COLOR_ALPHA":"",t.vertexUvs?"#define USE_UV":"",t.uvsVertexOnly?"#define UVS_VERTEX_ONLY":"",t.flatShading?"#define FLAT_SHADED":"",t.skinning?"#define USE_SKINNING":"",t.morphTargets?"#define USE_MORPHTARGETS":"",t.morphNormals&&!1===t.flatShading?"#define USE_MORPHNORMALS":"",t.morphColors&&t.isWebGL2?"#define USE_MORPHCOLORS":"",t.morphTargetsCount>0&&t.isWebGL2?"#define MORPHTARGETS_TEXTURE":"",t.morphTargetsCount>0&&t.isWebGL2?"#define MORPHTARGETS_TEXTURE_STRIDE "+t.morphTextureStride:"",t.morphTargetsCount>0&&t.isWebGL2?"#define MORPHTARGETS_COUNT "+t.morphTargetsCount:"",t.doubleSided?"#define DOUBLE_SIDED":"",t.flipSided?"#define FLIP_SIDED":"",t.shadowMapEnabled?"#define USE_SHADOWMAP":"",t.shadowMapEnabled?"#define "+c:"",t.sizeAttenuation?"#define USE_SIZEATTENUATION":"",t.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",t.logarithmicDepthBuffer&&t.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;","#ifdef USE_INSTANCING","\tattribute mat4 instanceMatrix;","#endif","#ifdef USE_INSTANCING_COLOR","\tattribute vec3 instanceColor;","#endif","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_TANGENT","\tattribute vec4 tangent;","#endif","#if defined( USE_COLOR_ALPHA )","\tattribute vec4 color;","#elif defined( USE_COLOR )","\tattribute vec3 color;","#endif","#if ( defined( USE_MORPHTARGETS ) && ! defined( MORPHTARGETS_TEXTURE ) )","\tattribute vec3 morphTarget0;","\tattribute vec3 morphTarget1;","\tattribute vec3 morphTarget2;","\tattribute vec3 morphTarget3;","\t#ifdef USE_MORPHNORMALS","\t\tattribute vec3 morphNormal0;","\t\tattribute vec3 morphNormal1;","\t\tattribute vec3 morphNormal2;","\t\tattribute vec3 morphNormal3;","\t#else","\t\tattribute vec3 morphTarget4;","\t\tattribute vec3 morphTarget5;","\t\tattribute vec3 morphTarget6;","\t\tattribute vec3 morphTarget7;","\t#endif","#endif","#ifdef USE_SKINNING","\tattribute vec4 skinIndex;","\tattribute vec4 skinWeight;","#endif","\n"].filter(jl).join("\n"),v=[d,jS(t),"#define SHADER_NAME "+t.shaderName,p,t.useFog&&t.fog?"#define USE_FOG":"",t.useFog&&t.fogExp2?"#define FOG_EXP2":"",t.map?"#define USE_MAP":"",t.matcap?"#define USE_MATCAP":"",t.envMap?"#define USE_ENVMAP":"",t.envMap?"#define "+l:"",t.envMap?"#define "+u:"",t.envMap?"#define "+f:"",h?"#define CUBEUV_TEXEL_WIDTH "+h.texelWidth:"",h?"#define CUBEUV_TEXEL_HEIGHT "+h.texelHeight:"",h?"#define CUBEUV_MAX_MIP "+h.maxMip+".0":"",t.lightMap?"#define USE_LIGHTMAP":"",t.aoMap?"#define USE_AOMAP":"",t.emissiveMap?"#define USE_EMISSIVEMAP":"",t.bumpMap?"#define USE_BUMPMAP":"",t.normalMap?"#define USE_NORMALMAP":"",t.normalMap&&t.objectSpaceNormalMap?"#define OBJECTSPACE_NORMALMAP":"",t.normalMap&&t.tangentSpaceNormalMap?"#define TANGENTSPACE_NORMALMAP":"",t.clearcoat?"#define USE_CLEARCOAT":"",t.clearcoatMap?"#define USE_CLEARCOATMAP":"",t.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",t.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",t.iridescence?"#define USE_IRIDESCENCE":"",t.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",t.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",t.specularMap?"#define USE_SPECULARMAP":"",t.specularIntensityMap?"#define USE_SPECULARINTENSITYMAP":"",t.specularColorMap?"#define USE_SPECULARCOLORMAP":"",t.roughnessMap?"#define USE_ROUGHNESSMAP":"",t.metalnessMap?"#define USE_METALNESSMAP":"",t.alphaMap?"#define USE_ALPHAMAP":"",t.alphaTest?"#define USE_ALPHATEST":"",t.sheen?"#define USE_SHEEN":"",t.sheenColorMap?"#define USE_SHEENCOLORMAP":"",t.sheenRoughnessMap?"#define USE_SHEENROUGHNESSMAP":"",t.transmission?"#define USE_TRANSMISSION":"",t.transmissionMap?"#define USE_TRANSMISSIONMAP":"",t.thicknessMap?"#define USE_THICKNESSMAP":"",t.decodeVideoTexture?"#define DECODE_VIDEO_TEXTURE":"",t.vertexTangents?"#define USE_TANGENT":"",t.vertexColors||t.instancingColor?"#define USE_COLOR":"",t.vertexAlphas?"#define USE_COLOR_ALPHA":"",t.vertexUvs?"#define USE_UV":"",t.uvsVertexOnly?"#define UVS_VERTEX_ONLY":"",t.gradientMap?"#define USE_GRADIENTMAP":"",t.flatShading?"#define FLAT_SHADED":"",t.doubleSided?"#define DOUBLE_SIDED":"",t.flipSided?"#define FLIP_SIDED":"",t.shadowMapEnabled?"#define USE_SHADOWMAP":"",t.shadowMapEnabled?"#define "+c:"",t.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",t.physicallyCorrectLights?"#define PHYSICALLY_CORRECT_LIGHTS":"",t.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",t.logarithmicDepthBuffer&&t.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;",0!==t.toneMapping?"#define TONE_MAPPING":"",0!==t.toneMapping?$e.tonemapping_pars_fragment:"",0!==t.toneMapping?Jre("toneMapping",t.toneMapping):"",t.dithering?"#define DITHERING":"",t.opaque?"#define OPAQUE":"",$e.encodings_pars_fragment,Kre("linearToOutputTexel",t.outputEncoding),t.useDepthPacking?"#define DEPTH_PACKING "+t.depthPacking:"","\n"].filter(jl).join("\n")),o=g7(o),o=BS(o,t),o=GS(o,t),a=g7(a),a=BS(a,t),a=GS(a,t),o=WS(o),a=WS(a),t.isWebGL2&&!0!==t.isRawShaderMaterial&&(x="#version 300 es\n",g=["precision mediump sampler2DArray;","#define attribute in","#define varying out","#define texture2D texture"].join("\n")+"\n"+g,v=["#define varying in","300 es"===t.glslVersion?"":"layout(location = 0) out highp vec4 pc_fragColor;","300 es"===t.glslVersion?"":"#define gl_FragColor pc_fragColor","#define gl_FragDepthEXT gl_FragDepth","#define texture2D texture","#define textureCube texture","#define texture2DProj textureProj","#define texture2DLodEXT textureLod","#define texture2DProjLodEXT textureProjLod","#define textureCubeLodEXT textureLod","#define texture2DGradEXT textureGrad","#define texture2DProjGradEXT textureProjGrad","#define textureCubeGradEXT textureGrad"].join("\n")+"\n"+v);const _=x+v+a,M=HS(r,35633,x+g+o),w=HS(r,35632,_);if(r.attachShader(m,M),r.attachShader(m,w),void 0!==t.index0AttributeName?r.bindAttribLocation(m,0,t.index0AttributeName):!0===t.morphTargets&&r.bindAttribLocation(m,0,"position"),r.linkProgram(m),n.debug.checkShaderErrors){const E=r.getProgramInfoLog(m).trim(),I=r.getShaderInfoLog(M).trim(),z=r.getShaderInfoLog(w).trim();let U=!0,P=!0;if(!1===r.getProgramParameter(m,35714)){U=!1;const L=US(r,M,"vertex"),F=US(r,w,"fragment");console.error("THREE.WebGLProgram: Shader Error "+r.getError()+" - VALIDATE_STATUS "+r.getProgramParameter(m,35715)+"\n\nProgram Info Log: "+E+"\n"+L+"\n"+F)}else""!==E?console.warn("THREE.WebGLProgram: Program Info Log:",E):(""===I||""===z)&&(P=!1);P&&(this.diagnostics={runnable:U,programLog:E,vertexShader:{log:I,prefix:g},fragmentShader:{log:z,prefix:v}})}let D,b;return r.deleteShader(M),r.deleteShader(w),this.getUniforms=function(){return void 0===D&&(D=new L0(r,m)),D},this.getAttributes=function(){return void 0===b&&(b=function tse(n,e){const t={},i=n.getProgramParameter(e,35721);for(let r=0;r<i;r++){const s=n.getActiveAttrib(e,r),o=s.name;let a=1;35674===s.type&&(a=2),35675===s.type&&(a=3),35676===s.type&&(a=4),t[o]={type:s.type,location:n.getAttribLocation(e,o),locationSize:a}}return t}(r,m)),b},this.destroy=function(){i.releaseStatesOfProgram(this),r.deleteProgram(m),this.program=void 0},this.name=t.shaderName,this.id=Zre++,this.cacheKey=e,this.usedTimes=1,this.program=m,this.vertexShader=M,this.fragmentShader=w,this}let hse=0;class dse{constructor(){this.shaderCache=new Map,this.materialCache=new Map}update(e){const i=e.fragmentShader,r=this._getShaderStage(e.vertexShader),s=this._getShaderStage(i),o=this._getShaderCacheForMaterial(e);return!1===o.has(r)&&(o.add(r),r.usedTimes++),!1===o.has(s)&&(o.add(s),s.usedTimes++),this}remove(e){const t=this.materialCache.get(e);for(const i of t)i.usedTimes--,0===i.usedTimes&&this.shaderCache.delete(i.code);return this.materialCache.delete(e),this}getVertexShaderID(e){return this._getShaderStage(e.vertexShader).id}getFragmentShaderID(e){return this._getShaderStage(e.fragmentShader).id}dispose(){this.shaderCache.clear(),this.materialCache.clear()}_getShaderCacheForMaterial(e){const t=this.materialCache;let i=t.get(e);return void 0===i&&(i=new Set,t.set(e,i)),i}_getShaderStage(e){const t=this.shaderCache;let i=t.get(e);return void 0===i&&(i=new pse(e),t.set(e,i)),i}}class pse{constructor(e){this.id=hse++,this.code=e,this.usedTimes=0}}function mse(n,e,t,i,r,s,o){const a=new K8,c=new dse,l=[],u=r.isWebGL2,f=r.logarithmicDepthBuffer,h=r.vertexTextures;let d=r.precision;const p={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"toon",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",MeshMatcapMaterial:"matcap",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow",SpriteMaterial:"sprite"};return{getParameters:function m(b,E,I,z,U){const P=z.fog,L=U.geometry,H=(b.isMeshStandardMaterial?t:e).get(b.envMap||(b.isMeshStandardMaterial?z.environment:null)),X=H&&306===H.mapping?H.image.height:null,B=p[b.type];null!==b.precision&&(d=r.getMaxPrecision(b.precision),d!==b.precision&&console.warn("THREE.WebGLProgram.getParameters:",b.precision,"not supported, using",d,"instead."));const te=L.morphAttributes.position||L.morphAttributes.normal||L.morphAttributes.color,Y=void 0!==te?te.length:0;let V,ie,ne,se,k=0;if(void 0!==L.morphAttributes.position&&(k=1),void 0!==L.morphAttributes.normal&&(k=2),void 0!==L.morphAttributes.color&&(k=3),B){const rt=Jr[B];V=rt.vertexShader,ie=rt.fragmentShader}else V=b.vertexShader,ie=b.fragmentShader,c.update(b),ne=c.getVertexShaderID(b),se=c.getFragmentShaderID(b);const W=n.getRenderTarget(),ye=b.clearcoat>0,je=b.iridescence>0;return{isWebGL2:u,shaderID:B,shaderName:b.type,vertexShader:V,fragmentShader:ie,defines:b.defines,customVertexShaderID:ne,customFragmentShaderID:se,isRawShaderMaterial:!0===b.isRawShaderMaterial,glslVersion:b.glslVersion,precision:d,instancing:!0===U.isInstancedMesh,instancingColor:!0===U.isInstancedMesh&&null!==U.instanceColor,supportsVertexTextures:h,outputEncoding:null===W?n.outputEncoding:!0===W.isXRRenderTarget?W.texture.encoding:da,map:!!b.map,matcap:!!b.matcap,envMap:!!H,envMapMode:H&&H.mapping,envMapCubeUVHeight:X,lightMap:!!b.lightMap,aoMap:!!b.aoMap,emissiveMap:!!b.emissiveMap,bumpMap:!!b.bumpMap,normalMap:!!b.normalMap,objectSpaceNormalMap:1===b.normalMapType,tangentSpaceNormalMap:0===b.normalMapType,decodeVideoTexture:!!b.map&&!0===b.map.isVideoTexture&&b.map.encoding===bt,clearcoat:ye,clearcoatMap:ye&&!!b.clearcoatMap,clearcoatRoughnessMap:ye&&!!b.clearcoatRoughnessMap,clearcoatNormalMap:ye&&!!b.clearcoatNormalMap,iridescence:je,iridescenceMap:je&&!!b.iridescenceMap,iridescenceThicknessMap:je&&!!b.iridescenceThicknessMap,displacementMap:!!b.displacementMap,roughnessMap:!!b.roughnessMap,metalnessMap:!!b.metalnessMap,specularMap:!!b.specularMap,specularIntensityMap:!!b.specularIntensityMap,specularColorMap:!!b.specularColorMap,opaque:!1===b.transparent&&1===b.blending,alphaMap:!!b.alphaMap,alphaTest:b.alphaTest>0,gradientMap:!!b.gradientMap,sheen:b.sheen>0,sheenColorMap:!!b.sheenColorMap,sheenRoughnessMap:!!b.sheenRoughnessMap,transmission:b.transmission>0,transmissionMap:!!b.transmissionMap,thicknessMap:!!b.thicknessMap,combine:b.combine,vertexTangents:!!b.normalMap&&!!L.attributes.tangent,vertexColors:b.vertexColors,vertexAlphas:!0===b.vertexColors&&!!L.attributes.color&&4===L.attributes.color.itemSize,vertexUvs:!!(b.map||b.bumpMap||b.normalMap||b.specularMap||b.alphaMap||b.emissiveMap||b.roughnessMap||b.metalnessMap||b.clearcoatMap||b.clearcoatRoughnessMap||b.clearcoatNormalMap||b.iridescenceMap||b.iridescenceThicknessMap||b.displacementMap||b.transmissionMap||b.thicknessMap||b.specularIntensityMap||b.specularColorMap||b.sheenColorMap||b.sheenRoughnessMap),uvsVertexOnly:!(b.map||b.bumpMap||b.normalMap||b.specularMap||b.alphaMap||b.emissiveMap||b.roughnessMap||b.metalnessMap||b.clearcoatNormalMap||b.iridescenceMap||b.iridescenceThicknessMap||b.transmission>0||b.transmissionMap||b.thicknessMap||b.specularIntensityMap||b.specularColorMap||b.sheen>0||b.sheenColorMap||b.sheenRoughnessMap||!b.displacementMap),fog:!!P,useFog:!0===b.fog,fogExp2:P&&P.isFogExp2,flatShading:!!b.flatShading,sizeAttenuation:b.sizeAttenuation,logarithmicDepthBuffer:f,skinning:!0===U.isSkinnedMesh,morphTargets:void 0!==L.morphAttributes.position,morphNormals:void 0!==L.morphAttributes.normal,morphColors:void 0!==L.morphAttributes.color,morphTargetsCount:Y,morphTextureStride:k,numDirLights:E.directional.length,numPointLights:E.point.length,numSpotLights:E.spot.length,numSpotLightMaps:E.spotLightMap.length,numRectAreaLights:E.rectArea.length,numHemiLights:E.hemi.length,numDirLightShadows:E.directionalShadowMap.length,numPointLightShadows:E.pointShadowMap.length,numSpotLightShadows:E.spotShadowMap.length,numSpotLightShadowsWithMaps:E.numSpotLightShadowsWithMaps,numClippingPlanes:o.numPlanes,numClipIntersection:o.numIntersection,dithering:b.dithering,shadowMapEnabled:n.shadowMap.enabled&&I.length>0,shadowMapType:n.shadowMap.type,toneMapping:b.toneMapped?n.toneMapping:0,physicallyCorrectLights:n.physicallyCorrectLights,premultipliedAlpha:b.premultipliedAlpha,doubleSided:2===b.side,flipSided:1===b.side,useDepthPacking:!!b.depthPacking,depthPacking:b.depthPacking||0,index0AttributeName:b.index0AttributeName,extensionDerivatives:b.extensions&&b.extensions.derivatives,extensionFragDepth:b.extensions&&b.extensions.fragDepth,extensionDrawBuffers:b.extensions&&b.extensions.drawBuffers,extensionShaderTextureLOD:b.extensions&&b.extensions.shaderTextureLOD,rendererExtensionFragDepth:u||i.has("EXT_frag_depth"),rendererExtensionDrawBuffers:u||i.has("WEBGL_draw_buffers"),rendererExtensionShaderTextureLod:u||i.has("EXT_shader_texture_lod"),customProgramCacheKey:b.customProgramCacheKey()}},getProgramCacheKey:function g(b){const E=[];if(b.shaderID?E.push(b.shaderID):(E.push(b.customVertexShaderID),E.push(b.customFragmentShaderID)),void 0!==b.defines)for(const I in b.defines)E.push(I),E.push(b.defines[I]);return!1===b.isRawShaderMaterial&&(function v(b,E){b.push(E.precision),b.push(E.outputEncoding),b.push(E.envMapMode),b.push(E.envMapCubeUVHeight),b.push(E.combine),b.push(E.vertexUvs),b.push(E.fogExp2),b.push(E.sizeAttenuation),b.push(E.morphTargetsCount),b.push(E.morphAttributeCount),b.push(E.numDirLights),b.push(E.numPointLights),b.push(E.numSpotLights),b.push(E.numSpotLightMaps),b.push(E.numHemiLights),b.push(E.numRectAreaLights),b.push(E.numDirLightShadows),b.push(E.numPointLightShadows),b.push(E.numSpotLightShadows),b.push(E.numSpotLightShadowsWithMaps),b.push(E.shadowMapType),b.push(E.toneMapping),b.push(E.numClippingPlanes),b.push(E.numClipIntersection),b.push(E.depthPacking)}(E,b),function x(b,E){a.disableAll(),E.isWebGL2&&a.enable(0),E.supportsVertexTextures&&a.enable(1),E.instancing&&a.enable(2),E.instancingColor&&a.enable(3),E.map&&a.enable(4),E.matcap&&a.enable(5),E.envMap&&a.enable(6),E.lightMap&&a.enable(7),E.aoMap&&a.enable(8),E.emissiveMap&&a.enable(9),E.bumpMap&&a.enable(10),E.normalMap&&a.enable(11),E.objectSpaceNormalMap&&a.enable(12),E.tangentSpaceNormalMap&&a.enable(13),E.clearcoat&&a.enable(14),E.clearcoatMap&&a.enable(15),E.clearcoatRoughnessMap&&a.enable(16),E.clearcoatNormalMap&&a.enable(17),E.iridescence&&a.enable(18),E.iridescenceMap&&a.enable(19),E.iridescenceThicknessMap&&a.enable(20),E.displacementMap&&a.enable(21),E.specularMap&&a.enable(22),E.roughnessMap&&a.enable(23),E.metalnessMap&&a.enable(24),E.gradientMap&&a.enable(25),E.alphaMap&&a.enable(26),E.alphaTest&&a.enable(27),E.vertexColors&&a.enable(28),E.vertexAlphas&&a.enable(29),E.vertexUvs&&a.enable(30),E.vertexTangents&&a.enable(31),E.uvsVertexOnly&&a.enable(32),b.push(a.mask),a.disableAll(),E.fog&&a.enable(0),E.useFog&&a.enable(1),E.flatShading&&a.enable(2),E.logarithmicDepthBuffer&&a.enable(3),E.skinning&&a.enable(4),E.morphTargets&&a.enable(5),E.morphNormals&&a.enable(6),E.morphColors&&a.enable(7),E.premultipliedAlpha&&a.enable(8),E.shadowMapEnabled&&a.enable(9),E.physicallyCorrectLights&&a.enable(10),E.doubleSided&&a.enable(11),E.flipSided&&a.enable(12),E.useDepthPacking&&a.enable(13),E.dithering&&a.enable(14),E.specularIntensityMap&&a.enable(15),E.specularColorMap&&a.enable(16),E.transmission&&a.enable(17),E.transmissionMap&&a.enable(18),E.thicknessMap&&a.enable(19),E.sheen&&a.enable(20),E.sheenColorMap&&a.enable(21),E.sheenRoughnessMap&&a.enable(22),E.decodeVideoTexture&&a.enable(23),E.opaque&&a.enable(24),b.push(a.mask)}(E,b),E.push(n.outputEncoding)),E.push(b.customProgramCacheKey),E.join()},getUniforms:function y(b){const E=p[b.type];let I;return I=E?Nte.clone(Jr[E].uniforms):b.uniforms,I},acquireProgram:function _(b,E){let I;for(let z=0,U=l.length;z<U;z++){const P=l[z];if(P.cacheKey===E){I=P,++I.usedTimes;break}}return void 0===I&&(I=new fse(n,E,b,s),l.push(I)),I},releaseProgram:function M(b){if(0==--b.usedTimes){const E=l.indexOf(b);l[E]=l[l.length-1],l.pop(),b.destroy()}},releaseShaderCache:function w(b){c.remove(b)},programs:l,dispose:function D(){c.dispose()}}}function gse(){let n=new WeakMap;return{get:function e(s){let o=n.get(s);return void 0===o&&(o={},n.set(s,o)),o},remove:function t(s){n.delete(s)},update:function i(s,o,a){n.get(s)[o]=a},dispose:function r(){n=new WeakMap}}}function vse(n,e){return n.groupOrder!==e.groupOrder?n.groupOrder-e.groupOrder:n.renderOrder!==e.renderOrder?n.renderOrder-e.renderOrder:n.material.id!==e.material.id?n.material.id-e.material.id:n.z!==e.z?n.z-e.z:n.id-e.id}function $S(n,e){return n.groupOrder!==e.groupOrder?n.groupOrder-e.groupOrder:n.renderOrder!==e.renderOrder?n.renderOrder-e.renderOrder:n.z!==e.z?e.z-n.z:n.id-e.id}function qS(){const n=[];let e=0;const t=[],i=[],r=[];function o(f,h,d,p,m,g){let v=n[e];return void 0===v?(v={id:f.id,object:f,geometry:h,material:d,groupOrder:p,renderOrder:f.renderOrder,z:m,group:g},n[e]=v):(v.id=f.id,v.object=f,v.geometry=h,v.material=d,v.groupOrder=p,v.renderOrder=f.renderOrder,v.z=m,v.group=g),e++,v}return{opaque:t,transmissive:i,transparent:r,init:function s(){e=0,t.length=0,i.length=0,r.length=0},push:function a(f,h,d,p,m,g){const v=o(f,h,d,p,m,g);d.transmission>0?i.push(v):!0===d.transparent?r.push(v):t.push(v)},unshift:function c(f,h,d,p,m,g){const v=o(f,h,d,p,m,g);d.transmission>0?i.unshift(v):!0===d.transparent?r.unshift(v):t.unshift(v)},finish:function u(){for(let f=e,h=n.length;f<h;f++){const d=n[f];if(null===d.id)break;d.id=null,d.object=null,d.geometry=null,d.material=null,d.group=null}},sort:function l(f,h){t.length>1&&t.sort(f||vse),i.length>1&&i.sort(h||$S),r.length>1&&r.sort(h||$S)}}}function yse(){let n=new WeakMap;return{get:function e(i,r){const s=n.get(i);let o;return void 0===s?(o=new qS,n.set(i,[o])):r>=s.length?(o=new qS,s.push(o)):o=s[r],o},dispose:function t(){n=new WeakMap}}}function _se(){const n={};return{get:function(e){if(void 0!==n[e.id])return n[e.id];let t;switch(e.type){case"DirectionalLight":t={direction:new C,color:new ae};break;case"SpotLight":t={position:new C,direction:new C,color:new ae,distance:0,coneCos:0,penumbraCos:0,decay:0};break;case"PointLight":t={position:new C,color:new ae,distance:0,decay:0};break;case"HemisphereLight":t={direction:new C,skyColor:new ae,groundColor:new ae};break;case"RectAreaLight":t={color:new ae,position:new C,halfWidth:new C,halfHeight:new C}}return n[e.id]=t,t}}}let bse=0;function Mse(n,e){return(e.castShadow?2:0)-(n.castShadow?2:0)+(e.map?1:0)-(n.map?1:0)}function wse(n,e){const t=new _se,i=function xse(){const n={};return{get:function(e){if(void 0!==n[e.id])return n[e.id];let t;switch(e.type){case"DirectionalLight":case"SpotLight":t={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new q};break;case"PointLight":t={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new q,shadowCameraNear:1,shadowCameraFar:1e3}}return n[e.id]=t,t}}}(),r={version:0,hash:{directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,numDirectionalShadows:-1,numPointShadows:-1,numSpotShadows:-1,numSpotMaps:-1},ambient:[0,0,0],probe:[],directional:[],directionalShadow:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotLightMap:[],spotShadow:[],spotShadowMap:[],spotLightMatrix:[],rectArea:[],rectAreaLTC1:null,rectAreaLTC2:null,point:[],pointShadow:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[],numSpotLightShadowsWithMaps:0};for(let u=0;u<9;u++)r.probe.push(new C);const s=new C,o=new Ce,a=new Ce;return{setup:function c(u,f){let h=0,d=0,p=0;for(let z=0;z<9;z++)r.probe[z].set(0,0,0);let m=0,g=0,v=0,x=0,y=0,_=0,M=0,w=0,D=0,b=0;u.sort(Mse);const E=!0!==f?Math.PI:1;for(let z=0,U=u.length;z<U;z++){const P=u[z],L=P.color,F=P.intensity,H=P.distance,X=P.shadow&&P.shadow.map?P.shadow.map.texture:null;if(P.isAmbientLight)h+=L.r*F*E,d+=L.g*F*E,p+=L.b*F*E;else if(P.isLightProbe)for(let B=0;B<9;B++)r.probe[B].addScaledVector(P.sh.coefficients[B],F);else if(P.isDirectionalLight){const B=t.get(P);if(B.color.copy(P.color).multiplyScalar(P.intensity*E),P.castShadow){const te=P.shadow,Y=i.get(P);Y.shadowBias=te.bias,Y.shadowNormalBias=te.normalBias,Y.shadowRadius=te.radius,Y.shadowMapSize=te.mapSize,r.directionalShadow[m]=Y,r.directionalShadowMap[m]=X,r.directionalShadowMatrix[m]=P.shadow.matrix,_++}r.directional[m]=B,m++}else if(P.isSpotLight){const B=t.get(P);B.position.setFromMatrixPosition(P.matrixWorld),B.color.copy(L).multiplyScalar(F*E),B.distance=H,B.coneCos=Math.cos(P.angle),B.penumbraCos=Math.cos(P.angle*(1-P.penumbra)),B.decay=P.decay,r.spot[v]=B;const te=P.shadow;if(P.map&&(r.spotLightMap[D]=P.map,D++,te.updateMatrices(P),P.castShadow&&b++),r.spotLightMatrix[v]=te.matrix,P.castShadow){const Y=i.get(P);Y.shadowBias=te.bias,Y.shadowNormalBias=te.normalBias,Y.shadowRadius=te.radius,Y.shadowMapSize=te.mapSize,r.spotShadow[v]=Y,r.spotShadowMap[v]=X,w++}v++}else if(P.isRectAreaLight){const B=t.get(P);B.color.copy(L).multiplyScalar(F),B.halfWidth.set(.5*P.width,0,0),B.halfHeight.set(0,.5*P.height,0),r.rectArea[x]=B,x++}else if(P.isPointLight){const B=t.get(P);if(B.color.copy(P.color).multiplyScalar(P.intensity*E),B.distance=P.distance,B.decay=P.decay,P.castShadow){const te=P.shadow,Y=i.get(P);Y.shadowBias=te.bias,Y.shadowNormalBias=te.normalBias,Y.shadowRadius=te.radius,Y.shadowMapSize=te.mapSize,Y.shadowCameraNear=te.camera.near,Y.shadowCameraFar=te.camera.far,r.pointShadow[g]=Y,r.pointShadowMap[g]=X,r.pointShadowMatrix[g]=P.shadow.matrix,M++}r.point[g]=B,g++}else if(P.isHemisphereLight){const B=t.get(P);B.skyColor.copy(P.color).multiplyScalar(F*E),B.groundColor.copy(P.groundColor).multiplyScalar(F*E),r.hemi[y]=B,y++}}x>0&&(e.isWebGL2||!0===n.has("OES_texture_float_linear")?(r.rectAreaLTC1=fe.LTC_FLOAT_1,r.rectAreaLTC2=fe.LTC_FLOAT_2):!0===n.has("OES_texture_half_float_linear")?(r.rectAreaLTC1=fe.LTC_HALF_1,r.rectAreaLTC2=fe.LTC_HALF_2):console.error("THREE.WebGLRenderer: Unable to use RectAreaLight. Missing WebGL extensions.")),r.ambient[0]=h,r.ambient[1]=d,r.ambient[2]=p;const I=r.hash;(I.directionalLength!==m||I.pointLength!==g||I.spotLength!==v||I.rectAreaLength!==x||I.hemiLength!==y||I.numDirectionalShadows!==_||I.numPointShadows!==M||I.numSpotShadows!==w||I.numSpotMaps!==D)&&(r.directional.length=m,r.spot.length=v,r.rectArea.length=x,r.point.length=g,r.hemi.length=y,r.directionalShadow.length=_,r.directionalShadowMap.length=_,r.pointShadow.length=M,r.pointShadowMap.length=M,r.spotShadow.length=w,r.spotShadowMap.length=w,r.directionalShadowMatrix.length=_,r.pointShadowMatrix.length=M,r.spotLightMatrix.length=w+D-b,r.spotLightMap.length=D,r.numSpotLightShadowsWithMaps=b,I.directionalLength=m,I.pointLength=g,I.spotLength=v,I.rectAreaLength=x,I.hemiLength=y,I.numDirectionalShadows=_,I.numPointShadows=M,I.numSpotShadows=w,I.numSpotMaps=D,r.version=bse++)},setupView:function l(u,f){let h=0,d=0,p=0,m=0,g=0;const v=f.matrixWorldInverse;for(let x=0,y=u.length;x<y;x++){const _=u[x];if(_.isDirectionalLight){const M=r.directional[h];M.direction.setFromMatrixPosition(_.matrixWorld),s.setFromMatrixPosition(_.target.matrixWorld),M.direction.sub(s),M.direction.transformDirection(v),h++}else if(_.isSpotLight){const M=r.spot[p];M.position.setFromMatrixPosition(_.matrixWorld),M.position.applyMatrix4(v),M.direction.setFromMatrixPosition(_.matrixWorld),s.setFromMatrixPosition(_.target.matrixWorld),M.direction.sub(s),M.direction.transformDirection(v),p++}else if(_.isRectAreaLight){const M=r.rectArea[m];M.position.setFromMatrixPosition(_.matrixWorld),M.position.applyMatrix4(v),a.identity(),o.copy(_.matrixWorld),o.premultiply(v),a.extractRotation(o),M.halfWidth.set(.5*_.width,0,0),M.halfHeight.set(0,.5*_.height,0),M.halfWidth.applyMatrix4(a),M.halfHeight.applyMatrix4(a),m++}else if(_.isPointLight){const M=r.point[d];M.position.setFromMatrixPosition(_.matrixWorld),M.position.applyMatrix4(v),d++}else if(_.isHemisphereLight){const M=r.hemi[g];M.direction.setFromMatrixPosition(_.matrixWorld),M.direction.transformDirection(v),g++}}},state:r}}function ZS(n,e){const t=new wse(n,e),i=[],r=[];return{init:function s(){i.length=0,r.length=0},state:{lightsArray:i,shadowsArray:r,lights:t},setupLights:function c(f){t.setup(i,f)},setupLightsView:function l(f){t.setupView(i,f)},pushLight:function o(f){i.push(f)},pushShadow:function a(f){r.push(f)}}}function Cse(n,e){let t=new WeakMap;return{get:function i(s,o=0){const a=t.get(s);let c;return void 0===a?(c=new ZS(n,e),t.set(s,[c])):o>=a.length?(c=new ZS(n,e),a.push(c)):c=a[o],c},dispose:function r(){t=new WeakMap}}}class XS extends Bi{constructor(e){super(),this.isMeshDepthMaterial=!0,this.type="MeshDepthMaterial",this.depthPacking=3200,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.setValues(e)}copy(e){return super.copy(e),this.depthPacking=e.depthPacking,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this}}class YS extends Bi{constructor(e){super(),this.isMeshDistanceMaterial=!0,this.type="MeshDistanceMaterial",this.referencePosition=new C,this.nearDistance=1,this.farDistance=1e3,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.setValues(e)}copy(e){return super.copy(e),this.referencePosition.copy(e.referencePosition),this.nearDistance=e.nearDistance,this.farDistance=e.farDistance,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this}}function Dse(n,e,t){let i=new f7;const r=new q,s=new q,o=new ft,a=new XS({depthPacking:3201}),c=new YS,l={},u=t.maxTextureSize,f={0:1,1:0,2:2},h=new Wi({defines:{VSM_SAMPLES:8},uniforms:{shadow_pass:{value:null},resolution:{value:new q},radius:{value:4}},vertexShader:"void main() {\n\tgl_Position = vec4( position, 1.0 );\n}",fragmentShader:"uniform sampler2D shadow_pass;\nuniform vec2 resolution;\nuniform float radius;\n#include <packing>\nvoid main() {\n\tconst float samples = float( VSM_SAMPLES );\n\tfloat mean = 0.0;\n\tfloat squared_mean = 0.0;\n\tfloat uvStride = samples <= 1.0 ? 0.0 : 2.0 / ( samples - 1.0 );\n\tfloat uvStart = samples <= 1.0 ? 0.0 : - 1.0;\n\tfor ( float i = 0.0; i < samples; i ++ ) {\n\t\tfloat uvOffset = uvStart + i * uvStride;\n\t\t#ifdef HORIZONTAL_PASS\n\t\t\tvec2 distribution = unpackRGBATo2Half( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( uvOffset, 0.0 ) * radius ) / resolution ) );\n\t\t\tmean += distribution.x;\n\t\t\tsquared_mean += distribution.y * distribution.y + distribution.x * distribution.x;\n\t\t#else\n\t\t\tfloat depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( 0.0, uvOffset ) * radius ) / resolution ) );\n\t\t\tmean += depth;\n\t\t\tsquared_mean += depth * depth;\n\t\t#endif\n\t}\n\tmean = mean / samples;\n\tsquared_mean = squared_mean / samples;\n\tfloat std_dev = sqrt( squared_mean - mean * mean );\n\tgl_FragColor = pack2HalfToRGBA( vec2( mean, std_dev ) );\n}"}),d=h.clone();d.defines.HORIZONTAL_PASS=1;const p=new Ze;p.setAttribute("position",new Vt(new Float32Array([-1,-1,.5,3,-1,.5,-1,3,.5]),3));const m=new an(p,h),g=this;function v(_,M){const w=e.update(m);h.defines.VSM_SAMPLES!==_.blurSamples&&(h.defines.VSM_SAMPLES=_.blurSamples,d.defines.VSM_SAMPLES=_.blurSamples,h.needsUpdate=!0,d.needsUpdate=!0),null===_.mapPass&&(_.mapPass=new ya(r.x,r.y)),h.uniforms.shadow_pass.value=_.map.texture,h.uniforms.resolution.value=_.mapSize,h.uniforms.radius.value=_.radius,n.setRenderTarget(_.mapPass),n.clear(),n.renderBufferDirect(M,null,w,h,m,null),d.uniforms.shadow_pass.value=_.mapPass.texture,d.uniforms.resolution.value=_.mapSize,d.uniforms.radius.value=_.radius,n.setRenderTarget(_.map),n.clear(),n.renderBufferDirect(M,null,w,d,m,null)}function x(_,M,w,D,b,E){let I=null;const z=!0===w.isPointLight?_.customDistanceMaterial:_.customDepthMaterial;if(I=void 0!==z?z:!0===w.isPointLight?c:a,n.localClippingEnabled&&!0===M.clipShadows&&Array.isArray(M.clippingPlanes)&&0!==M.clippingPlanes.length||M.displacementMap&&0!==M.displacementScale||M.alphaMap&&M.alphaTest>0||M.map&&M.alphaTest>0){const U=I.uuid,P=M.uuid;let L=l[U];void 0===L&&(L={},l[U]=L);let F=L[P];void 0===F&&(F=I.clone(),L[P]=F),I=F}return I.visible=M.visible,I.wireframe=M.wireframe,I.side=3===E?null!==M.shadowSide?M.shadowSide:M.side:null!==M.shadowSide?M.shadowSide:f[M.side],I.alphaMap=M.alphaMap,I.alphaTest=M.alphaTest,I.map=M.map,I.clipShadows=M.clipShadows,I.clippingPlanes=M.clippingPlanes,I.clipIntersection=M.clipIntersection,I.displacementMap=M.displacementMap,I.displacementScale=M.displacementScale,I.displacementBias=M.displacementBias,I.wireframeLinewidth=M.wireframeLinewidth,I.linewidth=M.linewidth,!0===w.isPointLight&&!0===I.isMeshDistanceMaterial&&(I.referencePosition.setFromMatrixPosition(w.matrixWorld),I.nearDistance=D,I.farDistance=b),I}function y(_,M,w,D,b){if(!1===_.visible)return;if(_.layers.test(M.layers)&&(_.isMesh||_.isLine||_.isPoints)&&(_.castShadow||_.receiveShadow&&3===b)&&(!_.frustumCulled||i.intersectsObject(_))){_.modelViewMatrix.multiplyMatrices(w.matrixWorldInverse,_.matrixWorld);const z=e.update(_),U=_.material;if(Array.isArray(U)){const P=z.groups;for(let L=0,F=P.length;L<F;L++){const H=P[L],X=U[H.materialIndex];if(X&&X.visible){const B=x(_,X,D,w.near,w.far,b);n.renderBufferDirect(w,null,z,B,_,H)}}}else if(U.visible){const P=x(_,U,D,w.near,w.far,b);n.renderBufferDirect(w,null,z,P,_,null)}}const I=_.children;for(let z=0,U=I.length;z<U;z++)y(I[z],M,w,D,b)}this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=1,this.render=function(_,M,w){if(!1===g.enabled||!1===g.autoUpdate&&!1===g.needsUpdate||0===_.length)return;const D=n.getRenderTarget(),b=n.getActiveCubeFace(),E=n.getActiveMipmapLevel(),I=n.state;I.setBlending(0),I.buffers.color.setClear(1,1,1,1),I.buffers.depth.setTest(!0),I.setScissorTest(!1);for(let z=0,U=_.length;z<U;z++){const P=_[z],L=P.shadow;if(void 0===L){console.warn("THREE.WebGLShadowMap:",P,"has no shadow.");continue}if(!1===L.autoUpdate&&!1===L.needsUpdate)continue;r.copy(L.mapSize);const F=L.getFrameExtents();r.multiply(F),s.copy(L.mapSize),(r.x>u||r.y>u)&&(r.x>u&&(s.x=Math.floor(u/F.x),r.x=s.x*F.x,L.mapSize.x=s.x),r.y>u&&(s.y=Math.floor(u/F.y),r.y=s.y*F.y,L.mapSize.y=s.y)),null===L.map&&(L.map=new ya(r.x,r.y,3!==this.type?{minFilter:bn,magFilter:bn}:{}),L.map.texture.name=P.name+".shadowMap",L.camera.updateProjectionMatrix()),n.setRenderTarget(L.map),n.clear();const H=L.getViewportCount();for(let X=0;X<H;X++){const B=L.getViewport(X);o.set(s.x*B.x,s.y*B.y,s.x*B.z,s.y*B.w),I.viewport(o),L.updateMatrices(P,X),i=L.getFrustum(),y(M,w,L.camera,P,this.type)}!0!==L.isPointLightShadow&&3===this.type&&v(L,w),L.needsUpdate=!1}g.needsUpdate=!1,n.setRenderTarget(D,b,E)}}function Ase(n,e,t){const i=t.isWebGL2,a=new function r(){let R=!1;const $=new ft;let re=null;const we=new ft(0,0,0,0);return{setMask:function(Ie){re!==Ie&&!R&&(n.colorMask(Ie,Ie,Ie,Ie),re=Ie)},setLocked:function(Ie){R=Ie},setClear:function(Ie,It,Hn,ii,Ha){!0===Ha&&(Ie*=ii,It*=ii,Hn*=ii),$.set(Ie,It,Hn,ii),!1===we.equals($)&&(n.clearColor(Ie,It,Hn,ii),we.copy($))},reset:function(){R=!1,re=null,we.set(-1,0,0,0)}}},c=new function s(){let R=!1,$=null,re=null,we=null;return{setTest:function(Ie){Ie?Oe(2929):ye(2929)},setMask:function(Ie){$!==Ie&&!R&&(n.depthMask(Ie),$=Ie)},setFunc:function(Ie){if(re!==Ie){switch(Ie){case 0:n.depthFunc(512);break;case 1:n.depthFunc(519);break;case 2:n.depthFunc(513);break;case 3:default:n.depthFunc(515);break;case 4:n.depthFunc(514);break;case 5:n.depthFunc(518);break;case 6:n.depthFunc(516);break;case 7:n.depthFunc(517)}re=Ie}},setLocked:function(Ie){R=Ie},setClear:function(Ie){we!==Ie&&(n.clearDepth(Ie),we=Ie)},reset:function(){R=!1,$=null,re=null,we=null}}},l=new function o(){let R=!1,$=null,re=null,we=null,Ie=null,It=null,Hn=null,ii=null,Ha=null;return{setTest:function(Zt){R||(Zt?Oe(2960):ye(2960))},setMask:function(Zt){$!==Zt&&!R&&(n.stencilMask(Zt),$=Zt)},setFunc:function(Zt,Gs,dr){(re!==Zt||we!==Gs||Ie!==dr)&&(n.stencilFunc(Zt,Gs,dr),re=Zt,we=Gs,Ie=dr)},setOp:function(Zt,Gs,dr){(It!==Zt||Hn!==Gs||ii!==dr)&&(n.stencilOp(Zt,Gs,dr),It=Zt,Hn=Gs,ii=dr)},setLocked:function(Zt){R=Zt},setClear:function(Zt){Ha!==Zt&&(n.clearStencil(Zt),Ha=Zt)},reset:function(){R=!1,$=null,re=null,we=null,Ie=null,It=null,Hn=null,ii=null,Ha=null}}},u=new WeakMap,f=new WeakMap;let h={},d={},p=new WeakMap,m=[],g=null,v=!1,x=null,y=null,_=null,M=null,w=null,D=null,b=null,E=!1,I=null,z=null,U=null,P=null,L=null;const F=n.getParameter(35661);let H=!1,X=0;const B=n.getParameter(7938);-1!==B.indexOf("WebGL")?(X=parseFloat(/^WebGL (\d)/.exec(B)[1]),H=X>=1):-1!==B.indexOf("OpenGL ES")&&(X=parseFloat(/^OpenGL ES (\d)/.exec(B)[1]),H=X>=2);let te=null,Y={};const k=n.getParameter(3088),V=n.getParameter(2978),ie=(new ft).fromArray(k),ne=(new ft).fromArray(V);function se(R,$,re){const we=new Uint8Array(4),Ie=n.createTexture();n.bindTexture(R,Ie),n.texParameteri(R,10241,9728),n.texParameteri(R,10240,9728);for(let It=0;It<re;It++)n.texImage2D($+It,0,6408,1,1,0,6408,5121,we);return Ie}const W={};function Oe(R){!0!==h[R]&&(n.enable(R),h[R]=!0)}function ye(R){!1!==h[R]&&(n.disable(R),h[R]=!1)}W[3553]=se(3553,3553,1),W[34067]=se(34067,34069,6),a.setClear(0,0,0,1),c.setClear(1),l.setClear(0),Oe(2929),c.setFunc(3),me(!1),et(1),Oe(2884),ce(0);const J={100:32774,101:32778,102:32779};if(i)J[103]=32775,J[104]=32776;else{const R=e.get("EXT_blend_minmax");null!==R&&(J[103]=R.MIN_EXT,J[104]=R.MAX_EXT)}const Q={200:0,201:1,202:768,204:770,210:776,208:774,206:772,203:769,205:771,209:775,207:773};function ce(R,$,re,we,Ie,It,Hn,ii){if(0!==R){if(!1===v&&(Oe(3042),v=!0),5===R)Ie=Ie||$,It=It||re,Hn=Hn||we,($!==y||Ie!==w)&&(n.blendEquationSeparate(J[$],J[Ie]),y=$,w=Ie),(re!==_||we!==M||It!==D||Hn!==b)&&(n.blendFuncSeparate(Q[re],Q[we],Q[It],Q[Hn]),_=re,M=we,D=It,b=Hn),x=R,E=!1;else if(R!==x||ii!==E){if((100!==y||100!==w)&&(n.blendEquation(32774),y=100,w=100),ii)switch(R){case 1:n.blendFuncSeparate(1,771,1,771);break;case 2:n.blendFunc(1,1);break;case 3:n.blendFuncSeparate(0,769,0,1);break;case 4:n.blendFuncSeparate(0,768,0,770);break;default:console.error("THREE.WebGLState: Invalid blending: ",R)}else switch(R){case 1:n.blendFuncSeparate(770,771,1,771);break;case 2:n.blendFunc(770,1);break;case 3:n.blendFuncSeparate(0,769,0,1);break;case 4:n.blendFunc(0,768);break;default:console.error("THREE.WebGLState: Invalid blending: ",R)}_=null,M=null,D=null,b=null,x=R,E=ii}}else!0===v&&(ye(3042),v=!1)}function me(R){I!==R&&(n.frontFace(R?2304:2305),I=R)}function et(R){0!==R?(Oe(2884),R!==z&&n.cullFace(1===R?1029:2===R?1028:1032)):ye(2884),z=R}function Ue(R,$,re){R?(Oe(32823),(P!==$||L!==re)&&(n.polygonOffset($,re),P=$,L=re)):ye(32823)}return{buffers:{color:a,depth:c,stencil:l},enable:Oe,disable:ye,bindFramebuffer:function je(R,$){return d[R]!==$&&(n.bindFramebuffer(R,$),d[R]=$,i&&(36009===R&&(d[36160]=$),36160===R&&(d[36009]=$)),!0)},drawBuffers:function pe(R,$){let re=m,we=!1;if(R)if(re=p.get($),void 0===re&&(re=[],p.set($,re)),R.isWebGLMultipleRenderTargets){const Ie=R.texture;if(re.length!==Ie.length||36064!==re[0]){for(let It=0,Hn=Ie.length;It<Hn;It++)re[It]=36064+It;re.length=Ie.length,we=!0}}else 36064!==re[0]&&(re[0]=36064,we=!0);else 1029!==re[0]&&(re[0]=1029,we=!0);we&&(t.isWebGL2?n.drawBuffers(re):e.get("WEBGL_draw_buffers").drawBuffersWEBGL(re))},useProgram:function rt(R){return g!==R&&(n.useProgram(R),g=R,!0)},setBlending:ce,setMaterial:function De(R,$){2===R.side?ye(2884):Oe(2884);let re=1===R.side;$&&(re=!re),me(re),1===R.blending&&!1===R.transparent?ce(0):ce(R.blending,R.blendEquation,R.blendSrc,R.blendDst,R.blendEquationAlpha,R.blendSrcAlpha,R.blendDstAlpha,R.premultipliedAlpha),c.setFunc(R.depthFunc),c.setTest(R.depthTest),c.setMask(R.depthWrite),a.setMask(R.colorWrite);const we=R.stencilWrite;l.setTest(we),we&&(l.setMask(R.stencilWriteMask),l.setFunc(R.stencilFunc,R.stencilRef,R.stencilFuncMask),l.setOp(R.stencilFail,R.stencilZFail,R.stencilZPass)),Ue(R.polygonOffset,R.polygonOffsetFactor,R.polygonOffsetUnits),!0===R.alphaToCoverage?Oe(32926):ye(32926)},setFlipSided:me,setCullFace:et,setLineWidth:function Ge(R){R!==U&&(H&&n.lineWidth(R),U=R)},setPolygonOffset:Ue,setScissorTest:function jt(R){R?Oe(3089):ye(3089)},activeTexture:function Rt(R){void 0===R&&(R=33984+F-1),te!==R&&(n.activeTexture(R),te=R)},bindTexture:function T(R,$,re){void 0===re&&(re=null===te?33984+F-1:te);let we=Y[re];void 0===we&&(we={type:void 0,texture:void 0},Y[re]=we),(we.type!==R||we.texture!==$)&&(te!==re&&(n.activeTexture(re),te=re),n.bindTexture(R,$||W[R]),we.type=R,we.texture=$)},unbindTexture:function S(){const R=Y[te];void 0!==R&&void 0!==R.type&&(n.bindTexture(R.type,null),R.type=void 0,R.texture=void 0)},compressedTexImage2D:function G(){try{n.compressedTexImage2D.apply(n,arguments)}catch(R){console.error("THREE.WebGLState:",R)}},compressedTexImage3D:function oe(){try{n.compressedTexImage3D.apply(n,arguments)}catch(R){console.error("THREE.WebGLState:",R)}},texImage2D:function qe(){try{n.texImage2D.apply(n,arguments)}catch(R){console.error("THREE.WebGLState:",R)}},texImage3D:function Ae(){try{n.texImage3D.apply(n,arguments)}catch(R){console.error("THREE.WebGLState:",R)}},updateUBOMapping:function Mt(R,$){let re=f.get($);void 0===re&&(re=new WeakMap,f.set($,re));let we=re.get(R);void 0===we&&(we=n.getUniformBlockIndex($,R.name),re.set(R,we))},uniformBlockBinding:function qt(R,$){const we=f.get($).get(R);u.get(R)!==we&&(n.uniformBlockBinding($,we,R.__bindingPointIndex),u.set(R,we))},texStorage2D:function K(){try{n.texStorage2D.apply(n,arguments)}catch(R){console.error("THREE.WebGLState:",R)}},texStorage3D:function Re(){try{n.texStorage3D.apply(n,arguments)}catch(R){console.error("THREE.WebGLState:",R)}},texSubImage2D:function le(){try{n.texSubImage2D.apply(n,arguments)}catch(R){console.error("THREE.WebGLState:",R)}},texSubImage3D:function ve(){try{n.texSubImage3D.apply(n,arguments)}catch(R){console.error("THREE.WebGLState:",R)}},compressedTexSubImage2D:function Xe(){try{n.compressedTexSubImage2D.apply(n,arguments)}catch(R){console.error("THREE.WebGLState:",R)}},compressedTexSubImage3D:function _e(){try{n.compressedTexSubImage3D.apply(n,arguments)}catch(R){console.error("THREE.WebGLState:",R)}},scissor:function We(R){!1===ie.equals(R)&&(n.scissor(R.x,R.y,R.z,R.w),ie.copy(R))},viewport:function Pe(R){!1===ne.equals(R)&&(n.viewport(R.x,R.y,R.z,R.w),ne.copy(R))},reset:function Vn(){n.disable(3042),n.disable(2884),n.disable(2929),n.disable(32823),n.disable(3089),n.disable(2960),n.disable(32926),n.blendEquation(32774),n.blendFunc(1,0),n.blendFuncSeparate(1,0,1,0),n.colorMask(!0,!0,!0,!0),n.clearColor(0,0,0,0),n.depthMask(!0),n.depthFunc(513),n.clearDepth(1),n.stencilMask(4294967295),n.stencilFunc(519,0,4294967295),n.stencilOp(7680,7680,7680),n.clearStencil(0),n.cullFace(1029),n.frontFace(2305),n.polygonOffset(0,0),n.activeTexture(33984),n.bindFramebuffer(36160,null),!0===i&&(n.bindFramebuffer(36009,null),n.bindFramebuffer(36008,null)),n.useProgram(null),n.lineWidth(1),n.scissor(0,0,n.canvas.width,n.canvas.height),n.viewport(0,0,n.canvas.width,n.canvas.height),h={},te=null,Y={},d={},p=new WeakMap,m=[],g=null,v=!1,x=null,y=null,_=null,M=null,w=null,D=null,b=null,E=!1,I=null,z=null,U=null,P=null,L=null,ie.set(0,0,n.canvas.width,n.canvas.height),ne.set(0,0,n.canvas.width,n.canvas.height),a.reset(),c.reset(),l.reset()}}}function Tse(n,e,t,i,r,s,o){const a=r.isWebGL2,c=r.maxTextures,l=r.maxCubemapSize,u=r.maxTextureSize,f=r.maxSamples,h=e.has("WEBGL_multisampled_render_to_texture")?e.get("WEBGL_multisampled_render_to_texture"):null,d=!(typeof navigator>"u")&&/OculusBrowser/g.test(navigator.userAgent),p=new WeakMap;let m;const g=new WeakMap;let v=!1;try{v=typeof OffscreenCanvas<"u"&&null!==new OffscreenCanvas(1,1).getContext("2d")}catch{}function x(T,S){return v?new OffscreenCanvas(T,S):Vl("canvas")}function y(T,S,G,oe){let le=1;if((T.width>oe||T.height>oe)&&(le=oe/Math.max(T.width,T.height)),le<1||!0===S){if(typeof HTMLImageElement<"u"&&T instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&T instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&T instanceof ImageBitmap){const ve=S?o0:Math.floor,Xe=ve(le*T.width),_e=ve(le*T.height);void 0===m&&(m=x(Xe,_e));const K=G?x(Xe,_e):m;return K.width=Xe,K.height=_e,K.getContext("2d").drawImage(T,0,0,Xe,_e),console.warn("THREE.WebGLRenderer: Texture has been resized from ("+T.width+"x"+T.height+") to ("+Xe+"x"+_e+")."),K}return"data"in T&&console.warn("THREE.WebGLRenderer: Image in DataTexture is too big ("+T.width+"x"+T.height+")."),T}return T}function _(T){return k8(T.width)&&k8(T.height)}function w(T,S){return T.generateMipmaps&&S&&T.minFilter!==bn&&T.minFilter!==on}function D(T){n.generateMipmap(T)}function b(T,S,G,oe,le=!1){if(!1===a)return S;if(null!==T){if(void 0!==n[T])return n[T];console.warn("THREE.WebGLRenderer: Attempt to use non-existing WebGL internal format '"+T+"'")}let ve=S;return 6403===S&&(5126===G&&(ve=33326),5131===G&&(ve=33325),5121===G&&(ve=33321)),33319===S&&(5126===G&&(ve=33328),5131===G&&(ve=33327),5121===G&&(ve=33323)),6408===S&&(5126===G&&(ve=34836),5131===G&&(ve=34842),5121===G&&(ve=oe===bt&&!1===le?35907:32856),32819===G&&(ve=32854),32820===G&&(ve=32855)),(33325===ve||33326===ve||33327===ve||33328===ve||34842===ve||34836===ve)&&e.get("EXT_color_buffer_float"),ve}function E(T,S,G){return!0===w(T,G)||T.isFramebufferTexture&&T.minFilter!==bn&&T.minFilter!==on?Math.log2(Math.max(S.width,S.height))+1:void 0!==T.mipmaps&&T.mipmaps.length>0?T.mipmaps.length:T.isCompressedTexture&&Array.isArray(T.image)?S.mipmaps.length:1}function I(T){return T===bn||1004===T||1005===T?9728:9729}function z(T){const S=T.target;S.removeEventListener("dispose",z),function P(T){const S=i.get(T);if(void 0===S.__webglInit)return;const G=T.source,oe=g.get(G);if(oe){const le=oe[S.__cacheKey];le.usedTimes--,0===le.usedTimes&&L(T),0===Object.keys(oe).length&&g.delete(G)}i.remove(T)}(S),S.isVideoTexture&&p.delete(S)}function U(T){const S=T.target;S.removeEventListener("dispose",U),function F(T){const S=T.texture,G=i.get(T),oe=i.get(S);if(void 0!==oe.__webglTexture&&(n.deleteTexture(oe.__webglTexture),o.memory.textures--),T.depthTexture&&T.depthTexture.dispose(),T.isWebGLCubeRenderTarget)for(let le=0;le<6;le++)n.deleteFramebuffer(G.__webglFramebuffer[le]),G.__webglDepthbuffer&&n.deleteRenderbuffer(G.__webglDepthbuffer[le]);else{if(n.deleteFramebuffer(G.__webglFramebuffer),G.__webglDepthbuffer&&n.deleteRenderbuffer(G.__webglDepthbuffer),G.__webglMultisampledFramebuffer&&n.deleteFramebuffer(G.__webglMultisampledFramebuffer),G.__webglColorRenderbuffer)for(let le=0;le<G.__webglColorRenderbuffer.length;le++)G.__webglColorRenderbuffer[le]&&n.deleteRenderbuffer(G.__webglColorRenderbuffer[le]);G.__webglDepthRenderbuffer&&n.deleteRenderbuffer(G.__webglDepthRenderbuffer)}if(T.isWebGLMultipleRenderTargets)for(let le=0,ve=S.length;le<ve;le++){const Xe=i.get(S[le]);Xe.__webglTexture&&(n.deleteTexture(Xe.__webglTexture),o.memory.textures--),i.remove(S[le])}i.remove(S),i.remove(T)}(S)}function L(T){const S=i.get(T);n.deleteTexture(S.__webglTexture),delete g.get(T.source)[S.__cacheKey],o.memory.textures--}let H=0;function Y(T,S){const G=i.get(T);if(T.isVideoTexture&&function jt(T){const S=o.render.frame;p.get(T)!==S&&(p.set(T,S),T.update())}(T),!1===T.isRenderTargetTexture&&T.version>0&&G.__version!==T.version){const oe=T.image;if(null===oe)console.warn("THREE.WebGLRenderer: Texture marked for update but no image data found.");else{if(!1!==oe.complete)return void ye(G,T,S);console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete")}}t.bindTexture(3553,G.__webglTexture,33984+S)}const ne={[Ts]:10497,[Fn]:33071,1002:33648},se={[bn]:9728,1004:9984,1005:9986,[on]:9729,1007:9985,[ho]:9987};function W(T,S,G){if(G?(n.texParameteri(T,10242,ne[S.wrapS]),n.texParameteri(T,10243,ne[S.wrapT]),(32879===T||35866===T)&&n.texParameteri(T,32882,ne[S.wrapR]),n.texParameteri(T,10240,se[S.magFilter]),n.texParameteri(T,10241,se[S.minFilter])):(n.texParameteri(T,10242,33071),n.texParameteri(T,10243,33071),(32879===T||35866===T)&&n.texParameteri(T,32882,33071),(S.wrapS!==Fn||S.wrapT!==Fn)&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.wrapS and Texture.wrapT should be set to THREE.ClampToEdgeWrapping."),n.texParameteri(T,10240,I(S.magFilter)),n.texParameteri(T,10241,I(S.minFilter)),S.minFilter!==bn&&S.minFilter!==on&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.minFilter should be set to THREE.NearestFilter or THREE.LinearFilter.")),!0===e.has("EXT_texture_filter_anisotropic")){const oe=e.get("EXT_texture_filter_anisotropic");if(S.type===po&&!1===e.has("OES_texture_float_linear")||!1===a&&S.type===zl&&!1===e.has("OES_texture_half_float_linear"))return;(S.anisotropy>1||i.get(S).__currentAnisotropy)&&(n.texParameterf(T,oe.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(S.anisotropy,r.getMaxAnisotropy())),i.get(S).__currentAnisotropy=S.anisotropy)}}function Oe(T,S){let G=!1;void 0===T.__webglInit&&(T.__webglInit=!0,S.addEventListener("dispose",z));const oe=S.source;let le=g.get(oe);void 0===le&&(le={},g.set(oe,le));const ve=function te(T){const S=[];return S.push(T.wrapS),S.push(T.wrapT),S.push(T.wrapR||0),S.push(T.magFilter),S.push(T.minFilter),S.push(T.anisotropy),S.push(T.internalFormat),S.push(T.format),S.push(T.type),S.push(T.generateMipmaps),S.push(T.premultiplyAlpha),S.push(T.flipY),S.push(T.unpackAlignment),S.push(T.encoding),S.join()}(S);if(ve!==T.__cacheKey){void 0===le[ve]&&(le[ve]={texture:n.createTexture(),usedTimes:0},o.memory.textures++,G=!0),le[ve].usedTimes++;const Xe=le[T.__cacheKey];void 0!==Xe&&(le[T.__cacheKey].usedTimes--,0===Xe.usedTimes&&L(S)),T.__cacheKey=ve,T.__webglTexture=le[ve].texture}return G}function ye(T,S,G){let oe=3553;(S.isDataArrayTexture||S.isCompressedArrayTexture)&&(oe=35866),S.isData3DTexture&&(oe=32879);const le=Oe(T,S),ve=S.source;t.bindTexture(oe,T.__webglTexture,33984+G);const Xe=i.get(ve);if(ve.version!==Xe.__version||!0===le){t.activeTexture(33984+G),n.pixelStorei(37440,S.flipY),n.pixelStorei(37441,S.premultiplyAlpha),n.pixelStorei(3317,S.unpackAlignment),n.pixelStorei(37443,0);const _e=function M(T){return!a&&(T.wrapS!==Fn||T.wrapT!==Fn||T.minFilter!==bn&&T.minFilter!==on)}(S)&&!1===_(S.image);let K=y(S.image,_e,!1,u);K=Rt(S,K);const Re=_(K)||a,qe=s.convert(S.format,S.encoding);let Pe,Ae=s.convert(S.type),We=b(S.internalFormat,qe,Ae,S.encoding,S.isVideoTexture);W(oe,S,Re);const Mt=S.mipmaps,qt=a&&!0!==S.isVideoTexture,Vn=void 0===Xe.__version||!0===le,R=E(S,K,Re);if(S.isDepthTexture)We=6402,a?We=S.type===po?36012:S.type===fa?33190:S.type===Z1?35056:33189:S.type===po&&console.error("WebGLRenderer: Floating point depth texture requires WebGL2."),S.format===ha&&6402===We&&1012!==S.type&&S.type!==fa&&(console.warn("THREE.WebGLRenderer: Use UnsignedShortType or UnsignedIntType for DepthFormat DepthTexture."),S.type=fa,Ae=s.convert(S.type)),S.format===X1&&6402===We&&(We=34041,S.type!==Z1&&(console.warn("THREE.WebGLRenderer: Use UnsignedInt248Type for DepthStencilFormat DepthTexture."),S.type=Z1,Ae=s.convert(S.type))),Vn&&(qt?t.texStorage2D(3553,1,We,K.width,K.height):t.texImage2D(3553,0,We,K.width,K.height,0,qe,Ae,null));else if(S.isDataTexture)if(Mt.length>0&&Re){qt&&Vn&&t.texStorage2D(3553,R,We,Mt[0].width,Mt[0].height);for(let $=0,re=Mt.length;$<re;$++)Pe=Mt[$],qt?t.texSubImage2D(3553,$,0,0,Pe.width,Pe.height,qe,Ae,Pe.data):t.texImage2D(3553,$,We,Pe.width,Pe.height,0,qe,Ae,Pe.data);S.generateMipmaps=!1}else qt?(Vn&&t.texStorage2D(3553,R,We,K.width,K.height),t.texSubImage2D(3553,0,0,0,K.width,K.height,qe,Ae,K.data)):t.texImage2D(3553,0,We,K.width,K.height,0,qe,Ae,K.data);else if(S.isCompressedTexture)if(S.isCompressedArrayTexture){qt&&Vn&&t.texStorage3D(35866,R,We,Mt[0].width,Mt[0].height,K.depth);for(let $=0,re=Mt.length;$<re;$++)Pe=Mt[$],S.format!==ir?null!==qe?qt?t.compressedTexSubImage3D(35866,$,0,0,0,Pe.width,Pe.height,K.depth,qe,Pe.data,0,0):t.compressedTexImage3D(35866,$,We,Pe.width,Pe.height,K.depth,0,Pe.data,0,0):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):qt?t.texSubImage3D(35866,$,0,0,0,Pe.width,Pe.height,K.depth,qe,Ae,Pe.data):t.texImage3D(35866,$,We,Pe.width,Pe.height,K.depth,0,qe,Ae,Pe.data)}else{qt&&Vn&&t.texStorage2D(3553,R,We,Mt[0].width,Mt[0].height);for(let $=0,re=Mt.length;$<re;$++)Pe=Mt[$],S.format!==ir?null!==qe?qt?t.compressedTexSubImage2D(3553,$,0,0,Pe.width,Pe.height,qe,Pe.data):t.compressedTexImage2D(3553,$,We,Pe.width,Pe.height,0,Pe.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):qt?t.texSubImage2D(3553,$,0,0,Pe.width,Pe.height,qe,Ae,Pe.data):t.texImage2D(3553,$,We,Pe.width,Pe.height,0,qe,Ae,Pe.data)}else if(S.isDataArrayTexture)qt?(Vn&&t.texStorage3D(35866,R,We,K.width,K.height,K.depth),t.texSubImage3D(35866,0,0,0,0,K.width,K.height,K.depth,qe,Ae,K.data)):t.texImage3D(35866,0,We,K.width,K.height,K.depth,0,qe,Ae,K.data);else if(S.isData3DTexture)qt?(Vn&&t.texStorage3D(32879,R,We,K.width,K.height,K.depth),t.texSubImage3D(32879,0,0,0,0,K.width,K.height,K.depth,qe,Ae,K.data)):t.texImage3D(32879,0,We,K.width,K.height,K.depth,0,qe,Ae,K.data);else if(S.isFramebufferTexture){if(Vn)if(qt)t.texStorage2D(3553,R,We,K.width,K.height);else{let $=K.width,re=K.height;for(let we=0;we<R;we++)t.texImage2D(3553,we,We,$,re,0,qe,Ae,null),$>>=1,re>>=1}}else if(Mt.length>0&&Re){qt&&Vn&&t.texStorage2D(3553,R,We,Mt[0].width,Mt[0].height);for(let $=0,re=Mt.length;$<re;$++)Pe=Mt[$],qt?t.texSubImage2D(3553,$,0,0,qe,Ae,Pe):t.texImage2D(3553,$,We,qe,Ae,Pe);S.generateMipmaps=!1}else qt?(Vn&&t.texStorage2D(3553,R,We,K.width,K.height),t.texSubImage2D(3553,0,0,0,qe,Ae,K)):t.texImage2D(3553,0,We,qe,Ae,K);w(S,Re)&&D(oe),Xe.__version=ve.version,S.onUpdate&&S.onUpdate(S)}T.__version=S.version}function pe(T,S,G,oe,le){const ve=s.convert(G.format,G.encoding),Xe=s.convert(G.type),_e=b(G.internalFormat,ve,Xe,G.encoding);i.get(S).__hasExternalTextures||(32879===le||35866===le?t.texImage3D(le,0,_e,S.width,S.height,S.depth,0,ve,Xe,null):t.texImage2D(le,0,_e,S.width,S.height,0,ve,Xe,null)),t.bindFramebuffer(36160,T),Ue(S)?h.framebufferTexture2DMultisampleEXT(36160,oe,le,i.get(G).__webglTexture,0,Ge(S)):(3553===le||le>=34069&&le<=34074)&&n.framebufferTexture2D(36160,oe,le,i.get(G).__webglTexture,0),t.bindFramebuffer(36160,null)}function rt(T,S,G){if(n.bindRenderbuffer(36161,T),S.depthBuffer&&!S.stencilBuffer){let oe=33189;if(G||Ue(S)){const le=S.depthTexture;le&&le.isDepthTexture&&(le.type===po?oe=36012:le.type===fa&&(oe=33190));const ve=Ge(S);Ue(S)?h.renderbufferStorageMultisampleEXT(36161,ve,oe,S.width,S.height):n.renderbufferStorageMultisample(36161,ve,oe,S.width,S.height)}else n.renderbufferStorage(36161,oe,S.width,S.height);n.framebufferRenderbuffer(36160,36096,36161,T)}else if(S.depthBuffer&&S.stencilBuffer){const oe=Ge(S);G&&!1===Ue(S)?n.renderbufferStorageMultisample(36161,oe,35056,S.width,S.height):Ue(S)?h.renderbufferStorageMultisampleEXT(36161,oe,35056,S.width,S.height):n.renderbufferStorage(36161,34041,S.width,S.height),n.framebufferRenderbuffer(36160,33306,36161,T)}else{const oe=!0===S.isWebGLMultipleRenderTargets?S.texture:[S.texture];for(let le=0;le<oe.length;le++){const ve=oe[le],Xe=s.convert(ve.format,ve.encoding),_e=s.convert(ve.type),K=b(ve.internalFormat,Xe,_e,ve.encoding),Re=Ge(S);G&&!1===Ue(S)?n.renderbufferStorageMultisample(36161,Re,K,S.width,S.height):Ue(S)?h.renderbufferStorageMultisampleEXT(36161,Re,K,S.width,S.height):n.renderbufferStorage(36161,K,S.width,S.height)}}n.bindRenderbuffer(36161,null)}function Q(T){const S=i.get(T),G=!0===T.isWebGLCubeRenderTarget;if(T.depthTexture&&!S.__autoAllocateDepthBuffer){if(G)throw new Error("target.depthTexture not supported in Cube render targets");!function J(T,S){if(S&&S.isWebGLCubeRenderTarget)throw new Error("Depth Texture with cube render targets is not supported");if(t.bindFramebuffer(36160,T),!S.depthTexture||!S.depthTexture.isDepthTexture)throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");(!i.get(S.depthTexture).__webglTexture||S.depthTexture.image.width!==S.width||S.depthTexture.image.height!==S.height)&&(S.depthTexture.image.width=S.width,S.depthTexture.image.height=S.height,S.depthTexture.needsUpdate=!0),Y(S.depthTexture,0);const oe=i.get(S.depthTexture).__webglTexture,le=Ge(S);if(S.depthTexture.format===ha)Ue(S)?h.framebufferTexture2DMultisampleEXT(36160,36096,3553,oe,0,le):n.framebufferTexture2D(36160,36096,3553,oe,0);else{if(S.depthTexture.format!==X1)throw new Error("Unknown depthTexture format");Ue(S)?h.framebufferTexture2DMultisampleEXT(36160,33306,3553,oe,0,le):n.framebufferTexture2D(36160,33306,3553,oe,0)}}(S.__webglFramebuffer,T)}else if(G){S.__webglDepthbuffer=[];for(let oe=0;oe<6;oe++)t.bindFramebuffer(36160,S.__webglFramebuffer[oe]),S.__webglDepthbuffer[oe]=n.createRenderbuffer(),rt(S.__webglDepthbuffer[oe],T,!1)}else t.bindFramebuffer(36160,S.__webglFramebuffer),S.__webglDepthbuffer=n.createRenderbuffer(),rt(S.__webglDepthbuffer,T,!1);t.bindFramebuffer(36160,null)}function Ge(T){return Math.min(f,T.samples)}function Ue(T){const S=i.get(T);return a&&T.samples>0&&!0===e.has("WEBGL_multisampled_render_to_texture")&&!1!==S.__useRenderToTexture}function Rt(T,S){const G=T.encoding,oe=T.format,le=T.type;return!0===T.isCompressedTexture||!0===T.isVideoTexture||1035===T.format||G!==da&&(G===bt?!1===a?!0===e.has("EXT_sRGB")&&oe===ir?(T.format=1035,T.minFilter=on,T.generateMipmaps=!1):S=cS.sRGBToLinear(S):(oe!==ir||le!==ua)&&console.warn("THREE.WebGLTextures: sRGB encoded textures have to use RGBAFormat and UnsignedByteType."):console.error("THREE.WebGLTextures: Unsupported texture encoding:",G)),S}this.allocateTextureUnit=function B(){const T=H;return T>=c&&console.warn("THREE.WebGLTextures: Trying to use "+T+" texture units while this GPU supports only "+c),H+=1,T},this.resetTextureUnits=function X(){H=0},this.setTexture2D=Y,this.setTexture2DArray=function k(T,S){const G=i.get(T);T.version>0&&G.__version!==T.version?ye(G,T,S):t.bindTexture(35866,G.__webglTexture,33984+S)},this.setTexture3D=function V(T,S){const G=i.get(T);T.version>0&&G.__version!==T.version?ye(G,T,S):t.bindTexture(32879,G.__webglTexture,33984+S)},this.setTextureCube=function ie(T,S){const G=i.get(T);T.version>0&&G.__version!==T.version?function je(T,S,G){if(6!==S.image.length)return;const oe=Oe(T,S),le=S.source;t.bindTexture(34067,T.__webglTexture,33984+G);const ve=i.get(le);if(le.version!==ve.__version||!0===oe){t.activeTexture(33984+G),n.pixelStorei(37440,S.flipY),n.pixelStorei(37441,S.premultiplyAlpha),n.pixelStorei(3317,S.unpackAlignment),n.pixelStorei(37443,0);const Xe=S.isCompressedTexture||S.image[0].isCompressedTexture,_e=S.image[0]&&S.image[0].isDataTexture,K=[];for(let $=0;$<6;$++)K[$]=Xe||_e?_e?S.image[$].image:S.image[$]:y(S.image[$],!1,!0,l),K[$]=Rt(S,K[$]);const Re=K[0],qe=_(Re)||a,Ae=s.convert(S.format,S.encoding),We=s.convert(S.type),Pe=b(S.internalFormat,Ae,We,S.encoding),Mt=a&&!0!==S.isVideoTexture,qt=void 0===ve.__version||!0===oe;let R,Vn=E(S,Re,qe);if(W(34067,S,qe),Xe){Mt&&qt&&t.texStorage2D(34067,Vn,Pe,Re.width,Re.height);for(let $=0;$<6;$++){R=K[$].mipmaps;for(let re=0;re<R.length;re++){const we=R[re];S.format!==ir?null!==Ae?Mt?t.compressedTexSubImage2D(34069+$,re,0,0,we.width,we.height,Ae,we.data):t.compressedTexImage2D(34069+$,re,Pe,we.width,we.height,0,we.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):Mt?t.texSubImage2D(34069+$,re,0,0,we.width,we.height,Ae,We,we.data):t.texImage2D(34069+$,re,Pe,we.width,we.height,0,Ae,We,we.data)}}}else{R=S.mipmaps,Mt&&qt&&(R.length>0&&Vn++,t.texStorage2D(34067,Vn,Pe,K[0].width,K[0].height));for(let $=0;$<6;$++)if(_e){Mt?t.texSubImage2D(34069+$,0,0,0,K[$].width,K[$].height,Ae,We,K[$].data):t.texImage2D(34069+$,0,Pe,K[$].width,K[$].height,0,Ae,We,K[$].data);for(let re=0;re<R.length;re++){const Ie=R[re].image[$].image;Mt?t.texSubImage2D(34069+$,re+1,0,0,Ie.width,Ie.height,Ae,We,Ie.data):t.texImage2D(34069+$,re+1,Pe,Ie.width,Ie.height,0,Ae,We,Ie.data)}}else{Mt?t.texSubImage2D(34069+$,0,0,0,Ae,We,K[$]):t.texImage2D(34069+$,0,Pe,Ae,We,K[$]);for(let re=0;re<R.length;re++){const we=R[re];Mt?t.texSubImage2D(34069+$,re+1,0,0,Ae,We,we.image[$]):t.texImage2D(34069+$,re+1,Pe,Ae,We,we.image[$])}}}w(S,qe)&&D(34067),ve.__version=le.version,S.onUpdate&&S.onUpdate(S)}T.__version=S.version}(G,T,S):t.bindTexture(34067,G.__webglTexture,33984+S)},this.rebindTextures=function ce(T,S,G){const oe=i.get(T);void 0!==S&&pe(oe.__webglFramebuffer,T,T.texture,36064,3553),void 0!==G&&Q(T)},this.setupRenderTarget=function De(T){const S=T.texture,G=i.get(T),oe=i.get(S);T.addEventListener("dispose",U),!0!==T.isWebGLMultipleRenderTargets&&(void 0===oe.__webglTexture&&(oe.__webglTexture=n.createTexture()),oe.__version=S.version,o.memory.textures++);const le=!0===T.isWebGLCubeRenderTarget,ve=!0===T.isWebGLMultipleRenderTargets,Xe=_(T)||a;if(le){G.__webglFramebuffer=[];for(let _e=0;_e<6;_e++)G.__webglFramebuffer[_e]=n.createFramebuffer()}else{if(G.__webglFramebuffer=n.createFramebuffer(),ve)if(r.drawBuffers){const _e=T.texture;for(let K=0,Re=_e.length;K<Re;K++){const qe=i.get(_e[K]);void 0===qe.__webglTexture&&(qe.__webglTexture=n.createTexture(),o.memory.textures++)}}else console.warn("THREE.WebGLRenderer: WebGLMultipleRenderTargets can only be used with WebGL2 or WEBGL_draw_buffers extension.");if(a&&T.samples>0&&!1===Ue(T)){const _e=ve?S:[S];G.__webglMultisampledFramebuffer=n.createFramebuffer(),G.__webglColorRenderbuffer=[],t.bindFramebuffer(36160,G.__webglMultisampledFramebuffer);for(let K=0;K<_e.length;K++){const Re=_e[K];G.__webglColorRenderbuffer[K]=n.createRenderbuffer(),n.bindRenderbuffer(36161,G.__webglColorRenderbuffer[K]);const qe=s.convert(Re.format,Re.encoding),Ae=s.convert(Re.type),We=b(Re.internalFormat,qe,Ae,Re.encoding,!0===T.isXRRenderTarget),Pe=Ge(T);n.renderbufferStorageMultisample(36161,Pe,We,T.width,T.height),n.framebufferRenderbuffer(36160,36064+K,36161,G.__webglColorRenderbuffer[K])}n.bindRenderbuffer(36161,null),T.depthBuffer&&(G.__webglDepthRenderbuffer=n.createRenderbuffer(),rt(G.__webglDepthRenderbuffer,T,!0)),t.bindFramebuffer(36160,null)}}if(le){t.bindTexture(34067,oe.__webglTexture),W(34067,S,Xe);for(let _e=0;_e<6;_e++)pe(G.__webglFramebuffer[_e],T,S,36064,34069+_e);w(S,Xe)&&D(34067),t.unbindTexture()}else if(ve){const _e=T.texture;for(let K=0,Re=_e.length;K<Re;K++){const qe=_e[K],Ae=i.get(qe);t.bindTexture(3553,Ae.__webglTexture),W(3553,qe,Xe),pe(G.__webglFramebuffer,T,qe,36064+K,3553),w(qe,Xe)&&D(3553)}t.unbindTexture()}else{let _e=3553;(T.isWebGL3DRenderTarget||T.isWebGLArrayRenderTarget)&&(a?_e=T.isWebGL3DRenderTarget?32879:35866:console.error("THREE.WebGLTextures: THREE.Data3DTexture and THREE.DataArrayTexture only supported with WebGL2.")),t.bindTexture(_e,oe.__webglTexture),W(_e,S,Xe),pe(G.__webglFramebuffer,T,S,36064,_e),w(S,Xe)&&D(_e),t.unbindTexture()}T.depthBuffer&&Q(T)},this.updateRenderTargetMipmap=function me(T){const S=_(T)||a,G=!0===T.isWebGLMultipleRenderTargets?T.texture:[T.texture];for(let oe=0,le=G.length;oe<le;oe++){const ve=G[oe];if(w(ve,S)){const Xe=T.isWebGLCubeRenderTarget?34067:3553,_e=i.get(ve).__webglTexture;t.bindTexture(Xe,_e),D(Xe),t.unbindTexture()}}},this.updateMultisampleRenderTarget=function et(T){if(a&&T.samples>0&&!1===Ue(T)){const S=T.isWebGLMultipleRenderTargets?T.texture:[T.texture],G=T.width,oe=T.height;let le=16384;const ve=[],Xe=T.stencilBuffer?33306:36096,_e=i.get(T),K=!0===T.isWebGLMultipleRenderTargets;if(K)for(let Re=0;Re<S.length;Re++)t.bindFramebuffer(36160,_e.__webglMultisampledFramebuffer),n.framebufferRenderbuffer(36160,36064+Re,36161,null),t.bindFramebuffer(36160,_e.__webglFramebuffer),n.framebufferTexture2D(36009,36064+Re,3553,null,0);t.bindFramebuffer(36008,_e.__webglMultisampledFramebuffer),t.bindFramebuffer(36009,_e.__webglFramebuffer);for(let Re=0;Re<S.length;Re++){ve.push(36064+Re),T.depthBuffer&&ve.push(Xe);const qe=void 0!==_e.__ignoreDepthValues&&_e.__ignoreDepthValues;if(!1===qe&&(T.depthBuffer&&(le|=256),T.stencilBuffer&&(le|=1024)),K&&n.framebufferRenderbuffer(36008,36064,36161,_e.__webglColorRenderbuffer[Re]),!0===qe&&(n.invalidateFramebuffer(36008,[Xe]),n.invalidateFramebuffer(36009,[Xe])),K){const Ae=i.get(S[Re]).__webglTexture;n.framebufferTexture2D(36009,36064,3553,Ae,0)}n.blitFramebuffer(0,0,G,oe,0,0,G,oe,le,9728),d&&n.invalidateFramebuffer(36008,ve)}if(t.bindFramebuffer(36008,null),t.bindFramebuffer(36009,null),K)for(let Re=0;Re<S.length;Re++){t.bindFramebuffer(36160,_e.__webglMultisampledFramebuffer),n.framebufferRenderbuffer(36160,36064+Re,36161,_e.__webglColorRenderbuffer[Re]);const qe=i.get(S[Re]).__webglTexture;t.bindFramebuffer(36160,_e.__webglFramebuffer),n.framebufferTexture2D(36009,36064+Re,3553,qe,0)}t.bindFramebuffer(36009,_e.__webglMultisampledFramebuffer)}},this.setupDepthRenderbuffer=Q,this.setupFrameBufferTexture=pe,this.useMultisampledRTT=Ue}function Ise(n,e,t){const i=t.isWebGL2;return{convert:function r(s,o=null){let a;if(s===ua)return 5121;if(1017===s)return 32819;if(1018===s)return 32820;if(1010===s)return 5120;if(1011===s)return 5122;if(1012===s)return 5123;if(1013===s)return 5124;if(s===fa)return 5125;if(s===po)return 5126;if(s===zl)return i?5131:(a=e.get("OES_texture_half_float"),null!==a?a.HALF_FLOAT_OES:null);if(1021===s)return 6406;if(s===ir)return 6408;if(1024===s)return 6409;if(1025===s)return 6410;if(s===ha)return 6402;if(s===X1)return 34041;if(1022===s)return console.warn("THREE.WebGLRenderer: THREE.RGBFormat has been removed. Use THREE.RGBAFormat instead. https://github.com/mrdoob/three.js/pull/23228"),6408;if(1035===s)return a=e.get("EXT_sRGB"),null!==a?a.SRGB_ALPHA_EXT:null;if(1028===s)return 6403;if(1029===s)return 36244;if(1030===s)return 33319;if(1031===s)return 33320;if(1033===s)return 36249;if(33776===s||33777===s||33778===s||33779===s)if(o===bt){if(a=e.get("WEBGL_compressed_texture_s3tc_srgb"),null===a)return null;if(33776===s)return a.COMPRESSED_SRGB_S3TC_DXT1_EXT;if(33777===s)return a.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT;if(33778===s)return a.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT;if(33779===s)return a.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT}else{if(a=e.get("WEBGL_compressed_texture_s3tc"),null===a)return null;if(33776===s)return a.COMPRESSED_RGB_S3TC_DXT1_EXT;if(33777===s)return a.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(33778===s)return a.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(33779===s)return a.COMPRESSED_RGBA_S3TC_DXT5_EXT}if(35840===s||35841===s||35842===s||35843===s){if(a=e.get("WEBGL_compressed_texture_pvrtc"),null===a)return null;if(35840===s)return a.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(35841===s)return a.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(35842===s)return a.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(35843===s)return a.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}if(36196===s)return a=e.get("WEBGL_compressed_texture_etc1"),null!==a?a.COMPRESSED_RGB_ETC1_WEBGL:null;if(37492===s||37496===s){if(a=e.get("WEBGL_compressed_texture_etc"),null===a)return null;if(37492===s)return o===bt?a.COMPRESSED_SRGB8_ETC2:a.COMPRESSED_RGB8_ETC2;if(37496===s)return o===bt?a.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC:a.COMPRESSED_RGBA8_ETC2_EAC}if(37808===s||37809===s||37810===s||37811===s||37812===s||37813===s||37814===s||37815===s||37816===s||37817===s||37818===s||37819===s||37820===s||37821===s){if(a=e.get("WEBGL_compressed_texture_astc"),null===a)return null;if(37808===s)return o===bt?a.COMPRESSED_SRGB8_ALPHA8_ASTC_4x4_KHR:a.COMPRESSED_RGBA_ASTC_4x4_KHR;if(37809===s)return o===bt?a.COMPRESSED_SRGB8_ALPHA8_ASTC_5x4_KHR:a.COMPRESSED_RGBA_ASTC_5x4_KHR;if(37810===s)return o===bt?a.COMPRESSED_SRGB8_ALPHA8_ASTC_5x5_KHR:a.COMPRESSED_RGBA_ASTC_5x5_KHR;if(37811===s)return o===bt?a.COMPRESSED_SRGB8_ALPHA8_ASTC_6x5_KHR:a.COMPRESSED_RGBA_ASTC_6x5_KHR;if(37812===s)return o===bt?a.COMPRESSED_SRGB8_ALPHA8_ASTC_6x6_KHR:a.COMPRESSED_RGBA_ASTC_6x6_KHR;if(37813===s)return o===bt?a.COMPRESSED_SRGB8_ALPHA8_ASTC_8x5_KHR:a.COMPRESSED_RGBA_ASTC_8x5_KHR;if(37814===s)return o===bt?a.COMPRESSED_SRGB8_ALPHA8_ASTC_8x6_KHR:a.COMPRESSED_RGBA_ASTC_8x6_KHR;if(37815===s)return o===bt?a.COMPRESSED_SRGB8_ALPHA8_ASTC_8x8_KHR:a.COMPRESSED_RGBA_ASTC_8x8_KHR;if(37816===s)return o===bt?a.COMPRESSED_SRGB8_ALPHA8_ASTC_10x5_KHR:a.COMPRESSED_RGBA_ASTC_10x5_KHR;if(37817===s)return o===bt?a.COMPRESSED_SRGB8_ALPHA8_ASTC_10x6_KHR:a.COMPRESSED_RGBA_ASTC_10x6_KHR;if(37818===s)return o===bt?a.COMPRESSED_SRGB8_ALPHA8_ASTC_10x8_KHR:a.COMPRESSED_RGBA_ASTC_10x8_KHR;if(37819===s)return o===bt?a.COMPRESSED_SRGB8_ALPHA8_ASTC_10x10_KHR:a.COMPRESSED_RGBA_ASTC_10x10_KHR;if(37820===s)return o===bt?a.COMPRESSED_SRGB8_ALPHA8_ASTC_12x10_KHR:a.COMPRESSED_RGBA_ASTC_12x10_KHR;if(37821===s)return o===bt?a.COMPRESSED_SRGB8_ALPHA8_ASTC_12x12_KHR:a.COMPRESSED_RGBA_ASTC_12x12_KHR}if(36492===s){if(a=e.get("EXT_texture_compression_bptc"),null===a)return null;if(36492===s)return o===bt?a.COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT:a.COMPRESSED_RGBA_BPTC_UNORM_EXT}return s===Z1?i?34042:(a=e.get("WEBGL_depth_texture"),null!==a?a.UNSIGNED_INT_24_8_WEBGL:null):void 0!==n[s]?n[s]:null}}}class Lse extends Pn{constructor(e=[]){super(),this.isArrayCamera=!0,this.cameras=e}}class sr extends pn{constructor(){super(),this.isGroup=!0,this.type="Group"}}const Rse={type:"move"};class v7{constructor(){this._targetRay=null,this._grip=null,this._hand=null}getHandSpace(){return null===this._hand&&(this._hand=new sr,this._hand.matrixAutoUpdate=!1,this._hand.visible=!1,this._hand.joints={},this._hand.inputState={pinching:!1}),this._hand}getTargetRaySpace(){return null===this._targetRay&&(this._targetRay=new sr,this._targetRay.matrixAutoUpdate=!1,this._targetRay.visible=!1,this._targetRay.hasLinearVelocity=!1,this._targetRay.linearVelocity=new C,this._targetRay.hasAngularVelocity=!1,this._targetRay.angularVelocity=new C),this._targetRay}getGripSpace(){return null===this._grip&&(this._grip=new sr,this._grip.matrixAutoUpdate=!1,this._grip.visible=!1,this._grip.hasLinearVelocity=!1,this._grip.linearVelocity=new C,this._grip.hasAngularVelocity=!1,this._grip.angularVelocity=new C),this._grip}dispatchEvent(e){return null!==this._targetRay&&this._targetRay.dispatchEvent(e),null!==this._grip&&this._grip.dispatchEvent(e),null!==this._hand&&this._hand.dispatchEvent(e),this}connect(e){if(e&&e.hand){const t=this._hand;if(t)for(const i of e.hand.values())this._getHandJoint(t,i)}return this.dispatchEvent({type:"connected",data:e}),this}disconnect(e){return this.dispatchEvent({type:"disconnected",data:e}),null!==this._targetRay&&(this._targetRay.visible=!1),null!==this._grip&&(this._grip.visible=!1),null!==this._hand&&(this._hand.visible=!1),this}update(e,t,i){let r=null,s=null,o=null;const a=this._targetRay,c=this._grip,l=this._hand;if(e&&"visible-blurred"!==t.session.visibilityState){if(l&&e.hand){o=!0;for(const m of e.hand.values()){const g=t.getJointPose(m,i),v=this._getHandJoint(l,m);null!==g&&(v.matrix.fromArray(g.transform.matrix),v.matrix.decompose(v.position,v.rotation,v.scale),v.jointRadius=g.radius),v.visible=null!==g}const h=l.joints["index-finger-tip"].position.distanceTo(l.joints["thumb-tip"].position),d=.02,p=.005;l.inputState.pinching&&h>d+p?(l.inputState.pinching=!1,this.dispatchEvent({type:"pinchend",handedness:e.handedness,target:this})):!l.inputState.pinching&&h<=d-p&&(l.inputState.pinching=!0,this.dispatchEvent({type:"pinchstart",handedness:e.handedness,target:this}))}else null!==c&&e.gripSpace&&(s=t.getPose(e.gripSpace,i),null!==s&&(c.matrix.fromArray(s.transform.matrix),c.matrix.decompose(c.position,c.rotation,c.scale),s.linearVelocity?(c.hasLinearVelocity=!0,c.linearVelocity.copy(s.linearVelocity)):c.hasLinearVelocity=!1,s.angularVelocity?(c.hasAngularVelocity=!0,c.angularVelocity.copy(s.angularVelocity)):c.hasAngularVelocity=!1));null!==a&&(r=t.getPose(e.targetRaySpace,i),null===r&&null!==s&&(r=s),null!==r&&(a.matrix.fromArray(r.transform.matrix),a.matrix.decompose(a.position,a.rotation,a.scale),r.linearVelocity?(a.hasLinearVelocity=!0,a.linearVelocity.copy(r.linearVelocity)):a.hasLinearVelocity=!1,r.angularVelocity?(a.hasAngularVelocity=!0,a.angularVelocity.copy(r.angularVelocity)):a.hasAngularVelocity=!1,this.dispatchEvent(Rse)))}return null!==a&&(a.visible=null!==r),null!==c&&(c.visible=null!==s),null!==l&&(l.visible=null!==o),this}_getHandJoint(e,t){if(void 0===e.joints[t.jointName]){const i=new sr;i.matrixAutoUpdate=!1,i.visible=!1,e.joints[t.jointName]=i,e.add(i)}return e.joints[t.jointName]}}class Pse extends Hi{constructor(e,t,i,r,s,o,a,c,l,u){if((u=void 0!==u?u:ha)!==ha&&u!==X1)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");void 0===i&&u===ha&&(i=fa),void 0===i&&u===X1&&(i=Z1),super(null,r,s,o,a,c,u,i,l),this.isDepthTexture=!0,this.image={width:e,height:t},this.magFilter=void 0!==a?a:bn,this.minFilter=void 0!==c?c:bn,this.flipY=!1,this.generateMipmaps=!1}}class zse extends ma{constructor(e,t){super();const i=this;let r=null,s=1,o=null,a="local-floor",c=null,l=null,u=null,f=null,h=null,d=null;const p=t.getContextAttributes();let m=null,g=null;const v=[],x=[],y=new Set,_=new Map,M=new Pn;M.layers.enable(1),M.viewport=new ft;const w=new Pn;w.layers.enable(2),w.viewport=new ft;const D=[M,w],b=new Lse;b.layers.enable(1),b.layers.enable(2);let E=null,I=null;function z(k){const V=x.indexOf(k.inputSource);if(-1===V)return;const ie=v[V];void 0!==ie&&ie.dispatchEvent({type:k.type,data:k.inputSource})}function U(){r.removeEventListener("select",z),r.removeEventListener("selectstart",z),r.removeEventListener("selectend",z),r.removeEventListener("squeeze",z),r.removeEventListener("squeezestart",z),r.removeEventListener("squeezeend",z),r.removeEventListener("end",U),r.removeEventListener("inputsourceschange",P);for(let k=0;k<v.length;k++){const V=x[k];null!==V&&(x[k]=null,v[k].disconnect(V))}E=null,I=null,e.setRenderTarget(m),h=null,f=null,u=null,r=null,g=null,Y.stop(),i.isPresenting=!1,i.dispatchEvent({type:"sessionend"})}function P(k){for(let V=0;V<k.removed.length;V++){const ie=k.removed[V],ne=x.indexOf(ie);ne>=0&&(x[ne]=null,v[ne].disconnect(ie))}for(let V=0;V<k.added.length;V++){const ie=k.added[V];let ne=x.indexOf(ie);if(-1===ne){for(let W=0;W<v.length;W++){if(W>=x.length){x.push(ie),ne=W;break}if(null===x[W]){x[W]=ie,ne=W;break}}if(-1===ne)break}const se=v[ne];se&&se.connect(ie)}}this.cameraAutoUpdate=!0,this.enabled=!1,this.isPresenting=!1,this.getController=function(k){let V=v[k];return void 0===V&&(V=new v7,v[k]=V),V.getTargetRaySpace()},this.getControllerGrip=function(k){let V=v[k];return void 0===V&&(V=new v7,v[k]=V),V.getGripSpace()},this.getHand=function(k){let V=v[k];return void 0===V&&(V=new v7,v[k]=V),V.getHandSpace()},this.setFramebufferScaleFactor=function(k){s=k,!0===i.isPresenting&&console.warn("THREE.WebXRManager: Cannot change framebuffer scale while presenting.")},this.setReferenceSpaceType=function(k){a=k,!0===i.isPresenting&&console.warn("THREE.WebXRManager: Cannot change reference space type while presenting.")},this.getReferenceSpace=function(){return c||o},this.setReferenceSpace=function(k){c=k},this.getBaseLayer=function(){return null!==f?f:h},this.getBinding=function(){return u},this.getFrame=function(){return d},this.getSession=function(){return r},this.setSession=function(){var k=function uee(n){return function(){var e=this,t=arguments;return new Promise(function(i,r){var s=n.apply(e,t);function o(c){wC(s,i,r,o,a,"next",c)}function a(c){wC(s,i,r,o,a,"throw",c)}o(void 0)})}}(function*(V){if(r=V,null!==r){if(m=e.getRenderTarget(),r.addEventListener("select",z),r.addEventListener("selectstart",z),r.addEventListener("selectend",z),r.addEventListener("squeeze",z),r.addEventListener("squeezestart",z),r.addEventListener("squeezeend",z),r.addEventListener("end",U),r.addEventListener("inputsourceschange",P),!0!==p.xrCompatible&&(yield t.makeXRCompatible()),void 0===r.renderState.layers||!1===e.capabilities.isWebGL2)h=new XRWebGLLayer(r,t,{antialias:void 0!==r.renderState.layers||p.antialias,alpha:p.alpha,depth:p.depth,stencil:p.stencil,framebufferScaleFactor:s}),r.updateRenderState({baseLayer:h}),g=new ya(h.framebufferWidth,h.framebufferHeight,{format:ir,type:ua,encoding:e.outputEncoding,stencilBuffer:p.stencil});else{let ie=null,ne=null,se=null;p.depth&&(se=p.stencil?35056:33190,ie=p.stencil?X1:ha,ne=p.stencil?Z1:fa);const W={colorFormat:32856,depthFormat:se,scaleFactor:s};u=new XRWebGLBinding(r,t),f=u.createProjectionLayer(W),r.updateRenderState({layers:[f]}),g=new ya(f.textureWidth,f.textureHeight,{format:ir,type:ua,depthTexture:new Pse(f.textureWidth,f.textureHeight,ne,void 0,void 0,void 0,void 0,void 0,void 0,ie),stencilBuffer:p.stencil,encoding:e.outputEncoding,samples:p.antialias?4:0}),e.properties.get(g).__ignoreDepthValues=f.ignoreDepthValues}g.isXRRenderTarget=!0,this.setFoveation(1),c=null,o=yield r.requestReferenceSpace(a),Y.setContext(r),Y.start(),i.isPresenting=!0,i.dispatchEvent({type:"sessionstart"})}});return function(V){return k.apply(this,arguments)}}();const L=new C,F=new C;function X(k,V){null===V?k.matrixWorld.copy(k.matrix):k.matrixWorld.multiplyMatrices(V.matrixWorld,k.matrix),k.matrixWorldInverse.copy(k.matrixWorld).invert()}this.updateCamera=function(k){if(null===r)return;b.near=w.near=M.near=k.near,b.far=w.far=M.far=k.far,(E!==b.near||I!==b.far)&&(r.updateRenderState({depthNear:b.near,depthFar:b.far}),E=b.near,I=b.far);const V=k.parent,ie=b.cameras;X(b,V);for(let se=0;se<ie.length;se++)X(ie[se],V);b.matrixWorld.decompose(b.position,b.quaternion,b.scale),k.matrix.copy(b.matrix),k.matrix.decompose(k.position,k.quaternion,k.scale);const ne=k.children;for(let se=0,W=ne.length;se<W;se++)ne[se].updateMatrixWorld(!0);2===ie.length?function H(k,V,ie){L.setFromMatrixPosition(V.matrixWorld),F.setFromMatrixPosition(ie.matrixWorld);const ne=L.distanceTo(F),se=V.projectionMatrix.elements,W=ie.projectionMatrix.elements,Oe=se[14]/(se[10]-1),ye=se[14]/(se[10]+1),je=(se[9]+1)/se[5],pe=(se[9]-1)/se[5],rt=(se[8]-1)/se[0],J=(W[8]+1)/W[0],Q=Oe*rt,ce=Oe*J,De=ne/(-rt+J),me=De*-rt;V.matrixWorld.decompose(k.position,k.quaternion,k.scale),k.translateX(me),k.translateZ(De),k.matrixWorld.compose(k.position,k.quaternion,k.scale),k.matrixWorldInverse.copy(k.matrixWorld).invert();const et=Oe+De,Ge=ye+De;k.projectionMatrix.makePerspective(Q-me,ce+(ne-me),je*ye/Ge*et,pe*ye/Ge*et,et,Ge)}(b,M,w):b.projectionMatrix.copy(M.projectionMatrix)},this.getCamera=function(){return b},this.getFoveation=function(){return null!==f?f.fixedFoveation:null!==h?h.fixedFoveation:void 0},this.setFoveation=function(k){null!==f&&(f.fixedFoveation=k),null!==h&&void 0!==h.fixedFoveation&&(h.fixedFoveation=k)},this.getPlanes=function(){return y};let B=null;const Y=new MS;Y.setAnimationLoop(function te(k,V){if(l=V.getViewerPose(c||o),d=V,null!==l){const ie=l.views;null!==h&&(e.setRenderTargetFramebuffer(g,h.framebuffer),e.setRenderTarget(g));let ne=!1;ie.length!==b.cameras.length&&(b.cameras.length=0,ne=!0);for(let se=0;se<ie.length;se++){const W=ie[se];let Oe=null;if(null!==h)Oe=h.getViewport(W);else{const je=u.getViewSubImage(f,W);Oe=je.viewport,0===se&&(e.setRenderTargetTextures(g,je.colorTexture,f.ignoreDepthValues?void 0:je.depthStencilTexture),e.setRenderTarget(g))}let ye=D[se];void 0===ye&&(ye=new Pn,ye.layers.enable(se),ye.viewport=new ft,D[se]=ye),ye.matrix.fromArray(W.transform.matrix),ye.projectionMatrix.fromArray(W.projectionMatrix),ye.viewport.set(Oe.x,Oe.y,Oe.width,Oe.height),0===se&&b.matrix.copy(ye.matrix),!0===ne&&b.cameras.push(ye)}}for(let ie=0;ie<v.length;ie++){const ne=x[ie],se=v[ie];null!==ne&&void 0!==se&&se.update(ne,V,c||o)}if(B&&B(k,V),V.detectedPlanes){i.dispatchEvent({type:"planesdetected",data:V.detectedPlanes});let ie=null;for(const ne of y)V.detectedPlanes.has(ne)||(null===ie&&(ie=[]),ie.push(ne));if(null!==ie)for(const ne of ie)y.delete(ne),_.delete(ne),i.dispatchEvent({type:"planeremoved",data:ne});for(const ne of V.detectedPlanes)if(y.has(ne)){const se=_.get(ne);ne.lastChangedTime>se&&(_.set(ne,ne.lastChangedTime),i.dispatchEvent({type:"planechanged",data:ne}))}else y.add(ne),_.set(ne,V.lastChangedTime),i.dispatchEvent({type:"planeadded",data:ne})}d=null}),this.setAnimationLoop=function(k){B=k},this.dispose=function(){}}}function Nse(n,e){function r(m,g){m.opacity.value=g.opacity,g.color&&m.diffuse.value.copy(g.color),g.emissive&&m.emissive.value.copy(g.emissive).multiplyScalar(g.emissiveIntensity),g.map&&(m.map.value=g.map),g.alphaMap&&(m.alphaMap.value=g.alphaMap),g.bumpMap&&(m.bumpMap.value=g.bumpMap,m.bumpScale.value=g.bumpScale,1===g.side&&(m.bumpScale.value*=-1)),g.displacementMap&&(m.displacementMap.value=g.displacementMap,m.displacementScale.value=g.displacementScale,m.displacementBias.value=g.displacementBias),g.emissiveMap&&(m.emissiveMap.value=g.emissiveMap),g.normalMap&&(m.normalMap.value=g.normalMap,m.normalScale.value.copy(g.normalScale),1===g.side&&m.normalScale.value.negate()),g.specularMap&&(m.specularMap.value=g.specularMap),g.alphaTest>0&&(m.alphaTest.value=g.alphaTest);const v=e.get(g).envMap;if(v&&(m.envMap.value=v,m.flipEnvMap.value=v.isCubeTexture&&!1===v.isRenderTargetTexture?-1:1,m.reflectivity.value=g.reflectivity,m.ior.value=g.ior,m.refractionRatio.value=g.refractionRatio),g.lightMap){m.lightMap.value=g.lightMap;const _=!0!==n.physicallyCorrectLights?Math.PI:1;m.lightMapIntensity.value=g.lightMapIntensity*_}let x,y;g.aoMap&&(m.aoMap.value=g.aoMap,m.aoMapIntensity.value=g.aoMapIntensity),g.map?x=g.map:g.specularMap?x=g.specularMap:g.displacementMap?x=g.displacementMap:g.normalMap?x=g.normalMap:g.bumpMap?x=g.bumpMap:g.roughnessMap?x=g.roughnessMap:g.metalnessMap?x=g.metalnessMap:g.alphaMap?x=g.alphaMap:g.emissiveMap?x=g.emissiveMap:g.clearcoatMap?x=g.clearcoatMap:g.clearcoatNormalMap?x=g.clearcoatNormalMap:g.clearcoatRoughnessMap?x=g.clearcoatRoughnessMap:g.iridescenceMap?x=g.iridescenceMap:g.iridescenceThicknessMap?x=g.iridescenceThicknessMap:g.specularIntensityMap?x=g.specularIntensityMap:g.specularColorMap?x=g.specularColorMap:g.transmissionMap?x=g.transmissionMap:g.thicknessMap?x=g.thicknessMap:g.sheenColorMap?x=g.sheenColorMap:g.sheenRoughnessMap&&(x=g.sheenRoughnessMap),void 0!==x&&(x.isWebGLRenderTarget&&(x=x.texture),!0===x.matrixAutoUpdate&&x.updateMatrix(),m.uvTransform.value.copy(x.matrix)),g.aoMap?y=g.aoMap:g.lightMap&&(y=g.lightMap),void 0!==y&&(y.isWebGLRenderTarget&&(y=y.texture),!0===y.matrixAutoUpdate&&y.updateMatrix(),m.uv2Transform.value.copy(y.matrix))}return{refreshFogUniforms:function t(m,g){g.color.getRGB(m.fogColor.value,bS(n)),g.isFog?(m.fogNear.value=g.near,m.fogFar.value=g.far):g.isFogExp2&&(m.fogDensity.value=g.density)},refreshMaterialUniforms:function i(m,g,v,x,y){g.isMeshBasicMaterial||g.isMeshLambertMaterial?r(m,g):g.isMeshToonMaterial?(r(m,g),function u(m,g){g.gradientMap&&(m.gradientMap.value=g.gradientMap)}(m,g)):g.isMeshPhongMaterial?(r(m,g),function l(m,g){m.specular.value.copy(g.specular),m.shininess.value=Math.max(g.shininess,1e-4)}(m,g)):g.isMeshStandardMaterial?(r(m,g),function f(m,g){m.roughness.value=g.roughness,m.metalness.value=g.metalness,g.roughnessMap&&(m.roughnessMap.value=g.roughnessMap),g.metalnessMap&&(m.metalnessMap.value=g.metalnessMap),e.get(g).envMap&&(m.envMapIntensity.value=g.envMapIntensity)}(m,g),g.isMeshPhysicalMaterial&&function h(m,g,v){m.ior.value=g.ior,g.sheen>0&&(m.sheenColor.value.copy(g.sheenColor).multiplyScalar(g.sheen),m.sheenRoughness.value=g.sheenRoughness,g.sheenColorMap&&(m.sheenColorMap.value=g.sheenColorMap),g.sheenRoughnessMap&&(m.sheenRoughnessMap.value=g.sheenRoughnessMap)),g.clearcoat>0&&(m.clearcoat.value=g.clearcoat,m.clearcoatRoughness.value=g.clearcoatRoughness,g.clearcoatMap&&(m.clearcoatMap.value=g.clearcoatMap),g.clearcoatRoughnessMap&&(m.clearcoatRoughnessMap.value=g.clearcoatRoughnessMap),g.clearcoatNormalMap&&(m.clearcoatNormalScale.value.copy(g.clearcoatNormalScale),m.clearcoatNormalMap.value=g.clearcoatNormalMap,1===g.side&&m.clearcoatNormalScale.value.negate())),g.iridescence>0&&(m.iridescence.value=g.iridescence,m.iridescenceIOR.value=g.iridescenceIOR,m.iridescenceThicknessMinimum.value=g.iridescenceThicknessRange[0],m.iridescenceThicknessMaximum.value=g.iridescenceThicknessRange[1],g.iridescenceMap&&(m.iridescenceMap.value=g.iridescenceMap),g.iridescenceThicknessMap&&(m.iridescenceThicknessMap.value=g.iridescenceThicknessMap)),g.transmission>0&&(m.transmission.value=g.transmission,m.transmissionSamplerMap.value=v.texture,m.transmissionSamplerSize.value.set(v.width,v.height),g.transmissionMap&&(m.transmissionMap.value=g.transmissionMap),m.thickness.value=g.thickness,g.thicknessMap&&(m.thicknessMap.value=g.thicknessMap),m.attenuationDistance.value=g.attenuationDistance,m.attenuationColor.value.copy(g.attenuationColor)),m.specularIntensity.value=g.specularIntensity,m.specularColor.value.copy(g.specularColor),g.specularIntensityMap&&(m.specularIntensityMap.value=g.specularIntensityMap),g.specularColorMap&&(m.specularColorMap.value=g.specularColorMap)}(m,g,y)):g.isMeshMatcapMaterial?(r(m,g),function d(m,g){g.matcap&&(m.matcap.value=g.matcap)}(m,g)):g.isMeshDepthMaterial?r(m,g):g.isMeshDistanceMaterial?(r(m,g),function p(m,g){m.referencePosition.value.copy(g.referencePosition),m.nearDistance.value=g.nearDistance,m.farDistance.value=g.farDistance}(m,g)):g.isMeshNormalMaterial?r(m,g):g.isLineBasicMaterial?(function s(m,g){m.diffuse.value.copy(g.color),m.opacity.value=g.opacity}(m,g),g.isLineDashedMaterial&&function o(m,g){m.dashSize.value=g.dashSize,m.totalSize.value=g.dashSize+g.gapSize,m.scale.value=g.scale}(m,g)):g.isPointsMaterial?function a(m,g,v,x){let y;m.diffuse.value.copy(g.color),m.opacity.value=g.opacity,m.size.value=g.size*v,m.scale.value=.5*x,g.map&&(m.map.value=g.map),g.alphaMap&&(m.alphaMap.value=g.alphaMap),g.alphaTest>0&&(m.alphaTest.value=g.alphaTest),g.map?y=g.map:g.alphaMap&&(y=g.alphaMap),void 0!==y&&(!0===y.matrixAutoUpdate&&y.updateMatrix(),m.uvTransform.value.copy(y.matrix))}(m,g,v,x):g.isSpriteMaterial?function c(m,g){let v;m.diffuse.value.copy(g.color),m.opacity.value=g.opacity,m.rotation.value=g.rotation,g.map&&(m.map.value=g.map),g.alphaMap&&(m.alphaMap.value=g.alphaMap),g.alphaTest>0&&(m.alphaTest.value=g.alphaTest),g.map?v=g.map:g.alphaMap&&(v=g.alphaMap),void 0!==v&&(!0===v.matrixAutoUpdate&&v.updateMatrix(),m.uvTransform.value.copy(v.matrix))}(m,g):g.isShadowMaterial?(m.color.value.copy(g.color),m.opacity.value=g.opacity):g.isShaderMaterial&&(g.uniformsNeedUpdate=!1)}}}function Fse(n,e,t,i){let r={},s={},o=[];const a=t.isWebGL2?n.getParameter(35375):0;function d(x,y,_){const M=x.value;if(void 0===_[y])return _[y]="number"==typeof M?M:M.clone(),!0;if("number"==typeof M){if(_[y]!==M)return _[y]=M,!0}else{const w=_[y];if(!1===w.equals(M))return w.copy(M),!0}return!1}function m(x){const y=x.value,_={boundary:0,storage:0};return"number"==typeof y?(_.boundary=4,_.storage=4):y.isVector2?(_.boundary=8,_.storage=8):y.isVector3||y.isColor?(_.boundary=16,_.storage=12):y.isVector4?(_.boundary=16,_.storage=16):y.isMatrix3?(_.boundary=48,_.storage=48):y.isMatrix4?(_.boundary=64,_.storage=64):y.isTexture?console.warn("THREE.WebGLRenderer: Texture samplers can not be part of an uniforms group."):console.warn("THREE.WebGLRenderer: Unsupported uniform value type.",y),_}function g(x){const y=x.target;y.removeEventListener("dispose",g);const _=o.indexOf(y.__bindingPointIndex);o.splice(_,1),n.deleteBuffer(r[y.id]),delete r[y.id],delete s[y.id]}return{bind:function c(x,y){i.uniformBlockBinding(x,y.program)},update:function l(x,y){let _=r[x.id];void 0===_&&(function p(x){const y=x.uniforms;let _=0;let w=0;for(let D=0,b=y.length;D<b;D++){const E=y[D],I=m(E);if(E.__data=new Float32Array(I.storage/Float32Array.BYTES_PER_ELEMENT),E.__offset=_,D>0){w=_%16;const z=16-w;0!==w&&z-I.boundary<0&&(_+=16-w,E.__offset=_)}_+=I.storage}w=_%16,w>0&&(_+=16-w),x.__size=_,x.__cache={}}(x),_=function u(x){const y=function f(){for(let x=0;x<a;x++)if(-1===o.indexOf(x))return o.push(x),x;return console.error("THREE.WebGLRenderer: Maximum number of simultaneously usable uniforms groups reached."),0}();x.__bindingPointIndex=y;const _=n.createBuffer(),M=x.__size,w=x.usage;return n.bindBuffer(35345,_),n.bufferData(35345,M,w),n.bindBuffer(35345,null),n.bindBufferBase(35345,y,_),_}(x),r[x.id]=_,x.addEventListener("dispose",g)),i.updateUBOMapping(x,y.program);const w=e.render.frame;s[x.id]!==w&&(function h(x){const _=x.uniforms,M=x.__cache;n.bindBuffer(35345,r[x.id]);for(let w=0,D=_.length;w<D;w++){const b=_[w];if(!0===d(b,w,M)){const E=b.value,I=b.__offset;"number"==typeof E?(b.__data[0]=E,n.bufferSubData(35345,I,b.__data)):(b.value.isMatrix3?(b.__data[0]=b.value.elements[0],b.__data[1]=b.value.elements[1],b.__data[2]=b.value.elements[2],b.__data[3]=b.value.elements[0],b.__data[4]=b.value.elements[3],b.__data[5]=b.value.elements[4],b.__data[6]=b.value.elements[5],b.__data[7]=b.value.elements[0],b.__data[8]=b.value.elements[6],b.__data[9]=b.value.elements[7],b.__data[10]=b.value.elements[8],b.__data[11]=b.value.elements[0]):E.toArray(b.__data),n.bufferSubData(35345,I,b.__data))}}n.bindBuffer(35345,null)}(x),s[x.id]=w)},dispose:function v(){for(const x in r)n.deleteBuffer(r[x]);o=[],r={},s={}}}}function KS(n={}){this.isWebGLRenderer=!0;const e=void 0!==n.canvas?n.canvas:function Ose(){const n=Vl("canvas");return n.style.display="block",n}(),t=void 0!==n.context?n.context:null,i=void 0===n.depth||n.depth,r=void 0===n.stencil||n.stencil,s=void 0!==n.antialias&&n.antialias,o=void 0===n.premultipliedAlpha||n.premultipliedAlpha,a=void 0!==n.preserveDrawingBuffer&&n.preserveDrawingBuffer,c=void 0!==n.powerPreference?n.powerPreference:"default",l=void 0!==n.failIfMajorPerformanceCaveat&&n.failIfMajorPerformanceCaveat;let u;u=null!==t?t.getContextAttributes().alpha:void 0!==n.alpha&&n.alpha;let f=null,h=null;const d=[],p=[];this.domElement=e,this.debug={checkShaderErrors:!0},this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this.outputEncoding=da,this.physicallyCorrectLights=!1,this.toneMapping=0,this.toneMappingExposure=1;const m=this;let g=!1,v=0,x=0,y=null,_=-1,M=null;const w=new ft,D=new ft;let b=null,E=e.width,I=e.height,z=1,U=null,P=null;const L=new ft(0,0,E,I),F=new ft(0,0,E,I);let H=!1;const X=new f7;let B=!1,te=!1,Y=null;const k=new Ce,V=new q,ie=new C,ne={background:null,fog:null,environment:null,overrideMaterial:null,isScene:!0};function se(){return null===y?z:1}let ye,je,pe,rt,J,Q,ce,De,me,et,Ge,Ue,jt,Rt,T,S,G,oe,le,ve,Xe,_e,K,Re,W=t;function Oe(A,O){for(let j=0;j<A.length;j++){const Z=e.getContext(A[j],O);if(null!==Z)return Z}return null}try{const A={alpha:!0,depth:i,stencil:r,antialias:s,premultipliedAlpha:o,preserveDrawingBuffer:a,powerPreference:c,failIfMajorPerformanceCaveat:l};if("setAttribute"in e&&e.setAttribute("data-engine","three.js r147"),e.addEventListener("webglcontextlost",We,!1),e.addEventListener("webglcontextrestored",Pe,!1),e.addEventListener("webglcontextcreationerror",Mt,!1),null===W){const O=["webgl2","webgl","experimental-webgl"];if(!0===m.isWebGL1Renderer&&O.shift(),W=Oe(O,A),null===W)throw Oe(O)?new Error("Error creating WebGL context with your selected attributes."):new Error("Error creating WebGL context.")}void 0===W.getShaderPrecisionFormat&&(W.getShaderPrecisionFormat=function(){return{rangeMin:1,rangeMax:1,precision:1}})}catch(A){throw console.error("THREE.WebGLRenderer: "+A.message),A}function qe(){ye=new Yie(W),je=new Wie(W,ye,n),ye.init(je),_e=new Ise(W,ye,je),pe=new Ase(W,ye,je),rt=new Qie,J=new gse,Q=new Tse(W,ye,pe,J,je,_e,rt),ce=new $ie(m),De=new Xie(m),me=new Bte(W,je),K=new Bie(W,ye,me,je),et=new Kie(W,me,rt,K),Ge=new ire(W,et,me,rt),le=new nre(W,je,Q),S=new jie(J),Ue=new mse(m,ce,De,ye,je,K,S),jt=new Nse(m,J),Rt=new yse,T=new Cse(ye,je),oe=new Uie(m,ce,De,pe,Ge,u,o),G=new Dse(m,Ge,je),Re=new Fse(W,rt,je,pe),ve=new Gie(W,ye,rt,je),Xe=new Jie(W,ye,rt,je),rt.programs=Ue.programs,m.capabilities=je,m.extensions=ye,m.properties=J,m.renderLists=Rt,m.shadowMap=G,m.state=pe,m.info=rt}qe();const Ae=new zse(m,W);function We(A){A.preventDefault(),console.log("THREE.WebGLRenderer: Context Lost."),g=!0}function Pe(){console.log("THREE.WebGLRenderer: Context Restored."),g=!1;const A=rt.autoReset,O=G.enabled,j=G.autoUpdate,N=G.needsUpdate,Z=G.type;qe(),rt.autoReset=A,G.enabled=O,G.autoUpdate=j,G.needsUpdate=N,G.type=Z}function Mt(A){console.error("THREE.WebGLRenderer: A WebGL context could not be created. Reason: ",A.statusMessage)}function qt(A){const O=A.target;O.removeEventListener("dispose",qt),function Vn(A){(function R(A){const O=J.get(A).programs;void 0!==O&&(O.forEach(function(j){Ue.releaseProgram(j)}),A.isShaderMaterial&&Ue.releaseShaderCache(A))})(A),J.remove(A)}(O)}this.xr=Ae,this.getContext=function(){return W},this.getContextAttributes=function(){return W.getContextAttributes()},this.forceContextLoss=function(){const A=ye.get("WEBGL_lose_context");A&&A.loseContext()},this.forceContextRestore=function(){const A=ye.get("WEBGL_lose_context");A&&A.restoreContext()},this.getPixelRatio=function(){return z},this.setPixelRatio=function(A){void 0!==A&&(z=A,this.setSize(E,I,!1))},this.getSize=function(A){return A.set(E,I)},this.setSize=function(A,O,j){Ae.isPresenting?console.warn("THREE.WebGLRenderer: Can't change size while VR device is presenting."):(E=A,I=O,e.width=Math.floor(A*z),e.height=Math.floor(O*z),!1!==j&&(e.style.width=A+"px",e.style.height=O+"px"),this.setViewport(0,0,A,O))},this.getDrawingBufferSize=function(A){return A.set(E*z,I*z).floor()},this.setDrawingBufferSize=function(A,O,j){E=A,I=O,z=j,e.width=Math.floor(A*j),e.height=Math.floor(O*j),this.setViewport(0,0,A,O)},this.getCurrentViewport=function(A){return A.copy(w)},this.getViewport=function(A){return A.copy(L)},this.setViewport=function(A,O,j,N){A.isVector4?L.set(A.x,A.y,A.z,A.w):L.set(A,O,j,N),pe.viewport(w.copy(L).multiplyScalar(z).floor())},this.getScissor=function(A){return A.copy(F)},this.setScissor=function(A,O,j,N){A.isVector4?F.set(A.x,A.y,A.z,A.w):F.set(A,O,j,N),pe.scissor(D.copy(F).multiplyScalar(z).floor())},this.getScissorTest=function(){return H},this.setScissorTest=function(A){pe.setScissorTest(H=A)},this.setOpaqueSort=function(A){U=A},this.setTransparentSort=function(A){P=A},this.getClearColor=function(A){return A.copy(oe.getClearColor())},this.setClearColor=function(){oe.setClearColor.apply(oe,arguments)},this.getClearAlpha=function(){return oe.getClearAlpha()},this.setClearAlpha=function(){oe.setClearAlpha.apply(oe,arguments)},this.clear=function(A=!0,O=!0,j=!0){let N=0;A&&(N|=16384),O&&(N|=256),j&&(N|=1024),W.clear(N)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.dispose=function(){e.removeEventListener("webglcontextlost",We,!1),e.removeEventListener("webglcontextrestored",Pe,!1),e.removeEventListener("webglcontextcreationerror",Mt,!1),Rt.dispose(),T.dispose(),J.dispose(),ce.dispose(),De.dispose(),Ge.dispose(),K.dispose(),Re.dispose(),Ue.dispose(),Ae.dispose(),Ae.removeEventListener("sessionstart",we),Ae.removeEventListener("sessionend",Ie),Y&&(Y.dispose(),Y=null),It.stop()},this.renderBufferDirect=function(A,O,j,N,Z,ke){null===O&&(O=ne);const tt=Z.isMesh&&Z.matrixWorld.determinant()<0,ct=function s2e(A,O,j,N,Z){!0!==O.isScene&&(O=ne),Q.resetTextureUnits();const ke=O.fog,ct=null===y?m.outputEncoding:!0===y.isXRRenderTarget?y.texture.encoding:da,dt=(N.isMeshStandardMaterial?De:ce).get(N.envMap||(N.isMeshStandardMaterial?O.environment:null)),wt=!0===N.vertexColors&&!!j.attributes.color&&4===j.attributes.color.itemSize,gt=!!N.normalMap&&!!j.attributes.tangent,vt=!!j.morphAttributes.position,Cn=!!j.morphAttributes.normal,ji=!!j.morphAttributes.color,Ws=N.toneMapped?m.toneMapping:0,Ua=j.morphAttributes.position||j.morphAttributes.normal||j.morphAttributes.color,Sn=void 0!==Ua?Ua.length:0,yt=J.get(N),Hp=h.state.lights;!0!==B||!0!==te&&A===M||S.setState(N,A,A===M&&N.id===_);let Un=!1;N.version===yt.__version?(yt.needsLights&&yt.lightsStateVersion!==Hp.state.version||yt.outputEncoding!==ct||Z.isInstancedMesh&&!1===yt.instancing||!Z.isInstancedMesh&&!0===yt.instancing||Z.isSkinnedMesh&&!1===yt.skinning||!Z.isSkinnedMesh&&!0===yt.skinning||yt.envMap!==dt||!0===N.fog&&yt.fog!==ke||void 0!==yt.numClippingPlanes&&(yt.numClippingPlanes!==S.numPlanes||yt.numIntersection!==S.numIntersection)||yt.vertexAlphas!==wt||yt.vertexTangents!==gt||yt.morphTargets!==vt||yt.morphNormals!==Cn||yt.morphColors!==ji||yt.toneMapping!==Ws||!0===je.isWebGL2&&yt.morphTargetsCount!==Sn)&&(Un=!0):(Un=!0,yt.__version=N.version);let Ba=yt.currentProgram;!0===Un&&(Ba=dr(N,O,Z));let vA=!1,T3=!1,Up=!1;const _i=Ba.getUniforms(),Ga=yt.uniforms;if(pe.useProgram(Ba.program)&&(vA=!0,T3=!0,Up=!0),N.id!==_&&(_=N.id,T3=!0),vA||M!==A){if(_i.setValue(W,"projectionMatrix",A.projectionMatrix),je.logarithmicDepthBuffer&&_i.setValue(W,"logDepthBufFC",2/(Math.log(A.far+1)/Math.LN2)),M!==A&&(M=A,T3=!0,Up=!0),N.isShaderMaterial||N.isMeshPhongMaterial||N.isMeshToonMaterial||N.isMeshStandardMaterial||N.envMap){const $i=_i.map.cameraPosition;void 0!==$i&&$i.setValue(W,ie.setFromMatrixPosition(A.matrixWorld))}(N.isMeshPhongMaterial||N.isMeshToonMaterial||N.isMeshLambertMaterial||N.isMeshBasicMaterial||N.isMeshStandardMaterial||N.isShaderMaterial)&&_i.setValue(W,"isOrthographic",!0===A.isOrthographicCamera),(N.isMeshPhongMaterial||N.isMeshToonMaterial||N.isMeshLambertMaterial||N.isMeshBasicMaterial||N.isMeshStandardMaterial||N.isShaderMaterial||N.isShadowMaterial||Z.isSkinnedMesh)&&_i.setValue(W,"viewMatrix",A.matrixWorldInverse)}if(Z.isSkinnedMesh){_i.setOptional(W,Z,"bindMatrix"),_i.setOptional(W,Z,"bindMatrixInverse");const $i=Z.skeleton;$i&&(je.floatVertexTextures?(null===$i.boneTexture&&$i.computeBoneTexture(),_i.setValue(W,"boneTexture",$i.boneTexture,Q),_i.setValue(W,"boneTextureSize",$i.boneTextureSize)):console.warn("THREE.WebGLRenderer: SkinnedMesh can only be used with WebGL 2. With WebGL 1 OES_texture_float and vertex textures support is required."))}const Bp=j.morphAttributes;if((void 0!==Bp.position||void 0!==Bp.normal||void 0!==Bp.color&&!0===je.isWebGL2)&&le.update(Z,j,N,Ba),(T3||yt.receiveShadow!==Z.receiveShadow)&&(yt.receiveShadow=Z.receiveShadow,_i.setValue(W,"receiveShadow",Z.receiveShadow)),N.isMeshGouraudMaterial&&null!==N.envMap&&(Ga.envMap.value=dt,Ga.flipEnvMap.value=dt.isCubeTexture&&!1===dt.isRenderTargetTexture?-1:1),T3&&(_i.setValue(W,"toneMappingExposure",m.toneMappingExposure),yt.needsLights&&function o2e(A,O){A.ambientLightColor.needsUpdate=O,A.lightProbe.needsUpdate=O,A.directionalLights.needsUpdate=O,A.directionalLightShadows.needsUpdate=O,A.pointLights.needsUpdate=O,A.pointLightShadows.needsUpdate=O,A.spotLights.needsUpdate=O,A.spotLightShadows.needsUpdate=O,A.rectAreaLights.needsUpdate=O,A.hemisphereLights.needsUpdate=O}(Ga,Up),ke&&!0===N.fog&&jt.refreshFogUniforms(Ga,ke),jt.refreshMaterialUniforms(Ga,N,z,I,Y),L0.upload(W,yt.uniformsList,Ga,Q)),N.isShaderMaterial&&!0===N.uniformsNeedUpdate&&(L0.upload(W,yt.uniformsList,Ga,Q),N.uniformsNeedUpdate=!1),N.isSpriteMaterial&&_i.setValue(W,"center",Z.center),_i.setValue(W,"modelViewMatrix",Z.modelViewMatrix),_i.setValue(W,"normalMatrix",Z.normalMatrix),_i.setValue(W,"modelMatrix",Z.matrixWorld),N.isShaderMaterial||N.isRawShaderMaterial){const $i=N.uniformsGroups;for(let Gp=0,c2e=$i.length;Gp<c2e;Gp++)if(je.isWebGL2){const yA=$i[Gp];Re.update(yA,Ba),Re.bind(yA,Ba)}else console.warn("THREE.WebGLRenderer: Uniform Buffer Objects can only be used with WebGL 2.")}return Ba}(A,O,j,N,Z);pe.setMaterial(N,tt);let dt=j.index,wt=1;!0===N.wireframe&&(dt=et.getWireframeAttribute(j),wt=2);const gt=j.drawRange,vt=j.attributes.position;let Cn=gt.start*wt,ji=(gt.start+gt.count)*wt;null!==ke&&(Cn=Math.max(Cn,ke.start*wt),ji=Math.min(ji,(ke.start+ke.count)*wt)),null!==dt?(Cn=Math.max(Cn,0),ji=Math.min(ji,dt.count)):null!=vt&&(Cn=Math.max(Cn,0),ji=Math.min(ji,vt.count));const Ws=ji-Cn;if(Ws<0||Ws===1/0)return;K.setup(Z,N,ct,j,dt);let Ua,Sn=ve;if(null!==dt&&(Ua=me.get(dt),Sn=Xe,Sn.setIndex(Ua)),Z.isMesh)!0===N.wireframe?(pe.setLineWidth(N.wireframeLinewidth*se()),Sn.setMode(1)):Sn.setMode(4);else if(Z.isLine){let yt=N.linewidth;void 0===yt&&(yt=1),pe.setLineWidth(yt*se()),Sn.setMode(Z.isLineSegments?1:Z.isLineLoop?2:3)}else Z.isPoints?Sn.setMode(0):Z.isSprite&&Sn.setMode(4);if(Z.isInstancedMesh)Sn.renderInstances(Cn,Ws,Z.count);else if(j.isInstancedBufferGeometry){const Hp=Math.min(j.instanceCount,void 0!==j._maxInstanceCount?j._maxInstanceCount:1/0);Sn.renderInstances(Cn,Ws,Hp)}else Sn.render(Cn,Ws)},this.compile=function(A,O){function j(N,Z,ke){!0===N.transparent&&2===N.side?(N.side=1,N.needsUpdate=!0,dr(N,Z,ke),N.side=0,N.needsUpdate=!0,dr(N,Z,ke),N.side=2):dr(N,Z,ke)}h=T.get(A),h.init(),p.push(h),A.traverseVisible(function(N){N.isLight&&N.layers.test(O.layers)&&(h.pushLight(N),N.castShadow&&h.pushShadow(N))}),h.setupLights(m.physicallyCorrectLights),A.traverse(function(N){const Z=N.material;if(Z)if(Array.isArray(Z))for(let ke=0;ke<Z.length;ke++)j(Z[ke],A,N);else j(Z,A,N)}),p.pop(),h=null};let $=null;function we(){It.stop()}function Ie(){It.start()}const It=new MS;function Hn(A,O,j,N){if(!1===A.visible)return;if(A.layers.test(O.layers))if(A.isGroup)j=A.renderOrder;else if(A.isLOD)!0===A.autoUpdate&&A.update(O);else if(A.isLight)h.pushLight(A),A.castShadow&&h.pushShadow(A);else if(A.isSprite){if(!A.frustumCulled||X.intersectsSprite(A)){N&&ie.setFromMatrixPosition(A.matrixWorld).applyMatrix4(k);const tt=Ge.update(A),ct=A.material;ct.visible&&f.push(A,tt,ct,j,ie.z,null)}}else if((A.isMesh||A.isLine||A.isPoints)&&(A.isSkinnedMesh&&A.skeleton.frame!==rt.render.frame&&(A.skeleton.update(),A.skeleton.frame=rt.render.frame),!A.frustumCulled||X.intersectsObject(A))){N&&ie.setFromMatrixPosition(A.matrixWorld).applyMatrix4(k);const tt=Ge.update(A),ct=A.material;if(Array.isArray(ct)){const dt=tt.groups;for(let wt=0,gt=dt.length;wt<gt;wt++){const vt=dt[wt],Cn=ct[vt.materialIndex];Cn&&Cn.visible&&f.push(A,tt,Cn,j,ie.z,vt)}}else ct.visible&&f.push(A,tt,ct,j,ie.z,null)}const ke=A.children;for(let tt=0,ct=ke.length;tt<ct;tt++)Hn(ke[tt],O,j,N)}function ii(A,O,j,N){const Z=A.opaque,ke=A.transmissive,tt=A.transparent;h.setupLightsView(j),ke.length>0&&function Ha(A,O,j){const N=je.isWebGL2;null===Y&&(Y=new ya(1,1,{generateMipmaps:!0,type:ye.has("EXT_color_buffer_half_float")?zl:ua,minFilter:ho,samples:N&&!0===s?4:0})),m.getDrawingBufferSize(V),N?Y.setSize(V.x,V.y):Y.setSize(o0(V.x),o0(V.y));const Z=m.getRenderTarget();m.setRenderTarget(Y),m.clear();const ke=m.toneMapping;m.toneMapping=0,Zt(A,O,j),m.toneMapping=ke,Q.updateMultisampleRenderTarget(Y),Q.updateRenderTargetMipmap(Y),m.setRenderTarget(Z)}(Z,O,j),N&&pe.viewport(w.copy(N)),Z.length>0&&Zt(Z,O,j),ke.length>0&&Zt(ke,O,j),tt.length>0&&Zt(tt,O,j),pe.buffers.depth.setTest(!0),pe.buffers.depth.setMask(!0),pe.buffers.color.setMask(!0),pe.setPolygonOffset(!1)}function Zt(A,O,j){const N=!0===O.isScene?O.overrideMaterial:null;for(let Z=0,ke=A.length;Z<ke;Z++){const tt=A[Z],ct=tt.object,dt=tt.geometry,wt=null===N?tt.material:N,gt=tt.group;ct.layers.test(j.layers)&&Gs(ct,O,j,dt,wt,gt)}}function Gs(A,O,j,N,Z,ke){A.onBeforeRender(m,O,j,N,Z,ke),A.modelViewMatrix.multiplyMatrices(j.matrixWorldInverse,A.matrixWorld),A.normalMatrix.getNormalMatrix(A.modelViewMatrix),Z.onBeforeRender(m,O,j,N,A,ke),!0===Z.transparent&&2===Z.side?(Z.side=1,Z.needsUpdate=!0,m.renderBufferDirect(j,O,N,Z,A,ke),Z.side=0,Z.needsUpdate=!0,m.renderBufferDirect(j,O,N,Z,A,ke),Z.side=2):m.renderBufferDirect(j,O,N,Z,A,ke),A.onAfterRender(m,O,j,N,Z,ke)}function dr(A,O,j){!0!==O.isScene&&(O=ne);const N=J.get(A),Z=h.state.lights,tt=Z.state.version,ct=Ue.getParameters(A,Z.state,h.state.shadowsArray,O,j),dt=Ue.getProgramCacheKey(ct);let wt=N.programs;N.environment=A.isMeshStandardMaterial?O.environment:null,N.fog=O.fog,N.envMap=(A.isMeshStandardMaterial?De:ce).get(A.envMap||N.environment),void 0===wt&&(A.addEventListener("dispose",qt),wt=new Map,N.programs=wt);let gt=wt.get(dt);if(void 0!==gt){if(N.currentProgram===gt&&N.lightsStateVersion===tt)return gA(A,ct),gt}else ct.uniforms=Ue.getUniforms(A),A.onBuild(j,ct,m),A.onBeforeCompile(ct,m),gt=Ue.acquireProgram(ct,dt),wt.set(dt,gt),N.uniforms=ct.uniforms;const vt=N.uniforms;(!A.isShaderMaterial&&!A.isRawShaderMaterial||!0===A.clipping)&&(vt.clippingPlanes=S.uniform),gA(A,ct),N.needsLights=function a2e(A){return A.isMeshLambertMaterial||A.isMeshToonMaterial||A.isMeshPhongMaterial||A.isMeshStandardMaterial||A.isShadowMaterial||A.isShaderMaterial&&!0===A.lights}(A),N.lightsStateVersion=tt,N.needsLights&&(vt.ambientLightColor.value=Z.state.ambient,vt.lightProbe.value=Z.state.probe,vt.directionalLights.value=Z.state.directional,vt.directionalLightShadows.value=Z.state.directionalShadow,vt.spotLights.value=Z.state.spot,vt.spotLightShadows.value=Z.state.spotShadow,vt.rectAreaLights.value=Z.state.rectArea,vt.ltc_1.value=Z.state.rectAreaLTC1,vt.ltc_2.value=Z.state.rectAreaLTC2,vt.pointLights.value=Z.state.point,vt.pointLightShadows.value=Z.state.pointShadow,vt.hemisphereLights.value=Z.state.hemi,vt.directionalShadowMap.value=Z.state.directionalShadowMap,vt.directionalShadowMatrix.value=Z.state.directionalShadowMatrix,vt.spotShadowMap.value=Z.state.spotShadowMap,vt.spotLightMatrix.value=Z.state.spotLightMatrix,vt.spotLightMap.value=Z.state.spotLightMap,vt.pointShadowMap.value=Z.state.pointShadowMap,vt.pointShadowMatrix.value=Z.state.pointShadowMatrix);const Cn=gt.getUniforms(),ji=L0.seqWithValue(Cn.seq,vt);return N.currentProgram=gt,N.uniformsList=ji,gt}function gA(A,O){const j=J.get(A);j.outputEncoding=O.outputEncoding,j.instancing=O.instancing,j.skinning=O.skinning,j.morphTargets=O.morphTargets,j.morphNormals=O.morphNormals,j.morphColors=O.morphColors,j.morphTargetsCount=O.morphTargetsCount,j.numClippingPlanes=O.numClippingPlanes,j.numIntersection=O.numClipIntersection,j.vertexAlphas=O.vertexAlphas,j.vertexTangents=O.vertexTangents,j.toneMapping=O.toneMapping}It.setAnimationLoop(function re(A){$&&$(A)}),typeof self<"u"&&It.setContext(self),this.setAnimationLoop=function(A){$=A,Ae.setAnimationLoop(A),null===A?It.stop():It.start()},Ae.addEventListener("sessionstart",we),Ae.addEventListener("sessionend",Ie),this.render=function(A,O){if(void 0===O||!0===O.isCamera){if(!0!==g){if(!0===A.matrixWorldAutoUpdate&&A.updateMatrixWorld(),null===O.parent&&!0===O.matrixWorldAutoUpdate&&O.updateMatrixWorld(),!0===Ae.enabled&&!0===Ae.isPresenting&&(!0===Ae.cameraAutoUpdate&&Ae.updateCamera(O),O=Ae.getCamera()),!0===A.isScene&&A.onBeforeRender(m,A,O,y),h=T.get(A,p.length),h.init(),p.push(h),k.multiplyMatrices(O.projectionMatrix,O.matrixWorldInverse),X.setFromProjectionMatrix(k),te=this.localClippingEnabled,B=S.init(this.clippingPlanes,te,O),f=Rt.get(A,d.length),f.init(),d.push(f),Hn(A,O,0,m.sortObjects),f.finish(),!0===m.sortObjects&&f.sort(U,P),!0===B&&S.beginShadows(),G.render(h.state.shadowsArray,A,O),!0===B&&S.endShadows(),!0===this.info.autoReset&&this.info.reset(),oe.render(f,A),h.setupLights(m.physicallyCorrectLights),O.isArrayCamera){const N=O.cameras;for(let Z=0,ke=N.length;Z<ke;Z++){const tt=N[Z];ii(f,A,tt,tt.viewport)}}else ii(f,A,O);null!==y&&(Q.updateMultisampleRenderTarget(y),Q.updateRenderTargetMipmap(y)),!0===A.isScene&&A.onAfterRender(m,A,O),K.resetDefaultState(),_=-1,M=null,p.pop(),h=p.length>0?p[p.length-1]:null,d.pop(),f=d.length>0?d[d.length-1]:null}}else console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.")},this.getActiveCubeFace=function(){return v},this.getActiveMipmapLevel=function(){return x},this.getRenderTarget=function(){return y},this.setRenderTargetTextures=function(A,O,j){J.get(A.texture).__webglTexture=O,J.get(A.depthTexture).__webglTexture=j;const N=J.get(A);N.__hasExternalTextures=!0,N.__hasExternalTextures&&(N.__autoAllocateDepthBuffer=void 0===j,N.__autoAllocateDepthBuffer||!0===ye.has("WEBGL_multisampled_render_to_texture")&&(console.warn("THREE.WebGLRenderer: Render-to-texture extension was disabled because an external texture was provided"),N.__useRenderToTexture=!1))},this.setRenderTargetFramebuffer=function(A,O){const j=J.get(A);j.__webglFramebuffer=O,j.__useDefaultFramebuffer=void 0===O},this.setRenderTarget=function(A,O=0,j=0){y=A,v=O,x=j;let N=!0,Z=null,ke=!1,tt=!1;if(A){const dt=J.get(A);void 0!==dt.__useDefaultFramebuffer?(pe.bindFramebuffer(36160,null),N=!1):void 0===dt.__webglFramebuffer?Q.setupRenderTarget(A):dt.__hasExternalTextures&&Q.rebindTextures(A,J.get(A.texture).__webglTexture,J.get(A.depthTexture).__webglTexture);const wt=A.texture;(wt.isData3DTexture||wt.isDataArrayTexture||wt.isCompressedArrayTexture)&&(tt=!0);const gt=J.get(A).__webglFramebuffer;A.isWebGLCubeRenderTarget?(Z=gt[O],ke=!0):Z=je.isWebGL2&&A.samples>0&&!1===Q.useMultisampledRTT(A)?J.get(A).__webglMultisampledFramebuffer:gt,w.copy(A.viewport),D.copy(A.scissor),b=A.scissorTest}else w.copy(L).multiplyScalar(z).floor(),D.copy(F).multiplyScalar(z).floor(),b=H;if(pe.bindFramebuffer(36160,Z)&&je.drawBuffers&&N&&pe.drawBuffers(A,Z),pe.viewport(w),pe.scissor(D),pe.setScissorTest(b),ke){const dt=J.get(A.texture);W.framebufferTexture2D(36160,36064,34069+O,dt.__webglTexture,j)}else if(tt){const dt=J.get(A.texture);W.framebufferTextureLayer(36160,36064,dt.__webglTexture,j||0,O||0)}_=-1},this.readRenderTargetPixels=function(A,O,j,N,Z,ke,tt){if(!A||!A.isWebGLRenderTarget)return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");let ct=J.get(A).__webglFramebuffer;if(A.isWebGLCubeRenderTarget&&void 0!==tt&&(ct=ct[tt]),ct){pe.bindFramebuffer(36160,ct);try{const dt=A.texture,wt=dt.format,gt=dt.type;if(wt!==ir&&_e.convert(wt)!==W.getParameter(35739))return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");const vt=gt===zl&&(ye.has("EXT_color_buffer_half_float")||je.isWebGL2&&ye.has("EXT_color_buffer_float"));if(!(gt===ua||_e.convert(gt)===W.getParameter(35738)||gt===po&&(je.isWebGL2||ye.has("OES_texture_float")||ye.has("WEBGL_color_buffer_float"))||vt))return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");O>=0&&O<=A.width-N&&j>=0&&j<=A.height-Z&&W.readPixels(O,j,N,Z,_e.convert(wt),_e.convert(gt),ke)}finally{const dt=null!==y?J.get(y).__webglFramebuffer:null;pe.bindFramebuffer(36160,dt)}}},this.copyFramebufferToTexture=function(A,O,j=0){const N=Math.pow(2,-j),Z=Math.floor(O.image.width*N),ke=Math.floor(O.image.height*N);Q.setTexture2D(O,0),W.copyTexSubImage2D(3553,j,0,0,A.x,A.y,Z,ke),pe.unbindTexture()},this.copyTextureToTexture=function(A,O,j,N=0){const Z=O.image.width,ke=O.image.height,tt=_e.convert(j.format),ct=_e.convert(j.type);Q.setTexture2D(j,0),W.pixelStorei(37440,j.flipY),W.pixelStorei(37441,j.premultiplyAlpha),W.pixelStorei(3317,j.unpackAlignment),O.isDataTexture?W.texSubImage2D(3553,N,A.x,A.y,Z,ke,tt,ct,O.image.data):O.isCompressedTexture?W.compressedTexSubImage2D(3553,N,A.x,A.y,O.mipmaps[0].width,O.mipmaps[0].height,tt,O.mipmaps[0].data):W.texSubImage2D(3553,N,A.x,A.y,tt,ct,O.image),0===N&&j.generateMipmaps&&W.generateMipmap(3553),pe.unbindTexture()},this.copyTextureToTexture3D=function(A,O,j,N,Z=0){if(m.isWebGL1Renderer)return void console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: can only be used with WebGL2.");const ke=A.max.x-A.min.x+1,tt=A.max.y-A.min.y+1,ct=A.max.z-A.min.z+1,dt=_e.convert(N.format),wt=_e.convert(N.type);let gt;if(N.isData3DTexture)Q.setTexture3D(N,0),gt=32879;else{if(!N.isDataArrayTexture)return void console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: only supports THREE.DataTexture3D and THREE.DataTexture2DArray.");Q.setTexture2DArray(N,0),gt=35866}W.pixelStorei(37440,N.flipY),W.pixelStorei(37441,N.premultiplyAlpha),W.pixelStorei(3317,N.unpackAlignment);const vt=W.getParameter(3314),Cn=W.getParameter(32878),ji=W.getParameter(3316),Ws=W.getParameter(3315),Ua=W.getParameter(32877),Sn=j.isCompressedTexture?j.mipmaps[0]:j.image;W.pixelStorei(3314,Sn.width),W.pixelStorei(32878,Sn.height),W.pixelStorei(3316,A.min.x),W.pixelStorei(3315,A.min.y),W.pixelStorei(32877,A.min.z),j.isDataTexture||j.isData3DTexture?W.texSubImage3D(gt,Z,O.x,O.y,O.z,ke,tt,ct,dt,wt,Sn.data):j.isCompressedArrayTexture?(console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: untested support for compressed srcTexture."),W.compressedTexSubImage3D(gt,Z,O.x,O.y,O.z,ke,tt,ct,dt,Sn.data)):W.texSubImage3D(gt,Z,O.x,O.y,O.z,ke,tt,ct,dt,wt,Sn),W.pixelStorei(3314,vt),W.pixelStorei(32878,Cn),W.pixelStorei(3316,ji),W.pixelStorei(3315,Ws),W.pixelStorei(32877,Ua),0===Z&&N.generateMipmaps&&W.generateMipmap(gt),pe.unbindTexture()},this.initTexture=function(A){A.isCubeTexture?Q.setTextureCube(A,0):A.isData3DTexture?Q.setTexture3D(A,0):A.isDataArrayTexture||A.isCompressedArrayTexture?Q.setTexture2DArray(A,0):Q.setTexture2D(A,0),pe.unbindTexture()},this.resetState=function(){v=0,x=0,y=null,pe.reset(),K.reset()},typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}(class kse extends KS{}).prototype.isWebGL1Renderer=!0;class R0{constructor(e,t=25e-5){this.isFogExp2=!0,this.name="",this.color=new ae(e),this.density=t}clone(){return new R0(this.color,this.density)}toJSON(){return{type:"FogExp2",color:this.color.getHex(),density:this.density}}}class $l{constructor(e,t=1,i=1e3){this.isFog=!0,this.name="",this.color=new ae(e),this.near=t,this.far=i}clone(){return new $l(this.color,this.near,this.far)}toJSON(){return{type:"Fog",color:this.color.getHex(),near:this.near,far:this.far}}}class JS extends pn{constructor(){super(),this.isScene=!0,this.type="Scene",this.background=null,this.environment=null,this.fog=null,this.backgroundBlurriness=0,this.backgroundIntensity=1,this.overrideMaterial=null,typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}copy(e,t){return super.copy(e,t),null!==e.background&&(this.background=e.background.clone()),null!==e.environment&&(this.environment=e.environment.clone()),null!==e.fog&&(this.fog=e.fog.clone()),this.backgroundBlurriness=e.backgroundBlurriness,this.backgroundIntensity=e.backgroundIntensity,null!==e.overrideMaterial&&(this.overrideMaterial=e.overrideMaterial.clone()),this.matrixAutoUpdate=e.matrixAutoUpdate,this}toJSON(e){const t=super.toJSON(e);return null!==this.fog&&(t.object.fog=this.fog.toJSON()),this.backgroundBlurriness>0&&(t.backgroundBlurriness=this.backgroundBlurriness),1!==this.backgroundIntensity&&(t.backgroundIntensity=this.backgroundIntensity),t}get autoUpdate(){return console.warn("THREE.Scene: autoUpdate was renamed to matrixWorldAutoUpdate in r144."),this.matrixWorldAutoUpdate}set autoUpdate(e){console.warn("THREE.Scene: autoUpdate was renamed to matrixWorldAutoUpdate in r144."),this.matrixWorldAutoUpdate=e}}class y7{constructor(e,t){this.isInterleavedBuffer=!0,this.array=e,this.stride=t,this.count=void 0!==e?e.length/t:0,this.usage=35044,this.updateRange={offset:0,count:-1},this.version=0,this.uuid=Vi()}onUploadCallback(){}set needsUpdate(e){!0===e&&this.version++}setUsage(e){return this.usage=e,this}copy(e){return this.array=new e.array.constructor(e.array),this.count=e.count,this.stride=e.stride,this.usage=e.usage,this}copyAt(e,t,i){e*=this.stride,i*=t.stride;for(let r=0,s=this.stride;r<s;r++)this.array[e+r]=t.array[i+r];return this}set(e,t=0){return this.array.set(e,t),this}clone(e){void 0===e.arrayBuffers&&(e.arrayBuffers={}),void 0===this.array.buffer._uuid&&(this.array.buffer._uuid=Vi()),void 0===e.arrayBuffers[this.array.buffer._uuid]&&(e.arrayBuffers[this.array.buffer._uuid]=this.array.slice(0).buffer);const t=new this.array.constructor(e.arrayBuffers[this.array.buffer._uuid]),i=new this.constructor(t,this.stride);return i.setUsage(this.usage),i}onUpload(e){return this.onUploadCallback=e,this}toJSON(e){return void 0===e.arrayBuffers&&(e.arrayBuffers={}),void 0===this.array.buffer._uuid&&(this.array.buffer._uuid=Vi()),void 0===e.arrayBuffers[this.array.buffer._uuid]&&(e.arrayBuffers[this.array.buffer._uuid]=Array.from(new Uint32Array(this.array.buffer))),{uuid:this.uuid,buffer:this.array.buffer._uuid,type:this.array.constructor.name,stride:this.stride}}}const gi=new C;class Aa{constructor(e,t,i,r=!1){this.isInterleavedBufferAttribute=!0,this.name="",this.data=e,this.itemSize=t,this.offset=i,this.normalized=!0===r}get count(){return this.data.count}get array(){return this.data.array}set needsUpdate(e){this.data.needsUpdate=e}applyMatrix4(e){for(let t=0,i=this.data.count;t<i;t++)gi.fromBufferAttribute(this,t),gi.applyMatrix4(e),this.setXYZ(t,gi.x,gi.y,gi.z);return this}applyNormalMatrix(e){for(let t=0,i=this.count;t<i;t++)gi.fromBufferAttribute(this,t),gi.applyNormalMatrix(e),this.setXYZ(t,gi.x,gi.y,gi.z);return this}transformDirection(e){for(let t=0,i=this.count;t<i;t++)gi.fromBufferAttribute(this,t),gi.transformDirection(e),this.setXYZ(t,gi.x,gi.y,gi.z);return this}setX(e,t){return this.normalized&&(t=Nt(t,this.array)),this.data.array[e*this.data.stride+this.offset]=t,this}setY(e,t){return this.normalized&&(t=Nt(t,this.array)),this.data.array[e*this.data.stride+this.offset+1]=t,this}setZ(e,t){return this.normalized&&(t=Nt(t,this.array)),this.data.array[e*this.data.stride+this.offset+2]=t,this}setW(e,t){return this.normalized&&(t=Nt(t,this.array)),this.data.array[e*this.data.stride+this.offset+3]=t,this}getX(e){let t=this.data.array[e*this.data.stride+this.offset];return this.normalized&&(t=Is(t,this.array)),t}getY(e){let t=this.data.array[e*this.data.stride+this.offset+1];return this.normalized&&(t=Is(t,this.array)),t}getZ(e){let t=this.data.array[e*this.data.stride+this.offset+2];return this.normalized&&(t=Is(t,this.array)),t}getW(e){let t=this.data.array[e*this.data.stride+this.offset+3];return this.normalized&&(t=Is(t,this.array)),t}setXY(e,t,i){return e=e*this.data.stride+this.offset,this.normalized&&(t=Nt(t,this.array),i=Nt(i,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=i,this}setXYZ(e,t,i,r){return e=e*this.data.stride+this.offset,this.normalized&&(t=Nt(t,this.array),i=Nt(i,this.array),r=Nt(r,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=i,this.data.array[e+2]=r,this}setXYZW(e,t,i,r,s){return e=e*this.data.stride+this.offset,this.normalized&&(t=Nt(t,this.array),i=Nt(i,this.array),r=Nt(r,this.array),s=Nt(s,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=i,this.data.array[e+2]=r,this.data.array[e+3]=s,this}clone(e){if(void 0===e){console.log("THREE.InterleavedBufferAttribute.clone(): Cloning an interleaved buffer attribute will de-interleave buffer data.");const t=[];for(let i=0;i<this.count;i++){const r=i*this.data.stride+this.offset;for(let s=0;s<this.itemSize;s++)t.push(this.data.array[r+s])}return new Vt(new this.array.constructor(t),this.itemSize,this.normalized)}return void 0===e.interleavedBuffers&&(e.interleavedBuffers={}),void 0===e.interleavedBuffers[this.data.uuid]&&(e.interleavedBuffers[this.data.uuid]=this.data.clone(e)),new Aa(e.interleavedBuffers[this.data.uuid],this.itemSize,this.offset,this.normalized)}toJSON(e){if(void 0===e){console.log("THREE.InterleavedBufferAttribute.toJSON(): Serializing an interleaved buffer attribute will de-interleave buffer data.");const t=[];for(let i=0;i<this.count;i++){const r=i*this.data.stride+this.offset;for(let s=0;s<this.itemSize;s++)t.push(this.data.array[r+s])}return{itemSize:this.itemSize,type:this.array.constructor.name,array:t,normalized:this.normalized}}return void 0===e.interleavedBuffers&&(e.interleavedBuffers={}),void 0===e.interleavedBuffers[this.data.uuid]&&(e.interleavedBuffers[this.data.uuid]=this.data.toJSON(e)),{isInterleavedBufferAttribute:!0,itemSize:this.itemSize,data:this.data.uuid,offset:this.offset,normalized:this.normalized}}}const rE=new C,sE=new ft,oE=new ft,Use=new C,aE=new Ce;class x7 extends an{constructor(e,t){super(e,t),this.isSkinnedMesh=!0,this.type="SkinnedMesh",this.bindMode="attached",this.bindMatrix=new Ce,this.bindMatrixInverse=new Ce}copy(e,t){return super.copy(e,t),this.bindMode=e.bindMode,this.bindMatrix.copy(e.bindMatrix),this.bindMatrixInverse.copy(e.bindMatrixInverse),this.skeleton=e.skeleton,this}bind(e,t){this.skeleton=e,void 0===t&&(this.updateMatrixWorld(!0),this.skeleton.calculateInverses(),t=this.matrixWorld),this.bindMatrix.copy(t),this.bindMatrixInverse.copy(t).invert()}pose(){this.skeleton.pose()}normalizeSkinWeights(){const e=new ft,t=this.geometry.attributes.skinWeight;for(let i=0,r=t.count;i<r;i++){e.fromBufferAttribute(t,i);const s=1/e.manhattanLength();s!==1/0?e.multiplyScalar(s):e.set(1,0,0,0),t.setXYZW(i,e.x,e.y,e.z,e.w)}}updateMatrixWorld(e){super.updateMatrixWorld(e),"attached"===this.bindMode?this.bindMatrixInverse.copy(this.matrixWorld).invert():"detached"===this.bindMode?this.bindMatrixInverse.copy(this.bindMatrix).invert():console.warn("THREE.SkinnedMesh: Unrecognized bindMode: "+this.bindMode)}boneTransform(e,t){const i=this.skeleton,r=this.geometry;sE.fromBufferAttribute(r.attributes.skinIndex,e),oE.fromBufferAttribute(r.attributes.skinWeight,e),rE.copy(t).applyMatrix4(this.bindMatrix),t.set(0,0,0);for(let s=0;s<4;s++){const o=oE.getComponent(s);if(0!==o){const a=sE.getComponent(s);aE.multiplyMatrices(i.bones[a].matrixWorld,i.boneInverses[a]),t.addScaledVector(Use.copy(rE).applyMatrix4(aE),o)}}return t.applyMatrix4(this.bindMatrixInverse)}}class Yl extends pn{constructor(){super(),this.isBone=!0,this.type="Bone"}}class Kl extends Hi{constructor(e=null,t=1,i=1,r,s,o,a,c,l=bn,u=bn,f,h){super(null,o,a,c,l,u,r,s,f,h),this.isDataTexture=!0,this.image={data:e,width:t,height:i},this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}const cE=new Ce,Bse=new Ce;class Jl{constructor(e=[],t=[]){this.uuid=Vi(),this.bones=e.slice(0),this.boneInverses=t,this.boneMatrices=null,this.boneTexture=null,this.boneTextureSize=0,this.frame=-1,this.init()}init(){const e=this.bones,t=this.boneInverses;if(this.boneMatrices=new Float32Array(16*e.length),0===t.length)this.calculateInverses();else if(e.length!==t.length){console.warn("THREE.Skeleton: Number of inverse bone matrices does not match amount of bones."),this.boneInverses=[];for(let i=0,r=this.bones.length;i<r;i++)this.boneInverses.push(new Ce)}}calculateInverses(){this.boneInverses.length=0;for(let e=0,t=this.bones.length;e<t;e++){const i=new Ce;this.bones[e]&&i.copy(this.bones[e].matrixWorld).invert(),this.boneInverses.push(i)}}pose(){for(let e=0,t=this.bones.length;e<t;e++){const i=this.bones[e];i&&i.matrixWorld.copy(this.boneInverses[e]).invert()}for(let e=0,t=this.bones.length;e<t;e++){const i=this.bones[e];i&&(i.parent&&i.parent.isBone?(i.matrix.copy(i.parent.matrixWorld).invert(),i.matrix.multiply(i.matrixWorld)):i.matrix.copy(i.matrixWorld),i.matrix.decompose(i.position,i.quaternion,i.scale))}}update(){const e=this.bones,t=this.boneInverses,i=this.boneMatrices,r=this.boneTexture;for(let s=0,o=e.length;s<o;s++)cE.multiplyMatrices(e[s]?e[s].matrixWorld:Bse,t[s]),cE.toArray(i,16*s);null!==r&&(r.needsUpdate=!0)}clone(){return new Jl(this.bones,this.boneInverses)}computeBoneTexture(){let e=Math.sqrt(4*this.bones.length);e=sS(e),e=Math.max(e,4);const t=new Float32Array(e*e*4);t.set(this.boneMatrices);const i=new Kl(t,e,e,ir,po);return i.needsUpdate=!0,this.boneMatrices=t,this.boneTexture=i,this.boneTextureSize=e,this}getBoneByName(e){for(let t=0,i=this.bones.length;t<i;t++){const r=this.bones[t];if(r.name===e)return r}}dispose(){null!==this.boneTexture&&(this.boneTexture.dispose(),this.boneTexture=null)}fromJSON(e,t){this.uuid=e.uuid;for(let i=0,r=e.bones.length;i<r;i++){const s=e.bones[i];let o=t[s];void 0===o&&(console.warn("THREE.Skeleton: No bone found with UUID:",s),o=new Yl),this.bones.push(o),this.boneInverses.push((new Ce).fromArray(e.boneInverses[i]))}return this.init(),this}toJSON(){const e={metadata:{version:4.5,type:"Skeleton",generator:"Skeleton.toJSON"},bones:[],boneInverses:[]};e.uuid=this.uuid;const t=this.bones,i=this.boneInverses;for(let r=0,s=t.length;r<s;r++)e.bones.push(t[r].uuid),e.boneInverses.push(i[r].toArray());return e}}class Mo extends Vt{constructor(e,t,i,r=1){super(e,t,i),this.isInstancedBufferAttribute=!0,this.meshPerAttribute=r}copy(e){return super.copy(e),this.meshPerAttribute=e.meshPerAttribute,this}toJSON(){const e=super.toJSON();return e.meshPerAttribute=this.meshPerAttribute,e.isInstancedBufferAttribute=!0,e}}const lE=new Ce,uE=new Ce,O0=[],Gse=new Ce,Ql=new an;class fE extends an{constructor(e,t,i){super(e,t),this.isInstancedMesh=!0,this.instanceMatrix=new Mo(new Float32Array(16*i),16),this.instanceColor=null,this.count=i,this.frustumCulled=!1;for(let r=0;r<i;r++)this.setMatrixAt(r,Gse)}copy(e,t){return super.copy(e,t),this.instanceMatrix.copy(e.instanceMatrix),null!==e.instanceColor&&(this.instanceColor=e.instanceColor.clone()),this.count=e.count,this}getColorAt(e,t){t.fromArray(this.instanceColor.array,3*e)}getMatrixAt(e,t){t.fromArray(this.instanceMatrix.array,16*e)}raycast(e,t){const i=this.matrixWorld,r=this.count;if(Ql.geometry=this.geometry,Ql.material=this.material,void 0!==Ql.material)for(let s=0;s<r;s++){this.getMatrixAt(s,lE),uE.multiplyMatrices(i,lE),Ql.matrixWorld=uE,Ql.raycast(e,O0);for(let o=0,a=O0.length;o<a;o++){const c=O0[o];c.instanceId=s,c.object=this,t.push(c)}O0.length=0}}setColorAt(e,t){null===this.instanceColor&&(this.instanceColor=new Mo(new Float32Array(3*this.instanceMatrix.count),3)),t.toArray(this.instanceColor.array,3*e)}setMatrixAt(e,t){t.toArray(this.instanceMatrix.array,16*e)}updateMorphTargets(){}dispose(){this.dispatchEvent({type:"dispose"})}}class vi extends Bi{constructor(e){super(),this.isLineBasicMaterial=!0,this.type="LineBasicMaterial",this.color=new ae(16777215),this.linewidth=1,this.linecap="round",this.linejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.linewidth=e.linewidth,this.linecap=e.linecap,this.linejoin=e.linejoin,this.fog=e.fog,this}}const hE=new C,dE=new C,pE=new Ce,b7=new p0,k0=new wa;class wo extends pn{constructor(e=new Ze,t=new vi){super(),this.isLine=!0,this.type="Line",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),this.material=e.material,this.geometry=e.geometry,this}computeLineDistances(){const e=this.geometry;if(null===e.index){const t=e.attributes.position,i=[0];for(let r=1,s=t.count;r<s;r++)hE.fromBufferAttribute(t,r-1),dE.fromBufferAttribute(t,r),i[r]=i[r-1],i[r]+=hE.distanceTo(dE);e.setAttribute("lineDistance",new Me(i,1))}else console.warn("THREE.Line.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}raycast(e,t){const i=this.geometry,r=this.matrixWorld,s=e.params.Line.threshold,o=i.drawRange;if(null===i.boundingSphere&&i.computeBoundingSphere(),k0.copy(i.boundingSphere),k0.applyMatrix4(r),k0.radius+=s,!1===e.ray.intersectsSphere(k0))return;pE.copy(r).invert(),b7.copy(e.ray).applyMatrix4(pE);const a=s/((this.scale.x+this.scale.y+this.scale.z)/3),c=a*a,l=new C,u=new C,f=new C,h=new C,d=this.isLineSegments?2:1,p=i.index,g=i.attributes.position;if(null!==p)for(let y=Math.max(0,o.start),_=Math.min(p.count,o.start+o.count)-1;y<_;y+=d){const M=p.getX(y),w=p.getX(y+1);if(l.fromBufferAttribute(g,M),u.fromBufferAttribute(g,w),b7.distanceSqToSegment(l,u,h,f)>c)continue;h.applyMatrix4(this.matrixWorld);const b=e.ray.origin.distanceTo(h);b<e.near||b>e.far||t.push({distance:b,point:f.clone().applyMatrix4(this.matrixWorld),index:y,face:null,faceIndex:null,object:this})}else for(let y=Math.max(0,o.start),_=Math.min(g.count,o.start+o.count)-1;y<_;y+=d){if(l.fromBufferAttribute(g,y),u.fromBufferAttribute(g,y+1),b7.distanceSqToSegment(l,u,h,f)>c)continue;h.applyMatrix4(this.matrixWorld);const w=e.ray.origin.distanceTo(h);w<e.near||w>e.far||t.push({distance:w,point:f.clone().applyMatrix4(this.matrixWorld),index:y,face:null,faceIndex:null,object:this})}}updateMorphTargets(){const t=this.geometry.morphAttributes,i=Object.keys(t);if(i.length>0){const r=t[i[0]];if(void 0!==r){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let s=0,o=r.length;s<o;s++){const a=r[s].name||String(s);this.morphTargetInfluences.push(0),this.morphTargetDictionary[a]=s}}}}}const mE=new C,gE=new C;class M7 extends wo{constructor(e,t){super(e,t),this.isLineSegments=!0,this.type="LineSegments"}computeLineDistances(){const e=this.geometry;if(null===e.index){const t=e.attributes.position,i=[];for(let r=0,s=t.count;r<s;r+=2)mE.fromBufferAttribute(t,r),gE.fromBufferAttribute(t,r+1),i[r]=0===r?0:i[r-1],i[r+1]=i[r]+mE.distanceTo(gE);e.setAttribute("lineDistance",new Me(i,1))}else console.warn("THREE.LineSegments.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}}class vE extends wo{constructor(e,t){super(e,t),this.isLineLoop=!0,this.type="LineLoop"}}class w7 extends Bi{constructor(e){super(),this.isPointsMaterial=!0,this.type="PointsMaterial",this.color=new ae(16777215),this.map=null,this.alphaMap=null,this.size=1,this.sizeAttenuation=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.size=e.size,this.sizeAttenuation=e.sizeAttenuation,this.fog=e.fog,this}}const yE=new Ce,C7=new p0,V0=new wa,H0=new C;class U0 extends pn{constructor(e=new Ze,t=new w7){super(),this.isPoints=!0,this.type="Points",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),this.material=e.material,this.geometry=e.geometry,this}raycast(e,t){const i=this.geometry,r=this.matrixWorld,s=e.params.Points.threshold,o=i.drawRange;if(null===i.boundingSphere&&i.computeBoundingSphere(),V0.copy(i.boundingSphere),V0.applyMatrix4(r),V0.radius+=s,!1===e.ray.intersectsSphere(V0))return;yE.copy(r).invert(),C7.copy(e.ray).applyMatrix4(yE);const a=s/((this.scale.x+this.scale.y+this.scale.z)/3),c=a*a,l=i.index,f=i.attributes.position;if(null!==l)for(let p=Math.max(0,o.start),m=Math.min(l.count,o.start+o.count);p<m;p++){const g=l.getX(p);H0.fromBufferAttribute(f,g),_E(H0,g,c,r,e,t,this)}else for(let p=Math.max(0,o.start),m=Math.min(f.count,o.start+o.count);p<m;p++)H0.fromBufferAttribute(f,p),_E(H0,p,c,r,e,t,this)}updateMorphTargets(){const t=this.geometry.morphAttributes,i=Object.keys(t);if(i.length>0){const r=t[i[0]];if(void 0!==r){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let s=0,o=r.length;s<o;s++){const a=r[s].name||String(s);this.morphTargetInfluences.push(0),this.morphTargetDictionary[a]=s}}}}}function _E(n,e,t,i,r,s,o){const a=C7.distanceSqToPoint(n);if(a<t){const c=new C;C7.closestPointToPoint(n,c),c.applyMatrix4(i);const l=r.ray.origin.distanceTo(c);if(l<r.near||l>r.far)return;s.push({distance:l,distanceToRay:Math.sqrt(a),point:c,index:e,face:null,object:o})}}class zr{constructor(){this.type="Curve",this.arcLengthDivisions=200}getPoint(){return console.warn("THREE.Curve: .getPoint() not implemented."),null}getPointAt(e,t){const i=this.getUtoTmapping(e);return this.getPoint(i,t)}getPoints(e=5){const t=[];for(let i=0;i<=e;i++)t.push(this.getPoint(i/e));return t}getSpacedPoints(e=5){const t=[];for(let i=0;i<=e;i++)t.push(this.getPointAt(i/e));return t}getLength(){const e=this.getLengths();return e[e.length-1]}getLengths(e=this.arcLengthDivisions){if(this.cacheArcLengths&&this.cacheArcLengths.length===e+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;const t=[];let i,r=this.getPoint(0),s=0;t.push(0);for(let o=1;o<=e;o++)i=this.getPoint(o/e),s+=i.distanceTo(r),t.push(s),r=i;return this.cacheArcLengths=t,t}updateArcLengths(){this.needsUpdate=!0,this.getLengths()}getUtoTmapping(e,t){const i=this.getLengths();let r=0;const s=i.length;let o;o=t||e*i[s-1];let l,a=0,c=s-1;for(;a<=c;)if(r=Math.floor(a+(c-a)/2),l=i[r]-o,l<0)a=r+1;else{if(!(l>0)){c=r;break}c=r-1}if(r=c,i[r]===o)return r/(s-1);const u=i[r];return(r+(o-u)/(i[r+1]-u))/(s-1)}getTangent(e,t){let r=e-1e-4,s=e+1e-4;r<0&&(r=0),s>1&&(s=1);const o=this.getPoint(r),a=this.getPoint(s),c=t||(o.isVector2?new q:new C);return c.copy(a).sub(o).normalize(),c}getTangentAt(e,t){const i=this.getUtoTmapping(e);return this.getTangent(i,t)}computeFrenetFrames(e,t){const i=new C,r=[],s=[],o=[],a=new C,c=new Ce;for(let d=0;d<=e;d++)r[d]=this.getTangentAt(d/e,new C);s[0]=new C,o[0]=new C;let l=Number.MAX_VALUE;const u=Math.abs(r[0].x),f=Math.abs(r[0].y),h=Math.abs(r[0].z);u<=l&&(l=u,i.set(1,0,0)),f<=l&&(l=f,i.set(0,1,0)),h<=l&&i.set(0,0,1),a.crossVectors(r[0],i).normalize(),s[0].crossVectors(r[0],a),o[0].crossVectors(r[0],s[0]);for(let d=1;d<=e;d++){if(s[d]=s[d-1].clone(),o[d]=o[d-1].clone(),a.crossVectors(r[d-1],r[d]),a.length()>Number.EPSILON){a.normalize();const p=Math.acos(dn(r[d-1].dot(r[d]),-1,1));s[d].applyMatrix4(c.makeRotationAxis(a,p))}o[d].crossVectors(r[d],s[d])}if(!0===t){let d=Math.acos(dn(s[0].dot(s[e]),-1,1));d/=e,r[0].dot(a.crossVectors(s[0],s[e]))>0&&(d=-d);for(let p=1;p<=e;p++)s[p].applyMatrix4(c.makeRotationAxis(r[p],d*p)),o[p].crossVectors(r[p],s[p])}return{tangents:r,normals:s,binormals:o}}clone(){return(new this.constructor).copy(this)}copy(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}toJSON(){const e={metadata:{version:4.5,type:"Curve",generator:"Curve.toJSON"}};return e.arcLengthDivisions=this.arcLengthDivisions,e.type=this.type,e}fromJSON(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}}class S7 extends zr{constructor(e=0,t=0,i=1,r=1,s=0,o=2*Math.PI,a=!1,c=0){super(),this.isEllipseCurve=!0,this.type="EllipseCurve",this.aX=e,this.aY=t,this.xRadius=i,this.yRadius=r,this.aStartAngle=s,this.aEndAngle=o,this.aClockwise=a,this.aRotation=c}getPoint(e,t){const i=t||new q,r=2*Math.PI;let s=this.aEndAngle-this.aStartAngle;const o=Math.abs(s)<Number.EPSILON;for(;s<0;)s+=r;for(;s>r;)s-=r;s<Number.EPSILON&&(s=o?0:r),!0===this.aClockwise&&!o&&(s===r?s=-r:s-=r);const a=this.aStartAngle+e*s;let c=this.aX+this.xRadius*Math.cos(a),l=this.aY+this.yRadius*Math.sin(a);if(0!==this.aRotation){const u=Math.cos(this.aRotation),f=Math.sin(this.aRotation),h=c-this.aX,d=l-this.aY;c=h*u-d*f+this.aX,l=h*f+d*u+this.aY}return i.set(c,l)}copy(e){return super.copy(e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}toJSON(){const e=super.toJSON();return e.aX=this.aX,e.aY=this.aY,e.xRadius=this.xRadius,e.yRadius=this.yRadius,e.aStartAngle=this.aStartAngle,e.aEndAngle=this.aEndAngle,e.aClockwise=this.aClockwise,e.aRotation=this.aRotation,e}fromJSON(e){return super.fromJSON(e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}}function E7(){let n=0,e=0,t=0,i=0;function r(s,o,a,c){n=s,e=a,t=-3*s+3*o-2*a-c,i=2*s-2*o+a+c}return{initCatmullRom:function(s,o,a,c,l){r(o,a,l*(a-s),l*(c-o))},initNonuniformCatmullRom:function(s,o,a,c,l,u,f){let h=(o-s)/l-(a-s)/(l+u)+(a-o)/u,d=(a-o)/u-(c-o)/(u+f)+(c-a)/f;h*=u,d*=u,r(o,a,h,d)},calc:function(s){const o=s*s;return n+e*s+t*o+i*(o*s)}}}const B0=new C,D7=new E7,A7=new E7,T7=new E7;function xE(n,e,t,i,r){const s=.5*(i-e),o=.5*(r-t),a=n*n;return(2*t-2*i+s+o)*(n*a)+(-3*t+3*i-2*s-o)*a+s*n+t}function e3(n,e,t,i){return function qse(n,e){const t=1-n;return t*t*e}(n,e)+function Zse(n,e){return 2*(1-n)*n*e}(n,t)+function Xse(n,e){return n*n*e}(n,i)}function t3(n,e,t,i,r){return function Yse(n,e){const t=1-n;return t*t*t*e}(n,e)+function Kse(n,e){const t=1-n;return 3*t*t*n*e}(n,t)+function Jse(n,e){return 3*(1-n)*n*n*e}(n,i)+function Qse(n,e){return n*n*n*e}(n,r)}class bE extends zr{constructor(e=new q,t=new q,i=new q,r=new q){super(),this.isCubicBezierCurve=!0,this.type="CubicBezierCurve",this.v0=e,this.v1=t,this.v2=i,this.v3=r}getPoint(e,t=new q){const i=t,r=this.v0,s=this.v1,o=this.v2,a=this.v3;return i.set(t3(e,r.x,s.x,o.x,a.x),t3(e,r.y,s.y,o.y,a.y)),i}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this}}class I7 extends zr{constructor(e=new q,t=new q){super(),this.isLineCurve=!0,this.type="LineCurve",this.v1=e,this.v2=t}getPoint(e,t=new q){const i=t;return 1===e?i.copy(this.v2):(i.copy(this.v2).sub(this.v1),i.multiplyScalar(e).add(this.v1)),i}getPointAt(e,t){return this.getPoint(e,t)}getTangent(e,t){const i=t||new q;return i.copy(this.v2).sub(this.v1).normalize(),i}copy(e){return super.copy(e),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class ME extends zr{constructor(e=new C,t=new C){super(),this.isLineCurve3=!0,this.type="LineCurve3",this.v1=e,this.v2=t}getPoint(e,t=new C){const i=t;return 1===e?i.copy(this.v2):(i.copy(this.v2).sub(this.v1),i.multiplyScalar(e).add(this.v1)),i}getPointAt(e,t){return this.getPoint(e,t)}copy(e){return super.copy(e),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class wE extends zr{constructor(e=new q,t=new q,i=new q){super(),this.isQuadraticBezierCurve=!0,this.type="QuadraticBezierCurve",this.v0=e,this.v1=t,this.v2=i}getPoint(e,t=new q){const i=t,r=this.v0,s=this.v1,o=this.v2;return i.set(e3(e,r.x,s.x,o.x),e3(e,r.y,s.y,o.y)),i}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class CE extends zr{constructor(e=new C,t=new C,i=new C){super(),this.isQuadraticBezierCurve3=!0,this.type="QuadraticBezierCurve3",this.v0=e,this.v1=t,this.v2=i}getPoint(e,t=new C){const i=t,r=this.v0,s=this.v1,o=this.v2;return i.set(e3(e,r.x,s.x,o.x),e3(e,r.y,s.y,o.y),e3(e,r.z,s.z,o.z)),i}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class SE extends zr{constructor(e=[]){super(),this.isSplineCurve=!0,this.type="SplineCurve",this.points=e}getPoint(e,t=new q){const i=t,r=this.points,s=(r.length-1)*e,o=Math.floor(s),a=s-o,c=r[0===o?o:o-1],l=r[o],u=r[o>r.length-2?r.length-1:o+1],f=r[o>r.length-3?r.length-1:o+2];return i.set(xE(a,c.x,l.x,u.x,f.x),xE(a,c.y,l.y,u.y,f.y)),i}copy(e){super.copy(e),this.points=[];for(let t=0,i=e.points.length;t<i;t++)this.points.push(e.points[t].clone());return this}toJSON(){const e=super.toJSON();e.points=[];for(let t=0,i=this.points.length;t<i;t++)e.points.push(this.points[t].toArray());return e}fromJSON(e){super.fromJSON(e),this.points=[];for(let t=0,i=e.points.length;t<i;t++){const r=e.points[t];this.points.push((new q).fromArray(r))}return this}}var L7=Object.freeze({__proto__:null,ArcCurve:class jse extends S7{constructor(e,t,i,r,s,o){super(e,t,i,i,r,s,o),this.isArcCurve=!0,this.type="ArcCurve"}},CatmullRomCurve3:class $se extends zr{constructor(e=[],t=!1,i="centripetal",r=.5){super(),this.isCatmullRomCurve3=!0,this.type="CatmullRomCurve3",this.points=e,this.closed=t,this.curveType=i,this.tension=r}getPoint(e,t=new C){const i=t,r=this.points,s=r.length,o=(s-(this.closed?0:1))*e;let l,u,a=Math.floor(o),c=o-a;this.closed?a+=a>0?0:(Math.floor(Math.abs(a)/s)+1)*s:0===c&&a===s-1&&(a=s-2,c=1),this.closed||a>0?l=r[(a-1)%s]:(B0.subVectors(r[0],r[1]).add(r[0]),l=B0);const f=r[a%s],h=r[(a+1)%s];if(this.closed||a+2<s?u=r[(a+2)%s]:(B0.subVectors(r[s-1],r[s-2]).add(r[s-1]),u=B0),"centripetal"===this.curveType||"chordal"===this.curveType){const d="chordal"===this.curveType?.5:.25;let p=Math.pow(l.distanceToSquared(f),d),m=Math.pow(f.distanceToSquared(h),d),g=Math.pow(h.distanceToSquared(u),d);m<1e-4&&(m=1),p<1e-4&&(p=m),g<1e-4&&(g=m),D7.initNonuniformCatmullRom(l.x,f.x,h.x,u.x,p,m,g),A7.initNonuniformCatmullRom(l.y,f.y,h.y,u.y,p,m,g),T7.initNonuniformCatmullRom(l.z,f.z,h.z,u.z,p,m,g)}else"catmullrom"===this.curveType&&(D7.initCatmullRom(l.x,f.x,h.x,u.x,this.tension),A7.initCatmullRom(l.y,f.y,h.y,u.y,this.tension),T7.initCatmullRom(l.z,f.z,h.z,u.z,this.tension));return i.set(D7.calc(c),A7.calc(c),T7.calc(c)),i}copy(e){super.copy(e),this.points=[];for(let t=0,i=e.points.length;t<i;t++)this.points.push(e.points[t].clone());return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}toJSON(){const e=super.toJSON();e.points=[];for(let t=0,i=this.points.length;t<i;t++)e.points.push(this.points[t].toArray());return e.closed=this.closed,e.curveType=this.curveType,e.tension=this.tension,e}fromJSON(e){super.fromJSON(e),this.points=[];for(let t=0,i=e.points.length;t<i;t++){const r=e.points[t];this.points.push((new C).fromArray(r))}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}},CubicBezierCurve:bE,CubicBezierCurve3:class eoe extends zr{constructor(e=new C,t=new C,i=new C,r=new C){super(),this.isCubicBezierCurve3=!0,this.type="CubicBezierCurve3",this.v0=e,this.v1=t,this.v2=i,this.v3=r}getPoint(e,t=new C){const i=t,r=this.v0,s=this.v1,o=this.v2,a=this.v3;return i.set(t3(e,r.x,s.x,o.x,a.x),t3(e,r.y,s.y,o.y,a.y),t3(e,r.z,s.z,o.z,a.z)),i}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this}},EllipseCurve:S7,LineCurve:I7,LineCurve3:ME,QuadraticBezierCurve:wE,QuadraticBezierCurve3:CE,SplineCurve:SE});class toe extends zr{constructor(){super(),this.type="CurvePath",this.curves=[],this.autoClose=!1}add(e){this.curves.push(e)}closePath(){const e=this.curves[0].getPoint(0),t=this.curves[this.curves.length-1].getPoint(1);e.equals(t)||this.curves.push(new I7(t,e))}getPoint(e,t){const i=e*this.getLength(),r=this.getCurveLengths();let s=0;for(;s<r.length;){if(r[s]>=i){const o=r[s]-i,a=this.curves[s],c=a.getLength();return a.getPointAt(0===c?0:1-o/c,t)}s++}return null}getLength(){const e=this.getCurveLengths();return e[e.length-1]}updateArcLengths(){this.needsUpdate=!0,this.cacheLengths=null,this.getCurveLengths()}getCurveLengths(){if(this.cacheLengths&&this.cacheLengths.length===this.curves.length)return this.cacheLengths;const e=[];let t=0;for(let i=0,r=this.curves.length;i<r;i++)t+=this.curves[i].getLength(),e.push(t);return this.cacheLengths=e,e}getSpacedPoints(e=40){const t=[];for(let i=0;i<=e;i++)t.push(this.getPoint(i/e));return this.autoClose&&t.push(t[0]),t}getPoints(e=12){const t=[];let i;for(let r=0,s=this.curves;r<s.length;r++){const o=s[r],c=o.getPoints(o.isEllipseCurve?2*e:o.isLineCurve||o.isLineCurve3?1:o.isSplineCurve?e*o.points.length:e);for(let l=0;l<c.length;l++){const u=c[l];i&&i.equals(u)||(t.push(u),i=u)}}return this.autoClose&&t.length>1&&!t[t.length-1].equals(t[0])&&t.push(t[0]),t}copy(e){super.copy(e),this.curves=[];for(let t=0,i=e.curves.length;t<i;t++)this.curves.push(e.curves[t].clone());return this.autoClose=e.autoClose,this}toJSON(){const e=super.toJSON();e.autoClose=this.autoClose,e.curves=[];for(let t=0,i=this.curves.length;t<i;t++)e.curves.push(this.curves[t].toJSON());return e}fromJSON(e){super.fromJSON(e),this.autoClose=e.autoClose,this.curves=[];for(let t=0,i=e.curves.length;t<i;t++){const r=e.curves[t];this.curves.push((new L7[r.type]).fromJSON(r))}return this}}class G0 extends toe{constructor(e){super(),this.type="Path",this.currentPoint=new q,e&&this.setFromPoints(e)}setFromPoints(e){this.moveTo(e[0].x,e[0].y);for(let t=1,i=e.length;t<i;t++)this.lineTo(e[t].x,e[t].y);return this}moveTo(e,t){return this.currentPoint.set(e,t),this}lineTo(e,t){const i=new I7(this.currentPoint.clone(),new q(e,t));return this.curves.push(i),this.currentPoint.set(e,t),this}quadraticCurveTo(e,t,i,r){const s=new wE(this.currentPoint.clone(),new q(e,t),new q(i,r));return this.curves.push(s),this.currentPoint.set(i,r),this}bezierCurveTo(e,t,i,r,s,o){const a=new bE(this.currentPoint.clone(),new q(e,t),new q(i,r),new q(s,o));return this.curves.push(a),this.currentPoint.set(s,o),this}splineThru(e){const t=[this.currentPoint.clone()].concat(e),i=new SE(t);return this.curves.push(i),this.currentPoint.copy(e[e.length-1]),this}arc(e,t,i,r,s,o){return this.absarc(e+this.currentPoint.x,t+this.currentPoint.y,i,r,s,o),this}absarc(e,t,i,r,s,o){return this.absellipse(e,t,i,i,r,s,o),this}ellipse(e,t,i,r,s,o,a,c){return this.absellipse(e+this.currentPoint.x,t+this.currentPoint.y,i,r,s,o,a,c),this}absellipse(e,t,i,r,s,o,a,c){const l=new S7(e,t,i,r,s,o,a,c);if(this.curves.length>0){const f=l.getPoint(0);f.equals(this.currentPoint)||this.lineTo(f.x,f.y)}this.curves.push(l);const u=l.getPoint(1);return this.currentPoint.copy(u),this}copy(e){return super.copy(e),this.currentPoint.copy(e.currentPoint),this}toJSON(){const e=super.toJSON();return e.currentPoint=this.currentPoint.toArray(),e}fromJSON(e){return super.fromJSON(e),this.currentPoint.fromArray(e.currentPoint),this}}class C2 extends Ze{constructor(e=1,t=1,i=1,r=8,s=1,o=!1,a=0,c=2*Math.PI){super(),this.type="CylinderGeometry",this.parameters={radiusTop:e,radiusBottom:t,height:i,radialSegments:r,heightSegments:s,openEnded:o,thetaStart:a,thetaLength:c};const l=this;r=Math.floor(r),s=Math.floor(s);const u=[],f=[],h=[],d=[];let p=0;const m=[],g=i/2;let v=0;function y(_){const M=p,w=new q,D=new C;let b=0;const E=!0===_?e:t,I=!0===_?1:-1;for(let U=1;U<=r;U++)f.push(0,g*I,0),h.push(0,I,0),d.push(.5,.5),p++;const z=p;for(let U=0;U<=r;U++){const L=U/r*c+a,F=Math.cos(L),H=Math.sin(L);D.x=E*H,D.y=g*I,D.z=E*F,f.push(D.x,D.y,D.z),h.push(0,I,0),w.x=.5*F+.5,w.y=.5*H*I+.5,d.push(w.x,w.y),p++}for(let U=0;U<r;U++){const P=M+U,L=z+U;!0===_?u.push(L,L+1,P):u.push(L+1,L,P),b+=3}l.addGroup(v,b,!0===_?1:2),v+=b}(function x(){const _=new C,M=new C;let w=0;const D=(t-e)/i;for(let b=0;b<=s;b++){const E=[],I=b/s,z=I*(t-e)+e;for(let U=0;U<=r;U++){const P=U/r,L=P*c+a,F=Math.sin(L),H=Math.cos(L);M.x=z*F,M.y=-I*i+g,M.z=z*H,f.push(M.x,M.y,M.z),_.set(F,D,H).normalize(),h.push(_.x,_.y,_.z),d.push(P,1-I),E.push(p++)}m.push(E)}for(let b=0;b<r;b++)for(let E=0;E<s;E++){const z=m[E+1][b],U=m[E+1][b+1],P=m[E][b+1];u.push(m[E][b],z,P),u.push(z,U,P),w+=6}l.addGroup(v,w,0),v+=w})(),!1===o&&(e>0&&y(!0),t>0&&y(!1)),this.setIndex(u),this.setAttribute("position",new Me(f,3)),this.setAttribute("normal",new Me(h,3)),this.setAttribute("uv",new Me(d,2))}static fromJSON(e){return new C2(e.radiusTop,e.radiusBottom,e.height,e.radialSegments,e.heightSegments,e.openEnded,e.thetaStart,e.thetaLength)}}class Ia extends G0{constructor(e){super(e),this.uuid=Vi(),this.type="Shape",this.holes=[]}getPointsHoles(e){const t=[];for(let i=0,r=this.holes.length;i<r;i++)t[i]=this.holes[i].getPoints(e);return t}extractPoints(e){return{shape:this.getPoints(e),holes:this.getPointsHoles(e)}}copy(e){super.copy(e),this.holes=[];for(let t=0,i=e.holes.length;t<i;t++)this.holes.push(e.holes[t].clone());return this}toJSON(){const e=super.toJSON();e.uuid=this.uuid,e.holes=[];for(let t=0,i=this.holes.length;t<i;t++)e.holes.push(this.holes[t].toJSON());return e}fromJSON(e){super.fromJSON(e),this.uuid=e.uuid,this.holes=[];for(let t=0,i=e.holes.length;t<i;t++){const r=e.holes[t];this.holes.push((new G0).fromJSON(r))}return this}}function EE(n,e,t,i,r){let s,o;if(r===function _oe(n,e,t,i){let r=0;for(let s=e,o=t-i;s<t;s+=i)r+=(n[o]-n[s])*(n[s+1]+n[o+1]),o=s;return r}(n,e,t,i)>0)for(s=e;s<t;s+=i)o=TE(s,n[s],n[s+1],o);else for(s=t-i;s>=e;s-=i)o=TE(s,n[s],n[s+1],o);return o&&Z0(o,o.next)&&(r3(o),o=o.next),o}function La(n,e){if(!n)return n;e||(e=n);let i,t=n;do{if(i=!1,t.steiner||!Z0(t,t.next)&&0!==Qt(t.prev,t,t.next))t=t.next;else{if(r3(t),t=e=t.prev,t===t.next)break;i=!0}}while(i||t!==e);return e}function n3(n,e,t,i,r,s,o){if(!n)return;!o&&s&&function doe(n,e,t,i){let r=n;do{0===r.z&&(r.z=O7(r.x,r.y,e,t,i)),r.prevZ=r.prev,r.nextZ=r.next,r=r.next}while(r!==n);r.prevZ.nextZ=null,r.prevZ=null,function poe(n){let e,t,i,r,s,o,a,c,l=1;do{for(t=n,n=null,s=null,o=0;t;){for(o++,i=t,a=0,e=0;e<l&&(a++,i=i.nextZ,i);e++);for(c=l;a>0||c>0&&i;)0!==a&&(0===c||!i||t.z<=i.z)?(r=t,t=t.nextZ,a--):(r=i,i=i.nextZ,c--),s?s.nextZ=r:n=r,r.prevZ=s,s=r;t=i}s.nextZ=null,l*=2}while(o>1)}(r)}(n,i,r,s);let c,l,a=n;for(;n.prev!==n.next;)if(c=n.prev,l=n.next,s?soe(n,i,r,s):roe(n))e.push(c.i/t|0),e.push(n.i/t|0),e.push(l.i/t|0),r3(n),n=l.next,a=l.next;else if((n=l)===a){o?1===o?n3(n=ooe(La(n),e,t),e,t,i,r,s,2):2===o&&aoe(n,e,t,i,r,s):n3(La(n),e,t,i,r,s,1);break}}function roe(n){const e=n.prev,t=n,i=n.next;if(Qt(e,t,i)>=0)return!1;const r=e.x,s=t.x,o=i.x,a=e.y,c=t.y,l=i.y,u=r<s?r<o?r:o:s<o?s:o,f=a<c?a<l?a:l:c<l?c:l,h=r>s?r>o?r:o:s>o?s:o,d=a>c?a>l?a:l:c>l?c:l;let p=i.next;for(;p!==e;){if(p.x>=u&&p.x<=h&&p.y>=f&&p.y<=d&&S2(r,a,s,c,o,l,p.x,p.y)&&Qt(p.prev,p,p.next)>=0)return!1;p=p.next}return!0}function soe(n,e,t,i){const r=n.prev,s=n,o=n.next;if(Qt(r,s,o)>=0)return!1;const a=r.x,c=s.x,l=o.x,u=r.y,f=s.y,h=o.y,d=a<c?a<l?a:l:c<l?c:l,p=u<f?u<h?u:h:f<h?f:h,m=a>c?a>l?a:l:c>l?c:l,g=u>f?u>h?u:h:f>h?f:h,v=O7(d,p,e,t,i),x=O7(m,g,e,t,i);let y=n.prevZ,_=n.nextZ;for(;y&&y.z>=v&&_&&_.z<=x;){if(y.x>=d&&y.x<=m&&y.y>=p&&y.y<=g&&y!==r&&y!==o&&S2(a,u,c,f,l,h,y.x,y.y)&&Qt(y.prev,y,y.next)>=0||(y=y.prevZ,_.x>=d&&_.x<=m&&_.y>=p&&_.y<=g&&_!==r&&_!==o&&S2(a,u,c,f,l,h,_.x,_.y)&&Qt(_.prev,_,_.next)>=0))return!1;_=_.nextZ}for(;y&&y.z>=v;){if(y.x>=d&&y.x<=m&&y.y>=p&&y.y<=g&&y!==r&&y!==o&&S2(a,u,c,f,l,h,y.x,y.y)&&Qt(y.prev,y,y.next)>=0)return!1;y=y.prevZ}for(;_&&_.z<=x;){if(_.x>=d&&_.x<=m&&_.y>=p&&_.y<=g&&_!==r&&_!==o&&S2(a,u,c,f,l,h,_.x,_.y)&&Qt(_.prev,_,_.next)>=0)return!1;_=_.nextZ}return!0}function ooe(n,e,t){let i=n;do{const r=i.prev,s=i.next.next;!Z0(r,s)&&DE(r,i,i.next,s)&&i3(r,s)&&i3(s,r)&&(e.push(r.i/t|0),e.push(i.i/t|0),e.push(s.i/t|0),r3(i),r3(i.next),i=n=s),i=i.next}while(i!==n);return La(i)}function aoe(n,e,t,i,r,s){let o=n;do{let a=o.next.next;for(;a!==o.prev;){if(o.i!==a.i&&goe(o,a)){let c=AE(o,a);return o=La(o,o.next),c=La(c,c.next),n3(o,e,t,i,r,s,0),void n3(c,e,t,i,r,s,0)}a=a.next}o=o.next}while(o!==n)}function loe(n,e){return n.x-e.x}function uoe(n,e){const t=function foe(n,e){let r,t=e,i=-1/0;const s=n.x,o=n.y;do{if(o<=t.y&&o>=t.next.y&&t.next.y!==t.y){const h=t.x+(o-t.y)*(t.next.x-t.x)/(t.next.y-t.y);if(h<=s&&h>i&&(i=h,r=t.x<t.next.x?t:t.next,h===s))return r}t=t.next}while(t!==e);if(!r)return null;const a=r,c=r.x,l=r.y;let f,u=1/0;t=r;do{s>=t.x&&t.x>=c&&s!==t.x&&S2(o<l?s:i,o,c,l,o<l?i:s,o,t.x,t.y)&&(f=Math.abs(o-t.y)/(s-t.x),i3(t,n)&&(f<u||f===u&&(t.x>r.x||t.x===r.x&&hoe(r,t)))&&(r=t,u=f)),t=t.next}while(t!==a);return r}(n,e);if(!t)return e;const i=AE(t,n);return La(i,i.next),La(t,t.next)}function hoe(n,e){return Qt(n.prev,n,e.prev)<0&&Qt(e.next,n,n.next)<0}function O7(n,e,t,i,r){return(n=1431655765&((n=858993459&((n=252645135&((n=16711935&((n=(n-t)*r|0)|n<<8))|n<<4))|n<<2))|n<<1))|(e=1431655765&((e=858993459&((e=252645135&((e=16711935&((e=(e-i)*r|0)|e<<8))|e<<4))|e<<2))|e<<1))<<1}function moe(n){let e=n,t=n;do{(e.x<t.x||e.x===t.x&&e.y<t.y)&&(t=e),e=e.next}while(e!==n);return t}function S2(n,e,t,i,r,s,o,a){return(r-o)*(e-a)>=(n-o)*(s-a)&&(n-o)*(i-a)>=(t-o)*(e-a)&&(t-o)*(s-a)>=(r-o)*(i-a)}function goe(n,e){return n.next.i!==e.i&&n.prev.i!==e.i&&!function voe(n,e){let t=n;do{if(t.i!==n.i&&t.next.i!==n.i&&t.i!==e.i&&t.next.i!==e.i&&DE(t,t.next,n,e))return!0;t=t.next}while(t!==n);return!1}(n,e)&&(i3(n,e)&&i3(e,n)&&function yoe(n,e){let t=n,i=!1;const r=(n.x+e.x)/2,s=(n.y+e.y)/2;do{t.y>s!=t.next.y>s&&t.next.y!==t.y&&r<(t.next.x-t.x)*(s-t.y)/(t.next.y-t.y)+t.x&&(i=!i),t=t.next}while(t!==n);return i}(n,e)&&(Qt(n.prev,n,e.prev)||Qt(n,e.prev,e))||Z0(n,e)&&Qt(n.prev,n,n.next)>0&&Qt(e.prev,e,e.next)>0)}function Qt(n,e,t){return(e.y-n.y)*(t.x-e.x)-(e.x-n.x)*(t.y-e.y)}function Z0(n,e){return n.x===e.x&&n.y===e.y}function DE(n,e,t,i){const r=Y0(Qt(n,e,t)),s=Y0(Qt(n,e,i)),o=Y0(Qt(t,i,n)),a=Y0(Qt(t,i,e));return!!(r!==s&&o!==a||0===r&&X0(n,t,e)||0===s&&X0(n,i,e)||0===o&&X0(t,n,i)||0===a&&X0(t,e,i))}function X0(n,e,t){return e.x<=Math.max(n.x,t.x)&&e.x>=Math.min(n.x,t.x)&&e.y<=Math.max(n.y,t.y)&&e.y>=Math.min(n.y,t.y)}function Y0(n){return n>0?1:n<0?-1:0}function i3(n,e){return Qt(n.prev,n,n.next)<0?Qt(n,e,n.next)>=0&&Qt(n,n.prev,e)>=0:Qt(n,e,n.prev)<0||Qt(n,n.next,e)<0}function AE(n,e){const t=new k7(n.i,n.x,n.y),i=new k7(e.i,e.x,e.y),r=n.next,s=e.prev;return n.next=e,e.prev=n,t.next=r,r.prev=t,i.next=t,t.prev=i,s.next=i,i.prev=s,i}function TE(n,e,t,i){const r=new k7(n,e,t);return i?(r.next=i.next,r.prev=i,i.next.prev=r,i.next=r):(r.prev=r,r.next=r),r}function r3(n){n.next.prev=n.prev,n.prev.next=n.next,n.prevZ&&(n.prevZ.nextZ=n.nextZ),n.nextZ&&(n.nextZ.prevZ=n.prevZ)}function k7(n,e,t){this.i=n,this.x=e,this.y=t,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}class Os{static area(e){const t=e.length;let i=0;for(let r=t-1,s=0;s<t;r=s++)i+=e[r].x*e[s].y-e[s].x*e[r].y;return.5*i}static isClockWise(e){return Os.area(e)<0}static triangulateShape(e,t){const i=[],r=[],s=[];IE(e),LE(i,e);let o=e.length;t.forEach(IE);for(let c=0;c<t.length;c++)r.push(o),o+=t[c].length,LE(i,t[c]);const a=function(n,e,t=2){const i=e&&e.length,r=i?e[0]*t:n.length;let s=EE(n,0,r,t,!0);const o=[];if(!s||s.next===s.prev)return o;let a,c,l,u,f,h,d;if(i&&(s=function coe(n,e,t,i){const r=[];let s,o,a,c,l;for(s=0,o=e.length;s<o;s++)a=e[s]*i,c=s<o-1?e[s+1]*i:n.length,l=EE(n,a,c,i,!1),l===l.next&&(l.steiner=!0),r.push(moe(l));for(r.sort(loe),s=0;s<r.length;s++)t=uoe(r[s],t);return t}(n,e,s,t)),n.length>80*t){a=l=n[0],c=u=n[1];for(let p=t;p<r;p+=t)f=n[p],h=n[p+1],f<a&&(a=f),h<c&&(c=h),f>l&&(l=f),h>u&&(u=h);d=Math.max(l-a,u-c),d=0!==d?32767/d:0}return n3(s,o,t,a,c,d,0),o}(i,r);for(let c=0;c<a.length;c+=3)s.push(a.slice(c,c+3));return s}}function IE(n){const e=n.length;e>2&&n[e-1].equals(n[0])&&n.pop()}function LE(n,e){for(let t=0;t<e.length;t++)n.push(e[t].x),n.push(e[t].y)}class K0 extends Ze{constructor(e=new Ia([new q(.5,.5),new q(-.5,.5),new q(-.5,-.5),new q(.5,-.5)]),t={}){super(),this.type="ExtrudeGeometry",this.parameters={shapes:e,options:t},e=Array.isArray(e)?e:[e];const i=this,r=[],s=[];for(let a=0,c=e.length;a<c;a++)o(e[a]);function o(a){const c=[],l=void 0!==t.curveSegments?t.curveSegments:12,u=void 0!==t.steps?t.steps:1,f=void 0!==t.depth?t.depth:1;let h=void 0===t.bevelEnabled||t.bevelEnabled,d=void 0!==t.bevelThickness?t.bevelThickness:.2,p=void 0!==t.bevelSize?t.bevelSize:d-.1,m=void 0!==t.bevelOffset?t.bevelOffset:0,g=void 0!==t.bevelSegments?t.bevelSegments:3;const v=t.extrudePath,x=void 0!==t.UVGenerator?t.UVGenerator:xoe;let y,M,w,D,b,_=!1;v&&(y=v.getSpacedPoints(u),_=!0,h=!1,M=v.computeFrenetFrames(u,!1),w=new C,D=new C,b=new C),h||(g=0,d=0,p=0,m=0);const E=a.extractPoints(l);let I=E.shape;const z=E.holes;if(!Os.isClockWise(I)){I=I.reverse();for(let J=0,Q=z.length;J<Q;J++){const ce=z[J];Os.isClockWise(ce)&&(z[J]=ce.reverse())}}const P=Os.triangulateShape(I,z),L=I;for(let J=0,Q=z.length;J<Q;J++)I=I.concat(z[J]);function F(J,Q,ce){return Q||console.error("THREE.ExtrudeGeometry: vec does not exist"),Q.clone().multiplyScalar(ce).add(J)}const H=I.length,X=P.length;function B(J,Q,ce){let De,me,et;const Ge=J.x-Q.x,Ue=J.y-Q.y,jt=ce.x-J.x,Rt=ce.y-J.y,T=Ge*Ge+Ue*Ue;if(Math.abs(Ge*Rt-Ue*jt)>Number.EPSILON){const G=Math.sqrt(T),oe=Math.sqrt(jt*jt+Rt*Rt),le=Q.x-Ue/G,ve=Q.y+Ge/G,K=((ce.x-Rt/oe-le)*Rt-(ce.y+jt/oe-ve)*jt)/(Ge*Rt-Ue*jt);De=le+Ge*K-J.x,me=ve+Ue*K-J.y;const Re=De*De+me*me;if(Re<=2)return new q(De,me);et=Math.sqrt(Re/2)}else{let G=!1;Ge>Number.EPSILON?jt>Number.EPSILON&&(G=!0):Ge<-Number.EPSILON?jt<-Number.EPSILON&&(G=!0):Math.sign(Ue)===Math.sign(Rt)&&(G=!0),G?(De=-Ue,me=Ge,et=Math.sqrt(T)):(De=Ge,me=Ue,et=Math.sqrt(T/2))}return new q(De/et,me/et)}const te=[];for(let J=0,Q=L.length,ce=Q-1,De=J+1;J<Q;J++,ce++,De++)ce===Q&&(ce=0),De===Q&&(De=0),te[J]=B(L[J],L[ce],L[De]);const Y=[];let k,V=te.concat();for(let J=0,Q=z.length;J<Q;J++){const ce=z[J];k=[];for(let De=0,me=ce.length,et=me-1,Ge=De+1;De<me;De++,et++,Ge++)et===me&&(et=0),Ge===me&&(Ge=0),k[De]=B(ce[De],ce[et],ce[Ge]);Y.push(k),V=V.concat(k)}for(let J=0;J<g;J++){const Q=J/g,ce=d*Math.cos(Q*Math.PI/2),De=p*Math.sin(Q*Math.PI/2)+m;for(let me=0,et=L.length;me<et;me++){const Ge=F(L[me],te[me],De);Oe(Ge.x,Ge.y,-ce)}for(let me=0,et=z.length;me<et;me++){const Ge=z[me];k=Y[me];for(let Ue=0,jt=Ge.length;Ue<jt;Ue++){const Rt=F(Ge[Ue],k[Ue],De);Oe(Rt.x,Rt.y,-ce)}}}const ie=p+m;for(let J=0;J<H;J++){const Q=h?F(I[J],V[J],ie):I[J];_?(D.copy(M.normals[0]).multiplyScalar(Q.x),w.copy(M.binormals[0]).multiplyScalar(Q.y),b.copy(y[0]).add(D).add(w),Oe(b.x,b.y,b.z)):Oe(Q.x,Q.y,0)}for(let J=1;J<=u;J++)for(let Q=0;Q<H;Q++){const ce=h?F(I[Q],V[Q],ie):I[Q];_?(D.copy(M.normals[J]).multiplyScalar(ce.x),w.copy(M.binormals[J]).multiplyScalar(ce.y),b.copy(y[J]).add(D).add(w),Oe(b.x,b.y,b.z)):Oe(ce.x,ce.y,f/u*J)}for(let J=g-1;J>=0;J--){const Q=J/g,ce=d*Math.cos(Q*Math.PI/2),De=p*Math.sin(Q*Math.PI/2)+m;for(let me=0,et=L.length;me<et;me++){const Ge=F(L[me],te[me],De);Oe(Ge.x,Ge.y,f+ce)}for(let me=0,et=z.length;me<et;me++){const Ge=z[me];k=Y[me];for(let Ue=0,jt=Ge.length;Ue<jt;Ue++){const Rt=F(Ge[Ue],k[Ue],De);_?Oe(Rt.x,Rt.y+y[u-1].y,y[u-1].x+ce):Oe(Rt.x,Rt.y,f+ce)}}}function W(J,Q){let ce=J.length;for(;--ce>=0;){const De=ce;let me=ce-1;me<0&&(me=J.length-1);for(let et=0,Ge=u+2*g;et<Ge;et++){const Ue=H*et,jt=H*(et+1);je(Q+De+Ue,Q+me+Ue,Q+me+jt,Q+De+jt)}}}function Oe(J,Q,ce){c.push(J),c.push(Q),c.push(ce)}function ye(J,Q,ce){pe(J),pe(Q),pe(ce);const De=r.length/3,me=x.generateTopUV(i,r,De-3,De-2,De-1);rt(me[0]),rt(me[1]),rt(me[2])}function je(J,Q,ce,De){pe(J),pe(Q),pe(De),pe(Q),pe(ce),pe(De);const me=r.length/3,et=x.generateSideWallUV(i,r,me-6,me-3,me-2,me-1);rt(et[0]),rt(et[1]),rt(et[3]),rt(et[1]),rt(et[2]),rt(et[3])}function pe(J){r.push(c[3*J+0]),r.push(c[3*J+1]),r.push(c[3*J+2])}function rt(J){s.push(J.x),s.push(J.y)}(function ne(){const J=r.length/3;if(h){let Q=0,ce=H*Q;for(let De=0;De<X;De++){const me=P[De];ye(me[2]+ce,me[1]+ce,me[0]+ce)}Q=u+2*g,ce=H*Q;for(let De=0;De<X;De++){const me=P[De];ye(me[0]+ce,me[1]+ce,me[2]+ce)}}else{for(let Q=0;Q<X;Q++){const ce=P[Q];ye(ce[2],ce[1],ce[0])}for(let Q=0;Q<X;Q++){const ce=P[Q];ye(ce[0]+H*u,ce[1]+H*u,ce[2]+H*u)}}i.addGroup(J,r.length/3-J,0)})(),function se(){const J=r.length/3;let Q=0;W(L,Q),Q+=L.length;for(let ce=0,De=z.length;ce<De;ce++){const me=z[ce];W(me,Q),Q+=me.length}i.addGroup(J,r.length/3-J,1)}()}this.setAttribute("position",new Me(r,3)),this.setAttribute("uv",new Me(s,2)),this.computeVertexNormals()}toJSON(){const e=super.toJSON();return function boe(n,e,t){if(t.shapes=[],Array.isArray(n))for(let i=0,r=n.length;i<r;i++)t.shapes.push(n[i].uuid);else t.shapes.push(n.uuid);return t.options=Object.assign({},e),void 0!==e.extrudePath&&(t.options.extrudePath=e.extrudePath.toJSON()),t}(this.parameters.shapes,this.parameters.options,e)}static fromJSON(e,t){const i=[];for(let s=0,o=e.shapes.length;s<o;s++)i.push(t[e.shapes[s]]);const r=e.options.extrudePath;return void 0!==r&&(e.options.extrudePath=(new L7[r.type]).fromJSON(r)),new K0(i,e.options)}}const xoe={generateTopUV:function(n,e,t,i,r){const a=e[3*i],c=e[3*i+1],l=e[3*r],u=e[3*r+1];return[new q(e[3*t],e[3*t+1]),new q(a,c),new q(l,u)]},generateSideWallUV:function(n,e,t,i,r,s){const o=e[3*t],a=e[3*t+1],c=e[3*t+2],l=e[3*i],u=e[3*i+1],f=e[3*i+2],h=e[3*r],d=e[3*r+1],p=e[3*r+2],m=e[3*s],g=e[3*s+1],v=e[3*s+2];return Math.abs(a-u)<Math.abs(o-l)?[new q(o,1-c),new q(l,1-f),new q(h,1-p),new q(m,1-v)]:[new q(a,1-c),new q(u,1-f),new q(d,1-p),new q(g,1-v)]}};class ef extends Ze{constructor(e=new CE(new C(-1,-1,0),new C(-1,1,0),new C(1,1,0)),t=64,i=1,r=8,s=!1){super(),this.type="TubeGeometry",this.parameters={path:e,tubularSegments:t,radius:i,radialSegments:r,closed:s};const o=e.computeFrenetFrames(t,s);this.tangents=o.tangents,this.normals=o.normals,this.binormals=o.binormals;const a=new C,c=new C,l=new q;let u=new C;const f=[],h=[],d=[],p=[];function g(y){u=e.getPointAt(y/t,u);const _=o.normals[y],M=o.binormals[y];for(let w=0;w<=r;w++){const D=w/r*Math.PI*2,b=Math.sin(D),E=-Math.cos(D);c.x=E*_.x+b*M.x,c.y=E*_.y+b*M.y,c.z=E*_.z+b*M.z,c.normalize(),h.push(c.x,c.y,c.z),a.x=u.x+i*c.x,a.y=u.y+i*c.y,a.z=u.z+i*c.z,f.push(a.x,a.y,a.z)}}(function m(){for(let y=0;y<t;y++)g(y);g(!1===s?t:0),function x(){for(let y=0;y<=t;y++)for(let _=0;_<=r;_++)l.x=y/t,l.y=_/r,d.push(l.x,l.y)}(),function v(){for(let y=1;y<=t;y++)for(let _=1;_<=r;_++){const w=(r+1)*y+(_-1),D=(r+1)*y+_,b=(r+1)*(y-1)+_;p.push((r+1)*(y-1)+(_-1),w,b),p.push(w,D,b)}}()})(),this.setIndex(p),this.setAttribute("position",new Me(f,3)),this.setAttribute("normal",new Me(h,3)),this.setAttribute("uv",new Me(d,2))}toJSON(){const e=super.toJSON();return e.path=this.parameters.path.toJSON(),e}static fromJSON(e){return new ef((new L7[e.path.type]).fromJSON(e.path),e.tubularSegments,e.radius,e.radialSegments,e.closed)}}class tf extends Bi{constructor(e){super(),this.isMeshStandardMaterial=!0,this.defines={STANDARD:""},this.type="MeshStandardMaterial",this.color=new ae(16777215),this.roughness=1,this.metalness=0,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new ae(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=0,this.normalScale=new q(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.roughnessMap=null,this.metalnessMap=null,this.alphaMap=null,this.envMap=null,this.envMapIntensity=1,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.defines={STANDARD:""},this.color.copy(e.color),this.roughness=e.roughness,this.metalness=e.metalness,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.roughnessMap=e.roughnessMap,this.metalnessMap=e.metalnessMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapIntensity=e.envMapIntensity,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class Co extends tf{constructor(e){super(),this.isMeshPhysicalMaterial=!0,this.defines={STANDARD:"",PHYSICAL:""},this.type="MeshPhysicalMaterial",this.clearcoatMap=null,this.clearcoatRoughness=0,this.clearcoatRoughnessMap=null,this.clearcoatNormalScale=new q(1,1),this.clearcoatNormalMap=null,this.ior=1.5,Object.defineProperty(this,"reflectivity",{get:function(){return dn(2.5*(this.ior-1)/(this.ior+1),0,1)},set:function(t){this.ior=(1+.4*t)/(1-.4*t)}}),this.iridescenceMap=null,this.iridescenceIOR=1.3,this.iridescenceThicknessRange=[100,400],this.iridescenceThicknessMap=null,this.sheenColor=new ae(0),this.sheenColorMap=null,this.sheenRoughness=1,this.sheenRoughnessMap=null,this.transmissionMap=null,this.thickness=0,this.thicknessMap=null,this.attenuationDistance=1/0,this.attenuationColor=new ae(1,1,1),this.specularIntensity=1,this.specularIntensityMap=null,this.specularColor=new ae(1,1,1),this.specularColorMap=null,this._sheen=0,this._clearcoat=0,this._iridescence=0,this._transmission=0,this.setValues(e)}get sheen(){return this._sheen}set sheen(e){this._sheen>0!=e>0&&this.version++,this._sheen=e}get clearcoat(){return this._clearcoat}set clearcoat(e){this._clearcoat>0!=e>0&&this.version++,this._clearcoat=e}get iridescence(){return this._iridescence}set iridescence(e){this._iridescence>0!=e>0&&this.version++,this._iridescence=e}get transmission(){return this._transmission}set transmission(e){this._transmission>0!=e>0&&this.version++,this._transmission=e}copy(e){return super.copy(e),this.defines={STANDARD:"",PHYSICAL:""},this.clearcoat=e.clearcoat,this.clearcoatMap=e.clearcoatMap,this.clearcoatRoughness=e.clearcoatRoughness,this.clearcoatRoughnessMap=e.clearcoatRoughnessMap,this.clearcoatNormalMap=e.clearcoatNormalMap,this.clearcoatNormalScale.copy(e.clearcoatNormalScale),this.ior=e.ior,this.iridescence=e.iridescence,this.iridescenceMap=e.iridescenceMap,this.iridescenceIOR=e.iridescenceIOR,this.iridescenceThicknessRange=[...e.iridescenceThicknessRange],this.iridescenceThicknessMap=e.iridescenceThicknessMap,this.sheen=e.sheen,this.sheenColor.copy(e.sheenColor),this.sheenColorMap=e.sheenColorMap,this.sheenRoughness=e.sheenRoughness,this.sheenRoughnessMap=e.sheenRoughnessMap,this.transmission=e.transmission,this.transmissionMap=e.transmissionMap,this.thickness=e.thickness,this.thicknessMap=e.thicknessMap,this.attenuationDistance=e.attenuationDistance,this.attenuationColor.copy(e.attenuationColor),this.specularIntensity=e.specularIntensity,this.specularIntensityMap=e.specularIntensityMap,this.specularColor.copy(e.specularColor),this.specularColorMap=e.specularColorMap,this}}class s3 extends Bi{constructor(e){super(),this.isMeshPhongMaterial=!0,this.type="MeshPhongMaterial",this.color=new ae(16777215),this.specular=new ae(1118481),this.shininess=30,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new ae(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=0,this.normalScale=new q(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=0,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.specular.copy(e.specular),this.shininess=e.shininess,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class zE extends Bi{constructor(e){super(),this.isMeshLambertMaterial=!0,this.type="MeshLambertMaterial",this.color=new ae(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new ae(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=0,this.normalScale=new q(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=0,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}function or(n,e,t){return j7(n)?new n.constructor(n.subarray(e,void 0!==t?t:n.length)):n.slice(e,t)}function Ra(n,e,t){return!n||!t&&n.constructor===e?n:"number"==typeof e.BYTES_PER_ELEMENT?new e(n):Array.prototype.slice.call(n)}function j7(n){return ArrayBuffer.isView(n)&&!(n instanceof DataView)}function NE(n){const t=n.length,i=new Array(t);for(let r=0;r!==t;++r)i[r]=r;return i.sort(function e(r,s){return n[r]-n[s]}),i}function $7(n,e,t){const i=n.length,r=new n.constructor(i);for(let s=0,o=0;o!==i;++s){const a=t[s]*e;for(let c=0;c!==e;++c)r[o++]=n[a+c]}return r}function q7(n,e,t,i){let r=1,s=n[0];for(;void 0!==s&&void 0===s[i];)s=n[r++];if(void 0===s)return;let o=s[i];if(void 0!==o)if(Array.isArray(o))do{o=s[i],void 0!==o&&(e.push(s.time),t.push.apply(t,o)),s=n[r++]}while(void 0!==s);else if(void 0!==o.toArray)do{o=s[i],void 0!==o&&(e.push(s.time),o.toArray(t,t.length)),s=n[r++]}while(void 0!==s);else do{o=s[i],void 0!==o&&(e.push(s.time),t.push(o)),s=n[r++]}while(void 0!==s)}class o3{constructor(e,t,i,r){this.parameterPositions=e,this._cachedIndex=0,this.resultBuffer=void 0!==r?r:new t.constructor(i),this.sampleValues=t,this.valueSize=i,this.settings=null,this.DefaultSettings_={}}evaluate(e){const t=this.parameterPositions;let i=this._cachedIndex,r=t[i],s=t[i-1];e:{t:{let o;n:{i:if(!(e<r)){for(let a=i+2;;){if(void 0===r){if(e<s)break i;return i=t.length,this._cachedIndex=i,this.copySampleValue_(i-1)}if(i===a)break;if(s=r,r=t[++i],e<r)break t}o=t.length;break n}if(e>=s)break e;{const a=t[1];e<a&&(i=2,s=a);for(let c=i-2;;){if(void 0===s)return this._cachedIndex=0,this.copySampleValue_(0);if(i===c)break;if(r=s,s=t[--i-1],e>=s)break t}o=i,i=0}}for(;i<o;){const a=i+o>>>1;e<t[a]?o=a:i=a+1}if(r=t[i],s=t[i-1],void 0===s)return this._cachedIndex=0,this.copySampleValue_(0);if(void 0===r)return i=t.length,this._cachedIndex=i,this.copySampleValue_(i-1)}this._cachedIndex=i,this.intervalChanged_(i,s,r)}return this.interpolate_(i,s,e,r)}getSettings_(){return this.settings||this.DefaultSettings_}copySampleValue_(e){const t=this.resultBuffer,i=this.sampleValues,r=this.valueSize,s=e*r;for(let o=0;o!==r;++o)t[o]=i[s+o];return t}interpolate_(){throw new Error("call to abstract method")}intervalChanged_(){}}class Roe extends o3{constructor(e,t,i,r){super(e,t,i,r),this._weightPrev=-0,this._offsetPrev=-0,this._weightNext=-0,this._offsetNext=-0,this.DefaultSettings_={endingStart:K1,endingEnd:K1}}intervalChanged_(e,t,i){const r=this.parameterPositions;let s=e-2,o=e+1,a=r[s],c=r[o];if(void 0===a)switch(this.getSettings_().endingStart){case J1:s=e,a=2*t-i;break;case 2402:s=r.length-2,a=t+r[s]-r[s+1];break;default:s=e,a=i}if(void 0===c)switch(this.getSettings_().endingEnd){case J1:o=e,c=2*i-t;break;case 2402:o=1,c=i+r[1]-r[0];break;default:o=e-1,c=t}const l=.5*(i-t),u=this.valueSize;this._weightPrev=l/(t-a),this._weightNext=l/(c-i),this._offsetPrev=s*u,this._offsetNext=o*u}interpolate_(e,t,i,r){const s=this.resultBuffer,o=this.sampleValues,a=this.valueSize,c=e*a,l=c-a,u=this._offsetPrev,f=this._offsetNext,h=this._weightPrev,d=this._weightNext,p=(i-t)/(r-t),m=p*p,g=m*p,v=-h*g+2*h*m-h*p,x=(1+h)*g+(-1.5-2*h)*m+(-.5+h)*p+1,y=(-1-d)*g+(1.5+d)*m+.5*p,_=d*g-d*m;for(let M=0;M!==a;++M)s[M]=v*o[u+M]+x*o[l+M]+y*o[c+M]+_*o[f+M];return s}}class FE extends o3{constructor(e,t,i,r){super(e,t,i,r)}interpolate_(e,t,i,r){const s=this.resultBuffer,o=this.sampleValues,a=this.valueSize,c=e*a,l=c-a,u=(i-t)/(r-t),f=1-u;for(let h=0;h!==a;++h)s[h]=o[l+h]*f+o[c+h]*u;return s}}class Poe extends o3{constructor(e,t,i,r){super(e,t,i,r)}interpolate_(e){return this.copySampleValue_(e-1)}}class Qr{constructor(e,t,i,r){if(void 0===e)throw new Error("THREE.KeyframeTrack: track name is undefined");if(void 0===t||0===t.length)throw new Error("THREE.KeyframeTrack: no keyframes in track named "+e);this.name=e,this.times=Ra(t,this.TimeBufferType),this.values=Ra(i,this.ValueBufferType),this.setInterpolation(r||this.DefaultInterpolation)}static toJSON(e){const t=e.constructor;let i;if(t.toJSON!==this.toJSON)i=t.toJSON(e);else{i={name:e.name,times:Ra(e.times,Array),values:Ra(e.values,Array)};const r=e.getInterpolation();r!==e.DefaultInterpolation&&(i.interpolation=r)}return i.type=e.ValueTypeName,i}InterpolantFactoryMethodDiscrete(e){return new Poe(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodLinear(e){return new FE(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodSmooth(e){return new Roe(this.times,this.values,this.getValueSize(),e)}setInterpolation(e){let t;switch(e){case Nl:t=this.InterpolantFactoryMethodDiscrete;break;case Y1:t=this.InterpolantFactoryMethodLinear;break;case 2302:t=this.InterpolantFactoryMethodSmooth}if(void 0===t){const i="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name;if(void 0===this.createInterpolant){if(e===this.DefaultInterpolation)throw new Error(i);this.setInterpolation(this.DefaultInterpolation)}return console.warn("THREE.KeyframeTrack:",i),this}return this.createInterpolant=t,this}getInterpolation(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return Nl;case this.InterpolantFactoryMethodLinear:return Y1;case this.InterpolantFactoryMethodSmooth:return 2302}}getValueSize(){return this.values.length/this.times.length}shift(e){if(0!==e){const t=this.times;for(let i=0,r=t.length;i!==r;++i)t[i]+=e}return this}scale(e){if(1!==e){const t=this.times;for(let i=0,r=t.length;i!==r;++i)t[i]*=e}return this}trim(e,t){const i=this.times,r=i.length;let s=0,o=r-1;for(;s!==r&&i[s]<e;)++s;for(;-1!==o&&i[o]>t;)--o;if(++o,0!==s||o!==r){s>=o&&(o=Math.max(o,1),s=o-1);const a=this.getValueSize();this.times=or(i,s,o),this.values=or(this.values,s*a,o*a)}return this}validate(){let e=!0;const t=this.getValueSize();t-Math.floor(t)!=0&&(console.error("THREE.KeyframeTrack: Invalid value size in track.",this),e=!1);const i=this.times,r=this.values,s=i.length;0===s&&(console.error("THREE.KeyframeTrack: Track is empty.",this),e=!1);let o=null;for(let a=0;a!==s;a++){const c=i[a];if("number"==typeof c&&isNaN(c)){console.error("THREE.KeyframeTrack: Time is not a valid number.",this,a,c),e=!1;break}if(null!==o&&o>c){console.error("THREE.KeyframeTrack: Out of order keys.",this,a,c,o),e=!1;break}o=c}if(void 0!==r&&j7(r))for(let a=0,c=r.length;a!==c;++a){const l=r[a];if(isNaN(l)){console.error("THREE.KeyframeTrack: Value is not a valid number.",this,a,l),e=!1;break}}return e}optimize(){const e=or(this.times),t=or(this.values),i=this.getValueSize(),r=2302===this.getInterpolation(),s=e.length-1;let o=1;for(let a=1;a<s;++a){let c=!1;const l=e[a];if(l!==e[a+1]&&(1!==a||l!==e[0]))if(r)c=!0;else{const f=a*i,h=f-i,d=f+i;for(let p=0;p!==i;++p){const m=t[f+p];if(m!==t[h+p]||m!==t[d+p]){c=!0;break}}}if(c){if(a!==o){e[o]=e[a];const f=a*i,h=o*i;for(let d=0;d!==i;++d)t[h+d]=t[f+d]}++o}}if(s>0){e[o]=e[s];for(let a=s*i,c=o*i,l=0;l!==i;++l)t[c+l]=t[a+l];++o}return o!==e.length?(this.times=or(e,0,o),this.values=or(t,0,o*i)):(this.times=e,this.values=t),this}clone(){const e=or(this.times,0),t=or(this.values,0),r=new(0,this.constructor)(this.name,e,t);return r.createInterpolant=this.createInterpolant,r}}Qr.prototype.TimeBufferType=Float32Array,Qr.prototype.ValueBufferType=Float32Array,Qr.prototype.DefaultInterpolation=Y1;class E2 extends Qr{}E2.prototype.ValueTypeName="bool",E2.prototype.ValueBufferType=Array,E2.prototype.DefaultInterpolation=Nl,E2.prototype.InterpolantFactoryMethodLinear=void 0,E2.prototype.InterpolantFactoryMethodSmooth=void 0;class OE extends Qr{}OE.prototype.ValueTypeName="color";class D2 extends Qr{}D2.prototype.ValueTypeName="number";class zoe extends o3{constructor(e,t,i,r){super(e,t,i,r)}interpolate_(e,t,i,r){const s=this.resultBuffer,o=this.sampleValues,a=this.valueSize,c=(i-t)/(r-t);let l=e*a;for(let u=l+a;l!==u;l+=4)Mn.slerpFlat(s,0,o,l-a,o,l,c);return s}}class So extends Qr{InterpolantFactoryMethodLinear(e){return new zoe(this.times,this.values,this.getValueSize(),e)}}So.prototype.ValueTypeName="quaternion",So.prototype.DefaultInterpolation=Y1,So.prototype.InterpolantFactoryMethodSmooth=void 0;class A2 extends Qr{}A2.prototype.ValueTypeName="string",A2.prototype.ValueBufferType=Array,A2.prototype.DefaultInterpolation=Nl,A2.prototype.InterpolantFactoryMethodLinear=void 0,A2.prototype.InterpolantFactoryMethodSmooth=void 0;class T2 extends Qr{}T2.prototype.ValueTypeName="vector";class I2{constructor(e,t=-1,i,r=2500){this.name=e,this.tracks=i,this.duration=t,this.blendMode=r,this.uuid=Vi(),this.duration<0&&this.resetDuration()}static parse(e){const t=[],i=e.tracks,r=1/(e.fps||1);for(let o=0,a=i.length;o!==a;++o)t.push(Foe(i[o]).scale(r));const s=new this(e.name,e.duration,t,e.blendMode);return s.uuid=e.uuid,s}static toJSON(e){const t=[],i=e.tracks,r={name:e.name,duration:e.duration,tracks:t,uuid:e.uuid,blendMode:e.blendMode};for(let s=0,o=i.length;s!==o;++s)t.push(Qr.toJSON(i[s]));return r}static CreateFromMorphTargetSequence(e,t,i,r){const s=t.length,o=[];for(let a=0;a<s;a++){let c=[],l=[];c.push((a+s-1)%s,a,(a+1)%s),l.push(0,1,0);const u=NE(c);c=$7(c,1,u),l=$7(l,1,u),!r&&0===c[0]&&(c.push(s),l.push(l[0])),o.push(new D2(".morphTargetInfluences["+t[a].name+"]",c,l).scale(1/i))}return new this(e,-1,o)}static findByName(e,t){let i=e;if(!Array.isArray(e)){const r=e;i=r.geometry&&r.geometry.animations||r.animations}for(let r=0;r<i.length;r++)if(i[r].name===t)return i[r];return null}static CreateClipsFromMorphTargetSequences(e,t,i){const r={},s=/^([\w-]*?)([\d]+)$/;for(let a=0,c=e.length;a<c;a++){const l=e[a],u=l.name.match(s);if(u&&u.length>1){const f=u[1];let h=r[f];h||(r[f]=h=[]),h.push(l)}}const o=[];for(const a in r)o.push(this.CreateFromMorphTargetSequence(a,r[a],t,i));return o}static parseAnimation(e,t){if(!e)return console.error("THREE.AnimationClip: No animation in JSONLoader data."),null;const i=function(f,h,d,p,m){if(0!==d.length){const g=[],v=[];q7(d,g,v,p),0!==g.length&&m.push(new f(h,g,v))}},r=[],s=e.name||"default",o=e.fps||30,a=e.blendMode;let c=e.length||-1;const l=e.hierarchy||[];for(let f=0;f<l.length;f++){const h=l[f].keys;if(h&&0!==h.length)if(h[0].morphTargets){const d={};let p;for(p=0;p<h.length;p++)if(h[p].morphTargets)for(let m=0;m<h[p].morphTargets.length;m++)d[h[p].morphTargets[m]]=-1;for(const m in d){const g=[],v=[];for(let x=0;x!==h[p].morphTargets.length;++x){const y=h[p];g.push(y.time),v.push(y.morphTarget===m?1:0)}r.push(new D2(".morphTargetInfluence["+m+"]",g,v))}c=d.length*o}else{const d=".bones["+t[f].name+"]";i(T2,d+".position",h,"pos",r),i(So,d+".quaternion",h,"rot",r),i(T2,d+".scale",h,"scl",r)}}return 0===r.length?null:new this(s,c,r,a)}resetDuration(){let t=0;for(let i=0,r=this.tracks.length;i!==r;++i){const s=this.tracks[i];t=Math.max(t,s.times[s.times.length-1])}return this.duration=t,this}trim(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].trim(0,this.duration);return this}validate(){let e=!0;for(let t=0;t<this.tracks.length;t++)e=e&&this.tracks[t].validate();return e}optimize(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].optimize();return this}clone(){const e=[];for(let t=0;t<this.tracks.length;t++)e.push(this.tracks[t].clone());return new this.constructor(this.name,this.duration,e,this.blendMode)}toJSON(){return this.constructor.toJSON(this)}}function Foe(n){if(void 0===n.type)throw new Error("THREE.KeyframeTrack: track type undefined, can not parse");const e=function Noe(n){switch(n.toLowerCase()){case"scalar":case"double":case"float":case"number":case"integer":return D2;case"vector":case"vector2":case"vector3":case"vector4":return T2;case"color":return OE;case"quaternion":return So;case"bool":case"boolean":return E2;case"string":return A2}throw new Error("THREE.KeyframeTrack: Unsupported typeName: "+n)}(n.type);if(void 0===n.times){const t=[],i=[];q7(n.keys,t,i,"value"),n.times=t,n.values=i}return void 0!==e.parse?e.parse(n):new e(n.name,n.times,n.values,n.interpolation)}const L2={enabled:!1,files:{},add:function(n,e){!1!==this.enabled&&(this.files[n]=e)},get:function(n){if(!1!==this.enabled)return this.files[n]},remove:function(n){delete this.files[n]},clear:function(){this.files={}}};class kE{constructor(e,t,i){const r=this;let c,s=!1,o=0,a=0;const l=[];this.onStart=void 0,this.onLoad=e,this.onProgress=t,this.onError=i,this.itemStart=function(u){a++,!1===s&&void 0!==r.onStart&&r.onStart(u,o,a),s=!0},this.itemEnd=function(u){o++,void 0!==r.onProgress&&r.onProgress(u,o,a),o===a&&(s=!1,void 0!==r.onLoad&&r.onLoad())},this.itemError=function(u){void 0!==r.onError&&r.onError(u)},this.resolveURL=function(u){return c?c(u):u},this.setURLModifier=function(u){return c=u,this},this.addHandler=function(u,f){return l.push(u,f),this},this.removeHandler=function(u){const f=l.indexOf(u);return-1!==f&&l.splice(f,2),this},this.getHandler=function(u){for(let f=0,h=l.length;f<h;f+=2){const d=l[f],p=l[f+1];if(d.global&&(d.lastIndex=0),d.test(u))return p}return null}}}const Ooe=new kE;class R2{constructor(e){this.manager=void 0!==e?e:Ooe,this.crossOrigin="anonymous",this.withCredentials=!1,this.path="",this.resourcePath="",this.requestHeader={}}load(){}loadAsync(e,t){const i=this;return new Promise(function(r,s){i.load(e,r,t,s)})}parse(){}setCrossOrigin(e){return this.crossOrigin=e,this}setWithCredentials(e){return this.withCredentials=e,this}setPath(e){return this.path=e,this}setResourcePath(e){return this.resourcePath=e,this}setRequestHeader(e){return this.requestHeader=e,this}}const ks={};class koe extends Error{constructor(e,t){super(e),this.response=t}}class Nr extends R2{constructor(e){super(e)}load(e,t,i,r){void 0===e&&(e=""),void 0!==this.path&&(e=this.path+e),e=this.manager.resolveURL(e);const s=L2.get(e);if(void 0!==s)return this.manager.itemStart(e),setTimeout(()=>{t&&t(s),this.manager.itemEnd(e)},0),s;if(void 0!==ks[e])return void ks[e].push({onLoad:t,onProgress:i,onError:r});ks[e]=[],ks[e].push({onLoad:t,onProgress:i,onError:r});const o=new Request(e,{headers:new Headers(this.requestHeader),credentials:this.withCredentials?"include":"same-origin"}),a=this.mimeType,c=this.responseType;fetch(o).then(l=>{if(200===l.status||0===l.status){if(0===l.status&&console.warn("THREE.FileLoader: HTTP Status 0 received."),typeof ReadableStream>"u"||void 0===l.body||void 0===l.body.getReader)return l;const u=ks[e],f=l.body.getReader(),h=l.headers.get("Content-Length")||l.headers.get("X-File-Size"),d=h?parseInt(h):0,p=0!==d;let m=0;const g=new ReadableStream({start(v){!function x(){f.read().then(({done:y,value:_})=>{if(y)v.close();else{m+=_.byteLength;const M=new ProgressEvent("progress",{lengthComputable:p,loaded:m,total:d});for(let w=0,D=u.length;w<D;w++){const b=u[w];b.onProgress&&b.onProgress(M)}v.enqueue(_),x()}})}()}});return new Response(g)}throw new koe(`fetch for "${l.url}" responded with ${l.status}: ${l.statusText}`,l)}).then(l=>{switch(c){case"arraybuffer":return l.arrayBuffer();case"blob":return l.blob();case"document":return l.text().then(u=>(new DOMParser).parseFromString(u,a));case"json":return l.json();default:if(void 0===a)return l.text();{const f=/charset="?([^;"\s]*)"?/i.exec(a),h=f&&f[1]?f[1].toLowerCase():void 0,d=new TextDecoder(h);return l.arrayBuffer().then(p=>d.decode(p))}}}).then(l=>{L2.add(e,l);const u=ks[e];delete ks[e];for(let f=0,h=u.length;f<h;f++){const d=u[f];d.onLoad&&d.onLoad(l)}}).catch(l=>{const u=ks[e];if(void 0===u)throw this.manager.itemError(e),l;delete ks[e];for(let f=0,h=u.length;f<h;f++){const d=u[f];d.onError&&d.onError(l)}this.manager.itemError(e)}).finally(()=>{this.manager.itemEnd(e)}),this.manager.itemStart(e)}setResponseType(e){return this.responseType=e,this}setMimeType(e){return this.mimeType=e,this}}class nf extends R2{constructor(e){super(e)}load(e,t,i,r){void 0!==this.path&&(e=this.path+e),e=this.manager.resolveURL(e);const s=this,o=L2.get(e);if(void 0!==o)return s.manager.itemStart(e),setTimeout(function(){t&&t(o),s.manager.itemEnd(e)},0),o;const a=Vl("img");function c(){u(),L2.add(e,this),t&&t(this),s.manager.itemEnd(e)}function l(f){u(),r&&r(f),s.manager.itemError(e),s.manager.itemEnd(e)}function u(){a.removeEventListener("load",c,!1),a.removeEventListener("error",l,!1)}return a.addEventListener("load",c,!1),a.addEventListener("error",l,!1),"data:"!==e.slice(0,5)&&void 0!==this.crossOrigin&&(a.crossOrigin=this.crossOrigin),s.manager.itemStart(e),a.src=e,a}}class Z7 extends R2{constructor(e){super(e)}load(e,t,i,r){const s=new Hi,o=new nf(this.manager);return o.setCrossOrigin(this.crossOrigin),o.setPath(this.path),o.load(e,function(a){s.image=a,s.needsUpdate=!0,void 0!==t&&t(s)},i,r),s}}class rf extends pn{constructor(e,t=1){super(),this.isLight=!0,this.type="Light",this.color=new ae(e),this.intensity=t}dispose(){}copy(e,t){return super.copy(e,t),this.color.copy(e.color),this.intensity=e.intensity,this}toJSON(e){const t=super.toJSON(e);return t.object.color=this.color.getHex(),t.object.intensity=this.intensity,void 0!==this.groundColor&&(t.object.groundColor=this.groundColor.getHex()),void 0!==this.distance&&(t.object.distance=this.distance),void 0!==this.angle&&(t.object.angle=this.angle),void 0!==this.decay&&(t.object.decay=this.decay),void 0!==this.penumbra&&(t.object.penumbra=this.penumbra),void 0!==this.shadow&&(t.object.shadow=this.shadow.toJSON()),t}}const X7=new Ce,VE=new C,HE=new C;class Y7{constructor(e){this.camera=e,this.bias=0,this.normalBias=0,this.radius=1,this.blurSamples=8,this.mapSize=new q(512,512),this.map=null,this.mapPass=null,this.matrix=new Ce,this.autoUpdate=!0,this.needsUpdate=!1,this._frustum=new f7,this._frameExtents=new q(1,1),this._viewportCount=1,this._viewports=[new ft(0,0,1,1)]}getViewportCount(){return this._viewportCount}getFrustum(){return this._frustum}updateMatrices(e){const t=this.camera,i=this.matrix;VE.setFromMatrixPosition(e.matrixWorld),t.position.copy(VE),HE.setFromMatrixPosition(e.target.matrixWorld),t.lookAt(HE),t.updateMatrixWorld(),X7.multiplyMatrices(t.projectionMatrix,t.matrixWorldInverse),this._frustum.setFromProjectionMatrix(X7),i.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),i.multiply(X7)}getViewport(e){return this._viewports[e]}getFrameExtents(){return this._frameExtents}dispose(){this.map&&this.map.dispose(),this.mapPass&&this.mapPass.dispose()}copy(e){return this.camera=e.camera.clone(),this.bias=e.bias,this.radius=e.radius,this.mapSize.copy(e.mapSize),this}clone(){return(new this.constructor).copy(this)}toJSON(){const e={};return 0!==this.bias&&(e.bias=this.bias),0!==this.normalBias&&(e.normalBias=this.normalBias),1!==this.radius&&(e.radius=this.radius),(512!==this.mapSize.x||512!==this.mapSize.y)&&(e.mapSize=this.mapSize.toArray()),e.camera=this.camera.toJSON(!1).object,delete e.camera.matrix,e}}class Hoe extends Y7{constructor(){super(new Pn(50,1,.5,500)),this.isSpotLightShadow=!0,this.focus=1}updateMatrices(e){const t=this.camera,i=2*Ol*e.angle*this.focus,r=this.mapSize.width/this.mapSize.height,s=e.distance||t.far;(i!==t.fov||r!==t.aspect||s!==t.far)&&(t.fov=i,t.aspect=r,t.far=s,t.updateProjectionMatrix()),super.updateMatrices(e)}copy(e){return super.copy(e),this.focus=e.focus,this}}class K7 extends rf{constructor(e,t,i=0,r=Math.PI/3,s=0,o=2){super(e,t),this.isSpotLight=!0,this.type="SpotLight",this.position.copy(pn.DefaultUp),this.updateMatrix(),this.target=new pn,this.distance=i,this.angle=r,this.penumbra=s,this.decay=o,this.map=null,this.shadow=new Hoe}get power(){return this.intensity*Math.PI}set power(e){this.intensity=e/Math.PI}dispose(){this.shadow.dispose()}copy(e,t){return super.copy(e,t),this.distance=e.distance,this.angle=e.angle,this.penumbra=e.penumbra,this.decay=e.decay,this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}const UE=new Ce,a3=new C,J7=new C;class Uoe extends Y7{constructor(){super(new Pn(90,1,.5,500)),this.isPointLightShadow=!0,this._frameExtents=new q(4,2),this._viewportCount=6,this._viewports=[new ft(2,1,1,1),new ft(0,1,1,1),new ft(3,1,1,1),new ft(1,1,1,1),new ft(3,0,1,1),new ft(1,0,1,1)],this._cubeDirections=[new C(1,0,0),new C(-1,0,0),new C(0,0,1),new C(0,0,-1),new C(0,1,0),new C(0,-1,0)],this._cubeUps=[new C(0,1,0),new C(0,1,0),new C(0,1,0),new C(0,1,0),new C(0,0,1),new C(0,0,-1)]}updateMatrices(e,t=0){const i=this.camera,r=this.matrix,s=e.distance||i.far;s!==i.far&&(i.far=s,i.updateProjectionMatrix()),a3.setFromMatrixPosition(e.matrixWorld),i.position.copy(a3),J7.copy(i.position),J7.add(this._cubeDirections[t]),i.up.copy(this._cubeUps[t]),i.lookAt(J7),i.updateMatrixWorld(),r.makeTranslation(-a3.x,-a3.y,-a3.z),UE.multiplyMatrices(i.projectionMatrix,i.matrixWorldInverse),this._frustum.setFromProjectionMatrix(UE)}}class sf extends rf{constructor(e,t,i=0,r=2){super(e,t),this.isPointLight=!0,this.type="PointLight",this.distance=i,this.decay=r,this.shadow=new Uoe}get power(){return 4*this.intensity*Math.PI}set power(e){this.intensity=e/(4*Math.PI)}dispose(){this.shadow.dispose()}copy(e,t){return super.copy(e,t),this.distance=e.distance,this.decay=e.decay,this.shadow=e.shadow.clone(),this}}class Boe extends Y7{constructor(){super(new Wl(-5,5,5,-5,.5,500)),this.isDirectionalLightShadow=!0}}class af extends rf{constructor(e,t){super(e,t),this.isDirectionalLight=!0,this.type="DirectionalLight",this.position.copy(pn.DefaultUp),this.updateMatrix(),this.target=new pn,this.shadow=new Boe}dispose(){this.shadow.dispose()}copy(e){return super.copy(e),this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}class Q7 extends rf{constructor(e,t){super(e,t),this.isAmbientLight=!0,this.type="AmbientLight"}}class ar{static decodeText(e){if(typeof TextDecoder<"u")return(new TextDecoder).decode(e);let t="";for(let i=0,r=e.length;i<r;i++)t+=String.fromCharCode(e[i]);try{return decodeURIComponent(escape(t))}catch{return t}}static extractUrlBase(e){const t=e.lastIndexOf("/");return-1===t?"./":e.slice(0,t+1)}static resolveURL(e,t){return"string"!=typeof e||""===e?"":(/^https?:\/\//i.test(t)&&/^\//.test(e)&&(t=t.replace(/(^https?:\/\/[^\/]+).*/i,"$1")),/^(https?:)?\/\//i.test(e)||/^data:.*,.*$/i.test(e)||/^blob:.*$/i.test(e)?e:t+e)}}class BE extends Ze{constructor(){super(),this.isInstancedBufferGeometry=!0,this.type="InstancedBufferGeometry",this.instanceCount=1/0}copy(e){return super.copy(e),this.instanceCount=e.instanceCount,this}toJSON(){const e=super.toJSON();return e.instanceCount=this.instanceCount,e.isInstancedBufferGeometry=!0,e}}class Zoe extends R2{constructor(e){super(e),this.isImageBitmapLoader=!0,typeof createImageBitmap>"u"&&console.warn("THREE.ImageBitmapLoader: createImageBitmap() not supported."),typeof fetch>"u"&&console.warn("THREE.ImageBitmapLoader: fetch() not supported."),this.options={premultiplyAlpha:"none"}}setOptions(e){return this.options=e,this}load(e,t,i,r){void 0===e&&(e=""),void 0!==this.path&&(e=this.path+e),e=this.manager.resolveURL(e);const s=this,o=L2.get(e);if(void 0!==o)return s.manager.itemStart(e),setTimeout(function(){t&&t(o),s.manager.itemEnd(e)},0),o;const a={};a.credentials="anonymous"===this.crossOrigin?"same-origin":"include",a.headers=this.requestHeader,fetch(e,a).then(function(c){return c.blob()}).then(function(c){return createImageBitmap(c,Object.assign(s.options,{colorSpaceConversion:"none"}))}).then(function(c){L2.add(e,c),t&&t(c),s.manager.itemEnd(e)}).catch(function(c){r&&r(c),s.manager.itemError(e),s.manager.itemEnd(e)}),s.manager.itemStart(e)}}class ZE{constructor(e=!0){this.autoStart=e,this.startTime=0,this.oldTime=0,this.elapsedTime=0,this.running=!1}start(){this.startTime=XE(),this.oldTime=this.startTime,this.elapsedTime=0,this.running=!0}stop(){this.getElapsedTime(),this.running=!1,this.autoStart=!1}getElapsedTime(){return this.getDelta(),this.elapsedTime}getDelta(){let e=0;if(this.autoStart&&!this.running)return this.start(),0;if(this.running){const t=XE();e=(t-this.oldTime)/1e3,this.oldTime=t,this.elapsedTime+=e}return e}}function XE(){return(typeof performance>"u"?Date:performance).now()}class Koe{constructor(e,t,i){let r,s,o;switch(this.binding=e,this.valueSize=i,t){case"quaternion":r=this._slerp,s=this._slerpAdditive,o=this._setAdditiveIdentityQuaternion,this.buffer=new Float64Array(6*i),this._workIndex=5;break;case"string":case"bool":r=this._select,s=this._select,o=this._setAdditiveIdentityOther,this.buffer=new Array(5*i);break;default:r=this._lerp,s=this._lerpAdditive,o=this._setAdditiveIdentityNumeric,this.buffer=new Float64Array(5*i)}this._mixBufferRegion=r,this._mixBufferRegionAdditive=s,this._setIdentity=o,this._origIndex=3,this._addIndex=4,this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,this.useCount=0,this.referenceCount=0}accumulate(e,t){const i=this.buffer,r=this.valueSize,s=e*r+r;let o=this.cumulativeWeight;if(0===o){for(let a=0;a!==r;++a)i[s+a]=i[a];o=t}else o+=t,this._mixBufferRegion(i,s,0,t/o,r);this.cumulativeWeight=o}accumulateAdditive(e){const t=this.buffer,i=this.valueSize,r=i*this._addIndex;0===this.cumulativeWeightAdditive&&this._setIdentity(),this._mixBufferRegionAdditive(t,r,0,e,i),this.cumulativeWeightAdditive+=e}apply(e){const t=this.valueSize,i=this.buffer,r=e*t+t,s=this.cumulativeWeight,o=this.cumulativeWeightAdditive,a=this.binding;this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,s<1&&this._mixBufferRegion(i,r,t*this._origIndex,1-s,t),o>0&&this._mixBufferRegionAdditive(i,r,this._addIndex*t,1,t);for(let c=t,l=t+t;c!==l;++c)if(i[c]!==i[c+t]){a.setValue(i,r);break}}saveOriginalState(){const t=this.buffer,i=this.valueSize,r=i*this._origIndex;this.binding.getValue(t,r);for(let s=i,o=r;s!==o;++s)t[s]=t[r+s%i];this._setIdentity(),this.cumulativeWeight=0,this.cumulativeWeightAdditive=0}restoreOriginalState(){this.binding.setValue(this.buffer,3*this.valueSize)}_setAdditiveIdentityNumeric(){const e=this._addIndex*this.valueSize,t=e+this.valueSize;for(let i=e;i<t;i++)this.buffer[i]=0}_setAdditiveIdentityQuaternion(){this._setAdditiveIdentityNumeric(),this.buffer[this._addIndex*this.valueSize+3]=1}_setAdditiveIdentityOther(){const e=this._origIndex*this.valueSize,t=this._addIndex*this.valueSize;for(let i=0;i<this.valueSize;i++)this.buffer[t+i]=this.buffer[e+i]}_select(e,t,i,r,s){if(r>=.5)for(let o=0;o!==s;++o)e[t+o]=e[i+o]}_slerp(e,t,i,r){Mn.slerpFlat(e,t,e,t,e,i,r)}_slerpAdditive(e,t,i,r,s){const o=this._workIndex*s;Mn.multiplyQuaternionsFlat(e,o,e,t,e,i),Mn.slerpFlat(e,t,e,t,e,o,r)}_lerp(e,t,i,r,s){const o=1-r;for(let a=0;a!==s;++a){const c=t+a;e[c]=e[c]*o+e[i+a]*r}}_lerpAdditive(e,t,i,r,s){for(let o=0;o!==s;++o){const a=t+o;e[a]=e[a]+e[i+o]*r}}}const tp="\\[\\]\\.:\\/",Joe=new RegExp("["+tp+"]","g"),np="[^"+tp+"]",Qoe="[^"+tp.replace("\\.","")+"]",rae=new RegExp("^"+/((?:WC+[\/:])*)/.source.replace("WC",np)+/(WCOD+)?/.source.replace("WCOD",Qoe)+/(?:\.(WC+)(?:\[(.+)\])?)?/.source.replace("WC",np)+/\.(WC+)(?:\[(.+)\])?/.source.replace("WC",np)+"$"),sae=["material","materials","bones","map"];class oae{constructor(e,t,i){const r=i||At.parseTrackName(t);this._targetGroup=e,this._bindings=e.subscribe_(t,r)}getValue(e,t){this.bind();const r=this._bindings[this._targetGroup.nCachedObjects_];void 0!==r&&r.getValue(e,t)}setValue(e,t){const i=this._bindings;for(let r=this._targetGroup.nCachedObjects_,s=i.length;r!==s;++r)i[r].setValue(e,t)}bind(){const e=this._bindings;for(let t=this._targetGroup.nCachedObjects_,i=e.length;t!==i;++t)e[t].bind()}unbind(){const e=this._bindings;for(let t=this._targetGroup.nCachedObjects_,i=e.length;t!==i;++t)e[t].unbind()}}let At=(()=>{class n{constructor(t,i,r){this.path=i,this.parsedPath=r||n.parseTrackName(i),this.node=n.findNode(t,this.parsedPath.nodeName)||t,this.rootNode=t,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}static create(t,i,r){return t&&t.isAnimationObjectGroup?new n.Composite(t,i,r):new n(t,i,r)}static sanitizeNodeName(t){return t.replace(/\s/g,"_").replace(Joe,"")}static parseTrackName(t){const i=rae.exec(t);if(null===i)throw new Error("PropertyBinding: Cannot parse trackName: "+t);const r={nodeName:i[2],objectName:i[3],objectIndex:i[4],propertyName:i[5],propertyIndex:i[6]},s=r.nodeName&&r.nodeName.lastIndexOf(".");if(void 0!==s&&-1!==s){const o=r.nodeName.substring(s+1);-1!==sae.indexOf(o)&&(r.nodeName=r.nodeName.substring(0,s),r.objectName=o)}if(null===r.propertyName||0===r.propertyName.length)throw new Error("PropertyBinding: can not parse propertyName from trackName: "+t);return r}static findNode(t,i){if(void 0===i||""===i||"."===i||-1===i||i===t.name||i===t.uuid)return t;if(t.skeleton){const r=t.skeleton.getBoneByName(i);if(void 0!==r)return r}if(t.children){const r=function(o){for(let a=0;a<o.length;a++){const c=o[a];if(c.name===i||c.uuid===i)return c;const l=r(c.children);if(l)return l}return null},s=r(t.children);if(s)return s}return null}_getValue_unavailable(){}_setValue_unavailable(){}_getValue_direct(t,i){t[i]=this.targetObject[this.propertyName]}_getValue_array(t,i){const r=this.resolvedProperty;for(let s=0,o=r.length;s!==o;++s)t[i++]=r[s]}_getValue_arrayElement(t,i){t[i]=this.resolvedProperty[this.propertyIndex]}_getValue_toArray(t,i){this.resolvedProperty.toArray(t,i)}_setValue_direct(t,i){this.targetObject[this.propertyName]=t[i]}_setValue_direct_setNeedsUpdate(t,i){this.targetObject[this.propertyName]=t[i],this.targetObject.needsUpdate=!0}_setValue_direct_setMatrixWorldNeedsUpdate(t,i){this.targetObject[this.propertyName]=t[i],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_array(t,i){const r=this.resolvedProperty;for(let s=0,o=r.length;s!==o;++s)r[s]=t[i++]}_setValue_array_setNeedsUpdate(t,i){const r=this.resolvedProperty;for(let s=0,o=r.length;s!==o;++s)r[s]=t[i++];this.targetObject.needsUpdate=!0}_setValue_array_setMatrixWorldNeedsUpdate(t,i){const r=this.resolvedProperty;for(let s=0,o=r.length;s!==o;++s)r[s]=t[i++];this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_arrayElement(t,i){this.resolvedProperty[this.propertyIndex]=t[i]}_setValue_arrayElement_setNeedsUpdate(t,i){this.resolvedProperty[this.propertyIndex]=t[i],this.targetObject.needsUpdate=!0}_setValue_arrayElement_setMatrixWorldNeedsUpdate(t,i){this.resolvedProperty[this.propertyIndex]=t[i],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_fromArray(t,i){this.resolvedProperty.fromArray(t,i)}_setValue_fromArray_setNeedsUpdate(t,i){this.resolvedProperty.fromArray(t,i),this.targetObject.needsUpdate=!0}_setValue_fromArray_setMatrixWorldNeedsUpdate(t,i){this.resolvedProperty.fromArray(t,i),this.targetObject.matrixWorldNeedsUpdate=!0}_getValue_unbound(t,i){this.bind(),this.getValue(t,i)}_setValue_unbound(t,i){this.bind(),this.setValue(t,i)}bind(){let t=this.node;const i=this.parsedPath,r=i.objectName,s=i.propertyName;let o=i.propertyIndex;if(t||(t=n.findNode(this.rootNode,i.nodeName)||this.rootNode,this.node=t),this.getValue=this._getValue_unavailable,this.setValue=this._setValue_unavailable,!t)return void console.error("THREE.PropertyBinding: Trying to update node for track: "+this.path+" but it wasn't found.");if(r){let u=i.objectIndex;switch(r){case"materials":if(!t.material)return void console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);if(!t.material.materials)return void console.error("THREE.PropertyBinding: Can not bind to material.materials as node.material does not have a materials array.",this);t=t.material.materials;break;case"bones":if(!t.skeleton)return void console.error("THREE.PropertyBinding: Can not bind to bones as node does not have a skeleton.",this);t=t.skeleton.bones;for(let f=0;f<t.length;f++)if(t[f].name===u){u=f;break}break;case"map":if("map"in t){t=t.map;break}if(!t.material)return void console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);if(!t.material.map)return void console.error("THREE.PropertyBinding: Can not bind to material.map as node.material does not have a map.",this);t=t.material.map;break;default:if(void 0===t[r])return void console.error("THREE.PropertyBinding: Can not bind to objectName of node undefined.",this);t=t[r]}if(void 0!==u){if(void 0===t[u])return void console.error("THREE.PropertyBinding: Trying to bind to objectIndex of objectName, but is undefined.",this,t);t=t[u]}}const a=t[s];if(void 0===a)return void console.error("THREE.PropertyBinding: Trying to update property for track: "+i.nodeName+"."+s+" but it wasn't found.",t);let c=this.Versioning.None;this.targetObject=t,void 0!==t.needsUpdate?c=this.Versioning.NeedsUpdate:void 0!==t.matrixWorldNeedsUpdate&&(c=this.Versioning.MatrixWorldNeedsUpdate);let l=this.BindingType.Direct;if(void 0!==o){if("morphTargetInfluences"===s){if(!t.geometry)return void console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.",this);if(!t.geometry.morphAttributes)return void console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphAttributes.",this);void 0!==t.morphTargetDictionary[o]&&(o=t.morphTargetDictionary[o])}l=this.BindingType.ArrayElement,this.resolvedProperty=a,this.propertyIndex=o}else void 0!==a.fromArray&&void 0!==a.toArray?(l=this.BindingType.HasFromToArray,this.resolvedProperty=a):Array.isArray(a)?(l=this.BindingType.EntireArray,this.resolvedProperty=a):this.propertyName=s;this.getValue=this.GetterByBindingType[l],this.setValue=this.SetterByBindingTypeAndVersioning[l][c]}unbind(){this.node=null,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}}return n.Composite=oae,n})();At.prototype.BindingType={Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3},At.prototype.Versioning={None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2},At.prototype.GetterByBindingType=[At.prototype._getValue_direct,At.prototype._getValue_array,At.prototype._getValue_arrayElement,At.prototype._getValue_toArray],At.prototype.SetterByBindingTypeAndVersioning=[[At.prototype._setValue_direct,At.prototype._setValue_direct_setNeedsUpdate,At.prototype._setValue_direct_setMatrixWorldNeedsUpdate],[At.prototype._setValue_array,At.prototype._setValue_array_setNeedsUpdate,At.prototype._setValue_array_setMatrixWorldNeedsUpdate],[At.prototype._setValue_arrayElement,At.prototype._setValue_arrayElement_setNeedsUpdate,At.prototype._setValue_arrayElement_setMatrixWorldNeedsUpdate],[At.prototype._setValue_fromArray,At.prototype._setValue_fromArray_setNeedsUpdate,At.prototype._setValue_fromArray_setMatrixWorldNeedsUpdate]];class aae{constructor(e,t,i=null,r=t.blendMode){this._mixer=e,this._clip=t,this._localRoot=i,this.blendMode=r;const s=t.tracks,o=s.length,a=new Array(o),c={endingStart:K1,endingEnd:K1};for(let l=0;l!==o;++l){const u=s[l].createInterpolant(null);a[l]=u,u.settings=c}this._interpolantSettings=c,this._interpolants=a,this._propertyBindings=new Array(o),this._cacheIndex=null,this._byClipCacheIndex=null,this._timeScaleInterpolant=null,this._weightInterpolant=null,this.loop=2201,this._loopCount=-1,this._startTime=null,this.time=0,this.timeScale=1,this._effectiveTimeScale=1,this.weight=1,this._effectiveWeight=1,this.repetitions=1/0,this.paused=!1,this.enabled=!0,this.clampWhenFinished=!1,this.zeroSlopeAtStart=!0,this.zeroSlopeAtEnd=!0}play(){return this._mixer._activateAction(this),this}stop(){return this._mixer._deactivateAction(this),this.reset()}reset(){return this.paused=!1,this.enabled=!0,this.time=0,this._loopCount=-1,this._startTime=null,this.stopFading().stopWarping()}isRunning(){return this.enabled&&!this.paused&&0!==this.timeScale&&null===this._startTime&&this._mixer._isActiveAction(this)}isScheduled(){return this._mixer._isActiveAction(this)}startAt(e){return this._startTime=e,this}setLoop(e,t){return this.loop=e,this.repetitions=t,this}setEffectiveWeight(e){return this.weight=e,this._effectiveWeight=this.enabled?e:0,this.stopFading()}getEffectiveWeight(){return this._effectiveWeight}fadeIn(e){return this._scheduleFading(e,0,1)}fadeOut(e){return this._scheduleFading(e,1,0)}crossFadeFrom(e,t,i){if(e.fadeOut(t),this.fadeIn(t),i){const r=this._clip.duration,s=e._clip.duration,a=r/s;e.warp(1,s/r,t),this.warp(a,1,t)}return this}crossFadeTo(e,t,i){return e.crossFadeFrom(this,t,i)}stopFading(){const e=this._weightInterpolant;return null!==e&&(this._weightInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this}setEffectiveTimeScale(e){return this.timeScale=e,this._effectiveTimeScale=this.paused?0:e,this.stopWarping()}getEffectiveTimeScale(){return this._effectiveTimeScale}setDuration(e){return this.timeScale=this._clip.duration/e,this.stopWarping()}syncWith(e){return this.time=e.time,this.timeScale=e.timeScale,this.stopWarping()}halt(e){return this.warp(this._effectiveTimeScale,0,e)}warp(e,t,i){const r=this._mixer,s=r.time,o=this.timeScale;let a=this._timeScaleInterpolant;null===a&&(a=r._lendControlInterpolant(),this._timeScaleInterpolant=a);const c=a.parameterPositions,l=a.sampleValues;return c[0]=s,c[1]=s+i,l[0]=e/o,l[1]=t/o,this}stopWarping(){const e=this._timeScaleInterpolant;return null!==e&&(this._timeScaleInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this}getMixer(){return this._mixer}getClip(){return this._clip}getRoot(){return this._localRoot||this._mixer._root}_update(e,t,i,r){if(!this.enabled)return void this._updateWeight(e);const s=this._startTime;if(null!==s){const c=(e-s)*i;c<0||0===i?t=0:(this._startTime=null,t=i*c)}t*=this._updateTimeScale(e);const o=this._updateTime(t),a=this._updateWeight(e);if(a>0){const c=this._interpolants,l=this._propertyBindings;if(2501===this.blendMode)for(let u=0,f=c.length;u!==f;++u)c[u].evaluate(o),l[u].accumulateAdditive(a);else for(let u=0,f=c.length;u!==f;++u)c[u].evaluate(o),l[u].accumulate(r,a)}}_updateWeight(e){let t=0;if(this.enabled){t=this.weight;const i=this._weightInterpolant;if(null!==i){const r=i.evaluate(e)[0];t*=r,e>i.parameterPositions[1]&&(this.stopFading(),0===r&&(this.enabled=!1))}}return this._effectiveWeight=t,t}_updateTimeScale(e){let t=0;if(!this.paused){t=this.timeScale;const i=this._timeScaleInterpolant;null!==i&&(t*=i.evaluate(e)[0],e>i.parameterPositions[1]&&(this.stopWarping(),0===t?this.paused=!0:this.timeScale=t))}return this._effectiveTimeScale=t,t}_updateTime(e){const t=this._clip.duration,i=this.loop;let r=this.time+e,s=this._loopCount;const o=2202===i;if(0===e)return-1===s?r:o&&1==(1&s)?t-r:r;if(2200===i){-1===s&&(this._loopCount=0,this._setEndings(!0,!0,!1));e:{if(r>=t)r=t;else{if(!(r<0)){this.time=r;break e}r=0}this.clampWhenFinished?this.paused=!0:this.enabled=!1,this.time=r,this._mixer.dispatchEvent({type:"finished",action:this,direction:e<0?-1:1})}}else{if(-1===s&&(e>=0?(s=0,this._setEndings(!0,0===this.repetitions,o)):this._setEndings(0===this.repetitions,!0,o)),r>=t||r<0){const a=Math.floor(r/t);r-=t*a,s+=Math.abs(a);const c=this.repetitions-s;if(c<=0)this.clampWhenFinished?this.paused=!0:this.enabled=!1,r=e>0?t:0,this.time=r,this._mixer.dispatchEvent({type:"finished",action:this,direction:e>0?1:-1});else{if(1===c){const l=e<0;this._setEndings(l,!l,o)}else this._setEndings(!1,!1,o);this._loopCount=s,this.time=r,this._mixer.dispatchEvent({type:"loop",action:this,loopDelta:a})}}else this.time=r;if(o&&1==(1&s))return t-r}return r}_setEndings(e,t,i){const r=this._interpolantSettings;i?(r.endingStart=J1,r.endingEnd=J1):(r.endingStart=e?this.zeroSlopeAtStart?J1:K1:2402,r.endingEnd=t?this.zeroSlopeAtEnd?J1:K1:2402)}_scheduleFading(e,t,i){const r=this._mixer,s=r.time;let o=this._weightInterpolant;null===o&&(o=r._lendControlInterpolant(),this._weightInterpolant=o);const a=o.parameterPositions,c=o.sampleValues;return a[0]=s,c[0]=t,a[1]=s+e,c[1]=i,this}}const cae=new Float32Array(1);class JE extends ma{constructor(e){super(),this._root=e,this._initMemoryManager(),this._accuIndex=0,this.time=0,this.timeScale=1}_bindAction(e,t){const i=e._localRoot||this._root,r=e._clip.tracks,s=r.length,o=e._propertyBindings,a=e._interpolants,c=i.uuid,l=this._bindingsByRootAndName;let u=l[c];void 0===u&&(u={},l[c]=u);for(let f=0;f!==s;++f){const h=r[f],d=h.name;let p=u[d];if(void 0!==p)++p.referenceCount,o[f]=p;else{if(p=o[f],void 0!==p){null===p._cacheIndex&&(++p.referenceCount,this._addInactiveBinding(p,c,d));continue}p=new Koe(At.create(i,d,t&&t._propertyBindings[f].binding.parsedPath),h.ValueTypeName,h.getValueSize()),++p.referenceCount,this._addInactiveBinding(p,c,d),o[f]=p}a[f].resultBuffer=p.buffer}}_activateAction(e){if(!this._isActiveAction(e)){if(null===e._cacheIndex){const i=(e._localRoot||this._root).uuid,r=e._clip.uuid,s=this._actionsByClip[r];this._bindAction(e,s&&s.knownActions[0]),this._addInactiveAction(e,r,i)}const t=e._propertyBindings;for(let i=0,r=t.length;i!==r;++i){const s=t[i];0==s.useCount++&&(this._lendBinding(s),s.saveOriginalState())}this._lendAction(e)}}_deactivateAction(e){if(this._isActiveAction(e)){const t=e._propertyBindings;for(let i=0,r=t.length;i!==r;++i){const s=t[i];0==--s.useCount&&(s.restoreOriginalState(),this._takeBackBinding(s))}this._takeBackAction(e)}}_initMemoryManager(){this._actions=[],this._nActiveActions=0,this._actionsByClip={},this._bindings=[],this._nActiveBindings=0,this._bindingsByRootAndName={},this._controlInterpolants=[],this._nActiveControlInterpolants=0;const e=this;this.stats={actions:{get total(){return e._actions.length},get inUse(){return e._nActiveActions}},bindings:{get total(){return e._bindings.length},get inUse(){return e._nActiveBindings}},controlInterpolants:{get total(){return e._controlInterpolants.length},get inUse(){return e._nActiveControlInterpolants}}}}_isActiveAction(e){const t=e._cacheIndex;return null!==t&&t<this._nActiveActions}_addInactiveAction(e,t,i){const r=this._actions,s=this._actionsByClip;let o=s[t];if(void 0===o)o={knownActions:[e],actionByRoot:{}},e._byClipCacheIndex=0,s[t]=o;else{const a=o.knownActions;e._byClipCacheIndex=a.length,a.push(e)}e._cacheIndex=r.length,r.push(e),o.actionByRoot[i]=e}_removeInactiveAction(e){const t=this._actions,i=t[t.length-1],r=e._cacheIndex;i._cacheIndex=r,t[r]=i,t.pop(),e._cacheIndex=null;const s=e._clip.uuid,o=this._actionsByClip,a=o[s],c=a.knownActions,l=c[c.length-1],u=e._byClipCacheIndex;l._byClipCacheIndex=u,c[u]=l,c.pop(),e._byClipCacheIndex=null,delete a.actionByRoot[(e._localRoot||this._root).uuid],0===c.length&&delete o[s],this._removeInactiveBindingsForAction(e)}_removeInactiveBindingsForAction(e){const t=e._propertyBindings;for(let i=0,r=t.length;i!==r;++i){const s=t[i];0==--s.referenceCount&&this._removeInactiveBinding(s)}}_lendAction(e){const t=this._actions,i=e._cacheIndex,r=this._nActiveActions++,s=t[r];e._cacheIndex=r,t[r]=e,s._cacheIndex=i,t[i]=s}_takeBackAction(e){const t=this._actions,i=e._cacheIndex,r=--this._nActiveActions,s=t[r];e._cacheIndex=r,t[r]=e,s._cacheIndex=i,t[i]=s}_addInactiveBinding(e,t,i){const r=this._bindingsByRootAndName,s=this._bindings;let o=r[t];void 0===o&&(o={},r[t]=o),o[i]=e,e._cacheIndex=s.length,s.push(e)}_removeInactiveBinding(e){const t=this._bindings,i=e.binding,r=i.rootNode.uuid,s=i.path,o=this._bindingsByRootAndName,a=o[r],c=t[t.length-1],l=e._cacheIndex;c._cacheIndex=l,t[l]=c,t.pop(),delete a[s],0===Object.keys(a).length&&delete o[r]}_lendBinding(e){const t=this._bindings,i=e._cacheIndex,r=this._nActiveBindings++,s=t[r];e._cacheIndex=r,t[r]=e,s._cacheIndex=i,t[i]=s}_takeBackBinding(e){const t=this._bindings,i=e._cacheIndex,r=--this._nActiveBindings,s=t[r];e._cacheIndex=r,t[r]=e,s._cacheIndex=i,t[i]=s}_lendControlInterpolant(){const e=this._controlInterpolants,t=this._nActiveControlInterpolants++;let i=e[t];return void 0===i&&(i=new FE(new Float32Array(2),new Float32Array(2),1,cae),i.__cacheIndex=t,e[t]=i),i}_takeBackControlInterpolant(e){const t=this._controlInterpolants,i=e.__cacheIndex,r=--this._nActiveControlInterpolants,s=t[r];e.__cacheIndex=r,t[r]=e,s.__cacheIndex=i,t[i]=s}clipAction(e,t,i){const r=t||this._root,s=r.uuid;let o="string"==typeof e?I2.findByName(r,e):e;const a=null!==o?o.uuid:e,c=this._actionsByClip[a];let l=null;if(void 0===i&&(i=null!==o?o.blendMode:2500),void 0!==c){const f=c.actionByRoot[s];if(void 0!==f&&f.blendMode===i)return f;l=c.knownActions[0],null===o&&(o=l._clip)}if(null===o)return null;const u=new aae(this,o,t,i);return this._bindAction(u,l),this._addInactiveAction(u,a,s),u}existingAction(e,t){const i=t||this._root,r=i.uuid,s="string"==typeof e?I2.findByName(i,e):e,a=this._actionsByClip[s?s.uuid:e];return void 0!==a&&a.actionByRoot[r]||null}stopAllAction(){const e=this._actions;for(let i=this._nActiveActions-1;i>=0;--i)e[i].stop();return this}update(e){const t=this._actions,i=this._nActiveActions,r=this.time+=e*=this.timeScale,s=Math.sign(e),o=this._accuIndex^=1;for(let l=0;l!==i;++l)t[l]._update(r,e,s,o);const a=this._bindings,c=this._nActiveBindings;for(let l=0;l!==c;++l)a[l].apply(o);return this}setTime(e){this.time=0;for(let t=0;t<this._actions.length;t++)this._actions[t].time=0;return this.update(e)}getRoot(){return this._root}uncacheClip(e){const t=this._actions,i=e.uuid,r=this._actionsByClip,s=r[i];if(void 0!==s){const o=s.knownActions;for(let a=0,c=o.length;a!==c;++a){const l=o[a];this._deactivateAction(l);const u=l._cacheIndex,f=t[t.length-1];l._cacheIndex=null,l._byClipCacheIndex=null,f._cacheIndex=u,t[u]=f,t.pop(),this._removeInactiveBindingsForAction(l)}delete r[i]}}uncacheRoot(e){const t=e.uuid,i=this._actionsByClip;for(const o in i){const c=i[o].actionByRoot[t];void 0!==c&&(this._deactivateAction(c),this._removeInactiveAction(c))}const s=this._bindingsByRootAndName[t];if(void 0!==s)for(const o in s){const a=s[o];a.restoreOriginalState(),this._removeInactiveBinding(a)}}uncacheAction(e,t){const i=this.existingAction(e,t);null!==i&&(this._deactivateAction(i),this._removeInactiveAction(i))}}class Gt{constructor(e){this.value=e}clone(){return new Gt(void 0===this.value.clone?this.value:this.value.clone())}}typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("register",{detail:{revision:"147"}})),typeof window<"u"&&(window.__THREE__?console.warn("WARNING: Multiple instances of Three.js being imported."):window.__THREE__="147");class pae extends R2{constructor(e){super(e),this.dracoLoader=null,this.ktx2Loader=null,this.meshoptDecoder=null,this.pluginCallbacks=[],this.register(function(t){return new _ae(t)}),this.register(function(t){return new Eae(t)}),this.register(function(t){return new Dae(t)}),this.register(function(t){return new bae(t)}),this.register(function(t){return new Mae(t)}),this.register(function(t){return new wae(t)}),this.register(function(t){return new Cae(t)}),this.register(function(t){return new yae(t)}),this.register(function(t){return new Sae(t)}),this.register(function(t){return new xae(t)}),this.register(function(t){return new gae(t)}),this.register(function(t){return new Aae(t)}),this.register(function(t){return new Tae(t)})}load(e,t,i,r){const s=this;let o;o=""!==this.resourcePath?this.resourcePath:""!==this.path?this.path:ar.extractUrlBase(e),this.manager.itemStart(e);const a=function(l){r?r(l):console.error(l),s.manager.itemError(e),s.manager.itemEnd(e)},c=new Nr(this.manager);c.setPath(this.path),c.setResponseType("arraybuffer"),c.setRequestHeader(this.requestHeader),c.setWithCredentials(this.withCredentials),c.load(e,function(l){try{s.parse(l,o,function(u){t(u),s.manager.itemEnd(e)},a)}catch(u){a(u)}},i,a)}setDRACOLoader(e){return this.dracoLoader=e,this}setDDSLoader(){throw new Error('THREE.GLTFLoader: "MSFT_texture_dds" no longer supported. Please update to "KHR_texture_basisu".')}setKTX2Loader(e){return this.ktx2Loader=e,this}setMeshoptDecoder(e){return this.meshoptDecoder=e,this}register(e){return-1===this.pluginCallbacks.indexOf(e)&&this.pluginCallbacks.push(e),this}unregister(e){return-1!==this.pluginCallbacks.indexOf(e)&&this.pluginCallbacks.splice(this.pluginCallbacks.indexOf(e),1),this}parse(e,t,i,r){let s;const o={},a={};if("string"==typeof e)s=JSON.parse(e);else if(e instanceof ArrayBuffer)if(ar.decodeText(new Uint8Array(e,0,4))===lD){try{o[xt.KHR_BINARY_GLTF]=new Iae(e)}catch(u){return void(r&&r(u))}s=JSON.parse(o[xt.KHR_BINARY_GLTF].content)}else s=JSON.parse(ar.decodeText(new Uint8Array(e)));else s=e;if(void 0===s.asset||s.asset.version[0]<2)return void(r&&r(new Error("THREE.GLTFLoader: Unsupported asset. glTF versions >=2.0 are supported.")));const c=new Bae(s,{path:t||this.resourcePath||"",crossOrigin:this.crossOrigin,requestHeader:this.requestHeader,manager:this.manager,ktx2Loader:this.ktx2Loader,meshoptDecoder:this.meshoptDecoder});c.fileLoader.setRequestHeader(this.requestHeader);for(let l=0;l<this.pluginCallbacks.length;l++){const u=this.pluginCallbacks[l](c);a[u.name]=u,o[u.name]=!0}if(s.extensionsUsed)for(let l=0;l<s.extensionsUsed.length;++l){const u=s.extensionsUsed[l],f=s.extensionsRequired||[];switch(u){case xt.KHR_MATERIALS_UNLIT:o[u]=new vae;break;case xt.KHR_DRACO_MESH_COMPRESSION:o[u]=new Lae(s,this.dracoLoader);break;case xt.KHR_TEXTURE_TRANSFORM:o[u]=new Rae;break;case xt.KHR_MESH_QUANTIZATION:o[u]=new Pae;break;default:f.indexOf(u)>=0&&void 0===a[u]&&console.warn('THREE.GLTFLoader: Unknown extension "'+u+'".')}}c.setExtensions(o),c.setPlugins(a),c.parse(i,r)}parseAsync(e,t){const i=this;return new Promise(function(r,s){i.parse(e,t,r,s)})}}function mae(){let n={};return{get:function(e){return n[e]},add:function(e,t){n[e]=t},remove:function(e){delete n[e]},removeAll:function(){n={}}}}const xt={KHR_BINARY_GLTF:"KHR_binary_glTF",KHR_DRACO_MESH_COMPRESSION:"KHR_draco_mesh_compression",KHR_LIGHTS_PUNCTUAL:"KHR_lights_punctual",KHR_MATERIALS_CLEARCOAT:"KHR_materials_clearcoat",KHR_MATERIALS_IOR:"KHR_materials_ior",KHR_MATERIALS_SHEEN:"KHR_materials_sheen",KHR_MATERIALS_SPECULAR:"KHR_materials_specular",KHR_MATERIALS_TRANSMISSION:"KHR_materials_transmission",KHR_MATERIALS_IRIDESCENCE:"KHR_materials_iridescence",KHR_MATERIALS_UNLIT:"KHR_materials_unlit",KHR_MATERIALS_VOLUME:"KHR_materials_volume",KHR_TEXTURE_BASISU:"KHR_texture_basisu",KHR_TEXTURE_TRANSFORM:"KHR_texture_transform",KHR_MESH_QUANTIZATION:"KHR_mesh_quantization",KHR_MATERIALS_EMISSIVE_STRENGTH:"KHR_materials_emissive_strength",EXT_TEXTURE_WEBP:"EXT_texture_webp",EXT_MESHOPT_COMPRESSION:"EXT_meshopt_compression",EXT_MESH_GPU_INSTANCING:"EXT_mesh_gpu_instancing"};class gae{constructor(e){this.parser=e,this.name=xt.KHR_LIGHTS_PUNCTUAL,this.cache={refs:{},uses:{}}}_markDefs(){const e=this.parser,t=this.parser.json.nodes||[];for(let i=0,r=t.length;i<r;i++){const s=t[i];s.extensions&&s.extensions[this.name]&&void 0!==s.extensions[this.name].light&&e._addNodeRef(this.cache,s.extensions[this.name].light)}}_loadLight(e){const t=this.parser,i="light:"+e;let r=t.cache.get(i);if(r)return r;const s=t.json,c=((s.extensions&&s.extensions[this.name]||{}).lights||[])[e];let l;const u=new ae(16777215);void 0!==c.color&&u.fromArray(c.color);const f=void 0!==c.range?c.range:0;switch(c.type){case"directional":l=new af(u),l.target.position.set(0,0,-1),l.add(l.target);break;case"point":l=new sf(u),l.distance=f;break;case"spot":l=new K7(u),l.distance=f,c.spot=c.spot||{},c.spot.innerConeAngle=void 0!==c.spot.innerConeAngle?c.spot.innerConeAngle:0,c.spot.outerConeAngle=void 0!==c.spot.outerConeAngle?c.spot.outerConeAngle:Math.PI/4,l.angle=c.spot.outerConeAngle,l.penumbra=1-c.spot.innerConeAngle/c.spot.outerConeAngle,l.target.position.set(0,0,-1),l.add(l.target);break;default:throw new Error("THREE.GLTFLoader: Unexpected light type: "+c.type)}return l.position.set(0,0,0),l.decay=2,Ao(l,c),void 0!==c.intensity&&(l.intensity=c.intensity),l.name=t.createUniqueName(c.name||"light_"+e),r=Promise.resolve(l),t.cache.add(i,r),r}getDependency(e,t){if("light"===e)return this._loadLight(t)}createNodeAttachment(e){const t=this,i=this.parser,s=i.json.nodes[e],a=(s.extensions&&s.extensions[this.name]||{}).light;return void 0===a?null:this._loadLight(a).then(function(c){return i._getNodeRef(t.cache,a,c)})}}class vae{constructor(){this.name=xt.KHR_MATERIALS_UNLIT}getMaterialType(){return pi}extendParams(e,t,i){const r=[];e.color=new ae(1,1,1),e.opacity=1;const s=t.pbrMetallicRoughness;if(s){if(Array.isArray(s.baseColorFactor)){const o=s.baseColorFactor;e.color.fromArray(o),e.opacity=o[3]}void 0!==s.baseColorTexture&&r.push(i.assignTexture(e,"map",s.baseColorTexture,bt))}return Promise.all(r)}}class yae{constructor(e){this.parser=e,this.name=xt.KHR_MATERIALS_EMISSIVE_STRENGTH}extendMaterialParams(e,t){const r=this.parser.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const s=r.extensions[this.name].emissiveStrength;return void 0!==s&&(t.emissiveIntensity=s),Promise.resolve()}}class _ae{constructor(e){this.parser=e,this.name=xt.KHR_MATERIALS_CLEARCOAT}getMaterialType(e){const i=this.parser.json.materials[e];return i.extensions&&i.extensions[this.name]?Co:null}extendMaterialParams(e,t){const i=this.parser,r=i.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const s=[],o=r.extensions[this.name];if(void 0!==o.clearcoatFactor&&(t.clearcoat=o.clearcoatFactor),void 0!==o.clearcoatTexture&&s.push(i.assignTexture(t,"clearcoatMap",o.clearcoatTexture)),void 0!==o.clearcoatRoughnessFactor&&(t.clearcoatRoughness=o.clearcoatRoughnessFactor),void 0!==o.clearcoatRoughnessTexture&&s.push(i.assignTexture(t,"clearcoatRoughnessMap",o.clearcoatRoughnessTexture)),void 0!==o.clearcoatNormalTexture&&(s.push(i.assignTexture(t,"clearcoatNormalMap",o.clearcoatNormalTexture)),void 0!==o.clearcoatNormalTexture.scale)){const a=o.clearcoatNormalTexture.scale;t.clearcoatNormalScale=new q(a,a)}return Promise.all(s)}}class xae{constructor(e){this.parser=e,this.name=xt.KHR_MATERIALS_IRIDESCENCE}getMaterialType(e){const i=this.parser.json.materials[e];return i.extensions&&i.extensions[this.name]?Co:null}extendMaterialParams(e,t){const i=this.parser,r=i.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const s=[],o=r.extensions[this.name];return void 0!==o.iridescenceFactor&&(t.iridescence=o.iridescenceFactor),void 0!==o.iridescenceTexture&&s.push(i.assignTexture(t,"iridescenceMap",o.iridescenceTexture)),void 0!==o.iridescenceIor&&(t.iridescenceIOR=o.iridescenceIor),void 0===t.iridescenceThicknessRange&&(t.iridescenceThicknessRange=[100,400]),void 0!==o.iridescenceThicknessMinimum&&(t.iridescenceThicknessRange[0]=o.iridescenceThicknessMinimum),void 0!==o.iridescenceThicknessMaximum&&(t.iridescenceThicknessRange[1]=o.iridescenceThicknessMaximum),void 0!==o.iridescenceThicknessTexture&&s.push(i.assignTexture(t,"iridescenceThicknessMap",o.iridescenceThicknessTexture)),Promise.all(s)}}class bae{constructor(e){this.parser=e,this.name=xt.KHR_MATERIALS_SHEEN}getMaterialType(e){const i=this.parser.json.materials[e];return i.extensions&&i.extensions[this.name]?Co:null}extendMaterialParams(e,t){const i=this.parser,r=i.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const s=[];t.sheenColor=new ae(0,0,0),t.sheenRoughness=0,t.sheen=1;const o=r.extensions[this.name];return void 0!==o.sheenColorFactor&&t.sheenColor.fromArray(o.sheenColorFactor),void 0!==o.sheenRoughnessFactor&&(t.sheenRoughness=o.sheenRoughnessFactor),void 0!==o.sheenColorTexture&&s.push(i.assignTexture(t,"sheenColorMap",o.sheenColorTexture,bt)),void 0!==o.sheenRoughnessTexture&&s.push(i.assignTexture(t,"sheenRoughnessMap",o.sheenRoughnessTexture)),Promise.all(s)}}class Mae{constructor(e){this.parser=e,this.name=xt.KHR_MATERIALS_TRANSMISSION}getMaterialType(e){const i=this.parser.json.materials[e];return i.extensions&&i.extensions[this.name]?Co:null}extendMaterialParams(e,t){const i=this.parser,r=i.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const s=[],o=r.extensions[this.name];return void 0!==o.transmissionFactor&&(t.transmission=o.transmissionFactor),void 0!==o.transmissionTexture&&s.push(i.assignTexture(t,"transmissionMap",o.transmissionTexture)),Promise.all(s)}}class wae{constructor(e){this.parser=e,this.name=xt.KHR_MATERIALS_VOLUME}getMaterialType(e){const i=this.parser.json.materials[e];return i.extensions&&i.extensions[this.name]?Co:null}extendMaterialParams(e,t){const i=this.parser,r=i.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const s=[],o=r.extensions[this.name];t.thickness=void 0!==o.thicknessFactor?o.thicknessFactor:0,void 0!==o.thicknessTexture&&s.push(i.assignTexture(t,"thicknessMap",o.thicknessTexture)),t.attenuationDistance=o.attenuationDistance||1/0;const a=o.attenuationColor||[1,1,1];return t.attenuationColor=new ae(a[0],a[1],a[2]),Promise.all(s)}}class Cae{constructor(e){this.parser=e,this.name=xt.KHR_MATERIALS_IOR}getMaterialType(e){const i=this.parser.json.materials[e];return i.extensions&&i.extensions[this.name]?Co:null}extendMaterialParams(e,t){const r=this.parser.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const s=r.extensions[this.name];return t.ior=void 0!==s.ior?s.ior:1.5,Promise.resolve()}}class Sae{constructor(e){this.parser=e,this.name=xt.KHR_MATERIALS_SPECULAR}getMaterialType(e){const i=this.parser.json.materials[e];return i.extensions&&i.extensions[this.name]?Co:null}extendMaterialParams(e,t){const i=this.parser,r=i.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const s=[],o=r.extensions[this.name];t.specularIntensity=void 0!==o.specularFactor?o.specularFactor:1,void 0!==o.specularTexture&&s.push(i.assignTexture(t,"specularIntensityMap",o.specularTexture));const a=o.specularColorFactor||[1,1,1];return t.specularColor=new ae(a[0],a[1],a[2]),void 0!==o.specularColorTexture&&s.push(i.assignTexture(t,"specularColorMap",o.specularColorTexture,bt)),Promise.all(s)}}class Eae{constructor(e){this.parser=e,this.name=xt.KHR_TEXTURE_BASISU}loadTexture(e){const t=this.parser,i=t.json,r=i.textures[e];if(!r.extensions||!r.extensions[this.name])return null;const s=r.extensions[this.name],o=t.options.ktx2Loader;if(!o){if(i.extensionsRequired&&i.extensionsRequired.indexOf(this.name)>=0)throw new Error("THREE.GLTFLoader: setKTX2Loader must be called before loading KTX2 textures");return null}return t.loadTextureImage(e,s.source,o)}}class Dae{constructor(e){this.parser=e,this.name=xt.EXT_TEXTURE_WEBP,this.isSupported=null}loadTexture(e){const t=this.name,i=this.parser,r=i.json,s=r.textures[e];if(!s.extensions||!s.extensions[t])return null;const o=s.extensions[t],a=r.images[o.source];let c=i.textureLoader;if(a.uri){const l=i.options.manager.getHandler(a.uri);null!==l&&(c=l)}return this.detectSupport().then(function(l){if(l)return i.loadTextureImage(e,o.source,c);if(r.extensionsRequired&&r.extensionsRequired.indexOf(t)>=0)throw new Error("THREE.GLTFLoader: WebP required by asset but unsupported.");return i.loadTexture(e)})}detectSupport(){return this.isSupported||(this.isSupported=new Promise(function(e){const t=new Image;t.src="data:image/webp;base64,UklGRiIAAABXRUJQVlA4IBYAAAAwAQCdASoBAAEADsD+JaQAA3AAAAAA",t.onload=t.onerror=function(){e(1===t.height)}})),this.isSupported}}class Aae{constructor(e){this.name=xt.EXT_MESHOPT_COMPRESSION,this.parser=e}loadBufferView(e){const t=this.parser.json,i=t.bufferViews[e];if(i.extensions&&i.extensions[this.name]){const r=i.extensions[this.name],s=this.parser.getDependency("buffer",r.buffer),o=this.parser.options.meshoptDecoder;if(!o||!o.supported){if(t.extensionsRequired&&t.extensionsRequired.indexOf(this.name)>=0)throw new Error("THREE.GLTFLoader: setMeshoptDecoder must be called before loading compressed files");return null}return s.then(function(a){const u=r.count,f=r.byteStride,h=new Uint8Array(a,r.byteOffset||0,r.byteLength||0);return o.decodeGltfBufferAsync?o.decodeGltfBufferAsync(u,f,h,r.mode,r.filter).then(function(d){return d.buffer}):o.ready.then(function(){const d=new ArrayBuffer(u*f);return o.decodeGltfBuffer(new Uint8Array(d),u,f,h,r.mode,r.filter),d})})}return null}}class Tae{constructor(e){this.name=xt.EXT_MESH_GPU_INSTANCING,this.parser=e}createNodeMesh(e){const t=this.parser.json,i=t.nodes[e];if(!i.extensions||!i.extensions[this.name]||void 0===i.mesh)return null;const r=t.meshes[i.mesh];for(const l of r.primitives)if(l.mode!==cr.TRIANGLES&&l.mode!==cr.TRIANGLE_STRIP&&l.mode!==cr.TRIANGLE_FAN&&void 0!==l.mode)return null;const o=i.extensions[this.name].attributes,a=[],c={};for(const l in o)a.push(this.parser.getDependency("accessor",o[l]).then(u=>(c[l]=u,c[l])));return a.length<1?null:(a.push(this.parser.createNodeMesh(e)),Promise.all(a).then(l=>{const u=l.pop(),f=u.isGroup?u.children:[u],h=l[0].count,d=[];for(const p of f){const m=new Ce,g=new C,v=new Mn,x=new C(1,1,1),y=new fE(p.geometry,p.material,h);for(let _=0;_<h;_++)c.TRANSLATION&&g.fromBufferAttribute(c.TRANSLATION,_),c.ROTATION&&v.fromBufferAttribute(c.ROTATION,_),c.SCALE&&x.fromBufferAttribute(c.SCALE,_),y.setMatrixAt(_,m.compose(g,v,x));for(const _ in c)"TRANSLATION"!==_&&"ROTATION"!==_&&"SCALE"!==_&&p.geometry.setAttribute(_,c[_]);pn.prototype.copy.call(y,p),y.frustumCulled=!1,this.parser.assignFinalMaterial(y),d.push(y)}return u.isGroup?(u.clear(),u.add(...d),u):d[0]}))}}const lD="glTF";class Iae{constructor(e){this.name=xt.KHR_BINARY_GLTF,this.content=null,this.body=null;const t=new DataView(e,0,12);if(this.header={magic:ar.decodeText(new Uint8Array(e.slice(0,4))),version:t.getUint32(4,!0),length:t.getUint32(8,!0)},this.header.magic!==lD)throw new Error("THREE.GLTFLoader: Unsupported glTF-Binary header.");if(this.header.version<2)throw new Error("THREE.GLTFLoader: Legacy binary file detected.");const i=this.header.length-12,r=new DataView(e,12);let s=0;for(;s<i;){const o=r.getUint32(s,!0);s+=4;const a=r.getUint32(s,!0);if(s+=4,1313821514===a){const c=new Uint8Array(e,12+s,o);this.content=ar.decodeText(c)}else if(5130562===a){const c=12+s;this.body=e.slice(c,c+o)}s+=o}if(null===this.content)throw new Error("THREE.GLTFLoader: JSON content not found.")}}class Lae{constructor(e,t){if(!t)throw new Error("THREE.GLTFLoader: No DRACOLoader instance provided.");this.name=xt.KHR_DRACO_MESH_COMPRESSION,this.json=e,this.dracoLoader=t,this.dracoLoader.preload()}decodePrimitive(e,t){const i=this.json,r=this.dracoLoader,s=e.extensions[this.name].bufferView,o=e.extensions[this.name].attributes,a={},c={},l={};for(const u in o){const f=ap[u]||u.toLowerCase();a[f]=o[u]}for(const u in e.attributes){const f=ap[u]||u.toLowerCase();if(void 0!==o[u]){const h=i.accessors[e.attributes[u]];l[f]=P2[h.componentType].name,c[f]=!0===h.normalized}}return t.getDependency("bufferView",s).then(function(u){return new Promise(function(f){r.decodeDracoFile(u,function(h){for(const d in h.attributes){const p=h.attributes[d],m=c[d];void 0!==m&&(p.normalized=m)}f(h)},a,l)})})}}class Rae{constructor(){this.name=xt.KHR_TEXTURE_TRANSFORM}extendTexture(e,t){return void 0!==t.texCoord&&console.warn('THREE.GLTFLoader: Custom UV sets in "'+this.name+'" extension not yet supported.'),void 0===t.offset&&void 0===t.rotation&&void 0===t.scale||(e=e.clone(),void 0!==t.offset&&e.offset.fromArray(t.offset),void 0!==t.rotation&&(e.rotation=t.rotation),void 0!==t.scale&&e.repeat.fromArray(t.scale),e.needsUpdate=!0),e}}class Pae{constructor(){this.name=xt.KHR_MESH_QUANTIZATION}}class fD extends o3{constructor(e,t,i,r){super(e,t,i,r)}copySampleValue_(e){const t=this.resultBuffer,i=this.sampleValues,r=this.valueSize,s=e*r*3+r;for(let o=0;o!==r;o++)t[o]=i[s+o];return t}interpolate_(e,t,i,r){const s=this.resultBuffer,o=this.sampleValues,a=this.valueSize,c=2*a,l=3*a,u=r-t,f=(i-t)/u,h=f*f,d=h*f,p=e*l,m=p-l,g=-2*d+3*h,v=d-h,x=1-g,y=v-h+f;for(let _=0;_!==a;_++)s[_]=x*o[m+_+a]+y*(o[m+_+c]*u)+g*o[p+_+a]+v*(o[p+_]*u);return s}}const zae=new Mn;class Nae extends fD{interpolate_(e,t,i,r){const s=super.interpolate_(e,t,i,r);return zae.fromArray(s).normalize().toArray(s),s}}const cr={FLOAT:5126,FLOAT_MAT3:35675,FLOAT_MAT4:35676,FLOAT_VEC2:35664,FLOAT_VEC3:35665,FLOAT_VEC4:35666,LINEAR:9729,REPEAT:10497,SAMPLER_2D:35678,POINTS:0,LINES:1,LINE_LOOP:2,LINE_STRIP:3,TRIANGLES:4,TRIANGLE_STRIP:5,TRIANGLE_FAN:6,UNSIGNED_BYTE:5121,UNSIGNED_SHORT:5123},P2={5120:Int8Array,5121:Uint8Array,5122:Int16Array,5123:Uint16Array,5125:Uint32Array,5126:Float32Array},hD={9728:bn,9729:on,9984:1004,9985:1007,9986:1005,9987:ho},dD={33071:Fn,33648:1002,10497:Ts},op={SCALAR:1,VEC2:2,VEC3:3,VEC4:4,MAT2:4,MAT3:9,MAT4:16},ap={POSITION:"position",NORMAL:"normal",TANGENT:"tangent",TEXCOORD_0:"uv",TEXCOORD_1:"uv2",COLOR_0:"color",WEIGHTS_0:"skinWeight",JOINTS_0:"skinIndex"},Do={scale:"scale",translation:"position",rotation:"quaternion",weights:"morphTargetInfluences"},Fae={CUBICSPLINE:void 0,LINEAR:Y1,STEP:Nl};function l3(n,e,t){for(const i in t.extensions)void 0===n[i]&&(e.userData.gltfExtensions=e.userData.gltfExtensions||{},e.userData.gltfExtensions[i]=t.extensions[i])}function Ao(n,e){void 0!==e.extras&&("object"==typeof e.extras?Object.assign(n.userData,e.extras):console.warn("THREE.GLTFLoader: Ignoring primitive type .extras, "+e.extras))}function Vae(n,e){if(n.updateMorphTargets(),void 0!==e.weights)for(let t=0,i=e.weights.length;t<i;t++)n.morphTargetInfluences[t]=e.weights[t];if(e.extras&&Array.isArray(e.extras.targetNames)){const t=e.extras.targetNames;if(n.morphTargetInfluences.length===t.length){n.morphTargetDictionary={};for(let i=0,r=t.length;i<r;i++)n.morphTargetDictionary[t[i]]=i}else console.warn("THREE.GLTFLoader: Invalid extras.targetNames length. Ignoring names.")}}function Hae(n){const e=n.extensions&&n.extensions[xt.KHR_DRACO_MESH_COMPRESSION];let t;return t=e?"draco:"+e.bufferView+":"+e.indices+":"+pD(e.attributes):n.indices+":"+pD(n.attributes)+":"+n.mode,t}function pD(n){let e="";const t=Object.keys(n).sort();for(let i=0,r=t.length;i<r;i++)e+=t[i]+":"+n[t[i]]+";";return e}function lp(n){switch(n){case Int8Array:return 1/127;case Uint8Array:return 1/255;case Int16Array:return 1/32767;case Uint16Array:return 1/65535;default:throw new Error("THREE.GLTFLoader: Unsupported normalized accessor component type.")}}class Bae{constructor(e={},t={}){this.json=e,this.extensions={},this.plugins={},this.options=t,this.cache=new mae,this.associations=new Map,this.primitiveCache={},this.meshCache={refs:{},uses:{}},this.cameraCache={refs:{},uses:{}},this.lightCache={refs:{},uses:{}},this.sourceCache={},this.textureCache={},this.nodeNamesUsed={};let i=!1,r=!1,s=-1;typeof navigator<"u"&&(i=!0===/^((?!chrome|android).)*safari/i.test(navigator.userAgent),r=navigator.userAgent.indexOf("Firefox")>-1,s=r?navigator.userAgent.match(/Firefox\/([0-9]+)\./)[1]:-1),this.textureLoader=typeof createImageBitmap>"u"||i||r&&s<98?new Z7(this.options.manager):new Zoe(this.options.manager),this.textureLoader.setCrossOrigin(this.options.crossOrigin),this.textureLoader.setRequestHeader(this.options.requestHeader),this.fileLoader=new Nr(this.options.manager),this.fileLoader.setResponseType("arraybuffer"),"use-credentials"===this.options.crossOrigin&&this.fileLoader.setWithCredentials(!0)}setExtensions(e){this.extensions=e}setPlugins(e){this.plugins=e}parse(e,t){const i=this,r=this.json,s=this.extensions;this.cache.removeAll(),this._invokeAll(function(o){return o._markDefs&&o._markDefs()}),Promise.all(this._invokeAll(function(o){return o.beforeRoot&&o.beforeRoot()})).then(function(){return Promise.all([i.getDependencies("scene"),i.getDependencies("animation"),i.getDependencies("camera")])}).then(function(o){const a={scene:o[0][r.scene||0],scenes:o[0],animations:o[1],cameras:o[2],asset:r.asset,parser:i,userData:{}};l3(s,a,r),Ao(a,r),Promise.all(i._invokeAll(function(c){return c.afterRoot&&c.afterRoot(a)})).then(function(){e(a)})}).catch(t)}_markDefs(){const e=this.json.nodes||[],t=this.json.skins||[],i=this.json.meshes||[];for(let r=0,s=t.length;r<s;r++){const o=t[r].joints;for(let a=0,c=o.length;a<c;a++)e[o[a]].isBone=!0}for(let r=0,s=e.length;r<s;r++){const o=e[r];void 0!==o.mesh&&(this._addNodeRef(this.meshCache,o.mesh),void 0!==o.skin&&(i[o.mesh].isSkinnedMesh=!0)),void 0!==o.camera&&this._addNodeRef(this.cameraCache,o.camera)}}_addNodeRef(e,t){void 0!==t&&(void 0===e.refs[t]&&(e.refs[t]=e.uses[t]=0),e.refs[t]++)}_getNodeRef(e,t,i){if(e.refs[t]<=1)return i;const r=i.clone(),s=(o,a)=>{const c=this.associations.get(o);null!=c&&this.associations.set(a,c);for(const[l,u]of o.children.entries())s(u,a.children[l])};return s(i,r),r.name+="_instance_"+e.uses[t]++,r}_invokeOne(e){const t=Object.values(this.plugins);t.push(this);for(let i=0;i<t.length;i++){const r=e(t[i]);if(r)return r}return null}_invokeAll(e){const t=Object.values(this.plugins);t.unshift(this);const i=[];for(let r=0;r<t.length;r++){const s=e(t[r]);s&&i.push(s)}return i}getDependency(e,t){const i=e+":"+t;let r=this.cache.get(i);if(!r){switch(e){case"scene":r=this.loadScene(t);break;case"node":r=this.loadNode(t);break;case"mesh":r=this._invokeOne(function(s){return s.loadMesh&&s.loadMesh(t)});break;case"accessor":r=this.loadAccessor(t);break;case"bufferView":r=this._invokeOne(function(s){return s.loadBufferView&&s.loadBufferView(t)});break;case"buffer":r=this.loadBuffer(t);break;case"material":r=this._invokeOne(function(s){return s.loadMaterial&&s.loadMaterial(t)});break;case"texture":r=this._invokeOne(function(s){return s.loadTexture&&s.loadTexture(t)});break;case"skin":r=this.loadSkin(t);break;case"animation":r=this._invokeOne(function(s){return s.loadAnimation&&s.loadAnimation(t)});break;case"camera":r=this.loadCamera(t);break;default:if(r=this._invokeOne(function(s){return s!=this&&s.getDependency&&s.getDependency(e,t)}),!r)throw new Error("Unknown type: "+e)}this.cache.add(i,r)}return r}getDependencies(e){let t=this.cache.get(e);if(!t){const i=this;t=Promise.all((this.json[e+("mesh"===e?"es":"s")]||[]).map(function(s,o){return i.getDependency(e,o)})),this.cache.add(e,t)}return t}loadBuffer(e){const t=this.json.buffers[e],i=this.fileLoader;if(t.type&&"arraybuffer"!==t.type)throw new Error("THREE.GLTFLoader: "+t.type+" buffer type is not supported.");if(void 0===t.uri&&0===e)return Promise.resolve(this.extensions[xt.KHR_BINARY_GLTF].body);const r=this.options;return new Promise(function(s,o){i.load(ar.resolveURL(t.uri,r.path),s,void 0,function(){o(new Error('THREE.GLTFLoader: Failed to load buffer "'+t.uri+'".'))})})}loadBufferView(e){const t=this.json.bufferViews[e];return this.getDependency("buffer",t.buffer).then(function(i){const s=t.byteOffset||0;return i.slice(s,s+(t.byteLength||0))})}loadAccessor(e){const t=this,i=this.json,r=this.json.accessors[e];if(void 0===r.bufferView&&void 0===r.sparse){const o=op[r.type],c=!0===r.normalized,l=new(0,P2[r.componentType])(r.count*o);return Promise.resolve(new Vt(l,o,c))}const s=[];return s.push(void 0!==r.bufferView?this.getDependency("bufferView",r.bufferView):null),void 0!==r.sparse&&(s.push(this.getDependency("bufferView",r.sparse.indices.bufferView)),s.push(this.getDependency("bufferView",r.sparse.values.bufferView))),Promise.all(s).then(function(o){const a=o[0],c=op[r.type],l=P2[r.componentType],u=l.BYTES_PER_ELEMENT,h=r.byteOffset||0,d=void 0!==r.bufferView?i.bufferViews[r.bufferView].byteStride:void 0,p=!0===r.normalized;let m,g;if(d&&d!==u*c){const v=Math.floor(h/d),x="InterleavedBuffer:"+r.bufferView+":"+r.componentType+":"+v+":"+r.count;let y=t.cache.get(x);y||(m=new l(a,v*d,r.count*d/u),y=new y7(m,d/u),t.cache.add(x,y)),g=new Aa(y,c,h%d/u,p)}else m=null===a?new l(r.count*c):new l(a,h,r.count*c),g=new Vt(m,c,p);if(void 0!==r.sparse){const _=r.sparse.values.byteOffset||0,M=new(0,P2[r.sparse.indices.componentType])(o[1],r.sparse.indices.byteOffset||0,r.sparse.count*op.SCALAR),w=new l(o[2],_,r.sparse.count*c);null!==a&&(g=new Vt(g.array.slice(),g.itemSize,g.normalized));for(let D=0,b=M.length;D<b;D++){const E=M[D];if(g.setX(E,w[D*c]),c>=2&&g.setY(E,w[D*c+1]),c>=3&&g.setZ(E,w[D*c+2]),c>=4&&g.setW(E,w[D*c+3]),c>=5)throw new Error("THREE.GLTFLoader: Unsupported itemSize in sparse BufferAttribute.")}}return g})}loadTexture(e){const t=this.json,s=t.textures[e].source,o=t.images[s];let a=this.textureLoader;if(o.uri){const c=this.options.manager.getHandler(o.uri);null!==c&&(a=c)}return this.loadTextureImage(e,s,a)}loadTextureImage(e,t,i){const r=this,s=this.json,o=s.textures[e],a=s.images[t],c=(a.uri||a.bufferView)+":"+o.sampler;if(this.textureCache[c])return this.textureCache[c];const l=this.loadImageSource(t,i).then(function(u){u.flipY=!1,u.name=o.name||a.name||"";const h=(s.samplers||{})[o.sampler]||{};return u.magFilter=hD[h.magFilter]||on,u.minFilter=hD[h.minFilter]||ho,u.wrapS=dD[h.wrapS]||Ts,u.wrapT=dD[h.wrapT]||Ts,r.associations.set(u,{textures:e}),u}).catch(function(){return null});return this.textureCache[c]=l,l}loadImageSource(e,t){const r=this.json,s=this.options;if(void 0!==this.sourceCache[e])return this.sourceCache[e].then(f=>f.clone());const o=r.images[e],a=self.URL||self.webkitURL;let c=o.uri||"",l=!1;if(void 0!==o.bufferView)c=this.getDependency("bufferView",o.bufferView).then(function(f){l=!0;const h=new Blob([f],{type:o.mimeType});return c=a.createObjectURL(h),c});else if(void 0===o.uri)throw new Error("THREE.GLTFLoader: Image "+e+" is missing URI and bufferView");const u=Promise.resolve(c).then(function(f){return new Promise(function(h,d){let p=h;!0===t.isImageBitmapLoader&&(p=function(m){const g=new Hi(m);g.needsUpdate=!0,h(g)}),t.load(ar.resolveURL(f,s.path),p,void 0,d)})}).then(function(f){return!0===l&&a.revokeObjectURL(c),f.userData.mimeType=o.mimeType||function Uae(n){return n.search(/\.jpe?g($|\?)/i)>0||0===n.search(/^data\:image\/jpeg/)?"image/jpeg":n.search(/\.webp($|\?)/i)>0||0===n.search(/^data\:image\/webp/)?"image/webp":"image/png"}(o.uri),f}).catch(function(f){throw console.error("THREE.GLTFLoader: Couldn't load texture",c),f});return this.sourceCache[e]=u,u}assignTexture(e,t,i,r){const s=this;return this.getDependency("texture",i.index).then(function(o){if(!o)return null;if(void 0!==i.texCoord&&0!=i.texCoord&&!("aoMap"===t&&1==i.texCoord)&&console.warn("THREE.GLTFLoader: Custom UV set "+i.texCoord+" for texture "+t+" not yet supported."),s.extensions[xt.KHR_TEXTURE_TRANSFORM]){const a=void 0!==i.extensions?i.extensions[xt.KHR_TEXTURE_TRANSFORM]:void 0;if(a){const c=s.associations.get(o);o=s.extensions[xt.KHR_TEXTURE_TRANSFORM].extendTexture(o,a),s.associations.set(o,c)}}return void 0!==r&&(o.encoding=r),e[t]=o,o})}assignFinalMaterial(e){const t=e.geometry;let i=e.material;const r=void 0===t.attributes.tangent,s=void 0!==t.attributes.color,o=void 0===t.attributes.normal;if(e.isPoints){const a="PointsMaterial:"+i.uuid;let c=this.cache.get(a);c||(c=new w7,Bi.prototype.copy.call(c,i),c.color.copy(i.color),c.map=i.map,c.sizeAttenuation=!1,this.cache.add(a,c)),i=c}else if(e.isLine){const a="LineBasicMaterial:"+i.uuid;let c=this.cache.get(a);c||(c=new vi,Bi.prototype.copy.call(c,i),c.color.copy(i.color),this.cache.add(a,c)),i=c}if(r||s||o){let a="ClonedMaterial:"+i.uuid+":";r&&(a+="derivative-tangents:"),s&&(a+="vertex-colors:"),o&&(a+="flat-shading:");let c=this.cache.get(a);c||(c=i.clone(),s&&(c.vertexColors=!0),o&&(c.flatShading=!0),r&&(c.normalScale&&(c.normalScale.y*=-1),c.clearcoatNormalScale&&(c.clearcoatNormalScale.y*=-1)),this.cache.add(a,c),this.associations.set(c,this.associations.get(i))),i=c}i.aoMap&&void 0===t.attributes.uv2&&void 0!==t.attributes.uv&&t.setAttribute("uv2",t.attributes.uv),e.material=i}getMaterialType(){return tf}loadMaterial(e){const t=this,r=this.extensions,s=this.json.materials[e];let o;const a={},l=[];if((s.extensions||{})[xt.KHR_MATERIALS_UNLIT]){const f=r[xt.KHR_MATERIALS_UNLIT];o=f.getMaterialType(),l.push(f.extendParams(a,s,t))}else{const f=s.pbrMetallicRoughness||{};if(a.color=new ae(1,1,1),a.opacity=1,Array.isArray(f.baseColorFactor)){const h=f.baseColorFactor;a.color.fromArray(h),a.opacity=h[3]}void 0!==f.baseColorTexture&&l.push(t.assignTexture(a,"map",f.baseColorTexture,bt)),a.metalness=void 0!==f.metallicFactor?f.metallicFactor:1,a.roughness=void 0!==f.roughnessFactor?f.roughnessFactor:1,void 0!==f.metallicRoughnessTexture&&(l.push(t.assignTexture(a,"metalnessMap",f.metallicRoughnessTexture)),l.push(t.assignTexture(a,"roughnessMap",f.metallicRoughnessTexture))),o=this._invokeOne(function(h){return h.getMaterialType&&h.getMaterialType(e)}),l.push(Promise.all(this._invokeAll(function(h){return h.extendMaterialParams&&h.extendMaterialParams(e,a)})))}!0===s.doubleSided&&(a.side=2);const u=s.alphaMode||"OPAQUE";if("BLEND"===u?(a.transparent=!0,a.depthWrite=!1):(a.transparent=!1,"MASK"===u&&(a.alphaTest=void 0!==s.alphaCutoff?s.alphaCutoff:.5)),void 0!==s.normalTexture&&o!==pi&&(l.push(t.assignTexture(a,"normalMap",s.normalTexture)),a.normalScale=new q(1,1),void 0!==s.normalTexture.scale)){const f=s.normalTexture.scale;a.normalScale.set(f,f)}return void 0!==s.occlusionTexture&&o!==pi&&(l.push(t.assignTexture(a,"aoMap",s.occlusionTexture)),void 0!==s.occlusionTexture.strength&&(a.aoMapIntensity=s.occlusionTexture.strength)),void 0!==s.emissiveFactor&&o!==pi&&(a.emissive=(new ae).fromArray(s.emissiveFactor)),void 0!==s.emissiveTexture&&o!==pi&&l.push(t.assignTexture(a,"emissiveMap",s.emissiveTexture,bt)),Promise.all(l).then(function(){const f=new o(a);return s.name&&(f.name=s.name),Ao(f,s),t.associations.set(f,{materials:e}),s.extensions&&l3(r,f,s),f})}createUniqueName(e){const t=At.sanitizeNodeName(e||"");let i=t;for(let r=1;this.nodeNamesUsed[i];++r)i=t+"_"+r;return this.nodeNamesUsed[i]=!0,i}loadGeometries(e){const t=this,i=this.extensions,r=this.primitiveCache;function s(a){return i[xt.KHR_DRACO_MESH_COMPRESSION].decodePrimitive(a,t).then(function(c){return gD(c,a,t)})}const o=[];for(let a=0,c=e.length;a<c;a++){const l=e[a],u=Hae(l),f=r[u];if(f)o.push(f.promise);else{let h;h=l.extensions&&l.extensions[xt.KHR_DRACO_MESH_COMPRESSION]?s(l):gD(new Ze,l,t),r[u]={primitive:l,promise:h},o.push(h)}}return Promise.all(o)}loadMesh(e){const t=this,r=this.extensions,s=this.json.meshes[e],o=s.primitives,a=[];for(let c=0,l=o.length;c<l;c++){const u=void 0===o[c].material?(void 0===(n=this.cache).DefaultMaterial&&(n.DefaultMaterial=new tf({color:16777215,emissive:0,metalness:1,roughness:1,transparent:!1,depthTest:!0,side:0})),n.DefaultMaterial):this.getDependency("material",o[c].material);a.push(u)}var n;return a.push(t.loadGeometries(o)),Promise.all(a).then(function(c){const l=c.slice(0,c.length-1),u=c[c.length-1],f=[];for(let d=0,p=u.length;d<p;d++){const m=u[d],g=o[d];let v;const x=l[d];if(g.mode===cr.TRIANGLES||g.mode===cr.TRIANGLE_STRIP||g.mode===cr.TRIANGLE_FAN||void 0===g.mode)v=!0===s.isSkinnedMesh?new x7(m,x):new an(m,x),!0===v.isSkinnedMesh&&!v.geometry.attributes.skinWeight.normalized&&v.normalizeSkinWeights(),g.mode===cr.TRIANGLE_STRIP?v.geometry=vD(v.geometry,1):g.mode===cr.TRIANGLE_FAN&&(v.geometry=vD(v.geometry,2));else if(g.mode===cr.LINES)v=new M7(m,x);else if(g.mode===cr.LINE_STRIP)v=new wo(m,x);else if(g.mode===cr.LINE_LOOP)v=new vE(m,x);else{if(g.mode!==cr.POINTS)throw new Error("THREE.GLTFLoader: Primitive mode unsupported: "+g.mode);v=new U0(m,x)}Object.keys(v.geometry.morphAttributes).length>0&&Vae(v,s),v.name=t.createUniqueName(s.name||"mesh_"+e),Ao(v,s),g.extensions&&l3(r,v,g),t.assignFinalMaterial(v),f.push(v)}for(let d=0,p=f.length;d<p;d++)t.associations.set(f[d],{meshes:e,primitives:d});if(1===f.length)return f[0];const h=new sr;t.associations.set(h,{meshes:e});for(let d=0,p=f.length;d<p;d++)h.add(f[d]);return h})}loadCamera(e){let t;const i=this.json.cameras[e],r=i[i.type];if(r)return"perspective"===i.type?t=new Pn(Tr.radToDeg(r.yfov),r.aspectRatio||1,r.znear||1,r.zfar||2e6):"orthographic"===i.type&&(t=new Wl(-r.xmag,r.xmag,r.ymag,-r.ymag,r.znear,r.zfar)),i.name&&(t.name=this.createUniqueName(i.name)),Ao(t,i),Promise.resolve(t);console.warn("THREE.GLTFLoader: Missing camera parameters.")}loadSkin(e){const t=this.json.skins[e],i=[];for(let r=0,s=t.joints.length;r<s;r++)i.push(this.getDependency("node",t.joints[r]));return i.push(void 0!==t.inverseBindMatrices?this.getDependency("accessor",t.inverseBindMatrices):null),Promise.all(i).then(function(r){const s=r.pop(),o=r,a=[],c=[];for(let l=0,u=o.length;l<u;l++){const f=o[l];if(f){a.push(f);const h=new Ce;null!==s&&h.fromArray(s.array,16*l),c.push(h)}else console.warn('THREE.GLTFLoader: Joint "%s" could not be found.',t.joints[l])}return new Jl(a,c)})}loadAnimation(e){const i=this.json.animations[e],r=[],s=[],o=[],a=[],c=[];for(let l=0,u=i.channels.length;l<u;l++){const f=i.channels[l],h=i.samplers[f.sampler],d=f.target,m=void 0!==i.parameters?i.parameters[h.input]:h.input,g=void 0!==i.parameters?i.parameters[h.output]:h.output;r.push(this.getDependency("node",d.node)),s.push(this.getDependency("accessor",m)),o.push(this.getDependency("accessor",g)),a.push(h),c.push(d)}return Promise.all([Promise.all(r),Promise.all(s),Promise.all(o),Promise.all(a),Promise.all(c)]).then(function(l){const u=l[0],f=l[1],h=l[2],d=l[3],p=l[4],m=[];for(let v=0,x=u.length;v<x;v++){const y=u[v],_=f[v],M=h[v],w=d[v],D=p[v];if(void 0===y)continue;let b;switch(y.updateMatrix(),Do[D.path]){case Do.weights:b=D2;break;case Do.rotation:b=So;break;default:b=T2}const E=y.name?y.name:y.uuid,I=void 0!==w.interpolation?Fae[w.interpolation]:Y1,z=[];Do[D.path]===Do.weights?y.traverse(function(P){P.morphTargetInfluences&&z.push(P.name?P.name:P.uuid)}):z.push(E);let U=M.array;if(M.normalized){const P=lp(U.constructor),L=new Float32Array(U.length);for(let F=0,H=U.length;F<H;F++)L[F]=U[F]*P;U=L}for(let P=0,L=z.length;P<L;P++){const F=new b(z[P]+"."+Do[D.path],_.array,U,I);"CUBICSPLINE"===w.interpolation&&(F.createInterpolant=function(X){return new(this instanceof So?Nae:fD)(this.times,this.values,this.getValueSize()/3,X)},F.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline=!0),m.push(F)}}return new I2(i.name?i.name:"animation_"+e,void 0,m)})}createNodeMesh(e){const i=this,r=this.json.nodes[e];return void 0===r.mesh?null:i.getDependency("mesh",r.mesh).then(function(s){const o=i._getNodeRef(i.meshCache,r.mesh,s);return void 0!==r.weights&&o.traverse(function(a){if(a.isMesh)for(let c=0,l=r.weights.length;c<l;c++)a.morphTargetInfluences[c]=r.weights[c]}),o})}loadNode(e){const i=this.extensions,r=this,s=this.json.nodes[e],o=s.name?r.createUniqueName(s.name):"";return function(){const a=[],c=r._invokeOne(function(l){return l.createNodeMesh&&l.createNodeMesh(e)});return c&&a.push(c),void 0!==s.camera&&a.push(r.getDependency("camera",s.camera).then(function(l){return r._getNodeRef(r.cameraCache,s.camera,l)})),r._invokeAll(function(l){return l.createNodeAttachment&&l.createNodeAttachment(e)}).forEach(function(l){a.push(l)}),Promise.all(a)}().then(function(a){let c;if(c=!0===s.isBone?new Yl:a.length>1?new sr:1===a.length?a[0]:new pn,c!==a[0])for(let l=0,u=a.length;l<u;l++)c.add(a[l]);if(s.name&&(c.userData.name=s.name,c.name=o),Ao(c,s),s.extensions&&l3(i,c,s),void 0!==s.matrix){const l=new Ce;l.fromArray(s.matrix),c.applyMatrix4(l)}else void 0!==s.translation&&c.position.fromArray(s.translation),void 0!==s.rotation&&c.quaternion.fromArray(s.rotation),void 0!==s.scale&&c.scale.fromArray(s.scale);return r.associations.has(c)||r.associations.set(c,{}),r.associations.get(c).nodes=e,c})}loadScene(e){const t=this.json,i=this.extensions,r=this.json.scenes[e],s=this,o=new sr;r.name&&(o.name=s.createUniqueName(r.name)),Ao(o,r),r.extensions&&l3(i,o,r);const a=r.nodes||[],c=[];for(let l=0,u=a.length;l<u;l++)c.push(mD(a[l],o,t,s));return Promise.all(c).then(function(){return s.associations=(u=>{const f=new Map;for(const[h,d]of s.associations)(h instanceof Bi||h instanceof Hi)&&f.set(h,d);return u.traverse(h=>{const d=s.associations.get(h);null!=d&&f.set(h,d)}),f})(o),o})}}function mD(n,e,t,i){const r=t.nodes[n];return i.getDependency("node",n).then(function(s){return void 0===r.skin?s:i.getDependency("skin",r.skin).then(function(o){return s.traverse(function(a){!a.isSkinnedMesh||a.bind(o,a.matrixWorld)}),s})}).then(function(s){e.add(s);const o=[];if(r.children){const a=r.children;for(let c=0,l=a.length;c<l;c++)o.push(mD(a[c],s,t,i))}return Promise.all(o)})}function gD(n,e,t){const i=e.attributes,r=[];function s(o,a){return t.getDependency("accessor",o).then(function(c){n.setAttribute(a,c)})}for(const o in i){const a=ap[o]||o.toLowerCase();a in n.attributes||r.push(s(i[o],a))}if(void 0!==e.indices&&!n.index){const o=t.getDependency("accessor",e.indices).then(function(a){n.setIndex(a)});r.push(o)}return Ao(n,e),function Gae(n,e,t){const i=e.attributes,r=new _a;if(void 0===i.POSITION)return;{const a=t.json.accessors[i.POSITION],c=a.min,l=a.max;if(void 0===c||void 0===l)return void console.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION.");if(r.set(new C(c[0],c[1],c[2]),new C(l[0],l[1],l[2])),a.normalized){const u=lp(P2[a.componentType]);r.min.multiplyScalar(u),r.max.multiplyScalar(u)}}const s=e.targets;if(void 0!==s){const a=new C,c=new C;for(let l=0,u=s.length;l<u;l++){const f=s[l];if(void 0!==f.POSITION){const h=t.json.accessors[f.POSITION],d=h.min,p=h.max;if(void 0!==d&&void 0!==p){if(c.setX(Math.max(Math.abs(d[0]),Math.abs(p[0]))),c.setY(Math.max(Math.abs(d[1]),Math.abs(p[1]))),c.setZ(Math.max(Math.abs(d[2]),Math.abs(p[2]))),h.normalized){const m=lp(P2[h.componentType]);c.multiplyScalar(m)}a.max(c)}else console.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION.")}}r.expandByVector(a)}n.boundingBox=r;const o=new wa;r.getCenter(o.center),o.radius=r.min.distanceTo(r.max)/2,n.boundingSphere=o}(n,e,t),Promise.all(r).then(function(){return void 0!==e.targets?function kae(n,e,t){let i=!1,r=!1,s=!1;for(let l=0,u=e.length;l<u;l++){const f=e[l];if(void 0!==f.POSITION&&(i=!0),void 0!==f.NORMAL&&(r=!0),void 0!==f.COLOR_0&&(s=!0),i&&r&&s)break}if(!i&&!r&&!s)return Promise.resolve(n);const o=[],a=[],c=[];for(let l=0,u=e.length;l<u;l++){const f=e[l];if(i){const h=void 0!==f.POSITION?t.getDependency("accessor",f.POSITION):n.attributes.position;o.push(h)}if(r){const h=void 0!==f.NORMAL?t.getDependency("accessor",f.NORMAL):n.attributes.normal;a.push(h)}if(s){const h=void 0!==f.COLOR_0?t.getDependency("accessor",f.COLOR_0):n.attributes.color;c.push(h)}}return Promise.all([Promise.all(o),Promise.all(a),Promise.all(c)]).then(function(l){const f=l[1],h=l[2];return i&&(n.morphAttributes.position=l[0]),r&&(n.morphAttributes.normal=f),s&&(n.morphAttributes.color=h),n.morphTargetsRelative=!0,n})}(n,e.targets,t):n})}function vD(n,e){let t=n.getIndex();if(null===t){const o=[],a=n.getAttribute("position");if(void 0===a)return console.error("THREE.GLTFLoader.toTrianglesDrawMode(): Undefined position attribute. Processing not possible."),n;for(let c=0;c<a.count;c++)o.push(c);n.setIndex(o),t=n.getIndex()}const i=t.count-2,r=[];if(2===e)for(let o=1;o<=i;o++)r.push(t.getX(0)),r.push(t.getX(o)),r.push(t.getX(o+1));else for(let o=0;o<i;o++)o%2==0?(r.push(t.getX(o)),r.push(t.getX(o+1)),r.push(t.getX(o+2))):(r.push(t.getX(o+2)),r.push(t.getX(o+1)),r.push(t.getX(o)));r.length/3!==i&&console.error("THREE.GLTFLoader.toTrianglesDrawMode(): Unable to generate correct amount of triangles.");const s=n.clone();return s.setIndex(r),s}const yD_vertex="\n    attribute float scale;\n    varying vec2 vUv;\n    varying vec3 vPosition;\n    void main() {\n        vUv = uv ;\n        vPosition = position;\n        vec4 mvPosition = modelViewMatrix * vec4( position, 1.0 );\n        gl_PointSize = 3.;//scale * ( 300.0 / - mvPosition.z );\n        gl_Position = projectionMatrix * mvPosition;\n    }",yD_fragment="\n    uniform vec3 color;\n    varying vec2 vUv;\n    varying vec3 vPosition;\n    uniform float u_time;\n    void main() {\n        vec2 uv = vec2(abs(sin(vPosition.x)), abs(sin(vPosition.z)))*.5; \n        vec2 uv2 = vec2(vPosition.x,vPosition.z)*.01; \n        vec2 uv1 = vec2(gl_PointCoord.x, 1. - gl_PointCoord.y); \n      if ( length( gl_PointCoord - vec2( 0.5, 0.5 ) ) > 0.475 ) discard;\n      gl_FragColor = vec4(.5,abs(sin(uv2.x+u_time*.02)),abs(sin(uv2.y+u_time*.02)),1.);\n  }",_D_vertex="\n      attribute float scale;\n      varying vec2 vUv;\n      varying vec3 vPosition;\n      void main() {\n          vUv = uv ;\n          vPosition = position;\n          vec4 mvPosition = modelViewMatrix * vec4( position, 1.0 );\n          gl_PointSize = 3.;//scale * ( 300.0 / - mvPosition.z );\n          gl_Position = projectionMatrix * mvPosition;\n      }",_D_fragment="\n      uniform vec3 color;\n      varying vec2 vUv;\n      varying vec3 vPosition;\n      uniform float u_time;\n      float getDistance(float xB, float yB) { \n        return sqrt(xB + yB);\n      }\n      void main() {\n        if ( length( gl_PointCoord - vec2( 0.5, 0.5 ) ) > 0.475 ) discard;\n        gl_FragColor = vec4(color,2./getDistance(vPosition.z, vPosition.x));\n    }",xD_vertex="\n      varying vec2 vUv;\n      void main() {\n        vUv = uv;\n        gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n      }",xD_fragment="\n        uniform vec4      iMouse; \n        uniform vec3 iResolution;\n        uniform float iTime;\n        float mat = 0.0;\n        float ss = 0.1;\n        varying vec2 vUv;\n        const int MAX_ITER = 8;\n        float field(vec3 p, float s, int iter){\n            float accum = s / 4.0;\n            float prev = 0.0;\n            float tw = 0.0;\n            for (int i = 0; i < MAX_ITER; ++i){\n                if (i >= iter) // drop from the loop if the number of iterations has been completed - workaround for GLSL loop index limitation\n                {\n                    break;\n                }\n                float mag = dot(p, p);\n                p = abs(p) / mag + vec3(-0.5, -0.4, -1.487);\n                float w = exp(-float(i) / 5.0);\n                accum += w * exp(-9.025 * pow(abs(mag - prev), 2.2));\n                tw += w;\n                prev = mag;\n            }\n            return max(0.0, 5.2 * accum / tw - 0.65);\n        }\n\n        vec3 nrand3(vec2 co) {\n            vec3 a = fract(cos(co.x*8.3e-3 + co.y) * vec3(1.3e5, 4.7e5, 2.9e5));\n            vec3 b = fract(sin(co.x*0.3e-3 + co.y) * vec3(8.1e5, 1.0e5, 0.1e5));\n            vec3 c = mix(a, b, 0.5);\n            return c;\n        }\n\n        vec4 starLayer(vec2 p, float time) {\n            vec2 seed = 1.9 * p.xy;\n            seed = floor(seed * max(iResolution.x, 600.0) / 1.5);\n            vec3 rnd = nrand3(seed);\n            vec4 col = vec4(pow(rnd.y, 17.0));\n            float mul = 10.0 * rnd.x;\n            col.xyz *= sin(time * mul + mul) * 0.25 + 1.0;\n            return col;\n        }\n\n        void mainImage( out vec4 fragColor, in vec2 fragCoord ) {\n            float time = iTime / (iResolution.x / 1000.0);\n            \n            // first layer of the kaliset fractal\n            vec2 uv = 2.0 * fragCoord / iResolution.xy - 1.0;\n                vec2 uvs = uv * iResolution.xy / max(iResolution.x, iResolution.y);\n            vec3 p = vec3(uvs / 2.5, 0.0) + vec3(0.8, -1.3, 0.0);\n            p += 0.45 * vec3(sin(time / 32.0), sin(time / 24.0), sin(time / 64.0));\n            \n            // adjust first layer position based on mouse movement\n            p.x += mix(-0.02, 0.02, (iMouse.x / iResolution.x));\n            p.y += mix(-0.02, 0.02, (iMouse.y / iResolution.y));\n            \n            // float freqs[4];\n            // freqs[0] = 0.45;\n            // freqs[1] = 0.4;\n            // freqs[2] = 0.15;\n            // freqs[3] = 0.9;\n\n            // float t = field(p, freqs[2], 13);\n            // float v = (1.0 - exp((abs(uv.x) - 1.0) * 6.0)) * (1.0 - exp((abs(uv.y) - 1.0) * 6.0));\n            \n            // second layer of the kaliset fractal\n            vec3 p2 = vec3(uvs / (4.0 + sin(time * 0.11) * 0.2 + 0.2 + sin(time * 0.15) * 0.3 + 0.4), 4.0) + vec3(2.0, -1.3, -1.0);\n            p2 += 0.16 * vec3(sin(time / 32.0), sin(time / 24.0), sin(time / 64.0));\n            \n            // adjust second layer position based on mouse movement\n            p2.x += mix(-0.01, 0.01, (iMouse.x / iResolution.x));\n            p2.y += mix(-0.01, 0.01, (iMouse.y / iResolution.y));\n            //float t2 = field(p2, freqs[3], 18);\n            //vec4 c2 = mix(0.5, 0.2, v) * vec4(5.5 * t2 * t2 * t2, 2.1 * t2 * t2, 2.2 * t2 * freqs[0], t2);\n            \n            // add stars (source: https://glslsandbox.com/e#6904.0)\n            vec4 starColour = vec4(0.0);\n            starColour += starLayer(p.xy, time); // add first layer of stars\n            starColour += starLayer(p2.xy, time); // add second layer of stars\n\n            const float brightness = 0.50;\n            // vec4 colour = mix(freqs[3] - 0.3, 1.0, v) * vec4(1.5 * freqs[2] * t * t * t, 1.2 * freqs[1] * t * t, freqs[3] * t, 1.0) + c2 + starColour;\n            fragColor = vec4(brightness * starColour.xyz, 1.0);\n        }\n  \n        void main() {\n            gl_FragColor = vec4(1.,1.,1.,1.);\n            mainImage(gl_FragColor, gl_FragCoord.xy);\n        }";class Wae{constructor(e){this.count=0,this.uniforms={color:{value:new ae(16777215)},u_time:{value:0}},console.log("Waves"),this.scene=e,this.createWave()}createWave(){this.positions=new Float32Array(7500),this.scales=new Float32Array(2500);let t=0,i=0;for(let o=0;o<50;o++)for(let a=0;a<50;a++)this.positions[t]=5*o*(50-a)*(t%2==0?.05:-.05),this.positions[t+1]=0,this.positions[t+2]=5*Math.floor(a/2)*2-125,this.scales[i]=2,t+=3,i++;const r=new Ze;r.setAttribute("position",new Vt(this.positions,3)),r.setAttribute("scale",new Vt(this.scales,1));const s=new Wi({uniforms:this.uniforms,vertexShader:yD_vertex,fragmentShader:yD_fragment});return this.particles=new U0(r,s),this.scene.add(this.particles),this.particles}render(){let e=0,t=0;this.uniforms.u_time.value++;for(let i=0;i<50;i++)for(let r=0;r<50;r++)this.positions[e+1]=5*Math.sin(.3*(i+this.count))*.1+5*Math.sin(.3*(r+this.count))*.3,this.scales[t]=1*(Math.sin(.3*(i+this.count))+1)+1*(Math.sin(.5*(r+this.count))+1),e+=3,t++;this.particles.geometry.attributes.position.needsUpdate=!0,this.particles.geometry.attributes.scale.needsUpdate=!0,this.count+=.1,this.particles.position.set(0,-50,70)}}class jae{constructor(e){this.uniforms={iResolution:{value:new C(1024,1024,1024)},iTime:{value:1},iMouse:{value:new ft},uPerspective:{value:.1},uViewport:{value:new ft(1,1,128,128)},uMaterialColor:{value:new ft(.1,1,1,1)}},this.mesh=new an(new g2(2048,1024),new Wi({uniforms:this.uniforms,vertexShader:xD_vertex,fragmentShader:xD_fragment})),e?.add(this.mesh),this.mesh.position.set(0,0,-400)}render(){this.uniforms.iTime.value+=.01}}const $t="https://hututusoftwares.com/",$ae=`${$t}3D/Parrot.glb`,qae=`${$t}3D/WoodenBow.fbx`,Zae=`${$t}3D/Bow.jpg`,Xae=`${$t}images/apple-touch-icon-72x72.png`,Yae=`${$t}3D/android.jpg`,Kae=`${$t}3D/three.jpg`,Jae=`${$t}3D/node.jpg`,Qae=`${$t}3D/games.jpg`;var bD={},fp=function(n){return URL.createObjectURL(new Blob([n],{type:"text/javascript"}))},MD=function(n){return new Worker(n)};try{URL.revokeObjectURL(fp(""))}catch{fp=function(e){return"data:application/javascript;charset=UTF-8,"+encodeURI(e)},MD=function(e){return new Worker(e,{type:"module"})}}var pt=Uint8Array,kn=Uint16Array,Hs=Uint32Array,z2=new pt([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),N2=new pt([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),h3=new pt([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),wD=function(n,e){for(var t=new kn(31),i=0;i<31;++i)t[i]=e+=1<<n[i-1];var r=new Hs(t[30]);for(i=1;i<30;++i)for(var s=t[i];s<t[i+1];++s)r[s]=s-t[i]<<5|i;return[t,r]},CD=wD(z2,2),hp=CD[0],mf=CD[1];hp[28]=258,mf[258]=28;for(var SD=wD(N2,0),ED=SD[0],dp=SD[1],d3=new kn(32768),Wt=0;Wt<32768;++Wt){var To=(43690&Wt)>>>1|(21845&Wt)<<1;d3[Wt]=((65280&(To=(61680&(To=(52428&To)>>>2|(13107&To)<<2))>>>4|(3855&To)<<4))>>>8|(255&To)<<8)>>>1}var lr=function(n,e,t){for(var i=n.length,r=0,s=new kn(e);r<i;++r)++s[n[r]-1];var a,o=new kn(e);for(r=0;r<e;++r)o[r]=o[r-1]+s[r-1]<<1;if(t){a=new kn(1<<e);var c=15-e;for(r=0;r<i;++r)if(n[r])for(var l=r<<4|n[r],u=e-n[r],f=o[n[r]-1]++<<u,h=f|(1<<u)-1;f<=h;++f)a[d3[f]>>>c]=l}else for(a=new kn(i),r=0;r<i;++r)n[r]&&(a[r]=d3[o[n[r]-1]++]>>>15-n[r]);return a},Us=new pt(288);for(Wt=0;Wt<144;++Wt)Us[Wt]=8;for(Wt=144;Wt<256;++Wt)Us[Wt]=9;for(Wt=256;Wt<280;++Wt)Us[Wt]=7;for(Wt=280;Wt<288;++Wt)Us[Wt]=8;var F2=new pt(32);for(Wt=0;Wt<32;++Wt)F2[Wt]=5;var DD=lr(Us,9,0),AD=lr(Us,9,1),TD=lr(F2,5,0),ID=lr(F2,5,1),gf=function(n){for(var e=n[0],t=1;t<n.length;++t)n[t]>e&&(e=n[t]);return e},ur=function(n,e,t){var i=e/8|0;return(n[i]|n[i+1]<<8)>>(7&e)&t},vf=function(n,e){var t=e/8|0;return(n[t]|n[t+1]<<8|n[t+2]<<16)>>(7&e)},p3=function(n){return(n/8|0)+(7&n&&1)},fr=function(n,e,t){(null==e||e<0)&&(e=0),(null==t||t>n.length)&&(t=n.length);var i=new(n instanceof kn?kn:n instanceof Hs?Hs:pt)(t-e);return i.set(n.subarray(e,t)),i},m3=function(n,e,t){var i=n.length;if(!i||t&&!t.l&&i<5)return e||new pt(0);var r=!e||t,s=!t||t.i;t||(t={}),e||(e=new pt(3*i));var o=function(W){var Oe=e.length;if(W>Oe){var ye=new pt(Math.max(2*Oe,W));ye.set(e),e=ye}},a=t.f||0,c=t.p||0,l=t.b||0,u=t.l,f=t.d,h=t.m,d=t.n,p=8*i;do{if(!u){t.f=a=ur(n,c,1);var m=ur(n,c+1,3);if(c+=3,!m){var v=n[(g=p3(c)+4)-4]|n[g-3]<<8,x=g+v;if(x>i){if(s)throw"unexpected EOF";break}r&&o(l+v),e.set(n.subarray(g,x),l),t.b=l+=v,t.p=c=8*x;continue}if(1==m)u=AD,f=ID,h=9,d=5;else{if(2!=m)throw"invalid block type";var y=ur(n,c,31)+257,_=ur(n,c+10,15)+4,M=y+ur(n,c+5,31)+1;c+=14;for(var w=new pt(M),D=new pt(19),b=0;b<_;++b)D[h3[b]]=ur(n,c+3*b,7);c+=3*_;var E=gf(D),I=(1<<E)-1,z=lr(D,E,1);for(b=0;b<M;){var g,U=z[ur(n,c,I)];if(c+=15&U,(g=U>>>4)<16)w[b++]=g;else{var P=0,L=0;for(16==g?(L=3+ur(n,c,3),c+=2,P=w[b-1]):17==g?(L=3+ur(n,c,7),c+=3):18==g&&(L=11+ur(n,c,127),c+=7);L--;)w[b++]=P}}var F=w.subarray(0,y),H=w.subarray(y);h=gf(F),d=gf(H),u=lr(F,h,1),f=lr(H,d,1)}if(c>p){if(s)throw"unexpected EOF";break}}r&&o(l+131072);for(var X=(1<<h)-1,B=(1<<d)-1,te=c;;te=c){var Y=(P=u[vf(n,c)&X])>>>4;if((c+=15&P)>p){if(s)throw"unexpected EOF";break}if(!P)throw"invalid length/literal";if(Y<256)e[l++]=Y;else{if(256==Y){te=c,u=null;break}var k=Y-254;Y>264&&(k=ur(n,c,(1<<(V=z2[b=Y-257]))-1)+hp[b],c+=V);var ie=f[vf(n,c)&B],ne=ie>>>4;if(!ie)throw"invalid distance";if(c+=15&ie,H=ED[ne],ne>3){var V=N2[ne];H+=vf(n,c)&(1<<V)-1,c+=V}if(c>p){if(s)throw"unexpected EOF";break}r&&o(l+131072);for(var se=l+k;l<se;l+=4)e[l]=e[l-H],e[l+1]=e[l+1-H],e[l+2]=e[l+2-H],e[l+3]=e[l+3-H];l=se}}t.l=u,t.p=te,t.b=l,u&&(a=1,t.m=h,t.d=f,t.n=d)}while(!a);return l==e.length?e:fr(e,0,l)},es=function(n,e,t){var i=e/8|0;n[i]|=t<<=7&e,n[i+1]|=t>>>8},O2=function(n,e,t){var i=e/8|0;n[i]|=t<<=7&e,n[i+1]|=t>>>8,n[i+2]|=t>>>16},yf=function(n,e){for(var t=[],i=0;i<n.length;++i)n[i]&&t.push({s:i,f:n[i]});var r=t.length,s=t.slice();if(!r)return[Bs,0];if(1==r){var o=new pt(t[0].s+1);return o[t[0].s]=1,[o,1]}t.sort(function(M,w){return M.f-w.f}),t.push({s:-1,f:25001});var a=t[0],c=t[1],l=0,u=1,f=2;for(t[0]={s:-1,f:a.f+c.f,l:a,r:c};u!=r-1;)a=t[t[l].f<t[f].f?l++:f++],c=t[l!=u&&t[l].f<t[f].f?l++:f++],t[u++]={s:-1,f:a.f+c.f,l:a,r:c};var h=s[0].s;for(i=1;i<r;++i)s[i].s>h&&(h=s[i].s);var d=new kn(h+1),p=_f(t[u-1],d,0);if(p>e){i=0;var m=0,g=p-e,v=1<<g;for(s.sort(function(w,D){return d[D.s]-d[w.s]||w.f-D.f});i<r;++i){var x=s[i].s;if(!(d[x]>e))break;m+=v-(1<<p-d[x]),d[x]=e}for(m>>>=g;m>0;){var y=s[i].s;d[y]<e?m-=1<<e-d[y]++-1:++i}for(;i>=0&&m;--i){var _=s[i].s;d[_]==e&&(--d[_],++m)}p=e}return[new pt(d),p]},_f=function(n,e,t){return-1==n.s?Math.max(_f(n.l,e,t+1),_f(n.r,e,t+1)):e[n.s]=t},pp=function(n){for(var e=n.length;e&&!n[--e];);for(var t=new kn(++e),i=0,r=n[0],s=1,o=function(c){t[i++]=c},a=1;a<=e;++a)if(n[a]==r&&a!=e)++s;else{if(!r&&s>2){for(;s>138;s-=138)o(32754);s>2&&(o(s>10?s-11<<5|28690:s-3<<5|12305),s=0)}else if(s>3){for(o(r),--s;s>6;s-=6)o(8304);s>2&&(o(s-3<<5|8208),s=0)}for(;s--;)o(r);s=1,r=n[a]}return[t.subarray(0,i),e]},k2=function(n,e){for(var t=0,i=0;i<e.length;++i)t+=n[i]*e[i];return t},g3=function(n,e,t){var i=t.length,r=p3(e+2);n[r]=255&i,n[r+1]=i>>>8,n[r+2]=255^n[r],n[r+3]=255^n[r+1];for(var s=0;s<i;++s)n[r+s+4]=t[s];return 8*(r+4+i)},mp=function(n,e,t,i,r,s,o,a,c,l,u){es(e,u++,t),++r[256];for(var f=yf(r,15),h=f[0],d=f[1],p=yf(s,15),m=p[0],g=p[1],v=pp(h),x=v[0],y=v[1],_=pp(m),M=_[0],w=_[1],D=new kn(19),b=0;b<x.length;++b)D[31&x[b]]++;for(b=0;b<M.length;++b)D[31&M[b]]++;for(var E=yf(D,7),I=E[0],z=E[1],U=19;U>4&&!I[h3[U-1]];--U);var H,X,B,te,P=l+5<<3,L=k2(r,Us)+k2(s,F2)+o,F=k2(r,h)+k2(s,m)+o+14+3*U+k2(D,I)+(2*D[16]+3*D[17]+7*D[18]);if(P<=L&&P<=F)return g3(e,u,n.subarray(c,c+l));if(es(e,u,1+(F<L)),u+=2,F<L){H=lr(h,d,0),X=h,B=lr(m,g,0),te=m;var Y=lr(I,z,0);for(es(e,u,y-257),es(e,u+5,w-1),es(e,u+10,U-4),u+=14,b=0;b<U;++b)es(e,u+3*b,I[h3[b]]);u+=3*U;for(var k=[x,M],V=0;V<2;++V){var ie=k[V];for(b=0;b<ie.length;++b)es(e,u,Y[ne=31&ie[b]]),u+=I[ne],ne>15&&(es(e,u,ie[b]>>>5&127),u+=ie[b]>>>12)}}else H=DD,X=Us,B=TD,te=F2;for(b=0;b<a;++b)if(i[b]>255){var ne;O2(e,u,H[257+(ne=i[b]>>>18&31)]),u+=X[ne+257],ne>7&&(es(e,u,i[b]>>>23&31),u+=z2[ne]);var se=31&i[b];O2(e,u,B[se]),u+=te[se],se>3&&(O2(e,u,i[b]>>>5&8191),u+=N2[se])}else O2(e,u,H[i[b]]),u+=X[i[b]];return O2(e,u,H[256]),u+X[256]},LD=new Hs([65540,131080,131088,131104,262176,1048704,1048832,2114560,2117632]),Bs=new pt(0),RD=function(n,e,t,i,r,s){var o=n.length,a=new pt(i+o+5*(1+Math.ceil(o/7e3))+r),c=a.subarray(i,a.length-r),l=0;if(!e||o<8)for(var u=0;u<=o;u+=65535){var f=u+65535;f<o?l=g3(c,l,n.subarray(u,f)):(c[u]=s,l=g3(c,l,n.subarray(u,o)))}else{for(var h=LD[e-1],d=h>>>13,p=8191&h,m=(1<<t)-1,g=new kn(32768),v=new kn(m+1),x=Math.ceil(t/3),y=2*x,_=function(ce){return(n[ce]^n[ce+1]<<x^n[ce+2]<<y)&m},M=new Hs(25e3),w=new kn(288),D=new kn(32),b=0,E=0,I=(u=0,0),z=0,U=0;u<o;++u){var P=_(u),L=32767&u,F=v[P];if(g[L]=F,v[P]=L,z<=u){var H=o-u;if((b>7e3||I>24576)&&H>423){l=mp(n,c,0,M,w,D,E,I,U,u-U,l),I=b=E=0,U=u;for(var X=0;X<286;++X)w[X]=0;for(X=0;X<30;++X)D[X]=0}var B=2,te=0,Y=p,k=L-F&32767;if(H>2&&P==_(u-k))for(var V=Math.min(d,H)-1,ie=Math.min(32767,u),ne=Math.min(258,H);k<=ie&&--Y&&L!=F;){if(n[u+B]==n[u+B-k]){for(var se=0;se<ne&&n[u+se]==n[u+se-k];++se);if(se>B){if(B=se,te=k,se>V)break;var W=Math.min(k,se-2),Oe=0;for(X=0;X<W;++X){var ye=u-k+X+32768&32767,pe=ye-g[ye]+32768&32767;pe>Oe&&(Oe=pe,F=ye)}}}k+=(L=F)-(F=g[L])+32768&32767}if(te){M[I++]=268435456|mf[B]<<18|dp[te];var rt=31&mf[B],J=31&dp[te];E+=z2[rt]+N2[J],++w[257+rt],++D[J],z=u+B,++b}else M[I++]=n[u],++w[n[u]]}}l=mp(n,c,s,M,w,D,E,I,U,u-U,l),!s&&7&l&&(l=g3(c,l+1,Bs))}return fr(a,0,i+p3(l)+r)},PD=function(){for(var n=new Hs(256),e=0;e<256;++e){for(var t=e,i=9;--i;)t=(1&t&&3988292384)^t>>>1;n[e]=t}return n}(),V2=function(){var n=-1;return{p:function(e){for(var t=n,i=0;i<e.length;++i)t=PD[255&t^e[i]]^t>>>8;n=t},d:function(){return~n}}},gp=function(){var n=1,e=0;return{p:function(t){for(var i=n,r=e,s=t.length,o=0;o!=s;){for(var a=Math.min(o+2655,s);o<a;++o)r+=i+=t[o];i=(65535&i)+15*(i>>16),r=(65535&r)+15*(r>>16)}n=i,e=r},d:function(){return(255&(n%=65521))<<24|n>>>8<<16|(255&(e%=65521))<<8|e>>>8}}},ka=function(n,e,t,i,r){return RD(n,null==e.level?6:e.level,null==e.mem?Math.ceil(1.5*Math.max(8,Math.min(13,Math.log(n.length)))):12+e.mem,t,i,!r)},v3=function(n,e){var t={};for(var i in n)t[i]=n[i];for(var i in e)t[i]=e[i];return t},zD=function(n,e,t){for(var i=n(),r=n.toString(),s=r.slice(r.indexOf("[")+1,r.lastIndexOf("]")).replace(/ /g,"").split(","),o=0;o<i.length;++o){var a=i[o],c=s[o];if("function"==typeof a){e+=";"+c+"=";var l=a.toString();if(a.prototype)if(-1!=l.indexOf("[native code]")){var u=l.indexOf(" ",8)+1;e+=l.slice(u,l.indexOf("(",u))}else for(var f in e+=l,a.prototype)e+=";"+c+".prototype."+f+"="+a.prototype[f].toString();else e+=l}else t[c]=a}return[e,t]},xf=[],ND=function(n,e,t,i){var r;if(!xf[t]){for(var s="",o={},a=n.length-1,c=0;c<a;++c)s=(r=zD(n[c],s,o))[0],o=r[1];xf[t]=zD(n[a],s,o)}var l=v3({},xf[t][1]);return function(n,e,t,i,r){var s=MD(bD[e]||(bD[e]=fp(n)));return s.onerror=function(o){return r(o.error,null)},s.onmessage=function(o){return r(null,o.data)},s.postMessage(t,i),s}(xf[t][0]+";onmessage=function(e){for(var k in e.data)self[k]=e.data[k];onmessage="+e.toString()+"}",t,l,function(n){var e=[];for(var t in n)(n[t]instanceof pt||n[t]instanceof kn||n[t]instanceof Hs)&&e.push((n[t]=new n[t].constructor(n[t])).buffer);return e}(l),i)},H2=function(){return[pt,kn,Hs,z2,N2,h3,hp,ED,AD,ID,d3,lr,gf,ur,vf,p3,fr,m3,W2,Io,vp]},U2=function(){return[pt,kn,Hs,z2,N2,h3,mf,dp,DD,Us,TD,F2,d3,LD,Bs,lr,es,O2,yf,_f,pp,k2,g3,mp,p3,fr,RD,ka,y3,Io]},FD=function(){return[_p,bp,Tt,V2,PD]},OD=function(){return[xp,HD]},kD=function(){return[Mp,Tt,gp]},VD=function(){return[UD]},Io=function(n){return postMessage(n,[n.buffer])},vp=function(n){return n&&n.size&&new pt(n.size)},B2=function(n,e,t,i,r,s){var o=ND(t,i,r,function(a,c){o.terminate(),s(a,c)});return o.postMessage([n,e],e.consume?[n.buffer]:[]),function(){o.terminate()}},hr=function(n){return n.ondata=function(e,t){return postMessage([e,t],[e.buffer])},function(e){return n.push(e.data[0],e.data[1])}},G2=function(n,e,t,i,r){var s,o=ND(n,i,r,function(a,c){a?(o.terminate(),e.ondata.call(e,a)):(c[1]&&o.terminate(),e.ondata.call(e,a,c[0],c[1]))});o.postMessage(t),e.push=function(a,c){if(s)throw"stream finished";if(!e.ondata)throw"no stream handler";o.postMessage([a,s=c],[a.buffer])},e.terminate=function(){o.terminate()}},yi=function(n,e){return n[e]|n[e+1]<<8},gn=function(n,e){return(n[e]|n[e+1]<<8|n[e+2]<<16|n[e+3]<<24)>>>0},yp=function(n,e){return gn(n,e)+4294967296*gn(n,e+4)},Tt=function(n,e,t){for(;t;++e)n[e]=t,t>>>=8},_p=function(n,e){var t=e.filename;if(n[0]=31,n[1]=139,n[2]=8,n[8]=e.level<2?4:9==e.level?2:0,n[9]=3,0!=e.mtime&&Tt(n,4,Math.floor(new Date(e.mtime||Date.now())/1e3)),t){n[3]=8;for(var i=0;i<=t.length;++i)n[i+10]=t.charCodeAt(i)}},xp=function(n){if(31!=n[0]||139!=n[1]||8!=n[2])throw"invalid gzip data";var e=n[3],t=10;4&e&&(t+=n[10]|2+(n[11]<<8));for(var i=(e>>3&1)+(e>>4&1);i>0;i-=!n[t++]);return t+(2&e)},HD=function(n){var e=n.length;return(n[e-4]|n[e-3]<<8|n[e-2]<<16|n[e-1]<<24)>>>0},bp=function(n){return 10+(n.filename&&n.filename.length+1||0)},Mp=function(n,e){var t=e.level,i=0==t?0:t<6?1:9==t?3:2;n[0]=120,n[1]=i<<6|(i?32-2*i:1)},UD=function(n){if(8!=(15&n[0])||n[0]>>>4>7||(n[0]<<8|n[1])%31)throw"invalid zlib data";if(32&n[1])throw"invalid zlib data: preset dictionaries not supported"};function wp(n,e){return!e&&"function"==typeof n&&(e=n,n={}),this.ondata=e,n}var ts=function(){function n(e,t){!t&&"function"==typeof e&&(t=e,e={}),this.ondata=t,this.o=e||{}}return n.prototype.p=function(e,t){this.ondata(ka(e,this.o,0,0,!t),t)},n.prototype.push=function(e,t){if(this.d)throw"stream finished";if(!this.ondata)throw"no stream handler";this.d=t,this.p(e,t||!1)},n}(),BD=function(){return function n(e,t){G2([U2,function(){return[hr,ts]}],this,wp.call(this,e,t),function(i){var r=new ts(i.data);onmessage=hr(r)},6)}}();function GD(n,e,t){if(t||(t=e,e={}),"function"!=typeof t)throw"no callback";return B2(n,e,[U2],function(i){return Io(y3(i.data[0],i.data[1]))},0,t)}function y3(n,e){return ka(n,e||{},0,0)}var Ei=function(){function n(e){this.s={},this.p=new pt(0),this.ondata=e}return n.prototype.e=function(e){if(this.d)throw"stream finished";if(!this.ondata)throw"no stream handler";var t=this.p.length,i=new pt(t+e.length);i.set(this.p),i.set(e,t),this.p=i},n.prototype.c=function(e){this.d=this.s.i=e||!1;var t=this.s.b,i=m3(this.p,this.o,this.s);this.ondata(fr(i,t,this.s.b),this.d),this.o=fr(i,this.s.b-32768),this.s.b=this.o.length,this.p=fr(this.p,this.s.p/8|0),this.s.p&=7},n.prototype.push=function(e,t){this.e(e),this.c(t)},n}(),Cp=function(){return function n(e){this.ondata=e,G2([H2,function(){return[hr,Ei]}],this,0,function(){var t=new Ei;onmessage=hr(t)},7)}}();function Sp(n,e,t){if(t||(t=e,e={}),"function"!=typeof t)throw"no callback";return B2(n,e,[H2],function(i){return Io(W2(i.data[0],vp(i.data[1])))},1,t)}function W2(n,e){return m3(n,e)}var bf=function(){function n(e,t){this.c=V2(),this.l=0,this.v=1,ts.call(this,e,t)}return n.prototype.push=function(e,t){ts.prototype.push.call(this,e,t)},n.prototype.p=function(e,t){this.c.p(e),this.l+=e.length;var i=ka(e,this.o,this.v&&bp(this.o),t&&8,!t);this.v&&(_p(i,this.o),this.v=0),t&&(Tt(i,i.length-8,this.c.d()),Tt(i,i.length-4,this.l)),this.ondata(i,t)},n}(),WD=function(){return function n(e,t){G2([U2,FD,function(){return[hr,ts,bf]}],this,wp.call(this,e,t),function(i){var r=new bf(i.data);onmessage=hr(r)},8)}}();function jD(n,e,t){if(t||(t=e,e={}),"function"!=typeof t)throw"no callback";return B2(n,e,[U2,FD,function(){return[Mf]}],function(i){return Io(Mf(i.data[0],i.data[1]))},2,t)}function Mf(n,e){e||(e={});var t=V2(),i=n.length;t.p(n);var r=ka(n,e,bp(e),8),s=r.length;return _p(r,e),Tt(r,s-8,t.d()),Tt(r,s-4,i),r}var wf=function(){function n(e){this.v=1,Ei.call(this,e)}return n.prototype.push=function(e,t){if(Ei.prototype.e.call(this,e),this.v){var i=this.p.length>3?xp(this.p):4;if(i>=this.p.length&&!t)return;this.p=this.p.subarray(i),this.v=0}if(t){if(this.p.length<8)throw"invalid gzip stream";this.p=this.p.subarray(0,-8)}Ei.prototype.c.call(this,t)},n}(),$D=function(){return function n(e){this.ondata=e,G2([H2,OD,function(){return[hr,Ei,wf]}],this,0,function(){var t=new wf;onmessage=hr(t)},9)}}();function qD(n,e,t){if(t||(t=e,e={}),"function"!=typeof t)throw"no callback";return B2(n,e,[H2,OD,function(){return[Cf]}],function(i){return Io(Cf(i.data[0]))},3,t)}function Cf(n,e){return m3(n.subarray(xp(n),-8),e||new pt(HD(n)))}var Ep=function(){function n(e,t){this.c=gp(),this.v=1,ts.call(this,e,t)}return n.prototype.push=function(e,t){ts.prototype.push.call(this,e,t)},n.prototype.p=function(e,t){this.c.p(e);var i=ka(e,this.o,this.v&&2,t&&4,!t);this.v&&(Mp(i,this.o),this.v=0),t&&Tt(i,i.length-4,this.c.d()),this.ondata(i,t)},n}(),n1e=function(){return function n(e,t){G2([U2,kD,function(){return[hr,ts,Ep]}],this,wp.call(this,e,t),function(i){var r=new Ep(i.data);onmessage=hr(r)},10)}}();function i1e(n,e,t){if(t||(t=e,e={}),"function"!=typeof t)throw"no callback";return B2(n,e,[U2,kD,function(){return[Dp]}],function(i){return Io(Dp(i.data[0],i.data[1]))},4,t)}function Dp(n,e){e||(e={});var t=gp();t.p(n);var i=ka(n,e,2,4);return Mp(i,e),Tt(i,i.length-4,t.d()),i}var Sf=function(){function n(e){this.v=1,Ei.call(this,e)}return n.prototype.push=function(e,t){if(Ei.prototype.e.call(this,e),this.v){if(this.p.length<2&&!t)return;this.p=this.p.subarray(2),this.v=0}if(t){if(this.p.length<4)throw"invalid zlib stream";this.p=this.p.subarray(0,-4)}Ei.prototype.c.call(this,t)},n}(),ZD=function(){return function n(e){this.ondata=e,G2([H2,VD,function(){return[hr,Ei,Sf]}],this,0,function(){var t=new Sf;onmessage=hr(t)},11)}}();function XD(n,e,t){if(t||(t=e,e={}),"function"!=typeof t)throw"no callback";return B2(n,e,[H2,VD,function(){return[_3]}],function(i){return Io(_3(i.data[0],vp(i.data[1])))},5,t)}function _3(n,e){return m3((UD(n),n.subarray(2,-4)),e)}var YD=function(){function n(e){this.G=wf,this.I=Ei,this.Z=Sf,this.ondata=e}return n.prototype.push=function(e,t){if(!this.ondata)throw"no stream handler";if(this.s)this.s.push(e,t);else{if(this.p&&this.p.length){var i=new pt(this.p.length+e.length);i.set(this.p),i.set(e,this.p.length)}else this.p=e;if(this.p.length>2){var r=this,s=function(){r.ondata.apply(r,arguments)};this.s=31==this.p[0]&&139==this.p[1]&&8==this.p[2]?new this.G(s):8!=(15&this.p[0])||this.p[0]>>4>7||(this.p[0]<<8|this.p[1])%31?new this.I(s):new this.Z(s),this.s.push(this.p,t),this.p=null}}},n}(),r1e=function(){function n(e){this.G=$D,this.I=Cp,this.Z=ZD,this.ondata=e}return n.prototype.push=function(e,t){YD.prototype.push.call(this,e,t)},n}();function s1e(n,e,t){if(t||(t=e,e={}),"function"!=typeof t)throw"no callback";return 31==n[0]&&139==n[1]&&8==n[2]?qD(n,e,t):8!=(15&n[0])||n[0]>>4>7||(n[0]<<8|n[1])%31?Sp(n,e,t):XD(n,e,t)}function o1e(n,e){return 31==n[0]&&139==n[1]&&8==n[2]?Cf(n,e):8!=(15&n[0])||n[0]>>4>7||(n[0]<<8|n[1])%31?W2(n,e):_3(n,e)}var Ap=function(n,e,t,i){for(var r in n){var s=n[r],o=e+r;s instanceof pt?t[o]=[s,i]:Array.isArray(s)?t[o]=[s[0],v3(i,s[1])]:Ap(s,o+"/",t,i)}},KD=typeof TextEncoder<"u"&&new TextEncoder,Tp=typeof TextDecoder<"u"&&new TextDecoder,JD=0;try{Tp.decode(Bs,{stream:!0}),JD=1}catch{}var QD=function(n){for(var e="",t=0;;){var i=n[t++],r=(i>127)+(i>223)+(i>239);if(t+r>n.length)return[e,fr(n,t-1)];r?3==r?(i=((15&i)<<18|(63&n[t++])<<12|(63&n[t++])<<6|63&n[t++])-65536,e+=String.fromCharCode(55296|i>>10,56320|1023&i)):e+=String.fromCharCode(1&r?(31&i)<<6|63&n[t++]:(15&i)<<12|(63&n[t++])<<6|63&n[t++]):e+=String.fromCharCode(i)}},a1e=function(){function n(e){this.ondata=e,JD?this.t=new TextDecoder:this.p=Bs}return n.prototype.push=function(e,t){if(!this.ondata)throw"no callback";if(t=!!t,this.t){if(this.ondata(this.t.decode(e,{stream:!0}),t),t){if(this.t.decode().length)throw"invalid utf-8 data";this.t=null}}else{if(!this.p)throw"stream finished";var i=new pt(this.p.length+e.length);i.set(this.p),i.set(e,this.p.length);var r=QD(i),s=r[0],o=r[1];if(t){if(o.length)throw"invalid utf-8 data";this.p=null}else this.p=o;this.ondata(s,t)}},n}(),c1e=function(){function n(e){this.ondata=e}return n.prototype.push=function(e,t){if(!this.ondata)throw"no callback";if(this.d)throw"stream finished";this.ondata(Lo(e),this.d=t||!1)},n}();function Lo(n,e){if(e){for(var t=new pt(n.length),i=0;i<n.length;++i)t[i]=n.charCodeAt(i);return t}if(KD)return KD.encode(n);var r=n.length,s=new pt(n.length+(n.length>>1)),o=0,a=function(u){s[o++]=u};for(i=0;i<r;++i){if(o+5>s.length){var c=new pt(o+8+(r-i<<1));c.set(s),s=c}var l=n.charCodeAt(i);l<128||e?a(l):l<2048?(a(192|l>>6),a(128|63&l)):l>55295&&l<57344?(a(240|(l=65536+(1047552&l)|1023&n.charCodeAt(++i))>>18),a(128|l>>12&63),a(128|l>>6&63),a(128|63&l)):(a(224|l>>12),a(128|l>>6&63),a(128|63&l))}return fr(s,0,o)}function Ip(n,e){if(e){for(var t="",i=0;i<n.length;i+=16384)t+=String.fromCharCode.apply(null,n.subarray(i,i+16384));return t}if(Tp)return Tp.decode(n);var r=QD(n);if(r[1].length)throw"invalid utf-8 data";return r[0]}var eA=function(n){return 1==n?3:n<6?2:9==n?1:0},tA=function(n,e){return e+30+yi(n,e+26)+yi(n,e+28)},nA=function(n,e,t){var i=yi(n,e+28),r=Ip(n.subarray(e+46,e+46+i),!(2048&yi(n,e+8))),s=e+46+i,o=gn(n,e+20),a=t&&4294967295==o?iA(n,s):[o,gn(n,e+24),gn(n,e+42)],c=a[0],l=a[1],u=a[2];return[yi(n,e+10),c,l,r,s+yi(n,e+30)+yi(n,e+32),u]},iA=function(n,e){for(;1!=yi(n,e);e+=4+yi(n,e+2));return[yp(n,e+12),yp(n,e+4),yp(n,e+20)]},Ro=function(n){var e=0;if(n)for(var t in n){var i=n[t].length;if(i>65535)throw"extra field too long";e+=i+4}return e},j2=function(n,e,t,i,r,s,o,a){var c=i.length,l=t.extra,u=a&&a.length,f=Ro(l);Tt(n,e,null!=o?33639248:67324752),e+=4,null!=o&&(n[e++]=20,n[e++]=t.os),n[e]=20,e+=2,n[e++]=t.flag<<1|(null==s&&8),n[e++]=r&&8,n[e++]=255&t.compression,n[e++]=t.compression>>8;var h=new Date(null==t.mtime?Date.now():t.mtime),d=h.getFullYear()-1980;if(d<0||d>119)throw"date not in range 1980-2099";if(Tt(n,e,d<<25|h.getMonth()+1<<21|h.getDate()<<16|h.getHours()<<11|h.getMinutes()<<5|h.getSeconds()>>>1),e+=4,null!=s&&(Tt(n,e,t.crc),Tt(n,e+4,s),Tt(n,e+8,t.size)),Tt(n,e+12,c),Tt(n,e+14,f),e+=16,null!=o&&(Tt(n,e,u),Tt(n,e+6,t.attrs),Tt(n,e+10,o),e+=14),n.set(i,e),e+=c,f)for(var p in l){var m=l[p],g=m.length;Tt(n,e,+p),Tt(n,e+2,g),n.set(m,e+4),e+=4+g}return u&&(n.set(a,e),e+=u),e},Lp=function(n,e,t,i,r){Tt(n,e,101010256),Tt(n,e+8,t),Tt(n,e+10,t),Tt(n,e+12,i),Tt(n,e+16,r)},x3=function(){function n(e){this.filename=e,this.c=V2(),this.size=0,this.compression=0}return n.prototype.process=function(e,t){this.ondata(null,e,t)},n.prototype.push=function(e,t){if(!this.ondata)throw"no callback - add to ZIP archive before pushing";this.c.p(e),this.size+=e.length,t&&(this.crc=this.c.d()),this.process(e,t||!1)},n}(),l1e=function(){function n(e,t){var i=this;t||(t={}),x3.call(this,e),this.d=new ts(t,function(r,s){i.ondata(null,r,s)}),this.compression=8,this.flag=eA(t.level)}return n.prototype.process=function(e,t){try{this.d.push(e,t)}catch(i){this.ondata(i,null,t)}},n.prototype.push=function(e,t){x3.prototype.push.call(this,e,t)},n}(),u1e=function(){function n(e,t){var i=this;t||(t={}),x3.call(this,e),this.d=new BD(t,function(r,s,o){i.ondata(r,s,o)}),this.compression=8,this.flag=eA(t.level),this.terminate=this.d.terminate}return n.prototype.process=function(e,t){this.d.push(e,t)},n.prototype.push=function(e,t){x3.prototype.push.call(this,e,t)},n}(),f1e=function(){function n(e){this.ondata=e,this.u=[],this.d=1}return n.prototype.add=function(e){var t=this;if(2&this.d)throw"stream finished";var i=Lo(e.filename),r=i.length,s=e.comment,o=s&&Lo(s),a=r!=e.filename.length||o&&s.length!=o.length,c=r+Ro(e.extra)+30;if(r>65535)throw"filename too long";var l=new pt(c);j2(l,0,e,i,a);var u=[l],f=function(){for(var g=0,v=u;g<v.length;g++)t.ondata(null,v[g],!1);u=[]},h=this.d;this.d=0;var d=this.u.length,p=v3(e,{f:i,u:a,o,t:function(){e.terminate&&e.terminate()},r:function(){if(f(),h){var g=t.u[d+1];g?g.r():t.d=1}h=1}}),m=0;e.ondata=function(g,v,x){if(g)t.ondata(g,v,x),t.terminate();else if(m+=v.length,u.push(v),x){var y=new pt(16);Tt(y,0,134695760),Tt(y,4,e.crc),Tt(y,8,m),Tt(y,12,e.size),u.push(y),p.c=m,p.b=c+m+16,p.crc=e.crc,p.size=e.size,h&&p.r(),h=1}else h&&f()},this.u.push(p)},n.prototype.end=function(){var e=this;if(2&this.d)throw 1&this.d?"stream finishing":"stream finished";this.d?this.e():this.u.push({r:function(){!(1&e.d)||(e.u.splice(-1,1),e.e())},t:function(){}}),this.d=3},n.prototype.e=function(){for(var e=0,t=0,i=0,r=0,s=this.u;r<s.length;r++)i+=46+(o=s[r]).f.length+Ro(o.extra)+(o.o?o.o.length:0);for(var a=new pt(i+22),c=0,l=this.u;c<l.length;c++){var o;j2(a,e,o=l[c],o.f,o.u,o.c,t,o.o),e+=46+o.f.length+Ro(o.extra)+(o.o?o.o.length:0),t+=o.b}Lp(a,e,this.u.length,i,t),this.ondata(null,a,!0),this.d=2},n.prototype.terminate=function(){for(var e=0,t=this.u;e<t.length;e++)t[e].t();this.d=2},n}();function h1e(n,e,t){if(t||(t=e,e={}),"function"!=typeof t)throw"no callback";var i={};Ap(n,"",i,e);var r=Object.keys(i),s=r.length,o=0,a=0,c=s,l=new Array(s),u=[],f=function(){for(var m=0;m<u.length;++m)u[m]()},h=function(){var m=new pt(a+22),g=o,v=a-o;a=0;for(var x=0;x<c;++x){var y=l[x];try{var _=y.c.length;j2(m,a,y,y.f,y.u,_);var M=30+y.f.length+Ro(y.extra),w=a+M;m.set(y.c,w),j2(m,o,y,y.f,y.u,_,a,y.m),o+=16+M+(y.m?y.m.length:0),a=w+_}catch(D){return t(D,null)}}Lp(m,o,l.length,v,g),t(null,m)};s||h();for(var d=function(m){var g=r[m],v=i[g],x=v[0],y=v[1],_=V2(),M=x.length;_.p(x);var w=Lo(g),D=w.length,b=y.comment,E=b&&Lo(b),I=E&&E.length,z=Ro(y.extra),U=0==y.level?0:8,P=function(L,F){if(L)f(),t(L,null);else{var H=F.length;l[m]=v3(y,{size:M,crc:_.d(),c:F,f:w,m:E,u:D!=g.length||E&&b.length!=I,compression:U}),o+=30+D+z+H,a+=76+2*(D+z)+(I||0)+H,--s||h()}};if(D>65535&&P("filename too long",null),U)if(M<16e4)try{P(null,y3(x,y))}catch(L){P(L,null)}else u.push(GD(x,y,P));else P(null,x)},p=0;p<c;++p)d(p);return f}function d1e(n,e){e||(e={});var t={},i=[];Ap(n,"",t,e);var r=0,s=0;for(var o in t){var a=t[o],c=a[0],l=a[1],u=0==l.level?0:8,h=(f=Lo(o)).length,d=l.comment,p=d&&Lo(d),m=p&&p.length,g=Ro(l.extra);if(h>65535)throw"filename too long";var v=u?y3(c,l):c,x=v.length,y=V2();y.p(c),i.push(v3(l,{size:c.length,crc:y.d(),c:v,f,m:p,u:h!=o.length||p&&d.length!=m,o:r,compression:u})),r+=30+h+g+x,s+=76+2*(h+g)+(m||0)+x}for(var _=new pt(s+22),M=r,w=s-r,D=0;D<i.length;++D){var f;j2(_,(f=i[D]).o,f,f.f,f.u,f.c.length);var b=30+f.f.length+Ro(f.extra);_.set(f.c,f.o+b),j2(_,r,f,f.f,f.u,f.c.length,f.o,f.m),r+=16+b+(f.m?f.m.length:0)}return Lp(_,r,i.length,w,M),_}var rA=function(){function n(){}return n.prototype.push=function(e,t){this.ondata(null,e,t)},n.compression=0,n}(),p1e=function(){function n(){var e=this;this.i=new Ei(function(t,i){e.ondata(null,t,i)})}return n.prototype.push=function(e,t){try{this.i.push(e,t)}catch(i){this.ondata(i,e,t)}},n.compression=8,n}(),m1e=function(){function n(e,t){var i=this;t<32e4?this.i=new Ei(function(r,s){i.ondata(null,r,s)}):(this.i=new Cp(function(r,s,o){i.ondata(r,s,o)}),this.terminate=this.i.terminate)}return n.prototype.push=function(e,t){this.i.terminate&&(e=fr(e,0)),this.i.push(e,t)},n.compression=8,n}(),g1e=function(){function n(e){this.onfile=e,this.k=[],this.o={0:rA},this.p=Bs}return n.prototype.push=function(e,t){var i=this;if(!this.onfile)throw"no callback";if(!this.p)throw"stream finished";if(this.c>0){var r=Math.min(this.c,e.length),s=e.subarray(0,r);if(this.c-=r,this.d?this.d.push(s,!this.c):this.k[0].push(s),(e=e.subarray(r)).length)return this.push(e,t)}else{var o=0,a=0,c=void 0,l=void 0;this.p.length?e.length?((l=new pt(this.p.length+e.length)).set(this.p),l.set(e,this.p.length)):l=this.p:l=e;for(var u=l.length,f=this.c,h=f&&this.d,d=function(){var v,x=gn(l,a);if(67324752==x){o=1,c=a,p.d=null,p.c=0;var y=yi(l,a+6),_=yi(l,a+8),M=2048&y,w=8&y,D=yi(l,a+26),b=yi(l,a+28);if(u>a+30+D+b){var E=[];p.k.unshift(E),o=2;var I=gn(l,a+18),z=gn(l,a+22),U=Ip(l.subarray(a+30,a+=30+D),!M);4294967295==I?(v=w?[-2]:iA(l,a),I=v[0],z=v[1]):w&&(I=-1),a+=b,p.c=I;var P,L={name:U,compression:_,start:function(){if(!L.ondata)throw"no callback";if(I){var F=i.o[_];if(!F)throw"unknown compression type "+_;(P=I<0?new F(U):new F(U,I,z)).ondata=function(te,Y,k){L.ondata(te,Y,k)};for(var H=0,X=E;H<X.length;H++)P.push(X[H],!1);i.k[0]==E&&i.c?i.d=P:P.push(Bs,!0)}else L.ondata(null,Bs,!0)},terminate:function(){P&&P.terminate&&P.terminate()}};I>=0&&(L.size=I,L.originalSize=z),p.onfile(L)}return"break"}if(f){if(134695760==x)return c=a+=12+(-2==f&&8),o=3,p.c=0,"break";if(33639248==x)return c=a-=4,o=3,p.c=0,"break"}},p=this;a<u-4&&"break"!==d();++a);if(this.p=Bs,f<0){var g=l.subarray(0,o?c-12-(-2==f&&8)-(134695760==gn(l,c-16)&&4):a);h?h.push(g,!!o):this.k[+(2==o)].push(g)}if(2&o)return this.push(l.subarray(a),t);this.p=l.subarray(a)}if(t){if(this.c)throw"invalid zip file";this.p=null}},n.prototype.register=function(e){this.o[e.compression]=e},n}();function v1e(n,e){if("function"!=typeof e)throw"no callback";for(var t=[],i=function(){for(var h=0;h<t.length;++h)t[h]()},r={},s=n.length-22;101010256!=gn(n,s);--s)if(!s||n.length-s>65558)return void e("invalid zip file",null);var o=yi(n,s+8);o||e(null,{});var a=o,c=gn(n,s+16),l=4294967295==c;if(l){if(s=gn(n,s-12),101075792!=gn(n,s))return void e("invalid zip file",null);a=o=gn(n,s+32),c=gn(n,s+48)}for(var u=function(h){var d=nA(n,c,l),p=d[0],m=d[1],g=d[2],v=d[3],x=d[4],_=tA(n,d[5]);c=x;var M=function(D,b){D?(i(),e(D,null)):(r[v]=b,--o||e(null,r))};if(p)if(8==p){var w=n.subarray(_,_+m);if(m<32e4)try{M(null,W2(w,new pt(g)))}catch(D){M(D,null)}else t.push(Sp(w,{size:g},M))}else M("unknown compression type "+p,null);else M(null,fr(n,_,_+m))},f=0;f<a;++f)u();return i}function y1e(n){for(var e={},t=n.length-22;101010256!=gn(n,t);--t)if(!t||n.length-t>65558)throw"invalid zip file";var i=yi(n,t+8);if(!i)return{};var r=gn(n,t+16),s=4294967295==r;if(s){if(t=gn(n,t-12),101075792!=gn(n,t))throw"invalid zip file";i=gn(n,t+32),r=gn(n,t+48)}for(var o=0;o<i;++o){var a=nA(n,r,s),c=a[0],l=a[1],u=a[2],f=a[3],h=a[4],p=tA(n,a[5]);if(r=h,c){if(8!=c)throw"unknown compression type "+c;e[f]=W2(n.subarray(p,p+l),new pt(u))}else e[f]=fr(n,p,p+l)}return e}function Ef(n,e,t){const i=t.length-n-1;if(e>=t[i])return i-1;if(e<=t[n])return n;let r=n,s=i,o=Math.floor((r+s)/2);for(;e<t[o]||e>=t[o+1];)e<t[o]?s=o:r=o,o=Math.floor((r+s)/2);return o}function M1e(n,e){let t=1;for(let r=2;r<=n;++r)t*=r;let i=1;for(let r=2;r<=e;++r)i*=r;for(let r=2;r<=n-e;++r)i*=r;return t/i}class sA extends zr{constructor(e,t,i,r,s){super(),this.degree=e,this.knots=t,this.controlPoints=[],this.startKnot=r||0,this.endKnot=s||this.knots.length-1;for(let o=0;o<i.length;++o){const a=i[o];this.controlPoints[o]=new ft(a.x,a.y,a.z,a.w)}}getPoint(e,t=new C){const i=t,s=function _1e(n,e,t,i){const r=Ef(n,i,e),s=function Rp(n,e,t,i){const r=[],s=[],o=[];r[0]=1;for(let a=1;a<=t;++a){s[a]=e-i[n+1-a],o[a]=i[n+a]-e;let c=0;for(let l=0;l<a;++l){const u=o[l+1],f=s[a-l],h=r[l]/(u+f);r[l]=c+u*h,c=f*h}r[a]=c}return r}(r,i,n,e),o=new ft(0,0,0,0);for(let a=0;a<=n;++a){const c=t[r-n+a],l=s[a],u=c.w*l;o.x+=c.x*u,o.y+=c.y*u,o.z+=c.z*u,o.w+=c.w*l}return o}(this.degree,this.knots,this.controlPoints,this.knots[this.startKnot]+e*(this.knots[this.endKnot]-this.knots[this.startKnot]));return 1!==s.w&&s.divideScalar(s.w),i.set(s.x,s.y,s.z)}getTangent(e,t=new C){const i=t,s=function C1e(n,e,t,i,r){const s=function b1e(n,e,t,i,r){const s=r<n?r:n,o=[],a=Ef(n,i,e),c=function x1e(n,e,t,i,r){const s=[];for(let f=0;f<=t;++f)s[f]=0;const o=[];for(let f=0;f<=i;++f)o[f]=s.slice(0);const a=[];for(let f=0;f<=t;++f)a[f]=s.slice(0);a[0][0]=1;const c=s.slice(0),l=s.slice(0);for(let f=1;f<=t;++f){c[f]=e-r[n+1-f],l[f]=r[n+f]-e;let h=0;for(let d=0;d<f;++d){const p=l[d+1],m=c[f-d];a[f][d]=p+m;const g=a[d][f-1]/a[f][d];a[d][f]=h+p*g,h=m*g}a[f][f]=h}for(let f=0;f<=t;++f)o[0][f]=a[f][t];for(let f=0;f<=t;++f){let h=0,d=1;const p=[];for(let m=0;m<=t;++m)p[m]=s.slice(0);p[0][0]=1;for(let m=1;m<=i;++m){let g=0;const v=f-m,x=t-m;f>=m&&(p[d][0]=p[h][0]/a[x+1][v],g=p[d][0]*a[v][x]);const _=f-1<=x?m-1:t-f;for(let w=v>=-1?1:-v;w<=_;++w)p[d][w]=(p[h][w]-p[h][w-1])/a[x+1][v+w],g+=p[d][w]*a[v+w][x];f<=x&&(p[d][m]=-p[h][m-1]/a[x+1][f],g+=p[d][m]*a[f][x]),o[m][f]=g;const M=h;h=d,d=M}}let u=t;for(let f=1;f<=i;++f){for(let h=0;h<=t;++h)o[f][h]*=u;u*=t-f}return o}(a,i,n,s,e),l=[];for(let u=0;u<t.length;++u){const f=t[u].clone(),h=f.w;f.x*=h,f.y*=h,f.z*=h,l[u]=f}for(let u=0;u<=s;++u){const f=l[a-n].clone().multiplyScalar(c[u][0]);for(let h=1;h<=n;++h)f.add(l[a-n+h].clone().multiplyScalar(c[u][h]));o[u]=f}for(let u=s+1;u<=r+1;++u)o[u]=new ft(0,0,0);return o}(n,e,t,i,r);return function w1e(n){const e=n.length,t=[],i=[];for(let s=0;s<e;++s){const o=n[s];t[s]=new C(o.x,o.y,o.z),i[s]=o.w}const r=[];for(let s=0;s<e;++s){const o=t[s].clone();for(let a=1;a<=s;++a)o.sub(r[s-a].clone().multiplyScalar(M1e(s,a)*i[a]));r[s]=o.divideScalar(i[0])}return r}(s)}(this.degree,this.knots,this.controlPoints,this.knots[0]+e*(this.knots[this.knots.length-1]-this.knots[0]),1);return i.copy(s[1]).normalize(),i}}let ht,vn,Di;class S1e extends R2{constructor(e){super(e)}load(e,t,i,r){const s=this,o=""===s.path?ar.extractUrlBase(e):s.path,a=new Nr(this.manager);a.setPath(s.path),a.setResponseType("arraybuffer"),a.setRequestHeader(s.requestHeader),a.setWithCredentials(s.withCredentials),a.load(e,function(c){try{t(s.parse(c,o))}catch(l){r?r(l):console.error(l),s.manager.itemError(e)}},i,r)}parse(e,t){if(function L1e(n){const e="Kaydara FBX Binary  \0";return n.byteLength>=e.length&&e===fA(n,0,e.length)}(e))ht=(new I1e).parse(e);else{const r=fA(e);if(!function R1e(n){const e=["K","a","y","d","a","r","a","\\","F","B","X","\\","B","i","n","a","r","y","\\","\\"];let t=0;function i(r){const s=n[r-1];return n=n.slice(t+r),t++,s}for(let r=0;r<e.length;++r)if(i(1)===e[r])return!1;return!0}(r))throw new Error("THREE.FBXLoader: Unknown format.");if(cA(r)<7e3)throw new Error("THREE.FBXLoader: FBX version not supported, FileVersion: "+cA(r));ht=(new T1e).parse(r)}const i=new Z7(this.manager).setPath(this.resourcePath||t).setCrossOrigin(this.crossOrigin);return new E1e(i,this.manager).parse(ht)}}class E1e{constructor(e,t){this.textureLoader=e,this.manager=t}parse(){vn=this.parseConnections();const e=this.parseImages(),t=this.parseTextures(e),i=this.parseMaterials(t),r=this.parseDeformers(),s=(new D1e).parse(r);return this.parseScene(r,s,i),Di}parseConnections(){const e=new Map;return"Connections"in ht&&ht.Connections.connections.forEach(function(i){const r=i[0],s=i[1],o=i[2];e.has(r)||e.set(r,{parents:[],children:[]});const a={ID:s,relationship:o};e.get(r).parents.push(a),e.has(s)||e.set(s,{parents:[],children:[]});const c={ID:r,relationship:o};e.get(s).children.push(c)}),e}parseImages(){const e={},t={};if("Video"in ht.Objects){const i=ht.Objects.Video;for(const r in i){const s=i[r];if(e[parseInt(r)]=s.RelativeFilename||s.Filename,"Content"in s){const a=s.Content instanceof ArrayBuffer&&s.Content.byteLength>0,c="string"==typeof s.Content&&""!==s.Content;if(a||c){const l=this.parseImage(i[r]);t[s.RelativeFilename||s.Filename]=l}}}}for(const i in e){const r=e[i];e[i]=void 0!==t[r]?t[r]:e[i].split("\\").pop()}return e}parseImage(e){const t=e.Content,i=e.RelativeFilename||e.Filename,r=i.slice(i.lastIndexOf(".")+1).toLowerCase();let s;switch(r){case"bmp":s="image/bmp";break;case"jpg":case"jpeg":s="image/jpeg";break;case"png":s="image/png";break;case"tif":s="image/tiff";break;case"tga":null===this.manager.getHandler(".tga")&&console.warn("FBXLoader: TGA loader not found, skipping ",i),s="image/tga";break;default:return void console.warn('FBXLoader: Image type "'+r+'" is not supported.')}if("string"==typeof t)return"data:"+s+";base64,"+t;{const o=new Uint8Array(t);return window.URL.createObjectURL(new Blob([o],{type:s}))}}parseTextures(e){const t=new Map;if("Texture"in ht.Objects){const i=ht.Objects.Texture;for(const r in i){const s=this.parseTexture(i[r],e);t.set(parseInt(r),s)}}return t}parseTexture(e,t){const i=this.loadTexture(e,t);i.ID=e.id,i.name=e.attrName;const r=e.WrapModeU,s=e.WrapModeV,a=void 0!==s?s.value:0;if(i.wrapS=0===(void 0!==r?r.value:0)?Ts:Fn,i.wrapT=0===a?Ts:Fn,"Scaling"in e){const c=e.Scaling.value;i.repeat.x=c[0],i.repeat.y=c[1]}if("Translation"in e){const c=e.Translation.value;i.offset.x=c[0],i.offset.y=c[1]}return i}loadTexture(e,t){let i;const r=this.textureLoader.path,s=vn.get(e.id).children;let o;void 0!==s&&s.length>0&&void 0!==t[s[0].ID]&&(i=t[s[0].ID],(0===i.indexOf("blob:")||0===i.indexOf("data:"))&&this.textureLoader.setPath(void 0));const a=e.FileName.slice(-3).toLowerCase();if("tga"===a){const c=this.manager.getHandler(".tga");null===c?(console.warn("FBXLoader: TGA loader not found, creating placeholder texture for",e.RelativeFilename),o=new Hi):(c.setPath(this.textureLoader.path),o=c.load(i))}else"psd"===a?(console.warn("FBXLoader: PSD textures are not supported, creating placeholder texture for",e.RelativeFilename),o=new Hi):o=this.textureLoader.load(i);return this.textureLoader.setPath(r),o}parseMaterials(e){const t=new Map;if("Material"in ht.Objects){const i=ht.Objects.Material;for(const r in i){const s=this.parseMaterial(i[r],e);null!==s&&t.set(parseInt(r),s)}}return t}parseMaterial(e,t){const i=e.id,r=e.attrName;let s=e.ShadingModel;if("object"==typeof s&&(s=s.value),!vn.has(i))return null;const o=this.parseParameters(e,t,i);let a;switch(s.toLowerCase()){case"phong":a=new s3;break;case"lambert":a=new zE;break;default:console.warn('THREE.FBXLoader: unknown material type "%s". Defaulting to MeshPhongMaterial.',s),a=new s3}return a.setValues(o),a.name=r,a}parseParameters(e,t,i){const r={};e.BumpFactor&&(r.bumpScale=e.BumpFactor.value),e.Diffuse?r.color=(new ae).fromArray(e.Diffuse.value):e.DiffuseColor&&("Color"===e.DiffuseColor.type||"ColorRGB"===e.DiffuseColor.type)&&(r.color=(new ae).fromArray(e.DiffuseColor.value)),e.DisplacementFactor&&(r.displacementScale=e.DisplacementFactor.value),e.Emissive?r.emissive=(new ae).fromArray(e.Emissive.value):e.EmissiveColor&&("Color"===e.EmissiveColor.type||"ColorRGB"===e.EmissiveColor.type)&&(r.emissive=(new ae).fromArray(e.EmissiveColor.value)),e.EmissiveFactor&&(r.emissiveIntensity=parseFloat(e.EmissiveFactor.value)),e.Opacity&&(r.opacity=parseFloat(e.Opacity.value)),r.opacity<1&&(r.transparent=!0),e.ReflectionFactor&&(r.reflectivity=e.ReflectionFactor.value),e.Shininess&&(r.shininess=e.Shininess.value),e.Specular?r.specular=(new ae).fromArray(e.Specular.value):e.SpecularColor&&"Color"===e.SpecularColor.type&&(r.specular=(new ae).fromArray(e.SpecularColor.value));const s=this;return vn.get(i).children.forEach(function(o){const a=o.relationship;switch(a){case"Bump":r.bumpMap=s.getTexture(t,o.ID);break;case"Maya|TEX_ao_map":r.aoMap=s.getTexture(t,o.ID);break;case"DiffuseColor":case"Maya|TEX_color_map":r.map=s.getTexture(t,o.ID),void 0!==r.map&&(r.map.encoding=bt);break;case"DisplacementColor":r.displacementMap=s.getTexture(t,o.ID);break;case"EmissiveColor":r.emissiveMap=s.getTexture(t,o.ID),void 0!==r.emissiveMap&&(r.emissiveMap.encoding=bt);break;case"NormalMap":case"Maya|TEX_normal_map":r.normalMap=s.getTexture(t,o.ID);break;case"ReflectionColor":r.envMap=s.getTexture(t,o.ID),void 0!==r.envMap&&(r.envMap.mapping=303,r.envMap.encoding=bt);break;case"SpecularColor":r.specularMap=s.getTexture(t,o.ID),void 0!==r.specularMap&&(r.specularMap.encoding=bt);break;case"TransparentColor":case"TransparencyFactor":r.alphaMap=s.getTexture(t,o.ID),r.transparent=!0;break;default:console.warn("THREE.FBXLoader: %s map is not supported in three.js, skipping texture.",a)}}),r}getTexture(e,t){return"LayeredTexture"in ht.Objects&&t in ht.Objects.LayeredTexture&&(console.warn("THREE.FBXLoader: layered textures are not supported in three.js. Discarding all but first layer."),t=vn.get(t).children[0].ID),e.get(t)}parseDeformers(){const e={},t={};if("Deformer"in ht.Objects){const i=ht.Objects.Deformer;for(const r in i){const s=i[r],o=vn.get(parseInt(r));if("Skin"===s.attrType){const a=this.parseSkeleton(o,i);a.ID=r,o.parents.length>1&&console.warn("THREE.FBXLoader: skeleton attached to more than one geometry is not supported."),a.geometryID=o.parents[0].ID,e[r]=a}else if("BlendShape"===s.attrType){const a={id:r};a.rawTargets=this.parseMorphTargets(o,i),a.id=r,o.parents.length>1&&console.warn("THREE.FBXLoader: morph target attached to more than one geometry is not supported."),t[r]=a}}}return{skeletons:e,morphTargets:t}}parseSkeleton(e,t){const i=[];return e.children.forEach(function(r){const s=t[r.ID];if("Cluster"!==s.attrType)return;const o={ID:r.ID,indices:[],weights:[],transformLink:(new Ce).fromArray(s.TransformLink.a)};"Indexes"in s&&(o.indices=s.Indexes.a,o.weights=s.Weights.a),i.push(o)}),{rawBones:i,bones:[]}}parseMorphTargets(e,t){const i=[];for(let r=0;r<e.children.length;r++){const s=e.children[r],o=t[s.ID],a={name:o.attrName,initialWeight:o.DeformPercent,id:o.id,fullWeights:o.FullWeights.a};if("BlendShapeChannel"!==o.attrType)return;a.geoID=vn.get(parseInt(s.ID)).children.filter(function(c){return void 0===c.relationship})[0].ID,i.push(a)}return i}parseScene(e,t,i){Di=new sr;const r=this.parseModels(e.skeletons,t,i),s=ht.Objects.Model,o=this;r.forEach(function(c){o.setLookAtProperties(c,s[c.ID]),vn.get(c.ID).parents.forEach(function(f){const h=r.get(f.ID);void 0!==h&&h.add(c)}),null===c.parent&&Di.add(c)}),this.bindSkeleton(e.skeletons,t,r),this.createAmbientLight(),Di.traverse(function(c){if(c.userData.transformData){c.parent&&(c.userData.transformData.parentMatrix=c.parent.matrix,c.userData.transformData.parentMatrixWorld=c.parent.matrixWorld);const l=lA(c.userData.transformData);c.applyMatrix4(l),c.updateWorldMatrix()}});const a=(new A1e).parse();1===Di.children.length&&Di.children[0].isGroup&&(Di.children[0].animations=a,Di=Di.children[0]),Di.animations=a}parseModels(e,t,i){const r=new Map,s=ht.Objects.Model;for(const o in s){const a=parseInt(o),c=s[o],l=vn.get(a);let u=this.buildSkeleton(l,e,a,c.attrName);if(!u){switch(c.attrType){case"Camera":u=this.createCamera(l);break;case"Light":u=this.createLight(l);break;case"Mesh":u=this.createMesh(l,t,i);break;case"NurbsCurve":u=this.createCurve(l,t);break;case"LimbNode":case"Root":u=new Yl;break;default:u=new sr}u.name=c.attrName?At.sanitizeNodeName(c.attrName):"",u.ID=a}this.getTransformData(u,c),r.set(a,u)}return r}buildSkeleton(e,t,i,r){let s=null;return e.parents.forEach(function(o){for(const a in t){const c=t[a];c.rawBones.forEach(function(l,u){if(l.ID===o.ID){const f=s;s=new Yl,s.matrixWorld.copy(l.transformLink),s.name=r?At.sanitizeNodeName(r):"",s.ID=i,c.bones[u]=s,null!==f&&s.add(f)}})}}),s}createCamera(e){let t,i;if(e.children.forEach(function(r){const s=ht.Objects.NodeAttribute[r.ID];void 0!==s&&(i=s)}),void 0===i)t=new pn;else{let r=0;void 0!==i.CameraProjectionType&&1===i.CameraProjectionType.value&&(r=1);let s=1;void 0!==i.NearPlane&&(s=i.NearPlane.value/1e3);let o=1e3;void 0!==i.FarPlane&&(o=i.FarPlane.value/1e3);let a=window.innerWidth,c=window.innerHeight;void 0!==i.AspectWidth&&void 0!==i.AspectHeight&&(a=i.AspectWidth.value,c=i.AspectHeight.value);const l=a/c;let u=45;void 0!==i.FieldOfView&&(u=i.FieldOfView.value);const f=i.FocalLength?i.FocalLength.value:null;switch(r){case 0:t=new Pn(u,l,s,o),null!==f&&t.setFocalLength(f);break;case 1:t=new Wl(-a/2,a/2,c/2,-c/2,s,o);break;default:console.warn("THREE.FBXLoader: Unknown camera type "+r+"."),t=new pn}}return t}createLight(e){let t,i;if(e.children.forEach(function(r){const s=ht.Objects.NodeAttribute[r.ID];void 0!==s&&(i=s)}),void 0===i)t=new pn;else{let r;r=void 0===i.LightType?0:i.LightType.value;let s=16777215;void 0!==i.Color&&(s=(new ae).fromArray(i.Color.value));let o=void 0===i.Intensity?1:i.Intensity.value/100;void 0!==i.CastLightOnObject&&0===i.CastLightOnObject.value&&(o=0);let a=0;void 0!==i.FarAttenuationEnd&&(a=void 0!==i.EnableFarAttenuation&&0===i.EnableFarAttenuation.value?0:i.FarAttenuationEnd.value);const c=1;switch(r){case 0:t=new sf(s,o,a,c);break;case 1:t=new af(s,o);break;case 2:let l=Math.PI/3;void 0!==i.InnerAngle&&(l=Tr.degToRad(i.InnerAngle.value));let u=0;void 0!==i.OuterAngle&&(u=Tr.degToRad(i.OuterAngle.value),u=Math.max(u,1)),t=new K7(s,o,a,l,u,c);break;default:console.warn("THREE.FBXLoader: Unknown light type "+i.LightType.value+", defaulting to a PointLight."),t=new sf(s,o)}void 0!==i.CastShadows&&1===i.CastShadows.value&&(t.castShadow=!0)}return t}createMesh(e,t,i){let r,s=null,o=null;const a=[];return e.children.forEach(function(c){t.has(c.ID)&&(s=t.get(c.ID)),i.has(c.ID)&&a.push(i.get(c.ID))}),a.length>1?o=a:a.length>0?o=a[0]:(o=new s3({color:13421772}),a.push(o)),"color"in s.attributes&&a.forEach(function(c){c.vertexColors=!0}),s.FBX_Deformer?(r=new x7(s,o),r.normalizeSkinWeights()):r=new an(s,o),r}createCurve(e,t){const i=e.children.reduce(function(s,o){return t.has(o.ID)&&(s=t.get(o.ID)),s},null),r=new vi({color:3342591,linewidth:1});return new wo(i,r)}getTransformData(e,t){const i={};"InheritType"in t&&(i.inheritType=parseInt(t.InheritType.value)),i.eulerOrder="RotationOrder"in t?uA(t.RotationOrder.value):"ZYX","Lcl_Translation"in t&&(i.translation=t.Lcl_Translation.value),"PreRotation"in t&&(i.preRotation=t.PreRotation.value),"Lcl_Rotation"in t&&(i.rotation=t.Lcl_Rotation.value),"PostRotation"in t&&(i.postRotation=t.PostRotation.value),"Lcl_Scaling"in t&&(i.scale=t.Lcl_Scaling.value),"ScalingOffset"in t&&(i.scalingOffset=t.ScalingOffset.value),"ScalingPivot"in t&&(i.scalingPivot=t.ScalingPivot.value),"RotationOffset"in t&&(i.rotationOffset=t.RotationOffset.value),"RotationPivot"in t&&(i.rotationPivot=t.RotationPivot.value),e.userData.transformData=i}setLookAtProperties(e,t){"LookAtProperty"in t&&vn.get(e.ID).children.forEach(function(r){if("LookAtProperty"===r.relationship){const s=ht.Objects.Model[r.ID];if("Lcl_Translation"in s){const o=s.Lcl_Translation.value;void 0!==e.target?(e.target.position.fromArray(o),Di.add(e.target)):e.lookAt((new C).fromArray(o))}}})}bindSkeleton(e,t,i){const r=this.parsePoseNodes();for(const s in e){const o=e[s];vn.get(parseInt(o.ID)).parents.forEach(function(c){t.has(c.ID)&&vn.get(c.ID).parents.forEach(function(f){i.has(f.ID)&&i.get(f.ID).bind(new Jl(o.bones),r[f.ID])})})}}parsePoseNodes(){const e={};if("Pose"in ht.Objects){const t=ht.Objects.Pose;for(const i in t)if("BindPose"===t[i].attrType&&t[i].NbPoseNodes>0){const r=t[i].PoseNode;Array.isArray(r)?r.forEach(function(s){e[s.Node]=(new Ce).fromArray(s.Matrix.a)}):e[r.Node]=(new Ce).fromArray(r.Matrix.a)}}return e}createAmbientLight(){if("GlobalSettings"in ht&&"AmbientColor"in ht.GlobalSettings){const e=ht.GlobalSettings.AmbientColor.value,t=e[0],i=e[1],r=e[2];if(0!==t||0!==i||0!==r){const s=new ae(t,i,r);Di.add(new Q7(s,1))}}}}class D1e{constructor(){this.negativeMaterialIndices=!1}parse(e){const t=new Map;if("Geometry"in ht.Objects){const i=ht.Objects.Geometry;for(const r in i){const s=vn.get(parseInt(r)),o=this.parseGeometry(s,i[r],e);t.set(parseInt(r),o)}}return!0===this.negativeMaterialIndices&&console.warn("THREE.FBXLoader: The FBX file contains invalid (negative) material indices. The asset might not render as expected."),t}parseGeometry(e,t,i){switch(t.attrType){case"Mesh":return this.parseMeshGeometry(e,t,i);case"NurbsCurve":return this.parseNurbsGeometry(t)}}parseMeshGeometry(e,t,i){const r=i.skeletons,s=[],o=e.parents.map(function(f){return ht.Objects.Model[f.ID]});if(0===o.length)return;const a=e.children.reduce(function(f,h){return void 0!==r[h.ID]&&(f=r[h.ID]),f},null);e.children.forEach(function(f){void 0!==i.morphTargets[f.ID]&&s.push(i.morphTargets[f.ID])});const c=o[0],l={};"RotationOrder"in c&&(l.eulerOrder=uA(c.RotationOrder.value)),"InheritType"in c&&(l.inheritType=parseInt(c.InheritType.value)),"GeometricTranslation"in c&&(l.translation=c.GeometricTranslation.value),"GeometricRotation"in c&&(l.rotation=c.GeometricRotation.value),"GeometricScaling"in c&&(l.scale=c.GeometricScaling.value);const u=lA(l);return this.genGeometry(t,a,s,u)}genGeometry(e,t,i,r){const s=new Ze;e.attrName&&(s.name=e.attrName);const o=this.parseGeoNode(e,t),a=this.genBuffers(o),c=new Me(a.vertex,3);if(c.applyMatrix4(r),s.setAttribute("position",c),a.colors.length>0&&s.setAttribute("color",new Me(a.colors,3)),t&&(s.setAttribute("skinIndex",new n7(a.weightsIndices,4)),s.setAttribute("skinWeight",new Me(a.vertexWeights,4)),s.FBX_Deformer=t),a.normal.length>0){const l=(new hi).getNormalMatrix(r),u=new Me(a.normal,3);u.applyNormalMatrix(l),s.setAttribute("normal",u)}if(a.uvs.forEach(function(l,u){let f="uv"+(u+1).toString();0===u&&(f="uv"),s.setAttribute(f,new Me(a.uvs[u],2))}),o.material&&"AllSame"!==o.material.mappingType){let l=a.materialIndex[0],u=0;if(a.materialIndex.forEach(function(f,h){f!==l&&(s.addGroup(u,h-u,l),l=f,u=h)}),s.groups.length>0){const f=s.groups[s.groups.length-1],h=f.start+f.count;h!==a.materialIndex.length&&s.addGroup(h,a.materialIndex.length-h,l)}0===s.groups.length&&s.addGroup(0,a.materialIndex.length,a.materialIndex[0])}return this.addMorphTargets(s,e,i,r),s}parseGeoNode(e,t){const i={};if(i.vertexPositions=void 0!==e.Vertices?e.Vertices.a:[],i.vertexIndices=void 0!==e.PolygonVertexIndex?e.PolygonVertexIndex.a:[],e.LayerElementColor&&(i.color=this.parseVertexColors(e.LayerElementColor[0])),e.LayerElementMaterial&&(i.material=this.parseMaterialIndices(e.LayerElementMaterial[0])),e.LayerElementNormal&&(i.normal=this.parseNormals(e.LayerElementNormal[0])),e.LayerElementUV){i.uv=[];let r=0;for(;e.LayerElementUV[r];)e.LayerElementUV[r].UV&&i.uv.push(this.parseUVs(e.LayerElementUV[r])),r++}return i.weightTable={},null!==t&&(i.skeleton=t,t.rawBones.forEach(function(r,s){r.indices.forEach(function(o,a){void 0===i.weightTable[o]&&(i.weightTable[o]=[]),i.weightTable[o].push({id:s,weight:r.weights[a]})})})),i}genBuffers(e){const t={vertex:[],normal:[],colors:[],uvs:[],materialIndex:[],vertexWeights:[],weightsIndices:[]};let i=0,r=0,s=!1,o=[],a=[],c=[],l=[],u=[],f=[];const h=this;return e.vertexIndices.forEach(function(d,p){let m,g=!1;d<0&&(d^=-1,g=!0);let v=[],x=[];if(o.push(3*d,3*d+1,3*d+2),e.color){const y=Df(p,i,d,e.color);c.push(y[0],y[1],y[2])}if(e.skeleton){if(void 0!==e.weightTable[d]&&e.weightTable[d].forEach(function(y){x.push(y.weight),v.push(y.id)}),x.length>4){s||(console.warn("THREE.FBXLoader: Vertex has more than 4 skinning weights assigned to vertex. Deleting additional weights."),s=!0);const y=[0,0,0,0],_=[0,0,0,0];x.forEach(function(M,w){let D=M,b=v[w];_.forEach(function(E,I,z){if(D>E){z[I]=D,D=E;const U=y[I];y[I]=b,b=U}})}),v=y,x=_}for(;x.length<4;)x.push(0),v.push(0);for(let y=0;y<4;++y)u.push(x[y]),f.push(v[y])}if(e.normal){const y=Df(p,i,d,e.normal);a.push(y[0],y[1],y[2])}e.material&&"AllSame"!==e.material.mappingType&&(m=Df(p,i,d,e.material)[0],m<0&&(h.negativeMaterialIndices=!0,m=0)),e.uv&&e.uv.forEach(function(y,_){const M=Df(p,i,d,y);void 0===l[_]&&(l[_]=[]),l[_].push(M[0]),l[_].push(M[1])}),r++,g&&(r>4&&console.warn("THREE.FBXLoader: Polygons with more than four sides are not supported. Make sure to triangulate the geometry during export."),h.genFace(t,e,o,m,a,c,l,u,f,r),i++,r=0,o=[],a=[],c=[],l=[],u=[],f=[])}),t}genFace(e,t,i,r,s,o,a,c,l,u){for(let f=2;f<u;f++)e.vertex.push(t.vertexPositions[i[0]]),e.vertex.push(t.vertexPositions[i[1]]),e.vertex.push(t.vertexPositions[i[2]]),e.vertex.push(t.vertexPositions[i[3*(f-1)]]),e.vertex.push(t.vertexPositions[i[3*(f-1)+1]]),e.vertex.push(t.vertexPositions[i[3*(f-1)+2]]),e.vertex.push(t.vertexPositions[i[3*f]]),e.vertex.push(t.vertexPositions[i[3*f+1]]),e.vertex.push(t.vertexPositions[i[3*f+2]]),t.skeleton&&(e.vertexWeights.push(c[0]),e.vertexWeights.push(c[1]),e.vertexWeights.push(c[2]),e.vertexWeights.push(c[3]),e.vertexWeights.push(c[4*(f-1)]),e.vertexWeights.push(c[4*(f-1)+1]),e.vertexWeights.push(c[4*(f-1)+2]),e.vertexWeights.push(c[4*(f-1)+3]),e.vertexWeights.push(c[4*f]),e.vertexWeights.push(c[4*f+1]),e.vertexWeights.push(c[4*f+2]),e.vertexWeights.push(c[4*f+3]),e.weightsIndices.push(l[0]),e.weightsIndices.push(l[1]),e.weightsIndices.push(l[2]),e.weightsIndices.push(l[3]),e.weightsIndices.push(l[4*(f-1)]),e.weightsIndices.push(l[4*(f-1)+1]),e.weightsIndices.push(l[4*(f-1)+2]),e.weightsIndices.push(l[4*(f-1)+3]),e.weightsIndices.push(l[4*f]),e.weightsIndices.push(l[4*f+1]),e.weightsIndices.push(l[4*f+2]),e.weightsIndices.push(l[4*f+3])),t.color&&(e.colors.push(o[0]),e.colors.push(o[1]),e.colors.push(o[2]),e.colors.push(o[3*(f-1)]),e.colors.push(o[3*(f-1)+1]),e.colors.push(o[3*(f-1)+2]),e.colors.push(o[3*f]),e.colors.push(o[3*f+1]),e.colors.push(o[3*f+2])),t.material&&"AllSame"!==t.material.mappingType&&(e.materialIndex.push(r),e.materialIndex.push(r),e.materialIndex.push(r)),t.normal&&(e.normal.push(s[0]),e.normal.push(s[1]),e.normal.push(s[2]),e.normal.push(s[3*(f-1)]),e.normal.push(s[3*(f-1)+1]),e.normal.push(s[3*(f-1)+2]),e.normal.push(s[3*f]),e.normal.push(s[3*f+1]),e.normal.push(s[3*f+2])),t.uv&&t.uv.forEach(function(h,d){void 0===e.uvs[d]&&(e.uvs[d]=[]),e.uvs[d].push(a[d][0]),e.uvs[d].push(a[d][1]),e.uvs[d].push(a[d][2*(f-1)]),e.uvs[d].push(a[d][2*(f-1)+1]),e.uvs[d].push(a[d][2*f]),e.uvs[d].push(a[d][2*f+1])})}addMorphTargets(e,t,i,r){if(0===i.length)return;e.morphTargetsRelative=!0,e.morphAttributes.position=[];const s=this;i.forEach(function(o){o.rawTargets.forEach(function(a){const c=ht.Objects.Geometry[a.geoID];void 0!==c&&s.genMorphGeometry(e,t,c,r,a.name)})})}genMorphGeometry(e,t,i,r,s){const o=void 0!==t.PolygonVertexIndex?t.PolygonVertexIndex.a:[],a=void 0!==i.Vertices?i.Vertices.a:[],c=void 0!==i.Indexes?i.Indexes.a:[],u=new Float32Array(3*e.attributes.position.count);for(let p=0;p<c.length;p++){const m=3*c[p];u[m]=a[3*p],u[m+1]=a[3*p+1],u[m+2]=a[3*p+2]}const h=this.genBuffers({vertexIndices:o,vertexPositions:u}),d=new Me(h.vertex,3);d.name=s||i.attrName,d.applyMatrix4(r),e.morphAttributes.position.push(d)}parseNormals(e){const i=e.ReferenceInformationType;let s=[];return"IndexToDirect"===i&&("NormalIndex"in e?s=e.NormalIndex.a:"NormalsIndex"in e&&(s=e.NormalsIndex.a)),{dataSize:3,buffer:e.Normals.a,indices:s,mappingType:e.MappingInformationType,referenceType:i}}parseUVs(e){const i=e.ReferenceInformationType;let s=[];return"IndexToDirect"===i&&(s=e.UVIndex.a),{dataSize:2,buffer:e.UV.a,indices:s,mappingType:e.MappingInformationType,referenceType:i}}parseVertexColors(e){const i=e.ReferenceInformationType;let s=[];return"IndexToDirect"===i&&(s=e.ColorIndex.a),{dataSize:4,buffer:e.Colors.a,indices:s,mappingType:e.MappingInformationType,referenceType:i}}parseMaterialIndices(e){const t=e.MappingInformationType,i=e.ReferenceInformationType;if("NoMappingInformation"===t)return{dataSize:1,buffer:[0],indices:[0],mappingType:"AllSame",referenceType:i};const r=e.Materials.a,s=[];for(let o=0;o<r.length;++o)s.push(o);return{dataSize:1,buffer:r,indices:s,mappingType:t,referenceType:i}}parseNurbsGeometry(e){if(void 0===sA)return console.error("THREE.FBXLoader: The loader relies on NURBSCurve for any nurbs present in the model. Nurbs will show up as empty geometry."),new Ze;const t=parseInt(e.Order);if(isNaN(t))return console.error("THREE.FBXLoader: Invalid Order %s given for geometry ID: %s",e.Order,e.id),new Ze;const i=t-1,r=e.KnotVector.a,s=[],o=e.Points.a;for(let f=0,h=o.length;f<h;f+=4)s.push((new ft).fromArray(o,f));let a,c;if("Closed"===e.Form)s.push(s[0]);else if("Periodic"===e.Form){a=i,c=r.length-1-a;for(let f=0;f<i;++f)s.push(s[f])}const u=new sA(i,r,s,a,c).getPoints(12*s.length);return(new Ze).setFromPoints(u)}}class A1e{parse(){const e=[],t=this.parseClips();if(void 0!==t)for(const i in t){const s=this.addClip(t[i]);e.push(s)}return e}parseClips(){if(void 0===ht.Objects.AnimationCurve)return;const e=this.parseAnimationCurveNodes();this.parseAnimationCurves(e);const t=this.parseAnimationLayers(e);return this.parseAnimStacks(t)}parseAnimationCurveNodes(){const e=ht.Objects.AnimationCurveNode,t=new Map;for(const i in e){const r=e[i];if(null!==r.attrName.match(/S|R|T|DeformPercent/)){const s={id:r.id,attr:r.attrName,curves:{}};t.set(s.id,s)}}return t}parseAnimationCurves(e){const t=ht.Objects.AnimationCurve;for(const i in t){const r={id:t[i].id,times:t[i].KeyTime.a.map(P1e),values:t[i].KeyValueFloat.a},s=vn.get(r.id);if(void 0!==s){const o=s.parents[0].ID,a=s.parents[0].relationship;a.match(/X/)?e.get(o).curves.x=r:a.match(/Y/)?e.get(o).curves.y=r:a.match(/Z/)?e.get(o).curves.z=r:a.match(/d|DeformPercent/)&&e.has(o)&&(e.get(o).curves.morph=r)}}}parseAnimationLayers(e){const t=ht.Objects.AnimationLayer,i=new Map;for(const r in t){const s=[],o=vn.get(parseInt(r));void 0!==o&&(o.children.forEach(function(c,l){if(e.has(c.ID)){const u=e.get(c.ID);if(void 0!==u.curves.x||void 0!==u.curves.y||void 0!==u.curves.z){if(void 0===s[l]){const f=vn.get(c.ID).parents.filter(function(h){return void 0!==h.relationship})[0].ID;if(void 0!==f){const h=ht.Objects.Model[f.toString()];if(void 0===h)return void console.warn("THREE.FBXLoader: Encountered a unused curve.",c);const d={modelName:h.attrName?At.sanitizeNodeName(h.attrName):"",ID:h.id,initialPosition:[0,0,0],initialRotation:[0,0,0],initialScale:[1,1,1]};Di.traverse(function(p){p.ID===h.id&&(d.transform=p.matrix,p.userData.transformData&&(d.eulerOrder=p.userData.transformData.eulerOrder))}),d.transform||(d.transform=new Ce),"PreRotation"in h&&(d.preRotation=h.PreRotation.value),"PostRotation"in h&&(d.postRotation=h.PostRotation.value),s[l]=d}}s[l]&&(s[l][u.attr]=u)}else if(void 0!==u.curves.morph){if(void 0===s[l]){const f=vn.get(c.ID).parents.filter(function(v){return void 0!==v.relationship})[0].ID,h=vn.get(f).parents[0].ID,d=vn.get(h).parents[0].ID,p=vn.get(d).parents[0].ID,m=ht.Objects.Model[p],g={modelName:m.attrName?At.sanitizeNodeName(m.attrName):"",morphName:ht.Objects.Deformer[f].attrName};s[l]=g}s[l][u.attr]=u}}}),i.set(parseInt(r),s))}return i}parseAnimStacks(e){const t=ht.Objects.AnimationStack,i={};for(const r in t){const s=vn.get(parseInt(r)).children;s.length>1&&console.warn("THREE.FBXLoader: Encountered an animation stack with multiple layers, this is currently not supported. Ignoring subsequent layers.");const o=e.get(s[0].ID);i[r]={name:t[r].attrName,layer:o}}return i}addClip(e){let t=[];const i=this;return e.layer.forEach(function(r){t=t.concat(i.generateTracks(r))}),new I2(e.name,-1,t)}generateTracks(e){const t=[];let i=new C,r=new Mn,s=new C;if(e.transform&&e.transform.decompose(i,r,s),i=i.toArray(),r=(new Ps).setFromQuaternion(r,e.eulerOrder).toArray(),s=s.toArray(),void 0!==e.T&&Object.keys(e.T.curves).length>0){const o=this.generateVectorTrack(e.modelName,e.T.curves,i,"position");void 0!==o&&t.push(o)}if(void 0!==e.R&&Object.keys(e.R.curves).length>0){const o=this.generateRotationTrack(e.modelName,e.R.curves,r,e.preRotation,e.postRotation,e.eulerOrder);void 0!==o&&t.push(o)}if(void 0!==e.S&&Object.keys(e.S.curves).length>0){const o=this.generateVectorTrack(e.modelName,e.S.curves,s,"scale");void 0!==o&&t.push(o)}if(void 0!==e.DeformPercent){const o=this.generateMorphTrack(e);void 0!==o&&t.push(o)}return t}generateVectorTrack(e,t,i,r){const s=this.getTimesForAllAxes(t),o=this.getKeyframeTrackValues(s,t,i);return new T2(e+"."+r,s,o)}generateRotationTrack(e,t,i,r,s,o){void 0!==t.x&&(this.interpolateRotations(t.x),t.x.values=t.x.values.map(Tr.degToRad)),void 0!==t.y&&(this.interpolateRotations(t.y),t.y.values=t.y.values.map(Tr.degToRad)),void 0!==t.z&&(this.interpolateRotations(t.z),t.z.values=t.z.values.map(Tr.degToRad));const a=this.getTimesForAllAxes(t),c=this.getKeyframeTrackValues(a,t,i);void 0!==r&&((r=r.map(Tr.degToRad)).push(o),r=(new Ps).fromArray(r),r=(new Mn).setFromEuler(r)),void 0!==s&&((s=s.map(Tr.degToRad)).push(o),s=(new Ps).fromArray(s),s=(new Mn).setFromEuler(s).invert());const l=new Mn,u=new Ps,f=[];for(let h=0;h<c.length;h+=3)u.set(c[h],c[h+1],c[h+2],o),l.setFromEuler(u),void 0!==r&&l.premultiply(r),void 0!==s&&l.multiply(s),l.toArray(f,h/3*4);return new So(e+".quaternion",a,f)}generateMorphTrack(e){const t=e.DeformPercent.curves.morph,i=t.values.map(function(s){return s/100}),r=Di.getObjectByName(e.modelName).morphTargetDictionary[e.morphName];return new D2(e.modelName+".morphTargetInfluences["+r+"]",t.times,i)}getTimesForAllAxes(e){let t=[];if(void 0!==e.x&&(t=t.concat(e.x.times)),void 0!==e.y&&(t=t.concat(e.y.times)),void 0!==e.z&&(t=t.concat(e.z.times)),t=t.sort(function(i,r){return i-r}),t.length>1){let i=1,r=t[0];for(let s=1;s<t.length;s++){const o=t[s];o!==r&&(t[i]=o,r=o,i++)}t=t.slice(0,i)}return t}getKeyframeTrackValues(e,t,i){const r=i,s=[];let o=-1,a=-1,c=-1;return e.forEach(function(l){if(t.x&&(o=t.x.times.indexOf(l)),t.y&&(a=t.y.times.indexOf(l)),t.z&&(c=t.z.times.indexOf(l)),-1!==o){const u=t.x.values[o];s.push(u),r[0]=u}else s.push(r[0]);if(-1!==a){const u=t.y.values[a];s.push(u),r[1]=u}else s.push(r[1]);if(-1!==c){const u=t.z.values[c];s.push(u),r[2]=u}else s.push(r[2])}),s}interpolateRotations(e){for(let t=1;t<e.values.length;t++){const i=e.values[t-1],r=e.values[t]-i,s=Math.abs(r);if(s>=180){const o=s/180,a=r/o;let c=i+a;const l=e.times[t-1],f=(e.times[t]-l)/o;let h=l+f;const d=[],p=[];for(;h<e.times[t];)d.push(h),h+=f,p.push(c),c+=a;e.times=hA(e.times,t,d),e.values=hA(e.values,t,p)}}}}class T1e{getPrevNode(){return this.nodeStack[this.currentIndent-2]}getCurrentNode(){return this.nodeStack[this.currentIndent-1]}getCurrentProp(){return this.currentProp}pushStack(e){this.nodeStack.push(e),this.currentIndent+=1}popStack(){this.nodeStack.pop(),this.currentIndent-=1}setCurrentProp(e,t){this.currentProp=e,this.currentPropName=t}parse(e){this.currentIndent=0,this.allNodes=new aA,this.nodeStack=[],this.currentProp=[],this.currentPropName="";const t=this,i=e.split(/[\r\n]+/);return i.forEach(function(r,s){const o=r.match(/^[\s\t]*;/),a=r.match(/^[\s\t]*$/);if(o||a)return;const c=r.match("^\\t{"+t.currentIndent+"}(\\w+):(.*){",""),l=r.match("^\\t{"+t.currentIndent+"}(\\w+):[\\s\\t\\r\\n](.*)"),u=r.match("^\\t{"+(t.currentIndent-1)+"}}");c?t.parseNodeBegin(r,c):l?t.parseNodeProperty(r,l,i[++s]):u?t.popStack():r.match(/^[^\s\t}]/)&&t.parseNodePropertyContinued(r)}),this.allNodes}parseNodeBegin(e,t){const i=t[1].trim().replace(/^"/,"").replace(/"$/,""),r=t[2].split(",").map(function(c){return c.trim().replace(/^"/,"").replace(/"$/,"")}),s={name:i},o=this.parseNodeAttr(r),a=this.getCurrentNode();0===this.currentIndent?this.allNodes.add(i,s):i in a?("PoseNode"===i?a.PoseNode.push(s):void 0!==a[i].id&&(a[i]={},a[i][a[i].id]=a[i]),""!==o.id&&(a[i][o.id]=s)):"number"==typeof o.id?(a[i]={},a[i][o.id]=s):"Properties70"!==i&&(a[i]="PoseNode"===i?[s]:s),"number"==typeof o.id&&(s.id=o.id),""!==o.name&&(s.attrName=o.name),""!==o.type&&(s.attrType=o.type),this.pushStack(s)}parseNodeAttr(e){let t=e[0];""!==e[0]&&(t=parseInt(e[0]),isNaN(t)&&(t=e[0]));let i="",r="";return e.length>1&&(i=e[1].replace(/^(\w+)::/,""),r=e[2]),{id:t,name:i,type:r}}parseNodeProperty(e,t,i){let r=t[1].replace(/^"/,"").replace(/"$/,"").trim(),s=t[2].replace(/^"/,"").replace(/"$/,"").trim();"Content"===r&&","===s&&(s=i.replace(/"/g,"").replace(/,$/,"").trim());const o=this.getCurrentNode();if("Properties70"!==o.name){if("C"===r){const c=s.split(",").slice(1),l=parseInt(c[0]),u=parseInt(c[1]);let f=s.split(",").slice(3);f=f.map(function(h){return h.trim().replace(/^"/,"")}),r="connections",s=[l,u],function N1e(n,e){for(let t=0,i=n.length,r=e.length;t<r;t++,i++)n[i]=e[t]}(s,f),void 0===o[r]&&(o[r]=[])}"Node"===r&&(o.id=s),r in o&&Array.isArray(o[r])?o[r].push(s):"a"!==r?o[r]=s:o.a=s,this.setCurrentProp(o,r),"a"===r&&","!==s.slice(-1)&&(o.a=zp(s))}else this.parseNodeSpecialProperty(e,r,s)}parseNodePropertyContinued(e){const t=this.getCurrentNode();t.a+=e,","!==e.slice(-1)&&(t.a=zp(t.a))}parseNodeSpecialProperty(e,t,i){const r=i.split('",').map(function(u){return u.trim().replace(/^\"/,"").replace(/\s/,"_")}),s=r[0],o=r[1],a=r[2],c=r[3];let l=r[4];switch(o){case"int":case"enum":case"bool":case"ULongLong":case"double":case"Number":case"FieldOfView":l=parseFloat(l);break;case"Color":case"ColorRGB":case"Vector3D":case"Lcl_Translation":case"Lcl_Rotation":case"Lcl_Scaling":l=zp(l)}this.getPrevNode()[s]={type:o,type2:a,flag:c,value:l},this.setCurrentProp(this.getPrevNode(),s)}}class I1e{parse(e){const t=new oA(e);t.skip(23);const i=t.getUint32();if(i<6400)throw new Error("THREE.FBXLoader: FBX version not supported, FileVersion: "+i);const r=new aA;for(;!this.endOfContent(t);){const s=this.parseNode(t,i);null!==s&&r.add(s.name,s)}return r}endOfContent(e){return e.size()%16==0?(e.getOffset()+160+16&-16)>=e.size():e.getOffset()+160+16>=e.size()}parseNode(e,t){const i={},r=t>=7500?e.getUint64():e.getUint32(),s=t>=7500?e.getUint64():e.getUint32();t>=7500?e.getUint64():e.getUint32();const o=e.getUint8(),a=e.getString(o);if(0===r)return null;const c=[];for(let h=0;h<s;h++)c.push(this.parseProperty(e));const l=c.length>0?c[0]:"",u=c.length>1?c[1]:"",f=c.length>2?c[2]:"";for(i.singleProperty=1===s&&e.getOffset()===r;r>e.getOffset();){const h=this.parseNode(e,t);null!==h&&this.parseSubNode(a,i,h)}return i.propertyList=c,"number"==typeof l&&(i.id=l),""!==u&&(i.attrName=u),""!==f&&(i.attrType=f),""!==a&&(i.name=a),i}parseSubNode(e,t,i){if(!0===i.singleProperty){const r=i.propertyList[0];Array.isArray(r)?(t[i.name]=i,i.a=r):t[i.name]=r}else if("Connections"===e&&"C"===i.name){const r=[];i.propertyList.forEach(function(s,o){0!==o&&r.push(s)}),void 0===t.connections&&(t.connections=[]),t.connections.push(r)}else if("Properties70"===i.name)Object.keys(i).forEach(function(s){t[s]=i[s]});else if("Properties70"===e&&"P"===i.name){let r=i.propertyList[0],s=i.propertyList[1];const o=i.propertyList[2],a=i.propertyList[3];let c;0===r.indexOf("Lcl ")&&(r=r.replace("Lcl ","Lcl_")),0===s.indexOf("Lcl ")&&(s=s.replace("Lcl ","Lcl_")),c="Color"===s||"ColorRGB"===s||"Vector"===s||"Vector3D"===s||0===s.indexOf("Lcl_")?[i.propertyList[4],i.propertyList[5],i.propertyList[6]]:i.propertyList[4],t[r]={type:s,type2:o,flag:a,value:c}}else void 0===t[i.name]?"number"==typeof i.id?(t[i.name]={},t[i.name][i.id]=i):t[i.name]=i:"PoseNode"===i.name?(Array.isArray(t[i.name])||(t[i.name]=[t[i.name]]),t[i.name].push(i)):void 0===t[i.name][i.id]&&(t[i.name][i.id]=i)}parseProperty(e){const t=e.getString(1);let i;switch(t){case"C":return e.getBoolean();case"D":return e.getFloat64();case"F":return e.getFloat32();case"I":return e.getInt32();case"L":return e.getInt64();case"R":return i=e.getUint32(),e.getArrayBuffer(i);case"S":return i=e.getUint32(),e.getString(i);case"Y":return e.getInt16();case"b":case"c":case"d":case"f":case"i":case"l":const r=e.getUint32(),s=e.getUint32(),o=e.getUint32();if(0===s)switch(t){case"b":case"c":return e.getBooleanArray(r);case"d":return e.getFloat64Array(r);case"f":return e.getFloat32Array(r);case"i":return e.getInt32Array(r);case"l":return e.getInt64Array(r)}typeof Y2>"u"&&console.error("THREE.FBXLoader: External library fflate.min.js required.");const a=_3(new Uint8Array(e.getArrayBuffer(o))),c=new oA(a.buffer);switch(t){case"b":case"c":return c.getBooleanArray(r);case"d":return c.getFloat64Array(r);case"f":return c.getFloat32Array(r);case"i":return c.getInt32Array(r);case"l":return c.getInt64Array(r)}break;default:throw new Error("THREE.FBXLoader: Unknown property type "+t)}}}class oA{constructor(e,t){this.dv=new DataView(e),this.offset=0,this.littleEndian=void 0===t||t}getOffset(){return this.offset}size(){return this.dv.buffer.byteLength}skip(e){this.offset+=e}getBoolean(){return 1==(1&this.getUint8())}getBooleanArray(e){const t=[];for(let i=0;i<e;i++)t.push(this.getBoolean());return t}getUint8(){const e=this.dv.getUint8(this.offset);return this.offset+=1,e}getInt16(){const e=this.dv.getInt16(this.offset,this.littleEndian);return this.offset+=2,e}getInt32(){const e=this.dv.getInt32(this.offset,this.littleEndian);return this.offset+=4,e}getInt32Array(e){const t=[];for(let i=0;i<e;i++)t.push(this.getInt32());return t}getUint32(){const e=this.dv.getUint32(this.offset,this.littleEndian);return this.offset+=4,e}getInt64(){let e,t;return this.littleEndian?(e=this.getUint32(),t=this.getUint32()):(t=this.getUint32(),e=this.getUint32()),2147483648&t?(t=4294967295&~t,e=4294967295&~e,4294967295===e&&(t=t+1&4294967295),e=e+1&4294967295,-(4294967296*t+e)):4294967296*t+e}getInt64Array(e){const t=[];for(let i=0;i<e;i++)t.push(this.getInt64());return t}getUint64(){let e,t;return this.littleEndian?(e=this.getUint32(),t=this.getUint32()):(t=this.getUint32(),e=this.getUint32()),4294967296*t+e}getFloat32(){const e=this.dv.getFloat32(this.offset,this.littleEndian);return this.offset+=4,e}getFloat32Array(e){const t=[];for(let i=0;i<e;i++)t.push(this.getFloat32());return t}getFloat64(){const e=this.dv.getFloat64(this.offset,this.littleEndian);return this.offset+=8,e}getFloat64Array(e){const t=[];for(let i=0;i<e;i++)t.push(this.getFloat64());return t}getArrayBuffer(e){const t=this.dv.buffer.slice(this.offset,this.offset+e);return this.offset+=e,t}getString(e){let t=[];for(let r=0;r<e;r++)t[r]=this.getUint8();const i=t.indexOf(0);return i>=0&&(t=t.slice(0,i)),ar.decodeText(new Uint8Array(t))}}class aA{add(e,t){this[e]=t}}function cA(n){const t=n.match(/FBXVersion: (\d+)/);if(t)return parseInt(t[1]);throw new Error("THREE.FBXLoader: Cannot find the version number for the file given.")}function P1e(n){return n/46186158e3}const z1e=[];function Df(n,e,t,i){let r;switch(i.mappingType){case"ByPolygonVertex":r=n;break;case"ByPolygon":r=e;break;case"ByVertice":r=t;break;case"AllSame":r=i.indices[0];break;default:console.warn("THREE.FBXLoader: unknown attribute mapping type "+i.mappingType)}"IndexToDirect"===i.referenceType&&(r=i.indices[r]);const s=r*i.dataSize;return function F1e(n,e,t,i){for(let r=t,s=0;r<i;r++,s++)n[s]=e[r];return n}(z1e,i.buffer,s,s+i.dataSize)}const Pp=new Ps,$2=new C;function lA(n){const e=new Ce,t=new Ce,i=new Ce,r=new Ce,s=new Ce,o=new Ce,a=new Ce,c=new Ce,l=new Ce,u=new Ce,f=new Ce,h=new Ce,d=n.inheritType?n.inheritType:0;if(n.translation&&e.setPosition($2.fromArray(n.translation)),n.preRotation){const I=n.preRotation.map(Tr.degToRad);I.push(n.eulerOrder||Ps.DefaultOrder),t.makeRotationFromEuler(Pp.fromArray(I))}if(n.rotation){const I=n.rotation.map(Tr.degToRad);I.push(n.eulerOrder||Ps.DefaultOrder),i.makeRotationFromEuler(Pp.fromArray(I))}if(n.postRotation){const I=n.postRotation.map(Tr.degToRad);I.push(n.eulerOrder||Ps.DefaultOrder),r.makeRotationFromEuler(Pp.fromArray(I)),r.invert()}n.scale&&s.scale($2.fromArray(n.scale)),n.scalingOffset&&a.setPosition($2.fromArray(n.scalingOffset)),n.scalingPivot&&o.setPosition($2.fromArray(n.scalingPivot)),n.rotationOffset&&c.setPosition($2.fromArray(n.rotationOffset)),n.rotationPivot&&l.setPosition($2.fromArray(n.rotationPivot)),n.parentMatrixWorld&&(f.copy(n.parentMatrix),u.copy(n.parentMatrixWorld));const p=t.clone().multiply(i).multiply(r),m=new Ce;m.extractRotation(u);const g=new Ce;g.copyPosition(u);const v=g.clone().invert().multiply(u),x=m.clone().invert().multiply(v),y=s,_=new Ce;if(0===d)_.copy(m).multiply(p).multiply(x).multiply(y);else if(1===d)_.copy(m).multiply(x).multiply(p).multiply(y);else{const z=(new Ce).scale((new C).setFromMatrixScale(f)).clone().invert(),U=x.clone().multiply(z);_.copy(m).multiply(p).multiply(U).multiply(y)}const M=l.clone().invert(),w=o.clone().invert();let D=e.clone().multiply(c).multiply(l).multiply(t).multiply(i).multiply(r).multiply(M).multiply(a).multiply(o).multiply(s).multiply(w);const b=(new Ce).copyPosition(D),E=u.clone().multiply(b);return h.copyPosition(E),D=h.clone().multiply(_),D.premultiply(u.invert()),D}function uA(n){const e=["ZYX","YZX","XZY","ZXY","YXZ","XYZ"];return 6===(n=n||0)?(console.warn("THREE.FBXLoader: unsupported Euler Order: Spherical XYZ. Animations and rotations may be incorrect."),e[0]):e[n]}function zp(n){return n.split(",").map(function(t){return parseFloat(t)})}function fA(n,e,t){return void 0===e&&(e=0),void 0===t&&(t=n.byteLength),ar.decodeText(new Uint8Array(n,e,t))}function hA(n,e,t){return n.slice(0,e).concat(t).concat(n.slice(e))}class O1e{constructor(e){this.arrowFire=[],this.counter=0,this.bow=new sr,this.position=new C(0,0,-120),this.isMouseDown=!1,this.rotY=0,this.rotZ=0,this.power=i=>i*i*1.3,this.scene=e,(new S1e).load(qae,i=>{this.mixer=new JE(i),this.action=this.mixer.clipAction(i.animations[0]),this.action.play(),this.action.weight=1,this.action.repetitions=1,this.action.setDuration(.4),this.bow.add(i);const s=(new Z7).load(Zae);i.traverse(o=>{!o.isSkinnedMesh||o.material.isMaterial&&(o.material.map=s,o.material.needsUpdate=!0)}),console.log(i),this.createArrow()})}createArrow(){const e=new an(new C2(.3,.3,72,32,32),new pi);e.rotation.set(0,0,.5*Math.PI);const r=(new Ia).moveTo(-3,-4).lineTo(3,-4).lineTo(0,4).lineTo(-3,-4),o=new K0(r,{depth:1}),a=new an(o,new s3({color:16711680}));a.position.set(0,40,0),e.add(a),this.arrow=new sr,this.arrow.add(e),this.arrow.position.set(-48,30,0),this.arrow.name="Arrow",this.bow.add(this.arrow),this.scene.add(this.bow);for(let c=0;c<5;c++)this.arrowFire.push(this.arrow.clone()),this.scene.add(this.arrowFire[c]),this.arrowFire[c].name="arrowFire",this.arrowFire[c].visible=!1}render(e,t){const i=window.setKey;if(this.arrow){if(this.mixer&&this.mixer.update(e),this.counter++,this.action.time<.25?this.arrow.position.x=280*this.power(this.action.time)-48:this.action.time<.33?this.arrow.position.x=280*this.power(this.action.time*(.8+this.action.time))-48:this.action.time<.35?this.arrow.position.x=280*this.power(this.action.time)-40:this.action.time<.37?this.arrow.position.x=280*this.power(this.action.time*(.8+.75*this.action.time))-48:this.action.time>.47&&(this.arrow.position.x=162-280*this.power(1.4*this.action.time)),this.action.time>.595&&(this.action.time<7&&this.setArrow(),this.action.time=7),this.arrow.visible=!(this.action.time>.595),this.arrowFire.forEach(r=>{r.visible&&(r.translateX(-20),r.rotateOnAxis(new C(0,0,1),.003))}),i?.reset&&(i.reset=!1,this.action.reset()),t.isMouseDown){0==this.isMouseDown&&(this.rotY=this.bow.rotation.y,this.rotZ=this.bow.rotation.z);const s=t.mouseDownPos.y-t.mouse.y;this.bow.rotation.y=this.rotY-2*(t.mouseDownPos.x-t.mouse.x),this.bow.rotation.z=this.rotZ-2*s,this.isMouseDown=!0}else this.isMouseDown&&this.action.time>.59&&this.action.reset(),this.isMouseDown=!1;this.bow.rotation.y>-.75&&(this.bow.rotation.y=-.75),this.bow.rotation.y<-2.55&&(this.bow.rotation.y=-2.55),this.bow.rotation.z<-.85&&(this.bow.rotation.z=-.85),this.bow.rotation.z>.65&&(this.bow.rotation.z=.65)}}setVisible(e){this.bow.visible=e,this.arrowFire.forEach(t=>{t.visible=!1})}getArrowPosition(){const e=new C;return this.arrowFire[0]?.children[0].getWorldPosition(e),e}setArrow(){const e=new Mn;this.arrow.getWorldQuaternion(e);const t=new C;this.arrow.getWorldPosition(t),this.arrowFire.forEach(i=>{(!i.visible||Math.abs(i.position.z)>400||Math.abs(i.position.x)>600)&&(console.log(i.visible),i.position.copy(t),i.quaternion.copy(e),i.visible=!0)})}}const k1e={sx:0,sy:0,sz:0,rx:0,ry:0,rz:0,reset:!1};class V1e{constructor(e,t){this.initDistance=0,this.isMouseDown=!1,this.mouse=new q,this.mouseMultiTouch=new q,this.mouseDownPos=new q,this.eventDown=i=>{this.touchEvent(i,ws.touchDown,0)},this.eventMove=i=>{this.touchEvent(i,ws.touchMove,0)},this.eventUp=i=>{this.touchEvent(i,ws.touchUp,0)},this.onPinch=i=>{console.log(i)},this.addEventListeners=()=>{document.addEventListener("keydown",Af),document.addEventListener("mousedown",this.eventDown),document.addEventListener("touchstart",this.eventDown),document.addEventListener("mousemove",this.eventMove),document.addEventListener("touchmove",this.eventMove),document.addEventListener("mouseup",this.eventUp),document.addEventListener("touchend",this.eventUp),Af(0)},this.removeEventListeners=()=>{document.removeEventListener("keydown",Af),document.removeEventListener("mousedown",this.eventDown),document.removeEventListener("touchstart",this.eventDown),document.removeEventListener("mousemove",this.eventMove),document.removeEventListener("touchmove",this.eventMove),document.removeEventListener("mouseup",this.eventUp),document.removeEventListener("touchend",this.eventUp),Af(0)},this.touchEvent=(i,r,s)=>{const o=window.innerHeight,a=window.innerWidth;if(null!=i.touches){if(i.touches.length>0&&(this.mouse.x=i.touches[0].pageX/a*2-1,this.mouse.y=-i.touches[0].pageY/o*2+1,2===i.touches.length))if(this.mouseMultiTouch.x=i.touches[1].pageX/window.innerWidth*2-1,this.mouseMultiTouch.y=-i.touches[1].pageY/window.innerHeight*2+1,r===ws.touchDown)this.initDistance=this.mouseMultiTouch.distanceTo(this.mouse),this.onPinch({type:"pinchStart",scale:1});else{const c=this.mouseMultiTouch.distanceTo(this.mouse);this.onPinch({type:"pinchMove",scale:c/this.initDistance})}}else{const c=this.domElement,l=c.getBoundingClientRect(),f=c.height/l.height*(i.clientY-l.top);this.mouse.x=c.width/l.width*(i.clientX-l.left)/a*2-1,this.mouse.y=-f/o*2+1}r===ws.touchDown&&(this.mouseDownPos.x=this.mouse.x,this.mouseDownPos.y=this.mouse.y,this.isMouseDown=!0,i.touches?.length>1&&(this.isMouseDown=!1)),r===ws.touchUp&&(this.isMouseDown=!1),this.callbackEventListeners({mouse:this.mouse,isMouseDown:this.isMouseDown})},this.callbackEventListeners=e,this.domElement=t,this.addEventListeners()}}const Af=n=>{window?.setKey?.sx||(window.setKey=k1e);const e=window.setKey,i=.1;switch(n.keyCode){case 37:e.sx=e.sx-1;break;case 38:e.sz=e.sz+1;break;case 39:e.sx=e.sx+1;break;case 40:e.sz=e.sz-1;break;case 65:e.sy=e.sy+1;break;case 66:case 90:e.sy=e.sy-1;break;case 49:case 97:e.rx=e.rx-i;break;case 50:case 98:e.rx=e.rx+i;break;case 52:case 100:e.ry=e.ry-i;break;case 53:case 101:e.ry=e.ry+i;break;case 55:case 103:e.rz=e.rz-i;break;case 56:case 104:e.rz=e.rz+i;break;case 57:case 105:e.sx=e.sy=e.sz=0;break;case 54:case 102:e.rx=e.ry=e.rz=0;break;case 32:e.reset=!0}console.log(n.keyCode,JSON.stringify(e))},dA=`\n    #define USE_FOG;\n    varying vec2 vUv; \n    uniform vec3 uColor;\n    uniform float uTime;\n    #include <roadMarkings_vars>\n    ${$e.fog_pars_fragment}\n    void main() {\n        vec2 uv = vUv;\n        vec3 color = vec3(uColor);\n        \n        #include <roadMarkings_fragment>\n\n        gl_FragColor = vec4(color,1.);\n        ${$e.fog_fragment}\n    }\n`,U1e=dA.replace("#include <roadMarkings_fragment>","").replace("#include <roadMarkings_vars>",""),G1e=dA.replace("#include <roadMarkings_fragment>","\n    uv.y = mod(uv.y + uTime * 0.1,1.);\n    float brokenLineWidth = 1. / uLanes * uBrokenLinesWidthPercentage;\n    // How much % of the lane's space is empty\n    float laneEmptySpace = 1. - uBrokenLinesLengthPercentage;\n\n    // Horizontal * vertical offset\n    float brokenLines = step(1.-brokenLineWidth * uLanes,fract(uv.x * uLanes)) * step(laneEmptySpace, fract(uv.y * 100.)) ;\n    // Remove right-hand lines on the right-most lane\n    brokenLines *= step(uv.x * uLanes,uLanes-1.);\n    color = mix(color, uBrokenLinesColor, brokenLines);\n\n\n    float shoulderLinesWidth = 1. / uLanes * uShoulderLinesWidthPercentage;\n    float shoulderLines = step(1.-shoulderLinesWidth, uv.x) + step(uv.x, shoulderLinesWidth);\n    color = mix(color, uBrokenLinesColor, shoulderLines);\n\n    vec2 noiseFreq = vec2(4., 7000.);\n    float roadNoise = random( floor(uv * noiseFreq)/noiseFreq ) * 0.02 - 0.01; \n    color += roadNoise;\n").replace("#include <roadMarkings_vars>","\n    uniform float uLanes;\n    uniform vec3 uBrokenLinesColor;\n    uniform vec3 uShoulderLinesColor;\n    uniform float uShoulderLinesWidthPercentage;\n    uniform float uBrokenLinesWidthPercentage;\n    uniform float uBrokenLinesLengthPercentage;\n    highp float random(vec2 co)\n    {\n        highp float a = 12.9898;\n        highp float b = 78.233;\n        highp float c = 43758.5453;\n        highp float dt= dot(co.xy ,vec2(a,b));\n        highp float sn= mod(dt,3.14);\n        return fract(sin(sn) * c);\n    }\n"),W1e=`\n#define USE_FOG;\nuniform float uTime;\n${$e.fog_pars_vertex}\n\nuniform float uTravelLength;\n\nvarying vec2 vUv; \n  #include <getDistortion_vertex>\nvoid main() {\n  vec3 transformed = position.xyz;\n\n    vec3 distortion  = getDistortion((transformed.y + uTravelLength / 2.) / uTravelLength);\n    transformed.x += distortion.x;\n    transformed.z += distortion.y;\n  transformed.y += -1.*distortion.z;  \n  \n  vec4 mvPosition = modelViewMatrix * vec4(transformed,1.);\n  gl_Position = projectionMatrix * mvPosition;\n  vUv = uv;\n\n  ${$e.fog_vertex}\n}`;class j1e{constructor(e,t){this.webgl=e,this.options=t;let i=new $l(t.colors.background,.2*t.length,500*t.length);this.webgl.scene.fog=i,this.uTime=new Gt(0),this.fogUniforms={fogColor:{type:"c",value:i.color},fogNear:{type:"f",value:i.near},fogFar:{type:"f",value:i.far}},this.init()}createIsland(){}createPlane(e,t,i){const r=this.options;console.log("a~~~~~~~~~~~~!!~~~");const o=new g2(i?r.roadWidth:r.islandWidth,r.length,20,100);console.log("b~~~~~~~~~~~~!!~~~");let a={uTravelLength:new Gt(r.length),uColor:new Gt(new ae(i?r.colors.roadColor:r.colors.islandColor)),uTime:this.uTime};i&&(a=Object.assign(a,{uLanes:new Gt(r.lanesPerRoad),uBrokenLinesColor:new Gt(new ae(r.colors.brokenLines)),uShoulderLinesColor:new Gt(new ae(r.colors.shoulderLines)),uShoulderLinesWidthPercentage:new Gt(r.shoulderLinesWidthPercentage),uBrokenLinesLengthPercentage:new Gt(r.brokenLinesLengthPercentage),uBrokenLinesWidthPercentage:new Gt(r.brokenLinesWidthPercentage)})),console.log("c~~~~~~~~~~~~!!~~~");const c=new Wi({fragmentShader:i?G1e:U1e,vertexShader:W1e,side:2,uniforms:Object.assign(a,this.fogUniforms,r.distortion.uniforms)});console.log("d~~~~~~~~~~~~!!~~~"),c.onBeforeCompile=d=>{d.vertexShader=d.vertexShader.replace("#include <getDistortion_vertex>",r.distortion.getDistortion)},new Ca(100,100,100),new pi({color:16711680});const f=new an(o,c);f.rotation.x=-Math.PI/2;const h=this.options.position||[0,0,0];return f.position.x+=h[0]+(this.options.islandWidth/2+r.roadWidth/2)*e,f.position.y=h[1],f.position.z=h[2]-r.length/2,this.webgl.scene.add(f),console.log(f,"~~~~~~~~~~~~!!~~~~",f.position),f}init(){this.leftRoadWay=this.createPlane(-1,this.options.roadWidth,!0),this.rightRoadWay=this.createPlane(1,this.options.roadWidth,!0),this.island=this.createPlane(0,this.options.islandWidth,!1)}update(e){this.uTime.value+=.01}}const Np={uFreq:new Gt(new C(3,6,10)),uAmp:new Gt(new C(30,30,20))};new Gt(new q(5,2)),new Gt(new q(25,15)),new Gt(new q(2,3)),new Gt(new q(35,10)),new Gt(new ft(4,8,8,1)),new Gt(new ft(25,5,10,10)),new Gt(new q(4,8)),new Gt(new q(10,20)),new Gt(new q(20,2));let q2=n=>.5*Math.sin(n)+.5;const $1e={uniforms:Np,getDistortion:"\n      \n          uniform vec3 uAmp;\n          uniform vec3 uFreq;\n      \n          #define PI 3.14159265358979\n          \n              float nsin(float val){\n              return sin(val) * 0.5+0.5;\n              }\n          \n          vec3 getDistortion(float progress){\n      \n                  float movementProgressFix = 0.02;\n                  return vec3( \n                      cos(progress * PI * uFreq.x + uTime) * uAmp.x - cos(movementProgressFix * PI * uFreq.x + uTime) * uAmp.x,\n                      nsin(progress * PI * uFreq.y + uTime) * uAmp.y - nsin(movementProgressFix * PI * uFreq.y + uTime) * uAmp.y,\n                      nsin(progress * PI * uFreq.z + uTime) * uAmp.z - nsin(movementProgressFix * PI * uFreq.z + uTime) * uAmp.z\n                  );\n              }\n      ",getJS:(n,e)=>{let t=.02,i=Np.uFreq.value,r=Np.uAmp.value,s=new C(Math.cos(n*Math.PI*i.x+e)*r.x-Math.cos(t*Math.PI*i.x+e)*r.x,q2(n*Math.PI*i.y+e)*r.y-q2(t*Math.PI*i.y+e)*r.y,q2(n*Math.PI*i.z+e)*r.z-q2(t*Math.PI*i.z+e)*r.z),o=new C(2,2,2),a=new C(0,0,-5);return s.multiply(o).add(a)}};class pA{constructor(e,t,i,r,s,o){this.webgl=e,this.options=t,this.colors=i,this.speed=r,this.fade=s,this.roadLight=o,this.init()}init(){const e=this.options;let t=new ME(new C(0,0,0),new C(0,0,-1)),i=new ef(t,40,1,8,!1),r=(new BE).copy(i);r.instanceCount=2*e.lightPairsPerRoadWay;let s=e.roadWidth/e.lanesPerRoad,o=[],a=[],c=[],l=this.colors;l=Array.isArray(l)?l.map(p=>new ae(p)):new ae(l);for(let p=0;p<e.lightPairsPerRoadWay;p++){let m=Va(e.carLightsRadius),g=Va(e.carLightsLength),v=Va(this.speed[0]),y=p%3*s-e.roadWidth/2+s/2,_=Va(e.carWidthPercentage)*s;y+=Va(e.carShiftX)*s;let w=Va(e.carFloorSeparation)+1.3*m,D=-Va(e.length);o.push(y-_/2),o.push(w),o.push(D),o.push(y+_/2),o.push(w),o.push(D),a.push(m),a.push(g),a.push(v),a.push(m),a.push(g),a.push(v);let b=X1e(l);c.push(b.r),c.push(b.g),c.push(b.b),c.push(b.r),c.push(b.g),c.push(b.b)}r.setAttribute("aOffset",new Mo(new Float32Array(o),3,!1)),r.setAttribute("aMetrics",new Mo(new Float32Array(a),3,!1)),r.setAttribute("aColor",new Mo(new Float32Array(c),3,!1));let u=new Wi({fragmentShader:q1e,vertexShader:Z1e,transparent:!0,uniforms:Object.assign({uTime:new Gt(0),uTravelLength:new Gt(e.length),uFade:new Gt(this.fade)},this.roadLight.fogUniforms,e.distortion.uniforms)});u.onBeforeCompile=p=>{p.vertexShader=p.vertexShader.replace("#include <getDistortion_vertex>",e.distortion.getDistortion)},new pi;let h=new an(r,u);h.frustumCulled=!1,this.webgl.scene.add(h),this.mesh=h;const d=this.options.position||[0,0,0];this.mesh.position.set(d[0],d[1],d[2])}update(e){const t=this.mesh?.material.uniforms;t&&(t.uTime.value+=.01)}}const q1e=`\n  \n    #define USE_FOG;\n    ${$e.fog_pars_fragment}\n    varying vec3 vColor;\n    varying vec2 vUv; \n    uniform vec2 uFade;\n    void main() {\n    vec3 color = vec3(vColor);\n    float fadeStart = 0.4;\n    float maxFade = 0.;\n    float alpha = 1.;\n    \n    alpha = smoothstep(uFade.x, uFade.y, vUv.x);\n    gl_FragColor = vec4(color,alpha);\n    if (gl_FragColor.a < 0.0001) discard;\n    ${$e.fog_fragment}\n    }\n  `,Z1e=`\n    #define USE_FOG;\n    ${$e.fog_pars_vertex}\n    attribute vec3 aOffset;\n    attribute vec3 aMetrics;\n    attribute vec3 aColor;\n  \n    \n  \n    uniform float uTravelLength;\n    uniform float uTime;\n    uniform float uSpeed;\n  \n    varying vec2 vUv; \n    varying vec3 vColor; \n    #include <getDistortion_vertex>\n  \n    void main() {\n      vec3 transformed = position.xyz;\n      float radius = aMetrics.r;\n      float myLength = aMetrics.g;\n      float speed = aMetrics.b;\n  \n      transformed.xy *= radius ;\n      transformed.z *= myLength;\n    \n      // Add my length to make sure it loops after the lights hits the end\n      transformed.z += myLength-mod( uTime *speed + aOffset.z, uTravelLength);\n      transformed.xy += aOffset.xy;\n  \n  \n      float progress = abs(transformed.z / uTravelLength);\n      transformed.xyz += getDistortion(progress);\n  \n      vec4 mvPosition = modelViewMatrix * vec4(transformed,1.);\n      gl_Position = projectionMatrix * mvPosition;\n      vUv = uv;\n      vColor = aColor;\n      ${$e.fog_vertex}\n    }`,Va=n=>Array.isArray(n)?Math.random()*(n[1]-n[0])+n[0]:Math.random()*n,X1e=n=>Array.isArray(n)?n[Math.floor(Math.random()*n.length)]:n;class Y1e{constructor(e){this.position=new C(0,-10,40),this.home=e;const t={onSpeedUp:r=>{},onSlowDown:r=>{},distortion:$1e,length:400,roadWidth:9,islandWidth:2,lanesPerRoad:3,fov:90,fovSpeedUp:150,speedUp:2,carLightsFade:.4,totalSideLightSticks:50,lightPairsPerRoadWay:50,shoulderLinesWidthPercentage:.05,brokenLinesWidthPercentage:.1,brokenLinesLengthPercentage:.5,lightStickWidth:[.12,.5],lightStickHeight:[1.3,1.7],movingAwaySpeed:[60,80],movingCloserSpeed:[-120,-160],carLightsLength:[20,60],carLightsRadius:[.05,.14],carWidthPercentage:[.3,.5],carShiftX:[-2.4,2.4],carFloorSeparation:[.05,1],colors:{roadColor:526344,islandColor:657930,background:0,shoulderLines:1250072,brokenLines:1250072,leftCars:[16715818,15415358,16715818],rightCars:[14342906,12499683,9410532],sticks:14342906},position:[0,-20,220]};let i=new $l(t.colors.background,.2*t.length,500*t.length);this.home.scene.fog=i,this.fogUniforms={fogColor:{type:"c",value:i.color},fogNear:{type:"f",value:i.near},fogFar:{type:"f",value:i.far}},this.road=new j1e(this.home,t),this.leftCarLights=new pA(this.home,t,t.colors.leftCars,t.movingAwaySpeed,new q(0,1-t.carLightsFade),this),this.rightCarLights=new pA(this.home,t,t.colors.rightCars,t.movingCloserSpeed,new q(1,0+t.carLightsFade),this)}render(e){this.road?.update(e),this.leftCarLights?.update(e),this.rightCarLights?.update(e)}setVisible(e){this.road.leftRoadWay.visible=e,this.road.rightRoadWay.visible=e,this.road.island.visible=e,this.leftCarLights.mesh.visible=e,this.rightCarLights.mesh.visible=e}}const kp=n=>Math.random()*n*2-n,Vp=n=>Math.random()*n;class K1e{constructor(e){this.movementSpeed=10,this.totalObjects=1e3,this.objectSize=10,this.sizeRandomness=4e3,this.colors=[16715775,13434624,16711695,10053120,16777215],this.dirs=[],this.parts=[],this.status=!1,this.geometry=new Ze,this.uniforms={color:{value:new C(0,1,0)},u_time:{value:0}},this.update=()=>{if(this.status=!0,1==this.status){for(let t=0;t<this.totalObjects;t++)this.positions[t]+=this.velocity[t],t%3==1&&(this.velocity[t]-=.1);this.geometry.attributes.position.needsUpdate=!0}window.setKey?.sx>0&&(window.setKey.sx=0,this.reset())},this.scene=e,this.createExplodeAnimation(0,0)}createExplodeAnimation(e,t){this.positions=new Float32Array(3*this.totalObjects),this.velocity=new Float32Array(3*this.totalObjects);for(let r=0;r<this.totalObjects;r++)this.positions.set([e,t,0],3*r),this.velocity.set([Math.random()*this.movementSpeed-this.movementSpeed/2,Math.random()*this.movementSpeed-this.movementSpeed/2,Math.random()*this.movementSpeed-this.movementSpeed/2],3*r);this.geometry.setAttribute("position",new Vt(this.positions,3)),this.geometry.setAttribute("velocity",new Vt(this.velocity,3));const i=new Wi({uniforms:this.uniforms,vertexShader:_D_vertex,fragmentShader:_D_fragment,transparent:!0});this.object=new U0(this.geometry,i),this.scene.add(this.object),this.status=!1}reset(e){for(let t=0;t<this.totalObjects;t++)this.positions[t]=0,this.velocity[t]=Math.random()*this.movementSpeed-this.movementSpeed/2;this.geometry.attributes.position.needsUpdate=!0,e?(this.object.position.copy(e),this.uniforms.color.value=new C(1,0,0)):(this.uniforms.color.value=new C(Vp(1),Vp(1),Vp(1)),this.object.position.set(kp(100),50+kp(50),kp(100)),console.log(this.object.position))}}const J1e=["canvas"];class M3{constructor(e){this.clock=new ZE,this.morphs=[],this.counter=0,e.select("state").subscribe(t=>{this.object=t}),this.onWindowResize=this.onWindowResize.bind(this),this.callbackEventListeners=this.callbackEventListeners.bind(this),window.addEventListener("resize",this.onWindowResize)}addMorph(e,t,i,r,s,o,a,c){(e=e.clone()).material=e.material.clone(),c&&e.material.color.offsetHSL(0,.5*Math.random()-.25,.5*Math.random()-.25),this.mixer.clipAction(t,e).setDuration(r).startAt(-r*Math.random()).play(),e.position.set(s,o,a),e.rotation.y=Math.PI/2,e.castShadow=!0,e.receiveShadow=!0,this.scene.add(e),this.morphs.push({mesh:e,speed:i})}canvas(){return this.canvasRef.nativeElement}animate(){const e=this;requestAnimationFrame(()=>{e.animate()});const t=this.clock.getDelta();this.renderer.render(this.scene,this.camera),this.mixer.update(10*t),this.morphs.forEach((i,r)=>{if(r<0){i.mesh.position.set(100*Math.sin(i.speed),350,100*Math.cos(i.speed)),i.speed+=.5;const o=i.speed*(Math.PI/180);i.mesh.position.set(395*Math.sin(o),0,150*Math.cos(o)-250),i.mesh.rotation.set(0,.5*Math.PI+o,0),i.mesh.scale.set(.5,.5,.5)}this.bow.getArrowPosition().distanceTo(i.mesh.position)<40&&(this.explodeAnimation.reset(i.mesh.position),i.mesh.position.x=600*Math.random()-300,i.mesh.position.y=300*Math.random(),i.mesh.position.z=30*Math.random()-400),i.mesh.position.x>600&&(i.mesh.position.x=-600,i.mesh.position.y=300*Math.random())}),this.explodeAnimation?.update(),this.object.page===oo.HEADLIGHTS?(this.roadLight?.render(t),this.wave.particles.visible=!1,this.galaxy.mesh.visible=!1,this.bow.setVisible(!1),this.morphs.forEach(i=>{i.mesh.visible=!1}),this.roadLight?.setVisible(!0),this.counter%100==0&&(this.explodeAnimation.reset(),console.log("!!!!!!!!!!!"))):(this.wave?.render(),this.galaxy?.render(),this.bow?.render(t,this.eventList),this.controls?.update(),this.wave.particles.visible=!0,this.galaxy.mesh.visible=!0,this.bow.setVisible(!0),this.morphs.forEach(i=>{i.mesh.visible=!0}),this.roadLight?.setVisible(!1)),this.counter++}createScene(){this.scene=new JS,this.camera=new Pn(75,window.innerWidth/window.innerHeight,.1,1e3);const e=new Q7(16777215,3);this.scene.add(e);const t=new af(4210752);this.scene.add(t),this.camera.position.set(0,0,220),this.renderer=new KS({canvas:this.canvas()}),this.renderer.setSize(window.innerWidth,window.innerHeight),this.scene.fog=new R0(0,.0015);const i=new pae;this.mixer=new JE(this.scene);const r=this;i.load($ae,function(s){const o=s.scene.children[0],a=s.animations[0];for(let c=0;c<2;c++)r.addMorph(o.clone(),a,130+130*Math.random(),8,600*Math.random()-300,300*Math.random(),30*Math.random()-400,!0);r.addMorph(o,a,400,10,-150,150,-400,!0)}),this.wave=new Wae(this.scene),this.galaxy=new jae(this.scene),this.explodeAnimation=new K1e(this.scene),this.bow=new O1e(this.scene),this.roadLight=new Y1e(this),this.eventList=new V1e(this.callbackEventListeners,this.renderer.domElement)}callbackEventListeners(e){}ngOnDestroy(){window.removeEventListener("resize",this.onWindowResize),this.eventList?.removeEventListeners()}ngAfterViewInit(){this.createScene(),this.animate()}ngOnInit(){console.log("~~~~~~~ngOnInit~~~~~~~")}onWindowResize(){const e=window.innerWidth,t=window.innerHeight;this.camera.aspect=e/t,this.camera.updateProjectionMatrix(),this.renderer.setSize(e,t)}}M3.\u0275fac=function(e){return new(e||M3)(Se(so))},M3.\u0275cmp=xi({type:M3,selectors:[["app-home3-d"]],viewQuery:function(e,t){if(1&e&&r_(J1e,5),2&e){let i;Kh(i=function Jh(){return function hF(n,e){return n[19].queries[e].queryList}(ee(),G9())}())&&(t.canvasRef=i.first)}},decls:2,vars:0,consts:[["id","home-canvas"],["canvas",""]],template:function(e,t){1&e&&nn(0,"canvas",0,1)},styles:["#home-canvas[_ngcontent-%COMP%]{position:fixed;inset:0;width:100%;height:100%;z-index:-1}"]});const Z2=function(n){return{gradientText:n}};class w3{constructor(e){this.store=e,this.baseURL=$t,this.logoURL=Xae,this.pageView=oo,this.state$=e.pipe(N6("state"))}increment(){this.store.dispatch(q6())}decrement(){this.store.dispatch(Z6())}reset(){this.store.dispatch(X6())}actionSetPage(e){this.store.dispatch(Y6({payload:e}))}}w3.\u0275fac=function(e){return new(e||w3)(Se(so))},w3.\u0275cmp=xi({type:w3,selectors:[["app-header"]],decls:39,vars:35,consts:[[1,"header_inner","container"],[1,"logo"],["target","_blank",3,"href"],["alt","",1,"max-w-[80px]",3,"src"],[1,"menu"],[1,"transition_link"],[1,"inline-block",3,"ngClass"],[3,"click"],[2,"display","flex","justify-content","center"],[2,"margin","0 20px"]],template:function(e,t){if(1&e&&(Le(0,"div",0)(1,"div",1)(2,"a",2),nn(3,"img",3),Qe(),_t(4,"hututusoftwares "),Qe(),Le(5,"div",4)(6,"ul",5)(7,"li",6),li(8,"async"),Le(9,"span",7),Jn("click",function(){return t.actionSetPage(t.pageView.HOME)}),_t(10,"Home"),Qe()(),Le(11,"li",6),li(12,"async"),Le(13,"span",7),Jn("click",function(){return t.actionSetPage(t.pageView.ABOUT)}),_t(14,"About"),Qe()(),Le(15,"li",6),li(16,"async"),Le(17,"span",7),Jn("click",function(){return t.actionSetPage(t.pageView.PORTFOLIO)}),_t(18,"Portfolio"),Qe()(),Le(19,"li",6),li(20,"async"),Le(21,"span",7),Jn("click",function(){return t.actionSetPage(t.pageView.PLAY)}),_t(22,"Play"),Qe()(),Le(23,"li",6),li(24,"async"),Le(25,"span",7),Jn("click",function(){return t.actionSetPage(t.pageView.HEADLIGHTS)}),_t(26,"Headlights"),Qe()(),Le(27,"li",6),li(28,"async"),Le(29,"span",7),Jn("click",function(){return t.actionSetPage(t.pageView.CONTACT)}),_t(30,"Contact"),Qe()()()()(),Le(31,"div",8)(32,"span",7),Jn("click",function(){return t.decrement()}),_t(33,"-"),Qe(),Le(34,"span",9),_t(35),li(36,"async"),Qe(),Le(37,"span",7),Jn("click",function(){return t.increment()}),_t(38,"+"),Qe()()),2&e){let i,r,s,o,a,c,l;Lt(2),Xs("href",t.baseURL,Zs),Lt(1),Xs("src",t.logoURL,Zs),Lt(4),Kt("ngClass",Ks(23,Z2,(null==(i=ui(8,9,t.state$))?null:i.page)===t.pageView.HOME)),Lt(4),Kt("ngClass",Ks(25,Z2,(null==(r=ui(12,11,t.state$))?null:r.page)===t.pageView.ABOUT)),Lt(4),Kt("ngClass",Ks(27,Z2,(null==(s=ui(16,13,t.state$))?null:s.page)===t.pageView.PORTFOLIO)),Lt(4),Kt("ngClass",Ks(29,Z2,(null==(o=ui(20,15,t.state$))?null:o.page)===t.pageView.PLAY)),Lt(4),Kt("ngClass",Ks(31,Z2,(null==(a=ui(24,17,t.state$))?null:a.page)===t.pageView.HEADLIGHTS)),Lt(4),Kt("ngClass",Ks(33,Z2,(null==(c=ui(28,19,t.state$))?null:c.page)===t.pageView.CONTACT)),Lt(8),Ph(null==(l=ui(36,21,t.state$))?null:l.count)}},dependencies:[Ld,Nd],styles:[".list-none[_ngcontent-%COMP%]{list-style-type:none}.menu[_ngcontent-%COMP%]{margin-left:auto}.menu[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{list-style:none;margin:0;padding:0}.menu[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{text-decoration:none;color:#fff;font-weight:300;cursor:pointer}.menu[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   .gradientText[_ngcontent-%COMP%]{font-weight:600}.inline-block[_ngcontent-%COMP%]{display:inline-block;padding-left:10px}.header_inner[_ngcontent-%COMP%]{top:30px;position:absolute;max-width:800px;transform:translate(-50%);left:50%;display:flex;align-items:center;z-index:100}@media (max-width: 580px){.menu[_ngcontent-%COMP%]{display:none}}"]});class C3{constructor(){this.faSkype=j6}}C3.\u0275fac=function(e){return new(e||C3)},C3.\u0275cmp=xi({type:C3,selectors:[["app-contact"]],decls:50,vars:1,consts:[["id","contact",1,"main-content"],[1,"section_inner"],[1,"edrea_tm_contact"],[1,"edrea_tm_main_title"],[1,"wrapper"],[1,"left"],[1,"list_inner"],[1,""],["href","#"],[3,"icon"],[1,"right"],[1,"fields","w-full","h-auto","clear-both","float-left"],["action","/","method","post","id","contact_form",1,"contact_form"],["data-success","Your message has been received, We will contact you soon.",1,"returnmessage"],[1,"first"],[1,"list-none","nm-container"],["id","name","type","text","placeholder","Name","autocomplete","off",1,"bg-transparent","border-none"],["id","name","type","email","placeholder","Email","autocomplete","off",1,"bg-transparent","border-none"],[1,"last","list_inner"],["id","message","placeholder","Message",1,"bg-transparent","border-none"],[1,"edrea_tm_button"],["id","send_message","href","#"]],template:function(e,t){1&e&&(Le(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"h3"),_t(5,"Get in Touch"),Qe()(),Le(6,"div",4)(7,"div",5)(8,"ul")(9,"li")(10,"div",6),_t(11," \u{1f3e0} "),Le(12,"span",7)(13,"a",8),_t(14,"11 Bajrang Nagar Indore India"),Qe()()()(),Le(15,"li")(16,"div",6),_t(17," \u260e "),Le(18,"span",7)(19,"a",8),_t(20,"+91-942-595-9123"),Qe()()()(),Le(21,"li")(22,"div",6),_t(23," \u{1f4e7} "),Le(24,"span",7)(25,"a",8),_t(26,"yogeshbangar@gmail.com"),Qe()()()(),Le(27,"li")(28,"div",6),nn(29,"fa-icon",9),Le(30,"span",7)(31,"a",8),_t(32," yogeshbangar"),Qe()()()()()(),Le(33,"div",10)(34,"div",11)(35,"form",12),nn(36,"div",13),Le(37,"div",14)(38,"ul",15)(39,"li")(40,"div",6),nn(41,"input",16),Qe()(),Le(42,"li",7)(43,"div",6),nn(44,"input",17),Qe()()()(),Le(45,"div",18),nn(46,"textarea",19),Qe(),Le(47,"div",20)(48,"a",21),_t(49,"Send Message"),Qe()()()()()()()()()),2&e&&(Lt(29),Kt("icon",t.faSkype))},dependencies:[MC],styles:[".main-content[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:center;align-items:center;height:99vh;max-width:900px;position:absolute;left:50%;transform:translate(-50%)}.main-content[_ngcontent-%COMP%]   .section_inner[_ngcontent-%COMP%]{width:100%}.main-content[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{list-style:none;margin:0;padding:0}.main-content[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{width:100%;margin-bottom:20px}.main-content[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   .list_inner[_ngcontent-%COMP%]{padding:10px;background-color:#222;border-radius:10px}.main-content[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{text-decoration:none;color:#fff;font-weight:300}.main-content[_ngcontent-%COMP%]   .wrapper[_ngcontent-%COMP%]{display:flex;flex-direction:row;padding-top:50px}.main-content[_ngcontent-%COMP%]   .edrea_tm_main_title[_ngcontent-%COMP%]{border:0;border-bottom-width:1px;border-style:dashed;border-color:#ffffff26;padding-bottom:20px}.main-content[_ngcontent-%COMP%]   .left[_ngcontent-%COMP%]{padding-right:50px;width:50%}.main-content[_ngcontent-%COMP%]   .right[_ngcontent-%COMP%]{padding-left:50px;width:50%;margin-top:20px}.main-content[_ngcontent-%COMP%]   .right[_ngcontent-%COMP%]   .nm-container[_ngcontent-%COMP%]{display:flex}.main-content[_ngcontent-%COMP%]   .right[_ngcontent-%COMP%]   .nm-container[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{width:50%;margin-right:10px}.main-content[_ngcontent-%COMP%]   .right[_ngcontent-%COMP%]   .nm-container[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:100%;border:none;color:#fff}.main-content[_ngcontent-%COMP%]   .right[_ngcontent-%COMP%]   .last[_ngcontent-%COMP%]{background:rgb(34,34,34);padding:10px;border-radius:10px;display:flex;justify-content:center;margin-right:10px}.main-content[_ngcontent-%COMP%]   .right[_ngcontent-%COMP%]   .last[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]{width:100%;color:#fff;border:none}.main-content[_ngcontent-%COMP%]   .edrea_tm_button[_ngcontent-%COMP%]{display:inline-block;border-radius:50px;background-color:#eb4a4c;padding:10px 40px;text-align:center;font-family:Poppins,sans-serif;color:#eb4a4c;margin-top:20px}.main-content[_ngcontent-%COMP%]   .edrea_tm_button[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{text-decoration:none;color:#fff}@media (max-width: 580px){.main-content[_ngcontent-%COMP%]{left:0;transform:translate(0);margin:20px}.main-content[_ngcontent-%COMP%]   .wrapper[_ngcontent-%COMP%]{flex-direction:column}.main-content[_ngcontent-%COMP%]   .left[_ngcontent-%COMP%]{padding-right:0;width:100%}.main-content[_ngcontent-%COMP%]   .right[_ngcontent-%COMP%]{padding-left:0;width:100%}}"]});class S3{constructor(){this.androidURL=Yae,this.threeURL=Kae,this.nodeURL=Jae,this.gamesURL=Qae}}S3.\u0275fac=function(e){return new(e||S3)},S3.\u0275cmp=xi({type:S3,selectors:[["app-portfolio"]],decls:5,vars:4,consts:[[1,"main-content","portfolio"],[1,"item",3,"src"]],template:function(e,t){1&e&&(Le(0,"div",0),nn(1,"img",1)(2,"img",1)(3,"img",1)(4,"img",1),Qe()),2&e&&(Lt(1),Xs("src",t.threeURL,Zs),Lt(1),Xs("src",t.nodeURL,Zs),Lt(1),Xs("src",t.androidURL,Zs),Lt(1),Xs("src",t.gamesURL,Zs))},styles:[".portfolio[_ngcontent-%COMP%]{display:flex;flex-direction:row;flex-wrap:wrap;justify-content:center;align-content:center}.item[_ngcontent-%COMP%]{width:45%;margin:10px;height:auto;border-radius:10px}@media (max-width: 580px){.main-content[_ngcontent-%COMP%]{transform:translate(0);top:15%;left:unset;max-height:600px}.main-content[_ngcontent-%COMP%]   .item[_ngcontent-%COMP%]{width:45%;margin:1px;height:auto}}@media (orientation: landscape) and (max-height: 576px){.main-content[_ngcontent-%COMP%]{transform:translate(0);top:50px;left:unset;max-width:unset;flex-wrap:unset}.main-content[_ngcontent-%COMP%]   .item[_ngcontent-%COMP%]{width:25%;margin:1px;height:auto}}"]});class E3{}E3.\u0275fac=function(e){return new(e||E3)},E3.\u0275cmp=xi({type:E3,selectors:[["app-play"]],decls:2,vars:0,consts:[[1,"play"]],template:function(e,t){1&e&&(Le(0,"p",0),_t(1,"Drag and click!"),Qe())},styles:[".play[_ngcontent-%COMP%]{position:fixed;bottom:50px;left:50%;background:red;padding:10px;transform:translate(-50%)}"]});class D3{}function Q1e(n,e){if(1&n){const t=Iu();Le(0,"app-home",2),Jn("onChildUpdate",function(r){return X3(t),Y3(Ic().onUpdate(r))}),li(1,"async"),Qe()}if(2&n){let i;Kt("page",null==(i=ui(1,1,Ic().state$))?null:i.page)}}function e2e(n,e){1&n&&nn(0,"app-contact")}function t2e(n,e){1&n&&nn(0,"app-portfolio")}function n2e(n,e){1&n&&nn(0,"app-play")}function i2e(n,e){1&n&&nn(0,"app-headlights")}D3.\u0275fac=function(e){return new(e||D3)},D3.\u0275cmp=xi({type:D3,selectors:[["app-headlights"]],decls:9,vars:0,consts:[[1,"content__title-wrap","main-content"],[1,"content__pretitle"],[1,"content__title"],["target","_blank","href","https://hututu.vercel.app/animation",1,"content__link"],["target","_blank","href","https://hututusoftwares.com/",1,"content__link"]],template:function(e,t){1&e&&(Le(0,"div",0)(1,"span",1),_t(2,"Hututu Software pvt. ltd."),Qe(),Le(3,"h2",2),_t(4,"HEADLIGHTS"),Qe(),Le(5,"a",3),_t(6,"React Demo"),Qe(),Le(7,"a",4),_t(8,"Learn more"),Qe()())},styles:[".content__pretitle[_ngcontent-%COMP%]{color:#53c2c6;font-size:1.35rem}.content__title[_ngcontent-%COMP%]{font-size:4vw;font-weight:400;margin:.5rem 0 1.5rem;font-family:Chango,cursive}.content__title-wrap[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{pointer-events:auto}.content__link[_ngcontent-%COMP%]{text-decoration:underline;font-family:Chango,cursive;font-size:1.1rem;color:inherit}"]});class A3{constructor(e){this.pageView=oo,this.title="myAngular",this.state$=e.pipe(N6("state"))}onUpdate(e){console.log("onUpdate ~Parent~",e)}}A3.\u0275fac=function(e){return new(e||A3)(Se(so))},A3.\u0275cmp=xi({type:A3,selectors:[["app-root"]],decls:14,vars:17,consts:[[3,"page","onChildUpdate",4,"ngIf"],[4,"ngIf"],[3,"page","onChildUpdate"]],template:function(e,t){if(1&e&&(nn(0,"app-home3-d")(1,"app-header")(2,"app-menu"),ms(3,Q1e,2,3,"app-home",0),li(4,"async"),li(5,"async"),ms(6,e2e,1,0,"app-contact",1),li(7,"async"),ms(8,t2e,1,0,"app-portfolio",1),li(9,"async"),ms(10,n2e,1,0,"app-play",1),li(11,"async"),ms(12,i2e,1,0,"app-headlights",1),li(13,"async")),2&e){let i,r,s,o,a;Lt(3),Kt("ngIf",(null==(i=ui(4,5,t.state$))?null:i.page)===t.pageView.HOME||(null==(i=ui(5,7,t.state$))?null:i.page)===t.pageView.ABOUT),Lt(3),Kt("ngIf",(null==(r=ui(7,9,t.state$))?null:r.page)===t.pageView.CONTACT),Lt(2),Kt("ngIf",(null==(s=ui(9,11,t.state$))?null:s.page)===t.pageView.PORTFOLIO),Lt(2),Kt("ngIf",(null==(o=ui(11,13,t.state$))?null:o.page)===t.pageView.PLAY),Lt(2),Kt("ngIf",(null==(a=ui(13,15,t.state$))?null:a.page)===t.pageView.HEADLIGHTS)}},dependencies:[Rd,gl,Tl,M3,w3,C3,S3,E3,D3,Nd]});const mA={count:0,page:oo.HOME};!function OG(n,...e){const t=new Map;for(const i of e)for(const r of i.types){const s=t.get(r);t.set(r,s?(a,c)=>i.reducer(s(a,c),c):i.reducer)}}(mA,W6(q6,n=>({...n,count:n.count+1})),W6(Z6,n=>({...n,count:n.count-1})),W6(X6,n=>({...n,count:0})));class X2{}X2.\u0275fac=function(e){return new(e||X2)},X2.\u0275mod=gr({type:X2,bootstrap:[A3]}),X2.\u0275inj=Zi({imports:[BV,H1,aee,FG.forRoot({state:(n,e)=>{const t=n||mA;switch(e.type){case q6.type:return{...t,count:t.count+1};case Z6.type:return{...t,count:t.count-1};case X6.type:return{...t,count:0};case Y6.type:return console.log(e.payload),{...t,page:e.payload}}return t}},{})]}),UV().bootstrapModule(X2).catch(n=>console.error(n))}},If=>{If(If.s=356)}]);