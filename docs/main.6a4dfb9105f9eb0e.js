"use strict";(self.webpackChunkmyAngular=self.webpackChunkmyAngular||[]).push([[179],{616:()=>{function It(n){return"function"==typeof n}function Qa(n){const t=n(i=>{Error.call(i),i.stack=(new Error).stack});return t.prototype=Object.create(Error.prototype),t.prototype.constructor=t,t}const wl=Qa(n=>function(t){n(this),this.message=t?`${t.length} errors occurred during unsubscription:\n${t.map((i,r)=>`${r+1}) ${i.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=t});function lo(n,e){if(n){const t=n.indexOf(e);0<=t&&n.splice(t,1)}}class hi{constructor(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let e;if(!this.closed){this.closed=!0;const{_parentage:t}=this;if(t)if(this._parentage=null,Array.isArray(t))for(const s of t)s.remove(this);else t.remove(this);const{initialTeardown:i}=this;if(It(i))try{i()}catch(s){e=s instanceof wl?s.errors:[s]}const{_finalizers:r}=this;if(r){this._finalizers=null;for(const s of r)try{W8(s)}catch(o){e=e??[],o instanceof wl?e=[...e,...o.errors]:e.push(o)}}if(e)throw new wl(e)}}add(e){var t;if(e&&e!==this)if(this.closed)W8(e);else{if(e instanceof hi){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=null!==(t=this._finalizers)&&void 0!==t?t:[]).push(e)}}_hasParent(e){const{_parentage:t}=this;return t===e||Array.isArray(t)&&t.includes(e)}_addParent(e){const{_parentage:t}=this;this._parentage=Array.isArray(t)?(t.push(e),t):t?[t,e]:e}_removeParent(e){const{_parentage:t}=this;t===e?this._parentage=null:Array.isArray(t)&&lo(t,e)}remove(e){const{_finalizers:t}=this;t&&lo(t,e),e instanceof hi&&e._removeParent(this)}}hi.EMPTY=(()=>{const n=new hi;return n.closed=!0,n})();const B8=hi.EMPTY;function G8(n){return n instanceof hi||n&&"closed"in n&&It(n.remove)&&It(n.add)&&It(n.unsubscribe)}function W8(n){It(n)?n():n.unsubscribe()}const Ks={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1},Cl={setTimeout(n,e,...t){const{delegate:i}=Cl;return i?.setTimeout?i.setTimeout(n,e,...t):setTimeout(n,e,...t)},clearTimeout(n){const{delegate:e}=Cl;return(e?.clearTimeout||clearTimeout)(n)},delegate:void 0};function $8(n){Cl.setTimeout(()=>{const{onUnhandledError:e}=Ks;if(!e)throw n;e(n)})}function n0(){}const CS=r0("C",void 0,void 0);function r0(n,e,t){return{kind:n,value:e,error:t}}let Js=null;function Sl(n){if(Ks.useDeprecatedSynchronousErrorHandling){const e=!Js;if(e&&(Js={errorThrown:!1,error:null}),n(),e){const{errorThrown:t,error:i}=Js;if(Js=null,t)throw i}}else n()}class s0 extends hi{constructor(e){super(),this.isStopped=!1,e?(this.destination=e,G8(e)&&e.add(this)):this.destination=LS}static create(e,t,i){return new e2(e,t,i)}next(e){this.isStopped?a0(function ES(n){return r0("N",n,void 0)}(e),this):this._next(e)}error(e){this.isStopped?a0(function SS(n){return r0("E",void 0,n)}(e),this):(this.isStopped=!0,this._error(e))}complete(){this.isStopped?a0(CS,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(e){this.destination.next(e)}_error(e){try{this.destination.error(e)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const AS=Function.prototype.bind;function o0(n,e){return AS.call(n,e)}class TS{constructor(e){this.partialObserver=e}next(e){const{partialObserver:t}=this;if(t.next)try{t.next(e)}catch(i){El(i)}}error(e){const{partialObserver:t}=this;if(t.error)try{t.error(e)}catch(i){El(i)}else El(e)}complete(){const{partialObserver:e}=this;if(e.complete)try{e.complete()}catch(t){El(t)}}}class e2 extends s0{constructor(e,t,i){let r;if(super(),It(e)||!e)r={next:e??void 0,error:t??void 0,complete:i??void 0};else{let s;this&&Ks.useDeprecatedNextContext?(s=Object.create(e),s.unsubscribe=()=>this.unsubscribe(),r={next:e.next&&o0(e.next,s),error:e.error&&o0(e.error,s),complete:e.complete&&o0(e.complete,s)}):r=e}this.destination=new TS(r)}}function El(n){Ks.useDeprecatedSynchronousErrorHandling?function DS(n){Ks.useDeprecatedSynchronousErrorHandling&&Js&&(Js.errorThrown=!0,Js.error=n)}(n):$8(n)}function a0(n,e){const{onStoppedNotification:t}=Ks;t&&Cl.setTimeout(()=>t(n,e))}const LS={closed:!0,next:n0,error:function IS(n){throw n},complete:n0},c0="function"==typeof Symbol&&Symbol.observable||"@@observable";function Or(n){return n}function j8(n){return 0===n.length?Or:1===n.length?n[0]:function(t){return n.reduce((i,r)=>r(i),t)}}let qt=(()=>{class n{constructor(t){t&&(this._subscribe=t)}lift(t){const i=new n;return i.source=this,i.operator=t,i}subscribe(t,i,r){const s=function PS(n){return n&&n instanceof s0||function zS(n){return n&&It(n.next)&&It(n.error)&&It(n.complete)}(n)&&G8(n)}(t)?t:new e2(t,i,r);return Sl(()=>{const{operator:o,source:a}=this;s.add(o?o.call(s,a):a?this._subscribe(s):this._trySubscribe(s))}),s}_trySubscribe(t){try{return this._subscribe(t)}catch(i){t.error(i)}}forEach(t,i){return new(i=q8(i))((r,s)=>{const o=new e2({next:a=>{try{t(a)}catch(c){s(c),o.unsubscribe()}},error:s,complete:r});this.subscribe(o)})}_subscribe(t){var i;return null===(i=this.source)||void 0===i?void 0:i.subscribe(t)}[c0](){return this}pipe(...t){return j8(t)(this)}toPromise(t){return new(t=q8(t))((i,r)=>{let s;this.subscribe(o=>s=o,o=>r(o),()=>i(s))})}}return n.create=e=>new n(e),n})();function q8(n){var e;return null!==(e=n??Ks.Promise)&&void 0!==e?e:Promise}const NS=Qa(n=>function(){n(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});let mr=(()=>{class n extends qt{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(t){const i=new Z8(this,this);return i.operator=t,i}_throwIfClosed(){if(this.closed)throw new NS}next(t){Sl(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const i of this.currentObservers)i.next(t)}})}error(t){Sl(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=t;const{observers:i}=this;for(;i.length;)i.shift().error(t)}})}complete(){Sl(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:t}=this;for(;t.length;)t.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var t;return(null===(t=this.observers)||void 0===t?void 0:t.length)>0}_trySubscribe(t){return this._throwIfClosed(),super._trySubscribe(t)}_subscribe(t){return this._throwIfClosed(),this._checkFinalizedStatuses(t),this._innerSubscribe(t)}_innerSubscribe(t){const{hasError:i,isStopped:r,observers:s}=this;return i||r?B8:(this.currentObservers=null,s.push(t),new hi(()=>{this.currentObservers=null,lo(s,t)}))}_checkFinalizedStatuses(t){const{hasError:i,thrownError:r,isStopped:s}=this;i?t.error(r):s&&t.complete()}asObservable(){const t=new qt;return t.source=this,t}}return n.create=(e,t)=>new Z8(e,t),n})();class Z8 extends mr{constructor(e,t){super(),this.destination=e,this.source=t}next(e){var t,i;null===(i=null===(t=this.destination)||void 0===t?void 0:t.next)||void 0===i||i.call(t,e)}error(e){var t,i;null===(i=null===(t=this.destination)||void 0===t?void 0:t.error)||void 0===i||i.call(t,e)}complete(){var e,t;null===(t=null===(e=this.destination)||void 0===e?void 0:e.complete)||void 0===t||t.call(e)}_subscribe(e){var t,i;return null!==(i=null===(t=this.source)||void 0===t?void 0:t.subscribe(e))&&void 0!==i?i:B8}}function Y8(n){return It(n?.lift)}function an(n){return e=>{if(Y8(e))return e.lift(function(t){try{return n(t,this)}catch(i){this.error(i)}});throw new TypeError("Unable to lift unknown Observable type")}}function Qt(n,e,t,i,r){return new OS(n,e,t,i,r)}class OS extends s0{constructor(e,t,i,r,s,o){super(e),this.onFinalize=s,this.shouldUnsubscribe=o,this._next=t?function(a){try{t(a)}catch(c){e.error(c)}}:super._next,this._error=r?function(a){try{r(a)}catch(c){e.error(c)}finally{this.unsubscribe()}}:super._error,this._complete=i?function(){try{i()}catch(a){e.error(a)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var e;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:t}=this;super.unsubscribe(),!t&&(null===(e=this.onFinalize)||void 0===e||e.call(this))}}}function ct(n,e){return an((t,i)=>{let r=0;t.subscribe(Qt(i,s=>{i.next(n.call(e,s,r++))}))})}function Qs(n){return this instanceof Qs?(this.v=n,this):new Qs(n)}function VS(n,e,t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r,i=t.apply(n,e||[]),s=[];return r={},o("next"),o("throw"),o("return"),r[Symbol.asyncIterator]=function(){return this},r;function o(d){i[d]&&(r[d]=function(h){return new Promise(function(p,g){s.push([d,h,p,g])>1||a(d,h)})})}function a(d,h){try{!function c(d){d.value instanceof Qs?Promise.resolve(d.value.v).then(l,u):f(s[0][2],d)}(i[d](h))}catch(p){f(s[0][3],p)}}function l(d){a("next",d)}function u(d){a("throw",d)}function f(d,h){d(h),s.shift(),s.length&&a(s[0][0],s[0][1])}}function HS(n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t,e=n[Symbol.asyncIterator];return e?e.call(n):(n=function J8(n){var e="function"==typeof Symbol&&Symbol.iterator,t=e&&n[e],i=0;if(t)return t.call(n);if(n&&"number"==typeof n.length)return{next:function(){return n&&i>=n.length&&(n=void 0),{value:n&&n[i++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}(n),t={},i("next"),i("throw"),i("return"),t[Symbol.asyncIterator]=function(){return this},t);function i(s){t[s]=n[s]&&function(o){return new Promise(function(a,c){!function r(s,o,a,c){Promise.resolve(c).then(function(l){s({value:l,done:a})},o)}(a,c,(o=n[s](o)).done,o.value)})}}}const Q8=n=>n&&"number"==typeof n.length&&"function"!=typeof n;function e7(n){return It(n?.then)}function t7(n){return It(n[c0])}function n7(n){return Symbol.asyncIterator&&It(n?.[Symbol.asyncIterator])}function i7(n){return new TypeError(`You provided ${null!==n&&"object"==typeof n?"an invalid object":`'${n}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}const r7=function BS(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}();function s7(n){return It(n?.[r7])}function o7(n){return VS(this,arguments,function*(){const t=n.getReader();try{for(;;){const{value:i,done:r}=yield Qs(t.read());if(r)return yield Qs(void 0);yield yield Qs(i)}}finally{t.releaseLock()}})}function a7(n){return It(n?.getReader)}function Zi(n){if(n instanceof qt)return n;if(null!=n){if(t7(n))return function GS(n){return new qt(e=>{const t=n[c0]();if(It(t.subscribe))return t.subscribe(e);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(n);if(Q8(n))return function WS(n){return new qt(e=>{for(let t=0;t<n.length&&!e.closed;t++)e.next(n[t]);e.complete()})}(n);if(e7(n))return function $S(n){return new qt(e=>{n.then(t=>{e.closed||(e.next(t),e.complete())},t=>e.error(t)).then(null,$8)})}(n);if(n7(n))return c7(n);if(s7(n))return function jS(n){return new qt(e=>{for(const t of n)if(e.next(t),e.closed)return;e.complete()})}(n);if(a7(n))return function qS(n){return c7(o7(n))}(n)}throw i7(n)}function c7(n){return new qt(e=>{(function ZS(n,e){var t,i,r,s;return function FS(n,e,t,i){return new(t||(t=Promise))(function(s,o){function a(u){try{l(i.next(u))}catch(f){o(f)}}function c(u){try{l(i.throw(u))}catch(f){o(f)}}function l(u){u.done?s(u.value):function r(s){return s instanceof t?s:new t(function(o){o(s)})}(u.value).then(a,c)}l((i=i.apply(n,e||[])).next())})}(this,void 0,void 0,function*(){try{for(t=HS(n);!(i=yield t.next()).done;)if(e.next(i.value),e.closed)return}catch(o){r={error:o}}finally{try{i&&!i.done&&(s=t.return)&&(yield s.call(t))}finally{if(r)throw r.error}}e.complete()})})(n,e).catch(t=>e.error(t))})}function Fr(n,e,t,i=0,r=!1){const s=e.schedule(function(){t(),r?n.add(this.schedule(null,i)):this.unsubscribe()},i);if(n.add(s),!r)return s}function Rn(n,e,t=1/0){return It(e)?Rn((i,r)=>ct((s,o)=>e(i,s,r,o))(Zi(n(i,r))),t):("number"==typeof e&&(t=e),an((i,r)=>function YS(n,e,t,i,r,s,o,a){const c=[];let l=0,u=0,f=!1;const d=()=>{f&&!c.length&&!l&&e.complete()},h=g=>l<i?p(g):c.push(g),p=g=>{s&&e.next(g),l++;let m=!1;Zi(t(g,u++)).subscribe(Qt(e,v=>{r?.(v),s?h(v):e.next(v)},()=>{m=!0},void 0,()=>{if(m)try{for(l--;c.length&&l<i;){const v=c.shift();o?Fr(e,o,()=>p(v)):p(v)}d()}catch(v){e.error(v)}}))};return n.subscribe(Qt(e,h,()=>{f=!0,d()})),()=>{a?.()}}(i,r,n,t)))}function uo(n=1/0){return Rn(Or,n)}const kr=new qt(n=>n.complete());function u0(n){return n[n.length-1]}function l7(n){return It(u0(n))?n.pop():void 0}function t2(n){return function KS(n){return n&&It(n.schedule)}(u0(n))?n.pop():void 0}function f0(n,e=0){return an((t,i)=>{t.subscribe(Qt(i,r=>Fr(i,n,()=>i.next(r),e),()=>Fr(i,n,()=>i.complete(),e),r=>Fr(i,n,()=>i.error(r),e)))})}function u7(n,e=0){return an((t,i)=>{i.add(n.schedule(()=>t.subscribe(i),e))})}function f7(n,e){if(!n)throw new Error("Iterable cannot be null");return new qt(t=>{Fr(t,e,()=>{const i=n[Symbol.asyncIterator]();Fr(t,e,()=>{i.next().then(r=>{r.done?t.complete():t.next(r.value)})},0,!0)})})}function mn(n,e){return e?function rE(n,e){if(null!=n){if(t7(n))return function QS(n,e){return Zi(n).pipe(u7(e),f0(e))}(n,e);if(Q8(n))return function tE(n,e){return new qt(t=>{let i=0;return e.schedule(function(){i===n.length?t.complete():(t.next(n[i++]),t.closed||this.schedule())})})}(n,e);if(e7(n))return function eE(n,e){return Zi(n).pipe(u7(e),f0(e))}(n,e);if(n7(n))return f7(n,e);if(s7(n))return function nE(n,e){return new qt(t=>{let i;return Fr(t,e,()=>{i=n[r7](),Fr(t,e,()=>{let r,s;try{({value:r,done:s}=i.next())}catch(o){return void t.error(o)}s?t.complete():t.next(r)},0,!0)}),()=>It(i?.return)&&i.return()})}(n,e);if(a7(n))return function iE(n,e){return f7(o7(n),e)}(n,e)}throw i7(n)}(n,e):Zi(n)}function d0(n,e,...t){if(!0===e)return void n();if(!1===e)return;const i=new e2({next:()=>{i.unsubscribe(),n()}});return e(...t).subscribe(i)}function Dt(n){for(let e in n)if(n[e]===Dt)return e;throw Error("Could not find renamed property on target object.")}function At(n){if("string"==typeof n)return n;if(Array.isArray(n))return"["+n.map(At).join(", ")+"]";if(null==n)return""+n;if(n.overriddenName)return`${n.overriddenName}`;if(n.name)return`${n.name}`;const e=n.toString();if(null==e)return""+e;const t=e.indexOf("\n");return-1===t?e:e.substring(0,t)}function p0(n,e){return null==n||""===n?null===e?"":e:null==e||""===e?n:n+" "+e}const aE=Dt({__forward_ref__:Dt});function m0(n){return n.__forward_ref__=m0,n.toString=function(){return At(this())},n}function Oe(n){return g0(n)?n():n}function g0(n){return"function"==typeof n&&n.hasOwnProperty(aE)&&n.__forward_ref__===m0}function v0(n){return n&&!!n.\u0275providers}const Dl="https://g.co/ng/security#xss";class fe extends Error{constructor(e,t){super(function Al(n,e){return`NG0${Math.abs(n)}${e?": "+e.trim():""}`}(e,t)),this.code=e}}function qe(n){return"string"==typeof n?n:null==n?"":String(n)}function Tl(n,e){throw new fe(-201,!1)}function Ii(n,e){null==n&&function Mt(n,e,t,i){throw new Error(`ASSERTION ERROR: ${n}`+(null==i?"":` [Expected=> ${t} ${i} ${e} <=Actual]`))}(e,n,null,"!=")}function Ae(n){return{token:n.token,providedIn:n.providedIn||null,factory:n.factory,value:void 0}}function Li(n){return{providers:n.providers||[],imports:n.imports||[]}}function Il(n){return d7(n,Ll)||d7(n,p7)}function d7(n,e){return n.hasOwnProperty(e)?n[e]:null}function h7(n){return n&&(n.hasOwnProperty(y0)||n.hasOwnProperty(gE))?n[y0]:null}const Ll=Dt({\u0275prov:Dt}),y0=Dt({\u0275inj:Dt}),p7=Dt({ngInjectableDef:Dt}),gE=Dt({ngInjectorDef:Dt});var Fe=(()=>((Fe=Fe||{})[Fe.Default=0]="Default",Fe[Fe.Host=1]="Host",Fe[Fe.Self=2]="Self",Fe[Fe.SkipSelf=4]="SkipSelf",Fe[Fe.Optional=8]="Optional",Fe))();let _0;function Ri(n){const e=_0;return _0=n,e}function m7(n,e,t){const i=Il(n);return i&&"root"==i.providedIn?void 0===i.value?i.value=i.factory():i.value:t&Fe.Optional?null:void 0!==e?e:void Tl(At(n))}const Lt=(()=>typeof globalThis<"u"&&globalThis||typeof global<"u"&&global||typeof window<"u"&&window||typeof self<"u"&&typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&self)(),n2={},x0="__NG_DI_FLAG__",Rl="ngTempTokenPath",_E=/\n/gm,g7="__source";let r2;function fo(n){const e=r2;return r2=n,e}function bE(n,e=Fe.Default){if(void 0===r2)throw new fe(-203,!1);return null===r2?m7(n,void 0,e):r2.get(n,e&Fe.Optional?null:void 0,e)}function ue(n,e=Fe.Default){return(function vE(){return _0}()||bE)(Oe(n),e)}function Re(n,e=Fe.Default){return ue(n,zl(e))}function zl(n){return typeof n>"u"||"number"==typeof n?n:0|(n.optional&&8)|(n.host&&1)|(n.self&&2)|(n.skipSelf&&4)}function b0(n){const e=[];for(let t=0;t<n.length;t++){const i=Oe(n[t]);if(Array.isArray(i)){if(0===i.length)throw new fe(900,!1);let r,s=Fe.Default;for(let o=0;o<i.length;o++){const a=i[o],c=ME(a);"number"==typeof c?-1===c?r=a.token:s|=c:r=a}e.push(ue(r,s))}else e.push(ue(i))}return e}function s2(n,e){return n[x0]=e,n.prototype[x0]=e,n}function ME(n){return n[x0]}function xs(n){return{toString:n}.toString()}var Yi=(()=>((Yi=Yi||{})[Yi.OnPush=0]="OnPush",Yi[Yi.Default=1]="Default",Yi))(),gr=(()=>{return(n=gr||(gr={}))[n.Emulated=0]="Emulated",n[n.None=2]="None",n[n.ShadowDom=3]="ShadowDom",gr;var n})();const Vr={},_t=[],Pl=Dt({\u0275cmp:Dt}),M0=Dt({\u0275dir:Dt}),w0=Dt({\u0275pipe:Dt}),y7=Dt({\u0275mod:Dt}),Hr=Dt({\u0275fac:Dt}),o2=Dt({__NG_ELEMENT_ID__:Dt});let SE=0;function zi(n){return xs(()=>{const t=!0===n.standalone,i={},r={type:n.type,providersResolver:null,decls:n.decls,vars:n.vars,factory:null,template:n.template||null,consts:n.consts||null,ngContentSelectors:n.ngContentSelectors,hostBindings:n.hostBindings||null,hostVars:n.hostVars||0,hostAttrs:n.hostAttrs||null,contentQueries:n.contentQueries||null,declaredInputs:i,inputs:null,outputs:null,exportAs:n.exportAs||null,onPush:n.changeDetection===Yi.OnPush,directiveDefs:null,pipeDefs:null,standalone:t,dependencies:t&&n.dependencies||null,getStandaloneInjector:null,selectors:n.selectors||_t,viewQuery:n.viewQuery||null,features:n.features||null,data:n.data||{},encapsulation:n.encapsulation||gr.Emulated,id:"c"+SE++,styles:n.styles||_t,_:null,setInput:null,schemas:n.schemas||null,tView:null,findHostDirectiveDefs:null,hostDirectives:null},s=n.dependencies,o=n.features;return r.inputs=b7(n.inputs,i),r.outputs=b7(n.outputs),o&&o.forEach(a=>a(r)),r.directiveDefs=s?()=>("function"==typeof s?s():s).map(_7).filter(x7):null,r.pipeDefs=s?()=>("function"==typeof s?s():s).map(Zn).filter(x7):null,r})}function _7(n){return wt(n)||Fn(n)}function x7(n){return null!==n}function Xi(n){return xs(()=>({type:n.type,bootstrap:n.bootstrap||_t,declarations:n.declarations||_t,imports:n.imports||_t,exports:n.exports||_t,transitiveCompileScopes:null,schemas:n.schemas||null,id:n.id||null}))}function b7(n,e){if(null==n)return Vr;const t={};for(const i in n)if(n.hasOwnProperty(i)){let r=n[i],s=r;Array.isArray(r)&&(s=r[1],r=r[0]),t[r]=i,e&&(e[r]=s)}return t}const On=zi;function si(n){return{type:n.type,name:n.name,factory:null,pure:!1!==n.pure,standalone:!0===n.standalone,onDestroy:n.type.prototype.ngOnDestroy||null}}function wt(n){return n[Pl]||null}function Fn(n){return n[M0]||null}function Zn(n){return n[w0]||null}function mi(n,e){const t=n[y7]||null;if(!t&&!0===e)throw new Error(`Type ${At(n)} does not have '\u0275mod' property.`);return t}function gi(n){return Array.isArray(n)&&"object"==typeof n[1]}function Ji(n){return Array.isArray(n)&&!0===n[1]}function E0(n){return 0!=(4&n.flags)}function u2(n){return n.componentOffset>-1}function Vl(n){return 1==(1&n.flags)}function Qi(n){return null!==n.template}function AE(n){return 0!=(256&n[2])}function t1(n,e){return n.hasOwnProperty(Hr)?n[Hr]:null}class LE{constructor(e,t,i){this.previousValue=e,this.currentValue=t,this.firstChange=i}isFirstChange(){return this.firstChange}}function yr(){return D7}function D7(n){return n.type.prototype.ngOnChanges&&(n.setInput=zE),RE}function RE(){const n=T7(this),e=n?.current;if(e){const t=n.previous;if(t===Vr)n.previous=e;else for(let i in e)t[i]=e[i];n.current=null,this.ngOnChanges(e)}}function zE(n,e,t,i){const r=this.declaredInputs[t],s=T7(n)||function PE(n,e){return n[A7]=e}(n,{previous:Vr,current:null}),o=s.current||(s.current={}),a=s.previous,c=a[r];o[r]=new LE(c&&c.currentValue,e,a===Vr),n[i]=e}yr.ngInherit=!0;const A7="__ngSimpleChanges__";function T7(n){return n[A7]||null}function zn(n){for(;Array.isArray(n);)n=n[0];return n}function vi(n,e){return zn(e[n.index])}function R7(n,e){return n.data[e]}function yi(n,e){const t=e[n];return gi(t)?t:t[0]}function Ul(n){return 64==(64&n[2])}function bs(n,e){return null==e?null:n[e]}function z7(n){n[18]=0}function A0(n,e){n[5]+=e;let t=n,i=n[3];for(;null!==i&&(1===e&&1===t[5]||-1===e&&0===t[5]);)i[5]+=e,t=i,i=i[3]}const Ze={lFrame:G7(null),bindingsEnabled:!0};function N7(){return Ze.bindingsEnabled}function X(){return Ze.lFrame.lView}function dt(){return Ze.lFrame.tView}function T0(n){return Ze.lFrame.contextLView=n,n[8]}function I0(n){return Ze.lFrame.contextLView=null,n}function Pn(){let n=O7();for(;null!==n&&64===n.type;)n=n.parent;return n}function O7(){return Ze.lFrame.currentTNode}function _r(n,e){const t=Ze.lFrame;t.currentTNode=n,t.isParent=e}function L0(){return Ze.lFrame.isParent}function R0(){Ze.lFrame.isParent=!1}function Xn(){const n=Ze.lFrame;let e=n.bindingRootIndex;return-1===e&&(e=n.bindingRootIndex=n.tView.bindingStartIndex),e}function _o(){return Ze.lFrame.bindingIndex++}function qE(n,e){const t=Ze.lFrame;t.bindingIndex=t.bindingRootIndex=n,z0(e)}function z0(n){Ze.lFrame.currentDirectiveIndex=n}function H7(){return Ze.lFrame.currentQueryIndex}function N0(n){Ze.lFrame.currentQueryIndex=n}function YE(n){const e=n[1];return 2===e.type?e.declTNode:1===e.type?n[6]:null}function U7(n,e,t){if(t&Fe.SkipSelf){let r=e,s=n;for(;!(r=r.parent,null!==r||t&Fe.Host||(r=YE(s),null===r||(s=s[15],10&r.type))););if(null===r)return!1;e=r,n=s}const i=Ze.lFrame=B7();return i.currentTNode=e,i.lView=n,!0}function O0(n){const e=B7(),t=n[1];Ze.lFrame=e,e.currentTNode=t.firstChild,e.lView=n,e.tView=t,e.contextLView=n,e.bindingIndex=t.bindingStartIndex,e.inI18n=!1}function B7(){const n=Ze.lFrame,e=null===n?null:n.child;return null===e?G7(n):e}function G7(n){const e={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:n,child:null,inI18n:!1};return null!==n&&(n.child=e),e}function W7(){const n=Ze.lFrame;return Ze.lFrame=n.parent,n.currentTNode=null,n.lView=null,n}const $7=W7;function F0(){const n=W7();n.isParent=!0,n.tView=null,n.selectedIndex=-1,n.contextLView=null,n.elementDepthCount=0,n.currentDirectiveIndex=-1,n.currentNamespace=null,n.bindingRootIndex=-1,n.bindingIndex=-1,n.currentQueryIndex=0}function Kn(){return Ze.lFrame.selectedIndex}function n1(n){Ze.lFrame.selectedIndex=n}function Wt(){const n=Ze.lFrame;return R7(n.tView,n.selectedIndex)}function Bl(n,e){for(let t=e.directiveStart,i=e.directiveEnd;t<i;t++){const s=n.data[t].type.prototype,{ngAfterContentInit:o,ngAfterContentChecked:a,ngAfterViewInit:c,ngAfterViewChecked:l,ngOnDestroy:u}=s;o&&(n.contentHooks||(n.contentHooks=[])).push(-t,o),a&&((n.contentHooks||(n.contentHooks=[])).push(t,a),(n.contentCheckHooks||(n.contentCheckHooks=[])).push(t,a)),c&&(n.viewHooks||(n.viewHooks=[])).push(-t,c),l&&((n.viewHooks||(n.viewHooks=[])).push(t,l),(n.viewCheckHooks||(n.viewCheckHooks=[])).push(t,l)),null!=u&&(n.destroyHooks||(n.destroyHooks=[])).push(t,u)}}function Gl(n,e,t){j7(n,e,3,t)}function Wl(n,e,t,i){(3&n[2])===t&&j7(n,e,t,i)}function k0(n,e){let t=n[2];(3&t)===e&&(t&=2047,t+=1,n[2]=t)}function j7(n,e,t,i){const s=i??-1,o=e.length-1;let a=0;for(let c=void 0!==i?65535&n[18]:0;c<o;c++)if("number"==typeof e[c+1]){if(a=e[c],null!=i&&a>=i)break}else e[c]<0&&(n[18]+=65536),(a<s||-1==s)&&(rD(n,t,e,c),n[18]=(4294901760&n[18])+c+2),c++}function rD(n,e,t,i){const r=t[i]<0,s=t[i+1],a=n[r?-t[i]:t[i]];if(r){if(n[2]>>11<n[18]>>16&&(3&n[2])===e){n[2]+=2048;try{s.call(a)}finally{}}}else try{s.call(a)}finally{}}class d2{constructor(e,t,i){this.factory=e,this.resolving=!1,this.canSeeViewProviders=t,this.injectImpl=i}}function H0(n,e,t){let i=0;for(;i<t.length;){const r=t[i];if("number"==typeof r){if(0!==r)break;i++;const s=t[i++],o=t[i++],a=t[i++];n.setAttribute(e,o,a,s)}else{const s=r,o=t[++i];Z7(s)?n.setProperty(e,s,o):n.setAttribute(e,s,o),i++}}return i}function q7(n){return 3===n||4===n||6===n}function Z7(n){return 64===n.charCodeAt(0)}function h2(n,e){if(null!==e&&0!==e.length)if(null===n||0===n.length)n=e.slice();else{let t=-1;for(let i=0;i<e.length;i++){const r=e[i];"number"==typeof r?t=r:0===t||Y7(n,t,r,null,-1===t||2===t?e[++i]:null)}}return n}function Y7(n,e,t,i,r){let s=0,o=n.length;if(-1===e)o=-1;else for(;s<n.length;){const a=n[s++];if("number"==typeof a){if(a===e){o=-1;break}if(a>e){o=s-1;break}}}for(;s<n.length;){const a=n[s];if("number"==typeof a)break;if(a===t){if(null===i)return void(null!==r&&(n[s+1]=r));if(i===n[s+1])return void(n[s+2]=r)}s++,null!==i&&s++,null!==r&&s++}-1!==o&&(n.splice(o,0,e),s=o+1),n.splice(s++,0,t),null!==i&&n.splice(s++,0,i),null!==r&&n.splice(s++,0,r)}function X7(n){return-1!==n}function $l(n){return 32767&n}function jl(n,e){let t=function cD(n){return n>>16}(n),i=e;for(;t>0;)i=i[15],t--;return i}let U0=!0;function ql(n){const e=U0;return U0=n,e}let lD=0;const xr={};function Zl(n,e){const t=Q7(n,e);if(-1!==t)return t;const i=e[1];i.firstCreatePass&&(n.injectorIndex=e.length,B0(i.data,n),B0(e,null),B0(i.blueprint,null));const r=G0(n,e),s=n.injectorIndex;if(X7(r)){const o=$l(r),a=jl(r,e),c=a[1].data;for(let l=0;l<8;l++)e[s+l]=a[o+l]|c[o+l]}return e[s+8]=r,s}function B0(n,e){n.push(0,0,0,0,0,0,0,0,e)}function Q7(n,e){return-1===n.injectorIndex||n.parent&&n.parent.injectorIndex===n.injectorIndex||null===e[n.injectorIndex+8]?-1:n.injectorIndex}function G0(n,e){if(n.parent&&-1!==n.parent.injectorIndex)return n.parent.injectorIndex;let t=0,i=null,r=e;for(;null!==r;){if(i=o9(r),null===i)return-1;if(t++,r=r[15],-1!==i.injectorIndex)return i.injectorIndex|t<<16}return-1}function W0(n,e,t){!function uD(n,e,t){let i;"string"==typeof t?i=t.charCodeAt(0)||0:t.hasOwnProperty(o2)&&(i=t[o2]),null==i&&(i=t[o2]=lD++);const r=255&i;e.data[n+(r>>5)]|=1<<r}(n,e,t)}function e9(n,e,t){if(t&Fe.Optional||void 0!==n)return n;Tl()}function t9(n,e,t,i){if(t&Fe.Optional&&void 0===i&&(i=null),0==(t&(Fe.Self|Fe.Host))){const r=n[9],s=Ri(void 0);try{return r?r.get(e,i,t&Fe.Optional):m7(e,i,t&Fe.Optional)}finally{Ri(s)}}return e9(i,0,t)}function n9(n,e,t,i=Fe.Default,r){if(null!==n){if(1024&e[2]){const o=function mD(n,e,t,i,r){let s=n,o=e;for(;null!==s&&null!==o&&1024&o[2]&&!(256&o[2]);){const a=i9(s,o,t,i|Fe.Self,xr);if(a!==xr)return a;let c=s.parent;if(!c){const l=o[21];if(l){const u=l.get(t,xr,i);if(u!==xr)return u}c=o9(o),o=o[15]}s=c}return r}(n,e,t,i,xr);if(o!==xr)return o}const s=i9(n,e,t,i,xr);if(s!==xr)return s}return t9(e,t,i,r)}function i9(n,e,t,i,r){const s=function hD(n){if("string"==typeof n)return n.charCodeAt(0)||0;const e=n.hasOwnProperty(o2)?n[o2]:void 0;return"number"==typeof e?e>=0?255&e:pD:e}(t);if("function"==typeof s){if(!U7(e,n,i))return i&Fe.Host?e9(r,0,i):t9(e,t,i,r);try{const o=s(i);if(null!=o||i&Fe.Optional)return o;Tl()}finally{$7()}}else if("number"==typeof s){let o=null,a=Q7(n,e),c=-1,l=i&Fe.Host?e[16][6]:null;for((-1===a||i&Fe.SkipSelf)&&(c=-1===a?G0(n,e):e[a+8],-1!==c&&s9(i,!1)?(o=e[1],a=$l(c),e=jl(c,e)):a=-1);-1!==a;){const u=e[1];if(r9(s,a,u.data)){const f=dD(a,e,t,o,i,l);if(f!==xr)return f}c=e[a+8],-1!==c&&s9(i,e[1].data[a+8]===l)&&r9(s,a,e)?(o=u,a=$l(c),e=jl(c,e)):a=-1}}return r}function dD(n,e,t,i,r,s){const o=e[1],a=o.data[n+8],u=Yl(a,o,t,null==i?u2(a)&&U0:i!=o&&0!=(3&a.type),r&Fe.Host&&s===a);return null!==u?i1(e,o,u,a):xr}function Yl(n,e,t,i,r){const s=n.providerIndexes,o=e.data,a=1048575&s,c=n.directiveStart,u=s>>20,d=r?a+u:n.directiveEnd;for(let h=i?a:a+u;h<d;h++){const p=o[h];if(h<c&&t===p||h>=c&&p.type===t)return h}if(r){const h=o[c];if(h&&Qi(h)&&h.type===t)return c}return null}function i1(n,e,t,i){let r=n[t];const s=e.data;if(function sD(n){return n instanceof d2}(r)){const o=r;o.resolving&&function cE(n,e){const t=e?`. Dependency path: ${e.join(" > ")} > ${n}`:"";throw new fe(-200,`Circular dependency in DI detected for ${n}${t}`)}(function bt(n){return"function"==typeof n?n.name||n.toString():"object"==typeof n&&null!=n&&"function"==typeof n.type?n.type.name||n.type.toString():qe(n)}(s[t]));const a=ql(o.canSeeViewProviders);o.resolving=!0;const c=o.injectImpl?Ri(o.injectImpl):null;U7(n,i,Fe.Default);try{r=n[t]=o.factory(void 0,s,n,i),e.firstCreatePass&&t>=i.directiveStart&&function iD(n,e,t){const{ngOnChanges:i,ngOnInit:r,ngDoCheck:s}=e.type.prototype;if(i){const o=D7(e);(t.preOrderHooks||(t.preOrderHooks=[])).push(n,o),(t.preOrderCheckHooks||(t.preOrderCheckHooks=[])).push(n,o)}r&&(t.preOrderHooks||(t.preOrderHooks=[])).push(0-n,r),s&&((t.preOrderHooks||(t.preOrderHooks=[])).push(n,s),(t.preOrderCheckHooks||(t.preOrderCheckHooks=[])).push(n,s))}(t,s[t],e)}finally{null!==c&&Ri(c),ql(a),o.resolving=!1,$7()}}return r}function r9(n,e,t){return!!(t[e+(n>>5)]&1<<n)}function s9(n,e){return!(n&Fe.Self||n&Fe.Host&&e)}class bo{constructor(e,t){this._tNode=e,this._lView=t}get(e,t,i){return n9(this._tNode,this._lView,e,zl(i),t)}}function pD(){return new bo(Pn(),X())}function $0(n){return xs(()=>{const e=n.prototype.constructor,t=e[Hr]||j0(e),i=Object.prototype;let r=Object.getPrototypeOf(n.prototype).constructor;for(;r&&r!==i;){const s=r[Hr]||j0(r);if(s&&s!==t)return s;r=Object.getPrototypeOf(r)}return s=>new s})}function j0(n){return g0(n)?()=>{const e=j0(Oe(n));return e&&e()}:t1(n)}function o9(n){const e=n[1],t=e.type;return 2===t?e.declTNode:1===t?n[6]:null}const wo="__parameters__";function So(n,e,t){return xs(()=>{const i=function q0(n){return function(...t){if(n){const i=n(...t);for(const r in i)this[r]=i[r]}}}(e);function r(...s){if(this instanceof r)return i.apply(this,s),this;const o=new r(...s);return a.annotation=o,a;function a(c,l,u){const f=c.hasOwnProperty(wo)?c[wo]:Object.defineProperty(c,wo,{value:[]})[wo];for(;f.length<=u;)f.push(null);return(f[u]=f[u]||[]).push(o),c}}return t&&(r.prototype=Object.create(t.prototype)),r.prototype.ngMetadataName=n,r.annotationCls=r,r})}class oe{constructor(e,t){this._desc=e,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof t?this.__NG_ELEMENT_ID__=t:void 0!==t&&(this.\u0275prov=Ae({token:this,providedIn:t.providedIn||"root",factory:t.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}}function r1(n,e){n.forEach(t=>Array.isArray(t)?r1(t,e):e(t))}function c9(n,e,t){e>=n.length?n.push(t):n.splice(e,0,t)}function Kl(n,e){return e>=n.length-1?n.pop():n.splice(e,1)[0]}function g2(n,e){const t=[];for(let i=0;i<n;i++)t.push(e);return t}const v2=s2(So("Inject",n=>({token:n})),-1),y2=s2(So("Optional"),8),_2=s2(So("SkipSelf"),4);var oi=(()=>((oi=oi||{})[oi.Important=1]="Important",oi[oi.DashCase=2]="DashCase",oi))();const e5=new Map;let UD=0;const n5="__ngContext__";function Hn(n,e){gi(e)?(n[n5]=e[20],function GD(n){e5.set(n[20],n)}(e)):n[n5]=e}function r5(n,e){return undefined(n,e)}function w2(n){const e=n[3];return Ji(e)?e[3]:e}function s5(n){return T9(n[13])}function o5(n){return T9(n[4])}function T9(n){for(;null!==n&&!Ji(n);)n=n[4];return n}function Ao(n,e,t,i,r){if(null!=i){let s,o=!1;Ji(i)?s=i:gi(i)&&(o=!0,i=i[0]);const a=zn(i);0===n&&null!==t?null==r?N9(e,t,a):s1(e,t,a,r||null,!0):1===n&&null!==t?s1(e,t,a,r||null,!0):2===n?function h5(n,e,t){const i=t3(n,e);i&&function lA(n,e,t,i){n.removeChild(e,t,i)}(n,i,e,t)}(e,a,o):3===n&&e.destroyNode(a),null!=s&&function dA(n,e,t,i,r){const s=t[7];s!==zn(t)&&Ao(e,n,i,s,r);for(let a=10;a<t.length;a++){const c=t[a];C2(c[1],c,n,e,i,s)}}(e,n,s,t,r)}}function c5(n,e,t){return n.createElement(e,t)}function L9(n,e){const t=n[9],i=t.indexOf(e),r=e[3];512&e[2]&&(e[2]&=-513,A0(r,-1)),t.splice(i,1)}function l5(n,e){if(n.length<=10)return;const t=10+e,i=n[t];if(i){const r=i[17];null!==r&&r!==n&&L9(r,i),e>0&&(n[t-1][4]=i[4]);const s=Kl(n,10+e);!function tA(n,e){C2(n,e,e[11],2,null,null),e[0]=null,e[6]=null}(i[1],i);const o=s[19];null!==o&&o.detachView(s[1]),i[3]=null,i[4]=null,i[2]&=-65}return i}function R9(n,e){if(!(128&e[2])){const t=e[11];t.destroyNode&&C2(n,e,t,3,null,null),function rA(n){let e=n[13];if(!e)return u5(n[1],n);for(;e;){let t=null;if(gi(e))t=e[13];else{const i=e[10];i&&(t=i)}if(!t){for(;e&&!e[4]&&e!==n;)gi(e)&&u5(e[1],e),e=e[3];null===e&&(e=n),gi(e)&&u5(e[1],e),t=e&&e[4]}e=t}}(e)}}function u5(n,e){if(!(128&e[2])){e[2]&=-65,e[2]|=128,function cA(n,e){let t;if(null!=n&&null!=(t=n.destroyHooks))for(let i=0;i<t.length;i+=2){const r=e[t[i]];if(!(r instanceof d2)){const s=t[i+1];if(Array.isArray(s))for(let o=0;o<s.length;o+=2){const a=r[s[o]],c=s[o+1];try{c.call(a)}finally{}}else try{s.call(r)}finally{}}}}(n,e),function aA(n,e){const t=n.cleanup,i=e[7];let r=-1;if(null!==t)for(let s=0;s<t.length-1;s+=2)if("string"==typeof t[s]){const o=t[s+3];o>=0?i[r=o]():i[r=-o].unsubscribe(),s+=2}else{const o=i[r=t[s+1]];t[s].call(o)}if(null!==i){for(let s=r+1;s<i.length;s++)(0,i[s])();e[7]=null}}(n,e),1===e[1].type&&e[11].destroy();const t=e[17];if(null!==t&&Ji(e[3])){t!==e[3]&&L9(t,e);const i=e[19];null!==i&&i.detachView(n)}!function WD(n){e5.delete(n[20])}(e)}}function z9(n,e,t){return function P9(n,e,t){let i=e;for(;null!==i&&40&i.type;)i=(e=i).parent;if(null===i)return t[0];{const{componentOffset:r}=i;if(r>-1){const{encapsulation:s}=n.data[i.directiveStart+r];if(s===gr.None||s===gr.Emulated)return null}return vi(i,t)}}(n,e.parent,t)}function s1(n,e,t,i,r){n.insertBefore(e,t,i,r)}function N9(n,e,t){n.appendChild(e,t)}function O9(n,e,t,i,r){null!==i?s1(n,e,t,i,r):N9(n,e,t)}function t3(n,e){return n.parentNode(e)}function F9(n,e,t){return V9(n,e,t)}let r3,g5,s3,V9=function k9(n,e,t){return 40&n.type?vi(n,t):null};function n3(n,e,t,i){const r=z9(n,i,e),s=e[11],a=F9(i.parent||e[6],i,e);if(null!=r)if(Array.isArray(t))for(let c=0;c<t.length;c++)O9(s,r,t[c],a,!1);else O9(s,r,t,a,!1)}function i3(n,e){if(null!==e){const t=e.type;if(3&t)return vi(e,n);if(4&t)return d5(-1,n[e.index]);if(8&t){const i=e.child;if(null!==i)return i3(n,i);{const r=n[e.index];return Ji(r)?d5(-1,r):zn(r)}}if(32&t)return r5(e,n)()||zn(n[e.index]);{const i=U9(n,e);return null!==i?Array.isArray(i)?i[0]:i3(w2(n[16]),i):i3(n,e.next)}}return null}function U9(n,e){return null!==e?n[16][6].projection[e.projection]:null}function d5(n,e){const t=10+n+1;if(t<e.length){const i=e[t],r=i[1].firstChild;if(null!==r)return i3(i,r)}return e[7]}function p5(n,e,t,i,r,s,o){for(;null!=t;){const a=i[t.index],c=t.type;if(o&&0===e&&(a&&Hn(zn(a),i),t.flags|=2),32!=(32&t.flags))if(8&c)p5(n,e,t.child,i,r,s,!1),Ao(e,n,r,a,s);else if(32&c){const l=r5(t,i);let u;for(;u=l();)Ao(e,n,r,u,s);Ao(e,n,r,a,s)}else 16&c?B9(n,e,i,t,r,s):Ao(e,n,r,a,s);t=o?t.projectionNext:t.next}}function C2(n,e,t,i,r,s){p5(t,i,n.firstChild,e,r,s,!1)}function B9(n,e,t,i,r,s){const o=t[16],c=o[6].projection[i.projection];if(Array.isArray(c))for(let l=0;l<c.length;l++)Ao(e,n,r,c[l],s);else p5(n,e,c,o[3],r,s,!0)}function G9(n,e,t){""===t?n.removeAttribute(e,"class"):n.setAttribute(e,"class",t)}function W9(n,e,t){const{mergedAttrs:i,classes:r,styles:s}=t;null!==i&&H0(n,e,i),null!==r&&G9(n,e,r),null!==s&&function pA(n,e,t){n.setAttribute(e,"style",t)}(n,e,s)}function o1(n){return function m5(){if(void 0===r3&&(r3=null,Lt.trustedTypes))try{r3=Lt.trustedTypes.createPolicy("angular",{createHTML:n=>n,createScript:n=>n,createScriptURL:n=>n})}catch{}return r3}()?.createHTML(n)||n}function j9(n){return function v5(){if(void 0===s3&&(s3=null,Lt.trustedTypes))try{s3=Lt.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:n=>n,createScript:n=>n,createScriptURL:n=>n})}catch{}return s3}()?.createHTML(n)||n}class a1{constructor(e){this.changingThisBreaksApplicationSecurity=e}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${Dl})`}}class _A extends a1{getTypeName(){return"HTML"}}class xA extends a1{getTypeName(){return"Style"}}class bA extends a1{getTypeName(){return"Script"}}class MA extends a1{getTypeName(){return"URL"}}class wA extends a1{getTypeName(){return"ResourceURL"}}function xi(n){return n instanceof a1?n.changingThisBreaksApplicationSecurity:n}function br(n,e){const t=function CA(n){return n instanceof a1&&n.getTypeName()||null}(n);if(null!=t&&t!==e){if("ResourceURL"===t&&"URL"===e)return!0;throw new Error(`Required a safe ${e}, got a ${t} (see ${Dl})`)}return t===e}class IA{constructor(e){this.inertDocumentHelper=e}getInertBodyElement(e){e="<body><remove></remove>"+e;try{const t=(new window.DOMParser).parseFromString(o1(e),"text/html").body;return null===t?this.inertDocumentHelper.getInertBodyElement(e):(t.removeChild(t.firstChild),t)}catch{return null}}}class LA{constructor(e){if(this.defaultDoc=e,this.inertDocument=this.defaultDoc.implementation.createHTMLDocument("sanitization-inert"),null==this.inertDocument.body){const t=this.inertDocument.createElement("html");this.inertDocument.appendChild(t);const i=this.inertDocument.createElement("body");t.appendChild(i)}}getInertBodyElement(e){const t=this.inertDocument.createElement("template");if("content"in t)return t.innerHTML=o1(e),t;const i=this.inertDocument.createElement("body");return i.innerHTML=o1(e),this.defaultDoc.documentMode&&this.stripCustomNsAttrs(i),i}stripCustomNsAttrs(e){const t=e.attributes;for(let r=t.length-1;0<r;r--){const o=t.item(r).name;("xmlns:ns1"===o||0===o.indexOf("ns1:"))&&e.removeAttribute(o)}let i=e.firstChild;for(;i;)i.nodeType===Node.ELEMENT_NODE&&this.stripCustomNsAttrs(i),i=i.nextSibling}}const zA=/^(?:(?:https?|mailto|data|ftp|tel|file|sms):|[^&:/?#]*(?:[/?#]|$))/gi;function o3(n){return(n=String(n)).match(zA)?n:"unsafe:"+n}function Wr(n){const e={};for(const t of n.split(","))e[t]=!0;return e}function S2(...n){const e={};for(const t of n)for(const i in t)t.hasOwnProperty(i)&&(e[i]=!0);return e}const X9=Wr("area,br,col,hr,img,wbr"),K9=Wr("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),J9=Wr("rp,rt"),y5=S2(X9,S2(K9,Wr("address,article,aside,blockquote,caption,center,del,details,dialog,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,main,map,menu,nav,ol,pre,section,summary,table,ul")),S2(J9,Wr("a,abbr,acronym,audio,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,picture,q,ruby,rp,rt,s,samp,small,source,span,strike,strong,sub,sup,time,track,tt,u,var,video")),S2(J9,K9)),_5=Wr("background,cite,href,itemtype,longdesc,poster,src,xlink:href"),Q9=S2(_5,Wr("abbr,accesskey,align,alt,autoplay,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,controls,coords,datetime,default,dir,download,face,headers,height,hidden,hreflang,hspace,ismap,itemscope,itemprop,kind,label,lang,language,loop,media,muted,nohref,nowrap,open,preload,rel,rev,role,rows,rowspan,rules,scope,scrolling,shape,size,sizes,span,srclang,srcset,start,summary,tabindex,target,title,translate,type,usemap,valign,value,vspace,width"),Wr("aria-activedescendant,aria-atomic,aria-autocomplete,aria-busy,aria-checked,aria-colcount,aria-colindex,aria-colspan,aria-controls,aria-current,aria-describedby,aria-details,aria-disabled,aria-dropeffect,aria-errormessage,aria-expanded,aria-flowto,aria-grabbed,aria-haspopup,aria-hidden,aria-invalid,aria-keyshortcuts,aria-label,aria-labelledby,aria-level,aria-live,aria-modal,aria-multiline,aria-multiselectable,aria-orientation,aria-owns,aria-placeholder,aria-posinset,aria-pressed,aria-readonly,aria-relevant,aria-required,aria-roledescription,aria-rowcount,aria-rowindex,aria-rowspan,aria-selected,aria-setsize,aria-sort,aria-valuemax,aria-valuemin,aria-valuenow,aria-valuetext")),PA=Wr("script,style,template");class NA{constructor(){this.sanitizedSomething=!1,this.buf=[]}sanitizeChildren(e){let t=e.firstChild,i=!0;for(;t;)if(t.nodeType===Node.ELEMENT_NODE?i=this.startElement(t):t.nodeType===Node.TEXT_NODE?this.chars(t.nodeValue):this.sanitizedSomething=!0,i&&t.firstChild)t=t.firstChild;else for(;t;){t.nodeType===Node.ELEMENT_NODE&&this.endElement(t);let r=this.checkClobberedElement(t,t.nextSibling);if(r){t=r;break}t=this.checkClobberedElement(t,t.parentNode)}return this.buf.join("")}startElement(e){const t=e.nodeName.toLowerCase();if(!y5.hasOwnProperty(t))return this.sanitizedSomething=!0,!PA.hasOwnProperty(t);this.buf.push("<"),this.buf.push(t);const i=e.attributes;for(let r=0;r<i.length;r++){const s=i.item(r),o=s.name,a=o.toLowerCase();if(!Q9.hasOwnProperty(a)){this.sanitizedSomething=!0;continue}let c=s.value;_5[a]&&(c=o3(c)),this.buf.push(" ",o,'="',ep(c),'"')}return this.buf.push(">"),!0}endElement(e){const t=e.nodeName.toLowerCase();y5.hasOwnProperty(t)&&!X9.hasOwnProperty(t)&&(this.buf.push("</"),this.buf.push(t),this.buf.push(">"))}chars(e){this.buf.push(ep(e))}checkClobberedElement(e,t){if(t&&(e.compareDocumentPosition(t)&Node.DOCUMENT_POSITION_CONTAINED_BY)===Node.DOCUMENT_POSITION_CONTAINED_BY)throw new Error(`Failed to sanitize html because the element is clobbered: ${e.outerHTML}`);return t}}const OA=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,FA=/([^\#-~ |!])/g;function ep(n){return n.replace(/&/g,"&amp;").replace(OA,function(e){return"&#"+(1024*(e.charCodeAt(0)-55296)+(e.charCodeAt(1)-56320)+65536)+";"}).replace(FA,function(e){return"&#"+e.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}let a3;function tp(n,e){let t=null;try{a3=a3||function Y9(n){const e=new LA(n);return function RA(){try{return!!(new window.DOMParser).parseFromString(o1(""),"text/html")}catch{return!1}}()?new IA(e):e}(n);let i=e?String(e):"";t=a3.getInertBodyElement(i);let r=5,s=i;do{if(0===r)throw new Error("Failed to sanitize html because the input is unstable");r--,i=s,s=t.innerHTML,t=a3.getInertBodyElement(i)}while(i!==s);return o1((new NA).sanitizeChildren(x5(t)||t))}finally{if(t){const i=x5(t)||t;for(;i.firstChild;)i.removeChild(i.firstChild)}}}function x5(n){return"content"in n&&function kA(n){return n.nodeType===Node.ELEMENT_NODE&&"TEMPLATE"===n.nodeName}(n)?n.content:null}var Rt=(()=>((Rt=Rt||{})[Rt.NONE=0]="NONE",Rt[Rt.HTML=1]="HTML",Rt[Rt.STYLE=2]="STYLE",Rt[Rt.SCRIPT=3]="SCRIPT",Rt[Rt.URL=4]="URL",Rt[Rt.RESOURCE_URL=5]="RESOURCE_URL",Rt))();function np(n){const e=E2();return e?j9(e.sanitize(Rt.HTML,n)||""):br(n,"HTML")?j9(xi(n)):tp(function $9(){return void 0!==g5?g5:typeof document<"u"?document:void 0}(),qe(n))}function Ms(n){const e=E2();return e?e.sanitize(Rt.URL,n)||"":br(n,"URL")?xi(n):o3(qe(n))}function E2(){const n=X();return n&&n[12]}const To=new oe("ENVIRONMENT_INITIALIZER"),sp=new oe("INJECTOR",-1),op=new oe("INJECTOR_DEF_TYPES");class ap{get(e,t=n2){if(t===n2){const i=new Error(`NullInjectorError: No provider for ${At(e)}!`);throw i.name="NullInjectorError",i}return t}}function WA(...n){return{\u0275providers:cp(0,n),\u0275fromNgModule:!0}}function cp(n,...e){const t=[],i=new Set;let r;return r1(e,s=>{const o=s;b5(o,t,[],i)&&(r||(r=[]),r.push(o))}),void 0!==r&&lp(r,t),t}function lp(n,e){for(let t=0;t<n.length;t++){const{providers:r}=n[t];M5(r,s=>{e.push(s)})}}function b5(n,e,t,i){if(!(n=Oe(n)))return!1;let r=null,s=h7(n);const o=!s&&wt(n);if(s||o){if(o&&!o.standalone)return!1;r=n}else{const c=n.ngModule;if(s=h7(c),!s)return!1;r=c}const a=i.has(r);if(o){if(a)return!1;if(i.add(r),o.dependencies){const c="function"==typeof o.dependencies?o.dependencies():o.dependencies;for(const l of c)b5(l,e,t,i)}}else{if(!s)return!1;{if(null!=s.imports&&!a){let l;i.add(r);try{r1(s.imports,u=>{b5(u,e,t,i)&&(l||(l=[]),l.push(u))})}finally{}void 0!==l&&lp(l,e)}if(!a){const l=t1(r)||(()=>new r);e.push({provide:r,useFactory:l,deps:_t},{provide:op,useValue:r,multi:!0},{provide:To,useValue:()=>ue(r),multi:!0})}const c=s.providers;null==c||a||M5(c,u=>{e.push(u)})}}return r!==n&&void 0!==n.providers}function M5(n,e){for(let t of n)v0(t)&&(t=t.\u0275providers),Array.isArray(t)?M5(t,e):e(t)}const $A=Dt({provide:String,useValue:Dt});function w5(n){return null!==n&&"object"==typeof n&&$A in n}function c1(n){return"function"==typeof n}const C5=new oe("Set Injector scope."),c3={},qA={};let S5;function l3(){return void 0===S5&&(S5=new ap),S5}class $r{}class dp extends $r{constructor(e,t,i,r){super(),this.parent=t,this.source=i,this.scopes=r,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,D5(e,o=>this.processProvider(o)),this.records.set(sp,Io(void 0,this)),r.has("environment")&&this.records.set($r,Io(void 0,this));const s=this.records.get(C5);null!=s&&"string"==typeof s.value&&this.scopes.add(s.value),this.injectorDefTypes=new Set(this.get(op.multi,_t,Fe.Self))}get destroyed(){return this._destroyed}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{for(const e of this._ngOnDestroyHooks)e.ngOnDestroy();for(const e of this._onDestroyHooks)e()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),this._onDestroyHooks.length=0}}onDestroy(e){this._onDestroyHooks.push(e)}runInContext(e){this.assertNotDestroyed();const t=fo(this),i=Ri(void 0);try{return e()}finally{fo(t),Ri(i)}}get(e,t=n2,i=Fe.Default){this.assertNotDestroyed(),i=zl(i);const r=fo(this),s=Ri(void 0);try{if(!(i&Fe.SkipSelf)){let a=this.records.get(e);if(void 0===a){const c=function JA(n){return"function"==typeof n||"object"==typeof n&&n instanceof oe}(e)&&Il(e);a=c&&this.injectableDefInScope(c)?Io(E5(e),c3):null,this.records.set(e,a)}if(null!=a)return this.hydrate(e,a)}return(i&Fe.Self?l3():this.parent).get(e,t=i&Fe.Optional&&t===n2?null:t)}catch(o){if("NullInjectorError"===o.name){if((o[Rl]=o[Rl]||[]).unshift(At(e)),r)throw o;return function wE(n,e,t,i){const r=n[Rl];throw e[g7]&&r.unshift(e[g7]),n.message=function CE(n,e,t,i=null){n=n&&"\n"===n.charAt(0)&&"\u0275"==n.charAt(1)?n.slice(2):n;let r=At(e);if(Array.isArray(e))r=e.map(At).join(" -> ");else if("object"==typeof e){let s=[];for(let o in e)if(e.hasOwnProperty(o)){let a=e[o];s.push(o+":"+("string"==typeof a?JSON.stringify(a):At(a)))}r=`{${s.join(", ")}}`}return`${t}${i?"("+i+")":""}[${r}]: ${n.replace(_E,"\n  ")}`}("\n"+n.message,r,t,i),n.ngTokenPath=r,n[Rl]=null,n}(o,e,"R3InjectorError",this.source)}throw o}finally{Ri(s),fo(r)}}resolveInjectorInitializers(){const e=fo(this),t=Ri(void 0);try{const i=this.get(To.multi,_t,Fe.Self);for(const r of i)r()}finally{fo(e),Ri(t)}}toString(){const e=[],t=this.records;for(const i of t.keys())e.push(At(i));return`R3Injector[${e.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new fe(205,!1)}processProvider(e){let t=c1(e=Oe(e))?e:Oe(e&&e.provide);const i=function YA(n){return w5(n)?Io(void 0,n.useValue):Io(function hp(n,e,t){let i;if(c1(n)){const r=Oe(n);return t1(r)||E5(r)}if(w5(n))i=()=>Oe(n.useValue);else if(function fp(n){return!(!n||!n.useFactory)}(n))i=()=>n.useFactory(...b0(n.deps||[]));else if(function up(n){return!(!n||!n.useExisting)}(n))i=()=>ue(Oe(n.useExisting));else{const r=Oe(n&&(n.useClass||n.provide));if(!function XA(n){return!!n.deps}(n))return t1(r)||E5(r);i=()=>new r(...b0(n.deps))}return i}(n),c3)}(e);if(c1(e)||!0!==e.multi)this.records.get(t);else{let r=this.records.get(t);r||(r=Io(void 0,c3,!0),r.factory=()=>b0(r.multi),this.records.set(t,r)),t=e,r.multi.push(e)}this.records.set(t,i)}hydrate(e,t){return t.value===c3&&(t.value=qA,t.value=t.factory()),"object"==typeof t.value&&t.value&&function KA(n){return null!==n&&"object"==typeof n&&"function"==typeof n.ngOnDestroy}(t.value)&&this._ngOnDestroyHooks.add(t.value),t.value}injectableDefInScope(e){if(!e.providedIn)return!1;const t=Oe(e.providedIn);return"string"==typeof t?"any"===t||this.scopes.has(t):this.injectorDefTypes.has(t)}}function E5(n){const e=Il(n),t=null!==e?e.factory:t1(n);if(null!==t)return t;if(n instanceof oe)throw new fe(204,!1);if(n instanceof Function)return function ZA(n){const e=n.length;if(e>0)throw g2(e,"?"),new fe(204,!1);const t=function pE(n){const e=n&&(n[Ll]||n[p7]);if(e){const t=function mE(n){if(n.hasOwnProperty("name"))return n.name;const e=(""+n).match(/^function\s*([^\s(]+)/);return null===e?"":e[1]}(n);return console.warn(`DEPRECATED: DI is instantiating a token "${t}" that inherits its @Injectable decorator but does not provide one itself.\nThis will become an error in a future version of Angular. Please add @Injectable() to the "${t}" class.`),e}return null}(n);return null!==t?()=>t.factory(n):()=>new n}(n);throw new fe(204,!1)}function Io(n,e,t=!1){return{factory:n,value:e,multi:t?[]:void 0}}function D5(n,e){for(const t of n)Array.isArray(t)?D5(t,e):t&&v0(t)?D5(t.\u0275providers,e):e(t)}class QA{}class pp{}class tT{resolveComponentFactory(e){throw function eT(n){const e=Error(`No component factory found for ${At(n)}. Did you add it to @NgModule.entryComponents?`);return e.ngComponent=n,e}(e)}}let D2=(()=>{class n{}return n.NULL=new tT,n})();function nT(){return Lo(Pn(),X())}function Lo(n,e){return new jr(vi(n,e))}let jr=(()=>{class n{constructor(t){this.nativeElement=t}}return n.__NG_ELEMENT_ID__=nT,n})();function iT(n){return n instanceof jr?n.nativeElement:n}class gp{}let A2=(()=>{class n{}return n.__NG_ELEMENT_ID__=()=>function rT(){const n=X(),t=yi(Pn().index,n);return(gi(t)?t:n)[11]}(),n})(),sT=(()=>{class n{}return n.\u0275prov=Ae({token:n,providedIn:"root",factory:()=>null}),n})();class u3{constructor(e){this.full=e,this.major=e.split(".")[0],this.minor=e.split(".")[1],this.patch=e.split(".").slice(2).join(".")}}const oT=new u3("15.0.4"),A5={};function I5(n){return n.ngOriginalError}class Ro{constructor(){this._console=console}handleError(e){const t=this._findOriginalError(e);this._console.error("ERROR",e),t&&this._console.error("ORIGINAL ERROR",t)}_findOriginalError(e){let t=e&&I5(e);for(;t&&I5(t);)t=I5(t);return t||null}}function qr(n){return n instanceof Function?n():n}function yp(n,e,t){let i=n.length;for(;;){const r=n.indexOf(e,t);if(-1===r)return r;if(0===r||n.charCodeAt(r-1)<=32){const s=e.length;if(r+s===i||n.charCodeAt(r+s)<=32)return r}t=r+1}}const _p="ng-template";function vT(n,e,t){let i=0;for(;i<n.length;){let r=n[i++];if(t&&"class"===r){if(r=n[i],-1!==yp(r.toLowerCase(),e,0))return!0}else if(1===r){for(;i<n.length&&"string"==typeof(r=n[i++]);)if(r.toLowerCase()===e)return!0;return!1}}return!1}function xp(n){return 4===n.type&&n.value!==_p}function yT(n,e,t){return e===(4!==n.type||t?n.value:_p)}function _T(n,e,t){let i=4;const r=n.attrs||[],s=function MT(n){for(let e=0;e<n.length;e++)if(q7(n[e]))return e;return n.length}(r);let o=!1;for(let a=0;a<e.length;a++){const c=e[a];if("number"!=typeof c){if(!o)if(4&i){if(i=2|1&i,""!==c&&!yT(n,c,t)||""===c&&1===e.length){if(er(i))return!1;o=!0}}else{const l=8&i?c:e[++a];if(8&i&&null!==n.attrs){if(!vT(n.attrs,l,t)){if(er(i))return!1;o=!0}continue}const f=xT(8&i?"class":c,r,xp(n),t);if(-1===f){if(er(i))return!1;o=!0;continue}if(""!==l){let d;d=f>s?"":r[f+1].toLowerCase();const h=8&i?d:null;if(h&&-1!==yp(h,l,0)||2&i&&l!==d){if(er(i))return!1;o=!0}}}}else{if(!o&&!er(i)&&!er(c))return!1;if(o&&er(c))continue;o=!1,i=c|1&i}}return er(i)||o}function er(n){return 0==(1&n)}function xT(n,e,t,i){if(null===e)return-1;let r=0;if(i||!t){let s=!1;for(;r<e.length;){const o=e[r];if(o===n)return r;if(3===o||6===o)s=!0;else{if(1===o||2===o){let a=e[++r];for(;"string"==typeof a;)a=e[++r];continue}if(4===o)break;if(0===o){r+=4;continue}}r+=s?1:2}return-1}return function wT(n,e){let t=n.indexOf(4);if(t>-1)for(t++;t<n.length;){const i=n[t];if("number"==typeof i)return-1;if(i===e)return t;t++}return-1}(e,n)}function bp(n,e,t=!1){for(let i=0;i<e.length;i++)if(_T(n,e[i],t))return!0;return!1}function CT(n,e){e:for(let t=0;t<e.length;t++){const i=e[t];if(n.length===i.length){for(let r=0;r<n.length;r++)if(n[r]!==i[r])continue e;return!0}}return!1}function Mp(n,e){return n?":not("+e.trim()+")":e}function ST(n){let e=n[0],t=1,i=2,r="",s=!1;for(;t<n.length;){let o=n[t];if("string"==typeof o)if(2&i){const a=n[++t];r+="["+o+(a.length>0?'="'+a+'"':"")+"]"}else 8&i?r+="."+o:4&i&&(r+=" "+o);else""!==r&&!er(o)&&(e+=Mp(s,r),r=""),i=o,s=s||!er(i);t++}return""!==r&&(e+=Mp(s,r)),e}const Ye={};function Ft(n){wp(dt(),X(),Kn()+n,!1)}function wp(n,e,t,i){if(!i)if(3==(3&e[2])){const s=n.preOrderCheckHooks;null!==s&&Gl(e,s,t)}else{const s=n.preOrderHooks;null!==s&&Wl(e,s,0,t)}n1(t)}function Dp(n,e=null,t=null,i){const r=Ap(n,e,t,i);return r.resolveInjectorInitializers(),r}function Ap(n,e=null,t=null,i,r=new Set){const s=[t||_t,WA(n)];return i=i||("object"==typeof n?void 0:At(n)),new dp(s,e||l3(),i||null,r)}let tr=(()=>{class n{static create(t,i){if(Array.isArray(t))return Dp({name:""},i,t,"");{const r=t.name??"";return Dp({name:r},t.parent,t.providers,r)}}}return n.THROW_IF_NOT_FOUND=n2,n.NULL=new ap,n.\u0275prov=Ae({token:n,providedIn:"any",factory:()=>ue(sp)}),n.__NG_ELEMENT_ID__=-1,n})();function Ee(n,e=Fe.Default){const t=X();return null===t?ue(n,e):n9(Pn(),t,Oe(n),e)}function Op(n,e){const t=n.contentQueries;if(null!==t)for(let i=0;i<t.length;i+=2){const r=t[i],s=t[i+1];if(-1!==s){const o=n.data[s];N0(r),o.contentQueries(2,e[s],s)}}}function d3(n,e,t,i,r,s,o,a,c,l,u){const f=e.blueprint.slice();return f[0]=r,f[2]=76|i,(null!==u||n&&1024&n[2])&&(f[2]|=1024),z7(f),f[3]=f[15]=n,f[8]=t,f[10]=o||n&&n[10],f[11]=a||n&&n[11],f[12]=c||n&&n[12]||null,f[9]=l||n&&n[9]||null,f[6]=s,f[20]=function BD(){return UD++}(),f[21]=u,f[16]=2==e.type?n[16]:f,f}function No(n,e,t,i,r){let s=n.data[e];if(null===s)s=function N5(n,e,t,i,r){const s=O7(),o=L0(),c=n.data[e]=function KT(n,e,t,i,r,s){return{type:t,index:i,insertBeforeIndex:null,injectorIndex:e?e.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:0,providerIndexes:0,value:r,attrs:s,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tViews:null,next:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,o?s:s&&s.parent,t,e,i,r);return null===n.firstChild&&(n.firstChild=c),null!==s&&(o?null==s.child&&null!==c.parent&&(s.child=c):null===s.next&&(s.next=c)),c}(n,e,t,i,r),function jE(){return Ze.lFrame.inI18n}()&&(s.flags|=32);else if(64&s.type){s.type=t,s.value=i,s.attrs=r;const o=function f2(){const n=Ze.lFrame,e=n.currentTNode;return n.isParent?e:e.parent}();s.injectorIndex=null===o?-1:o.injectorIndex}return _r(s,!0),s}function T2(n,e,t,i){if(0===t)return-1;const r=e.length;for(let s=0;s<t;s++)e.push(i),n.blueprint.push(i),n.data.push(null);return r}function O5(n,e,t){O0(e);try{const i=n.viewQuery;null!==i&&j5(1,i,t);const r=n.template;null!==r&&Fp(n,e,r,1,t),n.firstCreatePass&&(n.firstCreatePass=!1),n.staticContentQueries&&Op(n,e),n.staticViewQueries&&j5(2,n.viewQuery,t);const s=n.components;null!==s&&function ZT(n,e){for(let t=0;t<e.length;t++)gI(n,e[t])}(e,s)}catch(i){throw n.firstCreatePass&&(n.incompleteFirstPass=!0,n.firstCreatePass=!1),i}finally{e[2]&=-5,F0()}}function h3(n,e,t,i){const r=e[2];if(128!=(128&r)){O0(e);try{z7(e),function k7(n){return Ze.lFrame.bindingIndex=n}(n.bindingStartIndex),null!==t&&Fp(n,e,t,2,i);const o=3==(3&r);if(o){const l=n.preOrderCheckHooks;null!==l&&Gl(e,l,null)}else{const l=n.preOrderHooks;null!==l&&Wl(e,l,0,null),k0(e,0)}if(function pI(n){for(let e=s5(n);null!==e;e=o5(e)){if(!e[2])continue;const t=e[9];for(let i=0;i<t.length;i++){const r=t[i],s=r[3];0==(512&r[2])&&A0(s,1),r[2]|=512}}}(e),function hI(n){for(let e=s5(n);null!==e;e=o5(e))for(let t=10;t<e.length;t++){const i=e[t],r=i[1];Ul(i)&&h3(r,i,r.template,i[8])}}(e),null!==n.contentQueries&&Op(n,e),o){const l=n.contentCheckHooks;null!==l&&Gl(e,l)}else{const l=n.contentHooks;null!==l&&Wl(e,l,1),k0(e,1)}!function jT(n,e){const t=n.hostBindingOpCodes;if(null!==t)try{for(let i=0;i<t.length;i++){const r=t[i];if(r<0)n1(~r);else{const s=r,o=t[++i],a=t[++i];qE(o,s),a(2,e[s])}}}finally{n1(-1)}}(n,e);const a=n.components;null!==a&&function qT(n,e){for(let t=0;t<e.length;t++)mI(n,e[t])}(e,a);const c=n.viewQuery;if(null!==c&&j5(2,c,i),o){const l=n.viewCheckHooks;null!==l&&Gl(e,l)}else{const l=n.viewHooks;null!==l&&Wl(e,l,2),k0(e,2)}!0===n.firstUpdatePass&&(n.firstUpdatePass=!1),e[2]&=-41,512&e[2]&&(e[2]&=-513,A0(e[3],-1))}finally{F0()}}}function Fp(n,e,t,i,r){const s=Kn(),o=2&i;try{n1(-1),o&&e.length>22&&wp(n,e,22,!1),t(i,r)}finally{n1(s)}}function F5(n,e,t){if(E0(e)){const r=e.directiveEnd;for(let s=e.directiveStart;s<r;s++){const o=n.data[s];o.contentQueries&&o.contentQueries(1,t[s],s)}}}function k5(n,e,t){!N7()||(function iI(n,e,t,i){const r=t.directiveStart,s=t.directiveEnd;u2(t)&&function uI(n,e,t){const i=vi(e,n),r=kp(t),s=n[10],o=p3(n,d3(n,r,null,t.onPush?32:16,i,e,s,s.createRenderer(i,t),null,null,null));n[e.index]=o}(e,t,n.data[r+t.componentOffset]),n.firstCreatePass||Zl(t,e),Hn(i,e);const o=t.initialInputs;for(let a=r;a<s;a++){const c=n.data[a],l=i1(e,n,a,t);Hn(l,e),null!==o&&fI(0,a-r,l,c,0,o),Qi(c)&&(yi(t.index,e)[8]=i1(e,n,a,t))}}(n,e,t,vi(t,e)),64==(64&t.flags)&&Wp(n,e,t))}function V5(n,e,t=vi){const i=e.localNames;if(null!==i){let r=e.index+1;for(let s=0;s<i.length;s+=2){const o=i[s+1],a=-1===o?t(e,n):n[o];n[r++]=a}}}function kp(n){const e=n.tView;return null===e||e.incompleteFirstPass?n.tView=H5(1,null,n.template,n.decls,n.vars,n.directiveDefs,n.pipeDefs,n.viewQuery,n.schemas,n.consts):e}function H5(n,e,t,i,r,s,o,a,c,l){const u=22+i,f=u+r,d=function YT(n,e){const t=[];for(let i=0;i<e;i++)t.push(i<n?null:Ye);return t}(u,f),h="function"==typeof l?l():l;return d[1]={type:n,blueprint:d,template:t,queries:null,viewQuery:a,declTNode:e,data:d.slice().fill(null,u),bindingStartIndex:u,expandoStartIndex:f,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof s?s():s,pipeRegistry:"function"==typeof o?o():o,firstChild:null,schemas:c,consts:h,incompleteFirstPass:!1}}function Vp(n,e,t,i){const r=jp(e);null===t?r.push(i):(r.push(t),n.firstCreatePass&&qp(n).push(i,r.length-1))}function Hp(n,e,t,i){for(let r in n)if(n.hasOwnProperty(r)){t=null===t?{}:t;const s=n[r];null===i?Up(t,e,r,s):i.hasOwnProperty(r)&&Up(t,e,i[r],s)}return t}function Up(n,e,t,i){n.hasOwnProperty(t)?n[t].push(e,i):n[t]=[e,i]}function bi(n,e,t,i,r,s,o,a){const c=vi(e,t);let u,l=e.inputs;!a&&null!=l&&(u=l[i])?(q5(n,t,u,i,r),u2(e)&&Bp(t,e.index)):3&e.type&&(i=function QT(n){return"class"===n?"className":"for"===n?"htmlFor":"formaction"===n?"formAction":"innerHtml"===n?"innerHTML":"readonly"===n?"readOnly":"tabindex"===n?"tabIndex":n}(i),r=null!=o?o(r,e.value||"",i):r,s.setProperty(c,i,r))}function Bp(n,e){const t=yi(e,n);16&t[2]||(t[2]|=32)}function U5(n,e,t,i){let r=!1;if(N7()){const s=null===i?null:{"":-1},o=function sI(n,e){const t=n.directiveRegistry;let i=null,r=null;if(t)for(let s=0;s<t.length;s++){const o=t[s];if(bp(e,o.selectors,!1))if(i||(i=[]),Qi(o))if(null!==o.findHostDirectiveDefs){const a=[];r=r||new Map,o.findHostDirectiveDefs(o,a,r),i.unshift(...a,o),B5(n,e,a.length)}else i.unshift(o),B5(n,e,0);else r=r||new Map,o.findHostDirectiveDefs?.(o,i,r),i.push(o)}return null===i?null:[i,r]}(n,t);let a,c;null===o?a=c=null:[a,c]=o,null!==a&&(r=!0,Gp(n,e,t,a,s,c)),s&&function oI(n,e,t){if(e){const i=n.localNames=[];for(let r=0;r<e.length;r+=2){const s=t[e[r+1]];if(null==s)throw new fe(-301,!1);i.push(e[r],s)}}}(t,i,s)}return t.mergedAttrs=h2(t.mergedAttrs,t.attrs),r}function Gp(n,e,t,i,r,s){for(let l=0;l<i.length;l++)W0(Zl(t,e),n,i[l].type);!function cI(n,e,t){n.flags|=1,n.directiveStart=e,n.directiveEnd=e+t,n.providerIndexes=e}(t,n.data.length,i.length);for(let l=0;l<i.length;l++){const u=i[l];u.providersResolver&&u.providersResolver(u)}let o=!1,a=!1,c=T2(n,e,i.length,null);for(let l=0;l<i.length;l++){const u=i[l];t.mergedAttrs=h2(t.mergedAttrs,u.hostAttrs),lI(n,t,e,c,u),aI(c,u,r),null!==u.contentQueries&&(t.flags|=4),(null!==u.hostBindings||null!==u.hostAttrs||0!==u.hostVars)&&(t.flags|=64);const f=u.type.prototype;!o&&(f.ngOnChanges||f.ngOnInit||f.ngDoCheck)&&((n.preOrderHooks||(n.preOrderHooks=[])).push(t.index),o=!0),!a&&(f.ngOnChanges||f.ngDoCheck)&&((n.preOrderCheckHooks||(n.preOrderCheckHooks=[])).push(t.index),a=!0),c++}!function JT(n,e,t){const r=e.directiveEnd,s=n.data,o=e.attrs,a=[];let c=null,l=null;for(let u=e.directiveStart;u<r;u++){const f=s[u],d=t?t.get(f):null,p=d?d.outputs:null;c=Hp(f.inputs,u,c,d?d.inputs:null),l=Hp(f.outputs,u,l,p);const g=null===c||null===o||xp(e)?null:dI(c,u,o);a.push(g)}null!==c&&(c.hasOwnProperty("class")&&(e.flags|=8),c.hasOwnProperty("style")&&(e.flags|=16)),e.initialInputs=a,e.inputs=c,e.outputs=l}(n,t,s)}function Wp(n,e,t){const i=t.directiveStart,r=t.directiveEnd,s=t.index,o=function ZE(){return Ze.lFrame.currentDirectiveIndex}();try{n1(s);for(let a=i;a<r;a++){const c=n.data[a],l=e[a];z0(a),(null!==c.hostBindings||0!==c.hostVars||null!==c.hostAttrs)&&rI(c,l)}}finally{n1(-1),z0(o)}}function rI(n,e){null!==n.hostBindings&&n.hostBindings(1,e)}function B5(n,e,t){e.componentOffset=t,(n.components||(n.components=[])).push(e.index)}function aI(n,e,t){if(t){if(e.exportAs)for(let i=0;i<e.exportAs.length;i++)t[e.exportAs[i]]=n;Qi(e)&&(t[""]=n)}}function lI(n,e,t,i,r){n.data[i]=r;const s=r.factory||(r.factory=t1(r.type)),o=new d2(s,Qi(r),Ee);n.blueprint[i]=o,t[i]=o,function tI(n,e,t,i,r){const s=r.hostBindings;if(s){let o=n.hostBindingOpCodes;null===o&&(o=n.hostBindingOpCodes=[]);const a=~e.index;(function nI(n){let e=n.length;for(;e>0;){const t=n[--e];if("number"==typeof t&&t<0)return t}return 0})(o)!=a&&o.push(a),o.push(t,i,s)}}(n,e,i,T2(n,t,r.hostVars,Ye),r)}function Mr(n,e,t,i,r,s){const o=vi(n,e);!function G5(n,e,t,i,r,s,o){if(null==s)n.removeAttribute(e,r,t);else{const a=null==o?qe(s):o(s,i||"",r);n.setAttribute(e,r,a,t)}}(e[11],o,s,n.value,t,i,r)}function fI(n,e,t,i,r,s){const o=s[e];if(null!==o){const a=i.setInput;for(let c=0;c<o.length;){const l=o[c++],u=o[c++],f=o[c++];null!==a?i.setInput(t,f,l,u):t[u]=f}}}function dI(n,e,t){let i=null,r=0;for(;r<t.length;){const s=t[r];if(0!==s)if(5!==s){if("number"==typeof s)break;if(n.hasOwnProperty(s)){null===i&&(i=[]);const o=n[s];for(let a=0;a<o.length;a+=2)if(o[a]===e){i.push(s,o[a+1],t[r+1]);break}}r+=2}else r+=2;else r+=4}return i}function $p(n,e,t,i){return[n,!0,!1,e,null,0,i,t,null,null]}function mI(n,e){const t=yi(e,n);if(Ul(t)){const i=t[1];48&t[2]?h3(i,t,i.template,t[8]):t[5]>0&&W5(t)}}function W5(n){for(let i=s5(n);null!==i;i=o5(i))for(let r=10;r<i.length;r++){const s=i[r];if(Ul(s))if(512&s[2]){const o=s[1];h3(o,s,o.template,s[8])}else s[5]>0&&W5(s)}const t=n[1].components;if(null!==t)for(let i=0;i<t.length;i++){const r=yi(t[i],n);Ul(r)&&r[5]>0&&W5(r)}}function gI(n,e){const t=yi(e,n),i=t[1];(function vI(n,e){for(let t=e.length;t<n.blueprint.length;t++)e.push(n.blueprint[t])})(i,t),O5(i,t,t[8])}function p3(n,e){return n[13]?n[14][4]=e:n[13]=e,n[14]=e,e}function $5(n){for(;n;){n[2]|=32;const e=w2(n);if(AE(n)&&!e)return n;n=e}return null}function m3(n,e,t,i=!0){const r=e[10];r.begin&&r.begin();try{h3(n,e,n.template,t)}catch(o){throw i&&Yp(e,o),o}finally{r.end&&r.end()}}function j5(n,e,t){N0(0),e(n,t)}function jp(n){return n[7]||(n[7]=[])}function qp(n){return n.cleanup||(n.cleanup=[])}function Yp(n,e){const t=n[9],i=t?t.get(Ro,null):null;i&&i.handleError(e)}function q5(n,e,t,i,r){for(let s=0;s<t.length;){const o=t[s++],a=t[s++],c=e[o],l=n.data[o];null!==l.setInput?l.setInput(c,r,i,a):c[a]=r}}function Zr(n,e,t){const i=function Hl(n,e){return zn(e[n])}(e,n);!function I9(n,e,t){n.setValue(e,t)}(n[11],i,t)}function g3(n,e,t){let i=t?n.styles:null,r=t?n.classes:null,s=0;if(null!==e)for(let o=0;o<e.length;o++){const a=e[o];"number"==typeof a?s=a:1==s?r=p0(r,a):2==s&&(i=p0(i,a+": "+e[++o]+";"))}t?n.styles=i:n.stylesWithoutHost=i,t?n.classes=r:n.classesWithoutHost=r}function v3(n,e,t,i,r=!1){for(;null!==t;){const s=e[t.index];if(null!==s&&i.push(zn(s)),Ji(s))for(let a=10;a<s.length;a++){const c=s[a],l=c[1].firstChild;null!==l&&v3(c[1],c,l,i)}const o=t.type;if(8&o)v3(n,e,t.child,i);else if(32&o){const a=r5(t,e);let c;for(;c=a();)i.push(c)}else if(16&o){const a=U9(e,t);if(Array.isArray(a))i.push(...a);else{const c=w2(e[16]);v3(c[1],c,a,i,!0)}}t=r?t.projectionNext:t.next}return i}class I2{constructor(e,t){this._lView=e,this._cdRefInjectingView=t,this._appRef=null,this._attachedToViewContainer=!1}get rootNodes(){const e=this._lView,t=e[1];return v3(t,e,t.firstChild,[])}get context(){return this._lView[8]}set context(e){this._lView[8]=e}get destroyed(){return 128==(128&this._lView[2])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const e=this._lView[3];if(Ji(e)){const t=e[8],i=t?t.indexOf(this):-1;i>-1&&(l5(e,i),Kl(t,i))}this._attachedToViewContainer=!1}R9(this._lView[1],this._lView)}onDestroy(e){Vp(this._lView[1],this._lView,null,e)}markForCheck(){$5(this._cdRefInjectingView||this._lView)}detach(){this._lView[2]&=-65}reattach(){this._lView[2]|=64}detectChanges(){m3(this._lView[1],this._lView,this.context)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new fe(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function iA(n,e){C2(n,e,e[11],2,null,null)}(this._lView[1],this._lView)}attachToAppRef(e){if(this._attachedToViewContainer)throw new fe(902,!1);this._appRef=e}}class yI extends I2{constructor(e){super(e),this._view=e}detectChanges(){const e=this._view;m3(e[1],e,e[8],!1)}checkNoChanges(){}get context(){return null}}class Xp extends D2{constructor(e){super(),this.ngModule=e}resolveComponentFactory(e){const t=wt(e);return new L2(t,this.ngModule)}}function Kp(n){const e=[];for(let t in n)n.hasOwnProperty(t)&&e.push({propName:n[t],templateName:t});return e}class xI{constructor(e,t){this.injector=e,this.parentInjector=t}get(e,t,i){i=zl(i);const r=this.injector.get(e,A5,i);return r!==A5||t===A5?r:this.parentInjector.get(e,t,i)}}class L2 extends pp{constructor(e,t){super(),this.componentDef=e,this.ngModule=t,this.componentType=e.type,this.selector=function ET(n){return n.map(ST).join(",")}(e.selectors),this.ngContentSelectors=e.ngContentSelectors?e.ngContentSelectors:[],this.isBoundToModule=!!t}get inputs(){return Kp(this.componentDef.inputs)}get outputs(){return Kp(this.componentDef.outputs)}create(e,t,i,r){let s=(r=r||this.ngModule)instanceof $r?r:r?.injector;s&&null!==this.componentDef.getStandaloneInjector&&(s=this.componentDef.getStandaloneInjector(s)||s);const o=s?new xI(e,s):e,a=o.get(gp,null);if(null===a)throw new fe(407,!1);const c=o.get(sT,null),l=a.createRenderer(null,this.componentDef),u=this.componentDef.selectors[0][0]||"div",f=i?function XT(n,e,t){return n.selectRootElement(e,t===gr.ShadowDom)}(l,i,this.componentDef.encapsulation):c5(l,u,function _I(n){const e=n.toLowerCase();return"svg"===e?"svg":"math"===e?"math":null}(u)),d=this.componentDef.onPush?288:272,h=H5(0,null,null,1,0,null,null,null,null,null),p=d3(null,h,null,d,null,null,a,l,c,o,null);let g,m;O0(p);try{const v=this.componentDef;let x,y=null;v.findHostDirectiveDefs?(x=[],y=new Map,v.findHostDirectiveDefs(v,x,y),x.push(v)):x=[v];const _=function MI(n,e){const t=n[1];return n[22]=e,No(t,22,2,"#host",null)}(p,f),M=function wI(n,e,t,i,r,s,o,a){const c=r[1];!function CI(n,e,t,i){for(const r of n)e.mergedAttrs=h2(e.mergedAttrs,r.hostAttrs);null!==e.mergedAttrs&&(g3(e,e.mergedAttrs,!0),null!==t&&W9(i,t,e))}(i,n,e,o);const l=s.createRenderer(e,t),u=d3(r,kp(t),null,t.onPush?32:16,r[n.index],n,s,l,a||null,null,null);return c.firstCreatePass&&B5(c,n,i.length-1),p3(r,u),r[n.index]=u}(_,f,v,x,p,a,l);m=R7(h,22),f&&function EI(n,e,t,i){if(i)H0(n,t,["ng-version",oT.full]);else{const{attrs:r,classes:s}=function DT(n){const e=[],t=[];let i=1,r=2;for(;i<n.length;){let s=n[i];if("string"==typeof s)2===r?""!==s&&e.push(s,n[++i]):8===r&&t.push(s);else{if(!er(r))break;r=s}i++}return{attrs:e,classes:t}}(e.selectors[0]);r&&H0(n,t,r),s&&s.length>0&&G9(n,t,s.join(" "))}}(l,v,f,i),void 0!==t&&function DI(n,e,t){const i=n.projection=[];for(let r=0;r<e.length;r++){const s=t[r];i.push(null!=s?Array.from(s):null)}}(m,this.ngContentSelectors,t),g=function SI(n,e,t,i,r,s){const o=Pn(),a=r[1],c=vi(o,r);Gp(a,r,o,t,null,i);for(let u=0;u<t.length;u++)Hn(i1(r,a,o.directiveStart+u,o),r);Wp(a,r,o),c&&Hn(c,r);const l=i1(r,a,o.directiveStart+o.componentOffset,o);if(n[8]=r[8]=l,null!==s)for(const u of s)u(l,e);return F5(a,o,n),l}(M,v,x,y,p,[AI]),O5(h,p,null)}finally{F0()}return new bI(this.componentType,g,Lo(m,p),p,m)}}class bI extends QA{constructor(e,t,i,r,s){super(),this.location=i,this._rootLView=r,this._tNode=s,this.instance=t,this.hostView=this.changeDetectorRef=new yI(r),this.componentType=e}setInput(e,t){const i=this._tNode.inputs;let r;if(null!==i&&(r=i[e])){const s=this._rootLView;q5(s[1],s,r,e,t),Bp(s,this._tNode.index)}}get injector(){return new bo(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(e){this.hostView.onDestroy(e)}}function AI(){const n=Pn();Bl(X()[1],n)}let y3=null;function l1(){if(!y3){const n=Lt.Symbol;if(n&&n.iterator)y3=n.iterator;else{const e=Object.getOwnPropertyNames(Map.prototype);for(let t=0;t<e.length;++t){const i=e[t];"entries"!==i&&"size"!==i&&Map.prototype[i]===Map.prototype.entries&&(y3=i)}}}return y3}function R2(n){return!!Y5(n)&&(Array.isArray(n)||!(n instanceof Map)&&l1()in n)}function Y5(n){return null!==n&&("function"==typeof n||"object"==typeof n)}function Un(n,e,t){return!Object.is(n[e],t)&&(n[e]=t,!0)}function x3(n,e,t,i){const r=X();return Un(r,_o(),e)&&(dt(),Mr(Wt(),r,n,e,t,i)),x3}function Fo(n,e,t,i){return Un(n,_o(),t)?e+qe(t)+i:Ye}function $o(n,e,t,i,r,s,o,a){const c=X(),l=dt(),u=n+22,f=l.firstCreatePass?function BI(n,e,t,i,r,s,o,a,c){const l=e.consts,u=No(e,n,4,o||null,bs(l,a));U5(e,t,u,bs(l,c)),Bl(e,u);const f=u.tViews=H5(2,u,i,r,s,e.directiveRegistry,e.pipeRegistry,null,e.schemas,l);return null!==e.queries&&(e.queries.template(e,u),f.queries=e.queries.embeddedTView(u)),u}(u,l,c,e,t,i,r,s,o):l.data[u];_r(f,!1);const d=c[11].createComment("");n3(l,c,d,f),Hn(d,c),p3(c,c[u]=$p(d,c,d,f)),Vl(f)&&k5(l,c,f),null!=o&&V5(c,f,a)}function vn(n,e,t){const i=X();return Un(i,_o(),e)&&bi(dt(),Wt(),i,n,e,i[11],t,!1),vn}function X5(n,e,t,i,r){const o=r?"class":"style";q5(n,t,e.inputs[o],o,i)}function We(n,e,t,i){const r=X(),s=dt(),o=22+n,a=r[11],c=r[o]=c5(a,e,function nD(){return Ze.lFrame.currentNamespace}()),l=s.firstCreatePass?function $I(n,e,t,i,r,s,o){const a=e.consts,l=No(e,n,2,r,bs(a,s));return U5(e,t,l,bs(a,o)),null!==l.attrs&&g3(l,l.attrs,!1),null!==l.mergedAttrs&&g3(l,l.mergedAttrs,!0),null!==e.queries&&e.queries.elementStart(e,l),l}(o,s,r,0,e,t,i):s.data[o];return _r(l,!0),W9(a,c,l),32!=(32&l.flags)&&n3(s,r,c,l),0===function HE(){return Ze.lFrame.elementDepthCount}()&&Hn(c,r),function UE(){Ze.lFrame.elementDepthCount++}(),Vl(l)&&(k5(s,r,l),F5(s,l,r)),null!==i&&V5(r,l),We}function ft(){let n=Pn();L0()?R0():(n=n.parent,_r(n,!1));const e=n;!function BE(){Ze.lFrame.elementDepthCount--}();const t=dt();return t.firstCreatePass&&(Bl(t,n),E0(n)&&t.queries.elementEnd(n)),null!=e.classesWithoutHost&&function oD(n){return 0!=(8&n.flags)}(e)&&X5(t,e,X(),e.classesWithoutHost,!0),null!=e.stylesWithoutHost&&function aD(n){return 0!=(16&n.flags)}(e)&&X5(t,e,X(),e.stylesWithoutHost,!1),ft}function cn(n,e,t,i){return We(n,e,t,i),ft(),cn}function Q5(){return X()}function b3(n){return!!n&&"function"==typeof n.then}function hm(n){return!!n&&"function"==typeof n.subscribe}const pm=hm;function ci(n,e,t,i){const r=X(),s=dt(),o=Pn();return function gm(n,e,t,i,r,s,o){const a=Vl(i),l=n.firstCreatePass&&qp(n),u=e[8],f=jp(e);let d=!0;if(3&i.type||o){const g=vi(i,e),m=o?o(g):g,v=f.length,x=o?_=>o(zn(_[i.index])):i.index;let y=null;if(!o&&a&&(y=function qI(n,e,t,i){const r=n.cleanup;if(null!=r)for(let s=0;s<r.length-1;s+=2){const o=r[s];if(o===t&&r[s+1]===i){const a=e[7],c=r[s+2];return a.length>c?a[c]:null}"string"==typeof o&&(s+=2)}return null}(n,e,r,i.index)),null!==y)(y.__ngLastListenerFn__||y).__ngNextListenerFn__=s,y.__ngLastListenerFn__=s,d=!1;else{s=ym(i,e,u,s,!1);const _=t.listen(m,r,s);f.push(s,_),l&&l.push(r,x,v,v+1)}}else s=ym(i,e,u,s,!1);const h=i.outputs;let p;if(d&&null!==h&&(p=h[r])){const g=p.length;if(g)for(let m=0;m<g;m+=2){const M=e[p[m]][p[m+1]].subscribe(s),w=f.length;f.push(s,M),l&&l.push(r,i.index,w,-(w+1))}}}(s,r,r[11],o,n,e,i),ci}function vm(n,e,t,i){try{return!1!==t(i)}catch(r){return Yp(n,r),!1}}function ym(n,e,t,i,r){return function s(o){if(o===Function)return i;$5(n.componentOffset>-1?yi(n.index,e):e);let c=vm(e,0,i,o),l=s.__ngNextListenerFn__;for(;l;)c=vm(e,0,l,o)&&c,l=l.__ngNextListenerFn__;return r&&!1===c&&(o.preventDefault(),o.returnValue=!1),c}}function M3(n=1){return function XE(n){return(Ze.lFrame.contextLView=function KE(n,e){for(;n>0;)e=e[15],n--;return e}(n,Ze.lFrame.contextLView))[8]}(n)}function ZI(n,e){let t=null;const i=function bT(n){const e=n.attrs;if(null!=e){const t=e.indexOf(5);if(0==(1&t))return e[t+1]}return null}(n);for(let r=0;r<e.length;r++){const s=e[r];if("*"!==s){if(null===i?bp(n,s,!0):CT(i,s))return r}else t=r}return t}function ws(n,e,t){return ef(n,"",e,"",t),ws}function ef(n,e,t,i,r){const s=X(),o=Fo(s,e,t,i);return o!==Ye&&bi(dt(),Wt(),s,n,o,s[11],r,!1),ef}function zt(n,e=""){const t=X(),i=dt(),r=n+22,s=i.firstCreatePass?No(i,r,1,e,null):i.data[r],o=t[r]=function a5(n,e){return n.createText(e)}(t[11],e);n3(i,t,o,s),_r(s,!1)}function af(n){return S3("",n,""),af}function S3(n,e,t){const i=X(),r=Fo(i,n,e,t);return r!==Ye&&Zr(i,Kn(),r),S3}function cf(n,e,t){const i=X();return Un(i,_o(),e)&&bi(dt(),Wt(),i,n,e,i[11],t,!0),cf}const Zo="en-US";let ug=Zo;class Yo{}class Og{}class Fg extends Yo{constructor(e,t){super(),this._parent=t,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new Xp(this);const i=mi(e);this._bootstrapComponents=qr(i.bootstrap),this._r3Injector=Ap(e,t,[{provide:Yo,useValue:this},{provide:D2,useValue:this.componentFactoryResolver}],At(e),new Set(["environment"])),this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(e)}get injector(){return this._r3Injector}destroy(){const e=this._r3Injector;!e.destroyed&&e.destroy(),this.destroyCbs.forEach(t=>t()),this.destroyCbs=null}onDestroy(e){this.destroyCbs.push(e)}}class mf extends Og{constructor(e){super(),this.moduleType=e}create(e){return new Fg(this.moduleType,e)}}class OR extends Yo{constructor(e,t,i){super(),this.componentFactoryResolver=new Xp(this),this.instance=null;const r=new dp([...e,{provide:Yo,useValue:this},{provide:D2,useValue:this.componentFactoryResolver}],t||l3(),i,new Set(["environment"]));this.injector=r,r.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(e){this.injector.onDestroy(e)}}function I3(n,e,t=null){return new OR(n,e,t).injector}let FR=(()=>{class n{constructor(t){this._injector=t,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(t){if(!t.standalone)return null;if(!this.cachedInjectors.has(t.id)){const i=cp(0,t.type),r=i.length>0?I3([i],this._injector,`Standalone[${t.type.name}]`):null;this.cachedInjectors.set(t.id,r)}return this.cachedInjectors.get(t.id)}ngOnDestroy(){try{for(const t of this.cachedInjectors.values())null!==t&&t.destroy()}finally{this.cachedInjectors.clear()}}}return n.\u0275prov=Ae({token:n,providedIn:"environment",factory:()=>new n(ue($r))}),n})();function kg(n){n.getStandaloneInjector=e=>e.get(FR).getOrCreateStandaloneInjector(n)}function h1(n,e,t,i){return $g(X(),Xn(),n,e,t,i)}function $g(n,e,t,i,r,s){const o=e+t;return Un(n,o,r)?function wr(n,e,t){return n[e]=t}(n,o+1,s?i.call(s,r):i(r)):function H2(n,e){const t=n[e];return t===Ye?void 0:t}(n,o+1)}function Fi(n,e){const t=dt();let i;const r=n+22;t.firstCreatePass?(i=function tz(n,e){if(e)for(let t=e.length-1;t>=0;t--){const i=e[t];if(n===i.name)return i}}(e,t.pipeRegistry),t.data[r]=i,i.onDestroy&&(t.destroyHooks||(t.destroyHooks=[])).push(r,i.onDestroy)):i=t.data[r];const s=i.factory||(i.factory=t1(i.type)),o=Ri(Ee);try{const a=ql(!1),c=s();return ql(a),function GI(n,e,t,i){t>=n.data.length&&(n.data[t]=null,n.blueprint[t]=null),e[t]=i}(t,X(),r,c),c}finally{Ri(o)}}function ki(n,e,t){const i=n+22,r=X(),s=function yo(n,e){return n[e]}(r,i);return function U2(n,e){return n[1].data[e].pure}(r,i)?$g(r,Xn(),e,s.transform,t,s):s.transform(t)}function vf(n){return e=>{setTimeout(n,void 0,e)}}const Bn=class oz extends mr{constructor(e=!1){super(),this.__isAsync=e}emit(e){super.next(e)}subscribe(e,t,i){let r=e,s=t||(()=>null),o=i;if(e&&"object"==typeof e){const c=e;r=c.next?.bind(c),s=c.error?.bind(c),o=c.complete?.bind(c)}this.__isAsync&&(s=vf(s),r&&(r=vf(r)),o&&(o=vf(o)));const a=super.subscribe({next:r,error:s,complete:o});return e instanceof hi&&e.add(a),a}};function az(){return this._results[l1()]()}class yf{constructor(e=!1){this._emitDistinctChangesOnly=e,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const t=l1(),i=yf.prototype;i[t]||(i[t]=az)}get changes(){return this._changes||(this._changes=new Bn)}get(e){return this._results[e]}map(e){return this._results.map(e)}filter(e){return this._results.filter(e)}find(e){return this._results.find(e)}reduce(e,t){return this._results.reduce(e,t)}forEach(e){this._results.forEach(e)}some(e){return this._results.some(e)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(e,t){const i=this;i.dirty=!1;const r=function Ni(n){return n.flat(Number.POSITIVE_INFINITY)}(e);(this._changesDetected=!function vD(n,e,t){if(n.length!==e.length)return!1;for(let i=0;i<n.length;i++){let r=n[i],s=e[i];if(t&&(r=t(r),s=t(s)),s!==r)return!1}return!0}(i._results,r,t))&&(i._results=r,i.length=r.length,i.last=r[this.length-1],i.first=r[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}let Yr=(()=>{class n{}return n.__NG_ELEMENT_ID__=uz,n})();const cz=Yr,lz=class extends cz{constructor(e,t,i){super(),this._declarationLView=e,this._declarationTContainer=t,this.elementRef=i}createEmbeddedView(e,t){const i=this._declarationTContainer.tViews,r=d3(this._declarationLView,i,e,16,null,i.declTNode,null,null,null,null,t||null);r[17]=this._declarationLView[this._declarationTContainer.index];const o=this._declarationLView[19];return null!==o&&(r[19]=o.createEmbeddedView(i)),O5(i,r,e),new I2(r)}};function uz(){return L3(Pn(),X())}function L3(n,e){return 4&n.type?new lz(e,n,Lo(n,e)):null}let rr=(()=>{class n{}return n.__NG_ELEMENT_ID__=fz,n})();function fz(){return Jg(Pn(),X())}const dz=rr,Xg=class extends dz{constructor(e,t,i){super(),this._lContainer=e,this._hostTNode=t,this._hostLView=i}get element(){return Lo(this._hostTNode,this._hostLView)}get injector(){return new bo(this._hostTNode,this._hostLView)}get parentInjector(){const e=G0(this._hostTNode,this._hostLView);if(X7(e)){const t=jl(e,this._hostLView),i=$l(e);return new bo(t[1].data[i+8],t)}return new bo(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(e){const t=Kg(this._lContainer);return null!==t&&t[e]||null}get length(){return this._lContainer.length-10}createEmbeddedView(e,t,i){let r,s;"number"==typeof i?r=i:null!=i&&(r=i.index,s=i.injector);const o=e.createEmbeddedView(t||{},s);return this.insert(o,r),o}createComponent(e,t,i,r,s){const o=e&&!function m2(n){return"function"==typeof n}(e);let a;if(o)a=t;else{const f=t||{};a=f.index,i=f.injector,r=f.projectableNodes,s=f.environmentInjector||f.ngModuleRef}const c=o?e:new L2(wt(e)),l=i||this.parentInjector;if(!s&&null==c.ngModule){const d=(o?l:this.parentInjector).get($r,null);d&&(s=d)}const u=c.create(l,r,void 0,s);return this.insert(u.hostView,a),u}insert(e,t){const i=e._lView,r=i[1];if(function VE(n){return Ji(n[3])}(i)){const u=this.indexOf(e);if(-1!==u)this.detach(u);else{const f=i[3],d=new Xg(f,f[6],f[3]);d.detach(d.indexOf(e))}}const s=this._adjustIndex(t),o=this._lContainer;!function sA(n,e,t,i){const r=10+i,s=t.length;i>0&&(t[r-1][4]=e),i<s-10?(e[4]=t[r],c9(t,10+i,e)):(t.push(e),e[4]=null),e[3]=t;const o=e[17];null!==o&&t!==o&&function oA(n,e){const t=n[9];e[16]!==e[3][3][16]&&(n[2]=!0),null===t?n[9]=[e]:t.push(e)}(o,e);const a=e[19];null!==a&&a.insertView(n),e[2]|=64}(r,i,o,s);const a=d5(s,o),c=i[11],l=t3(c,o[7]);return null!==l&&function nA(n,e,t,i,r,s){i[0]=r,i[6]=e,C2(n,i,t,1,r,s)}(r,o[6],c,i,l,a),e.attachToViewContainerRef(),c9(_f(o),s,e),e}move(e,t){return this.insert(e,t)}indexOf(e){const t=Kg(this._lContainer);return null!==t?t.indexOf(e):-1}remove(e){const t=this._adjustIndex(e,-1),i=l5(this._lContainer,t);i&&(Kl(_f(this._lContainer),t),R9(i[1],i))}detach(e){const t=this._adjustIndex(e,-1),i=l5(this._lContainer,t);return i&&null!=Kl(_f(this._lContainer),t)?new I2(i):null}_adjustIndex(e,t=0){return e??this.length+t}};function Kg(n){return n[8]}function _f(n){return n[8]||(n[8]=[])}function Jg(n,e){let t;const i=e[n.index];if(Ji(i))t=i;else{let r;if(8&n.type)r=zn(i);else{const s=e[11];r=s.createComment("");const o=vi(n,e);s1(s,t3(s,o),r,function uA(n,e){return n.nextSibling(e)}(s,o),!1)}e[n.index]=t=$p(i,e,r,n),p3(e,t)}return new Xg(t,n,e)}class xf{constructor(e){this.queryList=e,this.matches=null}clone(){return new xf(this.queryList)}setDirty(){this.queryList.setDirty()}}class bf{constructor(e=[]){this.queries=e}createEmbeddedView(e){const t=e.queries;if(null!==t){const i=null!==e.contentQueries?e.contentQueries[0]:t.length,r=[];for(let s=0;s<i;s++){const o=t.getByIndex(s);r.push(this.queries[o.indexInDeclarationView].clone())}return new bf(r)}return null}insertView(e){this.dirtyQueriesWithMatches(e)}detachView(e){this.dirtyQueriesWithMatches(e)}dirtyQueriesWithMatches(e){for(let t=0;t<this.queries.length;t++)null!==sv(e,t).matches&&this.queries[t].setDirty()}}class Qg{constructor(e,t,i=null){this.predicate=e,this.flags=t,this.read=i}}class Mf{constructor(e=[]){this.queries=e}elementStart(e,t){for(let i=0;i<this.queries.length;i++)this.queries[i].elementStart(e,t)}elementEnd(e){for(let t=0;t<this.queries.length;t++)this.queries[t].elementEnd(e)}embeddedTView(e){let t=null;for(let i=0;i<this.length;i++){const r=null!==t?t.length:0,s=this.getByIndex(i).embeddedTView(e,r);s&&(s.indexInDeclarationView=i,null!==t?t.push(s):t=[s])}return null!==t?new Mf(t):null}template(e,t){for(let i=0;i<this.queries.length;i++)this.queries[i].template(e,t)}getByIndex(e){return this.queries[e]}get length(){return this.queries.length}track(e){this.queries.push(e)}}class wf{constructor(e,t=-1){this.metadata=e,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=t}elementStart(e,t){this.isApplyingToNode(t)&&this.matchTNode(e,t)}elementEnd(e){this._declarationNodeIndex===e.index&&(this._appliesToNextNode=!1)}template(e,t){this.elementStart(e,t)}embeddedTView(e,t){return this.isApplyingToNode(e)?(this.crossesNgTemplate=!0,this.addMatch(-e.index,t),new wf(this.metadata)):null}isApplyingToNode(e){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const t=this._declarationNodeIndex;let i=e.parent;for(;null!==i&&8&i.type&&i.index!==t;)i=i.parent;return t===(null!==i?i.index:-1)}return this._appliesToNextNode}matchTNode(e,t){const i=this.metadata.predicate;if(Array.isArray(i))for(let r=0;r<i.length;r++){const s=i[r];this.matchTNodeWithReadOption(e,t,hz(t,s)),this.matchTNodeWithReadOption(e,t,Yl(t,e,s,!1,!1))}else i===Yr?4&t.type&&this.matchTNodeWithReadOption(e,t,-1):this.matchTNodeWithReadOption(e,t,Yl(t,e,i,!1,!1))}matchTNodeWithReadOption(e,t,i){if(null!==i){const r=this.metadata.read;if(null!==r)if(r===jr||r===rr||r===Yr&&4&t.type)this.addMatch(t.index,-2);else{const s=Yl(t,e,r,!1,!1);null!==s&&this.addMatch(t.index,s)}else this.addMatch(t.index,i)}}addMatch(e,t){null===this.matches?this.matches=[e,t]:this.matches.push(e,t)}}function hz(n,e){const t=n.localNames;if(null!==t)for(let i=0;i<t.length;i+=2)if(t[i]===e)return t[i+1];return null}function mz(n,e,t,i){return-1===t?function pz(n,e){return 11&n.type?Lo(n,e):4&n.type?L3(n,e):null}(e,n):-2===t?function gz(n,e,t){return t===jr?Lo(e,n):t===Yr?L3(e,n):t===rr?Jg(e,n):void 0}(n,e,i):i1(n,n[1],t,e)}function ev(n,e,t,i){const r=e[19].queries[i];if(null===r.matches){const s=n.data,o=t.matches,a=[];for(let c=0;c<o.length;c+=2){const l=o[c];a.push(l<0?null:mz(e,s[l],o[c+1],t.metadata.read))}r.matches=a}return r.matches}function Cf(n,e,t,i){const r=n.queries.getByIndex(t),s=r.matches;if(null!==s){const o=ev(n,e,r,t);for(let a=0;a<s.length;a+=2){const c=s[a];if(c>0)i.push(o[a/2]);else{const l=s[a+1],u=e[-c];for(let f=10;f<u.length;f++){const d=u[f];d[17]===d[3]&&Cf(d[1],d,l,i)}if(null!==u[9]){const f=u[9];for(let d=0;d<f.length;d++){const h=f[d];Cf(h[1],h,l,i)}}}}}return i}function Sf(n){const e=X(),t=dt(),i=H7();N0(i+1);const r=sv(t,i);if(n.dirty&&function kE(n){return 4==(4&n[2])}(e)===(2==(2&r.metadata.flags))){if(null===r.matches)n.reset([]);else{const s=r.crossesNgTemplate?Cf(t,e,i,[]):ev(t,e,r,i);n.reset(s,iT),n.notifyOnChanges()}return!0}return!1}function tv(n,e,t){const i=dt();i.firstCreatePass&&(function rv(n,e,t){null===n.queries&&(n.queries=new Mf),n.queries.track(new wf(e,t))}(i,new Qg(n,e,t),-1),2==(2&e)&&(i.staticViewQueries=!0)),function iv(n,e,t){const i=new yf(4==(4&t));Vp(n,e,i,i.destroy),null===e[19]&&(e[19]=new bf),e[19].queries.push(new xf(i))}(i,X(),e)}function sv(n,e){return n.queries.getByIndex(e)}function z3(...n){}const P3=new oe("Application Initializer");let N3=(()=>{class n{constructor(t){this.appInits=t,this.resolve=z3,this.reject=z3,this.initialized=!1,this.done=!1,this.donePromise=new Promise((i,r)=>{this.resolve=i,this.reject=r})}runInitializers(){if(this.initialized)return;const t=[],i=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let r=0;r<this.appInits.length;r++){const s=this.appInits[r]();if(b3(s))t.push(s);else if(pm(s)){const o=new Promise((a,c)=>{s.subscribe({complete:a,error:c})});t.push(o)}}Promise.all(t).then(()=>{i()}).catch(r=>{this.reject(r)}),0===t.length&&i(),this.initialized=!0}}return n.\u0275fac=function(t){return new(t||n)(ue(P3,8))},n.\u0275prov=Ae({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const G2=new oe("AppId",{providedIn:"root",factory:function Cv(){return`${Lf()}${Lf()}${Lf()}`}});function Lf(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const Sv=new oe("Platform Initializer"),Ev=new oe("Platform ID",{providedIn:"platform",factory:()=>"unknown"}),Dv=new oe("appBootstrapListener");let Vz=(()=>{class n{log(t){console.log(t)}warn(t){console.warn(t)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=Ae({token:n,factory:n.\u0275fac,providedIn:"platform"}),n})();const Xr=new oe("LocaleId",{providedIn:"root",factory:()=>Re(Xr,Fe.Optional|Fe.SkipSelf)||function Hz(){return typeof $localize<"u"&&$localize.locale||Zo}()});class Bz{constructor(e,t){this.ngModuleFactory=e,this.componentFactories=t}}let Av=(()=>{class n{compileModuleSync(t){return new mf(t)}compileModuleAsync(t){return Promise.resolve(this.compileModuleSync(t))}compileModuleAndAllComponentsSync(t){const i=this.compileModuleSync(t),s=qr(mi(t).declarations).reduce((o,a)=>{const c=wt(a);return c&&o.push(new L2(c)),o},[]);return new Bz(i,s)}compileModuleAndAllComponentsAsync(t){return Promise.resolve(this.compileModuleAndAllComponentsSync(t))}clearCache(){}clearCacheFor(t){}getModuleId(t){}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=Ae({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const $z=(()=>Promise.resolve(0))();function Rf(n){typeof Zone>"u"?$z.then(()=>{n&&n.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",n)}class tn{constructor({enableLongStackTrace:e=!1,shouldCoalesceEventChangeDetection:t=!1,shouldCoalesceRunChangeDetection:i=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new Bn(!1),this.onMicrotaskEmpty=new Bn(!1),this.onStable=new Bn(!1),this.onError=new Bn(!1),typeof Zone>"u")throw new fe(908,!1);Zone.assertZonePatched();const r=this;r._nesting=0,r._outer=r._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(r._inner=r._inner.fork(new Zone.TaskTrackingZoneSpec)),e&&Zone.longStackTraceZoneSpec&&(r._inner=r._inner.fork(Zone.longStackTraceZoneSpec)),r.shouldCoalesceEventChangeDetection=!i&&t,r.shouldCoalesceRunChangeDetection=i,r.lastRequestAnimationFrameId=-1,r.nativeRequestAnimationFrame=function jz(){let n=Lt.requestAnimationFrame,e=Lt.cancelAnimationFrame;if(typeof Zone<"u"&&n&&e){const t=n[Zone.__symbol__("OriginalDelegate")];t&&(n=t);const i=e[Zone.__symbol__("OriginalDelegate")];i&&(e=i)}return{nativeRequestAnimationFrame:n,nativeCancelAnimationFrame:e}}().nativeRequestAnimationFrame,function Yz(n){const e=()=>{!function Zz(n){n.isCheckStableRunning||-1!==n.lastRequestAnimationFrameId||(n.lastRequestAnimationFrameId=n.nativeRequestAnimationFrame.call(Lt,()=>{n.fakeTopEventTask||(n.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{n.lastRequestAnimationFrameId=-1,Pf(n),n.isCheckStableRunning=!0,zf(n),n.isCheckStableRunning=!1},void 0,()=>{},()=>{})),n.fakeTopEventTask.invoke()}),Pf(n))}(n)};n._inner=n._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(t,i,r,s,o,a)=>{try{return Lv(n),t.invokeTask(r,s,o,a)}finally{(n.shouldCoalesceEventChangeDetection&&"eventTask"===s.type||n.shouldCoalesceRunChangeDetection)&&e(),Rv(n)}},onInvoke:(t,i,r,s,o,a,c)=>{try{return Lv(n),t.invoke(r,s,o,a,c)}finally{n.shouldCoalesceRunChangeDetection&&e(),Rv(n)}},onHasTask:(t,i,r,s)=>{t.hasTask(r,s),i===r&&("microTask"==s.change?(n._hasPendingMicrotasks=s.microTask,Pf(n),zf(n)):"macroTask"==s.change&&(n.hasPendingMacrotasks=s.macroTask))},onHandleError:(t,i,r,s)=>(t.handleError(r,s),n.runOutsideAngular(()=>n.onError.emit(s)),!1)})}(r)}static isInAngularZone(){return typeof Zone<"u"&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!tn.isInAngularZone())throw new fe(909,!1)}static assertNotInAngularZone(){if(tn.isInAngularZone())throw new fe(909,!1)}run(e,t,i){return this._inner.run(e,t,i)}runTask(e,t,i,r){const s=this._inner,o=s.scheduleEventTask("NgZoneEvent: "+r,e,qz,z3,z3);try{return s.runTask(o,t,i)}finally{s.cancelTask(o)}}runGuarded(e,t,i){return this._inner.runGuarded(e,t,i)}runOutsideAngular(e){return this._outer.run(e)}}const qz={};function zf(n){if(0==n._nesting&&!n.hasPendingMicrotasks&&!n.isStable)try{n._nesting++,n.onMicrotaskEmpty.emit(null)}finally{if(n._nesting--,!n.hasPendingMicrotasks)try{n.runOutsideAngular(()=>n.onStable.emit(null))}finally{n.isStable=!0}}}function Pf(n){n.hasPendingMicrotasks=!!(n._hasPendingMicrotasks||(n.shouldCoalesceEventChangeDetection||n.shouldCoalesceRunChangeDetection)&&-1!==n.lastRequestAnimationFrameId)}function Lv(n){n._nesting++,n.isStable&&(n.isStable=!1,n.onUnstable.emit(null))}function Rv(n){n._nesting--,zf(n)}class Xz{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new Bn,this.onMicrotaskEmpty=new Bn,this.onStable=new Bn,this.onError=new Bn}run(e,t,i){return e.apply(t,i)}runGuarded(e,t,i){return e.apply(t,i)}runOutsideAngular(e){return e()}runTask(e,t,i,r){return e.apply(t,i)}}const zv=new oe(""),O3=new oe("");let Ff,Nf=(()=>{class n{constructor(t,i,r){this._ngZone=t,this.registry=i,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,Ff||(function Kz(n){Ff=n}(r),r.addToWindow(i)),this._watchAngularEvents(),t.run(()=>{this.taskTrackingZone=typeof Zone>"u"?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{tn.assertNotInAngularZone(),Rf(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())Rf(()=>{for(;0!==this._callbacks.length;){let t=this._callbacks.pop();clearTimeout(t.timeoutId),t.doneCb(this._didWork)}this._didWork=!1});else{let t=this.getPendingTasks();this._callbacks=this._callbacks.filter(i=>!i.updateCb||!i.updateCb(t)||(clearTimeout(i.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(t=>({source:t.source,creationLocation:t.creationLocation,data:t.data})):[]}addCallback(t,i,r){let s=-1;i&&i>0&&(s=setTimeout(()=>{this._callbacks=this._callbacks.filter(o=>o.timeoutId!==s),t(this._didWork,this.getPendingTasks())},i)),this._callbacks.push({doneCb:t,timeoutId:s,updateCb:r})}whenStable(t,i,r){if(r&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(t,i,r),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}registerApplication(t){this.registry.registerApplication(t,this)}unregisterApplication(t){this.registry.unregisterApplication(t)}findProviders(t,i,r){return[]}}return n.\u0275fac=function(t){return new(t||n)(ue(tn),ue(Of),ue(O3))},n.\u0275prov=Ae({token:n,factory:n.\u0275fac}),n})(),Of=(()=>{class n{constructor(){this._applications=new Map}registerApplication(t,i){this._applications.set(t,i)}unregisterApplication(t){this._applications.delete(t)}unregisterAllApplications(){this._applications.clear()}getTestability(t){return this._applications.get(t)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(t,i=!0){return Ff?.findTestabilityInTree(this,t,i)??null}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=Ae({token:n,factory:n.\u0275fac,providedIn:"platform"}),n})(),Ss=null;const Pv=new oe("AllowMultipleToken"),kf=new oe("PlatformDestroyListeners");class Nv{constructor(e,t){this.name=e,this.token=t}}function Fv(n,e,t=[]){const i=`Platform: ${e}`,r=new oe(i);return(s=[])=>{let o=Vf();if(!o||o.injector.get(Pv,!1)){const a=[...t,...s,{provide:r,useValue:!0}];n?n(a):function eP(n){if(Ss&&!Ss.get(Pv,!1))throw new fe(400,!1);Ss=n;const e=n.get(Vv);(function Ov(n){const e=n.get(Sv,null);e&&e.forEach(t=>t())})(n)}(function kv(n=[],e){return tr.create({name:e,providers:[{provide:C5,useValue:"platform"},{provide:kf,useValue:new Set([()=>Ss=null])},...n]})}(a,i))}return function nP(n){const e=Vf();if(!e)throw new fe(401,!1);return e}()}}function Vf(){return Ss?.get(Vv)??null}let Vv=(()=>{class n{constructor(t){this._injector=t,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(t,i){const r=function Uv(n,e){let t;return t="noop"===n?new Xz:("zone.js"===n?void 0:n)||new tn(e),t}(i?.ngZone,function Hv(n){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:!(!n||!n.ngZoneEventCoalescing)||!1,shouldCoalesceRunChangeDetection:!(!n||!n.ngZoneRunCoalescing)||!1}}(i)),s=[{provide:tn,useValue:r}];return r.run(()=>{const o=tr.create({providers:s,parent:this.injector,name:t.moduleType.name}),a=t.create(o),c=a.injector.get(Ro,null);if(!c)throw new fe(402,!1);return r.runOutsideAngular(()=>{const l=r.onError.subscribe({next:u=>{c.handleError(u)}});a.onDestroy(()=>{k3(this._modules,a),l.unsubscribe()})}),function Bv(n,e,t){try{const i=t();return b3(i)?i.catch(r=>{throw e.runOutsideAngular(()=>n.handleError(r)),r}):i}catch(i){throw e.runOutsideAngular(()=>n.handleError(i)),i}}(c,r,()=>{const l=a.injector.get(N3);return l.runInitializers(),l.donePromise.then(()=>(function fg(n){Ii(n,"Expected localeId to be defined"),"string"==typeof n&&(ug=n.toLowerCase().replace(/_/g,"-"))}(a.injector.get(Xr,Zo)||Zo),this._moduleDoBootstrap(a),a))})})}bootstrapModule(t,i=[]){const r=Gv({},i);return function Jz(n,e,t){const i=new mf(t);return Promise.resolve(i)}(0,0,t).then(s=>this.bootstrapModuleFactory(s,r))}_moduleDoBootstrap(t){const i=t.injector.get(F3);if(t._bootstrapComponents.length>0)t._bootstrapComponents.forEach(r=>i.bootstrap(r));else{if(!t.instance.ngDoBootstrap)throw new fe(403,!1);t.instance.ngDoBootstrap(i)}this._modules.push(t)}onDestroy(t){this._destroyListeners.push(t)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new fe(404,!1);this._modules.slice().forEach(i=>i.destroy()),this._destroyListeners.forEach(i=>i());const t=this._injector.get(kf,null);t&&(t.forEach(i=>i()),t.clear()),this._destroyed=!0}get destroyed(){return this._destroyed}}return n.\u0275fac=function(t){return new(t||n)(ue(tr))},n.\u0275prov=Ae({token:n,factory:n.\u0275fac,providedIn:"platform"}),n})();function Gv(n,e){return Array.isArray(e)?e.reduce(Gv,n):{...n,...e}}let F3=(()=>{class n{constructor(t,i,r){this._zone=t,this._injector=i,this._exceptionHandler=r,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this._destroyed=!1,this._destroyListeners=[],this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const s=new qt(a=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{a.next(this._stable),a.complete()})}),o=new qt(a=>{let c;this._zone.runOutsideAngular(()=>{c=this._zone.onStable.subscribe(()=>{tn.assertNotInAngularZone(),Rf(()=>{!this._stable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks&&(this._stable=!0,a.next(!0))})})});const l=this._zone.onUnstable.subscribe(()=>{tn.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{a.next(!1)}))});return()=>{c.unsubscribe(),l.unsubscribe()}});this.isStable=function sE(...n){const e=t2(n),t=function JS(n,e){return"number"==typeof u0(n)?n.pop():e}(n,1/0),i=n;return i.length?1===i.length?Zi(i[0]):uo(t)(mn(i,e)):kr}(s,o.pipe(function oE(n={}){const{connector:e=(()=>new mr),resetOnError:t=!0,resetOnComplete:i=!0,resetOnRefCountZero:r=!0}=n;return s=>{let o,a,c,l=0,u=!1,f=!1;const d=()=>{a?.unsubscribe(),a=void 0},h=()=>{d(),o=c=void 0,u=f=!1},p=()=>{const g=o;h(),g?.unsubscribe()};return an((g,m)=>{l++,!f&&!u&&d();const v=c=c??e();m.add(()=>{l--,0===l&&!f&&!u&&(a=d0(p,r))}),v.subscribe(m),!o&&l>0&&(o=new e2({next:x=>v.next(x),error:x=>{f=!0,d(),a=d0(h,t,x),v.error(x)},complete:()=>{u=!0,d(),a=d0(h,i),v.complete()}}),Zi(g).subscribe(o))})(s)}}()))}get destroyed(){return this._destroyed}get injector(){return this._injector}bootstrap(t,i){const r=t instanceof pp;if(!this._injector.get(N3).done)throw!r&&function ho(n){const e=wt(n)||Fn(n)||Zn(n);return null!==e&&e.standalone}(t),new fe(405,false);let o;o=r?t:this._injector.get(D2).resolveComponentFactory(t),this.componentTypes.push(o.componentType);const a=function Qz(n){return n.isBoundToModule}(o)?void 0:this._injector.get(Yo),l=o.create(tr.NULL,[],i||o.selector,a),u=l.location.nativeElement,f=l.injector.get(zv,null);return f?.registerApplication(u),l.onDestroy(()=>{this.detachView(l.hostView),k3(this.components,l),f?.unregisterApplication(u)}),this._loadComponent(l),l}tick(){if(this._runningTick)throw new fe(101,!1);try{this._runningTick=!0;for(let t of this._views)t.detectChanges()}catch(t){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(t))}finally{this._runningTick=!1}}attachView(t){const i=t;this._views.push(i),i.attachToAppRef(this)}detachView(t){const i=t;k3(this._views,i),i.detachFromAppRef()}_loadComponent(t){this.attachView(t.hostView),this.tick(),this.components.push(t);const i=this._injector.get(Dv,[]);i.push(...this._bootstrapListeners),i.forEach(r=>r(t))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(t=>t()),this._views.slice().forEach(t=>t.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(t){return this._destroyListeners.push(t),()=>k3(this._destroyListeners,t)}destroy(){if(this._destroyed)throw new fe(406,!1);const t=this._injector;t.destroy&&!t.destroyed&&t.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}}return n.\u0275fac=function(t){return new(t||n)(ue(tn),ue($r),ue(Ro))},n.\u0275prov=Ae({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function k3(n,e){const t=n.indexOf(e);t>-1&&n.splice(t,1)}let Hf=(()=>{class n{}return n.__NG_ELEMENT_ID__=sP,n})();function sP(n){return function oP(n,e,t){if(u2(n)&&!t){const i=yi(n.index,e);return new I2(i,i)}return 47&n.type?new I2(e[16],e):null}(Pn(),X(),16==(16&n))}class Zv{constructor(){}supports(e){return R2(e)}create(e){return new dP(e)}}const fP=(n,e)=>e;class dP{constructor(e){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=e||fP}forEachItem(e){let t;for(t=this._itHead;null!==t;t=t._next)e(t)}forEachOperation(e){let t=this._itHead,i=this._removalsHead,r=0,s=null;for(;t||i;){const o=!i||t&&t.currentIndex<Xv(i,r,s)?t:i,a=Xv(o,r,s),c=o.currentIndex;if(o===i)r--,i=i._nextRemoved;else if(t=t._next,null==o.previousIndex)r++;else{s||(s=[]);const l=a-r,u=c-r;if(l!=u){for(let d=0;d<l;d++){const h=d<s.length?s[d]:s[d]=0,p=h+d;u<=p&&p<l&&(s[d]=h+1)}s[o.previousIndex]=u-l}}a!==c&&e(o,a,c)}}forEachPreviousItem(e){let t;for(t=this._previousItHead;null!==t;t=t._nextPrevious)e(t)}forEachAddedItem(e){let t;for(t=this._additionsHead;null!==t;t=t._nextAdded)e(t)}forEachMovedItem(e){let t;for(t=this._movesHead;null!==t;t=t._nextMoved)e(t)}forEachRemovedItem(e){let t;for(t=this._removalsHead;null!==t;t=t._nextRemoved)e(t)}forEachIdentityChange(e){let t;for(t=this._identityChangesHead;null!==t;t=t._nextIdentityChange)e(t)}diff(e){if(null==e&&(e=[]),!R2(e))throw new fe(900,!1);return this.check(e)?this:null}onDestroy(){}check(e){this._reset();let r,s,o,t=this._itHead,i=!1;if(Array.isArray(e)){this.length=e.length;for(let a=0;a<this.length;a++)s=e[a],o=this._trackByFn(a,s),null!==t&&Object.is(t.trackById,o)?(i&&(t=this._verifyReinsertion(t,s,o,a)),Object.is(t.item,s)||this._addIdentityChange(t,s)):(t=this._mismatch(t,s,o,a),i=!0),t=t._next}else r=0,function VI(n,e){if(Array.isArray(n))for(let t=0;t<n.length;t++)e(n[t]);else{const t=n[l1()]();let i;for(;!(i=t.next()).done;)e(i.value)}}(e,a=>{o=this._trackByFn(r,a),null!==t&&Object.is(t.trackById,o)?(i&&(t=this._verifyReinsertion(t,a,o,r)),Object.is(t.item,a)||this._addIdentityChange(t,a)):(t=this._mismatch(t,a,o,r),i=!0),t=t._next,r++}),this.length=r;return this._truncate(t),this.collection=e,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let e;for(e=this._previousItHead=this._itHead;null!==e;e=e._next)e._nextPrevious=e._next;for(e=this._additionsHead;null!==e;e=e._nextAdded)e.previousIndex=e.currentIndex;for(this._additionsHead=this._additionsTail=null,e=this._movesHead;null!==e;e=e._nextMoved)e.previousIndex=e.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(e,t,i,r){let s;return null===e?s=this._itTail:(s=e._prev,this._remove(e)),null!==(e=null===this._unlinkedRecords?null:this._unlinkedRecords.get(i,null))?(Object.is(e.item,t)||this._addIdentityChange(e,t),this._reinsertAfter(e,s,r)):null!==(e=null===this._linkedRecords?null:this._linkedRecords.get(i,r))?(Object.is(e.item,t)||this._addIdentityChange(e,t),this._moveAfter(e,s,r)):e=this._addAfter(new hP(t,i),s,r),e}_verifyReinsertion(e,t,i,r){let s=null===this._unlinkedRecords?null:this._unlinkedRecords.get(i,null);return null!==s?e=this._reinsertAfter(s,e._prev,r):e.currentIndex!=r&&(e.currentIndex=r,this._addToMoves(e,r)),e}_truncate(e){for(;null!==e;){const t=e._next;this._addToRemovals(this._unlink(e)),e=t}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(e,t,i){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(e);const r=e._prevRemoved,s=e._nextRemoved;return null===r?this._removalsHead=s:r._nextRemoved=s,null===s?this._removalsTail=r:s._prevRemoved=r,this._insertAfter(e,t,i),this._addToMoves(e,i),e}_moveAfter(e,t,i){return this._unlink(e),this._insertAfter(e,t,i),this._addToMoves(e,i),e}_addAfter(e,t,i){return this._insertAfter(e,t,i),this._additionsTail=null===this._additionsTail?this._additionsHead=e:this._additionsTail._nextAdded=e,e}_insertAfter(e,t,i){const r=null===t?this._itHead:t._next;return e._next=r,e._prev=t,null===r?this._itTail=e:r._prev=e,null===t?this._itHead=e:t._next=e,null===this._linkedRecords&&(this._linkedRecords=new Yv),this._linkedRecords.put(e),e.currentIndex=i,e}_remove(e){return this._addToRemovals(this._unlink(e))}_unlink(e){null!==this._linkedRecords&&this._linkedRecords.remove(e);const t=e._prev,i=e._next;return null===t?this._itHead=i:t._next=i,null===i?this._itTail=t:i._prev=t,e}_addToMoves(e,t){return e.previousIndex===t||(this._movesTail=null===this._movesTail?this._movesHead=e:this._movesTail._nextMoved=e),e}_addToRemovals(e){return null===this._unlinkedRecords&&(this._unlinkedRecords=new Yv),this._unlinkedRecords.put(e),e.currentIndex=null,e._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=e,e._prevRemoved=null):(e._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=e),e}_addIdentityChange(e,t){return e.item=t,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=e:this._identityChangesTail._nextIdentityChange=e,e}}class hP{constructor(e,t){this.item=e,this.trackById=t,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class pP{constructor(){this._head=null,this._tail=null}add(e){null===this._head?(this._head=this._tail=e,e._nextDup=null,e._prevDup=null):(this._tail._nextDup=e,e._prevDup=this._tail,e._nextDup=null,this._tail=e)}get(e,t){let i;for(i=this._head;null!==i;i=i._nextDup)if((null===t||t<=i.currentIndex)&&Object.is(i.trackById,e))return i;return null}remove(e){const t=e._prevDup,i=e._nextDup;return null===t?this._head=i:t._nextDup=i,null===i?this._tail=t:i._prevDup=t,null===this._head}}class Yv{constructor(){this.map=new Map}put(e){const t=e.trackById;let i=this.map.get(t);i||(i=new pP,this.map.set(t,i)),i.add(e)}get(e,t){const r=this.map.get(e);return r?r.get(e,t):null}remove(e){const t=e.trackById;return this.map.get(t).remove(e)&&this.map.delete(t),e}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function Xv(n,e,t){const i=n.previousIndex;if(null===i)return i;let r=0;return t&&i<t.length&&(r=t[i]),i+e+r}class Kv{constructor(){}supports(e){return e instanceof Map||Y5(e)}create(){return new mP}}class mP{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(e){let t;for(t=this._mapHead;null!==t;t=t._next)e(t)}forEachPreviousItem(e){let t;for(t=this._previousMapHead;null!==t;t=t._nextPrevious)e(t)}forEachChangedItem(e){let t;for(t=this._changesHead;null!==t;t=t._nextChanged)e(t)}forEachAddedItem(e){let t;for(t=this._additionsHead;null!==t;t=t._nextAdded)e(t)}forEachRemovedItem(e){let t;for(t=this._removalsHead;null!==t;t=t._nextRemoved)e(t)}diff(e){if(e){if(!(e instanceof Map||Y5(e)))throw new fe(900,!1)}else e=new Map;return this.check(e)?this:null}onDestroy(){}check(e){this._reset();let t=this._mapHead;if(this._appendAfter=null,this._forEach(e,(i,r)=>{if(t&&t.key===r)this._maybeAddToChanges(t,i),this._appendAfter=t,t=t._next;else{const s=this._getOrCreateRecordForKey(r,i);t=this._insertBeforeOrAppend(t,s)}}),t){t._prev&&(t._prev._next=null),this._removalsHead=t;for(let i=t;null!==i;i=i._nextRemoved)i===this._mapHead&&(this._mapHead=null),this._records.delete(i.key),i._nextRemoved=i._next,i.previousValue=i.currentValue,i.currentValue=null,i._prev=null,i._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(e,t){if(e){const i=e._prev;return t._next=e,t._prev=i,e._prev=t,i&&(i._next=t),e===this._mapHead&&(this._mapHead=t),this._appendAfter=e,e}return this._appendAfter?(this._appendAfter._next=t,t._prev=this._appendAfter):this._mapHead=t,this._appendAfter=t,null}_getOrCreateRecordForKey(e,t){if(this._records.has(e)){const r=this._records.get(e);this._maybeAddToChanges(r,t);const s=r._prev,o=r._next;return s&&(s._next=o),o&&(o._prev=s),r._next=null,r._prev=null,r}const i=new gP(e);return this._records.set(e,i),i.currentValue=t,this._addToAdditions(i),i}_reset(){if(this.isDirty){let e;for(this._previousMapHead=this._mapHead,e=this._previousMapHead;null!==e;e=e._next)e._nextPrevious=e._next;for(e=this._changesHead;null!==e;e=e._nextChanged)e.previousValue=e.currentValue;for(e=this._additionsHead;null!=e;e=e._nextAdded)e.previousValue=e.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(e,t){Object.is(t,e.currentValue)||(e.previousValue=e.currentValue,e.currentValue=t,this._addToChanges(e))}_addToAdditions(e){null===this._additionsHead?this._additionsHead=this._additionsTail=e:(this._additionsTail._nextAdded=e,this._additionsTail=e)}_addToChanges(e){null===this._changesHead?this._changesHead=this._changesTail=e:(this._changesTail._nextChanged=e,this._changesTail=e)}_forEach(e,t){e instanceof Map?e.forEach(t):Object.keys(e).forEach(i=>t(e[i],i))}}class gP{constructor(e){this.key=e,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function Jv(){return new U3([new Zv])}let U3=(()=>{class n{constructor(t){this.factories=t}static create(t,i){if(null!=i){const r=i.factories.slice();t=t.concat(r)}return new n(t)}static extend(t){return{provide:n,useFactory:i=>n.create(t,i||Jv()),deps:[[n,new _2,new y2]]}}find(t){const i=this.factories.find(r=>r.supports(t));if(null!=i)return i;throw new fe(901,!1)}}return n.\u0275prov=Ae({token:n,providedIn:"root",factory:Jv}),n})();function Qv(){return new W2([new Kv])}let W2=(()=>{class n{constructor(t){this.factories=t}static create(t,i){if(i){const r=i.factories.slice();t=t.concat(r)}return new n(t)}static extend(t){return{provide:n,useFactory:i=>n.create(t,i||Qv()),deps:[[n,new _2,new y2]]}}find(t){const i=this.factories.find(r=>r.supports(t));if(i)return i;throw new fe(901,!1)}}return n.\u0275prov=Ae({token:n,providedIn:"root",factory:Qv}),n})();const _P=Fv(null,"core",[]);let xP=(()=>{class n{constructor(t){}}return n.\u0275fac=function(t){return new(t||n)(ue(F3))},n.\u0275mod=Xi({type:n}),n.\u0275inj=Li({}),n})(),jf=null;function Es(){return jf}class wP{}const Gn=new oe("DocumentToken");let qf=(()=>{class n{historyGo(t){throw new Error("Not implemented")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=Ae({token:n,factory:function(){return function CP(){return ue(ey)}()},providedIn:"platform"}),n})();const SP=new oe("Location Initialized");let ey=(()=>{class n extends qf{constructor(t){super(),this._doc=t,this._init()}_init(){this.location=window.location,this._history=window.history}getBaseHrefFromDOM(){return Es().getBaseHref(this._doc)}onPopState(t){const i=Es().getGlobalEventTarget(this._doc,"window");return i.addEventListener("popstate",t,!1),()=>i.removeEventListener("popstate",t)}onHashChange(t){const i=Es().getGlobalEventTarget(this._doc,"window");return i.addEventListener("hashchange",t,!1),()=>i.removeEventListener("hashchange",t)}get href(){return this.location.href}get protocol(){return this.location.protocol}get hostname(){return this.location.hostname}get port(){return this.location.port}get pathname(){return this.location.pathname}get search(){return this.location.search}get hash(){return this.location.hash}set pathname(t){this.location.pathname=t}pushState(t,i,r){ty()?this._history.pushState(t,i,r):this.location.hash=r}replaceState(t,i,r){ty()?this._history.replaceState(t,i,r):this.location.hash=r}forward(){this._history.forward()}back(){this._history.back()}historyGo(t=0){this._history.go(t)}getState(){return this._history.state}}return n.\u0275fac=function(t){return new(t||n)(ue(Gn))},n.\u0275prov=Ae({token:n,factory:function(){return function EP(){return new ey(ue(Gn))}()},providedIn:"platform"}),n})();function ty(){return!!window.history.pushState}function Zf(n,e){if(0==n.length)return e;if(0==e.length)return n;let t=0;return n.endsWith("/")&&t++,e.startsWith("/")&&t++,2==t?n+e.substring(1):1==t?n+e:n+"/"+e}function ny(n){const e=n.match(/#|\?|$/),t=e&&e.index||n.length;return n.slice(0,t-("/"===n[t-1]?1:0))+n.slice(t)}function Jr(n){return n&&"?"!==n[0]?"?"+n:n}let m1=(()=>{class n{historyGo(t){throw new Error("Not implemented")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=Ae({token:n,factory:function(){return Re(ry)},providedIn:"root"}),n})();const iy=new oe("appBaseHref");let ry=(()=>{class n extends m1{constructor(t,i){super(),this._platformLocation=t,this._removeListenerFns=[],this._baseHref=i??this._platformLocation.getBaseHrefFromDOM()??Re(Gn).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return Zf(this._baseHref,t)}path(t=!1){const i=this._platformLocation.pathname+Jr(this._platformLocation.search),r=this._platformLocation.hash;return r&&t?`${i}${r}`:i}pushState(t,i,r,s){const o=this.prepareExternalUrl(r+Jr(s));this._platformLocation.pushState(t,i,o)}replaceState(t,i,r,s){const o=this.prepareExternalUrl(r+Jr(s));this._platformLocation.replaceState(t,i,o)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}}return n.\u0275fac=function(t){return new(t||n)(ue(qf),ue(iy,8))},n.\u0275prov=Ae({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),DP=(()=>{class n extends m1{constructor(t,i){super(),this._platformLocation=t,this._baseHref="",this._removeListenerFns=[],null!=i&&(this._baseHref=i)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}path(t=!1){let i=this._platformLocation.hash;return null==i&&(i="#"),i.length>0?i.substring(1):i}prepareExternalUrl(t){const i=Zf(this._baseHref,t);return i.length>0?"#"+i:i}pushState(t,i,r,s){let o=this.prepareExternalUrl(r+Jr(s));0==o.length&&(o=this._platformLocation.pathname),this._platformLocation.pushState(t,i,o)}replaceState(t,i,r,s){let o=this.prepareExternalUrl(r+Jr(s));0==o.length&&(o=this._platformLocation.pathname),this._platformLocation.replaceState(t,i,o)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}}return n.\u0275fac=function(t){return new(t||n)(ue(qf),ue(iy,8))},n.\u0275prov=Ae({token:n,factory:n.\u0275fac}),n})(),Yf=(()=>{class n{constructor(t){this._subject=new Bn,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=t;const i=this._locationStrategy.getBaseHref();this._basePath=function IP(n){if(new RegExp("^(https?:)?//").test(n)){const[,t]=n.split(/\/\/[^\/]+/);return t}return n}(ny(sy(i))),this._locationStrategy.onPopState(r=>{this._subject.emit({url:this.path(!0),pop:!0,state:r.state,type:r.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(t=!1){return this.normalize(this._locationStrategy.path(t))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(t,i=""){return this.path()==this.normalize(t+Jr(i))}normalize(t){return n.stripTrailingSlash(function TP(n,e){return n&&e.startsWith(n)?e.substring(n.length):e}(this._basePath,sy(t)))}prepareExternalUrl(t){return t&&"/"!==t[0]&&(t="/"+t),this._locationStrategy.prepareExternalUrl(t)}go(t,i="",r=null){this._locationStrategy.pushState(r,"",t,i),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+Jr(i)),r)}replaceState(t,i="",r=null){this._locationStrategy.replaceState(r,"",t,i),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+Jr(i)),r)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(t=0){this._locationStrategy.historyGo?.(t)}onUrlChange(t){return this._urlChangeListeners.push(t),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(i=>{this._notifyUrlChangeListeners(i.url,i.state)})),()=>{const i=this._urlChangeListeners.indexOf(t);this._urlChangeListeners.splice(i,1),0===this._urlChangeListeners.length&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(t="",i){this._urlChangeListeners.forEach(r=>r(t,i))}subscribe(t,i,r){return this._subject.subscribe({next:t,error:i,complete:r})}}return n.normalizeQueryParams=Jr,n.joinWithSlash=Zf,n.stripTrailingSlash=ny,n.\u0275fac=function(t){return new(t||n)(ue(m1))},n.\u0275prov=Ae({token:n,factory:function(){return function AP(){return new Yf(ue(m1))}()},providedIn:"root"}),n})();function sy(n){return n.replace(/\/index.html$/,"")}let sd=(()=>{class n{constructor(t,i,r,s){this._iterableDiffers=t,this._keyValueDiffers=i,this._ngEl=r,this._renderer=s,this._iterableDiffer=null,this._keyValueDiffer=null,this._initialClasses=[],this._rawClass=null}set klass(t){this._removeClasses(this._initialClasses),this._initialClasses="string"==typeof t?t.split(/\s+/):[],this._applyClasses(this._initialClasses),this._applyClasses(this._rawClass)}set ngClass(t){this._removeClasses(this._rawClass),this._applyClasses(this._initialClasses),this._iterableDiffer=null,this._keyValueDiffer=null,this._rawClass="string"==typeof t?t.split(/\s+/):t,this._rawClass&&(R2(this._rawClass)?this._iterableDiffer=this._iterableDiffers.find(this._rawClass).create():this._keyValueDiffer=this._keyValueDiffers.find(this._rawClass).create())}ngDoCheck(){if(this._iterableDiffer){const t=this._iterableDiffer.diff(this._rawClass);t&&this._applyIterableChanges(t)}else if(this._keyValueDiffer){const t=this._keyValueDiffer.diff(this._rawClass);t&&this._applyKeyValueChanges(t)}}_applyKeyValueChanges(t){t.forEachAddedItem(i=>this._toggleClass(i.key,i.currentValue)),t.forEachChangedItem(i=>this._toggleClass(i.key,i.currentValue)),t.forEachRemovedItem(i=>{i.previousValue&&this._toggleClass(i.key,!1)})}_applyIterableChanges(t){t.forEachAddedItem(i=>{if("string"!=typeof i.item)throw new Error(`NgClass can only toggle CSS classes expressed as strings, got ${At(i.item)}`);this._toggleClass(i.item,!0)}),t.forEachRemovedItem(i=>this._toggleClass(i.item,!1))}_applyClasses(t){t&&(Array.isArray(t)||t instanceof Set?t.forEach(i=>this._toggleClass(i,!0)):Object.keys(t).forEach(i=>this._toggleClass(i,!!t[i])))}_removeClasses(t){t&&(Array.isArray(t)||t instanceof Set?t.forEach(i=>this._toggleClass(i,!1)):Object.keys(t).forEach(i=>this._toggleClass(i,!1)))}_toggleClass(t,i){(t=t.trim())&&t.split(/\s+/g).forEach(r=>{i?this._renderer.addClass(this._ngEl.nativeElement,r):this._renderer.removeClass(this._ngEl.nativeElement,r)})}}return n.\u0275fac=function(t){return new(t||n)(Ee(U3),Ee(W2),Ee(jr),Ee(A2))},n.\u0275dir=On({type:n,selectors:[["","ngClass",""]],inputs:{klass:["class","klass"],ngClass:"ngClass"},standalone:!0}),n})();class mN{constructor(e,t,i,r){this.$implicit=e,this.ngForOf=t,this.index=i,this.count=r}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let gy=(()=>{class n{constructor(t,i,r){this._viewContainer=t,this._template=i,this._differs=r,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForOf(t){this._ngForOf=t,this._ngForOfDirty=!0}set ngForTrackBy(t){this._trackByFn=t}get ngForTrackBy(){return this._trackByFn}set ngForTemplate(t){t&&(this._template=t)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const t=this._ngForOf;!this._differ&&t&&(this._differ=this._differs.find(t).create(this.ngForTrackBy))}if(this._differ){const t=this._differ.diff(this._ngForOf);t&&this._applyChanges(t)}}_applyChanges(t){const i=this._viewContainer;t.forEachOperation((r,s,o)=>{if(null==r.previousIndex)i.createEmbeddedView(this._template,new mN(r.item,this._ngForOf,-1,-1),null===o?void 0:o);else if(null==o)i.remove(null===s?void 0:s);else if(null!==s){const a=i.get(s);i.move(a,o),vy(a,r)}});for(let r=0,s=i.length;r<s;r++){const a=i.get(r).context;a.index=r,a.count=s,a.ngForOf=this._ngForOf}t.forEachIdentityChange(r=>{vy(i.get(r.currentIndex),r)})}static ngTemplateContextGuard(t,i){return!0}}return n.\u0275fac=function(t){return new(t||n)(Ee(rr),Ee(Yr),Ee(U3))},n.\u0275dir=On({type:n,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"},standalone:!0}),n})();function vy(n,e){n.context.$implicit=e.item}let od=(()=>{class n{constructor(t,i){this._viewContainer=t,this._context=new vN,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=i}set ngIf(t){this._context.$implicit=this._context.ngIf=t,this._updateView()}set ngIfThen(t){yy("ngIfThen",t),this._thenTemplateRef=t,this._thenViewRef=null,this._updateView()}set ngIfElse(t){yy("ngIfElse",t),this._elseTemplateRef=t,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(t,i){return!0}}return n.\u0275fac=function(t){return new(t||n)(Ee(rr),Ee(Yr))},n.\u0275dir=On({type:n,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"},standalone:!0}),n})();class vN{constructor(){this.$implicit=null,this.ngIf=null}}function yy(n,e){if(e&&!e.createEmbeddedView)throw new Error(`${n} must be a TemplateRef, but received '${At(e)}'.`)}class wN{createSubscription(e,t){return e.subscribe({next:t,error:i=>{throw i}})}dispose(e){e.unsubscribe()}}class CN{createSubscription(e,t){return e.then(t,i=>{throw i})}dispose(e){}}const SN=new CN,EN=new wN;let ld=(()=>{class n{constructor(t){this._latestValue=null,this._subscription=null,this._obj=null,this._strategy=null,this._ref=t}ngOnDestroy(){this._subscription&&this._dispose(),this._ref=null}transform(t){return this._obj?t!==this._obj?(this._dispose(),this.transform(t)):this._latestValue:(t&&this._subscribe(t),this._latestValue)}_subscribe(t){this._obj=t,this._strategy=this._selectStrategy(t),this._subscription=this._strategy.createSubscription(t,i=>this._updateLatestValue(t,i))}_selectStrategy(t){if(b3(t))return SN;if(hm(t))return EN;throw function ar(n,e){return new fe(2100,!1)}()}_dispose(){this._strategy.dispose(this._subscription),this._latestValue=null,this._subscription=null,this._obj=null}_updateLatestValue(t,i){t===this._obj&&(this._latestValue=i,this._ref.markForCheck())}}return n.\u0275fac=function(t){return new(t||n)(Ee(Hf,16))},n.\u0275pipe=si({name:"async",type:n,pure:!1,standalone:!0}),n})(),$N=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=Xi({type:n}),n.\u0275inj=Li({}),n})();let YN=(()=>{class n{}return n.\u0275prov=Ae({token:n,providedIn:"root",factory:()=>new XN(ue(Gn),window)}),n})();class XN{constructor(e,t){this.document=e,this.window=t,this.offset=()=>[0,0]}setOffset(e){this.offset=Array.isArray(e)?()=>e:e}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(e){this.supportsScrolling()&&this.window.scrollTo(e[0],e[1])}scrollToAnchor(e){if(!this.supportsScrolling())return;const t=function KN(n,e){const t=n.getElementById(e)||n.getElementsByName(e)[0];if(t)return t;if("function"==typeof n.createTreeWalker&&n.body&&(n.body.createShadowRoot||n.body.attachShadow)){const i=n.createTreeWalker(n.body,NodeFilter.SHOW_ELEMENT);let r=i.currentNode;for(;r;){const s=r.shadowRoot;if(s){const o=s.getElementById(e)||s.querySelector(`[name="${e}"]`);if(o)return o}r=i.nextNode()}}return null}(this.document,e);t&&(this.scrollToElement(t),t.focus())}setHistoryScrollRestoration(e){if(this.supportScrollRestoration()){const t=this.window.history;t&&t.scrollRestoration&&(t.scrollRestoration=e)}}scrollToElement(e){const t=e.getBoundingClientRect(),i=t.left+this.window.pageXOffset,r=t.top+this.window.pageYOffset,s=this.offset();this.window.scrollTo(i-s[0],r-s[1])}supportScrollRestoration(){try{if(!this.supportsScrolling())return!1;const e=My(this.window.history)||My(Object.getPrototypeOf(this.window.history));return!(!e||!e.writable&&!e.set)}catch{return!1}}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch{return!1}}}function My(n){return Object.getOwnPropertyDescriptor(n,"scrollRestoration")}class SO extends wP{constructor(){super(...arguments),this.supportsDOMEvents=!0}}class pd extends SO{static makeCurrent(){!function MP(n){jf||(jf=n)}(new pd)}onAndCancel(e,t,i){return e.addEventListener(t,i,!1),()=>{e.removeEventListener(t,i,!1)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.parentNode&&e.parentNode.removeChild(e)}createElement(e,t){return(t=t||this.getDefaultDocument()).createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return"window"===t?window:"document"===t?e:"body"===t?e.body:null}getBaseHref(e){const t=function EO(){return Z2=Z2||document.querySelector("base"),Z2?Z2.getAttribute("href"):null}();return null==t?null:function DO(n){J3=J3||document.createElement("a"),J3.setAttribute("href",n);const e=J3.pathname;return"/"===e.charAt(0)?e:`/${e}`}(t)}resetBaseElement(){Z2=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return function hN(n,e){e=encodeURIComponent(e);for(const t of n.split(";")){const i=t.indexOf("="),[r,s]=-1==i?[t,""]:[t.slice(0,i),t.slice(i+1)];if(r.trim()===e)return decodeURIComponent(s)}return null}(document.cookie,e)}}let J3,Z2=null;const Ay=new oe("TRANSITION_ID"),TO=[{provide:P3,useFactory:function AO(n,e,t){return()=>{t.get(N3).donePromise.then(()=>{const i=Es(),r=e.querySelectorAll(`style[ng-transition="${n}"]`);for(let s=0;s<r.length;s++)i.remove(r[s])})}},deps:[Ay,Gn,tr],multi:!0}];let LO=(()=>{class n{build(){return new XMLHttpRequest}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=Ae({token:n,factory:n.\u0275fac}),n})();const Q3=new oe("EventManagerPlugins");let eu=(()=>{class n{constructor(t,i){this._zone=i,this._eventNameToPlugin=new Map,t.forEach(r=>r.manager=this),this._plugins=t.slice().reverse()}addEventListener(t,i,r){return this._findPluginFor(i).addEventListener(t,i,r)}addGlobalEventListener(t,i,r){return this._findPluginFor(i).addGlobalEventListener(t,i,r)}getZone(){return this._zone}_findPluginFor(t){const i=this._eventNameToPlugin.get(t);if(i)return i;const r=this._plugins;for(let s=0;s<r.length;s++){const o=r[s];if(o.supports(t))return this._eventNameToPlugin.set(t,o),o}throw new Error(`No event manager plugin found for event ${t}`)}}return n.\u0275fac=function(t){return new(t||n)(ue(Q3),ue(tn))},n.\u0275prov=Ae({token:n,factory:n.\u0275fac}),n})();class Ty{constructor(e){this._doc=e}addGlobalEventListener(e,t,i){const r=Es().getGlobalEventTarget(this._doc,e);if(!r)throw new Error(`Unsupported event target ${r} for event ${t}`);return this.addEventListener(r,t,i)}}let Iy=(()=>{class n{constructor(){this._stylesSet=new Set}addStyles(t){const i=new Set;t.forEach(r=>{this._stylesSet.has(r)||(this._stylesSet.add(r),i.add(r))}),this.onStylesAdded(i)}onStylesAdded(t){}getAllStyles(){return Array.from(this._stylesSet)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=Ae({token:n,factory:n.\u0275fac}),n})(),Y2=(()=>{class n extends Iy{constructor(t){super(),this._doc=t,this._hostNodes=new Map,this._hostNodes.set(t.head,[])}_addStylesToHost(t,i,r){t.forEach(s=>{const o=this._doc.createElement("style");o.textContent=s,r.push(i.appendChild(o))})}addHost(t){const i=[];this._addStylesToHost(this._stylesSet,t,i),this._hostNodes.set(t,i)}removeHost(t){const i=this._hostNodes.get(t);i&&i.forEach(Ly),this._hostNodes.delete(t)}onStylesAdded(t){this._hostNodes.forEach((i,r)=>{this._addStylesToHost(t,r,i)})}ngOnDestroy(){this._hostNodes.forEach(t=>t.forEach(Ly))}}return n.\u0275fac=function(t){return new(t||n)(ue(Gn))},n.\u0275prov=Ae({token:n,factory:n.\u0275fac}),n})();function Ly(n){Es().remove(n)}const md={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},gd=/%COMP%/g;function vd(n,e){return e.flat(100).map(t=>t.replace(gd,n))}function Py(n){return e=>{if("__ngUnwrap__"===e)return n;!1===n(e)&&(e.preventDefault(),e.returnValue=!1)}}let yd=(()=>{class n{constructor(t,i,r){this.eventManager=t,this.sharedStylesHost=i,this.appId=r,this.rendererByCompId=new Map,this.defaultRenderer=new _d(t)}createRenderer(t,i){if(!t||!i)return this.defaultRenderer;switch(i.encapsulation){case gr.Emulated:{let r=this.rendererByCompId.get(i.id);return r||(r=new FO(this.eventManager,this.sharedStylesHost,i,this.appId),this.rendererByCompId.set(i.id,r)),r.applyToHost(t),r}case 1:case gr.ShadowDom:return new kO(this.eventManager,this.sharedStylesHost,t,i);default:if(!this.rendererByCompId.has(i.id)){const r=vd(i.id,i.styles);this.sharedStylesHost.addStyles(r),this.rendererByCompId.set(i.id,this.defaultRenderer)}return this.defaultRenderer}}begin(){}end(){}}return n.\u0275fac=function(t){return new(t||n)(ue(eu),ue(Y2),ue(G2))},n.\u0275prov=Ae({token:n,factory:n.\u0275fac}),n})();class _d{constructor(e){this.eventManager=e,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(e,t){return t?document.createElementNS(md[t]||t,e):document.createElement(e)}createComment(e){return document.createComment(e)}createText(e){return document.createTextNode(e)}appendChild(e,t){(Oy(e)?e.content:e).appendChild(t)}insertBefore(e,t,i){e&&(Oy(e)?e.content:e).insertBefore(t,i)}removeChild(e,t){e&&e.removeChild(t)}selectRootElement(e,t){let i="string"==typeof e?document.querySelector(e):e;if(!i)throw new Error(`The selector "${e}" did not match any elements`);return t||(i.textContent=""),i}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,i,r){if(r){t=r+":"+t;const s=md[r];s?e.setAttributeNS(s,t,i):e.setAttribute(t,i)}else e.setAttribute(t,i)}removeAttribute(e,t,i){if(i){const r=md[i];r?e.removeAttributeNS(r,t):e.removeAttribute(`${i}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,i,r){r&(oi.DashCase|oi.Important)?e.style.setProperty(t,i,r&oi.Important?"important":""):e.style[t]=i}removeStyle(e,t,i){i&oi.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,i){e[t]=i}setValue(e,t){e.nodeValue=t}listen(e,t,i){return"string"==typeof e?this.eventManager.addGlobalEventListener(e,t,Py(i)):this.eventManager.addEventListener(e,t,Py(i))}}function Oy(n){return"TEMPLATE"===n.tagName&&void 0!==n.content}class FO extends _d{constructor(e,t,i,r){super(e),this.component=i;const s=vd(r+"-"+i.id,i.styles);t.addStyles(s),this.contentAttr=function PO(n){return"_ngcontent-%COMP%".replace(gd,n)}(r+"-"+i.id),this.hostAttr=function NO(n){return"_nghost-%COMP%".replace(gd,n)}(r+"-"+i.id)}applyToHost(e){super.setAttribute(e,this.hostAttr,"")}createElement(e,t){const i=super.createElement(e,t);return super.setAttribute(i,this.contentAttr,""),i}}class kO extends _d{constructor(e,t,i,r){super(e),this.sharedStylesHost=t,this.hostEl=i,this.shadowRoot=i.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const s=vd(r.id,r.styles);for(let o=0;o<s.length;o++){const a=document.createElement("style");a.textContent=s[o],this.shadowRoot.appendChild(a)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,i){return super.insertBefore(this.nodeOrShadowRoot(e),t,i)}removeChild(e,t){return super.removeChild(this.nodeOrShadowRoot(e),t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}}let VO=(()=>{class n extends Ty{constructor(t){super(t)}supports(t){return!0}addEventListener(t,i,r){return t.addEventListener(i,r,!1),()=>this.removeEventListener(t,i,r)}removeEventListener(t,i,r){return t.removeEventListener(i,r)}}return n.\u0275fac=function(t){return new(t||n)(ue(Gn))},n.\u0275prov=Ae({token:n,factory:n.\u0275fac}),n})();const Fy=["alt","control","meta","shift"],HO={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},UO={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey};let BO=(()=>{class n extends Ty{constructor(t){super(t)}supports(t){return null!=n.parseEventName(t)}addEventListener(t,i,r){const s=n.parseEventName(i),o=n.eventCallback(s.fullKey,r,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>Es().onAndCancel(t,s.domEventName,o))}static parseEventName(t){const i=t.toLowerCase().split("."),r=i.shift();if(0===i.length||"keydown"!==r&&"keyup"!==r)return null;const s=n._normalizeKey(i.pop());let o="",a=i.indexOf("code");if(a>-1&&(i.splice(a,1),o="code."),Fy.forEach(l=>{const u=i.indexOf(l);u>-1&&(i.splice(u,1),o+=l+".")}),o+=s,0!=i.length||0===s.length)return null;const c={};return c.domEventName=r,c.fullKey=o,c}static matchEventFullKeyCode(t,i){let r=HO[t.key]||t.key,s="";return i.indexOf("code.")>-1&&(r=t.code,s="code."),!(null==r||!r)&&(r=r.toLowerCase()," "===r?r="space":"."===r&&(r="dot"),Fy.forEach(o=>{o!==r&&(0,UO[o])(t)&&(s+=o+".")}),s+=r,s===i)}static eventCallback(t,i,r){return s=>{n.matchEventFullKeyCode(s,t)&&r.runGuarded(()=>i(s))}}static _normalizeKey(t){return"esc"===t?"escape":t}}return n.\u0275fac=function(t){return new(t||n)(ue(Gn))},n.\u0275prov=Ae({token:n,factory:n.\u0275fac}),n})();const jO=Fv(_P,"browser",[{provide:Ev,useValue:"browser"},{provide:Sv,useValue:function GO(){pd.makeCurrent()},multi:!0},{provide:Gn,useFactory:function $O(){return function yA(n){g5=n}(document),document},deps:[]}]),Hy=new oe(""),Uy=[{provide:O3,useClass:class IO{addToWindow(e){Lt.getAngularTestability=(i,r=!0)=>{const s=e.findTestabilityInTree(i,r);if(null==s)throw new Error("Could not find testability for element.");return s},Lt.getAllAngularTestabilities=()=>e.getAllTestabilities(),Lt.getAllAngularRootElements=()=>e.getAllRootElements(),Lt.frameworkStabilizers||(Lt.frameworkStabilizers=[]),Lt.frameworkStabilizers.push(i=>{const r=Lt.getAllAngularTestabilities();let s=r.length,o=!1;const a=function(c){o=o||c,s--,0==s&&i(o)};r.forEach(function(c){c.whenStable(a)})})}findTestabilityInTree(e,t,i){return null==t?null:e.getTestability(t)??(i?Es().isShadowRoot(t)?this.findTestabilityInTree(e,t.host,!0):this.findTestabilityInTree(e,t.parentElement,!0):null)}},deps:[]},{provide:zv,useClass:Nf,deps:[tn,Of,O3]},{provide:Nf,useClass:Nf,deps:[tn,Of,O3]}],By=[{provide:C5,useValue:"root"},{provide:Ro,useFactory:function WO(){return new Ro},deps:[]},{provide:Q3,useClass:VO,multi:!0,deps:[Gn,tn,Ev]},{provide:Q3,useClass:BO,multi:!0,deps:[Gn]},{provide:yd,useClass:yd,deps:[eu,Y2,G2]},{provide:gp,useExisting:yd},{provide:Iy,useExisting:Y2},{provide:Y2,useClass:Y2,deps:[Gn]},{provide:eu,useClass:eu,deps:[Q3,tn]},{provide:class JN{},useClass:LO,deps:[]},[]];let qO=(()=>{class n{constructor(t){}static withServerTransition(t){return{ngModule:n,providers:[{provide:G2,useValue:t.appId},{provide:Ay,useExisting:G2},TO]}}}return n.\u0275fac=function(t){return new(t||n)(ue(Hy,12))},n.\u0275mod=Xi({type:n}),n.\u0275inj=Li({providers:[...By,...Uy],imports:[$N,xP]}),n})(),Gy=(()=>{class n{constructor(t){this._doc=t}getTitle(){return this._doc.title}setTitle(t){this._doc.title=t||""}}return n.\u0275fac=function(t){return new(t||n)(ue(Gn))},n.\u0275prov=Ae({token:n,factory:function(t){let i=null;return i=t?new t:function YO(){return new Gy(ue(Gn))}(),i},providedIn:"root"}),n})();typeof window<"u"&&window;let jy=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=Ae({token:n,factory:function(t){let i=null;return i=t?new(t||n):ue(qy),i},providedIn:"root"}),n})(),qy=(()=>{class n extends jy{constructor(t){super(),this._doc=t}sanitize(t,i){if(null==i)return null;switch(t){case Rt.NONE:return i;case Rt.HTML:return br(i,"HTML")?xi(i):tp(this._doc,String(i)).toString();case Rt.STYLE:return br(i,"Style")?xi(i):i;case Rt.SCRIPT:if(br(i,"Script"))return xi(i);throw new Error("unsafe value used in a script context");case Rt.URL:return br(i,"URL")?xi(i):o3(String(i));case Rt.RESOURCE_URL:if(br(i,"ResourceURL"))return xi(i);throw new Error(`unsafe value used in a resource URL context (see ${Dl})`);default:throw new Error(`Unexpected SecurityContext ${t} (see ${Dl})`)}}bypassSecurityTrustHtml(t){return function SA(n){return new _A(n)}(t)}bypassSecurityTrustStyle(t){return function EA(n){return new xA(n)}(t)}bypassSecurityTrustScript(t){return function DA(n){return new bA(n)}(t)}bypassSecurityTrustUrl(t){return function AA(n){return new MA(n)}(t)}bypassSecurityTrustResourceUrl(t){return function TA(n){return new wA(n)}(t)}}return n.\u0275fac=function(t){return new(t||n)(ue(Gn))},n.\u0275prov=Ae({token:n,factory:function(t){let i=null;return i=t?new t:function nF(n){return new qy(n.get(Gn))}(ue(tr)),i},providedIn:"root"}),n})();function Pe(...n){return mn(n,t2(n))}class ui extends mr{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){const t=super._subscribe(e);return!t.closed&&e.next(this._value),t}getValue(){const{hasError:e,thrownError:t,_value:i}=this;if(e)throw t;return this._throwIfClosed(),i}next(e){super.next(this._value=e)}}const tu=Qa(n=>function(){n(this),this.name="EmptyError",this.message="no elements in sequence"}),{isArray:iF}=Array,{getPrototypeOf:rF,prototype:sF,keys:oF}=Object;const{isArray:lF}=Array;function Zy(...n){const e=t2(n),t=l7(n),{args:i,keys:r}=function aF(n){if(1===n.length){const e=n[0];if(iF(e))return{args:e,keys:null};if(function cF(n){return n&&"object"==typeof n&&rF(n)===sF}(e)){const t=oF(e);return{args:t.map(i=>e[i]),keys:t}}}return{args:n,keys:null}}(n);if(0===i.length)return mn([],e);const s=new qt(function hF(n,e,t=Or){return i=>{Yy(e,()=>{const{length:r}=n,s=new Array(r);let o=r,a=r;for(let c=0;c<r;c++)Yy(e,()=>{const l=mn(n[c],e);let u=!1;l.subscribe(Qt(i,f=>{s[c]=f,u||(u=!0,a--),a||i.next(t(s.slice()))},()=>{--o||i.complete()}))},i)},i)}}(i,e,r?o=>function dF(n,e){return n.reduce((t,i,r)=>(t[i]=e[r],t),{})}(r,o):Or));return t?s.pipe(function fF(n){return ct(e=>function uF(n,e){return lF(e)?n(...e):n(e)}(n,e))}(t)):s}function Yy(n,e,t){n?Fr(t,n,e):e()}function Md(...n){return function pF(){return uo(1)}()(mn(n,t2(n)))}function Xy(n){return new qt(e=>{Zi(n()).subscribe(e)})}function X2(n,e){const t=It(n)?n:()=>n,i=r=>r.error(t());return new qt(e?r=>e.schedule(i,0,r):i)}function wd(){return an((n,e)=>{let t=null;n._refCount++;const i=Qt(e,void 0,void 0,void 0,()=>{if(!n||n._refCount<=0||0<--n._refCount)return void(t=null);const r=n._connection,s=t;t=null,r&&(!s||r===s)&&r.unsubscribe(),e.unsubscribe()});n.subscribe(i),i.closed||(t=n.connect())})}class Ky extends qt{constructor(e,t){super(),this.source=e,this.subjectFactory=t,this._subject=null,this._refCount=0,this._connection=null,Y8(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){const e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:e}=this;this._subject=this._connection=null,e?.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new hi;const t=this.getSubject();e.add(this.source.subscribe(Qt(t,void 0,()=>{this._teardown(),t.complete()},i=>{this._teardown(),t.error(i)},()=>this._teardown()))),e.closed&&(this._connection=null,e=hi.EMPTY)}return e}refCount(){return wd()(this)}}function Er(n,e){return an((t,i)=>{let r=null,s=0,o=!1;const a=()=>o&&!r&&i.complete();t.subscribe(Qt(i,c=>{r?.unsubscribe();let l=0;const u=s++;Zi(n(c,u)).subscribe(r=Qt(i,f=>i.next(e?e(c,f,u,l++):f),()=>{r=null,a()}))},()=>{o=!0,a()}))})}function K2(n){return n<=0?()=>kr:an((e,t)=>{let i=0;e.subscribe(Qt(t,r=>{++i<=n&&(t.next(r),n<=i&&t.complete())}))})}function As(n,e){return an((t,i)=>{let r=0;t.subscribe(Qt(i,s=>n.call(e,s,r++)&&i.next(s)))})}function nu(n){return an((e,t)=>{let i=!1;e.subscribe(Qt(t,r=>{i=!0,t.next(r)},()=>{i||t.next(n),t.complete()}))})}function Jy(n=gF){return an((e,t)=>{let i=!1;e.subscribe(Qt(t,r=>{i=!0,t.next(r)},()=>i?t.complete():t.error(n())))})}function gF(){return new tu}function Ts(n,e){const t=arguments.length>=2;return i=>i.pipe(n?As((r,s)=>n(r,s,i)):Or,K2(1),t?nu(e):Jy(()=>new tu))}function g1(n,e){return It(e)?Rn(n,e,1):Rn(n,1)}function Wn(n,e,t){const i=It(n)||e||t?{next:n,error:e,complete:t}:n;return i?an((r,s)=>{var o;null===(o=i.subscribe)||void 0===o||o.call(i);let a=!0;r.subscribe(Qt(s,c=>{var l;null===(l=i.next)||void 0===l||l.call(i,c),s.next(c)},()=>{var c;a=!1,null===(c=i.complete)||void 0===c||c.call(i),s.complete()},c=>{var l;a=!1,null===(l=i.error)||void 0===l||l.call(i,c),s.error(c)},()=>{var c,l;a&&(null===(c=i.unsubscribe)||void 0===c||c.call(i)),null===(l=i.finalize)||void 0===l||l.call(i)}))}):Or}function Is(n){return an((e,t)=>{let s,i=null,r=!1;i=e.subscribe(Qt(t,void 0,void 0,o=>{s=Zi(n(o,Is(n)(e))),i?(i.unsubscribe(),i=null,s.subscribe(t)):r=!0})),r&&(i.unsubscribe(),i=null,s.subscribe(t))})}function vF(n,e,t,i,r){return(s,o)=>{let a=t,c=e,l=0;s.subscribe(Qt(o,u=>{const f=l++;c=a?n(c,u,f):(a=!0,u),i&&o.next(c)},r&&(()=>{a&&o.next(c),o.complete()})))}}function Cd(n,e){return an(vF(n,e,arguments.length>=2,!0))}function Sd(n){return n<=0?()=>kr:an((e,t)=>{let i=[];e.subscribe(Qt(t,r=>{i.push(r),n<i.length&&i.shift()},()=>{for(const r of i)t.next(r);t.complete()},void 0,()=>{i=null}))})}function Qy(n,e){const t=arguments.length>=2;return i=>i.pipe(n?As((r,s)=>n(r,s,i)):Or,Sd(1),t?nu(e):Jy(()=>new tu))}function Ed(n){return an((e,t)=>{try{e.subscribe(t)}finally{t.add(n)}})}const nt="primary",J2=Symbol("RouteTitle");class xF{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t[0]:t}return null}getAll(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t:[t]}return[]}get keys(){return Object.keys(this.params)}}function Jo(n){return new xF(n)}function bF(n,e,t){const i=t.path.split("/");if(i.length>n.length||"full"===t.pathMatch&&(e.hasChildren()||i.length<n.length))return null;const r={};for(let s=0;s<i.length;s++){const o=i[s],a=n[s];if(o.startsWith(":"))r[o.substring(1)]=a;else if(o!==a.path)return null}return{consumed:n.slice(0,i.length),posParams:r}}function Dr(n,e){const t=n?Object.keys(n):void 0,i=e?Object.keys(e):void 0;if(!t||!i||t.length!=i.length)return!1;let r;for(let s=0;s<t.length;s++)if(r=t[s],!e_(n[r],e[r]))return!1;return!0}function e_(n,e){if(Array.isArray(n)&&Array.isArray(e)){if(n.length!==e.length)return!1;const t=[...n].sort(),i=[...e].sort();return t.every((r,s)=>i[s]===r)}return n===e}function t_(n){return Array.prototype.concat.apply([],n)}function n_(n){return n.length>0?n[n.length-1]:null}function Nn(n,e){for(const t in n)n.hasOwnProperty(t)&&e(n[t],t)}function Ls(n){return pm(n)?n:b3(n)?mn(Promise.resolve(n)):Pe(n)}const iu=!1,wF={exact:function s_(n,e,t){if(!y1(n.segments,e.segments)||!ru(n.segments,e.segments,t)||n.numberOfChildren!==e.numberOfChildren)return!1;for(const i in e.children)if(!n.children[i]||!s_(n.children[i],e.children[i],t))return!1;return!0},subset:o_},i_={exact:function CF(n,e){return Dr(n,e)},subset:function SF(n,e){return Object.keys(e).length<=Object.keys(n).length&&Object.keys(e).every(t=>e_(n[t],e[t]))},ignored:()=>!0};function r_(n,e,t){return wF[t.paths](n.root,e.root,t.matrixParams)&&i_[t.queryParams](n.queryParams,e.queryParams)&&!("exact"===t.fragment&&n.fragment!==e.fragment)}function o_(n,e,t){return a_(n,e,e.segments,t)}function a_(n,e,t,i){if(n.segments.length>t.length){const r=n.segments.slice(0,t.length);return!(!y1(r,t)||e.hasChildren()||!ru(r,t,i))}if(n.segments.length===t.length){if(!y1(n.segments,t)||!ru(n.segments,t,i))return!1;for(const r in e.children)if(!n.children[r]||!o_(n.children[r],e.children[r],i))return!1;return!0}{const r=t.slice(0,n.segments.length),s=t.slice(n.segments.length);return!!(y1(n.segments,r)&&ru(n.segments,r,i)&&n.children[nt])&&a_(n.children[nt],e,s,i)}}function ru(n,e,t){return e.every((i,r)=>i_[t](n[r].parameters,i.parameters))}class v1{constructor(e=new st([],{}),t={},i=null){this.root=e,this.queryParams=t,this.fragment=i}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Jo(this.queryParams)),this._queryParamMap}toString(){return AF.serialize(this)}}class st{constructor(e,t){this.segments=e,this.children=t,this.parent=null,Nn(t,(i,r)=>i.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return su(this)}}class Q2{constructor(e,t){this.path=e,this.parameters=t}get parameterMap(){return this._parameterMap||(this._parameterMap=Jo(this.parameters)),this._parameterMap}toString(){return u_(this)}}function y1(n,e){return n.length===e.length&&n.every((t,i)=>t.path===e[i].path)}let ec=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=Ae({token:n,factory:function(){return new Dd},providedIn:"root"}),n})();class Dd{parse(e){const t=new FF(e);return new v1(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}serialize(e){const t=`/${tc(e.root,!0)}`,i=function LF(n){const e=Object.keys(n).map(t=>{const i=n[t];return Array.isArray(i)?i.map(r=>`${ou(t)}=${ou(r)}`).join("&"):`${ou(t)}=${ou(i)}`}).filter(t=>!!t);return e.length?`?${e.join("&")}`:""}(e.queryParams);return`${t}${i}${"string"==typeof e.fragment?`#${function TF(n){return encodeURI(n)}(e.fragment)}`:""}`}}const AF=new Dd;function su(n){return n.segments.map(e=>u_(e)).join("/")}function tc(n,e){if(!n.hasChildren())return su(n);if(e){const t=n.children[nt]?tc(n.children[nt],!1):"",i=[];return Nn(n.children,(r,s)=>{s!==nt&&i.push(`${s}:${tc(r,!1)}`)}),i.length>0?`${t}(${i.join("//")})`:t}{const t=function DF(n,e){let t=[];return Nn(n.children,(i,r)=>{r===nt&&(t=t.concat(e(i,r)))}),Nn(n.children,(i,r)=>{r!==nt&&(t=t.concat(e(i,r)))}),t}(n,(i,r)=>r===nt?[tc(n.children[nt],!1)]:[`${r}:${tc(i,!1)}`]);return 1===Object.keys(n.children).length&&null!=n.children[nt]?`${su(n)}/${t[0]}`:`${su(n)}/(${t.join("//")})`}}function c_(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function ou(n){return c_(n).replace(/%3B/gi,";")}function Ad(n){return c_(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function au(n){return decodeURIComponent(n)}function l_(n){return au(n.replace(/\+/g,"%20"))}function u_(n){return`${Ad(n.path)}${function IF(n){return Object.keys(n).map(e=>`;${Ad(e)}=${Ad(n[e])}`).join("")}(n.parameters)}`}const RF=/^[^\/()?;=#]+/;function cu(n){const e=n.match(RF);return e?e[0]:""}const zF=/^[^=?&#]+/,NF=/^[^&#]+/;class FF{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new st([],{}):new st([],this.parseChildren())}parseQueryParams(){const e={};if(this.consumeOptional("?"))do{this.parseQueryParam(e)}while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));let i={};return this.peekStartsWith("(")&&(i=this.parseParens(!1)),(e.length>0||Object.keys(t).length>0)&&(i[nt]=new st(e,t)),i}parseSegment(){const e=cu(this.remaining);if(""===e&&this.peekStartsWith(";"))throw new fe(4009,iu);return this.capture(e),new Q2(au(e),this.parseMatrixParams())}parseMatrixParams(){const e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){const t=cu(this.remaining);if(!t)return;this.capture(t);let i="";if(this.consumeOptional("=")){const r=cu(this.remaining);r&&(i=r,this.capture(i))}e[au(t)]=au(i)}parseQueryParam(e){const t=function PF(n){const e=n.match(zF);return e?e[0]:""}(this.remaining);if(!t)return;this.capture(t);let i="";if(this.consumeOptional("=")){const o=function OF(n){const e=n.match(NF);return e?e[0]:""}(this.remaining);o&&(i=o,this.capture(i))}const r=l_(t),s=l_(i);if(e.hasOwnProperty(r)){let o=e[r];Array.isArray(o)||(o=[o],e[r]=o),o.push(s)}else e[r]=s}parseParens(e){const t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const i=cu(this.remaining),r=this.remaining[i.length];if("/"!==r&&")"!==r&&";"!==r)throw new fe(4010,iu);let s;i.indexOf(":")>-1?(s=i.slice(0,i.indexOf(":")),this.capture(s),this.capture(":")):e&&(s=nt);const o=this.parseChildren();t[s]=1===Object.keys(o).length?o[nt]:new st([],o),this.consumeOptional("//")}return t}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return!!this.peekStartsWith(e)&&(this.remaining=this.remaining.substring(e.length),!0)}capture(e){if(!this.consumeOptional(e))throw new fe(4011,iu)}}function Td(n){return n.segments.length>0?new st([],{[nt]:n}):n}function lu(n){const e={};for(const i of Object.keys(n.children)){const s=lu(n.children[i]);(s.segments.length>0||s.hasChildren())&&(e[i]=s)}return function kF(n){if(1===n.numberOfChildren&&n.children[nt]){const e=n.children[nt];return new st(n.segments.concat(e.segments),e.children)}return n}(new st(n.segments,e))}function _1(n){return n instanceof v1}function UF(n,e,t,i,r){if(0===t.length)return Qo(e.root,e.root,e.root,i,r);const s=function h_(n){if("string"==typeof n[0]&&1===n.length&&"/"===n[0])return new d_(!0,0,n);let e=0,t=!1;const i=n.reduce((r,s,o)=>{if("object"==typeof s&&null!=s){if(s.outlets){const a={};return Nn(s.outlets,(c,l)=>{a[l]="string"==typeof c?c.split("/"):c}),[...r,{outlets:a}]}if(s.segmentPath)return[...r,s.segmentPath]}return"string"!=typeof s?[...r,s]:0===o?(s.split("/").forEach((a,c)=>{0==c&&"."===a||(0==c&&""===a?t=!0:".."===a?e++:""!=a&&r.push(a))}),r):[...r,s]},[]);return new d_(t,e,i)}(t);return s.toRoot()?Qo(e.root,e.root,new st([],{}),i,r):function o(c){const l=function GF(n,e,t,i){if(n.isAbsolute)return new ea(e.root,!0,0);if(-1===i)return new ea(t,t===e.root,0);return function p_(n,e,t){let i=n,r=e,s=t;for(;s>r;){if(s-=r,i=i.parent,!i)throw new fe(4005,!1);r=i.segments.length}return new ea(i,!1,r-s)}(t,i+(nc(n.commands[0])?0:1),n.numberOfDoubleDots)}(s,e,n.snapshot?._urlSegment,c),u=l.processChildren?rc(l.segmentGroup,l.index,s.commands):Ld(l.segmentGroup,l.index,s.commands);return Qo(e.root,l.segmentGroup,u,i,r)}(n.snapshot?._lastPathIndex)}function nc(n){return"object"==typeof n&&null!=n&&!n.outlets&&!n.segmentPath}function ic(n){return"object"==typeof n&&null!=n&&n.outlets}function Qo(n,e,t,i,r){let o,s={};i&&Nn(i,(c,l)=>{s[l]=Array.isArray(c)?c.map(u=>`${u}`):`${c}`}),o=n===e?t:f_(n,e,t);const a=Td(lu(o));return new v1(a,s,r)}function f_(n,e,t){const i={};return Nn(n.children,(r,s)=>{i[s]=r===e?t:f_(r,e,t)}),new st(n.segments,i)}class d_{constructor(e,t,i){if(this.isAbsolute=e,this.numberOfDoubleDots=t,this.commands=i,e&&i.length>0&&nc(i[0]))throw new fe(4003,!1);const r=i.find(ic);if(r&&r!==n_(i))throw new fe(4004,!1)}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class ea{constructor(e,t,i){this.segmentGroup=e,this.processChildren=t,this.index=i}}function Ld(n,e,t){if(n||(n=new st([],{})),0===n.segments.length&&n.hasChildren())return rc(n,e,t);const i=function $F(n,e,t){let i=0,r=e;const s={match:!1,pathIndex:0,commandIndex:0};for(;r<n.segments.length;){if(i>=t.length)return s;const o=n.segments[r],a=t[i];if(ic(a))break;const c=`${a}`,l=i<t.length-1?t[i+1]:null;if(r>0&&void 0===c)break;if(c&&l&&"object"==typeof l&&void 0===l.outlets){if(!g_(c,l,o))return s;i+=2}else{if(!g_(c,{},o))return s;i++}r++}return{match:!0,pathIndex:r,commandIndex:i}}(n,e,t),r=t.slice(i.commandIndex);if(i.match&&i.pathIndex<n.segments.length){const s=new st(n.segments.slice(0,i.pathIndex),{});return s.children[nt]=new st(n.segments.slice(i.pathIndex),n.children),rc(s,0,r)}return i.match&&0===r.length?new st(n.segments,{}):i.match&&!n.hasChildren()?Rd(n,e,t):i.match?rc(n,0,r):Rd(n,e,t)}function rc(n,e,t){if(0===t.length)return new st(n.segments,{});{const i=function WF(n){return ic(n[0])?n[0].outlets:{[nt]:n}}(t),r={};return Nn(i,(s,o)=>{"string"==typeof s&&(s=[s]),null!==s&&(r[o]=Ld(n.children[o],e,s))}),Nn(n.children,(s,o)=>{void 0===i[o]&&(r[o]=s)}),new st(n.segments,r)}}function Rd(n,e,t){const i=n.segments.slice(0,e);let r=0;for(;r<t.length;){const s=t[r];if(ic(s)){const c=jF(s.outlets);return new st(i,c)}if(0===r&&nc(t[0])){i.push(new Q2(n.segments[e].path,m_(t[0]))),r++;continue}const o=ic(s)?s.outlets[nt]:`${s}`,a=r<t.length-1?t[r+1]:null;o&&a&&nc(a)?(i.push(new Q2(o,m_(a))),r+=2):(i.push(new Q2(o,{})),r++)}return new st(i,{})}function jF(n){const e={};return Nn(n,(t,i)=>{"string"==typeof t&&(t=[t]),null!==t&&(e[i]=Rd(new st([],{}),0,t))}),e}function m_(n){const e={};return Nn(n,(t,i)=>e[i]=`${t}`),e}function g_(n,e,t){return n==t.path&&Dr(e,t.parameters)}class es{constructor(e,t){this.id=e,this.url=t}}class zd extends es{constructor(e,t,i="imperative",r=null){super(e,t),this.type=0,this.navigationTrigger=i,this.restoredState=r}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class x1 extends es{constructor(e,t,i){super(e,t),this.urlAfterRedirects=i,this.type=1}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class uu extends es{constructor(e,t,i,r){super(e,t),this.reason=i,this.code=r,this.type=2}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class v_ extends es{constructor(e,t,i,r){super(e,t),this.error=i,this.target=r,this.type=3}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class qF extends es{constructor(e,t,i,r){super(e,t),this.urlAfterRedirects=i,this.state=r,this.type=4}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class ZF extends es{constructor(e,t,i,r){super(e,t),this.urlAfterRedirects=i,this.state=r,this.type=7}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class YF extends es{constructor(e,t,i,r,s){super(e,t),this.urlAfterRedirects=i,this.state=r,this.shouldActivate=s,this.type=8}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class XF extends es{constructor(e,t,i,r){super(e,t),this.urlAfterRedirects=i,this.state=r,this.type=5}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class KF extends es{constructor(e,t,i,r){super(e,t),this.urlAfterRedirects=i,this.state=r,this.type=6}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class JF{constructor(e){this.route=e,this.type=9}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class QF{constructor(e){this.route=e,this.type=10}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class ek{constructor(e){this.snapshot=e,this.type=11}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class tk{constructor(e){this.snapshot=e,this.type=12}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class nk{constructor(e){this.snapshot=e,this.type=13}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class ik{constructor(e){this.snapshot=e,this.type=14}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class y_{constructor(e,t,i){this.routerEvent=e,this.position=t,this.anchor=i,this.type=15}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}let sk=(()=>{class n{createUrlTree(t,i,r,s,o,a){return UF(t||i.root,r,s,o,a)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=Ae({token:n,factory:n.\u0275fac}),n})(),ok=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=Ae({token:n,factory:function(e){return sk.\u0275fac(e)},providedIn:"root"}),n})();class __{constructor(e){this._root=e}get root(){return this._root.value}parent(e){const t=this.pathFromRoot(e);return t.length>1?t[t.length-2]:null}children(e){const t=Pd(e,this._root);return t?t.children.map(i=>i.value):[]}firstChild(e){const t=Pd(e,this._root);return t&&t.children.length>0?t.children[0].value:null}siblings(e){const t=Nd(e,this._root);return t.length<2?[]:t[t.length-2].children.map(r=>r.value).filter(r=>r!==e)}pathFromRoot(e){return Nd(e,this._root).map(t=>t.value)}}function Pd(n,e){if(n===e.value)return e;for(const t of e.children){const i=Pd(n,t);if(i)return i}return null}function Nd(n,e){if(n===e.value)return[e];for(const t of e.children){const i=Nd(n,t);if(i.length)return i.unshift(e),i}return[]}class ts{constructor(e,t){this.value=e,this.children=t}toString(){return`TreeNode(${this.value})`}}function ta(n){const e={};return n&&n.children.forEach(t=>e[t.value.outlet]=t),e}class x_ extends __{constructor(e,t){super(e),this.snapshot=t,Od(this,e)}toString(){return this.snapshot.toString()}}function b_(n,e){const t=function ak(n,e){const o=new fu([],{},{},"",{},nt,e,null,n.root,-1,{});return new w_("",new ts(o,[]))}(n,e),i=new ui([new Q2("",{})]),r=new ui({}),s=new ui({}),o=new ui({}),a=new ui(""),c=new na(i,r,o,a,s,nt,e,t.root);return c.snapshot=t.root,new x_(new ts(c,[]),t)}class na{constructor(e,t,i,r,s,o,a,c){this.url=e,this.params=t,this.queryParams=i,this.fragment=r,this.data=s,this.outlet=o,this.component=a,this.title=this.data?.pipe(ct(l=>l[J2]))??Pe(void 0),this._futureSnapshot=c}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe(ct(e=>Jo(e)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe(ct(e=>Jo(e)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function M_(n,e="emptyOnly"){const t=n.pathFromRoot;let i=0;if("always"!==e)for(i=t.length-1;i>=1;){const r=t[i],s=t[i-1];if(r.routeConfig&&""===r.routeConfig.path)i--;else{if(s.component)break;i--}}return function ck(n){return n.reduce((e,t)=>({params:{...e.params,...t.params},data:{...e.data,...t.data},resolve:{...t.data,...e.resolve,...t.routeConfig?.data,...t._resolvedData}}),{params:{},data:{},resolve:{}})}(t.slice(i))}class fu{constructor(e,t,i,r,s,o,a,c,l,u,f){this.url=e,this.params=t,this.queryParams=i,this.fragment=r,this.data=s,this.outlet=o,this.component=a,this.routeConfig=c,this._urlSegment=l,this._lastPathIndex=u,this._resolve=f}get title(){return this.data?.[J2]}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=Jo(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Jo(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(i=>i.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class w_ extends __{constructor(e,t){super(t),this.url=e,Od(this,t)}toString(){return C_(this._root)}}function Od(n,e){e.value._routerState=n,e.children.forEach(t=>Od(n,t))}function C_(n){const e=n.children.length>0?` { ${n.children.map(C_).join(", ")} } `:"";return`${n.value}${e}`}function Fd(n){if(n.snapshot){const e=n.snapshot,t=n._futureSnapshot;n.snapshot=t,Dr(e.queryParams,t.queryParams)||n.queryParams.next(t.queryParams),e.fragment!==t.fragment&&n.fragment.next(t.fragment),Dr(e.params,t.params)||n.params.next(t.params),function MF(n,e){if(n.length!==e.length)return!1;for(let t=0;t<n.length;++t)if(!Dr(n[t],e[t]))return!1;return!0}(e.url,t.url)||n.url.next(t.url),Dr(e.data,t.data)||n.data.next(t.data)}else n.snapshot=n._futureSnapshot,n.data.next(n._futureSnapshot.data)}function kd(n,e){const t=Dr(n.params,e.params)&&function EF(n,e){return y1(n,e)&&n.every((t,i)=>Dr(t.parameters,e[i].parameters))}(n.url,e.url);return t&&!(!n.parent!=!e.parent)&&(!n.parent||kd(n.parent,e.parent))}function sc(n,e,t){if(t&&n.shouldReuseRoute(e.value,t.value.snapshot)){const i=t.value;i._futureSnapshot=e.value;const r=function uk(n,e,t){return e.children.map(i=>{for(const r of t.children)if(n.shouldReuseRoute(i.value,r.value.snapshot))return sc(n,i,r);return sc(n,i)})}(n,e,t);return new ts(i,r)}{if(n.shouldAttach(e.value)){const s=n.retrieve(e.value);if(null!==s){const o=s.route;return o.value._futureSnapshot=e.value,o.children=e.children.map(a=>sc(n,a)),o}}const i=function fk(n){return new na(new ui(n.url),new ui(n.params),new ui(n.queryParams),new ui(n.fragment),new ui(n.data),n.outlet,n.component,n)}(e.value),r=e.children.map(s=>sc(n,s));return new ts(i,r)}}const Vd="ngNavigationCancelingError";function S_(n,e){const{redirectTo:t,navigationBehaviorOptions:i}=_1(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,r=E_(!1,0,e);return r.url=t,r.navigationBehaviorOptions=i,r}function E_(n,e,t){const i=new Error("NavigationCancelingError: "+(n||""));return i[Vd]=!0,i.cancellationCode=e,t&&(i.url=t),i}function D_(n){return A_(n)&&_1(n.url)}function A_(n){return n&&n[Vd]}class dk{constructor(){this.outlet=null,this.route=null,this.resolver=null,this.injector=null,this.children=new oc,this.attachRef=null}}let oc=(()=>{class n{constructor(){this.contexts=new Map}onChildOutletCreated(t,i){const r=this.getOrCreateContext(t);r.outlet=i,this.contexts.set(t,r)}onChildOutletDestroyed(t){const i=this.getContext(t);i&&(i.outlet=null,i.attachRef=null)}onOutletDeactivated(){const t=this.contexts;return this.contexts=new Map,t}onOutletReAttached(t){this.contexts=t}getOrCreateContext(t){let i=this.getContext(t);return i||(i=new dk,this.contexts.set(t,i)),i}getContext(t){return this.contexts.get(t)||null}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=Ae({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const du=!1;let T_=(()=>{class n{constructor(){this.activated=null,this._activatedRoute=null,this.name=nt,this.activateEvents=new Bn,this.deactivateEvents=new Bn,this.attachEvents=new Bn,this.detachEvents=new Bn,this.parentContexts=Re(oc),this.location=Re(rr),this.changeDetector=Re(Hf),this.environmentInjector=Re($r)}ngOnChanges(t){if(t.name){const{firstChange:i,previousValue:r}=t.name;if(i)return;this.isTrackedInParentContexts(r)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(r)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name)}isTrackedInParentContexts(t){return this.parentContexts.getContext(t)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;const t=this.parentContexts.getContext(this.name);t?.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new fe(4012,du);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new fe(4012,du);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new fe(4012,du);this.location.detach();const t=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(t.instance),t}attach(t,i){this.activated=t,this._activatedRoute=i,this.location.insert(t.hostView),this.attachEvents.emit(t.instance)}deactivate(){if(this.activated){const t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,i){if(this.isActivated)throw new fe(4013,du);this._activatedRoute=t;const r=this.location,o=t.snapshot.component,a=this.parentContexts.getOrCreateContext(this.name).children,c=new hk(t,a,r.injector);if(i&&function pk(n){return!!n.resolveComponentFactory}(i)){const l=i.resolveComponentFactory(o);this.activated=r.createComponent(l,r.length,c)}else this.activated=r.createComponent(o,{index:r.length,injector:c,environmentInjector:i??this.environmentInjector});this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=On({type:n,selectors:[["router-outlet"]],inputs:{name:"name"},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0,features:[yr]}),n})();class hk{constructor(e,t,i){this.route=e,this.childContexts=t,this.parent=i}get(e,t){return e===na?this.route:e===oc?this.childContexts:this.parent.get(e,t)}}let Hd=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=zi({type:n,selectors:[["ng-component"]],standalone:!0,features:[kg],decls:1,vars:0,template:function(t,i){1&t&&cn(0,"router-outlet")},dependencies:[T_],encapsulation:2}),n})();function I_(n,e){return n.providers&&!n._injector&&(n._injector=I3(n.providers,e,`Route: ${n.path}`)),n._injector??e}function Bd(n){const e=n.children&&n.children.map(Bd),t=e?{...n,children:e}:{...n};return!t.component&&!t.loadComponent&&(e||t.loadChildren)&&t.outlet&&t.outlet!==nt&&(t.component=Hd),t}function Ui(n){return n.outlet||nt}function L_(n,e){const t=n.filter(i=>Ui(i)===e);return t.push(...n.filter(i=>Ui(i)!==e)),t}function ac(n){if(!n)return null;if(n.routeConfig?._injector)return n.routeConfig._injector;for(let e=n.parent;e;e=e.parent){const t=e.routeConfig;if(t?._loadedInjector)return t._loadedInjector;if(t?._injector)return t._injector}return null}class _k{constructor(e,t,i,r){this.routeReuseStrategy=e,this.futureState=t,this.currState=i,this.forwardEvent=r}activate(e){const t=this.futureState._root,i=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,i,e),Fd(this.futureState.root),this.activateChildRoutes(t,i,e)}deactivateChildRoutes(e,t,i){const r=ta(t);e.children.forEach(s=>{const o=s.value.outlet;this.deactivateRoutes(s,r[o],i),delete r[o]}),Nn(r,(s,o)=>{this.deactivateRouteAndItsChildren(s,i)})}deactivateRoutes(e,t,i){const r=e.value,s=t?t.value:null;if(r===s)if(r.component){const o=i.getContext(r.outlet);o&&this.deactivateChildRoutes(e,t,o.children)}else this.deactivateChildRoutes(e,t,i);else s&&this.deactivateRouteAndItsChildren(t,i)}deactivateRouteAndItsChildren(e,t){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,t):this.deactivateRouteAndOutlet(e,t)}detachAndStoreRouteSubtree(e,t){const i=t.getContext(e.value.outlet),r=i&&e.value.component?i.children:t,s=ta(e);for(const o of Object.keys(s))this.deactivateRouteAndItsChildren(s[o],r);if(i&&i.outlet){const o=i.outlet.detach(),a=i.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:o,route:e,contexts:a})}}deactivateRouteAndOutlet(e,t){const i=t.getContext(e.value.outlet),r=i&&e.value.component?i.children:t,s=ta(e);for(const o of Object.keys(s))this.deactivateRouteAndItsChildren(s[o],r);i&&i.outlet&&(i.outlet.deactivate(),i.children.onOutletDeactivated(),i.attachRef=null,i.resolver=null,i.route=null)}activateChildRoutes(e,t,i){const r=ta(t);e.children.forEach(s=>{this.activateRoutes(s,r[s.value.outlet],i),this.forwardEvent(new ik(s.value.snapshot))}),e.children.length&&this.forwardEvent(new tk(e.value.snapshot))}activateRoutes(e,t,i){const r=e.value,s=t?t.value:null;if(Fd(r),r===s)if(r.component){const o=i.getOrCreateContext(r.outlet);this.activateChildRoutes(e,t,o.children)}else this.activateChildRoutes(e,t,i);else if(r.component){const o=i.getOrCreateContext(r.outlet);if(this.routeReuseStrategy.shouldAttach(r.snapshot)){const a=this.routeReuseStrategy.retrieve(r.snapshot);this.routeReuseStrategy.store(r.snapshot,null),o.children.onOutletReAttached(a.contexts),o.attachRef=a.componentRef,o.route=a.route.value,o.outlet&&o.outlet.attach(a.componentRef,a.route.value),Fd(a.route.value),this.activateChildRoutes(e,null,o.children)}else{const a=ac(r.snapshot),c=a?.get(D2)??null;o.attachRef=null,o.route=r,o.resolver=c,o.injector=a,o.outlet&&o.outlet.activateWith(r,o.injector),this.activateChildRoutes(e,null,o.children)}}else this.activateChildRoutes(e,null,i)}}class R_{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}}class hu{constructor(e,t){this.component=e,this.route=t}}function xk(n,e,t){const i=n._root;return cc(i,e?e._root:null,t,[i.value])}function ia(n,e){const t=Symbol(),i=e.get(n,t);return i===t?"function"!=typeof n||function hE(n){return null!==Il(n)}(n)?e.get(n):n:i}function cc(n,e,t,i,r={canDeactivateChecks:[],canActivateChecks:[]}){const s=ta(e);return n.children.forEach(o=>{(function Mk(n,e,t,i,r={canDeactivateChecks:[],canActivateChecks:[]}){const s=n.value,o=e?e.value:null,a=t?t.getContext(n.value.outlet):null;if(o&&s.routeConfig===o.routeConfig){const c=function wk(n,e,t){if("function"==typeof t)return t(n,e);switch(t){case"pathParamsChange":return!y1(n.url,e.url);case"pathParamsOrQueryParamsChange":return!y1(n.url,e.url)||!Dr(n.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!kd(n,e)||!Dr(n.queryParams,e.queryParams);default:return!kd(n,e)}}(o,s,s.routeConfig.runGuardsAndResolvers);c?r.canActivateChecks.push(new R_(i)):(s.data=o.data,s._resolvedData=o._resolvedData),cc(n,e,s.component?a?a.children:null:t,i,r),c&&a&&a.outlet&&a.outlet.isActivated&&r.canDeactivateChecks.push(new hu(a.outlet.component,o))}else o&&lc(e,a,r),r.canActivateChecks.push(new R_(i)),cc(n,null,s.component?a?a.children:null:t,i,r)})(o,s[o.value.outlet],t,i.concat([o.value]),r),delete s[o.value.outlet]}),Nn(s,(o,a)=>lc(o,t.getContext(a),r)),r}function lc(n,e,t){const i=ta(n),r=n.value;Nn(i,(s,o)=>{lc(s,r.component?e?e.children.getContext(o):null:e,t)}),t.canDeactivateChecks.push(new hu(r.component&&e&&e.outlet&&e.outlet.isActivated?e.outlet.component:null,r))}function uc(n){return"function"==typeof n}function Gd(n){return n instanceof tu||"EmptyError"===n?.name}const pu=Symbol("INITIAL_VALUE");function ra(){return Er(n=>Zy(n.map(e=>e.pipe(K2(1),function mF(...n){const e=t2(n);return an((t,i)=>{(e?Md(n,t,e):Md(n,t)).subscribe(i)})}(pu)))).pipe(ct(e=>{for(const t of e)if(!0!==t){if(t===pu)return pu;if(!1===t||t instanceof v1)return t}return!0}),As(e=>e!==pu),K2(1)))}function z_(n){return function RS(...n){return j8(n)}(Wn(e=>{if(_1(e))throw S_(0,e)}),ct(e=>!0===e))}const Wd={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function P_(n,e,t,i,r){const s=$d(n,e,t);return s.matched?function Hk(n,e,t,i){const r=e.canMatch;return r&&0!==r.length?Pe(r.map(o=>{const a=ia(o,n);return Ls(function Tk(n){return n&&uc(n.canMatch)}(a)?a.canMatch(e,t):n.runInContext(()=>a(e,t)))})).pipe(ra(),z_()):Pe(!0)}(i=I_(e,i),e,t).pipe(ct(o=>!0===o?s:{...Wd})):Pe(s)}function $d(n,e,t){if(""===e.path)return"full"===e.pathMatch&&(n.hasChildren()||t.length>0)?{...Wd}:{matched:!0,consumedSegments:[],remainingSegments:t,parameters:{},positionalParamSegments:{}};const r=(e.matcher||bF)(t,n,e);if(!r)return{...Wd};const s={};Nn(r.posParams,(a,c)=>{s[c]=a.path});const o=r.consumed.length>0?{...s,...r.consumed[r.consumed.length-1].parameters}:s;return{matched:!0,consumedSegments:r.consumed,remainingSegments:t.slice(r.consumed.length),parameters:o,positionalParamSegments:r.posParams??{}}}function mu(n,e,t,i){if(t.length>0&&function Gk(n,e,t){return t.some(i=>gu(n,e,i)&&Ui(i)!==nt)}(n,t,i)){const s=new st(e,function Bk(n,e,t,i){const r={};r[nt]=i,i._sourceSegment=n,i._segmentIndexShift=e.length;for(const s of t)if(""===s.path&&Ui(s)!==nt){const o=new st([],{});o._sourceSegment=n,o._segmentIndexShift=e.length,r[Ui(s)]=o}return r}(n,e,i,new st(t,n.children)));return s._sourceSegment=n,s._segmentIndexShift=e.length,{segmentGroup:s,slicedSegments:[]}}if(0===t.length&&function Wk(n,e,t){return t.some(i=>gu(n,e,i))}(n,t,i)){const s=new st(n.segments,function Uk(n,e,t,i,r){const s={};for(const o of i)if(gu(n,t,o)&&!r[Ui(o)]){const a=new st([],{});a._sourceSegment=n,a._segmentIndexShift=e.length,s[Ui(o)]=a}return{...r,...s}}(n,e,t,i,n.children));return s._sourceSegment=n,s._segmentIndexShift=e.length,{segmentGroup:s,slicedSegments:t}}const r=new st(n.segments,n.children);return r._sourceSegment=n,r._segmentIndexShift=e.length,{segmentGroup:r,slicedSegments:t}}function gu(n,e,t){return(!(n.hasChildren()||e.length>0)||"full"!==t.pathMatch)&&""===t.path}function N_(n,e,t,i){return!!(Ui(n)===i||i!==nt&&gu(e,t,n))&&("**"===n.path||$d(e,n,t).matched)}function O_(n,e,t){return 0===e.length&&!n.children[t]}const vu=!1;class yu{constructor(e){this.segmentGroup=e||null}}class F_{constructor(e){this.urlTree=e}}function fc(n){return X2(new yu(n))}function k_(n){return X2(new F_(n))}class Zk{constructor(e,t,i,r,s){this.injector=e,this.configLoader=t,this.urlSerializer=i,this.urlTree=r,this.config=s,this.allowRedirects=!0}apply(){const e=mu(this.urlTree.root,[],[],this.config).segmentGroup,t=new st(e.segments,e.children);return this.expandSegmentGroup(this.injector,this.config,t,nt).pipe(ct(s=>this.createUrlTree(lu(s),this.urlTree.queryParams,this.urlTree.fragment))).pipe(Is(s=>{if(s instanceof F_)return this.allowRedirects=!1,this.match(s.urlTree);throw s instanceof yu?this.noMatchError(s):s}))}match(e){return this.expandSegmentGroup(this.injector,this.config,e.root,nt).pipe(ct(r=>this.createUrlTree(lu(r),e.queryParams,e.fragment))).pipe(Is(r=>{throw r instanceof yu?this.noMatchError(r):r}))}noMatchError(e){return new fe(4002,vu)}createUrlTree(e,t,i){const r=Td(e);return new v1(r,t,i)}expandSegmentGroup(e,t,i,r){return 0===i.segments.length&&i.hasChildren()?this.expandChildren(e,t,i).pipe(ct(s=>new st([],s))):this.expandSegment(e,i,t,i.segments,r,!0)}expandChildren(e,t,i){const r=[];for(const s of Object.keys(i.children))"primary"===s?r.unshift(s):r.push(s);return mn(r).pipe(g1(s=>{const o=i.children[s],a=L_(t,s);return this.expandSegmentGroup(e,a,o,s).pipe(ct(c=>({segment:c,outlet:s})))}),Cd((s,o)=>(s[o.outlet]=o.segment,s),{}),Qy())}expandSegment(e,t,i,r,s,o){return mn(i).pipe(g1(a=>this.expandSegmentAgainstRoute(e,t,i,a,r,s,o).pipe(Is(l=>{if(l instanceof yu)return Pe(null);throw l}))),Ts(a=>!!a),Is((a,c)=>{if(Gd(a))return O_(t,r,s)?Pe(new st([],{})):fc(t);throw a}))}expandSegmentAgainstRoute(e,t,i,r,s,o,a){return N_(r,t,s,o)?void 0===r.redirectTo?this.matchSegmentAgainstRoute(e,t,r,s,o):a&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(e,t,i,r,s,o):fc(t):fc(t)}expandSegmentAgainstRouteUsingRedirect(e,t,i,r,s,o){return"**"===r.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(e,i,r,o):this.expandRegularSegmentAgainstRouteUsingRedirect(e,t,i,r,s,o)}expandWildCardWithParamsAgainstRouteUsingRedirect(e,t,i,r){const s=this.applyRedirectCommands([],i.redirectTo,{});return i.redirectTo.startsWith("/")?k_(s):this.lineralizeSegments(i,s).pipe(Rn(o=>{const a=new st(o,{});return this.expandSegment(e,a,t,o,r,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(e,t,i,r,s,o){const{matched:a,consumedSegments:c,remainingSegments:l,positionalParamSegments:u}=$d(t,r,s);if(!a)return fc(t);const f=this.applyRedirectCommands(c,r.redirectTo,u);return r.redirectTo.startsWith("/")?k_(f):this.lineralizeSegments(r,f).pipe(Rn(d=>this.expandSegment(e,t,i,d.concat(l),o,!1)))}matchSegmentAgainstRoute(e,t,i,r,s){return"**"===i.path?(e=I_(i,e),i.loadChildren?(i._loadedRoutes?Pe({routes:i._loadedRoutes,injector:i._loadedInjector}):this.configLoader.loadChildren(e,i)).pipe(ct(a=>(i._loadedRoutes=a.routes,i._loadedInjector=a.injector,new st(r,{})))):Pe(new st(r,{}))):P_(t,i,r,e).pipe(Er(({matched:o,consumedSegments:a,remainingSegments:c})=>o?this.getChildConfig(e=i._injector??e,i,r).pipe(Rn(u=>{const f=u.injector??e,d=u.routes,{segmentGroup:h,slicedSegments:p}=mu(t,a,c,d),g=new st(h.segments,h.children);if(0===p.length&&g.hasChildren())return this.expandChildren(f,d,g).pipe(ct(y=>new st(a,y)));if(0===d.length&&0===p.length)return Pe(new st(a,{}));const m=Ui(i)===s;return this.expandSegment(f,g,d,p,m?nt:s,!0).pipe(ct(x=>new st(a.concat(x.segments),x.children)))})):fc(t)))}getChildConfig(e,t,i){return t.children?Pe({routes:t.children,injector:e}):t.loadChildren?void 0!==t._loadedRoutes?Pe({routes:t._loadedRoutes,injector:t._loadedInjector}):function Vk(n,e,t,i){const r=e.canLoad;return void 0===r||0===r.length?Pe(!0):Pe(r.map(o=>{const a=ia(o,n);return Ls(function Sk(n){return n&&uc(n.canLoad)}(a)?a.canLoad(e,t):n.runInContext(()=>a(e,t)))})).pipe(ra(),z_())}(e,t,i).pipe(Rn(r=>r?this.configLoader.loadChildren(e,t).pipe(Wn(s=>{t._loadedRoutes=s.routes,t._loadedInjector=s.injector})):function jk(n){return X2(E_(vu,3))}())):Pe({routes:[],injector:e})}lineralizeSegments(e,t){let i=[],r=t.root;for(;;){if(i=i.concat(r.segments),0===r.numberOfChildren)return Pe(i);if(r.numberOfChildren>1||!r.children[nt])return X2(new fe(4e3,vu));r=r.children[nt]}}applyRedirectCommands(e,t,i){return this.applyRedirectCreateUrlTree(t,this.urlSerializer.parse(t),e,i)}applyRedirectCreateUrlTree(e,t,i,r){const s=this.createSegmentGroup(e,t.root,i,r);return new v1(s,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}createQueryParams(e,t){const i={};return Nn(e,(r,s)=>{if("string"==typeof r&&r.startsWith(":")){const a=r.substring(1);i[s]=t[a]}else i[s]=r}),i}createSegmentGroup(e,t,i,r){const s=this.createSegments(e,t.segments,i,r);let o={};return Nn(t.children,(a,c)=>{o[c]=this.createSegmentGroup(e,a,i,r)}),new st(s,o)}createSegments(e,t,i,r){return t.map(s=>s.path.startsWith(":")?this.findPosParam(e,s,r):this.findOrReturn(s,i))}findPosParam(e,t,i){const r=i[t.path.substring(1)];if(!r)throw new fe(4001,vu);return r}findOrReturn(e,t){let i=0;for(const r of t){if(r.path===e.path)return t.splice(i),r;i++}return e}}class Xk{}class Qk{constructor(e,t,i,r,s,o,a){this.injector=e,this.rootComponentType=t,this.config=i,this.urlTree=r,this.url=s,this.paramsInheritanceStrategy=o,this.urlSerializer=a}recognize(){const e=mu(this.urlTree.root,[],[],this.config.filter(t=>void 0===t.redirectTo)).segmentGroup;return this.processSegmentGroup(this.injector,this.config,e,nt).pipe(ct(t=>{if(null===t)return null;const i=new fu([],Object.freeze({}),Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,{},nt,this.rootComponentType,null,this.urlTree.root,-1,{}),r=new ts(i,t),s=new w_(this.url,r);return this.inheritParamsAndData(s._root),s}))}inheritParamsAndData(e){const t=e.value,i=M_(t,this.paramsInheritanceStrategy);t.params=Object.freeze(i.params),t.data=Object.freeze(i.data),e.children.forEach(r=>this.inheritParamsAndData(r))}processSegmentGroup(e,t,i,r){return 0===i.segments.length&&i.hasChildren()?this.processChildren(e,t,i):this.processSegment(e,t,i,i.segments,r)}processChildren(e,t,i){return mn(Object.keys(i.children)).pipe(g1(r=>{const s=i.children[r],o=L_(t,r);return this.processSegmentGroup(e,o,s,r)}),Cd((r,s)=>r&&s?(r.push(...s),r):null),function yF(n,e=!1){return an((t,i)=>{let r=0;t.subscribe(Qt(i,s=>{const o=n(s,r++);(o||e)&&i.next(s),!o&&i.complete()}))})}(r=>null!==r),nu(null),Qy(),ct(r=>{if(null===r)return null;const s=H_(r);return function eV(n){n.sort((e,t)=>e.value.outlet===nt?-1:t.value.outlet===nt?1:e.value.outlet.localeCompare(t.value.outlet))}(s),s}))}processSegment(e,t,i,r,s){return mn(t).pipe(g1(o=>this.processSegmentAgainstRoute(o._injector??e,o,i,r,s)),Ts(o=>!!o),Is(o=>{if(Gd(o))return O_(i,r,s)?Pe([]):Pe(null);throw o}))}processSegmentAgainstRoute(e,t,i,r,s){if(t.redirectTo||!N_(t,i,r,s))return Pe(null);let o;if("**"===t.path){const a=r.length>0?n_(r).parameters:{},c=B_(i)+r.length;o=Pe({snapshot:new fu(r,a,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,G_(t),Ui(t),t.component??t._loadedComponent??null,t,U_(i),c,W_(t)),consumedSegments:[],remainingSegments:[]})}else o=P_(i,t,r,e).pipe(ct(({matched:a,consumedSegments:c,remainingSegments:l,parameters:u})=>{if(!a)return null;const f=B_(i)+c.length;return{snapshot:new fu(c,u,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,G_(t),Ui(t),t.component??t._loadedComponent??null,t,U_(i),f,W_(t)),consumedSegments:c,remainingSegments:l}}));return o.pipe(Er(a=>{if(null===a)return Pe(null);const{snapshot:c,consumedSegments:l,remainingSegments:u}=a;e=t._injector??e;const f=t._loadedInjector??e,d=function tV(n){return n.children?n.children:n.loadChildren?n._loadedRoutes:[]}(t),{segmentGroup:h,slicedSegments:p}=mu(i,l,u,d.filter(m=>void 0===m.redirectTo));if(0===p.length&&h.hasChildren())return this.processChildren(f,d,h).pipe(ct(m=>null===m?null:[new ts(c,m)]));if(0===d.length&&0===p.length)return Pe([new ts(c,[])]);const g=Ui(t)===s;return this.processSegment(f,d,h,p,g?nt:s).pipe(ct(m=>null===m?null:[new ts(c,m)]))}))}}function nV(n){const e=n.value.routeConfig;return e&&""===e.path&&void 0===e.redirectTo}function H_(n){const e=[],t=new Set;for(const i of n){if(!nV(i)){e.push(i);continue}const r=e.find(s=>i.value.routeConfig===s.value.routeConfig);void 0!==r?(r.children.push(...i.children),t.add(r)):e.push(i)}for(const i of t){const r=H_(i.children);e.push(new ts(i.value,r))}return e.filter(i=>!t.has(i))}function U_(n){let e=n;for(;e._sourceSegment;)e=e._sourceSegment;return e}function B_(n){let e=n,t=e._segmentIndexShift??0;for(;e._sourceSegment;)e=e._sourceSegment,t+=e._segmentIndexShift??0;return t-1}function G_(n){return n.data||{}}function W_(n){return n.resolve||{}}function $_(n){return"string"==typeof n.title||null===n.title}function jd(n){return Er(e=>{const t=n(e);return t?mn(t).pipe(ct(()=>e)):Pe(e)})}const sa=new oe("ROUTES");let qd=(()=>{class n{constructor(t,i){this.injector=t,this.compiler=i,this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap}loadComponent(t){if(this.componentLoaders.get(t))return this.componentLoaders.get(t);if(t._loadedComponent)return Pe(t._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(t);const i=Ls(t.loadComponent()).pipe(ct(q_),Wn(s=>{this.onLoadEndListener&&this.onLoadEndListener(t),t._loadedComponent=s}),Ed(()=>{this.componentLoaders.delete(t)})),r=new Ky(i,()=>new mr).pipe(wd());return this.componentLoaders.set(t,r),r}loadChildren(t,i){if(this.childrenLoaders.get(i))return this.childrenLoaders.get(i);if(i._loadedRoutes)return Pe({routes:i._loadedRoutes,injector:i._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(i);const s=this.loadModuleFactoryOrRoutes(i.loadChildren).pipe(ct(a=>{this.onLoadEndListener&&this.onLoadEndListener(i);let c,l,u=!1;Array.isArray(a)?l=a:(c=a.create(t).injector,l=t_(c.get(sa,[],Fe.Self|Fe.Optional)));return{routes:l.map(Bd),injector:c}}),Ed(()=>{this.childrenLoaders.delete(i)})),o=new Ky(s,()=>new mr).pipe(wd());return this.childrenLoaders.set(i,o),o}loadModuleFactoryOrRoutes(t){return Ls(t()).pipe(ct(q_),Rn(r=>r instanceof Og||Array.isArray(r)?Pe(r):mn(this.compiler.compileModuleAsync(r))))}}return n.\u0275fac=function(t){return new(t||n)(ue(tr),ue(Av))},n.\u0275prov=Ae({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function q_(n){return function fV(n){return n&&"object"==typeof n&&"default"in n}(n)?n.default:n}let Zd=(()=>{class n{constructor(){this.currentNavigation=null,this.lastSuccessfulNavigation=null,this.events=new mr,this.configLoader=Re(qd),this.environmentInjector=Re($r),this.urlSerializer=Re(ec),this.rootContexts=Re(oc),this.navigationId=0,this.configLoader.onLoadEndListener=r=>this.events.next(new QF(r)),this.configLoader.onLoadStartListener=r=>this.events.next(new JF(r))}get hasRequestedNavigation(){return 0!==this.navigationId}complete(){this.transitions?.complete()}handleNavigationRequest(t){const i=++this.navigationId;this.transitions?.next({...this.transitions.value,...t,id:i})}setupNavigations(t){return this.transitions=new ui({id:0,targetPageId:0,currentUrlTree:t.currentUrlTree,currentRawUrl:t.currentUrlTree,extractedUrl:t.urlHandlingStrategy.extract(t.currentUrlTree),urlAfterRedirects:t.urlHandlingStrategy.extract(t.currentUrlTree),rawUrl:t.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:"imperative",restoredState:null,currentSnapshot:t.routerState.snapshot,targetSnapshot:null,currentRouterState:t.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.transitions.pipe(As(i=>0!==i.id),ct(i=>({...i,extractedUrl:t.urlHandlingStrategy.extract(i.rawUrl)})),Er(i=>{let r=!1,s=!1;return Pe(i).pipe(Wn(o=>{this.currentNavigation={id:o.id,initialUrl:o.rawUrl,extractedUrl:o.extractedUrl,trigger:o.source,extras:o.extras,previousNavigation:this.lastSuccessfulNavigation?{...this.lastSuccessfulNavigation,previousNavigation:null}:null}}),Er(o=>{const a=t.browserUrlTree.toString(),c=!t.navigated||o.extractedUrl.toString()!==a||a!==t.currentUrlTree.toString();if(("reload"===t.onSameUrlNavigation||c)&&t.urlHandlingStrategy.shouldProcessUrl(o.rawUrl))return Y_(o.source)&&(t.browserUrlTree=o.extractedUrl),Pe(o).pipe(Er(u=>{const f=this.transitions?.getValue();return this.events.next(new zd(u.id,this.urlSerializer.serialize(u.extractedUrl),u.source,u.restoredState)),f!==this.transitions?.getValue()?kr:Promise.resolve(u)}),function Yk(n,e,t,i){return Er(r=>function qk(n,e,t,i,r){return new Zk(n,e,t,i,r).apply()}(n,e,t,r.extractedUrl,i).pipe(ct(s=>({...r,urlAfterRedirects:s}))))}(this.environmentInjector,this.configLoader,this.urlSerializer,t.config),Wn(u=>{this.currentNavigation={...this.currentNavigation,finalUrl:u.urlAfterRedirects},i.urlAfterRedirects=u.urlAfterRedirects}),function rV(n,e,t,i,r){return Rn(s=>function Jk(n,e,t,i,r,s,o="emptyOnly"){return new Qk(n,e,t,i,r,o,s).recognize().pipe(Er(a=>null===a?function Kk(n){return new qt(e=>e.error(n))}(new Xk):Pe(a)))}(n,e,t,s.urlAfterRedirects,i.serialize(s.urlAfterRedirects),i,r).pipe(ct(o=>({...s,targetSnapshot:o}))))}(this.environmentInjector,t.rootComponentType,t.config,this.urlSerializer,t.paramsInheritanceStrategy),Wn(u=>{if(i.targetSnapshot=u.targetSnapshot,"eager"===t.urlUpdateStrategy){if(!u.extras.skipLocationChange){const d=t.urlHandlingStrategy.merge(u.urlAfterRedirects,u.rawUrl);t.setBrowserUrl(d,u)}t.browserUrlTree=u.urlAfterRedirects}const f=new qF(u.id,this.urlSerializer.serialize(u.extractedUrl),this.urlSerializer.serialize(u.urlAfterRedirects),u.targetSnapshot);this.events.next(f)}));if(c&&t.rawUrlTree&&t.urlHandlingStrategy.shouldProcessUrl(t.rawUrlTree)){const{id:f,extractedUrl:d,source:h,restoredState:p,extras:g}=o,m=new zd(f,this.urlSerializer.serialize(d),h,p);this.events.next(m);const v=b_(d,t.rootComponentType).snapshot;return Pe(i={...o,targetSnapshot:v,urlAfterRedirects:d,extras:{...g,skipLocationChange:!1,replaceUrl:!1}})}return t.rawUrlTree=o.rawUrl,o.resolve(null),kr}),Wn(o=>{const a=new ZF(o.id,this.urlSerializer.serialize(o.extractedUrl),this.urlSerializer.serialize(o.urlAfterRedirects),o.targetSnapshot);this.events.next(a)}),ct(o=>i={...o,guards:xk(o.targetSnapshot,o.currentSnapshot,this.rootContexts)}),function Lk(n,e){return Rn(t=>{const{targetSnapshot:i,currentSnapshot:r,guards:{canActivateChecks:s,canDeactivateChecks:o}}=t;return 0===o.length&&0===s.length?Pe({...t,guardsResult:!0}):function Rk(n,e,t,i){return mn(n).pipe(Rn(r=>function kk(n,e,t,i,r){const s=e&&e.routeConfig?e.routeConfig.canDeactivate:null;return s&&0!==s.length?Pe(s.map(a=>{const c=ac(e)??r,l=ia(a,c);return Ls(function Ak(n){return n&&uc(n.canDeactivate)}(l)?l.canDeactivate(n,e,t,i):c.runInContext(()=>l(n,e,t,i))).pipe(Ts())})).pipe(ra()):Pe(!0)}(r.component,r.route,t,e,i)),Ts(r=>!0!==r,!0))}(o,i,r,n).pipe(Rn(a=>a&&function Ck(n){return"boolean"==typeof n}(a)?function zk(n,e,t,i){return mn(e).pipe(g1(r=>Md(function Nk(n,e){return null!==n&&e&&e(new ek(n)),Pe(!0)}(r.route.parent,i),function Pk(n,e){return null!==n&&e&&e(new nk(n)),Pe(!0)}(r.route,i),function Fk(n,e,t){const i=e[e.length-1],s=e.slice(0,e.length-1).reverse().map(o=>function bk(n){const e=n.routeConfig?n.routeConfig.canActivateChild:null;return e&&0!==e.length?{node:n,guards:e}:null}(o)).filter(o=>null!==o).map(o=>Xy(()=>Pe(o.guards.map(c=>{const l=ac(o.node)??t,u=ia(c,l);return Ls(function Dk(n){return n&&uc(n.canActivateChild)}(u)?u.canActivateChild(i,n):l.runInContext(()=>u(i,n))).pipe(Ts())})).pipe(ra())));return Pe(s).pipe(ra())}(n,r.path,t),function Ok(n,e,t){const i=e.routeConfig?e.routeConfig.canActivate:null;if(!i||0===i.length)return Pe(!0);const r=i.map(s=>Xy(()=>{const o=ac(e)??t,a=ia(s,o);return Ls(function Ek(n){return n&&uc(n.canActivate)}(a)?a.canActivate(e,n):o.runInContext(()=>a(e,n))).pipe(Ts())}));return Pe(r).pipe(ra())}(n,r.route,t))),Ts(r=>!0!==r,!0))}(i,s,n,e):Pe(a)),ct(a=>({...t,guardsResult:a})))})}(this.environmentInjector,o=>this.events.next(o)),Wn(o=>{if(i.guardsResult=o.guardsResult,_1(o.guardsResult))throw S_(0,o.guardsResult);const a=new YF(o.id,this.urlSerializer.serialize(o.extractedUrl),this.urlSerializer.serialize(o.urlAfterRedirects),o.targetSnapshot,!!o.guardsResult);this.events.next(a)}),As(o=>!!o.guardsResult||(t.restoreHistory(o),this.cancelNavigationTransition(o,"",3,t),!1)),jd(o=>{if(o.guards.canActivateChecks.length)return Pe(o).pipe(Wn(a=>{const c=new XF(a.id,this.urlSerializer.serialize(a.extractedUrl),this.urlSerializer.serialize(a.urlAfterRedirects),a.targetSnapshot);this.events.next(c)}),Er(a=>{let c=!1;return Pe(a).pipe(function sV(n,e){return Rn(t=>{const{targetSnapshot:i,guards:{canActivateChecks:r}}=t;if(!r.length)return Pe(t);let s=0;return mn(r).pipe(g1(o=>function oV(n,e,t,i){const r=n.routeConfig,s=n._resolve;return void 0!==r?.title&&!$_(r)&&(s[J2]=r.title),function aV(n,e,t,i){const r=function cV(n){return[...Object.keys(n),...Object.getOwnPropertySymbols(n)]}(n);if(0===r.length)return Pe({});const s={};return mn(r).pipe(Rn(o=>function lV(n,e,t,i){const r=ac(e)??i,s=ia(n,r);return Ls(s.resolve?s.resolve(e,t):r.runInContext(()=>s(e,t)))}(n[o],e,t,i).pipe(Ts(),Wn(a=>{s[o]=a}))),Sd(1),function _F(n){return ct(()=>n)}(s),Is(o=>Gd(o)?kr:X2(o)))}(s,n,e,i).pipe(ct(o=>(n._resolvedData=o,n.data=M_(n,t).resolve,r&&$_(r)&&(n.data[J2]=r.title),null)))}(o.route,i,n,e)),Wn(()=>s++),Sd(1),Rn(o=>s===r.length?Pe(t):kr))})}(t.paramsInheritanceStrategy,this.environmentInjector),Wn({next:()=>c=!0,complete:()=>{c||(t.restoreHistory(a),this.cancelNavigationTransition(a,"",2,t))}}))}),Wn(a=>{const c=new KF(a.id,this.urlSerializer.serialize(a.extractedUrl),this.urlSerializer.serialize(a.urlAfterRedirects),a.targetSnapshot);this.events.next(c)}))}),jd(o=>{const a=c=>{const l=[];c.routeConfig?.loadComponent&&!c.routeConfig._loadedComponent&&l.push(this.configLoader.loadComponent(c.routeConfig).pipe(Wn(u=>{c.component=u}),ct(()=>{})));for(const u of c.children)l.push(...a(u));return l};return Zy(a(o.targetSnapshot.root)).pipe(nu(),K2(1))}),jd(()=>t.afterPreactivation()),ct(o=>{const a=function lk(n,e,t){const i=sc(n,e._root,t?t._root:void 0);return new x_(i,e)}(t.routeReuseStrategy,o.targetSnapshot,o.currentRouterState);return i={...o,targetRouterState:a}}),Wn(o=>{t.currentUrlTree=o.urlAfterRedirects,t.rawUrlTree=t.urlHandlingStrategy.merge(o.urlAfterRedirects,o.rawUrl),t.routerState=o.targetRouterState,"deferred"===t.urlUpdateStrategy&&(o.extras.skipLocationChange||t.setBrowserUrl(t.rawUrlTree,o),t.browserUrlTree=o.urlAfterRedirects)}),((n,e,t)=>ct(i=>(new _k(e,i.targetRouterState,i.currentRouterState,t).activate(n),i)))(this.rootContexts,t.routeReuseStrategy,o=>this.events.next(o)),Wn({next:o=>{r=!0,this.lastSuccessfulNavigation=this.currentNavigation,t.navigated=!0,this.events.next(new x1(o.id,this.urlSerializer.serialize(o.extractedUrl),this.urlSerializer.serialize(t.currentUrlTree))),t.titleStrategy?.updateTitle(o.targetRouterState.snapshot),o.resolve(!0)},complete:()=>{r=!0}}),Ed(()=>{r||s||this.cancelNavigationTransition(i,"",1,t),this.currentNavigation?.id===i.id&&(this.currentNavigation=null)}),Is(o=>{if(s=!0,A_(o)){D_(o)||(t.navigated=!0,t.restoreHistory(i,!0));const a=new uu(i.id,this.urlSerializer.serialize(i.extractedUrl),o.message,o.cancellationCode);if(this.events.next(a),D_(o)){const c=t.urlHandlingStrategy.merge(o.url,t.rawUrlTree),l={skipLocationChange:i.extras.skipLocationChange,replaceUrl:"eager"===t.urlUpdateStrategy||Y_(i.source)};t.scheduleNavigation(c,"imperative",null,l,{resolve:i.resolve,reject:i.reject,promise:i.promise})}else i.resolve(!1)}else{t.restoreHistory(i,!0);const a=new v_(i.id,this.urlSerializer.serialize(i.extractedUrl),o,i.targetSnapshot??void 0);this.events.next(a);try{i.resolve(t.errorHandler(o))}catch(c){i.reject(c)}}return kr}))}))}cancelNavigationTransition(t,i,r,s){const o=new uu(t.id,this.urlSerializer.serialize(t.extractedUrl),i,r);this.events.next(o),t.resolve(!1)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=Ae({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function Y_(n){return"imperative"!==n}let X_=(()=>{class n{buildTitle(t){let i,r=t.root;for(;void 0!==r;)i=this.getResolvedTitleForRoute(r)??i,r=r.children.find(s=>s.outlet===nt);return i}getResolvedTitleForRoute(t){return t.data[J2]}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=Ae({token:n,factory:function(){return Re(dV)},providedIn:"root"}),n})(),dV=(()=>{class n extends X_{constructor(t){super(),this.title=t}updateTitle(t){const i=this.buildTitle(t);void 0!==i&&this.title.setTitle(i)}}return n.\u0275fac=function(t){return new(t||n)(ue(Gy))},n.\u0275prov=Ae({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),hV=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=Ae({token:n,factory:function(){return Re(mV)},providedIn:"root"}),n})();class pV{shouldDetach(e){return!1}store(e,t){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,t){return e.routeConfig===t.routeConfig}}let mV=(()=>{class n extends pV{}return n.\u0275fac=function(){let e;return function(i){return(e||(e=$0(n)))(i||n)}}(),n.\u0275prov=Ae({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const _u=new oe("",{providedIn:"root",factory:()=>({})});let vV=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=Ae({token:n,factory:function(){return Re(yV)},providedIn:"root"}),n})(),yV=(()=>{class n{shouldProcessUrl(t){return!0}extract(t){return t}merge(t,i){return t}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=Ae({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function _V(n){throw n}function xV(n,e,t){return e.parse("/")}const bV={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},MV={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};let Mi=(()=>{class n{constructor(){this.disposed=!1,this.currentPageId=0,this.console=Re(Vz),this.isNgZoneEnabled=!1,this.options=Re(_u,{optional:!0})||{},this.errorHandler=this.options.errorHandler||_V,this.malformedUriErrorHandler=this.options.malformedUriErrorHandler||xV,this.navigated=!1,this.lastSuccessfulId=-1,this.afterPreactivation=()=>Pe(void 0),this.urlHandlingStrategy=Re(vV),this.routeReuseStrategy=Re(hV),this.urlCreationStrategy=Re(ok),this.titleStrategy=Re(X_),this.onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore",this.paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly",this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.canceledNavigationResolution=this.options.canceledNavigationResolution||"replace",this.config=t_(Re(sa,{optional:!0})??[]),this.navigationTransitions=Re(Zd),this.urlSerializer=Re(ec),this.location=Re(Yf),this.rootComponentType=null,this.isNgZoneEnabled=Re(tn)instanceof tn&&tn.isInAngularZone(),this.resetConfig(this.config),this.currentUrlTree=new v1,this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.routerState=b_(this.currentUrlTree,this.rootComponentType),this.navigationTransitions.setupNavigations(this).subscribe(t=>{this.lastSuccessfulId=t.id,this.currentPageId=t.targetPageId},t=>{this.console.warn(`Unhandled Navigation Error: ${t}`)})}get navigationId(){return this.navigationTransitions.navigationId}get browserPageId(){return this.location.getState()?.\u0275routerPageId}get events(){return this.navigationTransitions.events}resetRootComponentType(t){this.rootComponentType=t,this.routerState.root.component=this.rootComponentType}initialNavigation(){this.setUpLocationChangeListener(),this.navigationTransitions.hasRequestedNavigation||this.navigateByUrl(this.location.path(!0),{replaceUrl:!0})}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(t=>{const i="popstate"===t.type?"popstate":"hashchange";"popstate"===i&&setTimeout(()=>{const r={replaceUrl:!0},s=t.state?.navigationId?t.state:null;if(t.state){const a={...t.state};delete a.navigationId,delete a.\u0275routerPageId,0!==Object.keys(a).length&&(r.state=a)}const o=this.parseUrl(t.url);this.scheduleNavigation(o,i,s,r)},0)}))}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}resetConfig(t){this.config=t.map(Bd),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.navigationTransitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}createUrlTree(t,i={}){const{relativeTo:r,queryParams:s,fragment:o,queryParamsHandling:a,preserveFragment:c}=i,l=c?this.currentUrlTree.fragment:o;let u=null;switch(a){case"merge":u={...this.currentUrlTree.queryParams,...s};break;case"preserve":u=this.currentUrlTree.queryParams;break;default:u=s||null}return null!==u&&(u=this.removeEmptyProps(u)),this.urlCreationStrategy.createUrlTree(r,this.routerState,this.currentUrlTree,t,u,l??null)}navigateByUrl(t,i={skipLocationChange:!1}){const r=_1(t)?t:this.parseUrl(t),s=this.urlHandlingStrategy.merge(r,this.rawUrlTree);return this.scheduleNavigation(s,"imperative",null,i)}navigate(t,i={skipLocationChange:!1}){return function wV(n){for(let e=0;e<n.length;e++){if(null==n[e])throw new fe(4008,!1)}}(t),this.navigateByUrl(this.createUrlTree(t,i),i)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){let i;try{i=this.urlSerializer.parse(t)}catch(r){i=this.malformedUriErrorHandler(r,this.urlSerializer,t)}return i}isActive(t,i){let r;if(r=!0===i?{...bV}:!1===i?{...MV}:i,_1(t))return r_(this.currentUrlTree,t,r);const s=this.parseUrl(t);return r_(this.currentUrlTree,s,r)}removeEmptyProps(t){return Object.keys(t).reduce((i,r)=>{const s=t[r];return null!=s&&(i[r]=s),i},{})}scheduleNavigation(t,i,r,s,o){if(this.disposed)return Promise.resolve(!1);let a,c,l,u;return o?(a=o.resolve,c=o.reject,l=o.promise):l=new Promise((f,d)=>{a=f,c=d}),"computed"===this.canceledNavigationResolution?(0===this.currentPageId&&(r=this.location.getState()),u=r&&r.\u0275routerPageId?r.\u0275routerPageId:s.replaceUrl||s.skipLocationChange?this.browserPageId??0:(this.browserPageId??0)+1):u=0,this.navigationTransitions.handleNavigationRequest({targetPageId:u,source:i,restoredState:r,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:t,extras:s,resolve:a,reject:c,promise:l,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),l.catch(f=>Promise.reject(f))}setBrowserUrl(t,i){const r=this.urlSerializer.serialize(t),s={...i.extras.state,...this.generateNgRouterState(i.id,i.targetPageId)};this.location.isCurrentPathEqualTo(r)||i.extras.replaceUrl?this.location.replaceState(r,"",s):this.location.go(r,"",s)}restoreHistory(t,i=!1){if("computed"===this.canceledNavigationResolution){const r=this.currentPageId-t.targetPageId;"popstate"!==t.source&&"eager"!==this.urlUpdateStrategy&&this.currentUrlTree!==this.getCurrentNavigation()?.finalUrl||0===r?this.currentUrlTree===this.getCurrentNavigation()?.finalUrl&&0===r&&(this.resetState(t),this.browserUrlTree=t.currentUrlTree,this.resetUrlToCurrentUrlTree()):this.location.historyGo(r)}else"replace"===this.canceledNavigationResolution&&(i&&this.resetState(t),this.resetUrlToCurrentUrlTree())}resetState(t){this.routerState=t.currentRouterState,this.currentUrlTree=t.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(t,i){return"computed"===this.canceledNavigationResolution?{navigationId:t,\u0275routerPageId:i}:{navigationId:t}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=Ae({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();class J_{}let EV=(()=>{class n{constructor(t,i,r,s,o){this.router=t,this.injector=r,this.preloadingStrategy=s,this.loader=o}setUpPreloading(){this.subscription=this.router.events.pipe(As(t=>t instanceof x1),g1(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(t,i){const r=[];for(const s of i){s.providers&&!s._injector&&(s._injector=I3(s.providers,t,`Route: ${s.path}`));const o=s._injector??t,a=s._loadedInjector??o;s.loadChildren&&!s._loadedRoutes&&void 0===s.canLoad||s.loadComponent&&!s._loadedComponent?r.push(this.preloadConfig(o,s)):(s.children||s._loadedRoutes)&&r.push(this.processRoutes(a,s.children??s._loadedRoutes))}return mn(r).pipe(uo())}preloadConfig(t,i){return this.preloadingStrategy.preload(i,()=>{let r;r=i.loadChildren&&void 0===i.canLoad?this.loader.loadChildren(t,i):Pe(null);const s=r.pipe(Rn(o=>null===o?Pe(void 0):(i._loadedRoutes=o.routes,i._loadedInjector=o.injector,this.processRoutes(o.injector??t,o.routes))));return i.loadComponent&&!i._loadedComponent?mn([s,this.loader.loadComponent(i)]).pipe(uo()):s})}}return n.\u0275fac=function(t){return new(t||n)(ue(Mi),ue(Av),ue($r),ue(J_),ue(qd))},n.\u0275prov=Ae({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const Xd=new oe("");let Q_=(()=>{class n{constructor(t,i,r,s,o={}){this.urlSerializer=t,this.transitions=i,this.viewportScroller=r,this.zone=s,this.options=o,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},o.scrollPositionRestoration=o.scrollPositionRestoration||"disabled",o.anchorScrolling=o.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.transitions.events.subscribe(t=>{t instanceof zd?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=t.navigationTrigger,this.restoredId=t.restoredState?t.restoredState.navigationId:0):t instanceof x1&&(this.lastId=t.id,this.scheduleScrollEvent(t,this.urlSerializer.parse(t.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.transitions.events.subscribe(t=>{t instanceof y_&&(t.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(t.position):t.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(t.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(t,i){this.zone.runOutsideAngular(()=>{setTimeout(()=>{this.zone.run(()=>{this.transitions.events.next(new y_(t,"popstate"===this.lastSource?this.store[this.restoredId]:null,i))})},0)})}ngOnDestroy(){this.routerEventsSubscription?.unsubscribe(),this.scrollEventsSubscription?.unsubscribe()}}return n.\u0275fac=function(t){!function Np(){throw new Error("invalid")}()},n.\u0275prov=Ae({token:n,factory:n.\u0275fac}),n})();function aa(n,e){return{\u0275kind:n,\u0275providers:e}}function tx(){const n=Re(tr);return e=>{const t=n.get(F3);if(e!==t.components[0])return;const i=n.get(Mi),r=n.get(nx);1===n.get(Jd)&&i.initialNavigation(),n.get(ix,null,Fe.Optional)?.setUpPreloading(),n.get(Xd,null,Fe.Optional)?.init(),i.resetRootComponentType(t.componentTypes[0]),r.closed||(r.next(),r.unsubscribe())}}const nx=new oe("",{factory:()=>new mr}),Jd=new oe("",{providedIn:"root",factory:()=>1});const ix=new oe("");function LV(n){return aa(0,[{provide:ix,useExisting:EV},{provide:J_,useExisting:n}])}const rx=new oe("ROUTER_FORROOT_GUARD"),RV=[Yf,{provide:ec,useClass:Dd},Mi,oc,{provide:na,useFactory:function ex(n){return n.routerState.root},deps:[Mi]},qd,[]];function zV(){return new Nv("Router",Mi)}let sx=(()=>{class n{constructor(t){}static forRoot(t,i){return{ngModule:n,providers:[RV,[],{provide:sa,multi:!0,useValue:t},{provide:rx,useFactory:FV,deps:[[Mi,new y2,new _2]]},{provide:_u,useValue:i||{}},i?.useHash?{provide:m1,useClass:DP}:{provide:m1,useClass:ry},{provide:Xd,useFactory:()=>{const n=Re(YN),e=Re(tn),t=Re(_u),i=Re(Zd),r=Re(ec);return t.scrollOffset&&n.setOffset(t.scrollOffset),new Q_(r,i,n,e,t)}},i?.preloadingStrategy?LV(i.preloadingStrategy).\u0275providers:[],{provide:Nv,multi:!0,useFactory:zV},i?.initialNavigation?kV(i):[],[{provide:ox,useFactory:tx},{provide:Dv,multi:!0,useExisting:ox}]]}}static forChild(t){return{ngModule:n,providers:[{provide:sa,multi:!0,useValue:t}]}}}return n.\u0275fac=function(t){return new(t||n)(ue(rx,8))},n.\u0275mod=Xi({type:n}),n.\u0275inj=Li({imports:[Hd]}),n})();function FV(n){return"guarded"}function kV(n){return["disabled"===n.initialNavigation?aa(3,[{provide:P3,multi:!0,useFactory:()=>{const e=Re(Mi);return()=>{e.setUpLocationChangeListener()}}},{provide:Jd,useValue:2}]).\u0275providers:[],"enabledBlocking"===n.initialNavigation?aa(2,[{provide:Jd,useValue:0},{provide:P3,multi:!0,deps:[tr],useFactory:e=>{const t=e.get(SP,Promise.resolve());return()=>t.then(()=>new Promise(r=>{const s=e.get(Mi),o=e.get(nx);(function i(r){e.get(Mi).events.pipe(As(o=>o instanceof x1||o instanceof uu||o instanceof v_),ct(o=>o instanceof x1||o instanceof uu&&(0===o.code||1===o.code)&&null),As(o=>null!==o),K2(1)).subscribe(()=>{r()})})(()=>{r(!0)}),s.afterPreactivation=()=>(r(!0),o.closed?Pe(void 0):o),s.initialNavigation()}))}}]).\u0275providers:[]]}const ox=new oe("");class ca{}ca.\u0275fac=function(e){return new(e||ca)},ca.\u0275mod=Xi({type:ca}),ca.\u0275inj=Li({imports:[sx.forRoot([]),sx]});class UV extends hi{constructor(e,t){super()}schedule(e,t=0){return this}}const xu={setInterval(n,e,...t){const{delegate:i}=xu;return i?.setInterval?i.setInterval(n,e,...t):setInterval(n,e,...t)},clearInterval(n){const{delegate:e}=xu;return(e?.clearInterval||clearInterval)(n)},delegate:void 0};class BV extends UV{constructor(e,t){super(e,t),this.scheduler=e,this.work=t,this.pending=!1}schedule(e,t=0){var i;if(this.closed)return this;this.state=e;const r=this.id,s=this.scheduler;return null!=r&&(this.id=this.recycleAsyncId(s,r,t)),this.pending=!0,this.delay=t,this.id=null!==(i=this.id)&&void 0!==i?i:this.requestAsyncId(s,this.id,t),this}requestAsyncId(e,t,i=0){return xu.setInterval(e.flush.bind(e,this),i)}recycleAsyncId(e,t,i=0){if(null!=i&&this.delay===i&&!1===this.pending)return t;null!=t&&xu.clearInterval(t)}execute(e,t){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const i=this._execute(e,t);if(i)return i;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(e,t){let r,i=!1;try{this.work(e)}catch(s){i=!0,r=s||new Error("Scheduled action threw falsy error")}if(i)return this.unsubscribe(),r}unsubscribe(){if(!this.closed){const{id:e,scheduler:t}=this,{actions:i}=t;this.work=this.state=this.scheduler=null,this.pending=!1,lo(i,this),null!=e&&(this.id=this.recycleAsyncId(t,e,null)),this.delay=null,super.unsubscribe()}}}const ax={now:()=>(ax.delegate||Date).now(),delegate:void 0};class hc{constructor(e,t=hc.now){this.schedulerActionCtor=e,this.now=t}schedule(e,t=0,i){return new this.schedulerActionCtor(this,e).schedule(i,t)}}hc.now=ax.now;class WV extends hc{constructor(e,t=hc.now){super(e,t),this.actions=[],this._active=!1}flush(e){const{actions:t}=this;if(this._active)return void t.push(e);let i;this._active=!0;do{if(i=e.execute(e.state,e.delay))break}while(e=t.shift());if(this._active=!1,i){for(;e=t.shift();)e.unsubscribe();throw i}}}const jV=new class $V extends WV{}(class GV extends BV{constructor(e,t){super(e,t),this.scheduler=e,this.work=t}schedule(e,t=0){return t>0?super.schedule(e,t):(this.delay=t,this.state=e,this.scheduler.flush(this),this)}execute(e,t){return t>0||this.closed?super.execute(e,t):this._execute(e,t)}requestAsyncId(e,t,i=0){return null!=i&&i>0||null==i&&this.delay>0?super.requestAsyncId(e,t,i):(e.flush(this),0)}});function XV(n,e){return n===e}const pc={};function mc(n,e){if(pc[n]=(pc[n]||0)+1,"function"==typeof e)return Qd(n,(...i)=>({...e(...i),type:n}));switch(e?e._as:"empty"){case"empty":return Qd(n,()=>({type:n}));case"props":return Qd(n,i=>({...i,type:n}));default:throw new Error("Unexpected config.")}}function Qd(n,e){return Object.defineProperty(e,"type",{value:n,writable:!1})}const lx="@ngrx/store/init";let b1=(()=>{class n extends ui{constructor(){super({type:lx})}next(t){if("function"==typeof t)throw new TypeError("\n        Dispatch expected an object, instead it received a function.\n        If you're using the createAction function, make sure to invoke the function\n        before dispatching the action. For example, someAction should be someAction().");if(typeof t>"u")throw new TypeError("Actions must be objects");if(typeof t.type>"u")throw new TypeError("Actions must have a type property");super.next(t)}complete(){}ngOnDestroy(){super.complete()}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=Ae({token:n,factory:n.\u0275fac}),n})();const QV=[b1],th=new oe("@ngrx/store Internal Root Guard"),ux=new oe("@ngrx/store Internal Initial State"),nh=new oe("@ngrx/store Initial State"),fx=new oe("@ngrx/store Reducer Factory"),dx=new oe("@ngrx/store Internal Reducer Factory Provider"),hx=new oe("@ngrx/store Initial Reducers"),ih=new oe("@ngrx/store Internal Initial Reducers"),px=new oe("@ngrx/store Store Features"),mx=new oe("@ngrx/store Internal Store Reducers"),rh=new oe("@ngrx/store Internal Feature Reducers"),gx=new oe("@ngrx/store Internal Feature Configs"),sh=new oe("@ngrx/store Internal Store Features"),vx=new oe("@ngrx/store Internal Feature Reducers Token"),oh=new oe("@ngrx/store Feature Reducers"),yx=new oe("@ngrx/store User Provided Meta Reducers"),bu=new oe("@ngrx/store Meta Reducers"),_x=new oe("@ngrx/store Internal Resolved Meta Reducers"),xx=new oe("@ngrx/store User Runtime Checks Config"),bx=new oe("@ngrx/store Internal User Runtime Checks Config"),gc=new oe("@ngrx/store Internal Runtime Checks"),vc=new oe("@ngrx/store Check if Action types are unique");function ch(n,e={}){const t=Object.keys(n),i={};for(let s=0;s<t.length;s++){const o=t[s];"function"==typeof n[o]&&(i[o]=n[o])}const r=Object.keys(i);return function(o,a){o=void 0===o?e:o;let c=!1;const l={};for(let u=0;u<r.length;u++){const f=r[u],h=o[f],p=(0,i[f])(h,a);l[f]=p,c=c||p!==h}return c?l:o}}function wx(...n){return function(e){if(0===n.length)return e;const t=n[n.length-1];return n.slice(0,-1).reduceRight((r,s)=>s(r),t(e))}}function Cx(n,e){return Array.isArray(e)&&e.length>0&&(n=wx.apply(null,[...e,n])),(t,i)=>{const r=n(t);return(s,o)=>r(s=void 0===s?i:s,o)}}new oe("@ngrx/store Root Store Provider"),new oe("@ngrx/store Feature State Provider");class Mu extends qt{}class Sx extends b1{}let yc=(()=>{class n extends ui{constructor(t,i,r,s){super(s(r,i)),this.dispatcher=t,this.initialState=i,this.reducers=r,this.reducerFactory=s}get currentReducers(){return this.reducers}addFeature(t){this.addFeatures([t])}addFeatures(t){const i=t.reduce((r,{reducers:s,reducerFactory:o,metaReducers:a,initialState:c,key:l})=>{const u="function"==typeof s?function tH(n){const e=Array.isArray(n)&&n.length>0?wx(...n):t=>t;return(t,i)=>(t=e(t),(r,s)=>t(r=void 0===r?i:r,s))}(a)(s,c):Cx(o,a)(s,c);return r[l]=u,r},{});this.addReducers(i)}removeFeature(t){this.removeFeatures([t])}removeFeatures(t){this.removeReducers(t.map(i=>i.key))}addReducer(t,i){this.addReducers({[t]:i})}addReducers(t){this.reducers={...this.reducers,...t},this.updateReducers(Object.keys(t))}removeReducer(t){this.removeReducers([t])}removeReducers(t){t.forEach(i=>{this.reducers=function eH(n,e){return Object.keys(n).filter(t=>t!==e).reduce((t,i)=>Object.assign(t,{[i]:n[i]}),{})}(this.reducers,i)}),this.updateReducers(t)}updateReducers(t){this.next(this.reducerFactory(this.reducers,this.initialState)),this.dispatcher.next({type:"@ngrx/store/update-reducers",features:t})}ngOnDestroy(){this.complete()}}return n.\u0275fac=function(t){return new(t||n)(ue(Sx),ue(nh),ue(hx),ue(fx))},n.\u0275prov=Ae({token:n,factory:n.\u0275fac}),n})();const iH=[yc,{provide:Mu,useExisting:yc},{provide:Sx,useExisting:b1}];let wu=(()=>{class n extends mr{ngOnDestroy(){this.complete()}}return n.\u0275fac=function(){let e;return function(i){return(e||(e=$0(n)))(i||n)}}(),n.\u0275prov=Ae({token:n,factory:n.\u0275fac}),n})();const rH=[wu];class Ex extends qt{}let Dx=(()=>{class n extends ui{constructor(t,i,r,s){super(s);const a=t.pipe(f0(jV)).pipe(function qV(...n){const e=l7(n);return an((t,i)=>{const r=n.length,s=new Array(r);let o=n.map(()=>!1),a=!1;for(let c=0;c<r;c++)Zi(n[c]).subscribe(Qt(i,l=>{s[c]=l,!a&&!o[c]&&(o[c]=!0,(a=o.every(Or))&&(o=null))},n0));t.subscribe(Qt(i,c=>{if(a){const l=[c,...s];i.next(e?e(...l):l)}}))})}(i)),l=a.pipe(Cd(sH,{state:s}));this.stateSubscription=l.subscribe(({state:u,action:f})=>{this.next(u),r.next(f)})}ngOnDestroy(){this.stateSubscription.unsubscribe(),this.complete()}}return n.INIT=lx,n.\u0275fac=function(t){return new(t||n)(ue(b1),ue(Mu),ue(wu),ue(nh))},n.\u0275prov=Ae({token:n,factory:n.\u0275fac}),n})();function sH(n={state:void 0},[e,t]){const{state:i}=n;return{state:t(i,e),action:e}}const oH=[Dx,{provide:Ex,useExisting:Dx}];let la=(()=>{class n extends qt{constructor(t,i,r){super(),this.actionsObserver=i,this.reducerManager=r,this.source=t}select(t,...i){return lh.call(null,t,...i)(this)}lift(t){const i=new n(this,this.actionsObserver,this.reducerManager);return i.operator=t,i}dispatch(t){this.actionsObserver.next(t)}next(t){this.actionsObserver.next(t)}error(t){this.actionsObserver.error(t)}complete(){this.actionsObserver.complete()}addReducer(t,i){this.reducerManager.addReducer(t,i)}removeReducer(t){this.reducerManager.removeReducer(t)}}return n.\u0275fac=function(t){return new(t||n)(ue(Ex),ue(b1),ue(yc))},n.\u0275prov=Ae({token:n,factory:n.\u0275fac}),n})();const aH=[la];function lh(n,e,...t){return function(r){let s;if("string"==typeof n){const o=[e,...t].filter(Boolean);s=r.pipe(function ZV(...n){const e=n.length;if(0===e)throw new Error("list of properties cannot be empty.");return ct(t=>{let i=t;for(let r=0;r<e;r++){const s=i?.[n[r]];if(!(typeof s<"u"))return;i=s}return i})}(n,...o))}else{if("function"!=typeof n)throw new TypeError(`Unexpected type '${typeof n}' in select operator, expected 'string' or 'function'`);s=r.pipe(ct(o=>n(o,e)))}return s.pipe(function YV(n,e=Or){return n=n??XV,an((t,i)=>{let r,s=!0;t.subscribe(Qt(i,o=>{const a=e(o);(s||!n(r,a))&&(s=!1,r=a,i.next(o))}))})}())}}const uh="https://ngrx.io/guide/store/configuration/runtime-checks";function Ax(n){return void 0===n}function Tx(n){return null===n}function Ix(n){return Array.isArray(n)}function Lx(n){return"object"==typeof n&&null!==n}function fh(n){return"function"==typeof n}function bH(n){return n instanceof oe?Re(n):n}function MH(n,e){return e.map((t,i)=>{if(n[i]instanceof oe){const r=Re(n[i]);return{key:t.key,reducerFactory:r.reducerFactory?r.reducerFactory:ch,metaReducers:r.metaReducers?r.metaReducers:[],initialState:r.initialState}}return t})}function wH(n){return n.map(e=>e instanceof oe?Re(e):e)}function ph(n){return"function"==typeof n?n():n}function CH(n,e){return n.concat(e)}function SH(){if(Re(la,{optional:!0,skipSelf:!0}))throw new TypeError("The root Store has been provided more than once. Feature modules should provide feature states instead.");return"guarded"}function mh(n){Object.freeze(n);const e=fh(n);return Object.getOwnPropertyNames(n).forEach(t=>{if(!t.startsWith("\u0275")&&function hH(n,e){return Object.prototype.hasOwnProperty.call(n,e)}(n,t)&&(!e||"caller"!==t&&"callee"!==t&&"arguments"!==t)){const i=n[t];(Lx(i)||fh(i))&&!Object.isFrozen(i)&&mh(i)}}),n}function gh(n,e=[]){return(Ax(n)||Tx(n))&&0===e.length?{path:["root"],value:n}:Object.keys(n).reduce((i,r)=>{if(i)return i;const s=n[r];return function dH(n){return fh(n)&&n.hasOwnProperty("\u0275cmp")}(s)?i:!(Ax(s)||Tx(s)||function uH(n){return"number"==typeof n}(s)||function lH(n){return"boolean"==typeof n}(s)||function cH(n){return"string"==typeof n}(s)||Ix(s))&&(function Rx(n){if(!function fH(n){return Lx(n)&&!Ix(n)}(n))return!1;const e=Object.getPrototypeOf(n);return e===Object.prototype||null===e}(s)?gh(s,[...e,r]):{path:[...e,r],value:s})},!1)}function Nx(n,e){if(!1===n)return;const t=n.path.join("."),i=new Error(`Detected unserializable ${e} at "${t}". ${uh}#strict${e}serializability`);throw i.value=n.value,i.unserializablePath=t,i}function TH(n){return{strictStateSerializability:!1,strictActionSerializability:!1,strictStateImmutability:!1,strictActionImmutability:!1,strictActionWithinNgZone:!1,strictActionTypeUniqueness:!1}}function IH({strictActionSerializability:n,strictStateSerializability:e}){return t=>n||e?function DH(n,e){return function(t,i){e.action(i)&&Nx(gh(i),"action");const r=n(t,i);return e.state()&&Nx(gh(r),"state"),r}}(t,{action:i=>n&&!vh(i),state:()=>e}):t}function LH({strictActionImmutability:n,strictStateImmutability:e}){return t=>n||e?function EH(n,e){return function(t,i){const r=e.action(i)?mh(i):i,s=n(t,r);return e.state()?mh(s):s}}(t,{action:i=>n&&!vh(i),state:()=>e}):t}function vh(n){return n.type.startsWith("@ngrx")}function RH({strictActionWithinNgZone:n}){return e=>n?function AH(n,e){return function(t,i){if(e.action(i)&&!tn.isInAngularZone())throw new Error(`Action '${i.type}' running outside NgZone. ${uh}#strictactionwithinngzone`);return n(t,i)}}(e,{action:t=>n&&!vh(t)}):e}function zH(n){return[{provide:bx,useValue:n},{provide:xx,useFactory:PH,deps:[bx]},{provide:gc,deps:[xx],useFactory:TH},{provide:bu,multi:!0,deps:[gc],useFactory:LH},{provide:bu,multi:!0,deps:[gc],useFactory:IH},{provide:bu,multi:!0,deps:[gc],useFactory:RH}]}function Ox(){return[{provide:vc,multi:!0,deps:[gc],useFactory:NH}]}function PH(n){return n}function NH(n){if(!n.strictActionTypeUniqueness)return;const e=Object.entries(pc).filter(([,t])=>t>1).map(([t])=>t);if(e.length)throw new Error(`Action types are registered more than once, ${e.map(t=>`"${t}"`).join(", ")}. ${uh}#strictactiontypeuniqueness`)}function Fx(n={},e={}){return[{provide:th,useFactory:SH},{provide:ux,useValue:e.initialState},{provide:nh,useFactory:ph,deps:[ux]},{provide:ih,useValue:n},{provide:mx,useExisting:n instanceof oe?n:ih},{provide:hx,deps:[ih,[new v2(mx)]],useFactory:bH},{provide:yx,useValue:e.metaReducers?e.metaReducers:[]},{provide:_x,deps:[bu,yx],useFactory:CH},{provide:dx,useValue:e.reducerFactory?e.reducerFactory:ch},{provide:fx,deps:[dx,_x],useFactory:Cx},QV,iH,rH,oH,aH,zH(e.runtimeChecks),Ox()]}function kx(n,e,t={}){return[{provide:gx,multi:!0,useValue:n instanceof Object?{}:t},{provide:px,multi:!0,useValue:{key:n instanceof Object?n.name:n,reducerFactory:t instanceof oe||!t.reducerFactory?ch:t.reducerFactory,metaReducers:t instanceof oe||!t.metaReducers?[]:t.metaReducers,initialState:t instanceof oe||!t.initialState?void 0:t.initialState}},{provide:sh,deps:[gx,px],useFactory:MH},{provide:rh,multi:!0,useValue:n instanceof Object?n.reducer:e},{provide:vx,multi:!0,useExisting:e instanceof oe?e:rh},{provide:oh,multi:!0,deps:[rh,[new v2(vx)]],useFactory:wH},Ox()]}let Vx=(()=>{class n{constructor(t,i,r,s,o,a){}}return n.\u0275fac=function(t){return new(t||n)(ue(b1),ue(Mu),ue(wu),ue(la),ue(th,8),ue(vc,8))},n.\u0275mod=Xi({type:n}),n.\u0275inj=Li({}),n})(),HH=(()=>{class n{constructor(t,i,r,s,o){this.features=t,this.featureReducers=i,this.reducerManager=r;const a=t.map((c,l)=>{const f=i.shift()[l];return{...c,reducers:f,initialState:ph(c.initialState)}});r.addFeatures(a)}ngOnDestroy(){this.reducerManager.removeFeatures(this.features)}}return n.\u0275fac=function(t){return new(t||n)(ue(sh),ue(oh),ue(yc),ue(Vx),ue(vc,8))},n.\u0275mod=Xi({type:n}),n.\u0275inj=Li({}),n})(),UH=(()=>{class n{static forRoot(t,i){return{ngModule:Vx,providers:[...Fx(t,i)]}}static forFeature(t,i,r={}){return{ngModule:HH,providers:[...kx(t,i,r)]}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=Xi({type:n}),n.\u0275inj=Li({}),n})();function yh(...n){return{reducer:n.pop(),types:n.map(i=>i.type)}}var Cu=(()=>{return(n=Cu||(Cu={})).MAKERS_FUND="Makers Fund",n.BlockXYZ="Block XYZ",n.REVEAL="Reveal",n.BIRD="Bird",n.WATCH="Watch",n.TOY_SHADER="Toy Shader",n.DISPLACEMENT_SHADER="Displacement Shader",n.SPACE_DUST="Space Dust",n.TEXT_DUST_ANIM="Text Dust Anim",n.YogForm="Yog Form",n.TEXT_STRACE="Text Strace",n.FACE_SELECTION="Face Selection",n.STRIP_GLOBE="Strip Globe",Cu;var n})(),M1=(()=>{return(n=M1||(M1={})).HOME="HOME",n.ABOUT="ABOUT",n.PORTFOLIO="PORTFOLIO",n.CONTACT="CONTACT",n.NEWS="NEWS",M1;var n})();function GH(n,e){if(1&n){const t=Q5();We(0,"div",3)(1,"div",4),ci("click",function(){const s=T0(t).$implicit;return I0(M3().onItemClick(s))}),zt(2," \u27bd "),We(3,"span",5),zt(4),ft()(),cn(5,"hr"),ft()}if(2&n){const t=e.$implicit;Ft(4),S3("",t," ")}}const WH=function(n){return{show:n}};class _c{constructor(){this.menuItems=Object.values(Cu),this.show=!1}onMenuClick(){this.show=!this.show,console.log("onMenuClick ~~~",this.show)}onItemClick(e){console.log("item ~~~",e)}}_c.\u0275fac=function(e){return new(e||_c)},_c.\u0275cmp=zi({type:_c,selectors:[["app-menu"]],decls:4,vars:4,consts:[[1,"menu-nav","btn",3,"click"],[1,"nav-container",3,"ngClass"],["class","nav-btn btn",4,"ngFor","ngForOf"],[1,"nav-btn","btn"],[1,"menu-select",3,"click"],[1,"nav-text"]],template:function(e,t){1&e&&(We(0,"button",0),ci("click",function(){return t.onMenuClick()}),zt(1,"\u2630"),ft(),We(2,"div",1),$o(3,GH,6,1,"div",2),ft()),2&e&&(Ft(2),vn("ngClass",h1(2,WH,t.show)),Ft(1),vn("ngForOf",t.menuItems))},dependencies:[sd,gy],styles:[".menu-nav[_ngcontent-%COMP%]{font-size:22px;left:auto;right:0;top:0;margin:5px 5px 0 0;position:fixed;padding-top:6px;z-index:100;background-color:#111}.nav-container[_ngcontent-%COMP%]{position:fixed;inset:50px -300px 0 auto;text-align:left;width:250px;z-index:41;overflow-y:auto;opacity:0;transition:all .2s ease-in-out;color:#fff;display:flex;flex-direction:column;align-items:flex-start;background-color:#111;border-radius:10px}.show[_ngcontent-%COMP%]{transform:translate(-300px);opacity:1}.nav-btn[_ngcontent-%COMP%]{width:100%;text-align:left}.nav-btn[_ngcontent-%COMP%]   hr[_ngcontent-%COMP%]{margin:5px;color:#fff5}.btn[_ngcontent-%COMP%]{color:#fff9}.btn[_ngcontent-%COMP%]   [_ngcontent-%COMP%]:hover{color:#fff}"]});var _h={prefix:"fab",iconName:"skype",icon:[448,512,[],"f17e","M424.7 299.8c2.9-14 4.7-28.9 4.7-43.8 0-113.5-91.9-205.3-205.3-205.3-14.9 0-29.7 1.7-43.8 4.7C161.3 40.7 137.7 32 112 32 50.2 32 0 82.2 0 144c0 25.7 8.7 49.3 23.3 68.2-2.9 14-4.7 28.9-4.7 43.8 0 113.5 91.9 205.3 205.3 205.3 14.9 0 29.7-1.7 43.8-4.7 19 14.6 42.6 23.3 68.2 23.3 61.8 0 112-50.2 112-112 .1-25.6-8.6-49.2-23.2-68.1zm-194.6 91.5c-65.6 0-120.5-29.2-120.5-65 0-16 9-30.6 29.5-30.6 31.2 0 34.1 44.9 88.1 44.9 25.7 0 42.3-11.4 42.3-26.3 0-18.7-16-21.6-42-28-62.5-15.4-117.8-22-117.8-87.2 0-59.2 58.6-81.1 109.1-81.1 55.1 0 110.8 21.9 110.8 55.4 0 16.9-11.4 31.8-30.3 31.8-28.3 0-29.2-33.5-75-33.5-25.7 0-42 7-42 22.5 0 19.8 20.8 21.8 69.1 33 41.4 9.3 90.7 26.8 90.7 77.6 0 59.1-57.1 86.5-112 86.5z"]},cb={prefix:"fab",iconName:"linkedin",icon:[448,512,[],"f08c","M416 32H31.9C14.3 32 0 46.5 0 64.3v383.4C0 465.5 14.3 480 31.9 480H416c17.6 0 32-14.5 32-32.3V64.3c0-17.8-14.4-32.3-32-32.3zM135.4 416H69V202.2h66.5V416zm-33.2-243c-21.3 0-38.5-17.3-38.5-38.5S80.9 96 102.2 96c21.2 0 38.5 17.3 38.5 38.5 0 21.3-17.2 38.5-38.5 38.5zm282.1 243h-66.4V312c0-24.8-.5-56.7-34.5-56.7-34.6 0-39.9 27-39.9 54.9V416h-66.4V202.2h63.7v29.2h.9c8.9-16.8 30.6-34.5 62.9-34.5 67.2 0 79.7 44.3 79.7 101.9V416z"]},mb={prefix:"fab",iconName:"dev",icon:[448,512,[],"f6cc","M120.12 208.29c-3.88-2.9-7.77-4.35-11.65-4.35H91.03v104.47h17.45c3.88 0 7.77-1.45 11.65-4.35 3.88-2.9 5.82-7.25 5.82-13.06v-69.65c-.01-5.8-1.96-10.16-5.83-13.06zM404.1 32H43.9C19.7 32 .06 51.59 0 75.8v360.4C.06 460.41 19.7 480 43.9 480h360.2c24.21 0 43.84-19.59 43.9-43.8V75.8c-.06-24.21-19.7-43.8-43.9-43.8zM154.2 291.19c0 18.81-11.61 47.31-48.36 47.25h-46.4V172.98h47.38c35.44 0 47.36 28.46 47.37 47.28l.01 70.93zm100.68-88.66H201.6v38.42h32.57v29.57H201.6v38.41h53.29v29.57h-62.18c-11.16.29-20.44-8.53-20.72-19.69V193.7c-.27-11.15 8.56-20.41 19.71-20.69h63.19l-.01 29.52zm103.64 115.29c-13.2 30.75-36.85 24.63-47.44 0l-38.53-144.8h32.57l29.71 113.72 29.57-113.72h32.58l-38.46 144.8z"]},gb={prefix:"fab",iconName:"github",icon:[496,512,[],"f09b","M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"]};function bb(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(n);e&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(n,r).enumerable})),t.push.apply(t,i)}return t}function xe(n){for(var e=1;e<arguments.length;e++){var t=null!=arguments[e]?arguments[e]:{};e%2?bb(Object(t),!0).forEach(function(i){bn(n,i,t[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):bb(Object(t)).forEach(function(i){Object.defineProperty(n,i,Object.getOwnPropertyDescriptor(t,i))})}return n}function Su(n){return(Su="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(n)}function Mb(n,e){for(var t=0;t<e.length;t++){var i=e[t];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(n,i.key,i)}}function bn(n,e,t){return e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function bh(n,e){return function SY(n){if(Array.isArray(n))return n}(n)||function DY(n,e){var t=null==n?null:typeof Symbol<"u"&&n[Symbol.iterator]||n["@@iterator"];if(null!=t){var o,a,i=[],r=!0,s=!1;try{for(t=t.call(n);!(r=(o=t.next()).done)&&(i.push(o.value),!e||i.length!==e);r=!0);}catch(c){s=!0,a=c}finally{try{!r&&null!=t.return&&t.return()}finally{if(s)throw a}}return i}}(n,e)||wb(n,e)||function TY(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function bc(n){return function CY(n){if(Array.isArray(n))return Mh(n)}(n)||function EY(n){if(typeof Symbol<"u"&&null!=n[Symbol.iterator]||null!=n["@@iterator"])return Array.from(n)}(n)||wb(n)||function AY(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function wb(n,e){if(n){if("string"==typeof n)return Mh(n,e);var t=Object.prototype.toString.call(n).slice(8,-1);if("Object"===t&&n.constructor&&(t=n.constructor.name),"Map"===t||"Set"===t)return Array.from(n);if("Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return Mh(n,e)}}function Mh(n,e){(null==e||e>n.length)&&(e=n.length);for(var t=0,i=new Array(e);t<e;t++)i[t]=n[t];return i}var Cb=function(){},wh={},Sb={},Eb=null,Db={mark:Cb,measure:Cb};try{typeof window<"u"&&(wh=window),typeof document<"u"&&(Sb=document),typeof MutationObserver<"u"&&(Eb=MutationObserver),typeof performance<"u"&&(Db=performance)}catch{}var Au,Tu,Iu,Lu,Ru,Ab=(wh.navigator||{}).userAgent,Tb=void 0===Ab?"":Ab,Rs=wh,kt=Sb,Ib=Eb,Du=Db,ns=!!kt.documentElement&&!!kt.head&&"function"==typeof kt.addEventListener&&"function"==typeof kt.createElement,Lb=~Tb.indexOf("MSIE")||~Tb.indexOf("Trident/"),is="___FONT_AWESOME___",zb="svg-inline--fa",w1="data-fa-i2svg",Sh="data-fa-pseudo-element",Eh="data-prefix",Dh="data-icon",Pb="fontawesome-i2svg",zY=["HTML","HEAD","STYLE","SCRIPT"],Nb=function(){try{return!0}catch{return!1}}(),Vt="classic",Xt="sharp",Ah=[Vt,Xt];function Mc(n){return new Proxy(n,{get:function(t,i){return i in t?t[i]:t[Vt]}})}var wc=Mc((bn(Au={},Vt,{fa:"solid",fas:"solid","fa-solid":"solid",far:"regular","fa-regular":"regular",fal:"light","fa-light":"light",fat:"thin","fa-thin":"thin",fad:"duotone","fa-duotone":"duotone",fab:"brands","fa-brands":"brands",fak:"kit","fa-kit":"kit"}),bn(Au,Xt,{fa:"solid",fass:"solid","fa-solid":"solid"}),Au)),Cc=Mc((bn(Tu={},Vt,{solid:"fas",regular:"far",light:"fal",thin:"fat",duotone:"fad",brands:"fab",kit:"fak"}),bn(Tu,Xt,{solid:"fass"}),Tu)),Sc=Mc((bn(Iu={},Vt,{fab:"fa-brands",fad:"fa-duotone",fak:"fa-kit",fal:"fa-light",far:"fa-regular",fas:"fa-solid",fat:"fa-thin"}),bn(Iu,Xt,{fass:"fa-solid"}),Iu)),PY=Mc((bn(Lu={},Vt,{"fa-brands":"fab","fa-duotone":"fad","fa-kit":"fak","fa-light":"fal","fa-regular":"far","fa-solid":"fas","fa-thin":"fat"}),bn(Lu,Xt,{"fa-solid":"fass"}),Lu)),NY=/fa(s|r|l|t|d|b|k|ss)?[\-\ ]/,Ob="fa-layers-text",OY=/Font ?Awesome ?([56 ]*)(Solid|Regular|Light|Thin|Duotone|Brands|Free|Pro|Sharp|Kit)?.*/i,FY=Mc((bn(Ru={},Vt,{900:"fas",400:"far",normal:"far",300:"fal",100:"fat"}),bn(Ru,Xt,{900:"fass"}),Ru)),Fb=[1,2,3,4,5,6,7,8,9,10],kY=Fb.concat([11,12,13,14,15,16,17,18,19,20]),VY=["class","data-prefix","data-icon","data-fa-transform","data-fa-mask"],Ec=new Set;Object.keys(Cc[Vt]).map(Ec.add.bind(Ec)),Object.keys(Cc[Xt]).map(Ec.add.bind(Ec));var HY=[].concat(Ah,bc(Ec),["2xs","xs","sm","lg","xl","2xl","beat","border","fade","beat-fade","bounce","flip-both","flip-horizontal","flip-vertical","flip","fw","inverse","layers-counter","layers-text","layers","li","pull-left","pull-right","pulse","rotate-180","rotate-270","rotate-90","rotate-by","shake","spin-pulse","spin-reverse","spin","stack-1x","stack-2x","stack","ul","duotone-group","swap-opacity","primary","secondary"]).concat(Fb.map(function(n){return"".concat(n,"x")})).concat(kY.map(function(n){return"w-".concat(n)})),Dc=Rs.FontAwesomeConfig||{};kt&&"function"==typeof kt.querySelector&&[["data-family-prefix","familyPrefix"],["data-css-prefix","cssPrefix"],["data-family-default","familyDefault"],["data-style-default","styleDefault"],["data-replacement-class","replacementClass"],["data-auto-replace-svg","autoReplaceSvg"],["data-auto-add-css","autoAddCss"],["data-auto-a11y","autoA11y"],["data-search-pseudo-elements","searchPseudoElements"],["data-observe-mutations","observeMutations"],["data-mutate-approach","mutateApproach"],["data-keep-original-source","keepOriginalSource"],["data-measure-performance","measurePerformance"],["data-show-missing-icons","showMissingIcons"]].forEach(function(n){var e=bh(n,2),i=e[1],r=function BY(n){return""===n||"false"!==n&&("true"===n||n)}(function UY(n){var e=kt.querySelector("script["+n+"]");if(e)return e.getAttribute(n)}(e[0]));null!=r&&(Dc[i]=r)});var kb={styleDefault:"solid",familyDefault:"classic",cssPrefix:"fa",replacementClass:zb,autoReplaceSvg:!0,autoAddCss:!0,autoA11y:!0,searchPseudoElements:!1,observeMutations:!0,mutateApproach:"async",keepOriginalSource:!0,measurePerformance:!1,showMissingIcons:!0};Dc.familyPrefix&&(Dc.cssPrefix=Dc.familyPrefix);var ua=xe(xe({},kb),Dc);ua.autoReplaceSvg||(ua.observeMutations=!1);var we={};Object.keys(kb).forEach(function(n){Object.defineProperty(we,n,{enumerable:!0,set:function(t){ua[n]=t,Ac.forEach(function(i){return i(we)})},get:function(){return ua[n]}})}),Object.defineProperty(we,"familyPrefix",{enumerable:!0,set:function(e){ua.cssPrefix=e,Ac.forEach(function(t){return t(we)})},get:function(){return ua.cssPrefix}}),Rs.FontAwesomeConfig=we;var Ac=[],Ar={size:16,x:0,y:0,rotate:0,flipX:!1,flipY:!1};function Tc(){for(var n=12,e="";n-- >0;)e+="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ"[62*Math.random()|0];return e}function fa(n){for(var e=[],t=(n||[]).length>>>0;t--;)e[t]=n[t];return e}function Th(n){return n.classList?fa(n.classList):(n.getAttribute("class")||"").split(" ").filter(function(e){return e})}function Vb(n){return"".concat(n).replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/'/g,"&#39;").replace(/</g,"&lt;").replace(/>/g,"&gt;")}function zu(n){return Object.keys(n||{}).reduce(function(e,t){return e+"".concat(t,": ").concat(n[t].trim(),";")},"")}function Ih(n){return n.size!==Ar.size||n.x!==Ar.x||n.y!==Ar.y||n.rotate!==Ar.rotate||n.flipX||n.flipY}function Hb(){var n="fa",e=zb,t=we.cssPrefix,i=we.replacementClass,r=':root, :host {\n  --fa-font-solid: normal 900 1em/1 "Font Awesome 6 Solid";\n  --fa-font-regular: normal 400 1em/1 "Font Awesome 6 Regular";\n  --fa-font-light: normal 300 1em/1 "Font Awesome 6 Light";\n  --fa-font-thin: normal 100 1em/1 "Font Awesome 6 Thin";\n  --fa-font-duotone: normal 900 1em/1 "Font Awesome 6 Duotone";\n  --fa-font-sharp-solid: normal 900 1em/1 "Font Awesome 6 Sharp";\n  --fa-font-brands: normal 400 1em/1 "Font Awesome 6 Brands";\n}\n\nsvg:not(:root).svg-inline--fa, svg:not(:host).svg-inline--fa {\n  overflow: visible;\n  box-sizing: content-box;\n}\n\n.svg-inline--fa {\n  display: var(--fa-display, inline-block);\n  height: 1em;\n  overflow: visible;\n  vertical-align: -0.125em;\n}\n.svg-inline--fa.fa-2xs {\n  vertical-align: 0.1em;\n}\n.svg-inline--fa.fa-xs {\n  vertical-align: 0em;\n}\n.svg-inline--fa.fa-sm {\n  vertical-align: -0.0714285705em;\n}\n.svg-inline--fa.fa-lg {\n  vertical-align: -0.2em;\n}\n.svg-inline--fa.fa-xl {\n  vertical-align: -0.25em;\n}\n.svg-inline--fa.fa-2xl {\n  vertical-align: -0.3125em;\n}\n.svg-inline--fa.fa-pull-left {\n  margin-right: var(--fa-pull-margin, 0.3em);\n  width: auto;\n}\n.svg-inline--fa.fa-pull-right {\n  margin-left: var(--fa-pull-margin, 0.3em);\n  width: auto;\n}\n.svg-inline--fa.fa-li {\n  width: var(--fa-li-width, 2em);\n  top: 0.25em;\n}\n.svg-inline--fa.fa-fw {\n  width: var(--fa-fw-width, 1.25em);\n}\n\n.fa-layers svg.svg-inline--fa {\n  bottom: 0;\n  left: 0;\n  margin: auto;\n  position: absolute;\n  right: 0;\n  top: 0;\n}\n\n.fa-layers-counter, .fa-layers-text {\n  display: inline-block;\n  position: absolute;\n  text-align: center;\n}\n\n.fa-layers {\n  display: inline-block;\n  height: 1em;\n  position: relative;\n  text-align: center;\n  vertical-align: -0.125em;\n  width: 1em;\n}\n.fa-layers svg.svg-inline--fa {\n  -webkit-transform-origin: center center;\n          transform-origin: center center;\n}\n\n.fa-layers-text {\n  left: 50%;\n  top: 50%;\n  -webkit-transform: translate(-50%, -50%);\n          transform: translate(-50%, -50%);\n  -webkit-transform-origin: center center;\n          transform-origin: center center;\n}\n\n.fa-layers-counter {\n  background-color: var(--fa-counter-background-color, #ff253a);\n  border-radius: var(--fa-counter-border-radius, 1em);\n  box-sizing: border-box;\n  color: var(--fa-inverse, #fff);\n  line-height: var(--fa-counter-line-height, 1);\n  max-width: var(--fa-counter-max-width, 5em);\n  min-width: var(--fa-counter-min-width, 1.5em);\n  overflow: hidden;\n  padding: var(--fa-counter-padding, 0.25em 0.5em);\n  right: var(--fa-right, 0);\n  text-overflow: ellipsis;\n  top: var(--fa-top, 0);\n  -webkit-transform: scale(var(--fa-counter-scale, 0.25));\n          transform: scale(var(--fa-counter-scale, 0.25));\n  -webkit-transform-origin: top right;\n          transform-origin: top right;\n}\n\n.fa-layers-bottom-right {\n  bottom: var(--fa-bottom, 0);\n  right: var(--fa-right, 0);\n  top: auto;\n  -webkit-transform: scale(var(--fa-layers-scale, 0.25));\n          transform: scale(var(--fa-layers-scale, 0.25));\n  -webkit-transform-origin: bottom right;\n          transform-origin: bottom right;\n}\n\n.fa-layers-bottom-left {\n  bottom: var(--fa-bottom, 0);\n  left: var(--fa-left, 0);\n  right: auto;\n  top: auto;\n  -webkit-transform: scale(var(--fa-layers-scale, 0.25));\n          transform: scale(var(--fa-layers-scale, 0.25));\n  -webkit-transform-origin: bottom left;\n          transform-origin: bottom left;\n}\n\n.fa-layers-top-right {\n  top: var(--fa-top, 0);\n  right: var(--fa-right, 0);\n  -webkit-transform: scale(var(--fa-layers-scale, 0.25));\n          transform: scale(var(--fa-layers-scale, 0.25));\n  -webkit-transform-origin: top right;\n          transform-origin: top right;\n}\n\n.fa-layers-top-left {\n  left: var(--fa-left, 0);\n  right: auto;\n  top: var(--fa-top, 0);\n  -webkit-transform: scale(var(--fa-layers-scale, 0.25));\n          transform: scale(var(--fa-layers-scale, 0.25));\n  -webkit-transform-origin: top left;\n          transform-origin: top left;\n}\n\n.fa-1x {\n  font-size: 1em;\n}\n\n.fa-2x {\n  font-size: 2em;\n}\n\n.fa-3x {\n  font-size: 3em;\n}\n\n.fa-4x {\n  font-size: 4em;\n}\n\n.fa-5x {\n  font-size: 5em;\n}\n\n.fa-6x {\n  font-size: 6em;\n}\n\n.fa-7x {\n  font-size: 7em;\n}\n\n.fa-8x {\n  font-size: 8em;\n}\n\n.fa-9x {\n  font-size: 9em;\n}\n\n.fa-10x {\n  font-size: 10em;\n}\n\n.fa-2xs {\n  font-size: 0.625em;\n  line-height: 0.1em;\n  vertical-align: 0.225em;\n}\n\n.fa-xs {\n  font-size: 0.75em;\n  line-height: 0.0833333337em;\n  vertical-align: 0.125em;\n}\n\n.fa-sm {\n  font-size: 0.875em;\n  line-height: 0.0714285718em;\n  vertical-align: 0.0535714295em;\n}\n\n.fa-lg {\n  font-size: 1.25em;\n  line-height: 0.05em;\n  vertical-align: -0.075em;\n}\n\n.fa-xl {\n  font-size: 1.5em;\n  line-height: 0.0416666682em;\n  vertical-align: -0.125em;\n}\n\n.fa-2xl {\n  font-size: 2em;\n  line-height: 0.03125em;\n  vertical-align: -0.1875em;\n}\n\n.fa-fw {\n  text-align: center;\n  width: 1.25em;\n}\n\n.fa-ul {\n  list-style-type: none;\n  margin-left: var(--fa-li-margin, 2.5em);\n  padding-left: 0;\n}\n.fa-ul > li {\n  position: relative;\n}\n\n.fa-li {\n  left: calc(var(--fa-li-width, 2em) * -1);\n  position: absolute;\n  text-align: center;\n  width: var(--fa-li-width, 2em);\n  line-height: inherit;\n}\n\n.fa-border {\n  border-color: var(--fa-border-color, #eee);\n  border-radius: var(--fa-border-radius, 0.1em);\n  border-style: var(--fa-border-style, solid);\n  border-width: var(--fa-border-width, 0.08em);\n  padding: var(--fa-border-padding, 0.2em 0.25em 0.15em);\n}\n\n.fa-pull-left {\n  float: left;\n  margin-right: var(--fa-pull-margin, 0.3em);\n}\n\n.fa-pull-right {\n  float: right;\n  margin-left: var(--fa-pull-margin, 0.3em);\n}\n\n.fa-beat {\n  -webkit-animation-name: fa-beat;\n          animation-name: fa-beat;\n  -webkit-animation-delay: var(--fa-animation-delay, 0s);\n          animation-delay: var(--fa-animation-delay, 0s);\n  -webkit-animation-direction: var(--fa-animation-direction, normal);\n          animation-direction: var(--fa-animation-direction, normal);\n  -webkit-animation-duration: var(--fa-animation-duration, 1s);\n          animation-duration: var(--fa-animation-duration, 1s);\n  -webkit-animation-iteration-count: var(--fa-animation-iteration-count, infinite);\n          animation-iteration-count: var(--fa-animation-iteration-count, infinite);\n  -webkit-animation-timing-function: var(--fa-animation-timing, ease-in-out);\n          animation-timing-function: var(--fa-animation-timing, ease-in-out);\n}\n\n.fa-bounce {\n  -webkit-animation-name: fa-bounce;\n          animation-name: fa-bounce;\n  -webkit-animation-delay: var(--fa-animation-delay, 0s);\n          animation-delay: var(--fa-animation-delay, 0s);\n  -webkit-animation-direction: var(--fa-animation-direction, normal);\n          animation-direction: var(--fa-animation-direction, normal);\n  -webkit-animation-duration: var(--fa-animation-duration, 1s);\n          animation-duration: var(--fa-animation-duration, 1s);\n  -webkit-animation-iteration-count: var(--fa-animation-iteration-count, infinite);\n          animation-iteration-count: var(--fa-animation-iteration-count, infinite);\n  -webkit-animation-timing-function: var(--fa-animation-timing, cubic-bezier(0.28, 0.84, 0.42, 1));\n          animation-timing-function: var(--fa-animation-timing, cubic-bezier(0.28, 0.84, 0.42, 1));\n}\n\n.fa-fade {\n  -webkit-animation-name: fa-fade;\n          animation-name: fa-fade;\n  -webkit-animation-delay: var(--fa-animation-delay, 0s);\n          animation-delay: var(--fa-animation-delay, 0s);\n  -webkit-animation-direction: var(--fa-animation-direction, normal);\n          animation-direction: var(--fa-animation-direction, normal);\n  -webkit-animation-duration: var(--fa-animation-duration, 1s);\n          animation-duration: var(--fa-animation-duration, 1s);\n  -webkit-animation-iteration-count: var(--fa-animation-iteration-count, infinite);\n          animation-iteration-count: var(--fa-animation-iteration-count, infinite);\n  -webkit-animation-timing-function: var(--fa-animation-timing, cubic-bezier(0.4, 0, 0.6, 1));\n          animation-timing-function: var(--fa-animation-timing, cubic-bezier(0.4, 0, 0.6, 1));\n}\n\n.fa-beat-fade {\n  -webkit-animation-name: fa-beat-fade;\n          animation-name: fa-beat-fade;\n  -webkit-animation-delay: var(--fa-animation-delay, 0s);\n          animation-delay: var(--fa-animation-delay, 0s);\n  -webkit-animation-direction: var(--fa-animation-direction, normal);\n          animation-direction: var(--fa-animation-direction, normal);\n  -webkit-animation-duration: var(--fa-animation-duration, 1s);\n          animation-duration: var(--fa-animation-duration, 1s);\n  -webkit-animation-iteration-count: var(--fa-animation-iteration-count, infinite);\n          animation-iteration-count: var(--fa-animation-iteration-count, infinite);\n  -webkit-animation-timing-function: var(--fa-animation-timing, cubic-bezier(0.4, 0, 0.6, 1));\n          animation-timing-function: var(--fa-animation-timing, cubic-bezier(0.4, 0, 0.6, 1));\n}\n\n.fa-flip {\n  -webkit-animation-name: fa-flip;\n          animation-name: fa-flip;\n  -webkit-animation-delay: var(--fa-animation-delay, 0s);\n          animation-delay: var(--fa-animation-delay, 0s);\n  -webkit-animation-direction: var(--fa-animation-direction, normal);\n          animation-direction: var(--fa-animation-direction, normal);\n  -webkit-animation-duration: var(--fa-animation-duration, 1s);\n          animation-duration: var(--fa-animation-duration, 1s);\n  -webkit-animation-iteration-count: var(--fa-animation-iteration-count, infinite);\n          animation-iteration-count: var(--fa-animation-iteration-count, infinite);\n  -webkit-animation-timing-function: var(--fa-animation-timing, ease-in-out);\n          animation-timing-function: var(--fa-animation-timing, ease-in-out);\n}\n\n.fa-shake {\n  -webkit-animation-name: fa-shake;\n          animation-name: fa-shake;\n  -webkit-animation-delay: var(--fa-animation-delay, 0s);\n          animation-delay: var(--fa-animation-delay, 0s);\n  -webkit-animation-direction: var(--fa-animation-direction, normal);\n          animation-direction: var(--fa-animation-direction, normal);\n  -webkit-animation-duration: var(--fa-animation-duration, 1s);\n          animation-duration: var(--fa-animation-duration, 1s);\n  -webkit-animation-iteration-count: var(--fa-animation-iteration-count, infinite);\n          animation-iteration-count: var(--fa-animation-iteration-count, infinite);\n  -webkit-animation-timing-function: var(--fa-animation-timing, linear);\n          animation-timing-function: var(--fa-animation-timing, linear);\n}\n\n.fa-spin {\n  -webkit-animation-name: fa-spin;\n          animation-name: fa-spin;\n  -webkit-animation-delay: var(--fa-animation-delay, 0s);\n          animation-delay: var(--fa-animation-delay, 0s);\n  -webkit-animation-direction: var(--fa-animation-direction, normal);\n          animation-direction: var(--fa-animation-direction, normal);\n  -webkit-animation-duration: var(--fa-animation-duration, 2s);\n          animation-duration: var(--fa-animation-duration, 2s);\n  -webkit-animation-iteration-count: var(--fa-animation-iteration-count, infinite);\n          animation-iteration-count: var(--fa-animation-iteration-count, infinite);\n  -webkit-animation-timing-function: var(--fa-animation-timing, linear);\n          animation-timing-function: var(--fa-animation-timing, linear);\n}\n\n.fa-spin-reverse {\n  --fa-animation-direction: reverse;\n}\n\n.fa-pulse,\n.fa-spin-pulse {\n  -webkit-animation-name: fa-spin;\n          animation-name: fa-spin;\n  -webkit-animation-direction: var(--fa-animation-direction, normal);\n          animation-direction: var(--fa-animation-direction, normal);\n  -webkit-animation-duration: var(--fa-animation-duration, 1s);\n          animation-duration: var(--fa-animation-duration, 1s);\n  -webkit-animation-iteration-count: var(--fa-animation-iteration-count, infinite);\n          animation-iteration-count: var(--fa-animation-iteration-count, infinite);\n  -webkit-animation-timing-function: var(--fa-animation-timing, steps(8));\n          animation-timing-function: var(--fa-animation-timing, steps(8));\n}\n\n@media (prefers-reduced-motion: reduce) {\n  .fa-beat,\n.fa-bounce,\n.fa-fade,\n.fa-beat-fade,\n.fa-flip,\n.fa-pulse,\n.fa-shake,\n.fa-spin,\n.fa-spin-pulse {\n    -webkit-animation-delay: -1ms;\n            animation-delay: -1ms;\n    -webkit-animation-duration: 1ms;\n            animation-duration: 1ms;\n    -webkit-animation-iteration-count: 1;\n            animation-iteration-count: 1;\n    transition-delay: 0s;\n    transition-duration: 0s;\n  }\n}\n@-webkit-keyframes fa-beat {\n  0%, 90% {\n    -webkit-transform: scale(1);\n            transform: scale(1);\n  }\n  45% {\n    -webkit-transform: scale(var(--fa-beat-scale, 1.25));\n            transform: scale(var(--fa-beat-scale, 1.25));\n  }\n}\n@keyframes fa-beat {\n  0%, 90% {\n    -webkit-transform: scale(1);\n            transform: scale(1);\n  }\n  45% {\n    -webkit-transform: scale(var(--fa-beat-scale, 1.25));\n            transform: scale(var(--fa-beat-scale, 1.25));\n  }\n}\n@-webkit-keyframes fa-bounce {\n  0% {\n    -webkit-transform: scale(1, 1) translateY(0);\n            transform: scale(1, 1) translateY(0);\n  }\n  10% {\n    -webkit-transform: scale(var(--fa-bounce-start-scale-x, 1.1), var(--fa-bounce-start-scale-y, 0.9)) translateY(0);\n            transform: scale(var(--fa-bounce-start-scale-x, 1.1), var(--fa-bounce-start-scale-y, 0.9)) translateY(0);\n  }\n  30% {\n    -webkit-transform: scale(var(--fa-bounce-jump-scale-x, 0.9), var(--fa-bounce-jump-scale-y, 1.1)) translateY(var(--fa-bounce-height, -0.5em));\n            transform: scale(var(--fa-bounce-jump-scale-x, 0.9), var(--fa-bounce-jump-scale-y, 1.1)) translateY(var(--fa-bounce-height, -0.5em));\n  }\n  50% {\n    -webkit-transform: scale(var(--fa-bounce-land-scale-x, 1.05), var(--fa-bounce-land-scale-y, 0.95)) translateY(0);\n            transform: scale(var(--fa-bounce-land-scale-x, 1.05), var(--fa-bounce-land-scale-y, 0.95)) translateY(0);\n  }\n  57% {\n    -webkit-transform: scale(1, 1) translateY(var(--fa-bounce-rebound, -0.125em));\n            transform: scale(1, 1) translateY(var(--fa-bounce-rebound, -0.125em));\n  }\n  64% {\n    -webkit-transform: scale(1, 1) translateY(0);\n            transform: scale(1, 1) translateY(0);\n  }\n  100% {\n    -webkit-transform: scale(1, 1) translateY(0);\n            transform: scale(1, 1) translateY(0);\n  }\n}\n@keyframes fa-bounce {\n  0% {\n    -webkit-transform: scale(1, 1) translateY(0);\n            transform: scale(1, 1) translateY(0);\n  }\n  10% {\n    -webkit-transform: scale(var(--fa-bounce-start-scale-x, 1.1), var(--fa-bounce-start-scale-y, 0.9)) translateY(0);\n            transform: scale(var(--fa-bounce-start-scale-x, 1.1), var(--fa-bounce-start-scale-y, 0.9)) translateY(0);\n  }\n  30% {\n    -webkit-transform: scale(var(--fa-bounce-jump-scale-x, 0.9), var(--fa-bounce-jump-scale-y, 1.1)) translateY(var(--fa-bounce-height, -0.5em));\n            transform: scale(var(--fa-bounce-jump-scale-x, 0.9), var(--fa-bounce-jump-scale-y, 1.1)) translateY(var(--fa-bounce-height, -0.5em));\n  }\n  50% {\n    -webkit-transform: scale(var(--fa-bounce-land-scale-x, 1.05), var(--fa-bounce-land-scale-y, 0.95)) translateY(0);\n            transform: scale(var(--fa-bounce-land-scale-x, 1.05), var(--fa-bounce-land-scale-y, 0.95)) translateY(0);\n  }\n  57% {\n    -webkit-transform: scale(1, 1) translateY(var(--fa-bounce-rebound, -0.125em));\n            transform: scale(1, 1) translateY(var(--fa-bounce-rebound, -0.125em));\n  }\n  64% {\n    -webkit-transform: scale(1, 1) translateY(0);\n            transform: scale(1, 1) translateY(0);\n  }\n  100% {\n    -webkit-transform: scale(1, 1) translateY(0);\n            transform: scale(1, 1) translateY(0);\n  }\n}\n@-webkit-keyframes fa-fade {\n  50% {\n    opacity: var(--fa-fade-opacity, 0.4);\n  }\n}\n@keyframes fa-fade {\n  50% {\n    opacity: var(--fa-fade-opacity, 0.4);\n  }\n}\n@-webkit-keyframes fa-beat-fade {\n  0%, 100% {\n    opacity: var(--fa-beat-fade-opacity, 0.4);\n    -webkit-transform: scale(1);\n            transform: scale(1);\n  }\n  50% {\n    opacity: 1;\n    -webkit-transform: scale(var(--fa-beat-fade-scale, 1.125));\n            transform: scale(var(--fa-beat-fade-scale, 1.125));\n  }\n}\n@keyframes fa-beat-fade {\n  0%, 100% {\n    opacity: var(--fa-beat-fade-opacity, 0.4);\n    -webkit-transform: scale(1);\n            transform: scale(1);\n  }\n  50% {\n    opacity: 1;\n    -webkit-transform: scale(var(--fa-beat-fade-scale, 1.125));\n            transform: scale(var(--fa-beat-fade-scale, 1.125));\n  }\n}\n@-webkit-keyframes fa-flip {\n  50% {\n    -webkit-transform: rotate3d(var(--fa-flip-x, 0), var(--fa-flip-y, 1), var(--fa-flip-z, 0), var(--fa-flip-angle, -180deg));\n            transform: rotate3d(var(--fa-flip-x, 0), var(--fa-flip-y, 1), var(--fa-flip-z, 0), var(--fa-flip-angle, -180deg));\n  }\n}\n@keyframes fa-flip {\n  50% {\n    -webkit-transform: rotate3d(var(--fa-flip-x, 0), var(--fa-flip-y, 1), var(--fa-flip-z, 0), var(--fa-flip-angle, -180deg));\n            transform: rotate3d(var(--fa-flip-x, 0), var(--fa-flip-y, 1), var(--fa-flip-z, 0), var(--fa-flip-angle, -180deg));\n  }\n}\n@-webkit-keyframes fa-shake {\n  0% {\n    -webkit-transform: rotate(-15deg);\n            transform: rotate(-15deg);\n  }\n  4% {\n    -webkit-transform: rotate(15deg);\n            transform: rotate(15deg);\n  }\n  8%, 24% {\n    -webkit-transform: rotate(-18deg);\n            transform: rotate(-18deg);\n  }\n  12%, 28% {\n    -webkit-transform: rotate(18deg);\n            transform: rotate(18deg);\n  }\n  16% {\n    -webkit-transform: rotate(-22deg);\n            transform: rotate(-22deg);\n  }\n  20% {\n    -webkit-transform: rotate(22deg);\n            transform: rotate(22deg);\n  }\n  32% {\n    -webkit-transform: rotate(-12deg);\n            transform: rotate(-12deg);\n  }\n  36% {\n    -webkit-transform: rotate(12deg);\n            transform: rotate(12deg);\n  }\n  40%, 100% {\n    -webkit-transform: rotate(0deg);\n            transform: rotate(0deg);\n  }\n}\n@keyframes fa-shake {\n  0% {\n    -webkit-transform: rotate(-15deg);\n            transform: rotate(-15deg);\n  }\n  4% {\n    -webkit-transform: rotate(15deg);\n            transform: rotate(15deg);\n  }\n  8%, 24% {\n    -webkit-transform: rotate(-18deg);\n            transform: rotate(-18deg);\n  }\n  12%, 28% {\n    -webkit-transform: rotate(18deg);\n            transform: rotate(18deg);\n  }\n  16% {\n    -webkit-transform: rotate(-22deg);\n            transform: rotate(-22deg);\n  }\n  20% {\n    -webkit-transform: rotate(22deg);\n            transform: rotate(22deg);\n  }\n  32% {\n    -webkit-transform: rotate(-12deg);\n            transform: rotate(-12deg);\n  }\n  36% {\n    -webkit-transform: rotate(12deg);\n            transform: rotate(12deg);\n  }\n  40%, 100% {\n    -webkit-transform: rotate(0deg);\n            transform: rotate(0deg);\n  }\n}\n@-webkit-keyframes fa-spin {\n  0% {\n    -webkit-transform: rotate(0deg);\n            transform: rotate(0deg);\n  }\n  100% {\n    -webkit-transform: rotate(360deg);\n            transform: rotate(360deg);\n  }\n}\n@keyframes fa-spin {\n  0% {\n    -webkit-transform: rotate(0deg);\n            transform: rotate(0deg);\n  }\n  100% {\n    -webkit-transform: rotate(360deg);\n            transform: rotate(360deg);\n  }\n}\n.fa-rotate-90 {\n  -webkit-transform: rotate(90deg);\n          transform: rotate(90deg);\n}\n\n.fa-rotate-180 {\n  -webkit-transform: rotate(180deg);\n          transform: rotate(180deg);\n}\n\n.fa-rotate-270 {\n  -webkit-transform: rotate(270deg);\n          transform: rotate(270deg);\n}\n\n.fa-flip-horizontal {\n  -webkit-transform: scale(-1, 1);\n          transform: scale(-1, 1);\n}\n\n.fa-flip-vertical {\n  -webkit-transform: scale(1, -1);\n          transform: scale(1, -1);\n}\n\n.fa-flip-both,\n.fa-flip-horizontal.fa-flip-vertical {\n  -webkit-transform: scale(-1, -1);\n          transform: scale(-1, -1);\n}\n\n.fa-rotate-by {\n  -webkit-transform: rotate(var(--fa-rotate-angle, none));\n          transform: rotate(var(--fa-rotate-angle, none));\n}\n\n.fa-stack {\n  display: inline-block;\n  vertical-align: middle;\n  height: 2em;\n  position: relative;\n  width: 2.5em;\n}\n\n.fa-stack-1x,\n.fa-stack-2x {\n  bottom: 0;\n  left: 0;\n  margin: auto;\n  position: absolute;\n  right: 0;\n  top: 0;\n  z-index: var(--fa-stack-z-index, auto);\n}\n\n.svg-inline--fa.fa-stack-1x {\n  height: 1em;\n  width: 1.25em;\n}\n.svg-inline--fa.fa-stack-2x {\n  height: 2em;\n  width: 2.5em;\n}\n\n.fa-inverse {\n  color: var(--fa-inverse, #fff);\n}\n\n.sr-only,\n.fa-sr-only {\n  position: absolute;\n  width: 1px;\n  height: 1px;\n  padding: 0;\n  margin: -1px;\n  overflow: hidden;\n  clip: rect(0, 0, 0, 0);\n  white-space: nowrap;\n  border-width: 0;\n}\n\n.sr-only-focusable:not(:focus),\n.fa-sr-only-focusable:not(:focus) {\n  position: absolute;\n  width: 1px;\n  height: 1px;\n  padding: 0;\n  margin: -1px;\n  overflow: hidden;\n  clip: rect(0, 0, 0, 0);\n  white-space: nowrap;\n  border-width: 0;\n}\n\n.svg-inline--fa .fa-primary {\n  fill: var(--fa-primary-color, currentColor);\n  opacity: var(--fa-primary-opacity, 1);\n}\n\n.svg-inline--fa .fa-secondary {\n  fill: var(--fa-secondary-color, currentColor);\n  opacity: var(--fa-secondary-opacity, 0.4);\n}\n\n.svg-inline--fa.fa-swap-opacity .fa-primary {\n  opacity: var(--fa-secondary-opacity, 0.4);\n}\n\n.svg-inline--fa.fa-swap-opacity .fa-secondary {\n  opacity: var(--fa-primary-opacity, 1);\n}\n\n.svg-inline--fa mask .fa-primary,\n.svg-inline--fa mask .fa-secondary {\n  fill: black;\n}\n\n.fad.fa-inverse,\n.fa-duotone.fa-inverse {\n  color: var(--fa-inverse, #fff);\n}';if(t!==n||i!==e){var s=new RegExp("\\.".concat(n,"\\-"),"g"),o=new RegExp("\\--".concat(n,"\\-"),"g"),a=new RegExp("\\.".concat(e),"g");r=r.replace(s,".".concat(t,"-")).replace(o,"--".concat(t,"-")).replace(a,".".concat(i))}return r}var Ub=!1;function Lh(){we.autoAddCss&&!Ub&&(function $Y(n){if(n&&ns){var e=kt.createElement("style");e.setAttribute("type","text/css"),e.innerHTML=n;for(var t=kt.head.childNodes,i=null,r=t.length-1;r>-1;r--){var s=t[r],o=(s.tagName||"").toUpperCase();["STYLE","LINK"].indexOf(o)>-1&&(i=s)}kt.head.insertBefore(e,i)}}(Hb()),Ub=!0)}var KY={mixout:function(){return{dom:{css:Hb,insertCss:Lh}}},hooks:function(){return{beforeDOMElementCreation:function(){Lh()},beforeI2svg:function(){Lh()}}}},rs=Rs||{};rs[is]||(rs[is]={}),rs[is].styles||(rs[is].styles={}),rs[is].hooks||(rs[is].hooks={}),rs[is].shims||(rs[is].shims=[]);var cr=rs[is],Bb=[],Pu=!1;function QY(n){!ns||(Pu?setTimeout(n,0):Bb.push(n))}function Ic(n){var e=n.tag,t=n.attributes,i=void 0===t?{}:t,r=n.children,s=void 0===r?[]:r;return"string"==typeof n?Vb(n):"<".concat(e," ").concat(function qY(n){return Object.keys(n||{}).reduce(function(e,t){return e+"".concat(t,'="').concat(Vb(n[t]),'" ')},"").trim()}(i),">").concat(s.map(Ic).join(""),"</").concat(e,">")}function Gb(n,e,t){if(n&&n[e]&&n[e][t])return{prefix:e,iconName:t,icon:n[e][t]}}ns&&((Pu=(kt.documentElement.doScroll?/^loaded|^c/:/^loaded|^i|^c/).test(kt.readyState))||kt.addEventListener("DOMContentLoaded",function n(){kt.removeEventListener("DOMContentLoaded",n),Pu=1,Bb.map(function(e){return e()})}));var Rh=function(e,t,i,r){var c,l,u,s=Object.keys(e),o=s.length,a=void 0!==r?function(e,t){return function(i,r,s,o){return e.call(t,i,r,s,o)}}(t,r):t;for(void 0===i?(c=1,u=e[s[0]]):(c=0,u=i);c<o;c++)u=a(u,e[l=s[c]],l,e);return u};function zh(n){var e=function tX(n){for(var e=[],t=0,i=n.length;t<i;){var r=n.charCodeAt(t++);if(r>=55296&&r<=56319&&t<i){var s=n.charCodeAt(t++);56320==(64512&s)?e.push(((1023&r)<<10)+(1023&s)+65536):(e.push(r),t--)}else e.push(r)}return e}(n);return 1===e.length?e[0].toString(16):null}function Wb(n){return Object.keys(n).reduce(function(e,t){var i=n[t];return i.icon?e[i.iconName]=i.icon:e[t]=i,e},{})}function Ph(n,e){var t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=t.skipHooks,r=void 0!==i&&i,s=Wb(e);"function"!=typeof cr.hooks.addPack||r?cr.styles[n]=xe(xe({},cr.styles[n]||{}),s):cr.hooks.addPack(n,Wb(e)),"fas"===n&&Ph("fa",e)}var Nu,Ou,Fu,da=cr.styles,iX=cr.shims,rX=(bn(Nu={},Vt,Object.values(Sc[Vt])),bn(Nu,Xt,Object.values(Sc[Xt])),Nu),Nh=null,$b={},jb={},qb={},Zb={},Yb={},sX=(bn(Ou={},Vt,Object.keys(wc[Vt])),bn(Ou,Xt,Object.keys(wc[Xt])),Ou);function aX(n,e){var t=e.split("-"),i=t[0],r=t.slice(1).join("-");return i!==n||""===r||function oX(n){return~HY.indexOf(n)}(r)?null:r}var Xb=function(){var e=function(s){return Rh(da,function(o,a,c){return o[c]=Rh(a,s,{}),o},{})};$b=e(function(r,s,o){return s[3]&&(r[s[3]]=o),s[2]&&s[2].filter(function(c){return"number"==typeof c}).forEach(function(c){r[c.toString(16)]=o}),r}),jb=e(function(r,s,o){return r[o]=o,s[2]&&s[2].filter(function(c){return"string"==typeof c}).forEach(function(c){r[c]=o}),r}),Yb=e(function(r,s,o){var a=s[2];return r[o]=o,a.forEach(function(c){r[c]=o}),r});var t="far"in da||we.autoFetchSvg,i=Rh(iX,function(r,s){var o=s[0],a=s[1],c=s[2];return"far"===a&&!t&&(a="fas"),"string"==typeof o&&(r.names[o]={prefix:a,iconName:c}),"number"==typeof o&&(r.unicodes[o.toString(16)]={prefix:a,iconName:c}),r},{names:{},unicodes:{}});qb=i.names,Zb=i.unicodes,Nh=ku(we.styleDefault,{family:we.familyDefault})};function Oh(n,e){return($b[n]||{})[e]}function S1(n,e){return(Yb[n]||{})[e]}function Kb(n){return qb[n]||{prefix:null,iconName:null}}function Ps(){return Nh}function ku(n){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},t=e.family,i=void 0===t?Vt:t,r=wc[i][n],s=Cc[i][n]||Cc[i][r],o=n in cr.styles?n:null;return s||o||null}(function WY(n){Ac.push(n)})(function(n){Nh=ku(n.styleDefault,{family:we.familyDefault})}),Xb();var Jb=(bn(Fu={},Vt,Object.keys(Sc[Vt])),bn(Fu,Xt,Object.keys(Sc[Xt])),Fu);function Vu(n){var e,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=t.skipLookups,r=void 0!==i&&i,s=(bn(e={},Vt,"".concat(we.cssPrefix,"-").concat(Vt)),bn(e,Xt,"".concat(we.cssPrefix,"-").concat(Xt)),e),o=null,a=Vt;(n.includes(s[Vt])||n.some(function(l){return Jb[Vt].includes(l)}))&&(a=Vt),(n.includes(s[Xt])||n.some(function(l){return Jb[Xt].includes(l)}))&&(a=Xt);var c=n.reduce(function(l,u){var f=aX(we.cssPrefix,u);if(da[u]?(u=rX[a].includes(u)?PY[a][u]:u,o=u,l.prefix=u):sX[a].indexOf(u)>-1?(o=u,l.prefix=ku(u,{family:a})):f?l.iconName=f:u!==we.replacementClass&&u!==s[Vt]&&u!==s[Xt]&&l.rest.push(u),!r&&l.prefix&&l.iconName){var d="fa"===o?Kb(l.iconName):{},h=S1(l.prefix,l.iconName);d.prefix&&(o=null),l.iconName=d.iconName||h||l.iconName,l.prefix=d.prefix||l.prefix,"far"===l.prefix&&!da.far&&da.fas&&!we.autoFetchSvg&&(l.prefix="fas")}return l},{prefix:null,iconName:null,rest:[]});return(n.includes("fa-brands")||n.includes("fab"))&&(c.prefix="fab"),(n.includes("fa-duotone")||n.includes("fad"))&&(c.prefix="fad"),!c.prefix&&a===Xt&&(da.fass||we.autoFetchSvg)&&(c.prefix="fass",c.iconName=S1(c.prefix,c.iconName)||c.iconName),("fa"===c.prefix||"fa"===o)&&(c.prefix=Ps()||"fas"),c}var uX=function(){function n(){(function bY(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")})(this,n),this.definitions={}}return function MY(n,e,t){e&&Mb(n.prototype,e),t&&Mb(n,t),Object.defineProperty(n,"prototype",{writable:!1})}(n,[{key:"add",value:function(){for(var t=this,i=arguments.length,r=new Array(i),s=0;s<i;s++)r[s]=arguments[s];var o=r.reduce(this._pullDefinitions,{});Object.keys(o).forEach(function(a){t.definitions[a]=xe(xe({},t.definitions[a]||{}),o[a]),Ph(a,o[a]);var c=Sc[Vt][a];c&&Ph(c,o[a]),Xb()})}},{key:"reset",value:function(){this.definitions={}}},{key:"_pullDefinitions",value:function(t,i){var r=i.prefix&&i.iconName&&i.icon?{0:i}:i;return Object.keys(r).map(function(s){var o=r[s],a=o.prefix,c=o.iconName,l=o.icon,u=l[2];t[a]||(t[a]={}),u.length>0&&u.forEach(function(f){"string"==typeof f&&(t[a][f]=l)}),t[a][c]=l}),t}}]),n}(),Qb=[],ha={},pa={},fX=Object.keys(pa);function kh(n,e){for(var t=arguments.length,i=new Array(t>2?t-2:0),r=2;r<t;r++)i[r-2]=arguments[r];var s=ha[n]||[];return s.forEach(function(o){e=o.apply(null,[e].concat(i))}),e}function E1(n){for(var e=arguments.length,t=new Array(e>1?e-1:0),i=1;i<e;i++)t[i-1]=arguments[i];var r=ha[n]||[];r.forEach(function(s){s.apply(null,t)})}function ss(){var n=arguments[0],e=Array.prototype.slice.call(arguments,1);return pa[n]?pa[n].apply(null,e):void 0}function Vh(n){"fa"===n.prefix&&(n.prefix="fas");var e=n.iconName,t=n.prefix||Ps();if(e)return e=S1(t,e)||e,Gb(eM.definitions,t,e)||Gb(cr.styles,t,e)}var eM=new uX,pX={i2svg:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return ns?(E1("beforeI2svg",e),ss("pseudoElements2svg",e),ss("i2svg",e)):Promise.reject("Operation requires a DOM of some kind.")},watch:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.autoReplaceSvgRoot;!1===we.autoReplaceSvg&&(we.autoReplaceSvg=!0),we.observeMutations=!0,QY(function(){gX({autoReplaceSvgRoot:t}),E1("watch",e)})}},wi={noAuto:function(){we.autoReplaceSvg=!1,we.observeMutations=!1,E1("noAuto")},config:we,dom:pX,parse:{icon:function(e){if(null===e)return null;if("object"===Su(e)&&e.prefix&&e.iconName)return{prefix:e.prefix,iconName:S1(e.prefix,e.iconName)||e.iconName};if(Array.isArray(e)&&2===e.length){var t=0===e[1].indexOf("fa-")?e[1].slice(3):e[1],i=ku(e[0]);return{prefix:i,iconName:S1(i,t)||t}}if("string"==typeof e&&(e.indexOf("".concat(we.cssPrefix,"-"))>-1||e.match(NY))){var r=Vu(e.split(" "),{skipLookups:!0});return{prefix:r.prefix||Ps(),iconName:S1(r.prefix,r.iconName)||r.iconName}}if("string"==typeof e){var s=Ps();return{prefix:s,iconName:S1(s,e)||e}}}},library:eM,findIconDefinition:Vh,toHtml:Ic},gX=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.autoReplaceSvgRoot,i=void 0===t?kt:t;(Object.keys(cr.styles).length>0||we.autoFetchSvg)&&ns&&we.autoReplaceSvg&&wi.dom.i2svg({node:i})};function Hu(n,e){return Object.defineProperty(n,"abstract",{get:e}),Object.defineProperty(n,"html",{get:function(){return n.abstract.map(function(i){return Ic(i)})}}),Object.defineProperty(n,"node",{get:function(){if(ns){var i=kt.createElement("div");return i.innerHTML=n.html,i.children}}}),n}function Hh(n){var e=n.icons,t=e.main,i=e.mask,r=n.prefix,s=n.iconName,o=n.transform,a=n.symbol,c=n.title,l=n.maskId,u=n.titleId,f=n.extra,d=n.watchable,h=void 0!==d&&d,p=i.found?i:t,g=p.width,m=p.height,v="fak"===r,x=[we.replacementClass,s?"".concat(we.cssPrefix,"-").concat(s):""].filter(function(D){return-1===f.classes.indexOf(D)}).filter(function(D){return""!==D||!!D}).concat(f.classes).join(" "),y={children:[],attributes:xe(xe({},f.attributes),{},{"data-prefix":r,"data-icon":s,class:x,role:f.attributes.role||"img",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 ".concat(g," ").concat(m)})},_=v&&!~f.classes.indexOf("fa-fw")?{width:"".concat(g/m*16*.0625,"em")}:{};h&&(y.attributes[w1]=""),c&&(y.children.push({tag:"title",attributes:{id:y.attributes["aria-labelledby"]||"title-".concat(u||Tc())},children:[c]}),delete y.attributes.title);var M=xe(xe({},y),{},{prefix:r,iconName:s,main:t,mask:i,maskId:l,transform:o,symbol:a,styles:xe(xe({},_),f.styles)}),w=i.found&&t.found?ss("generateAbstractMask",M)||{children:[],attributes:{}}:ss("generateAbstractIcon",M)||{children:[],attributes:{}},b=w.attributes;return M.children=w.children,M.attributes=b,a?function yX(n){var t=n.iconName,i=n.children,r=n.attributes,s=n.symbol,o=!0===s?"".concat(n.prefix,"-").concat(we.cssPrefix,"-").concat(t):s;return[{tag:"svg",attributes:{style:"display: none;"},children:[{tag:"symbol",attributes:xe(xe({},r),{},{id:o}),children:i}]}]}(M):function vX(n){var e=n.children,t=n.main,i=n.mask,r=n.attributes,s=n.styles,o=n.transform;if(Ih(o)&&t.found&&!i.found){var l={x:t.width/t.height/2,y:.5};r.style=zu(xe(xe({},s),{},{"transform-origin":"".concat(l.x+o.x/16,"em ").concat(l.y+o.y/16,"em")}))}return[{tag:"svg",attributes:r,children:e}]}(M)}function tM(n){var e=n.content,t=n.width,i=n.height,r=n.transform,s=n.title,o=n.extra,a=n.watchable,c=void 0!==a&&a,l=xe(xe(xe({},o.attributes),s?{title:s}:{}),{},{class:o.classes.join(" ")});c&&(l[w1]="");var u=xe({},o.styles);Ih(r)&&(u.transform=function YY(n){var e=n.transform,t=n.width,r=n.height,s=void 0===r?16:r,o=n.startCentered,a=void 0!==o&&o,c="";return c+=a&&Lb?"translate(".concat(e.x/16-(void 0===t?16:t)/2,"em, ").concat(e.y/16-s/2,"em) "):a?"translate(calc(-50% + ".concat(e.x/16,"em), calc(-50% + ").concat(e.y/16,"em)) "):"translate(".concat(e.x/16,"em, ").concat(e.y/16,"em) "),(c+="scale(".concat(e.size/16*(e.flipX?-1:1),", ").concat(e.size/16*(e.flipY?-1:1),") "))+"rotate(".concat(e.rotate,"deg) ")}({transform:r,startCentered:!0,width:t,height:i}),u["-webkit-transform"]=u.transform);var f=zu(u);f.length>0&&(l.style=f);var d=[];return d.push({tag:"span",attributes:l,children:[e]}),s&&d.push({tag:"span",attributes:{class:"sr-only"},children:[s]}),d}function _X(n){var e=n.content,t=n.title,i=n.extra,r=xe(xe(xe({},i.attributes),t?{title:t}:{}),{},{class:i.classes.join(" ")}),s=zu(i.styles);s.length>0&&(r.style=s);var o=[];return o.push({tag:"span",attributes:r,children:[e]}),t&&o.push({tag:"span",attributes:{class:"sr-only"},children:[t]}),o}var Uh=cr.styles;function Bh(n){var e=n[0],t=n[1],s=bh(n.slice(4),1)[0];return{found:!0,width:e,height:t,icon:Array.isArray(s)?{tag:"g",attributes:{class:"".concat(we.cssPrefix,"-").concat("duotone-group")},children:[{tag:"path",attributes:{class:"".concat(we.cssPrefix,"-").concat("secondary"),fill:"currentColor",d:s[0]}},{tag:"path",attributes:{class:"".concat(we.cssPrefix,"-").concat("primary"),fill:"currentColor",d:s[1]}}]}:{tag:"path",attributes:{fill:"currentColor",d:s}}}}var xX={found:!1,width:512,height:512};function Gh(n,e){var t=e;return"fa"===e&&null!==we.styleDefault&&(e=Ps()),new Promise(function(i,r){if(ss("missingIconAbstract"),"fa"===t){var o=Kb(n)||{};n=o.iconName||n,e=o.prefix||e}if(n&&e&&Uh[e]&&Uh[e][n])return i(Bh(Uh[e][n]));(function bX(n,e){!Nb&&!we.showMissingIcons&&n&&console.error('Icon with name "'.concat(n,'" and prefix "').concat(e,'" is missing.'))})(n,e),i(xe(xe({},xX),{},{icon:we.showMissingIcons&&n&&ss("missingIconAbstract")||{}}))})}var nM=function(){},Wh=we.measurePerformance&&Du&&Du.mark&&Du.measure?Du:{mark:nM,measure:nM},Lc='FA "6.2.1"',$h_begin=function(e){return Wh.mark("".concat(Lc," ").concat(e," begins")),function(){return function(e){Wh.mark("".concat(Lc," ").concat(e," ends")),Wh.measure("".concat(Lc," ").concat(e),"".concat(Lc," ").concat(e," begins"),"".concat(Lc," ").concat(e," ends"))}(e)}},Uu=function(){};function rM(n){return"string"==typeof(n.getAttribute?n.getAttribute(w1):null)}function EX(n){return kt.createElementNS("http://www.w3.org/2000/svg",n)}function DX(n){return kt.createElement(n)}function sM(n){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},t=e.ceFn,i=void 0===t?"svg"===n.tag?EX:DX:t;if("string"==typeof n)return kt.createTextNode(n);var r=i(n.tag);Object.keys(n.attributes||[]).forEach(function(o){r.setAttribute(o,n.attributes[o])});var s=n.children||[];return s.forEach(function(o){r.appendChild(sM(o,{ceFn:i}))}),r}var Bu={replace:function(e){var t=e[0];if(t.parentNode)if(e[1].forEach(function(r){t.parentNode.insertBefore(sM(r),t)}),null===t.getAttribute(w1)&&we.keepOriginalSource){var i=kt.createComment(function AX(n){var e=" ".concat(n.outerHTML," ");return"".concat(e,"Font Awesome fontawesome.com ")}(t));t.parentNode.replaceChild(i,t)}else t.remove()},nest:function(e){var t=e[0],i=e[1];if(~Th(t).indexOf(we.replacementClass))return Bu.replace(e);var r=new RegExp("".concat(we.cssPrefix,"-.*"));if(delete i[0].attributes.id,i[0].attributes.class){var s=i[0].attributes.class.split(" ").reduce(function(a,c){return c===we.replacementClass||c.match(r)?a.toSvg.push(c):a.toNode.push(c),a},{toNode:[],toSvg:[]});i[0].attributes.class=s.toSvg.join(" "),0===s.toNode.length?t.removeAttribute("class"):t.setAttribute("class",s.toNode.join(" "))}var o=i.map(function(a){return Ic(a)}).join("\n");t.setAttribute(w1,""),t.innerHTML=o}};function oM(n){n()}function aM(n,e){var t="function"==typeof e?e:Uu;if(0===n.length)t();else{var i=oM;"async"===we.mutateApproach&&(i=Rs.requestAnimationFrame||oM),i(function(){var r=function SX(){return!0===we.autoReplaceSvg?Bu.replace:Bu[we.autoReplaceSvg]||Bu.replace}(),s=$h_begin("mutate");n.map(r),s(),t()})}}var jh=!1;function cM(){jh=!0}function qh(){jh=!1}var Gu=null;function lM(n){if(Ib&&we.observeMutations){var e=n.treeCallback,t=void 0===e?Uu:e,i=n.nodeCallback,r=void 0===i?Uu:i,s=n.pseudoElementsCallback,o=void 0===s?Uu:s,a=n.observeMutationsRoot,c=void 0===a?kt:a;Gu=new Ib(function(l){if(!jh){var u=Ps();fa(l).forEach(function(f){if("childList"===f.type&&f.addedNodes.length>0&&!rM(f.addedNodes[0])&&(we.searchPseudoElements&&o(f.target),t(f.target)),"attributes"===f.type&&f.target.parentNode&&we.searchPseudoElements&&o(f.target.parentNode),"attributes"===f.type&&rM(f.target)&&~VY.indexOf(f.attributeName))if("class"===f.attributeName&&function wX(n){var e=n.getAttribute?n.getAttribute(Eh):null,t=n.getAttribute?n.getAttribute(Dh):null;return e&&t}(f.target)){var d=Vu(Th(f.target)),p=d.iconName;f.target.setAttribute(Eh,d.prefix||u),p&&f.target.setAttribute(Dh,p)}else(function CX(n){return n&&n.classList&&n.classList.contains&&n.classList.contains(we.replacementClass)})(f.target)&&r(f.target)})}}),ns&&Gu.observe(c,{childList:!0,attributes:!0,characterData:!0,subtree:!0})}}function IX(n){var e=n.getAttribute("style"),t=[];return e&&(t=e.split(";").reduce(function(i,r){var s=r.split(":"),o=s[0],a=s.slice(1);return o&&a.length>0&&(i[o]=a.join(":").trim()),i},{})),t}function LX(n){var e=n.getAttribute("data-prefix"),t=n.getAttribute("data-icon"),i=void 0!==n.innerText?n.innerText.trim():"",r=Vu(Th(n));return r.prefix||(r.prefix=Ps()),e&&t&&(r.prefix=e,r.iconName=t),r.iconName&&r.prefix||(r.prefix&&i.length>0&&(r.iconName=function cX(n,e){return(jb[n]||{})[e]}(r.prefix,n.innerText)||Oh(r.prefix,zh(n.innerText))),!r.iconName&&we.autoFetchSvg&&n.firstChild&&n.firstChild.nodeType===Node.TEXT_NODE&&(r.iconName=n.firstChild.data)),r}function RX(n){var e=fa(n.attributes).reduce(function(r,s){return"class"!==r.name&&"style"!==r.name&&(r[s.name]=s.value),r},{}),t=n.getAttribute("title"),i=n.getAttribute("data-fa-title-id");return we.autoA11y&&(t?e["aria-labelledby"]="".concat(we.replacementClass,"-title-").concat(i||Tc()):(e["aria-hidden"]="true",e.focusable="false")),e}function uM(n){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{styleParser:!0},t=LX(n),i=t.iconName,r=t.prefix,s=t.rest,o=RX(n),a=kh("parseNodeAttributes",{},n),c=e.styleParser?IX(n):[];return xe({iconName:i,title:n.getAttribute("title"),titleId:n.getAttribute("data-fa-title-id"),prefix:r,transform:Ar,mask:{iconName:null,prefix:null,rest:[]},maskId:null,symbol:!1,extra:{classes:s,styles:c,attributes:o}},a)}var PX=cr.styles;function fM(n){var e="nest"===we.autoReplaceSvg?uM(n,{styleParser:!1}):uM(n);return~e.extra.classes.indexOf(Ob)?ss("generateLayersText",n,e):ss("generateSvgReplacementMutation",n,e)}var Ns=new Set;function dM(n){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(!ns)return Promise.resolve();var t=kt.documentElement.classList,i=function(f){return t.add("".concat(Pb,"-").concat(f))},r=function(f){return t.remove("".concat(Pb,"-").concat(f))},s=we.autoFetchSvg?Ns:Ah.map(function(u){return"fa-".concat(u)}).concat(Object.keys(PX));s.includes("fa")||s.push("fa");var o=[".".concat(Ob,":not([").concat(w1,"])")].concat(s.map(function(u){return".".concat(u,":not([").concat(w1,"])")})).join(", ");if(0===o.length)return Promise.resolve();var a=[];try{a=fa(n.querySelectorAll(o))}catch{}if(!(a.length>0))return Promise.resolve();i("pending"),r("complete");var c=$h_begin("onTree"),l=a.reduce(function(u,f){try{var d=fM(f);d&&u.push(d)}catch(h){Nb||"MissingIcon"===h.name&&console.error(h)}return u},[]);return new Promise(function(u,f){Promise.all(l).then(function(d){aM(d,function(){i("active"),i("complete"),r("pending"),"function"==typeof e&&e(),c(),u()})}).catch(function(d){c(),f(d)})})}function NX(n){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;fM(n).then(function(t){t&&aM([t],e)})}Ah.map(function(n){Ns.add("fa-".concat(n))}),Object.keys(wc[Vt]).map(Ns.add.bind(Ns)),Object.keys(wc[Xt]).map(Ns.add.bind(Ns)),Ns=bc(Ns);var FX=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=t.transform,r=void 0===i?Ar:i,s=t.symbol,o=void 0!==s&&s,a=t.mask,c=void 0===a?null:a,l=t.maskId,u=void 0===l?null:l,f=t.title,d=void 0===f?null:f,h=t.titleId,p=void 0===h?null:h,g=t.classes,m=void 0===g?[]:g,v=t.attributes,x=void 0===v?{}:v,y=t.styles,_=void 0===y?{}:y;if(e){var M=e.prefix,w=e.iconName,T=e.icon;return Hu(xe({type:"icon"},e),function(){return E1("beforeDOMElementCreation",{iconDefinition:e,params:t}),we.autoA11y&&(d?x["aria-labelledby"]="".concat(we.replacementClass,"-title-").concat(p||Tc()):(x["aria-hidden"]="true",x.focusable="false")),Hh({icons:{main:Bh(T),mask:c?Bh(c.icon):{found:!1,width:null,height:null,icon:{}}},prefix:M,iconName:w,transform:xe(xe({},Ar),r),symbol:o,title:d,maskId:u,titleId:p,extra:{attributes:x,styles:_,classes:m}})})}},kX={mixout:function(){return{icon:(n=FX,function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=(e||{}).icon?e:Vh(e||{}),r=t.mask;return r&&(r=(r||{}).icon?r:Vh(r||{})),n(i,xe(xe({},t),{},{mask:r}))})};var n},hooks:function(){return{mutationObserverCallbacks:function(t){return t.treeCallback=dM,t.nodeCallback=NX,t}}},provides:function(e){e.i2svg=function(t){var i=t.node,s=t.callback;return dM(void 0===i?kt:i,void 0===s?function(){}:s)},e.generateSvgReplacementMutation=function(t,i){var r=i.iconName,s=i.title,o=i.titleId,a=i.prefix,c=i.transform,l=i.symbol,u=i.mask,f=i.maskId,d=i.extra;return new Promise(function(h,p){Promise.all([Gh(r,a),u.iconName?Gh(u.iconName,u.prefix):Promise.resolve({found:!1,width:512,height:512,icon:{}})]).then(function(g){var m=bh(g,2);h([t,Hh({icons:{main:m[0],mask:m[1]},prefix:a,iconName:r,transform:c,symbol:l,maskId:f,title:s,titleId:o,extra:d,watchable:!0})])}).catch(p)})},e.generateAbstractIcon=function(t){var l,i=t.children,r=t.attributes,s=t.main,o=t.transform,c=zu(t.styles);return c.length>0&&(r.style=c),Ih(o)&&(l=ss("generateAbstractTransformGrouping",{main:s,transform:o,containerWidth:s.width,iconWidth:s.width})),i.push(l||s.icon),{children:i,attributes:r}}}},VX={mixout:function(){return{layer:function(t){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=i.classes,s=void 0===r?[]:r;return Hu({type:"layer"},function(){E1("beforeDOMElementCreation",{assembler:t,params:i});var o=[];return t(function(a){Array.isArray(a)?a.map(function(c){o=o.concat(c.abstract)}):o=o.concat(a.abstract)}),[{tag:"span",attributes:{class:["".concat(we.cssPrefix,"-layers")].concat(bc(s)).join(" ")},children:o}]})}}}},HX={mixout:function(){return{counter:function(t){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=i.title,s=void 0===r?null:r,o=i.classes,a=void 0===o?[]:o,c=i.attributes,l=void 0===c?{}:c,u=i.styles,f=void 0===u?{}:u;return Hu({type:"counter",content:t},function(){return E1("beforeDOMElementCreation",{content:t,params:i}),_X({content:t.toString(),title:s,extra:{attributes:l,styles:f,classes:["".concat(we.cssPrefix,"-layers-counter")].concat(bc(a))}})})}}}},UX={mixout:function(){return{text:function(t){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=i.transform,s=void 0===r?Ar:r,o=i.title,a=void 0===o?null:o,c=i.classes,l=void 0===c?[]:c,u=i.attributes,f=void 0===u?{}:u,d=i.styles,h=void 0===d?{}:d;return Hu({type:"text",content:t},function(){return E1("beforeDOMElementCreation",{content:t,params:i}),tM({content:t,transform:xe(xe({},Ar),s),title:a,extra:{attributes:f,styles:h,classes:["".concat(we.cssPrefix,"-layers-text")].concat(bc(l))}})})}}},provides:function(e){e.generateLayersText=function(t,i){var r=i.title,s=i.transform,o=i.extra,a=null,c=null;if(Lb){var l=parseInt(getComputedStyle(t).fontSize,10),u=t.getBoundingClientRect();a=u.width/l,c=u.height/l}return we.autoA11y&&!r&&(o.attributes["aria-hidden"]="true"),Promise.resolve([t,tM({content:t.innerHTML,width:a,height:c,transform:s,title:r,extra:o,watchable:!0})])}}},BX=new RegExp('"',"ug"),hM=[1105920,1112319];function pM(n,e){var t="".concat("data-fa-pseudo-element-pending").concat(e.replace(":","-"));return new Promise(function(i,r){if(null!==n.getAttribute(t))return i();var o=fa(n.children).filter(function(T){return T.getAttribute(Sh)===e})[0],a=Rs.getComputedStyle(n,e),c=a.getPropertyValue("font-family").match(OY),l=a.getPropertyValue("font-weight"),u=a.getPropertyValue("content");if(o&&!c)return n.removeChild(o),i();if(c&&"none"!==u&&""!==u){var f=a.getPropertyValue("content"),d=~["Sharp"].indexOf(c[2])?Xt:Vt,h=~["Solid","Regular","Light","Thin","Duotone","Brands","Kit"].indexOf(c[2])?Cc[d][c[2].toLowerCase()]:FY[d][l],p=function GX(n){var e=n.replace(BX,""),t=function nX(n,e){var r,t=n.length,i=n.charCodeAt(e);return i>=55296&&i<=56319&&t>e+1&&(r=n.charCodeAt(e+1))>=56320&&r<=57343?1024*(i-55296)+r-56320+65536:i}(e,0),i=t>=hM[0]&&t<=hM[1],r=2===e.length&&e[0]===e[1];return{value:zh(r?e[0]:e),isSecondary:i||r}}(f),g=p.value,m=p.isSecondary,v=c[0].startsWith("FontAwesome"),x=Oh(h,g),y=x;if(v){var _=function lX(n){var e=Zb[n],t=Oh("fas",n);return e||(t?{prefix:"fas",iconName:t}:null)||{prefix:null,iconName:null}}(g);_.iconName&&_.prefix&&(x=_.iconName,h=_.prefix)}if(!x||m||o&&o.getAttribute(Eh)===h&&o.getAttribute(Dh)===y)i();else{n.setAttribute(t,y),o&&n.removeChild(o);var M=function zX(){return{iconName:null,title:null,titleId:null,prefix:null,transform:Ar,symbol:!1,mask:{iconName:null,prefix:null,rest:[]},maskId:null,extra:{classes:[],styles:{},attributes:{}}}}(),w=M.extra;w.attributes[Sh]=e,Gh(x,h).then(function(T){var b=Hh(xe(xe({},M),{},{icons:{main:T,mask:{prefix:null,iconName:null,rest:[]}},prefix:h,iconName:y,extra:w,watchable:!0})),D=kt.createElement("svg");"::before"===e?n.insertBefore(D,n.firstChild):n.appendChild(D),D.outerHTML=b.map(function(I){return Ic(I)}).join("\n"),n.removeAttribute(t),i()}).catch(r)}}else i()})}function WX(n){return Promise.all([pM(n,"::before"),pM(n,"::after")])}function $X(n){return!(n.parentNode===document.head||~zY.indexOf(n.tagName.toUpperCase())||n.getAttribute(Sh)||n.parentNode&&"svg"===n.parentNode.tagName)}function mM(n){if(ns)return new Promise(function(e,t){var i=fa(n.querySelectorAll("*")).filter($X).map(WX),r=$h_begin("searchPseudoElements");cM(),Promise.all(i).then(function(){r(),qh(),e()}).catch(function(){r(),qh(),t()})})}var gM=!1,vM=function(e){return e.toLowerCase().split(" ").reduce(function(i,r){var s=r.toLowerCase().split("-"),o=s[0],a=s.slice(1).join("-");if(o&&"h"===a)return i.flipX=!0,i;if(o&&"v"===a)return i.flipY=!0,i;if(a=parseFloat(a),isNaN(a))return i;switch(o){case"grow":i.size=i.size+a;break;case"shrink":i.size=i.size-a;break;case"left":i.x=i.x-a;break;case"right":i.x=i.x+a;break;case"up":i.y=i.y-a;break;case"down":i.y=i.y+a;break;case"rotate":i.rotate=i.rotate+a}return i},{size:16,x:0,y:0,flipX:!1,flipY:!1,rotate:0})},Zh={x:0,y:0,width:"100%",height:"100%"};function yM(n){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return n.attributes&&(n.attributes.fill||e)&&(n.attributes.fill="black"),n}!function dX(n,e){var t=e.mixoutsTo;Qb=n,ha={},Object.keys(pa).forEach(function(i){-1===fX.indexOf(i)&&delete pa[i]}),Qb.forEach(function(i){var r=i.mixout?i.mixout():{};if(Object.keys(r).forEach(function(o){"function"==typeof r[o]&&(t[o]=r[o]),"object"===Su(r[o])&&Object.keys(r[o]).forEach(function(a){t[o]||(t[o]={}),t[o][a]=r[o][a]})}),i.hooks){var s=i.hooks();Object.keys(s).forEach(function(o){ha[o]||(ha[o]=[]),ha[o].push(s[o])})}i.provides&&i.provides(pa)})}([KY,kX,VX,HX,UX,{hooks:function(){return{mutationObserverCallbacks:function(t){return t.pseudoElementsCallback=mM,t}}},provides:function(e){e.pseudoElements2svg=function(t){var i=t.node;we.searchPseudoElements&&mM(void 0===i?kt:i)}}},{mixout:function(){return{dom:{unwatch:function(){cM(),gM=!0}}}},hooks:function(){return{bootstrap:function(){lM(kh("mutationObserverCallbacks",{}))},noAuto:function(){!function TX(){!Gu||Gu.disconnect()}()},watch:function(t){var i=t.observeMutationsRoot;gM?qh():lM(kh("mutationObserverCallbacks",{observeMutationsRoot:i}))}}}},{mixout:function(){return{parse:{transform:function(t){return vM(t)}}}},hooks:function(){return{parseNodeAttributes:function(t,i){var r=i.getAttribute("data-fa-transform");return r&&(t.transform=vM(r)),t}}},provides:function(e){e.generateAbstractTransformGrouping=function(t){var i=t.main,r=t.transform,o=t.iconWidth,a={transform:"translate(".concat(t.containerWidth/2," 256)")},c="translate(".concat(32*r.x,", ").concat(32*r.y,") "),l="scale(".concat(r.size/16*(r.flipX?-1:1),", ").concat(r.size/16*(r.flipY?-1:1),") "),u="rotate(".concat(r.rotate," 0 0)"),h={outer:a,inner:{transform:"".concat(c," ").concat(l," ").concat(u)},path:{transform:"translate(".concat(o/2*-1," -256)")}};return{tag:"g",attributes:xe({},h.outer),children:[{tag:"g",attributes:xe({},h.inner),children:[{tag:i.icon.tag,children:i.icon.children,attributes:xe(xe({},i.icon.attributes),h.path)}]}]}}}},{hooks:function(){return{parseNodeAttributes:function(t,i){var r=i.getAttribute("data-fa-mask"),s=r?Vu(r.split(" ").map(function(o){return o.trim()})):{prefix:null,iconName:null,rest:[]};return s.prefix||(s.prefix=Ps()),t.mask=s,t.maskId=i.getAttribute("data-fa-mask-id"),t}}},provides:function(e){e.generateAbstractMask=function(t){var n,i=t.children,r=t.attributes,s=t.main,o=t.mask,a=t.maskId,u=s.icon,d=o.icon,h=function ZY(n){var e=n.transform,i=n.iconWidth,r={transform:"translate(".concat(n.containerWidth/2," 256)")},s="translate(".concat(32*e.x,", ").concat(32*e.y,") "),o="scale(".concat(e.size/16*(e.flipX?-1:1),", ").concat(e.size/16*(e.flipY?-1:1),") "),a="rotate(".concat(e.rotate," 0 0)");return{outer:r,inner:{transform:"".concat(s," ").concat(o," ").concat(a)},path:{transform:"translate(".concat(i/2*-1," -256)")}}}({transform:t.transform,containerWidth:o.width,iconWidth:s.width}),p={tag:"rect",attributes:xe(xe({},Zh),{},{fill:"white"})},g=u.children?{children:u.children.map(yM)}:{},m={tag:"g",attributes:xe({},h.inner),children:[yM(xe({tag:u.tag,attributes:xe(xe({},u.attributes),h.path)},g))]},v={tag:"g",attributes:xe({},h.outer),children:[m]},x="mask-".concat(a||Tc()),y="clip-".concat(a||Tc()),_={tag:"mask",attributes:xe(xe({},Zh),{},{id:x,maskUnits:"userSpaceOnUse",maskContentUnits:"userSpaceOnUse"}),children:[p,v]},M={tag:"defs",children:[{tag:"clipPath",attributes:{id:y},children:(n=d,"g"===n.tag?n.children:[n])},_]};return i.push(M,{tag:"rect",attributes:xe({fill:"currentColor","clip-path":"url(#".concat(y,")"),mask:"url(#".concat(x,")")},Zh)}),{children:i,attributes:r}}}},{provides:function(e){var t=!1;Rs.matchMedia&&(t=Rs.matchMedia("(prefers-reduced-motion: reduce)").matches),e.missingIconAbstract=function(){var i=[],r={fill:"currentColor"},s={attributeType:"XML",repeatCount:"indefinite",dur:"2s"};i.push({tag:"path",attributes:xe(xe({},r),{},{d:"M156.5,447.7l-12.6,29.5c-18.7-9.5-35.9-21.2-51.5-34.9l22.7-22.7C127.6,430.5,141.5,440,156.5,447.7z M40.6,272H8.5 c1.4,21.2,5.4,41.7,11.7,61.1L50,321.2C45.1,305.5,41.8,289,40.6,272z M40.6,240c1.4-18.8,5.2-37,11.1-54.1l-29.5-12.6 C14.7,194.3,10,216.7,8.5,240H40.6z M64.3,156.5c7.8-14.9,17.2-28.8,28.1-41.5L69.7,92.3c-13.7,15.6-25.5,32.8-34.9,51.5 L64.3,156.5z M397,419.6c-13.9,12-29.4,22.3-46.1,30.4l11.9,29.8c20.7-9.9,39.8-22.6,56.9-37.6L397,419.6z M115,92.4 c13.9-12,29.4-22.3,46.1-30.4l-11.9-29.8c-20.7,9.9-39.8,22.6-56.8,37.6L115,92.4z M447.7,355.5c-7.8,14.9-17.2,28.8-28.1,41.5 l22.7,22.7c13.7-15.6,25.5-32.9,34.9-51.5L447.7,355.5z M471.4,272c-1.4,18.8-5.2,37-11.1,54.1l29.5,12.6 c7.5-21.1,12.2-43.5,13.6-66.8H471.4z M321.2,462c-15.7,5-32.2,8.2-49.2,9.4v32.1c21.2-1.4,41.7-5.4,61.1-11.7L321.2,462z M240,471.4c-18.8-1.4-37-5.2-54.1-11.1l-12.6,29.5c21.1,7.5,43.5,12.2,66.8,13.6V471.4z M462,190.8c5,15.7,8.2,32.2,9.4,49.2h32.1 c-1.4-21.2-5.4-41.7-11.7-61.1L462,190.8z M92.4,397c-12-13.9-22.3-29.4-30.4-46.1l-29.8,11.9c9.9,20.7,22.6,39.8,37.6,56.9 L92.4,397z M272,40.6c18.8,1.4,36.9,5.2,54.1,11.1l12.6-29.5C317.7,14.7,295.3,10,272,8.5V40.6z M190.8,50 c15.7-5,32.2-8.2,49.2-9.4V8.5c-21.2,1.4-41.7,5.4-61.1,11.7L190.8,50z M442.3,92.3L419.6,115c12,13.9,22.3,29.4,30.5,46.1 l29.8-11.9C470,128.5,457.3,109.4,442.3,92.3z M397,92.4l22.7-22.7c-15.6-13.7-32.8-25.5-51.5-34.9l-12.6,29.5 C370.4,72.1,384.4,81.5,397,92.4z"})});var o=xe(xe({},s),{},{attributeName:"opacity"}),a={tag:"circle",attributes:xe(xe({},r),{},{cx:"256",cy:"364",r:"28"}),children:[]};return t||a.children.push({tag:"animate",attributes:xe(xe({},s),{},{attributeName:"r",values:"28;14;28;28;14;28;"})},{tag:"animate",attributes:xe(xe({},o),{},{values:"1;0;1;1;0;1;"})}),i.push(a),i.push({tag:"path",attributes:xe(xe({},r),{},{opacity:"1",d:"M263.7,312h-16c-6.6,0-12-5.4-12-12c0-71,77.4-63.9,77.4-107.8c0-20-17.8-40.2-57.4-40.2c-29.1,0-44.3,9.6-59.2,28.7 c-3.9,5-11.1,6-16.2,2.4l-13.1-9.2c-5.6-3.9-6.9-11.8-2.6-17.2c21.2-27.2,46.4-44.7,91.2-44.7c52.3,0,97.4,29.8,97.4,80.2 c0,67.6-77.4,63.5-77.4,107.8C275.7,306.6,270.3,312,263.7,312z"}),children:t?[]:[{tag:"animate",attributes:xe(xe({},o),{},{values:"1;0;0;0;0;1;"})}]}),t||i.push({tag:"path",attributes:xe(xe({},r),{},{opacity:"0",d:"M232.5,134.5l7,168c0.3,6.4,5.6,11.5,12,11.5h9c6.4,0,11.7-5.1,12-11.5l7-168c0.3-6.8-5.2-12.5-12-12.5h-23 C237.7,122,232.2,127.7,232.5,134.5z"}),children:[{tag:"animate",attributes:xe(xe({},o),{},{values:"0;0;1;1;0;0;"})}]}),{tag:"g",attributes:{class:"missing"},children:i}}}},{hooks:function(){return{parseNodeAttributes:function(t,i){var r=i.getAttribute("data-fa-symbol");return t.symbol=null!==r&&(""===r||r),t}}}}],{mixoutsTo:wi});var eK=wi.parse,tK=wi.icon;const nK=["*"],sK=n=>{const e={"fa-spin":n.spin,"fa-pulse":n.pulse,"fa-fw":n.fixedWidth,"fa-border":n.border,"fa-inverse":n.inverse,"fa-layers-counter":n.counter,"fa-flip-horizontal":"horizontal"===n.flip||"both"===n.flip,"fa-flip-vertical":"vertical"===n.flip||"both"===n.flip,[`fa-${n.size}`]:null!==n.size,[`fa-rotate-${n.rotate}`]:null!==n.rotate,[`fa-pull-${n.pull}`]:null!==n.pull,[`fa-stack-${n.stackItemSize}`]:null!=n.stackItemSize};return Object.keys(e).map(t=>e[t]?t:null).filter(t=>t)};let cK=(()=>{class n{constructor(){this.defaultPrefix="fas",this.fallbackIcon=null}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=Ae({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),lK=(()=>{class n{constructor(){this.definitions={}}addIcons(...t){for(const i of t){i.prefix in this.definitions||(this.definitions[i.prefix]={}),this.definitions[i.prefix][i.iconName]=i;for(const r of i.icon[2])"string"==typeof r&&(this.definitions[i.prefix][r]=i)}}addIconPacks(...t){for(const i of t){const r=Object.keys(i).map(s=>i[s]);this.addIcons(...r)}}getIconDefinition(t,i){return t in this.definitions&&i in this.definitions[t]?this.definitions[t][i]:null}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=Ae({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),uK=(()=>{class n{constructor(){this.stackItemSize="1x"}ngOnChanges(t){if("size"in t)throw new Error('fa-icon is not allowed to customize size when used inside fa-stack. Set size on the enclosing fa-stack instead: <fa-stack size="4x">...</fa-stack>.')}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=On({type:n,selectors:[["fa-icon","stackItemSize",""],["fa-duotone-icon","stackItemSize",""]],inputs:{stackItemSize:"stackItemSize",size:"size"},features:[yr]}),n})(),fK=(()=>{class n{constructor(t,i){this.renderer=t,this.elementRef=i}ngOnInit(){this.renderer.addClass(this.elementRef.nativeElement,"fa-stack")}ngOnChanges(t){"size"in t&&(null!=t.size.currentValue&&this.renderer.addClass(this.elementRef.nativeElement,`fa-${t.size.currentValue}`),null!=t.size.previousValue&&this.renderer.removeClass(this.elementRef.nativeElement,`fa-${t.size.previousValue}`))}}return n.\u0275fac=function(t){return new(t||n)(Ee(A2),Ee(jr))},n.\u0275cmp=zi({type:n,selectors:[["fa-stack"]],inputs:{size:"size"},features:[yr],ngContentSelectors:nK,decls:1,vars:0,template:function(t,i){1&t&&(function _m(n){const e=X()[16][6];if(!e.projection){const i=e.projection=g2(n?n.length:1,null),r=i.slice();let s=e.child;for(;null!==s;){const o=n?ZI(s,n):0;null!==o&&(r[o]?r[o].projectionNext=s:i[o]=s,r[o]=s),s=s.next}}}(),function xm(n,e=0,t){const i=X(),r=dt(),s=No(r,22+n,16,null,t||null);null===s.projection&&(s.projection=e),R0(),32!=(32&s.flags)&&function fA(n,e,t){B9(e[11],0,e,t,z9(n,t,e),F9(t.parent||e[6],t,e))}(r,i,s)}(0))},encapsulation:2}),n})(),_M=(()=>{class n{constructor(t,i,r,s,o){this.sanitizer=t,this.config=i,this.iconLibrary=r,this.stackItem=s,this.classes=[],null!=o&&null==s&&console.error('FontAwesome: fa-icon and fa-duotone-icon elements must specify stackItemSize attribute when wrapped into fa-stack. Example: <fa-icon stackItemSize="2x"></fa-icon>.')}ngOnChanges(t){if(null==this.icon&&null==this.config.fallbackIcon)return(()=>{throw new Error("Property `icon` is required for `fa-icon`/`fa-duotone-icon` components.")})();if(t){const r=this.findIconDefinition(null!=this.icon?this.icon:this.config.fallbackIcon);if(null!=r){const s=this.buildParams();this.renderIcon(r,s)}}}render(){this.ngOnChanges({})}findIconDefinition(t){const i=((n,e)=>(n=>void 0!==n.prefix&&void 0!==n.iconName)(n)?n:Array.isArray(n)&&2===n.length?{prefix:n[0],iconName:n[1]}:"string"==typeof n?{prefix:e,iconName:n}:void 0)(t,this.config.defaultPrefix);return"icon"in i?i:this.iconLibrary.getIconDefinition(i.prefix,i.iconName)??((n=>{throw new Error(`Could not find icon with iconName=${n.iconName} and prefix=${n.prefix} in the icon library.`)})(i),null)}buildParams(){const t={flip:this.flip,spin:this.spin,pulse:this.pulse,border:this.border,inverse:this.inverse,size:this.size||null,pull:this.pull||null,rotate:this.rotate||null,fixedWidth:"boolean"==typeof this.fixedWidth?this.fixedWidth:this.config.fixedWidth,stackItemSize:null!=this.stackItem?this.stackItem.stackItemSize:null},i="string"==typeof this.transform?eK.transform(this.transform):this.transform;return{title:this.title,transform:i,classes:[...sK(t),...this.classes],mask:null!=this.mask?this.findIconDefinition(this.mask):null,styles:null!=this.styles?this.styles:{},symbol:this.symbol,attributes:{role:this.a11yRole}}}renderIcon(t,i){const r=tK(t,i);this.renderedIconHTML=this.sanitizer.bypassSecurityTrustHtml(r.html.join("\n"))}}return n.\u0275fac=function(t){return new(t||n)(Ee(jy),Ee(cK),Ee(lK),Ee(uK,8),Ee(fK,8))},n.\u0275cmp=zi({type:n,selectors:[["fa-icon"]],hostAttrs:[1,"ng-fa-icon"],hostVars:2,hostBindings:function(t,i){2&t&&(cf("innerHTML",i.renderedIconHTML,np),x3("title",i.title))},inputs:{icon:"icon",title:"title",spin:"spin",pulse:"pulse",mask:"mask",styles:"styles",flip:"flip",size:"size",pull:"pull",border:"border",inverse:"inverse",symbol:"symbol",rotate:"rotate",fixedWidth:"fixedWidth",classes:"classes",transform:"transform",a11yRole:"a11yRole"},features:[yr],decls:0,vars:0,template:function(t,i){},encapsulation:2}),n})(),dK=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=Xi({type:n}),n.\u0275inj=Li({}),n})();function hK(n,e){1&n&&(We(0,"p",16),zt(1," I am a full stack web developer based in Indore, India. This website is a personal project that serves as a portfolio. Built using Angular, three.js and blender. Feel free to contact me using the contact page or through one of the social media profiles. "),ft())}class Rc{constructor(){this.faFacebookF=mb,this.faGit=gb,this.faSkype=_h,this.faLinkedin=cb,this.onChildUpdate=new Bn,this.pageView=M1,console.log("bankName!!! ",this.page)}onSubmit(){this.onChildUpdate.emit("New"+Math.random())}}function xM(n,e,t,i,r,s,o){try{var a=n[s](o),c=a.value}catch(l){return void t(l)}a.done?e(c):Promise.resolve(c).then(i,r)}Rc.\u0275fac=function(e){return new(e||Rc)},Rc.\u0275cmp=zi({type:Rc,selectors:[["app-home"]],inputs:{page:"page"},outputs:{onChildUpdate:"onChildUpdate"},decls:24,vars:5,consts:[[1,"main-content","home-bg"],["data-wow-duration","2s","data-wow-delay",".5s",1,"pre-title","wow","fadeIn"],["data-wow-duration","3s","data-wow-delay","1s",1,"wow","fadeIn"],[1,"gradientText"],["data-wow-duration","4s","data-wow-delay","1.5s",1,"post-title","wow","fadeIn",3,"click"],["class","detail wow fadeIn","data-wow-duration","4s","data-wow-delay","1.5s",4,"ngIf"],["data-wow-duration","1s","data-wow-delay","3s",1,"wow","fadeInUp"],[1,"home-social"],["data-wow-duration","4s","data-wow-delay","1.25s",1,"wow","fadeIn"],["href","https://www.upwork.com/freelancers/~013cbef28a7f7be37d","target","_blank"],[3,"icon"],["data-wow-duration","4s","data-wow-delay","1.5s",1,"wow","fadeIn"],["href","https://github.com/yogeshbangar","target","_blank"],["data-wow-duration","4s","data-wow-delay","1.75s",1,"wow","fadeIn"],["data-wow-duration","4s","data-wow-delay","2s",1,"wow","fadeIn"],["href","https://www.linkedin.com/in/yogesh-bangar-45632b18/","target","_blank"],["data-wow-duration","4s","data-wow-delay","1.5s",1,"detail","wow","fadeIn"]],template:function(e,t){1&e&&(We(0,"div",0)(1,"span",1),zt(2,"HELLO,"),ft(),We(3,"h2",2)(4,"span",3),zt(5,"I'M Yogesh Bangar"),ft()(),We(6,"p",4),ci("click",function(){return t.onSubmit()}),zt(7," WEBGL & FRONT-END DEVELOPER "),ft(),$o(8,hK,2,0,"p",5),cn(9,"hr",6),We(10,"div",7)(11,"ul")(12,"li",8)(13,"a",9),cn(14,"fa-icon",10),ft()(),We(15,"li",11)(16,"a",12),cn(17,"fa-icon",10),ft()(),We(18,"li",13)(19,"a",12),cn(20,"fa-icon",10),ft()(),We(21,"li",14)(22,"a",15),cn(23,"fa-icon",10),ft()()()()()),2&e&&(Ft(8),vn("ngIf",t.page===t.pageView.ABOUT),Ft(6),vn("icon",t.faFacebookF),Ft(3),vn("icon",t.faGit),Ft(3),vn("icon",t.faSkype),Ft(3),vn("icon",t.faLinkedin))},dependencies:[od,_M],styles:[".main-content[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:center;align-items:center;height:100vh}.main-content[_ngcontent-%COMP%]   hr[_ngcontent-%COMP%]{width:70px;height:1px;border:0;background-color:#787878;margin:10px 0;position:relative}.main-content[_ngcontent-%COMP%]   .detail[_ngcontent-%COMP%]{max-width:400px;text-align:justify}.home-social[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{list-style:none;background-color:#000;padding:0 0 0 40px;margin:0}.home-social[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{position:relative;display:inline-block;width:50px;text-align:left}.home-bg[_ngcontent-%COMP%]{max-width:500px;max-height:400px;transform:translate(-50%,-50%);top:45%;left:50%;position:absolute;padding:20px;border-radius:10px}"]});const I1=1e3,$n=1001,fn=1003,Kt=1006,Fs=1008,L1=1009,R1=1014,ks=1015,Oc=1016,va=1020,Gi=1023,z1=1026,ya=1027,Fc=2300,_a=2301,xa=2400,ba=2401,P1=3e3,Et=3001,Ir="srgb",kc="srgb-linear";class O1{addEventListener(e,t){void 0===this._listeners&&(this._listeners={});const i=this._listeners;void 0===i[e]&&(i[e]=[]),-1===i[e].indexOf(t)&&i[e].push(t)}hasEventListener(e,t){if(void 0===this._listeners)return!1;const i=this._listeners;return void 0!==i[e]&&-1!==i[e].indexOf(t)}removeEventListener(e,t){if(void 0===this._listeners)return;const r=this._listeners[e];if(void 0!==r){const s=r.indexOf(t);-1!==s&&r.splice(s,1)}}dispatchEvent(e){if(void 0===this._listeners)return;const i=this._listeners[e.type];if(void 0!==i){e.target=this;const r=i.slice(0);for(let s=0,o=r.length;s<o;s++)r[s].call(this,e);e.target=null}}}const jn=["00","01","02","03","04","05","06","07","08","09","0a","0b","0c","0d","0e","0f","10","11","12","13","14","15","16","17","18","19","1a","1b","1c","1d","1e","1f","20","21","22","23","24","25","26","27","28","29","2a","2b","2c","2d","2e","2f","30","31","32","33","34","35","36","37","38","39","3a","3b","3c","3d","3e","3f","40","41","42","43","44","45","46","47","48","49","4a","4b","4c","4d","4e","4f","50","51","52","53","54","55","56","57","58","59","5a","5b","5c","5d","5e","5f","60","61","62","63","64","65","66","67","68","69","6a","6b","6c","6d","6e","6f","70","71","72","73","74","75","76","77","78","79","7a","7b","7c","7d","7e","7f","80","81","82","83","84","85","86","87","88","89","8a","8b","8c","8d","8e","8f","90","91","92","93","94","95","96","97","98","99","9a","9b","9c","9d","9e","9f","a0","a1","a2","a3","a4","a5","a6","a7","a8","a9","aa","ab","ac","ad","ae","af","b0","b1","b2","b3","b4","b5","b6","b7","b8","b9","ba","bb","bc","bd","be","bf","c0","c1","c2","c3","c4","c5","c6","c7","c8","c9","ca","cb","cc","cd","ce","cf","d0","d1","d2","d3","d4","d5","d6","d7","d8","d9","da","db","dc","dd","de","df","e0","e1","e2","e3","e4","e5","e6","e7","e8","e9","ea","eb","ec","ed","ee","ef","f0","f1","f2","f3","f4","f5","f6","f7","f8","f9","fa","fb","fc","fd","fe","ff"];let tw=1234567;const F1=Math.PI/180,Vc=180/Math.PI;function Ci(){const n=4294967295*Math.random()|0,e=4294967295*Math.random()|0,t=4294967295*Math.random()|0,i=4294967295*Math.random()|0;return(jn[255&n]+jn[n>>8&255]+jn[n>>16&255]+jn[n>>24&255]+"-"+jn[255&e]+jn[e>>8&255]+"-"+jn[e>>16&15|64]+jn[e>>24&255]+"-"+jn[63&t|128]+jn[t>>8&255]+"-"+jn[t>>16&255]+jn[t>>24&255]+jn[255&i]+jn[i>>8&255]+jn[i>>16&255]+jn[i>>24&255]).toLowerCase()}function rn(n,e,t){return Math.max(e,Math.min(t,n))}function a6(n,e){return(n%e+e)%e}function Hc(n,e,t){return(1-t)*n+t*e}function c6(n){return 0==(n&n-1)&&0!==n}function nw(n){return Math.pow(2,Math.ceil(Math.log(n)/Math.LN2))}function Ku(n){return Math.pow(2,Math.floor(Math.log(n)/Math.LN2))}function as(n,e){switch(e.constructor){case Float32Array:return n;case Uint16Array:return n/65535;case Uint8Array:return n/255;case Int16Array:return Math.max(n/32767,-1);case Int8Array:return Math.max(n/127,-1);default:throw new Error("Invalid component type.")}}function Tt(n,e){switch(e.constructor){case Float32Array:return n;case Uint16Array:return Math.round(65535*n);case Uint8Array:return Math.round(255*n);case Int16Array:return Math.round(32767*n);case Int8Array:return Math.round(127*n);default:throw new Error("Invalid component type.")}}var EJ=Object.freeze({__proto__:null,DEG2RAD:F1,RAD2DEG:Vc,generateUUID:Ci,clamp:rn,euclideanModulo:a6,mapLinear:function hJ(n,e,t,i,r){return i+(n-e)*(r-i)/(t-e)},inverseLerp:function pJ(n,e,t){return n!==e?(t-n)/(e-n):0},lerp:Hc,damp:function mJ(n,e,t,i){return Hc(n,e,1-Math.exp(-t*i))},pingpong:function gJ(n,e=1){return e-Math.abs(a6(n,2*e)-e)},smoothstep:function vJ(n,e,t){return n<=e?0:n>=t?1:(n=(n-e)/(t-e))*n*(3-2*n)},smootherstep:function yJ(n,e,t){return n<=e?0:n>=t?1:(n=(n-e)/(t-e))*n*n*(n*(6*n-15)+10)},randInt:function _J(n,e){return n+Math.floor(Math.random()*(e-n+1))},randFloat:function xJ(n,e){return n+Math.random()*(e-n)},randFloatSpread:function bJ(n){return n*(.5-Math.random())},seededRandom:function MJ(n){void 0!==n&&(tw=n);let e=tw+=1831565813;return e=Math.imul(e^e>>>15,1|e),e^=e+Math.imul(e^e>>>7,61|e),((e^e>>>14)>>>0)/4294967296},degToRad:function wJ(n){return n*F1},radToDeg:function CJ(n){return n*Vc},isPowerOfTwo:c6,ceilPowerOfTwo:nw,floorPowerOfTwo:Ku,setQuaternionFromProperEuler:function SJ(n,e,t,i,r){const s=Math.cos,o=Math.sin,a=s(t/2),c=o(t/2),l=s((e+i)/2),u=o((e+i)/2),f=s((e-i)/2),d=o((e-i)/2),h=s((i-e)/2),p=o((i-e)/2);switch(r){case"XYX":n.set(a*u,c*f,c*d,a*l);break;case"YZY":n.set(c*d,a*u,c*f,a*l);break;case"ZXZ":n.set(c*f,c*d,a*u,a*l);break;case"XZX":n.set(a*u,c*p,c*h,a*l);break;case"YXY":n.set(c*h,a*u,c*p,a*l);break;case"ZYZ":n.set(c*p,c*h,a*u,a*l);break;default:console.warn("THREE.MathUtils: .setQuaternionFromProperEuler() encountered an unknown order: "+r)}},normalize:Tt,denormalize:as});class K{constructor(e=0,t=0){K.prototype.isVector2=!0,this.x=e,this.y=t}get width(){return this.x}set width(e){this.x=e}get height(){return this.y}set height(e){this.y=e}set(e,t){return this.x=e,this.y=t,this}setScalar(e){return this.x=e,this.y=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y)}copy(e){return this.x=e.x,this.y=e.y,this}add(e){return this.x+=e.x,this.y+=e.y,this}addScalar(e){return this.x+=e,this.y+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this}subScalar(e){return this.x-=e,this.y-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this}multiply(e){return this.x*=e.x,this.y*=e.y,this}multiplyScalar(e){return this.x*=e,this.y*=e,this}divide(e){return this.x/=e.x,this.y/=e.y,this}divideScalar(e){return this.multiplyScalar(1/e)}applyMatrix3(e){const t=this.x,i=this.y,r=e.elements;return this.x=r[0]*t+r[3]*i+r[6],this.y=r[1]*t+r[4]*i+r[7],this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this}clampLength(e,t){const i=this.length();return this.divideScalar(i||1).multiplyScalar(Math.max(e,Math.min(t,i)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this}negate(){return this.x=-this.x,this.y=-this.y,this}dot(e){return this.x*e.x+this.y*e.y}cross(e){return this.x*e.y-this.y*e.x}lengthSq(){return this.x*this.x+this.y*this.y}length(){return Math.sqrt(this.x*this.x+this.y*this.y)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)}normalize(){return this.divideScalar(this.length()||1)}angle(){return Math.atan2(-this.y,-this.x)+Math.PI}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const t=this.x-e.x,i=this.y-e.y;return t*t+i*i}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this}lerpVectors(e,t,i){return this.x=e.x+(t.x-e.x)*i,this.y=e.y+(t.y-e.y)*i,this}equals(e){return e.x===this.x&&e.y===this.y}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this}rotateAround(e,t){const i=Math.cos(t),r=Math.sin(t),s=this.x-e.x,o=this.y-e.y;return this.x=s*i-o*r+e.x,this.y=s*r+o*i+e.y,this}random(){return this.x=Math.random(),this.y=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y}}class fi{constructor(){fi.prototype.isMatrix3=!0,this.elements=[1,0,0,0,1,0,0,0,1]}set(e,t,i,r,s,o,a,c,l){const u=this.elements;return u[0]=e,u[1]=r,u[2]=a,u[3]=t,u[4]=s,u[5]=c,u[6]=i,u[7]=o,u[8]=l,this}identity(){return this.set(1,0,0,0,1,0,0,0,1),this}copy(e){const t=this.elements,i=e.elements;return t[0]=i[0],t[1]=i[1],t[2]=i[2],t[3]=i[3],t[4]=i[4],t[5]=i[5],t[6]=i[6],t[7]=i[7],t[8]=i[8],this}extractBasis(e,t,i){return e.setFromMatrix3Column(this,0),t.setFromMatrix3Column(this,1),i.setFromMatrix3Column(this,2),this}setFromMatrix4(e){const t=e.elements;return this.set(t[0],t[4],t[8],t[1],t[5],t[9],t[2],t[6],t[10]),this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){const i=e.elements,r=t.elements,s=this.elements,o=i[0],a=i[3],c=i[6],l=i[1],u=i[4],f=i[7],d=i[2],h=i[5],p=i[8],g=r[0],m=r[3],v=r[6],x=r[1],y=r[4],_=r[7],M=r[2],w=r[5],T=r[8];return s[0]=o*g+a*x+c*M,s[3]=o*m+a*y+c*w,s[6]=o*v+a*_+c*T,s[1]=l*g+u*x+f*M,s[4]=l*m+u*y+f*w,s[7]=l*v+u*_+f*T,s[2]=d*g+h*x+p*M,s[5]=d*m+h*y+p*w,s[8]=d*v+h*_+p*T,this}multiplyScalar(e){const t=this.elements;return t[0]*=e,t[3]*=e,t[6]*=e,t[1]*=e,t[4]*=e,t[7]*=e,t[2]*=e,t[5]*=e,t[8]*=e,this}determinant(){const e=this.elements,t=e[0],i=e[1],r=e[2],s=e[3],o=e[4],a=e[5],c=e[6],l=e[7],u=e[8];return t*o*u-t*a*l-i*s*u+i*a*c+r*s*l-r*o*c}invert(){const e=this.elements,t=e[0],i=e[1],r=e[2],s=e[3],o=e[4],a=e[5],c=e[6],l=e[7],u=e[8],f=u*o-a*l,d=a*c-u*s,h=l*s-o*c,p=t*f+i*d+r*h;if(0===p)return this.set(0,0,0,0,0,0,0,0,0);const g=1/p;return e[0]=f*g,e[1]=(r*l-u*i)*g,e[2]=(a*i-r*o)*g,e[3]=d*g,e[4]=(u*t-r*c)*g,e[5]=(r*s-a*t)*g,e[6]=h*g,e[7]=(i*c-l*t)*g,e[8]=(o*t-i*s)*g,this}transpose(){let e;const t=this.elements;return e=t[1],t[1]=t[3],t[3]=e,e=t[2],t[2]=t[6],t[6]=e,e=t[5],t[5]=t[7],t[7]=e,this}getNormalMatrix(e){return this.setFromMatrix4(e).invert().transpose()}transposeIntoArray(e){const t=this.elements;return e[0]=t[0],e[1]=t[3],e[2]=t[6],e[3]=t[1],e[4]=t[4],e[5]=t[7],e[6]=t[2],e[7]=t[5],e[8]=t[8],this}setUvTransform(e,t,i,r,s,o,a){const c=Math.cos(s),l=Math.sin(s);return this.set(i*c,i*l,-i*(c*o+l*a)+o+e,-r*l,r*c,-r*(-l*o+c*a)+a+t,0,0,1),this}scale(e,t){return this.premultiply(l6.makeScale(e,t)),this}rotate(e){return this.premultiply(l6.makeRotation(-e)),this}translate(e,t){return this.premultiply(l6.makeTranslation(e,t)),this}makeTranslation(e,t){return this.set(1,0,e,0,1,t,0,0,1),this}makeRotation(e){const t=Math.cos(e),i=Math.sin(e);return this.set(t,-i,0,i,t,0,0,0,1),this}makeScale(e,t){return this.set(e,0,0,0,t,0,0,0,1),this}equals(e){const t=this.elements,i=e.elements;for(let r=0;r<9;r++)if(t[r]!==i[r])return!1;return!0}fromArray(e,t=0){for(let i=0;i<9;i++)this.elements[i]=e[i+t];return this}toArray(e=[],t=0){const i=this.elements;return e[t]=i[0],e[t+1]=i[1],e[t+2]=i[2],e[t+3]=i[3],e[t+4]=i[4],e[t+5]=i[5],e[t+6]=i[6],e[t+7]=i[7],e[t+8]=i[8],e}clone(){return(new this.constructor).fromArray(this.elements)}}const l6=new fi;function iw(n){for(let e=n.length-1;e>=0;--e)if(n[e]>=65535)return!0;return!1}function Uc(n){return document.createElementNS("http://www.w3.org/1999/xhtml",n)}function k1(n){return n<.04045?.0773993808*n:Math.pow(.9478672986*n+.0521327014,2.4)}function Ju(n){return n<.0031308?12.92*n:1.055*Math.pow(n,.41666)-.055}Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array;const u6={[Ir]:{[kc]:k1},[kc]:{[Ir]:Ju}},ei={legacyMode:!0,get workingColorSpace(){return kc},set workingColorSpace(n){console.warn("THREE.ColorManagement: .workingColorSpace is readonly.")},convert:function(n,e,t){if(this.legacyMode||e===t||!e||!t)return n;if(u6[e]&&void 0!==u6[e][t]){const i=u6[e][t];return n.r=i(n.r),n.g=i(n.g),n.b=i(n.b),n}throw new Error("Unsupported color space conversion.")},fromWorkingColorSpace:function(n,e){return this.convert(n,this.workingColorSpace,e)},toWorkingColorSpace:function(n,e){return this.convert(n,e,this.workingColorSpace)}},rw={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},Mn={r:0,g:0,b:0},lr={h:0,s:0,l:0},Qu={h:0,s:0,l:0};function f6(n,e,t){return t<0&&(t+=1),t>1&&(t-=1),t<1/6?n+6*(e-n)*t:t<.5?e:t<2/3?n+6*(e-n)*(2/3-t):n}function e4(n,e){return e.r=n.r,e.g=n.g,e.b=n.b,e}let wa,pe=(()=>{class n{constructor(t,i,r){return this.isColor=!0,this.r=1,this.g=1,this.b=1,void 0===i&&void 0===r?this.set(t):this.setRGB(t,i,r)}set(t){return t&&t.isColor?this.copy(t):"number"==typeof t?this.setHex(t):"string"==typeof t&&this.setStyle(t),this}setScalar(t){return this.r=t,this.g=t,this.b=t,this}setHex(t,i=Ir){return t=Math.floor(t),this.r=(t>>16&255)/255,this.g=(t>>8&255)/255,this.b=(255&t)/255,ei.toWorkingColorSpace(this,i),this}setRGB(t,i,r,s=ei.workingColorSpace){return this.r=t,this.g=i,this.b=r,ei.toWorkingColorSpace(this,s),this}setHSL(t,i,r,s=ei.workingColorSpace){if(t=a6(t,1),i=rn(i,0,1),r=rn(r,0,1),0===i)this.r=this.g=this.b=r;else{const o=r<=.5?r*(1+i):r+i-r*i,a=2*r-o;this.r=f6(a,o,t+1/3),this.g=f6(a,o,t),this.b=f6(a,o,t-1/3)}return ei.toWorkingColorSpace(this,s),this}setStyle(t,i=Ir){function r(o){void 0!==o&&parseFloat(o)<1&&console.warn("THREE.Color: Alpha component of "+t+" will be ignored.")}let s;if(s=/^((?:rgb|hsl)a?)\(([^\)]*)\)/.exec(t)){let o;const c=s[2];switch(s[1]){case"rgb":case"rgba":if(o=/^\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(c))return this.r=Math.min(255,parseInt(o[1],10))/255,this.g=Math.min(255,parseInt(o[2],10))/255,this.b=Math.min(255,parseInt(o[3],10))/255,ei.toWorkingColorSpace(this,i),r(o[4]),this;if(o=/^\s*(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(c))return this.r=Math.min(100,parseInt(o[1],10))/100,this.g=Math.min(100,parseInt(o[2],10))/100,this.b=Math.min(100,parseInt(o[3],10))/100,ei.toWorkingColorSpace(this,i),r(o[4]),this;break;case"hsl":case"hsla":if(o=/^\s*(\d*\.?\d+)\s*,\s*(\d*\.?\d+)\%\s*,\s*(\d*\.?\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(c)){const l=parseFloat(o[1])/360,u=parseFloat(o[2])/100,f=parseFloat(o[3])/100;return r(o[4]),this.setHSL(l,u,f,i)}}}else if(s=/^\#([A-Fa-f\d]+)$/.exec(t)){const o=s[1],a=o.length;if(3===a)return this.r=parseInt(o.charAt(0)+o.charAt(0),16)/255,this.g=parseInt(o.charAt(1)+o.charAt(1),16)/255,this.b=parseInt(o.charAt(2)+o.charAt(2),16)/255,ei.toWorkingColorSpace(this,i),this;if(6===a)return this.r=parseInt(o.charAt(0)+o.charAt(1),16)/255,this.g=parseInt(o.charAt(2)+o.charAt(3),16)/255,this.b=parseInt(o.charAt(4)+o.charAt(5),16)/255,ei.toWorkingColorSpace(this,i),this}return t&&t.length>0?this.setColorName(t,i):this}setColorName(t,i=Ir){const r=rw[t.toLowerCase()];return void 0!==r?this.setHex(r,i):console.warn("THREE.Color: Unknown color "+t),this}clone(){return new this.constructor(this.r,this.g,this.b)}copy(t){return this.r=t.r,this.g=t.g,this.b=t.b,this}copySRGBToLinear(t){return this.r=k1(t.r),this.g=k1(t.g),this.b=k1(t.b),this}copyLinearToSRGB(t){return this.r=Ju(t.r),this.g=Ju(t.g),this.b=Ju(t.b),this}convertSRGBToLinear(){return this.copySRGBToLinear(this),this}convertLinearToSRGB(){return this.copyLinearToSRGB(this),this}getHex(t=Ir){return ei.fromWorkingColorSpace(e4(this,Mn),t),rn(255*Mn.r,0,255)<<16^rn(255*Mn.g,0,255)<<8^rn(255*Mn.b,0,255)<<0}getHexString(t=Ir){return("000000"+this.getHex(t).toString(16)).slice(-6)}getHSL(t,i=ei.workingColorSpace){ei.fromWorkingColorSpace(e4(this,Mn),i);const r=Mn.r,s=Mn.g,o=Mn.b,a=Math.max(r,s,o),c=Math.min(r,s,o);let l,u;const f=(c+a)/2;if(c===a)l=0,u=0;else{const d=a-c;switch(u=f<=.5?d/(a+c):d/(2-a-c),a){case r:l=(s-o)/d+(s<o?6:0);break;case s:l=(o-r)/d+2;break;case o:l=(r-s)/d+4}l/=6}return t.h=l,t.s=u,t.l=f,t}getRGB(t,i=ei.workingColorSpace){return ei.fromWorkingColorSpace(e4(this,Mn),i),t.r=Mn.r,t.g=Mn.g,t.b=Mn.b,t}getStyle(t=Ir){return ei.fromWorkingColorSpace(e4(this,Mn),t),t!==Ir?`color(${t} ${Mn.r} ${Mn.g} ${Mn.b})`:`rgb(${255*Mn.r|0},${255*Mn.g|0},${255*Mn.b|0})`}offsetHSL(t,i,r){return this.getHSL(lr),lr.h+=t,lr.s+=i,lr.l+=r,this.setHSL(lr.h,lr.s,lr.l),this}add(t){return this.r+=t.r,this.g+=t.g,this.b+=t.b,this}addColors(t,i){return this.r=t.r+i.r,this.g=t.g+i.g,this.b=t.b+i.b,this}addScalar(t){return this.r+=t,this.g+=t,this.b+=t,this}sub(t){return this.r=Math.max(0,this.r-t.r),this.g=Math.max(0,this.g-t.g),this.b=Math.max(0,this.b-t.b),this}multiply(t){return this.r*=t.r,this.g*=t.g,this.b*=t.b,this}multiplyScalar(t){return this.r*=t,this.g*=t,this.b*=t,this}lerp(t,i){return this.r+=(t.r-this.r)*i,this.g+=(t.g-this.g)*i,this.b+=(t.b-this.b)*i,this}lerpColors(t,i,r){return this.r=t.r+(i.r-t.r)*r,this.g=t.g+(i.g-t.g)*r,this.b=t.b+(i.b-t.b)*r,this}lerpHSL(t,i){this.getHSL(lr),t.getHSL(Qu);const r=Hc(lr.h,Qu.h,i),s=Hc(lr.s,Qu.s,i),o=Hc(lr.l,Qu.l,i);return this.setHSL(r,s,o),this}equals(t){return t.r===this.r&&t.g===this.g&&t.b===this.b}fromArray(t,i=0){return this.r=t[i],this.g=t[i+1],this.b=t[i+2],this}toArray(t=[],i=0){return t[i]=this.r,t[i+1]=this.g,t[i+2]=this.b,t}fromBufferAttribute(t,i){return this.r=t.getX(i),this.g=t.getY(i),this.b=t.getZ(i),this}toJSON(){return this.getHex()}*[Symbol.iterator](){yield this.r,yield this.g,yield this.b}}return n.NAMES=rw,n})();class sw{static getDataURL(e){if(/^data:/i.test(e.src)||typeof HTMLCanvasElement>"u")return e.src;let t;if(e instanceof HTMLCanvasElement)t=e;else{void 0===wa&&(wa=Uc("canvas")),wa.width=e.width,wa.height=e.height;const i=wa.getContext("2d");e instanceof ImageData?i.putImageData(e,0,0):i.drawImage(e,0,0,e.width,e.height),t=wa}return t.width>2048||t.height>2048?(console.warn("THREE.ImageUtils.getDataURL: Image converted to jpg for performance reasons",e),t.toDataURL("image/jpeg",.6)):t.toDataURL("image/png")}static sRGBToLinear(e){if(typeof HTMLImageElement<"u"&&e instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&e instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&e instanceof ImageBitmap){const t=Uc("canvas");t.width=e.width,t.height=e.height;const i=t.getContext("2d");i.drawImage(e,0,0,e.width,e.height);const r=i.getImageData(0,0,e.width,e.height),s=r.data;for(let o=0;o<s.length;o++)s[o]=255*k1(s[o]/255);return i.putImageData(r,0,0),t}if(e.data){const t=e.data.slice(0);for(let i=0;i<t.length;i++)t[i]=t instanceof Uint8Array||t instanceof Uint8ClampedArray?Math.floor(255*k1(t[i]/255)):k1(t[i]);return{data:t,width:e.width,height:e.height}}return console.warn("THREE.ImageUtils.sRGBToLinear(): Unsupported image type. No color space conversion applied."),e}}class Ca{constructor(e=null){this.isSource=!0,this.uuid=Ci(),this.data=e,this.version=0}set needsUpdate(e){!0===e&&this.version++}toJSON(e){const t=void 0===e||"string"==typeof e;if(!t&&void 0!==e.images[this.uuid])return e.images[this.uuid];const i={uuid:this.uuid,url:""},r=this.data;if(null!==r){let s;if(Array.isArray(r)){s=[];for(let o=0,a=r.length;o<a;o++)s.push(d6(r[o].isDataTexture?r[o].image:r[o]))}else s=d6(r);i.url=s}return t||(e.images[this.uuid]=i),i}}function d6(n){return typeof HTMLImageElement<"u"&&n instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&n instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&n instanceof ImageBitmap?sw.getDataURL(n):n.data?{data:Array.from(n.data),width:n.width,height:n.height,type:n.data.constructor.name}:(console.warn("THREE.Texture: Unable to serialize Texture."),{})}let AJ=0,ur=(()=>{class n extends O1{constructor(t=n.DEFAULT_IMAGE,i=n.DEFAULT_MAPPING,r=$n,s=$n,o=Kt,a=Fs,c=Gi,l=L1,u=n.DEFAULT_ANISOTROPY,f=P1){super(),this.isTexture=!0,Object.defineProperty(this,"id",{value:AJ++}),this.uuid=Ci(),this.name="",this.source=new Ca(t),this.mipmaps=[],this.mapping=i,this.wrapS=r,this.wrapT=s,this.magFilter=o,this.minFilter=a,this.anisotropy=u,this.format=c,this.internalFormat=null,this.type=l,this.offset=new K(0,0),this.repeat=new K(1,1),this.center=new K(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new fi,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,this.encoding=f,this.userData={},this.version=0,this.onUpdate=null,this.isRenderTargetTexture=!1,this.needsPMREMUpdate=!1}get image(){return this.source.data}set image(t){this.source.data=t}updateMatrix(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)}clone(){return(new this.constructor).copy(this)}copy(t){return this.name=t.name,this.source=t.source,this.mipmaps=t.mipmaps.slice(0),this.mapping=t.mapping,this.wrapS=t.wrapS,this.wrapT=t.wrapT,this.magFilter=t.magFilter,this.minFilter=t.minFilter,this.anisotropy=t.anisotropy,this.format=t.format,this.internalFormat=t.internalFormat,this.type=t.type,this.offset.copy(t.offset),this.repeat.copy(t.repeat),this.center.copy(t.center),this.rotation=t.rotation,this.matrixAutoUpdate=t.matrixAutoUpdate,this.matrix.copy(t.matrix),this.generateMipmaps=t.generateMipmaps,this.premultiplyAlpha=t.premultiplyAlpha,this.flipY=t.flipY,this.unpackAlignment=t.unpackAlignment,this.encoding=t.encoding,this.userData=JSON.parse(JSON.stringify(t.userData)),this.needsUpdate=!0,this}toJSON(t){const i=void 0===t||"string"==typeof t;if(!i&&void 0!==t.textures[this.uuid])return t.textures[this.uuid];const r={metadata:{version:4.5,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,image:this.source.toJSON(t).uuid,mapping:this.mapping,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,type:this.type,encoding:this.encoding,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};return"{}"!==JSON.stringify(this.userData)&&(r.userData=this.userData),i||(t.textures[this.uuid]=r),r}dispose(){this.dispatchEvent({type:"dispose"})}transformUv(t){if(300!==this.mapping)return t;if(t.applyMatrix3(this.matrix),t.x<0||t.x>1)switch(this.wrapS){case I1:t.x=t.x-Math.floor(t.x);break;case $n:t.x=t.x<0?0:1;break;case 1002:t.x=1===Math.abs(Math.floor(t.x)%2)?Math.ceil(t.x)-t.x:t.x-Math.floor(t.x)}if(t.y<0||t.y>1)switch(this.wrapT){case I1:t.y=t.y-Math.floor(t.y);break;case $n:t.y=t.y<0?0:1;break;case 1002:t.y=1===Math.abs(Math.floor(t.y)%2)?Math.ceil(t.y)-t.y:t.y-Math.floor(t.y)}return this.flipY&&(t.y=1-t.y),t}set needsUpdate(t){!0===t&&(this.version++,this.source.needsUpdate=!0)}}return n.DEFAULT_IMAGE=null,n.DEFAULT_MAPPING=300,n.DEFAULT_ANISOTROPY=1,n})();class xt{constructor(e=0,t=0,i=0,r=1){xt.prototype.isVector4=!0,this.x=e,this.y=t,this.z=i,this.w=r}get width(){return this.z}set width(e){this.z=e}get height(){return this.w}set height(e){this.w=e}set(e,t,i,r){return this.x=e,this.y=t,this.z=i,this.w=r,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this.w=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setW(e){return this.w=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;case 3:this.w=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z,this.w)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this.w=void 0!==e.w?e.w:1,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this.w+=e.w,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this.w+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this.w=e.w+t.w,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this.w+=e.w*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this.w-=e.w,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this.w-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this.w=e.w-t.w,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this.w*=e.w,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this.w*=e,this}applyMatrix4(e){const t=this.x,i=this.y,r=this.z,s=this.w,o=e.elements;return this.x=o[0]*t+o[4]*i+o[8]*r+o[12]*s,this.y=o[1]*t+o[5]*i+o[9]*r+o[13]*s,this.z=o[2]*t+o[6]*i+o[10]*r+o[14]*s,this.w=o[3]*t+o[7]*i+o[11]*r+o[15]*s,this}divideScalar(e){return this.multiplyScalar(1/e)}setAxisAngleFromQuaternion(e){this.w=2*Math.acos(e.w);const t=Math.sqrt(1-e.w*e.w);return t<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=e.x/t,this.y=e.y/t,this.z=e.z/t),this}setAxisAngleFromRotationMatrix(e){let t,i,r,s;const c=e.elements,l=c[0],u=c[4],f=c[8],d=c[1],h=c[5],p=c[9],g=c[2],m=c[6],v=c[10];if(Math.abs(u-d)<.01&&Math.abs(f-g)<.01&&Math.abs(p-m)<.01){if(Math.abs(u+d)<.1&&Math.abs(f+g)<.1&&Math.abs(p+m)<.1&&Math.abs(l+h+v-3)<.1)return this.set(1,0,0,0),this;t=Math.PI;const y=(l+1)/2,_=(h+1)/2,M=(v+1)/2,w=(u+d)/4,T=(f+g)/4,b=(p+m)/4;return y>_&&y>M?y<.01?(i=0,r=.707106781,s=.707106781):(i=Math.sqrt(y),r=w/i,s=T/i):_>M?_<.01?(i=.707106781,r=0,s=.707106781):(r=Math.sqrt(_),i=w/r,s=b/r):M<.01?(i=.707106781,r=.707106781,s=0):(s=Math.sqrt(M),i=T/s,r=b/s),this.set(i,r,s,t),this}let x=Math.sqrt((m-p)*(m-p)+(f-g)*(f-g)+(d-u)*(d-u));return Math.abs(x)<.001&&(x=1),this.x=(m-p)/x,this.y=(f-g)/x,this.z=(d-u)/x,this.w=Math.acos((l+h+v-1)/2),this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this.w=Math.min(this.w,e.w),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this.w=Math.max(this.w,e.w),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this.z=Math.max(e.z,Math.min(t.z,this.z)),this.w=Math.max(e.w,Math.min(t.w,this.w)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this.z=Math.max(e,Math.min(t,this.z)),this.w=Math.max(e,Math.min(t,this.w)),this}clampLength(e,t){const i=this.length();return this.divideScalar(i||1).multiplyScalar(Math.max(e,Math.min(t,i)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this.w=this.w<0?Math.ceil(this.w):Math.floor(this.w),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z+this.w*e.w}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this.w+=(e.w-this.w)*t,this}lerpVectors(e,t,i){return this.x=e.x+(t.x-e.x)*i,this.y=e.y+(t.y-e.y)*i,this.z=e.z+(t.z-e.z)*i,this.w=e.w+(t.w-e.w)*i,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z&&e.w===this.w}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this.w=e[t+3],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e[t+3]=this.w,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this.w=e.getW(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this.w=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z,yield this.w}}class V1 extends O1{constructor(e=1,t=1,i={}){super(),this.isWebGLRenderTarget=!0,this.width=e,this.height=t,this.depth=1,this.scissor=new xt(0,0,e,t),this.scissorTest=!1,this.viewport=new xt(0,0,e,t),this.texture=new ur({width:e,height:t,depth:1},i.mapping,i.wrapS,i.wrapT,i.magFilter,i.minFilter,i.format,i.type,i.anisotropy,i.encoding),this.texture.isRenderTargetTexture=!0,this.texture.flipY=!1,this.texture.generateMipmaps=void 0!==i.generateMipmaps&&i.generateMipmaps,this.texture.internalFormat=void 0!==i.internalFormat?i.internalFormat:null,this.texture.minFilter=void 0!==i.minFilter?i.minFilter:Kt,this.depthBuffer=void 0===i.depthBuffer||i.depthBuffer,this.stencilBuffer=void 0!==i.stencilBuffer&&i.stencilBuffer,this.depthTexture=void 0!==i.depthTexture?i.depthTexture:null,this.samples=void 0!==i.samples?i.samples:0}setSize(e,t,i=1){(this.width!==e||this.height!==t||this.depth!==i)&&(this.width=e,this.height=t,this.depth=i,this.texture.image.width=e,this.texture.image.height=t,this.texture.image.depth=i,this.dispose()),this.viewport.set(0,0,e,t),this.scissor.set(0,0,e,t)}clone(){return(new this.constructor).copy(this)}copy(e){this.width=e.width,this.height=e.height,this.depth=e.depth,this.viewport.copy(e.viewport),this.texture=e.texture.clone(),this.texture.isRenderTargetTexture=!0;const t=Object.assign({},e.texture.image);return this.texture.source=new Ca(t),this.depthBuffer=e.depthBuffer,this.stencilBuffer=e.stencilBuffer,null!==e.depthTexture&&(this.depthTexture=e.depthTexture.clone()),this.samples=e.samples,this}dispose(){this.dispatchEvent({type:"dispose"})}}class h6 extends ur{constructor(e=null,t=1,i=1,r=1){super(null),this.isDataArrayTexture=!0,this.image={data:e,width:t,height:i,depth:r},this.magFilter=fn,this.minFilter=fn,this.wrapR=$n,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}class ow extends ur{constructor(e=null,t=1,i=1,r=1){super(null),this.isData3DTexture=!0,this.image={data:e,width:t,height:i,depth:r},this.magFilter=fn,this.minFilter=fn,this.wrapR=$n,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}class ti{constructor(e=0,t=0,i=0,r=1){this.isQuaternion=!0,this._x=e,this._y=t,this._z=i,this._w=r}static slerpFlat(e,t,i,r,s,o,a){let c=i[r+0],l=i[r+1],u=i[r+2],f=i[r+3];const d=s[o+0],h=s[o+1],p=s[o+2],g=s[o+3];if(0===a)return e[t+0]=c,e[t+1]=l,e[t+2]=u,void(e[t+3]=f);if(1===a)return e[t+0]=d,e[t+1]=h,e[t+2]=p,void(e[t+3]=g);if(f!==g||c!==d||l!==h||u!==p){let m=1-a;const v=c*d+l*h+u*p+f*g,x=v>=0?1:-1,y=1-v*v;if(y>Number.EPSILON){const M=Math.sqrt(y),w=Math.atan2(M,v*x);m=Math.sin(m*w)/M,a=Math.sin(a*w)/M}const _=a*x;if(c=c*m+d*_,l=l*m+h*_,u=u*m+p*_,f=f*m+g*_,m===1-a){const M=1/Math.sqrt(c*c+l*l+u*u+f*f);c*=M,l*=M,u*=M,f*=M}}e[t]=c,e[t+1]=l,e[t+2]=u,e[t+3]=f}static multiplyQuaternionsFlat(e,t,i,r,s,o){const a=i[r],c=i[r+1],l=i[r+2],u=i[r+3],f=s[o],d=s[o+1],h=s[o+2],p=s[o+3];return e[t]=a*p+u*f+c*h-l*d,e[t+1]=c*p+u*d+l*f-a*h,e[t+2]=l*p+u*h+a*d-c*f,e[t+3]=u*p-a*f-c*d-l*h,e}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get w(){return this._w}set w(e){this._w=e,this._onChangeCallback()}set(e,t,i,r){return this._x=e,this._y=t,this._z=i,this._w=r,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._w)}copy(e){return this._x=e.x,this._y=e.y,this._z=e.z,this._w=e.w,this._onChangeCallback(),this}setFromEuler(e,t){const i=e._x,r=e._y,s=e._z,o=e._order,a=Math.cos,c=Math.sin,l=a(i/2),u=a(r/2),f=a(s/2),d=c(i/2),h=c(r/2),p=c(s/2);switch(o){case"XYZ":this._x=d*u*f+l*h*p,this._y=l*h*f-d*u*p,this._z=l*u*p+d*h*f,this._w=l*u*f-d*h*p;break;case"YXZ":this._x=d*u*f+l*h*p,this._y=l*h*f-d*u*p,this._z=l*u*p-d*h*f,this._w=l*u*f+d*h*p;break;case"ZXY":this._x=d*u*f-l*h*p,this._y=l*h*f+d*u*p,this._z=l*u*p+d*h*f,this._w=l*u*f-d*h*p;break;case"ZYX":this._x=d*u*f-l*h*p,this._y=l*h*f+d*u*p,this._z=l*u*p-d*h*f,this._w=l*u*f+d*h*p;break;case"YZX":this._x=d*u*f+l*h*p,this._y=l*h*f+d*u*p,this._z=l*u*p-d*h*f,this._w=l*u*f-d*h*p;break;case"XZY":this._x=d*u*f-l*h*p,this._y=l*h*f-d*u*p,this._z=l*u*p+d*h*f,this._w=l*u*f+d*h*p;break;default:console.warn("THREE.Quaternion: .setFromEuler() encountered an unknown order: "+o)}return!1!==t&&this._onChangeCallback(),this}setFromAxisAngle(e,t){const i=t/2,r=Math.sin(i);return this._x=e.x*r,this._y=e.y*r,this._z=e.z*r,this._w=Math.cos(i),this._onChangeCallback(),this}setFromRotationMatrix(e){const t=e.elements,i=t[0],r=t[4],s=t[8],o=t[1],a=t[5],c=t[9],l=t[2],u=t[6],f=t[10],d=i+a+f;if(d>0){const h=.5/Math.sqrt(d+1);this._w=.25/h,this._x=(u-c)*h,this._y=(s-l)*h,this._z=(o-r)*h}else if(i>a&&i>f){const h=2*Math.sqrt(1+i-a-f);this._w=(u-c)/h,this._x=.25*h,this._y=(r+o)/h,this._z=(s+l)/h}else if(a>f){const h=2*Math.sqrt(1+a-i-f);this._w=(s-l)/h,this._x=(r+o)/h,this._y=.25*h,this._z=(c+u)/h}else{const h=2*Math.sqrt(1+f-i-a);this._w=(o-r)/h,this._x=(s+l)/h,this._y=(c+u)/h,this._z=.25*h}return this._onChangeCallback(),this}setFromUnitVectors(e,t){let i=e.dot(t)+1;return i<Number.EPSILON?(i=0,Math.abs(e.x)>Math.abs(e.z)?(this._x=-e.y,this._y=e.x,this._z=0,this._w=i):(this._x=0,this._y=-e.z,this._z=e.y,this._w=i)):(this._x=e.y*t.z-e.z*t.y,this._y=e.z*t.x-e.x*t.z,this._z=e.x*t.y-e.y*t.x,this._w=i),this.normalize()}angleTo(e){return 2*Math.acos(Math.abs(rn(this.dot(e),-1,1)))}rotateTowards(e,t){const i=this.angleTo(e);if(0===i)return this;const r=Math.min(1,t/i);return this.slerp(e,r),this}identity(){return this.set(0,0,0,1)}invert(){return this.conjugate()}conjugate(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this}dot(e){return this._x*e._x+this._y*e._y+this._z*e._z+this._w*e._w}lengthSq(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w}length(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)}normalize(){let e=this.length();return 0===e?(this._x=0,this._y=0,this._z=0,this._w=1):(e=1/e,this._x=this._x*e,this._y=this._y*e,this._z=this._z*e,this._w=this._w*e),this._onChangeCallback(),this}multiply(e){return this.multiplyQuaternions(this,e)}premultiply(e){return this.multiplyQuaternions(e,this)}multiplyQuaternions(e,t){const i=e._x,r=e._y,s=e._z,o=e._w,a=t._x,c=t._y,l=t._z,u=t._w;return this._x=i*u+o*a+r*l-s*c,this._y=r*u+o*c+s*a-i*l,this._z=s*u+o*l+i*c-r*a,this._w=o*u-i*a-r*c-s*l,this._onChangeCallback(),this}slerp(e,t){if(0===t)return this;if(1===t)return this.copy(e);const i=this._x,r=this._y,s=this._z,o=this._w;let a=o*e._w+i*e._x+r*e._y+s*e._z;if(a<0?(this._w=-e._w,this._x=-e._x,this._y=-e._y,this._z=-e._z,a=-a):this.copy(e),a>=1)return this._w=o,this._x=i,this._y=r,this._z=s,this;const c=1-a*a;if(c<=Number.EPSILON){const h=1-t;return this._w=h*o+t*this._w,this._x=h*i+t*this._x,this._y=h*r+t*this._y,this._z=h*s+t*this._z,this.normalize(),this._onChangeCallback(),this}const l=Math.sqrt(c),u=Math.atan2(l,a),f=Math.sin((1-t)*u)/l,d=Math.sin(t*u)/l;return this._w=o*f+this._w*d,this._x=i*f+this._x*d,this._y=r*f+this._y*d,this._z=s*f+this._z*d,this._onChangeCallback(),this}slerpQuaternions(e,t,i){return this.copy(e).slerp(t,i)}random(){const e=Math.random(),t=Math.sqrt(1-e),i=Math.sqrt(e),r=2*Math.PI*Math.random(),s=2*Math.PI*Math.random();return this.set(t*Math.cos(r),i*Math.sin(s),i*Math.cos(s),t*Math.sin(r))}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._w===this._w}fromArray(e,t=0){return this._x=e[t],this._y=e[t+1],this._z=e[t+2],this._w=e[t+3],this._onChangeCallback(),this}toArray(e=[],t=0){return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._w,e}fromBufferAttribute(e,t){return this._x=e.getX(t),this._y=e.getY(t),this._z=e.getZ(t),this._w=e.getW(t),this}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._w}}class S{constructor(e=0,t=0,i=0){S.prototype.isVector3=!0,this.x=e,this.y=t,this.z=i}set(e,t,i){return void 0===i&&(i=this.z),this.x=e,this.y=t,this.z=i,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this}multiplyVectors(e,t){return this.x=e.x*t.x,this.y=e.y*t.y,this.z=e.z*t.z,this}applyEuler(e){return this.applyQuaternion(aw.setFromEuler(e))}applyAxisAngle(e,t){return this.applyQuaternion(aw.setFromAxisAngle(e,t))}applyMatrix3(e){const t=this.x,i=this.y,r=this.z,s=e.elements;return this.x=s[0]*t+s[3]*i+s[6]*r,this.y=s[1]*t+s[4]*i+s[7]*r,this.z=s[2]*t+s[5]*i+s[8]*r,this}applyNormalMatrix(e){return this.applyMatrix3(e).normalize()}applyMatrix4(e){const t=this.x,i=this.y,r=this.z,s=e.elements,o=1/(s[3]*t+s[7]*i+s[11]*r+s[15]);return this.x=(s[0]*t+s[4]*i+s[8]*r+s[12])*o,this.y=(s[1]*t+s[5]*i+s[9]*r+s[13])*o,this.z=(s[2]*t+s[6]*i+s[10]*r+s[14])*o,this}applyQuaternion(e){const t=this.x,i=this.y,r=this.z,s=e.x,o=e.y,a=e.z,c=e.w,l=c*t+o*r-a*i,u=c*i+a*t-s*r,f=c*r+s*i-o*t,d=-s*t-o*i-a*r;return this.x=l*c+d*-s+u*-a-f*-o,this.y=u*c+d*-o+f*-s-l*-a,this.z=f*c+d*-a+l*-o-u*-s,this}project(e){return this.applyMatrix4(e.matrixWorldInverse).applyMatrix4(e.projectionMatrix)}unproject(e){return this.applyMatrix4(e.projectionMatrixInverse).applyMatrix4(e.matrixWorld)}transformDirection(e){const t=this.x,i=this.y,r=this.z,s=e.elements;return this.x=s[0]*t+s[4]*i+s[8]*r,this.y=s[1]*t+s[5]*i+s[9]*r,this.z=s[2]*t+s[6]*i+s[10]*r,this.normalize()}divide(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this}divideScalar(e){return this.multiplyScalar(1/e)}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this.z=Math.max(e.z,Math.min(t.z,this.z)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this.z=Math.max(e,Math.min(t,this.z)),this}clampLength(e,t){const i=this.length();return this.divideScalar(i||1).multiplyScalar(Math.max(e,Math.min(t,i)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this}lerpVectors(e,t,i){return this.x=e.x+(t.x-e.x)*i,this.y=e.y+(t.y-e.y)*i,this.z=e.z+(t.z-e.z)*i,this}cross(e){return this.crossVectors(this,e)}crossVectors(e,t){const i=e.x,r=e.y,s=e.z,o=t.x,a=t.y,c=t.z;return this.x=r*c-s*a,this.y=s*o-i*c,this.z=i*a-r*o,this}projectOnVector(e){const t=e.lengthSq();if(0===t)return this.set(0,0,0);const i=e.dot(this)/t;return this.copy(e).multiplyScalar(i)}projectOnPlane(e){return p6.copy(this).projectOnVector(e),this.sub(p6)}reflect(e){return this.sub(p6.copy(e).multiplyScalar(2*this.dot(e)))}angleTo(e){const t=Math.sqrt(this.lengthSq()*e.lengthSq());if(0===t)return Math.PI/2;const i=this.dot(e)/t;return Math.acos(rn(i,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const t=this.x-e.x,i=this.y-e.y,r=this.z-e.z;return t*t+i*i+r*r}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)+Math.abs(this.z-e.z)}setFromSpherical(e){return this.setFromSphericalCoords(e.radius,e.phi,e.theta)}setFromSphericalCoords(e,t,i){const r=Math.sin(t)*e;return this.x=r*Math.sin(i),this.y=Math.cos(t)*e,this.z=r*Math.cos(i),this}setFromCylindrical(e){return this.setFromCylindricalCoords(e.radius,e.theta,e.y)}setFromCylindricalCoords(e,t,i){return this.x=e*Math.sin(t),this.y=i,this.z=e*Math.cos(t),this}setFromMatrixPosition(e){const t=e.elements;return this.x=t[12],this.y=t[13],this.z=t[14],this}setFromMatrixScale(e){const t=this.setFromMatrixColumn(e,0).length(),i=this.setFromMatrixColumn(e,1).length(),r=this.setFromMatrixColumn(e,2).length();return this.x=t,this.y=i,this.z=r,this}setFromMatrixColumn(e,t){return this.fromArray(e.elements,4*t)}setFromMatrix3Column(e,t){return this.fromArray(e.elements,3*t)}setFromEuler(e){return this.x=e._x,this.y=e._y,this.z=e._z,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}randomDirection(){const e=2*(Math.random()-.5),t=Math.random()*Math.PI*2,i=Math.sqrt(1-e**2);return this.x=i*Math.cos(t),this.y=i*Math.sin(t),this.z=e,this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z}}const p6=new S,aw=new ti;class H1{constructor(e=new S(1/0,1/0,1/0),t=new S(-1/0,-1/0,-1/0)){this.isBox3=!0,this.min=e,this.max=t}set(e,t){return this.min.copy(e),this.max.copy(t),this}setFromArray(e){let t=1/0,i=1/0,r=1/0,s=-1/0,o=-1/0,a=-1/0;for(let c=0,l=e.length;c<l;c+=3){const u=e[c],f=e[c+1],d=e[c+2];u<t&&(t=u),f<i&&(i=f),d<r&&(r=d),u>s&&(s=u),f>o&&(o=f),d>a&&(a=d)}return this.min.set(t,i,r),this.max.set(s,o,a),this}setFromBufferAttribute(e){let t=1/0,i=1/0,r=1/0,s=-1/0,o=-1/0,a=-1/0;for(let c=0,l=e.count;c<l;c++){const u=e.getX(c),f=e.getY(c),d=e.getZ(c);u<t&&(t=u),f<i&&(i=f),d<r&&(r=d),u>s&&(s=u),f>o&&(o=f),d>a&&(a=d)}return this.min.set(t,i,r),this.max.set(s,o,a),this}setFromPoints(e){this.makeEmpty();for(let t=0,i=e.length;t<i;t++)this.expandByPoint(e[t]);return this}setFromCenterAndSize(e,t){const i=U1.copy(t).multiplyScalar(.5);return this.min.copy(e).sub(i),this.max.copy(e).add(i),this}setFromObject(e,t=!1){return this.makeEmpty(),this.expandByObject(e,t)}clone(){return(new this.constructor).copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z}getCenter(e){return this.isEmpty()?e.set(0,0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return this.isEmpty()?e.set(0,0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}expandByObject(e,t=!1){e.updateWorldMatrix(!1,!1);const i=e.geometry;if(void 0!==i)if(t&&null!=i.attributes&&void 0!==i.attributes.position){const s=i.attributes.position;for(let o=0,a=s.count;o<a;o++)U1.fromBufferAttribute(s,o).applyMatrix4(e.matrixWorld),this.expandByPoint(U1)}else null===i.boundingBox&&i.computeBoundingBox(),m6.copy(i.boundingBox),m6.applyMatrix4(e.matrixWorld),this.union(m6);const r=e.children;for(let s=0,o=r.length;s<o;s++)this.expandByObject(r[s],t);return this}containsPoint(e){return!(e.x<this.min.x||e.x>this.max.x||e.y<this.min.y||e.y>this.max.y||e.z<this.min.z||e.z>this.max.z)}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y&&this.min.z<=e.min.z&&e.max.z<=this.max.z}getParameter(e,t){return t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y),(e.z-this.min.z)/(this.max.z-this.min.z))}intersectsBox(e){return!(e.max.x<this.min.x||e.min.x>this.max.x||e.max.y<this.min.y||e.min.y>this.max.y||e.max.z<this.min.z||e.min.z>this.max.z)}intersectsSphere(e){return this.clampPoint(e.center,U1),U1.distanceToSquared(e.center)<=e.radius*e.radius}intersectsPlane(e){let t,i;return e.normal.x>0?(t=e.normal.x*this.min.x,i=e.normal.x*this.max.x):(t=e.normal.x*this.max.x,i=e.normal.x*this.min.x),e.normal.y>0?(t+=e.normal.y*this.min.y,i+=e.normal.y*this.max.y):(t+=e.normal.y*this.max.y,i+=e.normal.y*this.min.y),e.normal.z>0?(t+=e.normal.z*this.min.z,i+=e.normal.z*this.max.z):(t+=e.normal.z*this.max.z,i+=e.normal.z*this.min.z),t<=-e.constant&&i>=-e.constant}intersectsTriangle(e){if(this.isEmpty())return!1;this.getCenter(Bc),t4.subVectors(this.max,Bc),Sa.subVectors(e.a,Bc),Ea.subVectors(e.b,Bc),Da.subVectors(e.c,Bc),Vs.subVectors(Ea,Sa),Hs.subVectors(Da,Ea),B1.subVectors(Sa,Da);let t=[0,-Vs.z,Vs.y,0,-Hs.z,Hs.y,0,-B1.z,B1.y,Vs.z,0,-Vs.x,Hs.z,0,-Hs.x,B1.z,0,-B1.x,-Vs.y,Vs.x,0,-Hs.y,Hs.x,0,-B1.y,B1.x,0];return!(!g6(t,Sa,Ea,Da,t4)||(t=[1,0,0,0,1,0,0,0,1],!g6(t,Sa,Ea,Da,t4)))&&(n4.crossVectors(Vs,Hs),t=[n4.x,n4.y,n4.z],g6(t,Sa,Ea,Da,t4))}clampPoint(e,t){return t.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return U1.copy(e).clamp(this.min,this.max).sub(e).length()}getBoundingSphere(e){return this.getCenter(e.center),e.radius=.5*this.getSize(U1).length(),e}intersect(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}applyMatrix4(e){return this.isEmpty()||(cs[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(e),cs[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(e),cs[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(e),cs[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(e),cs[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(e),cs[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(e),cs[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(e),cs[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(e),this.setFromPoints(cs)),this}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}const cs=[new S,new S,new S,new S,new S,new S,new S,new S],U1=new S,m6=new H1,Sa=new S,Ea=new S,Da=new S,Vs=new S,Hs=new S,B1=new S,Bc=new S,t4=new S,n4=new S,G1=new S;function g6(n,e,t,i,r){for(let s=0,o=n.length-3;s<=o;s+=3){G1.fromArray(n,s);const a=r.x*Math.abs(G1.x)+r.y*Math.abs(G1.y)+r.z*Math.abs(G1.z),c=e.dot(G1),l=t.dot(G1),u=i.dot(G1);if(Math.max(-Math.max(c,l,u),Math.min(c,l,u))>a)return!1}return!0}const TJ=new H1,Gc=new S,v6=new S;class W1{constructor(e=new S,t=-1){this.center=e,this.radius=t}set(e,t){return this.center.copy(e),this.radius=t,this}setFromPoints(e,t){const i=this.center;void 0!==t?i.copy(t):TJ.setFromPoints(e).getCenter(i);let r=0;for(let s=0,o=e.length;s<o;s++)r=Math.max(r,i.distanceToSquared(e[s]));return this.radius=Math.sqrt(r),this}copy(e){return this.center.copy(e.center),this.radius=e.radius,this}isEmpty(){return this.radius<0}makeEmpty(){return this.center.set(0,0,0),this.radius=-1,this}containsPoint(e){return e.distanceToSquared(this.center)<=this.radius*this.radius}distanceToPoint(e){return e.distanceTo(this.center)-this.radius}intersectsSphere(e){const t=this.radius+e.radius;return e.center.distanceToSquared(this.center)<=t*t}intersectsBox(e){return e.intersectsSphere(this)}intersectsPlane(e){return Math.abs(e.distanceToPoint(this.center))<=this.radius}clampPoint(e,t){const i=this.center.distanceToSquared(e);return t.copy(e),i>this.radius*this.radius&&(t.sub(this.center).normalize(),t.multiplyScalar(this.radius).add(this.center)),t}getBoundingBox(e){return this.isEmpty()?(e.makeEmpty(),e):(e.set(this.center,this.center),e.expandByScalar(this.radius),e)}applyMatrix4(e){return this.center.applyMatrix4(e),this.radius=this.radius*e.getMaxScaleOnAxis(),this}translate(e){return this.center.add(e),this}expandByPoint(e){if(this.isEmpty())return this.center.copy(e),this.radius=0,this;Gc.subVectors(e,this.center);const t=Gc.lengthSq();if(t>this.radius*this.radius){const i=Math.sqrt(t),r=.5*(i-this.radius);this.center.addScaledVector(Gc,r/i),this.radius+=r}return this}union(e){return e.isEmpty()?this:this.isEmpty()?(this.copy(e),this):(!0===this.center.equals(e.center)?this.radius=Math.max(this.radius,e.radius):(v6.subVectors(e.center,this.center).setLength(e.radius),this.expandByPoint(Gc.copy(e.center).add(v6)),this.expandByPoint(Gc.copy(e.center).sub(v6))),this)}equals(e){return e.center.equals(this.center)&&e.radius===this.radius}clone(){return(new this.constructor).copy(this)}}const ls=new S,y6=new S,i4=new S,Us=new S,_6=new S,r4=new S,x6=new S;class s4{constructor(e=new S,t=new S(0,0,-1)){this.origin=e,this.direction=t}set(e,t){return this.origin.copy(e),this.direction.copy(t),this}copy(e){return this.origin.copy(e.origin),this.direction.copy(e.direction),this}at(e,t){return t.copy(this.direction).multiplyScalar(e).add(this.origin)}lookAt(e){return this.direction.copy(e).sub(this.origin).normalize(),this}recast(e){return this.origin.copy(this.at(e,ls)),this}closestPointToPoint(e,t){t.subVectors(e,this.origin);const i=t.dot(this.direction);return i<0?t.copy(this.origin):t.copy(this.direction).multiplyScalar(i).add(this.origin)}distanceToPoint(e){return Math.sqrt(this.distanceSqToPoint(e))}distanceSqToPoint(e){const t=ls.subVectors(e,this.origin).dot(this.direction);return t<0?this.origin.distanceToSquared(e):(ls.copy(this.direction).multiplyScalar(t).add(this.origin),ls.distanceToSquared(e))}distanceSqToSegment(e,t,i,r){y6.copy(e).add(t).multiplyScalar(.5),i4.copy(t).sub(e).normalize(),Us.copy(this.origin).sub(y6);const s=.5*e.distanceTo(t),o=-this.direction.dot(i4),a=Us.dot(this.direction),c=-Us.dot(i4),l=Us.lengthSq(),u=Math.abs(1-o*o);let f,d,h,p;if(u>0)if(f=o*c-a,d=o*a-c,p=s*u,f>=0)if(d>=-p)if(d<=p){const g=1/u;f*=g,d*=g,h=f*(f+o*d+2*a)+d*(o*f+d+2*c)+l}else d=s,f=Math.max(0,-(o*d+a)),h=-f*f+d*(d+2*c)+l;else d=-s,f=Math.max(0,-(o*d+a)),h=-f*f+d*(d+2*c)+l;else d<=-p?(f=Math.max(0,-(-o*s+a)),d=f>0?-s:Math.min(Math.max(-s,-c),s),h=-f*f+d*(d+2*c)+l):d<=p?(f=0,d=Math.min(Math.max(-s,-c),s),h=d*(d+2*c)+l):(f=Math.max(0,-(o*s+a)),d=f>0?s:Math.min(Math.max(-s,-c),s),h=-f*f+d*(d+2*c)+l);else d=o>0?-s:s,f=Math.max(0,-(o*d+a)),h=-f*f+d*(d+2*c)+l;return i&&i.copy(this.direction).multiplyScalar(f).add(this.origin),r&&r.copy(i4).multiplyScalar(d).add(y6),h}intersectSphere(e,t){ls.subVectors(e.center,this.origin);const i=ls.dot(this.direction),r=ls.dot(ls)-i*i,s=e.radius*e.radius;if(r>s)return null;const o=Math.sqrt(s-r),a=i-o,c=i+o;return a<0&&c<0?null:this.at(a<0?c:a,t)}intersectsSphere(e){return this.distanceSqToPoint(e.center)<=e.radius*e.radius}distanceToPlane(e){const t=e.normal.dot(this.direction);if(0===t)return 0===e.distanceToPoint(this.origin)?0:null;const i=-(this.origin.dot(e.normal)+e.constant)/t;return i>=0?i:null}intersectPlane(e,t){const i=this.distanceToPlane(e);return null===i?null:this.at(i,t)}intersectsPlane(e){const t=e.distanceToPoint(this.origin);return 0===t||e.normal.dot(this.direction)*t<0}intersectBox(e,t){let i,r,s,o,a,c;const l=1/this.direction.x,u=1/this.direction.y,f=1/this.direction.z,d=this.origin;return l>=0?(i=(e.min.x-d.x)*l,r=(e.max.x-d.x)*l):(i=(e.max.x-d.x)*l,r=(e.min.x-d.x)*l),u>=0?(s=(e.min.y-d.y)*u,o=(e.max.y-d.y)*u):(s=(e.max.y-d.y)*u,o=(e.min.y-d.y)*u),i>o||s>r||((s>i||isNaN(i))&&(i=s),(o<r||isNaN(r))&&(r=o),f>=0?(a=(e.min.z-d.z)*f,c=(e.max.z-d.z)*f):(a=(e.max.z-d.z)*f,c=(e.min.z-d.z)*f),i>c||a>r)||((a>i||i!=i)&&(i=a),(c<r||r!=r)&&(r=c),r<0)?null:this.at(i>=0?i:r,t)}intersectsBox(e){return null!==this.intersectBox(e,ls)}intersectTriangle(e,t,i,r,s){_6.subVectors(t,e),r4.subVectors(i,e),x6.crossVectors(_6,r4);let a,o=this.direction.dot(x6);if(o>0){if(r)return null;a=1}else{if(!(o<0))return null;a=-1,o=-o}Us.subVectors(this.origin,e);const c=a*this.direction.dot(r4.crossVectors(Us,r4));if(c<0)return null;const l=a*this.direction.dot(_6.cross(Us));if(l<0||c+l>o)return null;const u=-a*Us.dot(x6);return u<0?null:this.at(u/o,s)}applyMatrix4(e){return this.origin.applyMatrix4(e),this.direction.transformDirection(e),this}equals(e){return e.origin.equals(this.origin)&&e.direction.equals(this.direction)}clone(){return(new this.constructor).copy(this)}}class Xe{constructor(){Xe.prototype.isMatrix4=!0,this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]}set(e,t,i,r,s,o,a,c,l,u,f,d,h,p,g,m){const v=this.elements;return v[0]=e,v[4]=t,v[8]=i,v[12]=r,v[1]=s,v[5]=o,v[9]=a,v[13]=c,v[2]=l,v[6]=u,v[10]=f,v[14]=d,v[3]=h,v[7]=p,v[11]=g,v[15]=m,this}identity(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this}clone(){return(new Xe).fromArray(this.elements)}copy(e){const t=this.elements,i=e.elements;return t[0]=i[0],t[1]=i[1],t[2]=i[2],t[3]=i[3],t[4]=i[4],t[5]=i[5],t[6]=i[6],t[7]=i[7],t[8]=i[8],t[9]=i[9],t[10]=i[10],t[11]=i[11],t[12]=i[12],t[13]=i[13],t[14]=i[14],t[15]=i[15],this}copyPosition(e){const t=this.elements,i=e.elements;return t[12]=i[12],t[13]=i[13],t[14]=i[14],this}setFromMatrix3(e){const t=e.elements;return this.set(t[0],t[3],t[6],0,t[1],t[4],t[7],0,t[2],t[5],t[8],0,0,0,0,1),this}extractBasis(e,t,i){return e.setFromMatrixColumn(this,0),t.setFromMatrixColumn(this,1),i.setFromMatrixColumn(this,2),this}makeBasis(e,t,i){return this.set(e.x,t.x,i.x,0,e.y,t.y,i.y,0,e.z,t.z,i.z,0,0,0,0,1),this}extractRotation(e){const t=this.elements,i=e.elements,r=1/Aa.setFromMatrixColumn(e,0).length(),s=1/Aa.setFromMatrixColumn(e,1).length(),o=1/Aa.setFromMatrixColumn(e,2).length();return t[0]=i[0]*r,t[1]=i[1]*r,t[2]=i[2]*r,t[3]=0,t[4]=i[4]*s,t[5]=i[5]*s,t[6]=i[6]*s,t[7]=0,t[8]=i[8]*o,t[9]=i[9]*o,t[10]=i[10]*o,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromEuler(e){const t=this.elements,i=e.x,r=e.y,s=e.z,o=Math.cos(i),a=Math.sin(i),c=Math.cos(r),l=Math.sin(r),u=Math.cos(s),f=Math.sin(s);if("XYZ"===e.order){const d=o*u,h=o*f,p=a*u,g=a*f;t[0]=c*u,t[4]=-c*f,t[8]=l,t[1]=h+p*l,t[5]=d-g*l,t[9]=-a*c,t[2]=g-d*l,t[6]=p+h*l,t[10]=o*c}else if("YXZ"===e.order){const d=c*u,h=c*f,p=l*u,g=l*f;t[0]=d+g*a,t[4]=p*a-h,t[8]=o*l,t[1]=o*f,t[5]=o*u,t[9]=-a,t[2]=h*a-p,t[6]=g+d*a,t[10]=o*c}else if("ZXY"===e.order){const d=c*u,h=c*f,p=l*u,g=l*f;t[0]=d-g*a,t[4]=-o*f,t[8]=p+h*a,t[1]=h+p*a,t[5]=o*u,t[9]=g-d*a,t[2]=-o*l,t[6]=a,t[10]=o*c}else if("ZYX"===e.order){const d=o*u,h=o*f,p=a*u,g=a*f;t[0]=c*u,t[4]=p*l-h,t[8]=d*l+g,t[1]=c*f,t[5]=g*l+d,t[9]=h*l-p,t[2]=-l,t[6]=a*c,t[10]=o*c}else if("YZX"===e.order){const d=o*c,h=o*l,p=a*c,g=a*l;t[0]=c*u,t[4]=g-d*f,t[8]=p*f+h,t[1]=f,t[5]=o*u,t[9]=-a*u,t[2]=-l*u,t[6]=h*f+p,t[10]=d-g*f}else if("XZY"===e.order){const d=o*c,h=o*l,p=a*c,g=a*l;t[0]=c*u,t[4]=-f,t[8]=l*u,t[1]=d*f+g,t[5]=o*u,t[9]=h*f-p,t[2]=p*f-h,t[6]=a*u,t[10]=g*f+d}return t[3]=0,t[7]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromQuaternion(e){return this.compose(IJ,e,LJ)}lookAt(e,t,i){const r=this.elements;return Si.subVectors(e,t),0===Si.lengthSq()&&(Si.z=1),Si.normalize(),Bs.crossVectors(i,Si),0===Bs.lengthSq()&&(1===Math.abs(i.z)?Si.x+=1e-4:Si.z+=1e-4,Si.normalize(),Bs.crossVectors(i,Si)),Bs.normalize(),o4.crossVectors(Si,Bs),r[0]=Bs.x,r[4]=o4.x,r[8]=Si.x,r[1]=Bs.y,r[5]=o4.y,r[9]=Si.y,r[2]=Bs.z,r[6]=o4.z,r[10]=Si.z,this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){const i=e.elements,r=t.elements,s=this.elements,o=i[0],a=i[4],c=i[8],l=i[12],u=i[1],f=i[5],d=i[9],h=i[13],p=i[2],g=i[6],m=i[10],v=i[14],x=i[3],y=i[7],_=i[11],M=i[15],w=r[0],T=r[4],b=r[8],D=r[12],I=r[1],N=r[5],J=r[9],O=r[13],R=r[2],k=r[6],Y=r[10],ee=r[14],$=r[3],ie=r[7],Q=r[11],V=r[15];return s[0]=o*w+a*I+c*R+l*$,s[4]=o*T+a*N+c*k+l*ie,s[8]=o*b+a*J+c*Y+l*Q,s[12]=o*D+a*O+c*ee+l*V,s[1]=u*w+f*I+d*R+h*$,s[5]=u*T+f*N+d*k+h*ie,s[9]=u*b+f*J+d*Y+h*Q,s[13]=u*D+f*O+d*ee+h*V,s[2]=p*w+g*I+m*R+v*$,s[6]=p*T+g*N+m*k+v*ie,s[10]=p*b+g*J+m*Y+v*Q,s[14]=p*D+g*O+m*ee+v*V,s[3]=x*w+y*I+_*R+M*$,s[7]=x*T+y*N+_*k+M*ie,s[11]=x*b+y*J+_*Y+M*Q,s[15]=x*D+y*O+_*ee+M*V,this}multiplyScalar(e){const t=this.elements;return t[0]*=e,t[4]*=e,t[8]*=e,t[12]*=e,t[1]*=e,t[5]*=e,t[9]*=e,t[13]*=e,t[2]*=e,t[6]*=e,t[10]*=e,t[14]*=e,t[3]*=e,t[7]*=e,t[11]*=e,t[15]*=e,this}determinant(){const e=this.elements,t=e[0],i=e[4],r=e[8],s=e[12],o=e[1],a=e[5],c=e[9],l=e[13],u=e[2],f=e[6],d=e[10],h=e[14];return e[3]*(+s*c*f-r*l*f-s*a*d+i*l*d+r*a*h-i*c*h)+e[7]*(+t*c*h-t*l*d+s*o*d-r*o*h+r*l*u-s*c*u)+e[11]*(+t*l*f-t*a*h-s*o*f+i*o*h+s*a*u-i*l*u)+e[15]*(-r*a*u-t*c*f+t*a*d+r*o*f-i*o*d+i*c*u)}transpose(){const e=this.elements;let t;return t=e[1],e[1]=e[4],e[4]=t,t=e[2],e[2]=e[8],e[8]=t,t=e[6],e[6]=e[9],e[9]=t,t=e[3],e[3]=e[12],e[12]=t,t=e[7],e[7]=e[13],e[13]=t,t=e[11],e[11]=e[14],e[14]=t,this}setPosition(e,t,i){const r=this.elements;return e.isVector3?(r[12]=e.x,r[13]=e.y,r[14]=e.z):(r[12]=e,r[13]=t,r[14]=i),this}invert(){const e=this.elements,t=e[0],i=e[1],r=e[2],s=e[3],o=e[4],a=e[5],c=e[6],l=e[7],u=e[8],f=e[9],d=e[10],h=e[11],p=e[12],g=e[13],m=e[14],v=e[15],x=f*m*l-g*d*l+g*c*h-a*m*h-f*c*v+a*d*v,y=p*d*l-u*m*l-p*c*h+o*m*h+u*c*v-o*d*v,_=u*g*l-p*f*l+p*a*h-o*g*h-u*a*v+o*f*v,M=p*f*c-u*g*c-p*a*d+o*g*d+u*a*m-o*f*m,w=t*x+i*y+r*_+s*M;if(0===w)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);const T=1/w;return e[0]=x*T,e[1]=(g*d*s-f*m*s-g*r*h+i*m*h+f*r*v-i*d*v)*T,e[2]=(a*m*s-g*c*s+g*r*l-i*m*l-a*r*v+i*c*v)*T,e[3]=(f*c*s-a*d*s-f*r*l+i*d*l+a*r*h-i*c*h)*T,e[4]=y*T,e[5]=(u*m*s-p*d*s+p*r*h-t*m*h-u*r*v+t*d*v)*T,e[6]=(p*c*s-o*m*s-p*r*l+t*m*l+o*r*v-t*c*v)*T,e[7]=(o*d*s-u*c*s+u*r*l-t*d*l-o*r*h+t*c*h)*T,e[8]=_*T,e[9]=(p*f*s-u*g*s-p*i*h+t*g*h+u*i*v-t*f*v)*T,e[10]=(o*g*s-p*a*s+p*i*l-t*g*l-o*i*v+t*a*v)*T,e[11]=(u*a*s-o*f*s-u*i*l+t*f*l+o*i*h-t*a*h)*T,e[12]=M*T,e[13]=(u*g*r-p*f*r+p*i*d-t*g*d-u*i*m+t*f*m)*T,e[14]=(p*a*r-o*g*r-p*i*c+t*g*c+o*i*m-t*a*m)*T,e[15]=(o*f*r-u*a*r+u*i*c-t*f*c-o*i*d+t*a*d)*T,this}scale(e){const t=this.elements,i=e.x,r=e.y,s=e.z;return t[0]*=i,t[4]*=r,t[8]*=s,t[1]*=i,t[5]*=r,t[9]*=s,t[2]*=i,t[6]*=r,t[10]*=s,t[3]*=i,t[7]*=r,t[11]*=s,this}getMaxScaleOnAxis(){const e=this.elements;return Math.sqrt(Math.max(e[0]*e[0]+e[1]*e[1]+e[2]*e[2],e[4]*e[4]+e[5]*e[5]+e[6]*e[6],e[8]*e[8]+e[9]*e[9]+e[10]*e[10]))}makeTranslation(e,t,i){return this.set(1,0,0,e,0,1,0,t,0,0,1,i,0,0,0,1),this}makeRotationX(e){const t=Math.cos(e),i=Math.sin(e);return this.set(1,0,0,0,0,t,-i,0,0,i,t,0,0,0,0,1),this}makeRotationY(e){const t=Math.cos(e),i=Math.sin(e);return this.set(t,0,i,0,0,1,0,0,-i,0,t,0,0,0,0,1),this}makeRotationZ(e){const t=Math.cos(e),i=Math.sin(e);return this.set(t,-i,0,0,i,t,0,0,0,0,1,0,0,0,0,1),this}makeRotationAxis(e,t){const i=Math.cos(t),r=Math.sin(t),s=1-i,o=e.x,a=e.y,c=e.z,l=s*o,u=s*a;return this.set(l*o+i,l*a-r*c,l*c+r*a,0,l*a+r*c,u*a+i,u*c-r*o,0,l*c-r*a,u*c+r*o,s*c*c+i,0,0,0,0,1),this}makeScale(e,t,i){return this.set(e,0,0,0,0,t,0,0,0,0,i,0,0,0,0,1),this}makeShear(e,t,i,r,s,o){return this.set(1,i,s,0,e,1,o,0,t,r,1,0,0,0,0,1),this}compose(e,t,i){const r=this.elements,s=t._x,o=t._y,a=t._z,c=t._w,l=s+s,u=o+o,f=a+a,d=s*l,h=s*u,p=s*f,g=o*u,m=o*f,v=a*f,x=c*l,y=c*u,_=c*f,M=i.x,w=i.y,T=i.z;return r[0]=(1-(g+v))*M,r[1]=(h+_)*M,r[2]=(p-y)*M,r[3]=0,r[4]=(h-_)*w,r[5]=(1-(d+v))*w,r[6]=(m+x)*w,r[7]=0,r[8]=(p+y)*T,r[9]=(m-x)*T,r[10]=(1-(d+g))*T,r[11]=0,r[12]=e.x,r[13]=e.y,r[14]=e.z,r[15]=1,this}decompose(e,t,i){const r=this.elements;let s=Aa.set(r[0],r[1],r[2]).length();const o=Aa.set(r[4],r[5],r[6]).length(),a=Aa.set(r[8],r[9],r[10]).length();this.determinant()<0&&(s=-s),e.x=r[12],e.y=r[13],e.z=r[14],fr.copy(this);const l=1/s,u=1/o,f=1/a;return fr.elements[0]*=l,fr.elements[1]*=l,fr.elements[2]*=l,fr.elements[4]*=u,fr.elements[5]*=u,fr.elements[6]*=u,fr.elements[8]*=f,fr.elements[9]*=f,fr.elements[10]*=f,t.setFromRotationMatrix(fr),i.x=s,i.y=o,i.z=a,this}makePerspective(e,t,i,r,s,o){const a=this.elements,l=2*s/(i-r),u=(t+e)/(t-e),f=(i+r)/(i-r),d=-(o+s)/(o-s),h=-2*o*s/(o-s);return a[0]=2*s/(t-e),a[4]=0,a[8]=u,a[12]=0,a[1]=0,a[5]=l,a[9]=f,a[13]=0,a[2]=0,a[6]=0,a[10]=d,a[14]=h,a[3]=0,a[7]=0,a[11]=-1,a[15]=0,this}makeOrthographic(e,t,i,r,s,o){const a=this.elements,c=1/(t-e),l=1/(i-r),u=1/(o-s),f=(t+e)*c,d=(i+r)*l,h=(o+s)*u;return a[0]=2*c,a[4]=0,a[8]=0,a[12]=-f,a[1]=0,a[5]=2*l,a[9]=0,a[13]=-d,a[2]=0,a[6]=0,a[10]=-2*u,a[14]=-h,a[3]=0,a[7]=0,a[11]=0,a[15]=1,this}equals(e){const t=this.elements,i=e.elements;for(let r=0;r<16;r++)if(t[r]!==i[r])return!1;return!0}fromArray(e,t=0){for(let i=0;i<16;i++)this.elements[i]=e[i+t];return this}toArray(e=[],t=0){const i=this.elements;return e[t]=i[0],e[t+1]=i[1],e[t+2]=i[2],e[t+3]=i[3],e[t+4]=i[4],e[t+5]=i[5],e[t+6]=i[6],e[t+7]=i[7],e[t+8]=i[8],e[t+9]=i[9],e[t+10]=i[10],e[t+11]=i[11],e[t+12]=i[12],e[t+13]=i[13],e[t+14]=i[14],e[t+15]=i[15],e}}const Aa=new S,fr=new Xe,IJ=new S(0,0,0),LJ=new S(1,1,1),Bs=new S,o4=new S,Si=new S,cw=new Xe,lw=new ti;let RJ=(()=>{class n{constructor(t=0,i=0,r=0,s=n.DefaultOrder){this.isEuler=!0,this._x=t,this._y=i,this._z=r,this._order=s}get x(){return this._x}set x(t){this._x=t,this._onChangeCallback()}get y(){return this._y}set y(t){this._y=t,this._onChangeCallback()}get z(){return this._z}set z(t){this._z=t,this._onChangeCallback()}get order(){return this._order}set order(t){this._order=t,this._onChangeCallback()}set(t,i,r,s=this._order){return this._x=t,this._y=i,this._z=r,this._order=s,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._order)}copy(t){return this._x=t._x,this._y=t._y,this._z=t._z,this._order=t._order,this._onChangeCallback(),this}setFromRotationMatrix(t,i=this._order,r=!0){const s=t.elements,o=s[0],a=s[4],c=s[8],l=s[1],u=s[5],f=s[9],d=s[2],h=s[6],p=s[10];switch(i){case"XYZ":this._y=Math.asin(rn(c,-1,1)),Math.abs(c)<.9999999?(this._x=Math.atan2(-f,p),this._z=Math.atan2(-a,o)):(this._x=Math.atan2(h,u),this._z=0);break;case"YXZ":this._x=Math.asin(-rn(f,-1,1)),Math.abs(f)<.9999999?(this._y=Math.atan2(c,p),this._z=Math.atan2(l,u)):(this._y=Math.atan2(-d,o),this._z=0);break;case"ZXY":this._x=Math.asin(rn(h,-1,1)),Math.abs(h)<.9999999?(this._y=Math.atan2(-d,p),this._z=Math.atan2(-a,u)):(this._y=0,this._z=Math.atan2(l,o));break;case"ZYX":this._y=Math.asin(-rn(d,-1,1)),Math.abs(d)<.9999999?(this._x=Math.atan2(h,p),this._z=Math.atan2(l,o)):(this._x=0,this._z=Math.atan2(-a,u));break;case"YZX":this._z=Math.asin(rn(l,-1,1)),Math.abs(l)<.9999999?(this._x=Math.atan2(-f,u),this._y=Math.atan2(-d,o)):(this._x=0,this._y=Math.atan2(c,p));break;case"XZY":this._z=Math.asin(-rn(a,-1,1)),Math.abs(a)<.9999999?(this._x=Math.atan2(h,u),this._y=Math.atan2(c,o)):(this._x=Math.atan2(-f,p),this._y=0);break;default:console.warn("THREE.Euler: .setFromRotationMatrix() encountered an unknown order: "+i)}return this._order=i,!0===r&&this._onChangeCallback(),this}setFromQuaternion(t,i,r){return cw.makeRotationFromQuaternion(t),this.setFromRotationMatrix(cw,i,r)}setFromVector3(t,i=this._order){return this.set(t.x,t.y,t.z,i)}reorder(t){return lw.setFromEuler(this),this.setFromQuaternion(lw,t)}equals(t){return t._x===this._x&&t._y===this._y&&t._z===this._z&&t._order===this._order}fromArray(t){return this._x=t[0],this._y=t[1],this._z=t[2],void 0!==t[3]&&(this._order=t[3]),this._onChangeCallback(),this}toArray(t=[],i=0){return t[i]=this._x,t[i+1]=this._y,t[i+2]=this._z,t[i+3]=this._order,t}_onChange(t){return this._onChangeCallback=t,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._order}toVector3(){console.error("THREE.Euler: .toVector3() has been removed. Use Vector3.setFromEuler() instead")}}return n.DefaultOrder="XYZ",n.RotationOrders=["XYZ","YZX","ZXY","XZY","YXZ","ZYX"],n})();class b6{constructor(){this.mask=1}set(e){this.mask=(1<<e|0)>>>0}enable(e){this.mask|=1<<e|0}enableAll(){this.mask=-1}toggle(e){this.mask^=1<<e|0}disable(e){this.mask&=~(1<<e|0)}disableAll(){this.mask=0}test(e){return 0!=(this.mask&e.mask)}isEnabled(e){return 0!=(this.mask&(1<<e|0))}}let zJ=0;const uw=new S,Ta=new ti,us=new Xe,a4=new S,Wc=new S,PJ=new S,NJ=new ti,fw=new S(1,0,0),dw=new S(0,1,0),hw=new S(0,0,1),OJ={type:"added"},pw={type:"removed"};let Sn=(()=>{class n extends O1{constructor(){super(),this.isObject3D=!0,Object.defineProperty(this,"id",{value:zJ++}),this.uuid=Ci(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=n.DefaultUp.clone();const t=new S,i=new RJ,r=new ti,s=new S(1,1,1);i._onChange(function o(){r.setFromEuler(i,!1)}),r._onChange(function a(){i.setFromQuaternion(r,void 0,!1)}),Object.defineProperties(this,{position:{configurable:!0,enumerable:!0,value:t},rotation:{configurable:!0,enumerable:!0,value:i},quaternion:{configurable:!0,enumerable:!0,value:r},scale:{configurable:!0,enumerable:!0,value:s},modelViewMatrix:{value:new Xe},normalMatrix:{value:new fi}}),this.matrix=new Xe,this.matrixWorld=new Xe,this.matrixAutoUpdate=n.DefaultMatrixAutoUpdate,this.matrixWorldNeedsUpdate=!1,this.matrixWorldAutoUpdate=n.DefaultMatrixWorldAutoUpdate,this.layers=new b6,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.animations=[],this.userData={}}onBeforeRender(){}onAfterRender(){}applyMatrix4(t){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(t),this.matrix.decompose(this.position,this.quaternion,this.scale)}applyQuaternion(t){return this.quaternion.premultiply(t),this}setRotationFromAxisAngle(t,i){this.quaternion.setFromAxisAngle(t,i)}setRotationFromEuler(t){this.quaternion.setFromEuler(t,!0)}setRotationFromMatrix(t){this.quaternion.setFromRotationMatrix(t)}setRotationFromQuaternion(t){this.quaternion.copy(t)}rotateOnAxis(t,i){return Ta.setFromAxisAngle(t,i),this.quaternion.multiply(Ta),this}rotateOnWorldAxis(t,i){return Ta.setFromAxisAngle(t,i),this.quaternion.premultiply(Ta),this}rotateX(t){return this.rotateOnAxis(fw,t)}rotateY(t){return this.rotateOnAxis(dw,t)}rotateZ(t){return this.rotateOnAxis(hw,t)}translateOnAxis(t,i){return uw.copy(t).applyQuaternion(this.quaternion),this.position.add(uw.multiplyScalar(i)),this}translateX(t){return this.translateOnAxis(fw,t)}translateY(t){return this.translateOnAxis(dw,t)}translateZ(t){return this.translateOnAxis(hw,t)}localToWorld(t){return t.applyMatrix4(this.matrixWorld)}worldToLocal(t){return t.applyMatrix4(us.copy(this.matrixWorld).invert())}lookAt(t,i,r){t.isVector3?a4.copy(t):a4.set(t,i,r);const s=this.parent;this.updateWorldMatrix(!0,!1),Wc.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?us.lookAt(Wc,a4,this.up):us.lookAt(a4,Wc,this.up),this.quaternion.setFromRotationMatrix(us),s&&(us.extractRotation(s.matrixWorld),Ta.setFromRotationMatrix(us),this.quaternion.premultiply(Ta.invert()))}add(t){if(arguments.length>1){for(let i=0;i<arguments.length;i++)this.add(arguments[i]);return this}return t===this?(console.error("THREE.Object3D.add: object can't be added as a child of itself.",t),this):(t&&t.isObject3D?(null!==t.parent&&t.parent.remove(t),t.parent=this,this.children.push(t),t.dispatchEvent(OJ)):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",t),this)}remove(t){if(arguments.length>1){for(let r=0;r<arguments.length;r++)this.remove(arguments[r]);return this}const i=this.children.indexOf(t);return-1!==i&&(t.parent=null,this.children.splice(i,1),t.dispatchEvent(pw)),this}removeFromParent(){const t=this.parent;return null!==t&&t.remove(this),this}clear(){for(let t=0;t<this.children.length;t++){const i=this.children[t];i.parent=null,i.dispatchEvent(pw)}return this.children.length=0,this}attach(t){return this.updateWorldMatrix(!0,!1),us.copy(this.matrixWorld).invert(),null!==t.parent&&(t.parent.updateWorldMatrix(!0,!1),us.multiply(t.parent.matrixWorld)),t.applyMatrix4(us),this.add(t),t.updateWorldMatrix(!1,!0),this}getObjectById(t){return this.getObjectByProperty("id",t)}getObjectByName(t){return this.getObjectByProperty("name",t)}getObjectByProperty(t,i){if(this[t]===i)return this;for(let r=0,s=this.children.length;r<s;r++){const a=this.children[r].getObjectByProperty(t,i);if(void 0!==a)return a}}getWorldPosition(t){return this.updateWorldMatrix(!0,!1),t.setFromMatrixPosition(this.matrixWorld)}getWorldQuaternion(t){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(Wc,t,PJ),t}getWorldScale(t){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(Wc,NJ,t),t}getWorldDirection(t){this.updateWorldMatrix(!0,!1);const i=this.matrixWorld.elements;return t.set(i[8],i[9],i[10]).normalize()}raycast(){}traverse(t){t(this);const i=this.children;for(let r=0,s=i.length;r<s;r++)i[r].traverse(t)}traverseVisible(t){if(!1===this.visible)return;t(this);const i=this.children;for(let r=0,s=i.length;r<s;r++)i[r].traverseVisible(t)}traverseAncestors(t){const i=this.parent;null!==i&&(t(i),i.traverseAncestors(t))}updateMatrix(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0}updateMatrixWorld(t){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||t)&&(null===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),this.matrixWorldNeedsUpdate=!1,t=!0);const i=this.children;for(let r=0,s=i.length;r<s;r++){const o=i[r];(!0===o.matrixWorldAutoUpdate||!0===t)&&o.updateMatrixWorld(t)}}updateWorldMatrix(t,i){const r=this.parent;if(!0===t&&null!==r&&!0===r.matrixWorldAutoUpdate&&r.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),null===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),!0===i){const s=this.children;for(let o=0,a=s.length;o<a;o++){const c=s[o];!0===c.matrixWorldAutoUpdate&&c.updateWorldMatrix(!1,!0)}}}toJSON(t){const i=void 0===t||"string"==typeof t,r={};i&&(t={geometries:{},materials:{},textures:{},images:{},shapes:{},skeletons:{},animations:{},nodes:{}},r.metadata={version:4.5,type:"Object",generator:"Object3D.toJSON"});const s={};function o(c,l){return void 0===c[l.uuid]&&(c[l.uuid]=l.toJSON(t)),l.uuid}if(s.uuid=this.uuid,s.type=this.type,""!==this.name&&(s.name=this.name),!0===this.castShadow&&(s.castShadow=!0),!0===this.receiveShadow&&(s.receiveShadow=!0),!1===this.visible&&(s.visible=!1),!1===this.frustumCulled&&(s.frustumCulled=!1),0!==this.renderOrder&&(s.renderOrder=this.renderOrder),"{}"!==JSON.stringify(this.userData)&&(s.userData=this.userData),s.layers=this.layers.mask,s.matrix=this.matrix.toArray(),!1===this.matrixAutoUpdate&&(s.matrixAutoUpdate=!1),this.isInstancedMesh&&(s.type="InstancedMesh",s.count=this.count,s.instanceMatrix=this.instanceMatrix.toJSON(),null!==this.instanceColor&&(s.instanceColor=this.instanceColor.toJSON())),this.isScene)this.background&&(this.background.isColor?s.background=this.background.toJSON():this.background.isTexture&&(s.background=this.background.toJSON(t).uuid)),this.environment&&this.environment.isTexture&&!0!==this.environment.isRenderTargetTexture&&(s.environment=this.environment.toJSON(t).uuid);else if(this.isMesh||this.isLine||this.isPoints){s.geometry=o(t.geometries,this.geometry);const c=this.geometry.parameters;if(void 0!==c&&void 0!==c.shapes){const l=c.shapes;if(Array.isArray(l))for(let u=0,f=l.length;u<f;u++)o(t.shapes,l[u]);else o(t.shapes,l)}}if(this.isSkinnedMesh&&(s.bindMode=this.bindMode,s.bindMatrix=this.bindMatrix.toArray(),void 0!==this.skeleton&&(o(t.skeletons,this.skeleton),s.skeleton=this.skeleton.uuid)),void 0!==this.material)if(Array.isArray(this.material)){const c=[];for(let l=0,u=this.material.length;l<u;l++)c.push(o(t.materials,this.material[l]));s.material=c}else s.material=o(t.materials,this.material);if(this.children.length>0){s.children=[];for(let c=0;c<this.children.length;c++)s.children.push(this.children[c].toJSON(t).object)}if(this.animations.length>0){s.animations=[];for(let c=0;c<this.animations.length;c++)s.animations.push(o(t.animations,this.animations[c]))}if(i){const c=a(t.geometries),l=a(t.materials),u=a(t.textures),f=a(t.images),d=a(t.shapes),h=a(t.skeletons),p=a(t.animations),g=a(t.nodes);c.length>0&&(r.geometries=c),l.length>0&&(r.materials=l),u.length>0&&(r.textures=u),f.length>0&&(r.images=f),d.length>0&&(r.shapes=d),h.length>0&&(r.skeletons=h),p.length>0&&(r.animations=p),g.length>0&&(r.nodes=g)}return r.object=s,r;function a(c){const l=[];for(const u in c){const f=c[u];delete f.metadata,l.push(f)}return l}}clone(t){return(new this.constructor).copy(this,t)}copy(t,i=!0){if(this.name=t.name,this.up.copy(t.up),this.position.copy(t.position),this.rotation.order=t.rotation.order,this.quaternion.copy(t.quaternion),this.scale.copy(t.scale),this.matrix.copy(t.matrix),this.matrixWorld.copy(t.matrixWorld),this.matrixAutoUpdate=t.matrixAutoUpdate,this.matrixWorldNeedsUpdate=t.matrixWorldNeedsUpdate,this.matrixWorldAutoUpdate=t.matrixWorldAutoUpdate,this.layers.mask=t.layers.mask,this.visible=t.visible,this.castShadow=t.castShadow,this.receiveShadow=t.receiveShadow,this.frustumCulled=t.frustumCulled,this.renderOrder=t.renderOrder,this.userData=JSON.parse(JSON.stringify(t.userData)),!0===i)for(let r=0;r<t.children.length;r++)this.add(t.children[r].clone());return this}}return n.DefaultUp=new S(0,1,0),n.DefaultMatrixAutoUpdate=!0,n.DefaultMatrixWorldAutoUpdate=!0,n})();const dr=new S,fs=new S,M6=new S,ds=new S,Ia=new S,La=new S,mw=new S,w6=new S,C6=new S,S6=new S;class hr{constructor(e=new S,t=new S,i=new S){this.a=e,this.b=t,this.c=i}static getNormal(e,t,i,r){r.subVectors(i,t),dr.subVectors(e,t),r.cross(dr);const s=r.lengthSq();return s>0?r.multiplyScalar(1/Math.sqrt(s)):r.set(0,0,0)}static getBarycoord(e,t,i,r,s){dr.subVectors(r,t),fs.subVectors(i,t),M6.subVectors(e,t);const o=dr.dot(dr),a=dr.dot(fs),c=dr.dot(M6),l=fs.dot(fs),u=fs.dot(M6),f=o*l-a*a;if(0===f)return s.set(-2,-1,-1);const d=1/f,h=(l*c-a*u)*d,p=(o*u-a*c)*d;return s.set(1-h-p,p,h)}static containsPoint(e,t,i,r){return this.getBarycoord(e,t,i,r,ds),ds.x>=0&&ds.y>=0&&ds.x+ds.y<=1}static getUV(e,t,i,r,s,o,a,c){return this.getBarycoord(e,t,i,r,ds),c.set(0,0),c.addScaledVector(s,ds.x),c.addScaledVector(o,ds.y),c.addScaledVector(a,ds.z),c}static isFrontFacing(e,t,i,r){return dr.subVectors(i,t),fs.subVectors(e,t),dr.cross(fs).dot(r)<0}set(e,t,i){return this.a.copy(e),this.b.copy(t),this.c.copy(i),this}setFromPointsAndIndices(e,t,i,r){return this.a.copy(e[t]),this.b.copy(e[i]),this.c.copy(e[r]),this}setFromAttributeAndIndices(e,t,i,r){return this.a.fromBufferAttribute(e,t),this.b.fromBufferAttribute(e,i),this.c.fromBufferAttribute(e,r),this}clone(){return(new this.constructor).copy(this)}copy(e){return this.a.copy(e.a),this.b.copy(e.b),this.c.copy(e.c),this}getArea(){return dr.subVectors(this.c,this.b),fs.subVectors(this.a,this.b),.5*dr.cross(fs).length()}getMidpoint(e){return e.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)}getNormal(e){return hr.getNormal(this.a,this.b,this.c,e)}getPlane(e){return e.setFromCoplanarPoints(this.a,this.b,this.c)}getBarycoord(e,t){return hr.getBarycoord(e,this.a,this.b,this.c,t)}getUV(e,t,i,r,s){return hr.getUV(e,this.a,this.b,this.c,t,i,r,s)}containsPoint(e){return hr.containsPoint(e,this.a,this.b,this.c)}isFrontFacing(e){return hr.isFrontFacing(this.a,this.b,this.c,e)}intersectsBox(e){return e.intersectsTriangle(this)}closestPointToPoint(e,t){const i=this.a,r=this.b,s=this.c;let o,a;Ia.subVectors(r,i),La.subVectors(s,i),w6.subVectors(e,i);const c=Ia.dot(w6),l=La.dot(w6);if(c<=0&&l<=0)return t.copy(i);C6.subVectors(e,r);const u=Ia.dot(C6),f=La.dot(C6);if(u>=0&&f<=u)return t.copy(r);const d=c*f-u*l;if(d<=0&&c>=0&&u<=0)return o=c/(c-u),t.copy(i).addScaledVector(Ia,o);S6.subVectors(e,s);const h=Ia.dot(S6),p=La.dot(S6);if(p>=0&&h<=p)return t.copy(s);const g=h*l-c*p;if(g<=0&&l>=0&&p<=0)return a=l/(l-p),t.copy(i).addScaledVector(La,a);const m=u*p-h*f;if(m<=0&&f-u>=0&&h-p>=0)return mw.subVectors(s,r),a=(f-u)/(f-u+(h-p)),t.copy(r).addScaledVector(mw,a);const v=1/(m+g+d);return o=g*v,a=d*v,t.copy(i).addScaledVector(Ia,o).addScaledVector(La,a)}equals(e){return e.a.equals(this.a)&&e.b.equals(this.b)&&e.c.equals(this.c)}}let FJ=0;class pr extends O1{constructor(){super(),this.isMaterial=!0,Object.defineProperty(this,"id",{value:FJ++}),this.uuid=Ci(),this.name="",this.type="Material",this.blending=1,this.side=0,this.vertexColors=!1,this.opacity=1,this.transparent=!1,this.blendSrc=204,this.blendDst=205,this.blendEquation=100,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.depthFunc=3,this.depthTest=!0,this.depthWrite=!0,this.stencilWriteMask=255,this.stencilFunc=519,this.stencilRef=0,this.stencilFuncMask=255,this.stencilFail=7680,this.stencilZFail=7680,this.stencilZPass=7680,this.stencilWrite=!1,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.shadowSide=null,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.dithering=!1,this.alphaToCoverage=!1,this.premultipliedAlpha=!1,this.visible=!0,this.toneMapped=!0,this.userData={},this.version=0,this._alphaTest=0}get alphaTest(){return this._alphaTest}set alphaTest(e){this._alphaTest>0!=e>0&&this.version++,this._alphaTest=e}onBuild(){}onBeforeRender(){}onBeforeCompile(){}customProgramCacheKey(){return this.onBeforeCompile.toString()}setValues(e){if(void 0!==e)for(const t in e){const i=e[t];if(void 0===i){console.warn("THREE.Material: '"+t+"' parameter is undefined.");continue}const r=this[t];void 0!==r?r&&r.isColor?r.set(i):r&&r.isVector3&&i&&i.isVector3?r.copy(i):this[t]=i:console.warn("THREE."+this.type+": '"+t+"' is not a property of this material.")}}toJSON(e){const t=void 0===e||"string"==typeof e;t&&(e={textures:{},images:{}});const i={metadata:{version:4.5,type:"Material",generator:"Material.toJSON"}};function r(s){const o=[];for(const a in s){const c=s[a];delete c.metadata,o.push(c)}return o}if(i.uuid=this.uuid,i.type=this.type,""!==this.name&&(i.name=this.name),this.color&&this.color.isColor&&(i.color=this.color.getHex()),void 0!==this.roughness&&(i.roughness=this.roughness),void 0!==this.metalness&&(i.metalness=this.metalness),void 0!==this.sheen&&(i.sheen=this.sheen),this.sheenColor&&this.sheenColor.isColor&&(i.sheenColor=this.sheenColor.getHex()),void 0!==this.sheenRoughness&&(i.sheenRoughness=this.sheenRoughness),this.emissive&&this.emissive.isColor&&(i.emissive=this.emissive.getHex()),this.emissiveIntensity&&1!==this.emissiveIntensity&&(i.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(i.specular=this.specular.getHex()),void 0!==this.specularIntensity&&(i.specularIntensity=this.specularIntensity),this.specularColor&&this.specularColor.isColor&&(i.specularColor=this.specularColor.getHex()),void 0!==this.shininess&&(i.shininess=this.shininess),void 0!==this.clearcoat&&(i.clearcoat=this.clearcoat),void 0!==this.clearcoatRoughness&&(i.clearcoatRoughness=this.clearcoatRoughness),this.clearcoatMap&&this.clearcoatMap.isTexture&&(i.clearcoatMap=this.clearcoatMap.toJSON(e).uuid),this.clearcoatRoughnessMap&&this.clearcoatRoughnessMap.isTexture&&(i.clearcoatRoughnessMap=this.clearcoatRoughnessMap.toJSON(e).uuid),this.clearcoatNormalMap&&this.clearcoatNormalMap.isTexture&&(i.clearcoatNormalMap=this.clearcoatNormalMap.toJSON(e).uuid,i.clearcoatNormalScale=this.clearcoatNormalScale.toArray()),void 0!==this.iridescence&&(i.iridescence=this.iridescence),void 0!==this.iridescenceIOR&&(i.iridescenceIOR=this.iridescenceIOR),void 0!==this.iridescenceThicknessRange&&(i.iridescenceThicknessRange=this.iridescenceThicknessRange),this.iridescenceMap&&this.iridescenceMap.isTexture&&(i.iridescenceMap=this.iridescenceMap.toJSON(e).uuid),this.iridescenceThicknessMap&&this.iridescenceThicknessMap.isTexture&&(i.iridescenceThicknessMap=this.iridescenceThicknessMap.toJSON(e).uuid),this.map&&this.map.isTexture&&(i.map=this.map.toJSON(e).uuid),this.matcap&&this.matcap.isTexture&&(i.matcap=this.matcap.toJSON(e).uuid),this.alphaMap&&this.alphaMap.isTexture&&(i.alphaMap=this.alphaMap.toJSON(e).uuid),this.lightMap&&this.lightMap.isTexture&&(i.lightMap=this.lightMap.toJSON(e).uuid,i.lightMapIntensity=this.lightMapIntensity),this.aoMap&&this.aoMap.isTexture&&(i.aoMap=this.aoMap.toJSON(e).uuid,i.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(i.bumpMap=this.bumpMap.toJSON(e).uuid,i.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(i.normalMap=this.normalMap.toJSON(e).uuid,i.normalMapType=this.normalMapType,i.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(i.displacementMap=this.displacementMap.toJSON(e).uuid,i.displacementScale=this.displacementScale,i.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(i.roughnessMap=this.roughnessMap.toJSON(e).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(i.metalnessMap=this.metalnessMap.toJSON(e).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(i.emissiveMap=this.emissiveMap.toJSON(e).uuid),this.specularMap&&this.specularMap.isTexture&&(i.specularMap=this.specularMap.toJSON(e).uuid),this.specularIntensityMap&&this.specularIntensityMap.isTexture&&(i.specularIntensityMap=this.specularIntensityMap.toJSON(e).uuid),this.specularColorMap&&this.specularColorMap.isTexture&&(i.specularColorMap=this.specularColorMap.toJSON(e).uuid),this.envMap&&this.envMap.isTexture&&(i.envMap=this.envMap.toJSON(e).uuid,void 0!==this.combine&&(i.combine=this.combine)),void 0!==this.envMapIntensity&&(i.envMapIntensity=this.envMapIntensity),void 0!==this.reflectivity&&(i.reflectivity=this.reflectivity),void 0!==this.refractionRatio&&(i.refractionRatio=this.refractionRatio),this.gradientMap&&this.gradientMap.isTexture&&(i.gradientMap=this.gradientMap.toJSON(e).uuid),void 0!==this.transmission&&(i.transmission=this.transmission),this.transmissionMap&&this.transmissionMap.isTexture&&(i.transmissionMap=this.transmissionMap.toJSON(e).uuid),void 0!==this.thickness&&(i.thickness=this.thickness),this.thicknessMap&&this.thicknessMap.isTexture&&(i.thicknessMap=this.thicknessMap.toJSON(e).uuid),void 0!==this.attenuationDistance&&this.attenuationDistance!==1/0&&(i.attenuationDistance=this.attenuationDistance),void 0!==this.attenuationColor&&(i.attenuationColor=this.attenuationColor.getHex()),void 0!==this.size&&(i.size=this.size),null!==this.shadowSide&&(i.shadowSide=this.shadowSide),void 0!==this.sizeAttenuation&&(i.sizeAttenuation=this.sizeAttenuation),1!==this.blending&&(i.blending=this.blending),0!==this.side&&(i.side=this.side),this.vertexColors&&(i.vertexColors=!0),this.opacity<1&&(i.opacity=this.opacity),!0===this.transparent&&(i.transparent=this.transparent),i.depthFunc=this.depthFunc,i.depthTest=this.depthTest,i.depthWrite=this.depthWrite,i.colorWrite=this.colorWrite,i.stencilWrite=this.stencilWrite,i.stencilWriteMask=this.stencilWriteMask,i.stencilFunc=this.stencilFunc,i.stencilRef=this.stencilRef,i.stencilFuncMask=this.stencilFuncMask,i.stencilFail=this.stencilFail,i.stencilZFail=this.stencilZFail,i.stencilZPass=this.stencilZPass,void 0!==this.rotation&&0!==this.rotation&&(i.rotation=this.rotation),!0===this.polygonOffset&&(i.polygonOffset=!0),0!==this.polygonOffsetFactor&&(i.polygonOffsetFactor=this.polygonOffsetFactor),0!==this.polygonOffsetUnits&&(i.polygonOffsetUnits=this.polygonOffsetUnits),void 0!==this.linewidth&&1!==this.linewidth&&(i.linewidth=this.linewidth),void 0!==this.dashSize&&(i.dashSize=this.dashSize),void 0!==this.gapSize&&(i.gapSize=this.gapSize),void 0!==this.scale&&(i.scale=this.scale),!0===this.dithering&&(i.dithering=!0),this.alphaTest>0&&(i.alphaTest=this.alphaTest),!0===this.alphaToCoverage&&(i.alphaToCoverage=this.alphaToCoverage),!0===this.premultipliedAlpha&&(i.premultipliedAlpha=this.premultipliedAlpha),!0===this.wireframe&&(i.wireframe=this.wireframe),this.wireframeLinewidth>1&&(i.wireframeLinewidth=this.wireframeLinewidth),"round"!==this.wireframeLinecap&&(i.wireframeLinecap=this.wireframeLinecap),"round"!==this.wireframeLinejoin&&(i.wireframeLinejoin=this.wireframeLinejoin),!0===this.flatShading&&(i.flatShading=this.flatShading),!1===this.visible&&(i.visible=!1),!1===this.toneMapped&&(i.toneMapped=!1),!1===this.fog&&(i.fog=!1),"{}"!==JSON.stringify(this.userData)&&(i.userData=this.userData),t){const s=r(e.textures),o=r(e.images);s.length>0&&(i.textures=s),o.length>0&&(i.images=o)}return i}clone(){return(new this.constructor).copy(this)}copy(e){this.name=e.name,this.blending=e.blending,this.side=e.side,this.vertexColors=e.vertexColors,this.opacity=e.opacity,this.transparent=e.transparent,this.blendSrc=e.blendSrc,this.blendDst=e.blendDst,this.blendEquation=e.blendEquation,this.blendSrcAlpha=e.blendSrcAlpha,this.blendDstAlpha=e.blendDstAlpha,this.blendEquationAlpha=e.blendEquationAlpha,this.depthFunc=e.depthFunc,this.depthTest=e.depthTest,this.depthWrite=e.depthWrite,this.stencilWriteMask=e.stencilWriteMask,this.stencilFunc=e.stencilFunc,this.stencilRef=e.stencilRef,this.stencilFuncMask=e.stencilFuncMask,this.stencilFail=e.stencilFail,this.stencilZFail=e.stencilZFail,this.stencilZPass=e.stencilZPass,this.stencilWrite=e.stencilWrite;const t=e.clippingPlanes;let i=null;if(null!==t){const r=t.length;i=new Array(r);for(let s=0;s!==r;++s)i[s]=t[s].clone()}return this.clippingPlanes=i,this.clipIntersection=e.clipIntersection,this.clipShadows=e.clipShadows,this.shadowSide=e.shadowSide,this.colorWrite=e.colorWrite,this.precision=e.precision,this.polygonOffset=e.polygonOffset,this.polygonOffsetFactor=e.polygonOffsetFactor,this.polygonOffsetUnits=e.polygonOffsetUnits,this.dithering=e.dithering,this.alphaTest=e.alphaTest,this.alphaToCoverage=e.alphaToCoverage,this.premultipliedAlpha=e.premultipliedAlpha,this.visible=e.visible,this.toneMapped=e.toneMapped,this.userData=JSON.parse(JSON.stringify(e.userData)),this}dispose(){this.dispatchEvent({type:"dispose"})}set needsUpdate(e){!0===e&&this.version++}}class Ei extends pr{constructor(e){super(),this.isMeshBasicMaterial=!0,this.type="MeshBasicMaterial",this.color=new pe(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=0,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.fog=e.fog,this}}const dn=new S,c4=new K;class Ut{constructor(e,t,i){if(Array.isArray(e))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.isBufferAttribute=!0,this.name="",this.array=e,this.itemSize=t,this.count=void 0!==e?e.length/t:0,this.normalized=!0===i,this.usage=35044,this.updateRange={offset:0,count:-1},this.version=0}onUploadCallback(){}set needsUpdate(e){!0===e&&this.version++}setUsage(e){return this.usage=e,this}copy(e){return this.name=e.name,this.array=new e.array.constructor(e.array),this.itemSize=e.itemSize,this.count=e.count,this.normalized=e.normalized,this.usage=e.usage,this}copyAt(e,t,i){e*=this.itemSize,i*=t.itemSize;for(let r=0,s=this.itemSize;r<s;r++)this.array[e+r]=t.array[i+r];return this}copyArray(e){return this.array.set(e),this}applyMatrix3(e){if(2===this.itemSize)for(let t=0,i=this.count;t<i;t++)c4.fromBufferAttribute(this,t),c4.applyMatrix3(e),this.setXY(t,c4.x,c4.y);else if(3===this.itemSize)for(let t=0,i=this.count;t<i;t++)dn.fromBufferAttribute(this,t),dn.applyMatrix3(e),this.setXYZ(t,dn.x,dn.y,dn.z);return this}applyMatrix4(e){for(let t=0,i=this.count;t<i;t++)dn.fromBufferAttribute(this,t),dn.applyMatrix4(e),this.setXYZ(t,dn.x,dn.y,dn.z);return this}applyNormalMatrix(e){for(let t=0,i=this.count;t<i;t++)dn.fromBufferAttribute(this,t),dn.applyNormalMatrix(e),this.setXYZ(t,dn.x,dn.y,dn.z);return this}transformDirection(e){for(let t=0,i=this.count;t<i;t++)dn.fromBufferAttribute(this,t),dn.transformDirection(e),this.setXYZ(t,dn.x,dn.y,dn.z);return this}set(e,t=0){return this.array.set(e,t),this}getX(e){let t=this.array[e*this.itemSize];return this.normalized&&(t=as(t,this.array)),t}setX(e,t){return this.normalized&&(t=Tt(t,this.array)),this.array[e*this.itemSize]=t,this}getY(e){let t=this.array[e*this.itemSize+1];return this.normalized&&(t=as(t,this.array)),t}setY(e,t){return this.normalized&&(t=Tt(t,this.array)),this.array[e*this.itemSize+1]=t,this}getZ(e){let t=this.array[e*this.itemSize+2];return this.normalized&&(t=as(t,this.array)),t}setZ(e,t){return this.normalized&&(t=Tt(t,this.array)),this.array[e*this.itemSize+2]=t,this}getW(e){let t=this.array[e*this.itemSize+3];return this.normalized&&(t=as(t,this.array)),t}setW(e,t){return this.normalized&&(t=Tt(t,this.array)),this.array[e*this.itemSize+3]=t,this}setXY(e,t,i){return e*=this.itemSize,this.normalized&&(t=Tt(t,this.array),i=Tt(i,this.array)),this.array[e+0]=t,this.array[e+1]=i,this}setXYZ(e,t,i,r){return e*=this.itemSize,this.normalized&&(t=Tt(t,this.array),i=Tt(i,this.array),r=Tt(r,this.array)),this.array[e+0]=t,this.array[e+1]=i,this.array[e+2]=r,this}setXYZW(e,t,i,r,s){return e*=this.itemSize,this.normalized&&(t=Tt(t,this.array),i=Tt(i,this.array),r=Tt(r,this.array),s=Tt(s,this.array)),this.array[e+0]=t,this.array[e+1]=i,this.array[e+2]=r,this.array[e+3]=s,this}onUpload(e){return this.onUploadCallback=e,this}clone(){return new this.constructor(this.array,this.itemSize).copy(this)}toJSON(){const e={itemSize:this.itemSize,type:this.array.constructor.name,array:Array.from(this.array),normalized:this.normalized};return""!==this.name&&(e.name=this.name),35044!==this.usage&&(e.usage=this.usage),(0!==this.updateRange.offset||-1!==this.updateRange.count)&&(e.updateRange=this.updateRange),e}copyColorsArray(){console.error("THREE.BufferAttribute: copyColorsArray() was removed in r144.")}copyVector2sArray(){console.error("THREE.BufferAttribute: copyVector2sArray() was removed in r144.")}copyVector3sArray(){console.error("THREE.BufferAttribute: copyVector3sArray() was removed in r144.")}copyVector4sArray(){console.error("THREE.BufferAttribute: copyVector4sArray() was removed in r144.")}}class gw extends Ut{constructor(e,t,i){super(new Uint16Array(e),t,i)}}class vw extends Ut{constructor(e,t,i){super(new Uint32Array(e),t,i)}}class Ce extends Ut{constructor(e,t,i){super(new Float32Array(e),t,i)}}let kJ=0;const Wi=new Xe,E6=new Sn,Ra=new S,Di=new H1,$c=new H1,En=new S;class it extends O1{constructor(){super(),this.isBufferGeometry=!0,Object.defineProperty(this,"id",{value:kJ++}),this.uuid=Ci(),this.name="",this.type="BufferGeometry",this.index=null,this.attributes={},this.morphAttributes={},this.morphTargetsRelative=!1,this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0},this.userData={}}getIndex(){return this.index}setIndex(e){return this.index=Array.isArray(e)?new(iw(e)?vw:gw)(e,1):e,this}getAttribute(e){return this.attributes[e]}setAttribute(e,t){return this.attributes[e]=t,this}deleteAttribute(e){return delete this.attributes[e],this}hasAttribute(e){return void 0!==this.attributes[e]}addGroup(e,t,i=0){this.groups.push({start:e,count:t,materialIndex:i})}clearGroups(){this.groups=[]}setDrawRange(e,t){this.drawRange.start=e,this.drawRange.count=t}applyMatrix4(e){const t=this.attributes.position;void 0!==t&&(t.applyMatrix4(e),t.needsUpdate=!0);const i=this.attributes.normal;if(void 0!==i){const s=(new fi).getNormalMatrix(e);i.applyNormalMatrix(s),i.needsUpdate=!0}const r=this.attributes.tangent;return void 0!==r&&(r.transformDirection(e),r.needsUpdate=!0),null!==this.boundingBox&&this.computeBoundingBox(),null!==this.boundingSphere&&this.computeBoundingSphere(),this}applyQuaternion(e){return Wi.makeRotationFromQuaternion(e),this.applyMatrix4(Wi),this}rotateX(e){return Wi.makeRotationX(e),this.applyMatrix4(Wi),this}rotateY(e){return Wi.makeRotationY(e),this.applyMatrix4(Wi),this}rotateZ(e){return Wi.makeRotationZ(e),this.applyMatrix4(Wi),this}translate(e,t,i){return Wi.makeTranslation(e,t,i),this.applyMatrix4(Wi),this}scale(e,t,i){return Wi.makeScale(e,t,i),this.applyMatrix4(Wi),this}lookAt(e){return E6.lookAt(e),E6.updateMatrix(),this.applyMatrix4(E6.matrix),this}center(){return this.computeBoundingBox(),this.boundingBox.getCenter(Ra).negate(),this.translate(Ra.x,Ra.y,Ra.z),this}setFromPoints(e){const t=[];for(let i=0,r=e.length;i<r;i++){const s=e[i];t.push(s.x,s.y,s.z||0)}return this.setAttribute("position",new Ce(t,3)),this}computeBoundingBox(){null===this.boundingBox&&(this.boundingBox=new H1);const e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute)return console.error('THREE.BufferGeometry.computeBoundingBox(): GLBufferAttribute requires a manual bounding box. Alternatively set "mesh.frustumCulled" to "false".',this),void this.boundingBox.set(new S(-1/0,-1/0,-1/0),new S(1/0,1/0,1/0));if(void 0!==e){if(this.boundingBox.setFromBufferAttribute(e),t)for(let i=0,r=t.length;i<r;i++)Di.setFromBufferAttribute(t[i]),this.morphTargetsRelative?(En.addVectors(this.boundingBox.min,Di.min),this.boundingBox.expandByPoint(En),En.addVectors(this.boundingBox.max,Di.max),this.boundingBox.expandByPoint(En)):(this.boundingBox.expandByPoint(Di.min),this.boundingBox.expandByPoint(Di.max))}else this.boundingBox.makeEmpty();(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox(): Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)}computeBoundingSphere(){null===this.boundingSphere&&(this.boundingSphere=new W1);const e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute)return console.error('THREE.BufferGeometry.computeBoundingSphere(): GLBufferAttribute requires a manual bounding sphere. Alternatively set "mesh.frustumCulled" to "false".',this),void this.boundingSphere.set(new S,1/0);if(e){const i=this.boundingSphere.center;if(Di.setFromBufferAttribute(e),t)for(let s=0,o=t.length;s<o;s++)$c.setFromBufferAttribute(t[s]),this.morphTargetsRelative?(En.addVectors(Di.min,$c.min),Di.expandByPoint(En),En.addVectors(Di.max,$c.max),Di.expandByPoint(En)):(Di.expandByPoint($c.min),Di.expandByPoint($c.max));Di.getCenter(i);let r=0;for(let s=0,o=e.count;s<o;s++)En.fromBufferAttribute(e,s),r=Math.max(r,i.distanceToSquared(En));if(t)for(let s=0,o=t.length;s<o;s++){const a=t[s],c=this.morphTargetsRelative;for(let l=0,u=a.count;l<u;l++)En.fromBufferAttribute(a,l),c&&(Ra.fromBufferAttribute(e,l),En.add(Ra)),r=Math.max(r,i.distanceToSquared(En))}this.boundingSphere.radius=Math.sqrt(r),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}}computeTangents(){const e=this.index,t=this.attributes;if(null===e||void 0===t.position||void 0===t.normal||void 0===t.uv)return void console.error("THREE.BufferGeometry: .computeTangents() failed. Missing required attributes (index, position, normal or uv)");const i=e.array,r=t.position.array,s=t.normal.array,o=t.uv.array,a=r.length/3;!1===this.hasAttribute("tangent")&&this.setAttribute("tangent",new Ut(new Float32Array(4*a),4));const c=this.getAttribute("tangent").array,l=[],u=[];for(let I=0;I<a;I++)l[I]=new S,u[I]=new S;const f=new S,d=new S,h=new S,p=new K,g=new K,m=new K,v=new S,x=new S;function y(I,N,J){f.fromArray(r,3*I),d.fromArray(r,3*N),h.fromArray(r,3*J),p.fromArray(o,2*I),g.fromArray(o,2*N),m.fromArray(o,2*J),d.sub(f),h.sub(f),g.sub(p),m.sub(p);const O=1/(g.x*m.y-m.x*g.y);!isFinite(O)||(v.copy(d).multiplyScalar(m.y).addScaledVector(h,-g.y).multiplyScalar(O),x.copy(h).multiplyScalar(g.x).addScaledVector(d,-m.x).multiplyScalar(O),l[I].add(v),l[N].add(v),l[J].add(v),u[I].add(x),u[N].add(x),u[J].add(x))}let _=this.groups;0===_.length&&(_=[{start:0,count:i.length}]);for(let I=0,N=_.length;I<N;++I){const J=_[I],O=J.start;for(let k=O,Y=O+J.count;k<Y;k+=3)y(i[k+0],i[k+1],i[k+2])}const M=new S,w=new S,T=new S,b=new S;function D(I){T.fromArray(s,3*I),b.copy(T);const N=l[I];M.copy(N),M.sub(T.multiplyScalar(T.dot(N))).normalize(),w.crossVectors(b,N);const O=w.dot(u[I])<0?-1:1;c[4*I]=M.x,c[4*I+1]=M.y,c[4*I+2]=M.z,c[4*I+3]=O}for(let I=0,N=_.length;I<N;++I){const J=_[I],O=J.start;for(let k=O,Y=O+J.count;k<Y;k+=3)D(i[k+0]),D(i[k+1]),D(i[k+2])}}computeVertexNormals(){const e=this.index,t=this.getAttribute("position");if(void 0!==t){let i=this.getAttribute("normal");if(void 0===i)i=new Ut(new Float32Array(3*t.count),3),this.setAttribute("normal",i);else for(let d=0,h=i.count;d<h;d++)i.setXYZ(d,0,0,0);const r=new S,s=new S,o=new S,a=new S,c=new S,l=new S,u=new S,f=new S;if(e)for(let d=0,h=e.count;d<h;d+=3){const p=e.getX(d+0),g=e.getX(d+1),m=e.getX(d+2);r.fromBufferAttribute(t,p),s.fromBufferAttribute(t,g),o.fromBufferAttribute(t,m),u.subVectors(o,s),f.subVectors(r,s),u.cross(f),a.fromBufferAttribute(i,p),c.fromBufferAttribute(i,g),l.fromBufferAttribute(i,m),a.add(u),c.add(u),l.add(u),i.setXYZ(p,a.x,a.y,a.z),i.setXYZ(g,c.x,c.y,c.z),i.setXYZ(m,l.x,l.y,l.z)}else for(let d=0,h=t.count;d<h;d+=3)r.fromBufferAttribute(t,d+0),s.fromBufferAttribute(t,d+1),o.fromBufferAttribute(t,d+2),u.subVectors(o,s),f.subVectors(r,s),u.cross(f),i.setXYZ(d+0,u.x,u.y,u.z),i.setXYZ(d+1,u.x,u.y,u.z),i.setXYZ(d+2,u.x,u.y,u.z);this.normalizeNormals(),i.needsUpdate=!0}}merge(){return console.error("THREE.BufferGeometry.merge() has been removed. Use THREE.BufferGeometryUtils.mergeBufferGeometries() instead."),this}normalizeNormals(){const e=this.attributes.normal;for(let t=0,i=e.count;t<i;t++)En.fromBufferAttribute(e,t),En.normalize(),e.setXYZ(t,En.x,En.y,En.z)}toNonIndexed(){function e(a,c){const l=a.array,u=a.itemSize,f=a.normalized,d=new l.constructor(c.length*u);let h=0,p=0;for(let g=0,m=c.length;g<m;g++){h=a.isInterleavedBufferAttribute?c[g]*a.data.stride+a.offset:c[g]*u;for(let v=0;v<u;v++)d[p++]=l[h++]}return new Ut(d,u,f)}if(null===this.index)return console.warn("THREE.BufferGeometry.toNonIndexed(): BufferGeometry is already non-indexed."),this;const t=new it,i=this.index.array,r=this.attributes;for(const a in r){const l=e(r[a],i);t.setAttribute(a,l)}const s=this.morphAttributes;for(const a in s){const c=[],l=s[a];for(let u=0,f=l.length;u<f;u++){const h=e(l[u],i);c.push(h)}t.morphAttributes[a]=c}t.morphTargetsRelative=this.morphTargetsRelative;const o=this.groups;for(let a=0,c=o.length;a<c;a++){const l=o[a];t.addGroup(l.start,l.count,l.materialIndex)}return t}toJSON(){const e={metadata:{version:4.5,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(e.uuid=this.uuid,e.type=this.type,""!==this.name&&(e.name=this.name),Object.keys(this.userData).length>0&&(e.userData=this.userData),void 0!==this.parameters){const c=this.parameters;for(const l in c)void 0!==c[l]&&(e[l]=c[l]);return e}e.data={attributes:{}};const t=this.index;null!==t&&(e.data.index={type:t.array.constructor.name,array:Array.prototype.slice.call(t.array)});const i=this.attributes;for(const c in i)e.data.attributes[c]=i[c].toJSON(e.data);const r={};let s=!1;for(const c in this.morphAttributes){const l=this.morphAttributes[c],u=[];for(let f=0,d=l.length;f<d;f++)u.push(l[f].toJSON(e.data));u.length>0&&(r[c]=u,s=!0)}s&&(e.data.morphAttributes=r,e.data.morphTargetsRelative=this.morphTargetsRelative);const o=this.groups;o.length>0&&(e.data.groups=JSON.parse(JSON.stringify(o)));const a=this.boundingSphere;return null!==a&&(e.data.boundingSphere={center:a.center.toArray(),radius:a.radius}),e}clone(){return(new this.constructor).copy(this)}copy(e){this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null;const t={};this.name=e.name;const i=e.index;null!==i&&this.setIndex(i.clone(t));const r=e.attributes;for(const l in r)this.setAttribute(l,r[l].clone(t));const s=e.morphAttributes;for(const l in s){const u=[],f=s[l];for(let d=0,h=f.length;d<h;d++)u.push(f[d].clone(t));this.morphAttributes[l]=u}this.morphTargetsRelative=e.morphTargetsRelative;const o=e.groups;for(let l=0,u=o.length;l<u;l++){const f=o[l];this.addGroup(f.start,f.count,f.materialIndex)}const a=e.boundingBox;null!==a&&(this.boundingBox=a.clone());const c=e.boundingSphere;return null!==c&&(this.boundingSphere=c.clone()),this.drawRange.start=e.drawRange.start,this.drawRange.count=e.drawRange.count,this.userData=e.userData,void 0!==e.parameters&&(this.parameters=Object.assign({},e.parameters)),this}dispose(){this.dispatchEvent({type:"dispose"})}}const yw=new Xe,za=new s4,D6=new W1,Gs=new S,Ws=new S,$s=new S,A6=new S,T6=new S,I6=new S,l4=new S,u4=new S,f4=new S,d4=new K,h4=new K,p4=new K,L6=new S,m4=new S;class Dn extends Sn{constructor(e=new it,t=new Ei){super(),this.isMesh=!0,this.type="Mesh",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),void 0!==e.morphTargetInfluences&&(this.morphTargetInfluences=e.morphTargetInfluences.slice()),void 0!==e.morphTargetDictionary&&(this.morphTargetDictionary=Object.assign({},e.morphTargetDictionary)),this.material=e.material,this.geometry=e.geometry,this}updateMorphTargets(){const t=this.geometry.morphAttributes,i=Object.keys(t);if(i.length>0){const r=t[i[0]];if(void 0!==r){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let s=0,o=r.length;s<o;s++){const a=r[s].name||String(s);this.morphTargetInfluences.push(0),this.morphTargetDictionary[a]=s}}}}raycast(e,t){const i=this.geometry,r=this.material,s=this.matrixWorld;if(void 0===r||(null===i.boundingSphere&&i.computeBoundingSphere(),D6.copy(i.boundingSphere),D6.applyMatrix4(s),!1===e.ray.intersectsSphere(D6))||(yw.copy(s).invert(),za.copy(e.ray).applyMatrix4(yw),null!==i.boundingBox&&!1===za.intersectsBox(i.boundingBox)))return;let o;const a=i.index,c=i.attributes.position,l=i.morphAttributes.position,u=i.morphTargetsRelative,f=i.attributes.uv,d=i.attributes.uv2,h=i.groups,p=i.drawRange;if(null!==a)if(Array.isArray(r))for(let g=0,m=h.length;g<m;g++){const v=h[g],x=r[v.materialIndex];for(let M=Math.max(v.start,p.start),w=Math.min(a.count,Math.min(v.start+v.count,p.start+p.count));M<w;M+=3){const T=a.getX(M),b=a.getX(M+1),D=a.getX(M+2);o=g4(this,x,e,za,c,l,u,f,d,T,b,D),o&&(o.faceIndex=Math.floor(M/3),o.face.materialIndex=v.materialIndex,t.push(o))}}else for(let v=Math.max(0,p.start),x=Math.min(a.count,p.start+p.count);v<x;v+=3){const y=a.getX(v),_=a.getX(v+1),M=a.getX(v+2);o=g4(this,r,e,za,c,l,u,f,d,y,_,M),o&&(o.faceIndex=Math.floor(v/3),t.push(o))}else if(void 0!==c)if(Array.isArray(r))for(let g=0,m=h.length;g<m;g++){const v=h[g],x=r[v.materialIndex];for(let M=Math.max(v.start,p.start),w=Math.min(c.count,Math.min(v.start+v.count,p.start+p.count));M<w;M+=3)o=g4(this,x,e,za,c,l,u,f,d,M,M+1,M+2),o&&(o.faceIndex=Math.floor(M/3),o.face.materialIndex=v.materialIndex,t.push(o))}else for(let v=Math.max(0,p.start),x=Math.min(c.count,p.start+p.count);v<x;v+=3)o=g4(this,r,e,za,c,l,u,f,d,v,v+1,v+2),o&&(o.faceIndex=Math.floor(v/3),t.push(o))}}function g4(n,e,t,i,r,s,o,a,c,l,u,f){Gs.fromBufferAttribute(r,l),Ws.fromBufferAttribute(r,u),$s.fromBufferAttribute(r,f);const d=n.morphTargetInfluences;if(s&&d){l4.set(0,0,0),u4.set(0,0,0),f4.set(0,0,0);for(let p=0,g=s.length;p<g;p++){const m=d[p],v=s[p];0!==m&&(A6.fromBufferAttribute(v,l),T6.fromBufferAttribute(v,u),I6.fromBufferAttribute(v,f),o?(l4.addScaledVector(A6,m),u4.addScaledVector(T6,m),f4.addScaledVector(I6,m)):(l4.addScaledVector(A6.sub(Gs),m),u4.addScaledVector(T6.sub(Ws),m),f4.addScaledVector(I6.sub($s),m)))}Gs.add(l4),Ws.add(u4),$s.add(f4)}n.isSkinnedMesh&&(n.boneTransform(l,Gs),n.boneTransform(u,Ws),n.boneTransform(f,$s));const h=function VJ(n,e,t,i,r,s,o,a){let c;if(c=1===e.side?i.intersectTriangle(o,s,r,!0,a):i.intersectTriangle(r,s,o,2!==e.side,a),null===c)return null;m4.copy(a),m4.applyMatrix4(n.matrixWorld);const l=t.ray.origin.distanceTo(m4);return l<t.near||l>t.far?null:{distance:l,point:m4.clone(),object:n}}(n,e,t,i,Gs,Ws,$s,L6);if(h){a&&(d4.fromBufferAttribute(a,l),h4.fromBufferAttribute(a,u),p4.fromBufferAttribute(a,f),h.uv=hr.getUV(L6,Gs,Ws,$s,d4,h4,p4,new K)),c&&(d4.fromBufferAttribute(c,l),h4.fromBufferAttribute(c,u),p4.fromBufferAttribute(c,f),h.uv2=hr.getUV(L6,Gs,Ws,$s,d4,h4,p4,new K));const p={a:l,b:u,c:f,normal:new S,materialIndex:0};hr.getNormal(Gs,Ws,$s,p.normal),h.face=p}return h}class Pa extends it{constructor(e=1,t=1,i=1,r=1,s=1,o=1){super(),this.type="BoxGeometry",this.parameters={width:e,height:t,depth:i,widthSegments:r,heightSegments:s,depthSegments:o};const a=this;r=Math.floor(r),s=Math.floor(s),o=Math.floor(o);const c=[],l=[],u=[],f=[];let d=0,h=0;function p(g,m,v,x,y,_,M,w,T,b,D){const I=_/T,N=M/b,J=_/2,O=M/2,R=w/2,k=T+1,Y=b+1;let ee=0,$=0;const ie=new S;for(let Q=0;Q<Y;Q++){const V=Q*N-O;for(let H=0;H<k;H++)ie[g]=(H*I-J)*x,ie[m]=V*y,ie[v]=R,l.push(ie.x,ie.y,ie.z),ie[g]=0,ie[m]=0,ie[v]=w>0?1:-1,u.push(ie.x,ie.y,ie.z),f.push(H/T),f.push(1-Q/b),ee+=1}for(let Q=0;Q<b;Q++)for(let V=0;V<T;V++){const ae=d+V+k*(Q+1),re=d+(V+1)+k*(Q+1),me=d+(V+1)+k*Q;c.push(d+V+k*Q,ae,me),c.push(ae,re,me),$+=6}a.addGroup(h,$,D),h+=$,d+=ee}p("z","y","x",-1,-1,i,t,e,o,s,0),p("z","y","x",1,-1,i,t,-e,o,s,1),p("x","z","y",1,1,e,i,t,r,o,2),p("x","z","y",1,-1,e,i,-t,r,o,3),p("x","y","z",1,-1,e,t,i,r,s,4),p("x","y","z",-1,-1,e,t,-i,r,s,5),this.setIndex(c),this.setAttribute("position",new Ce(l,3)),this.setAttribute("normal",new Ce(u,3)),this.setAttribute("uv",new Ce(f,2))}static fromJSON(e){return new Pa(e.width,e.height,e.depth,e.widthSegments,e.heightSegments,e.depthSegments)}}function Na(n){const e={};for(const t in n){e[t]={};for(const i in n[t]){const r=n[t][i];e[t][i]=r&&(r.isColor||r.isMatrix3||r.isMatrix4||r.isVector2||r.isVector3||r.isVector4||r.isTexture||r.isQuaternion)?r.clone():Array.isArray(r)?r.slice():r}}return e}function ni(n){const e={};for(let t=0;t<n.length;t++){const i=Na(n[t]);for(const r in i)e[r]=i[r]}return e}function _w(n){return null===n.getRenderTarget()&&n.outputEncoding===Et?Ir:kc}const UJ={clone:Na,merge:ni};class Lr extends pr{constructor(e){super(),this.isShaderMaterial=!0,this.type="ShaderMaterial",this.defines={},this.uniforms={},this.uniformsGroups=[],this.vertexShader="void main() {\n\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n}",this.fragmentShader="void main() {\n\tgl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );\n}",this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.clipping=!1,this.extensions={derivatives:!1,fragDepth:!1,drawBuffers:!1,shaderTextureLOD:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv2:[0,0]},this.index0AttributeName=void 0,this.uniformsNeedUpdate=!1,this.glslVersion=null,void 0!==e&&this.setValues(e)}copy(e){return super.copy(e),this.fragmentShader=e.fragmentShader,this.vertexShader=e.vertexShader,this.uniforms=Na(e.uniforms),this.uniformsGroups=function HJ(n){const e=[];for(let t=0;t<n.length;t++)e.push(n[t].clone());return e}(e.uniformsGroups),this.defines=Object.assign({},e.defines),this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.fog=e.fog,this.lights=e.lights,this.clipping=e.clipping,this.extensions=Object.assign({},e.extensions),this.glslVersion=e.glslVersion,this}toJSON(e){const t=super.toJSON(e);t.glslVersion=this.glslVersion,t.uniforms={};for(const r in this.uniforms){const o=this.uniforms[r].value;t.uniforms[r]=o&&o.isTexture?{type:"t",value:o.toJSON(e).uuid}:o&&o.isColor?{type:"c",value:o.getHex()}:o&&o.isVector2?{type:"v2",value:o.toArray()}:o&&o.isVector3?{type:"v3",value:o.toArray()}:o&&o.isVector4?{type:"v4",value:o.toArray()}:o&&o.isMatrix3?{type:"m3",value:o.toArray()}:o&&o.isMatrix4?{type:"m4",value:o.toArray()}:{value:o}}Object.keys(this.defines).length>0&&(t.defines=this.defines),t.vertexShader=this.vertexShader,t.fragmentShader=this.fragmentShader;const i={};for(const r in this.extensions)!0===this.extensions[r]&&(i[r]=!0);return Object.keys(i).length>0&&(t.extensions=i),t}}class R6 extends Sn{constructor(){super(),this.isCamera=!0,this.type="Camera",this.matrixWorldInverse=new Xe,this.projectionMatrix=new Xe,this.projectionMatrixInverse=new Xe}copy(e,t){return super.copy(e,t),this.matrixWorldInverse.copy(e.matrixWorldInverse),this.projectionMatrix.copy(e.projectionMatrix),this.projectionMatrixInverse.copy(e.projectionMatrixInverse),this}getWorldDirection(e){this.updateWorldMatrix(!0,!1);const t=this.matrixWorld.elements;return e.set(-t[8],-t[9],-t[10]).normalize()}updateMatrixWorld(e){super.updateMatrixWorld(e),this.matrixWorldInverse.copy(this.matrixWorld).invert()}updateWorldMatrix(e,t){super.updateWorldMatrix(e,t),this.matrixWorldInverse.copy(this.matrixWorld).invert()}clone(){return(new this.constructor).copy(this)}}class An extends R6{constructor(e=50,t=1,i=.1,r=2e3){super(),this.isPerspectiveCamera=!0,this.type="PerspectiveCamera",this.fov=e,this.zoom=1,this.near=i,this.far=r,this.focus=10,this.aspect=t,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}copy(e,t){return super.copy(e,t),this.fov=e.fov,this.zoom=e.zoom,this.near=e.near,this.far=e.far,this.focus=e.focus,this.aspect=e.aspect,this.view=null===e.view?null:Object.assign({},e.view),this.filmGauge=e.filmGauge,this.filmOffset=e.filmOffset,this}setFocalLength(e){const t=.5*this.getFilmHeight()/e;this.fov=2*Vc*Math.atan(t),this.updateProjectionMatrix()}getFocalLength(){const e=Math.tan(.5*F1*this.fov);return.5*this.getFilmHeight()/e}getEffectiveFOV(){return 2*Vc*Math.atan(Math.tan(.5*F1*this.fov)/this.zoom)}getFilmWidth(){return this.filmGauge*Math.min(this.aspect,1)}getFilmHeight(){return this.filmGauge/Math.max(this.aspect,1)}setViewOffset(e,t,i,r,s,o){this.aspect=e/t,null===this.view&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=i,this.view.offsetY=r,this.view.width=s,this.view.height=o,this.updateProjectionMatrix()}clearViewOffset(){null!==this.view&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=this.near;let t=e*Math.tan(.5*F1*this.fov)/this.zoom,i=2*t,r=this.aspect*i,s=-.5*r;const o=this.view;if(null!==this.view&&this.view.enabled){const c=o.fullWidth,l=o.fullHeight;s+=o.offsetX*r/c,t-=o.offsetY*i/l,r*=o.width/c,i*=o.height/l}const a=this.filmOffset;0!==a&&(s+=e*a/this.getFilmWidth()),this.projectionMatrix.makePerspective(s,s+r,t,t-i,e,this.far),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const t=super.toJSON(e);return t.object.fov=this.fov,t.object.zoom=this.zoom,t.object.near=this.near,t.object.far=this.far,t.object.focus=this.focus,t.object.aspect=this.aspect,null!==this.view&&(t.object.view=Object.assign({},this.view)),t.object.filmGauge=this.filmGauge,t.object.filmOffset=this.filmOffset,t}}class WJ extends Sn{constructor(e,t,i){super(),this.type="CubeCamera",this.renderTarget=i;const r=new An(-90,1,e,t);r.layers=this.layers,r.up.set(0,1,0),r.lookAt(1,0,0),this.add(r);const s=new An(-90,1,e,t);s.layers=this.layers,s.up.set(0,1,0),s.lookAt(-1,0,0),this.add(s);const o=new An(-90,1,e,t);o.layers=this.layers,o.up.set(0,0,-1),o.lookAt(0,1,0),this.add(o);const a=new An(-90,1,e,t);a.layers=this.layers,a.up.set(0,0,1),a.lookAt(0,-1,0),this.add(a);const c=new An(-90,1,e,t);c.layers=this.layers,c.up.set(0,1,0),c.lookAt(0,0,1),this.add(c);const l=new An(-90,1,e,t);l.layers=this.layers,l.up.set(0,1,0),l.lookAt(0,0,-1),this.add(l)}update(e,t){null===this.parent&&this.updateMatrixWorld();const i=this.renderTarget,[r,s,o,a,c,l]=this.children,u=e.getRenderTarget(),f=e.toneMapping,d=e.xr.enabled;e.toneMapping=0,e.xr.enabled=!1;const h=i.texture.generateMipmaps;i.texture.generateMipmaps=!1,e.setRenderTarget(i,0),e.render(t,r),e.setRenderTarget(i,1),e.render(t,s),e.setRenderTarget(i,2),e.render(t,o),e.setRenderTarget(i,3),e.render(t,a),e.setRenderTarget(i,4),e.render(t,c),i.texture.generateMipmaps=h,e.setRenderTarget(i,5),e.render(t,l),e.setRenderTarget(u),e.toneMapping=f,e.xr.enabled=d,i.texture.needsPMREMUpdate=!0}}class v4 extends ur{constructor(e,t,i,r,s,o,a,c,l,u){super(e=void 0!==e?e:[],t=void 0!==t?t:301,i,r,s,o,a,c,l,u),this.isCubeTexture=!0,this.flipY=!1}get images(){return this.image}set images(e){this.image=e}}class $J extends V1{constructor(e=1,t={}){super(e,e,t),this.isWebGLCubeRenderTarget=!0;const i={width:e,height:e,depth:1};this.texture=new v4([i,i,i,i,i,i],t.mapping,t.wrapS,t.wrapT,t.magFilter,t.minFilter,t.format,t.type,t.anisotropy,t.encoding),this.texture.isRenderTargetTexture=!0,this.texture.generateMipmaps=void 0!==t.generateMipmaps&&t.generateMipmaps,this.texture.minFilter=void 0!==t.minFilter?t.minFilter:Kt}fromEquirectangularTexture(e,t){this.texture.type=t.type,this.texture.encoding=t.encoding,this.texture.generateMipmaps=t.generateMipmaps,this.texture.minFilter=t.minFilter,this.texture.magFilter=t.magFilter;const i_uniforms={tEquirect:{value:null}},i_vertexShader="\n\n\t\t\t\tvarying vec3 vWorldDirection;\n\n\t\t\t\tvec3 transformDirection( in vec3 dir, in mat4 matrix ) {\n\n\t\t\t\t\treturn normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );\n\n\t\t\t\t}\n\n\t\t\t\tvoid main() {\n\n\t\t\t\t\tvWorldDirection = transformDirection( position, modelMatrix );\n\n\t\t\t\t\t#include <begin_vertex>\n\t\t\t\t\t#include <project_vertex>\n\n\t\t\t\t}\n\t\t\t",i_fragmentShader="\n\n\t\t\t\tuniform sampler2D tEquirect;\n\n\t\t\t\tvarying vec3 vWorldDirection;\n\n\t\t\t\t#include <common>\n\n\t\t\t\tvoid main() {\n\n\t\t\t\t\tvec3 direction = normalize( vWorldDirection );\n\n\t\t\t\t\tvec2 sampleUV = equirectUv( direction );\n\n\t\t\t\t\tgl_FragColor = texture2D( tEquirect, sampleUV );\n\n\t\t\t\t}\n\t\t\t",r=new Pa(5,5,5),s=new Lr({name:"CubemapFromEquirect",uniforms:Na(i_uniforms),vertexShader:i_vertexShader,fragmentShader:i_fragmentShader,side:1,blending:0});s.uniforms.tEquirect.value=t;const o=new Dn(r,s),a=t.minFilter;return t.minFilter===Fs&&(t.minFilter=Kt),new WJ(1,10,this).update(e,o),t.minFilter=a,o.geometry.dispose(),o.material.dispose(),this}clear(e,t,i,r){const s=e.getRenderTarget();for(let o=0;o<6;o++)e.setRenderTarget(this,o),e.clear(t,i,r);e.setRenderTarget(s)}}const z6=new S,jJ=new S,qJ=new fi;class $1{constructor(e=new S(1,0,0),t=0){this.isPlane=!0,this.normal=e,this.constant=t}set(e,t){return this.normal.copy(e),this.constant=t,this}setComponents(e,t,i,r){return this.normal.set(e,t,i),this.constant=r,this}setFromNormalAndCoplanarPoint(e,t){return this.normal.copy(e),this.constant=-t.dot(this.normal),this}setFromCoplanarPoints(e,t,i){const r=z6.subVectors(i,t).cross(jJ.subVectors(e,t)).normalize();return this.setFromNormalAndCoplanarPoint(r,e),this}copy(e){return this.normal.copy(e.normal),this.constant=e.constant,this}normalize(){const e=1/this.normal.length();return this.normal.multiplyScalar(e),this.constant*=e,this}negate(){return this.constant*=-1,this.normal.negate(),this}distanceToPoint(e){return this.normal.dot(e)+this.constant}distanceToSphere(e){return this.distanceToPoint(e.center)-e.radius}projectPoint(e,t){return t.copy(this.normal).multiplyScalar(-this.distanceToPoint(e)).add(e)}intersectLine(e,t){const i=e.delta(z6),r=this.normal.dot(i);if(0===r)return 0===this.distanceToPoint(e.start)?t.copy(e.start):null;const s=-(e.start.dot(this.normal)+this.constant)/r;return s<0||s>1?null:t.copy(i).multiplyScalar(s).add(e.start)}intersectsLine(e){const t=this.distanceToPoint(e.start),i=this.distanceToPoint(e.end);return t<0&&i>0||i<0&&t>0}intersectsBox(e){return e.intersectsPlane(this)}intersectsSphere(e){return e.intersectsPlane(this)}coplanarPoint(e){return e.copy(this.normal).multiplyScalar(-this.constant)}applyMatrix4(e,t){const i=t||qJ.getNormalMatrix(e),r=this.coplanarPoint(z6).applyMatrix4(e),s=this.normal.applyMatrix3(i).normalize();return this.constant=-r.dot(s),this}translate(e){return this.constant-=e.dot(this.normal),this}equals(e){return e.normal.equals(this.normal)&&e.constant===this.constant}clone(){return(new this.constructor).copy(this)}}const ka=new W1,y4=new S;class P6{constructor(e=new $1,t=new $1,i=new $1,r=new $1,s=new $1,o=new $1){this.planes=[e,t,i,r,s,o]}set(e,t,i,r,s,o){const a=this.planes;return a[0].copy(e),a[1].copy(t),a[2].copy(i),a[3].copy(r),a[4].copy(s),a[5].copy(o),this}copy(e){const t=this.planes;for(let i=0;i<6;i++)t[i].copy(e.planes[i]);return this}setFromProjectionMatrix(e){const t=this.planes,i=e.elements,r=i[0],s=i[1],o=i[2],a=i[3],c=i[4],l=i[5],u=i[6],f=i[7],d=i[8],h=i[9],p=i[10],g=i[11],m=i[12],v=i[13],x=i[14],y=i[15];return t[0].setComponents(a-r,f-c,g-d,y-m).normalize(),t[1].setComponents(a+r,f+c,g+d,y+m).normalize(),t[2].setComponents(a+s,f+l,g+h,y+v).normalize(),t[3].setComponents(a-s,f-l,g-h,y-v).normalize(),t[4].setComponents(a-o,f-u,g-p,y-x).normalize(),t[5].setComponents(a+o,f+u,g+p,y+x).normalize(),this}intersectsObject(e){const t=e.geometry;return null===t.boundingSphere&&t.computeBoundingSphere(),ka.copy(t.boundingSphere).applyMatrix4(e.matrixWorld),this.intersectsSphere(ka)}intersectsSprite(e){return ka.center.set(0,0,0),ka.radius=.7071067811865476,ka.applyMatrix4(e.matrixWorld),this.intersectsSphere(ka)}intersectsSphere(e){const t=this.planes,i=e.center,r=-e.radius;for(let s=0;s<6;s++)if(t[s].distanceToPoint(i)<r)return!1;return!0}intersectsBox(e){const t=this.planes;for(let i=0;i<6;i++){const r=t[i];if(y4.x=r.normal.x>0?e.max.x:e.min.x,y4.y=r.normal.y>0?e.max.y:e.min.y,y4.z=r.normal.z>0?e.max.z:e.min.z,r.distanceToPoint(y4)<0)return!1}return!0}containsPoint(e){const t=this.planes;for(let i=0;i<6;i++)if(t[i].distanceToPoint(e)<0)return!1;return!0}clone(){return(new this.constructor).copy(this)}}function xw(){let n=null,e=!1,t=null,i=null;function r(s,o){t(s,o),i=n.requestAnimationFrame(r)}return{start:function(){!0!==e&&null!==t&&(i=n.requestAnimationFrame(r),e=!0)},stop:function(){n.cancelAnimationFrame(i),e=!1},setAnimationLoop:function(s){t=s},setContext:function(s){n=s}}}function ZJ(n,e){const t=e.isWebGL2,i=new WeakMap;return{get:function o(l){return l.isInterleavedBufferAttribute&&(l=l.data),i.get(l)},remove:function a(l){l.isInterleavedBufferAttribute&&(l=l.data);const u=i.get(l);u&&(n.deleteBuffer(u.buffer),i.delete(l))},update:function c(l,u){if(l.isGLBufferAttribute){const d=i.get(l);return void((!d||d.version<l.version)&&i.set(l,{buffer:l.buffer,type:l.type,bytesPerElement:l.elementSize,version:l.version}))}l.isInterleavedBufferAttribute&&(l=l.data);const f=i.get(l);void 0===f?i.set(l,function r(l,u){const f=l.array,d=l.usage,h=n.createBuffer();let p;if(n.bindBuffer(u,h),n.bufferData(u,f,d),l.onUploadCallback(),f instanceof Float32Array)p=5126;else if(f instanceof Uint16Array)if(l.isFloat16BufferAttribute){if(!t)throw new Error("THREE.WebGLAttributes: Usage of Float16BufferAttribute requires WebGL2.");p=5131}else p=5123;else if(f instanceof Int16Array)p=5122;else if(f instanceof Uint32Array)p=5125;else if(f instanceof Int32Array)p=5124;else if(f instanceof Int8Array)p=5120;else if(f instanceof Uint8Array)p=5121;else{if(!(f instanceof Uint8ClampedArray))throw new Error("THREE.WebGLAttributes: Unsupported buffer data format: "+f);p=5121}return{buffer:h,type:p,bytesPerElement:f.BYTES_PER_ELEMENT,version:l.version}}(l,u)):f.version<l.version&&(function s(l,u,f){const d=u.array,h=u.updateRange;n.bindBuffer(f,l),-1===h.count?n.bufferSubData(f,0,d):(t?n.bufferSubData(f,h.offset*d.BYTES_PER_ELEMENT,d,h.offset,h.count):n.bufferSubData(f,h.offset*d.BYTES_PER_ELEMENT,d.subarray(h.offset,h.offset+h.count)),h.count=-1),u.onUploadCallback()}(f.buffer,l,u),f.version=l.version)}}}class jc extends it{constructor(e=1,t=1,i=1,r=1){super(),this.type="PlaneGeometry",this.parameters={width:e,height:t,widthSegments:i,heightSegments:r};const s=e/2,o=t/2,a=Math.floor(i),c=Math.floor(r),l=a+1,u=c+1,f=e/a,d=t/c,h=[],p=[],g=[],m=[];for(let v=0;v<u;v++){const x=v*d-o;for(let y=0;y<l;y++)p.push(y*f-s,-x,0),g.push(0,0,1),m.push(y/a),m.push(1-v/c)}for(let v=0;v<c;v++)for(let x=0;x<a;x++){const _=x+l*(v+1),M=x+1+l*(v+1),w=x+1+l*v;h.push(x+l*v,_,w),h.push(_,M,w)}this.setIndex(h),this.setAttribute("position",new Ce(p,3)),this.setAttribute("normal",new Ce(g,3)),this.setAttribute("uv",new Ce(m,2))}static fromJSON(e){return new jc(e.width,e.height,e.widthSegments,e.heightSegments)}}const rt={alphamap_fragment:"#ifdef USE_ALPHAMAP\n\tdiffuseColor.a *= texture2D( alphaMap, vUv ).g;\n#endif",alphamap_pars_fragment:"#ifdef USE_ALPHAMAP\n\tuniform sampler2D alphaMap;\n#endif",alphatest_fragment:"#ifdef USE_ALPHATEST\n\tif ( diffuseColor.a < alphaTest ) discard;\n#endif",alphatest_pars_fragment:"#ifdef USE_ALPHATEST\n\tuniform float alphaTest;\n#endif",aomap_fragment:"#ifdef USE_AOMAP\n\tfloat ambientOcclusion = ( texture2D( aoMap, vUv2 ).r - 1.0 ) * aoMapIntensity + 1.0;\n\treflectedLight.indirectDiffuse *= ambientOcclusion;\n\t#if defined( USE_ENVMAP ) && defined( STANDARD )\n\t\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\n\t\treflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.roughness );\n\t#endif\n#endif",aomap_pars_fragment:"#ifdef USE_AOMAP\n\tuniform sampler2D aoMap;\n\tuniform float aoMapIntensity;\n#endif",begin_vertex:"vec3 transformed = vec3( position );",beginnormal_vertex:"vec3 objectNormal = vec3( normal );\n#ifdef USE_TANGENT\n\tvec3 objectTangent = vec3( tangent.xyz );\n#endif",bsdfs:"vec3 BRDF_Lambert( const in vec3 diffuseColor ) {\n\treturn RECIPROCAL_PI * diffuseColor;\n}\nvec3 F_Schlick( const in vec3 f0, const in float f90, const in float dotVH ) {\n\tfloat fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );\n\treturn f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );\n}\nfloat F_Schlick( const in float f0, const in float f90, const in float dotVH ) {\n\tfloat fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );\n\treturn f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );\n}\nvec3 Schlick_to_F0( const in vec3 f, const in float f90, const in float dotVH ) {\n    float x = clamp( 1.0 - dotVH, 0.0, 1.0 );\n    float x2 = x * x;\n    float x5 = clamp( x * x2 * x2, 0.0, 0.9999 );\n    return ( f - vec3( f90 ) * x5 ) / ( 1.0 - x5 );\n}\nfloat V_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {\n\tfloat a2 = pow2( alpha );\n\tfloat gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );\n\tfloat gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );\n\treturn 0.5 / max( gv + gl, EPSILON );\n}\nfloat D_GGX( const in float alpha, const in float dotNH ) {\n\tfloat a2 = pow2( alpha );\n\tfloat denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;\n\treturn RECIPROCAL_PI * a2 / pow2( denom );\n}\nvec3 BRDF_GGX( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 f0, const in float f90, const in float roughness ) {\n\tfloat alpha = pow2( roughness );\n\tvec3 halfDir = normalize( lightDir + viewDir );\n\tfloat dotNL = saturate( dot( normal, lightDir ) );\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\tfloat dotVH = saturate( dot( viewDir, halfDir ) );\n\tvec3 F = F_Schlick( f0, f90, dotVH );\n\tfloat V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );\n\tfloat D = D_GGX( alpha, dotNH );\n\treturn F * ( V * D );\n}\n#ifdef USE_IRIDESCENCE\n\tvec3 BRDF_GGX_Iridescence( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 f0, const in float f90, const in float iridescence, const in vec3 iridescenceFresnel, const in float roughness ) {\n\t\tfloat alpha = pow2( roughness );\n\t\tvec3 halfDir = normalize( lightDir + viewDir );\n\t\tfloat dotNL = saturate( dot( normal, lightDir ) );\n\t\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\t\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\t\tfloat dotVH = saturate( dot( viewDir, halfDir ) );\n\t\tvec3 F = mix( F_Schlick( f0, f90, dotVH ), iridescenceFresnel, iridescence );\n\t\tfloat V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );\n\t\tfloat D = D_GGX( alpha, dotNH );\n\t\treturn F * ( V * D );\n\t}\n#endif\nvec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {\n\tconst float LUT_SIZE = 64.0;\n\tconst float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;\n\tconst float LUT_BIAS = 0.5 / LUT_SIZE;\n\tfloat dotNV = saturate( dot( N, V ) );\n\tvec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );\n\tuv = uv * LUT_SCALE + LUT_BIAS;\n\treturn uv;\n}\nfloat LTC_ClippedSphereFormFactor( const in vec3 f ) {\n\tfloat l = length( f );\n\treturn max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );\n}\nvec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {\n\tfloat x = dot( v1, v2 );\n\tfloat y = abs( x );\n\tfloat a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;\n\tfloat b = 3.4175940 + ( 4.1616724 + y ) * y;\n\tfloat v = a / b;\n\tfloat theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;\n\treturn cross( v1, v2 ) * theta_sintheta;\n}\nvec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {\n\tvec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];\n\tvec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];\n\tvec3 lightNormal = cross( v1, v2 );\n\tif( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );\n\tvec3 T1, T2;\n\tT1 = normalize( V - N * dot( V, N ) );\n\tT2 = - cross( N, T1 );\n\tmat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );\n\tvec3 coords[ 4 ];\n\tcoords[ 0 ] = mat * ( rectCoords[ 0 ] - P );\n\tcoords[ 1 ] = mat * ( rectCoords[ 1 ] - P );\n\tcoords[ 2 ] = mat * ( rectCoords[ 2 ] - P );\n\tcoords[ 3 ] = mat * ( rectCoords[ 3 ] - P );\n\tcoords[ 0 ] = normalize( coords[ 0 ] );\n\tcoords[ 1 ] = normalize( coords[ 1 ] );\n\tcoords[ 2 ] = normalize( coords[ 2 ] );\n\tcoords[ 3 ] = normalize( coords[ 3 ] );\n\tvec3 vectorFormFactor = vec3( 0.0 );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );\n\tfloat result = LTC_ClippedSphereFormFactor( vectorFormFactor );\n\treturn vec3( result );\n}\nfloat G_BlinnPhong_Implicit( ) {\n\treturn 0.25;\n}\nfloat D_BlinnPhong( const in float shininess, const in float dotNH ) {\n\treturn RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );\n}\nvec3 BRDF_BlinnPhong( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float shininess ) {\n\tvec3 halfDir = normalize( lightDir + viewDir );\n\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\tfloat dotVH = saturate( dot( viewDir, halfDir ) );\n\tvec3 F = F_Schlick( specularColor, 1.0, dotVH );\n\tfloat G = G_BlinnPhong_Implicit( );\n\tfloat D = D_BlinnPhong( shininess, dotNH );\n\treturn F * ( G * D );\n}\n#if defined( USE_SHEEN )\nfloat D_Charlie( float roughness, float dotNH ) {\n\tfloat alpha = pow2( roughness );\n\tfloat invAlpha = 1.0 / alpha;\n\tfloat cos2h = dotNH * dotNH;\n\tfloat sin2h = max( 1.0 - cos2h, 0.0078125 );\n\treturn ( 2.0 + invAlpha ) * pow( sin2h, invAlpha * 0.5 ) / ( 2.0 * PI );\n}\nfloat V_Neubelt( float dotNV, float dotNL ) {\n\treturn saturate( 1.0 / ( 4.0 * ( dotNL + dotNV - dotNL * dotNV ) ) );\n}\nvec3 BRDF_Sheen( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, vec3 sheenColor, const in float sheenRoughness ) {\n\tvec3 halfDir = normalize( lightDir + viewDir );\n\tfloat dotNL = saturate( dot( normal, lightDir ) );\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\tfloat D = D_Charlie( sheenRoughness, dotNH );\n\tfloat V = V_Neubelt( dotNV, dotNL );\n\treturn sheenColor * ( D * V );\n}\n#endif",iridescence_fragment:"#ifdef USE_IRIDESCENCE\n\tconst mat3 XYZ_TO_REC709 = mat3(\n\t\t 3.2404542, -0.9692660,  0.0556434,\n\t\t-1.5371385,  1.8760108, -0.2040259,\n\t\t-0.4985314,  0.0415560,  1.0572252\n\t);\n\tvec3 Fresnel0ToIor( vec3 fresnel0 ) {\n\t\tvec3 sqrtF0 = sqrt( fresnel0 );\n\t\treturn ( vec3( 1.0 ) + sqrtF0 ) / ( vec3( 1.0 ) - sqrtF0 );\n\t}\n\tvec3 IorToFresnel0( vec3 transmittedIor, float incidentIor ) {\n\t\treturn pow2( ( transmittedIor - vec3( incidentIor ) ) / ( transmittedIor + vec3( incidentIor ) ) );\n\t}\n\tfloat IorToFresnel0( float transmittedIor, float incidentIor ) {\n\t\treturn pow2( ( transmittedIor - incidentIor ) / ( transmittedIor + incidentIor ));\n\t}\n\tvec3 evalSensitivity( float OPD, vec3 shift ) {\n\t\tfloat phase = 2.0 * PI * OPD * 1.0e-9;\n\t\tvec3 val = vec3( 5.4856e-13, 4.4201e-13, 5.2481e-13 );\n\t\tvec3 pos = vec3( 1.6810e+06, 1.7953e+06, 2.2084e+06 );\n\t\tvec3 var = vec3( 4.3278e+09, 9.3046e+09, 6.6121e+09 );\n\t\tvec3 xyz = val * sqrt( 2.0 * PI * var ) * cos( pos * phase + shift ) * exp( - pow2( phase ) * var );\n\t\txyz.x += 9.7470e-14 * sqrt( 2.0 * PI * 4.5282e+09 ) * cos( 2.2399e+06 * phase + shift[ 0 ] ) * exp( - 4.5282e+09 * pow2( phase ) );\n\t\txyz /= 1.0685e-7;\n\t\tvec3 rgb = XYZ_TO_REC709 * xyz;\n\t\treturn rgb;\n\t}\n\tvec3 evalIridescence( float outsideIOR, float eta2, float cosTheta1, float thinFilmThickness, vec3 baseF0 ) {\n\t\tvec3 I;\n\t\tfloat iridescenceIOR = mix( outsideIOR, eta2, smoothstep( 0.0, 0.03, thinFilmThickness ) );\n\t\tfloat sinTheta2Sq = pow2( outsideIOR / iridescenceIOR ) * ( 1.0 - pow2( cosTheta1 ) );\n\t\tfloat cosTheta2Sq = 1.0 - sinTheta2Sq;\n\t\tif ( cosTheta2Sq < 0.0 ) {\n\t\t\t return vec3( 1.0 );\n\t\t}\n\t\tfloat cosTheta2 = sqrt( cosTheta2Sq );\n\t\tfloat R0 = IorToFresnel0( iridescenceIOR, outsideIOR );\n\t\tfloat R12 = F_Schlick( R0, 1.0, cosTheta1 );\n\t\tfloat R21 = R12;\n\t\tfloat T121 = 1.0 - R12;\n\t\tfloat phi12 = 0.0;\n\t\tif ( iridescenceIOR < outsideIOR ) phi12 = PI;\n\t\tfloat phi21 = PI - phi12;\n\t\tvec3 baseIOR = Fresnel0ToIor( clamp( baseF0, 0.0, 0.9999 ) );\t\tvec3 R1 = IorToFresnel0( baseIOR, iridescenceIOR );\n\t\tvec3 R23 = F_Schlick( R1, 1.0, cosTheta2 );\n\t\tvec3 phi23 = vec3( 0.0 );\n\t\tif ( baseIOR[ 0 ] < iridescenceIOR ) phi23[ 0 ] = PI;\n\t\tif ( baseIOR[ 1 ] < iridescenceIOR ) phi23[ 1 ] = PI;\n\t\tif ( baseIOR[ 2 ] < iridescenceIOR ) phi23[ 2 ] = PI;\n\t\tfloat OPD = 2.0 * iridescenceIOR * thinFilmThickness * cosTheta2;\n\t\tvec3 phi = vec3( phi21 ) + phi23;\n\t\tvec3 R123 = clamp( R12 * R23, 1e-5, 0.9999 );\n\t\tvec3 r123 = sqrt( R123 );\n\t\tvec3 Rs = pow2( T121 ) * R23 / ( vec3( 1.0 ) - R123 );\n\t\tvec3 C0 = R12 + Rs;\n\t\tI = C0;\n\t\tvec3 Cm = Rs - T121;\n\t\tfor ( int m = 1; m <= 2; ++ m ) {\n\t\t\tCm *= r123;\n\t\t\tvec3 Sm = 2.0 * evalSensitivity( float( m ) * OPD, float( m ) * phi );\n\t\t\tI += Cm * Sm;\n\t\t}\n\t\treturn max( I, vec3( 0.0 ) );\n\t}\n#endif",bumpmap_pars_fragment:"#ifdef USE_BUMPMAP\n\tuniform sampler2D bumpMap;\n\tuniform float bumpScale;\n\tvec2 dHdxy_fwd() {\n\t\tvec2 dSTdx = dFdx( vUv );\n\t\tvec2 dSTdy = dFdy( vUv );\n\t\tfloat Hll = bumpScale * texture2D( bumpMap, vUv ).x;\n\t\tfloat dBx = bumpScale * texture2D( bumpMap, vUv + dSTdx ).x - Hll;\n\t\tfloat dBy = bumpScale * texture2D( bumpMap, vUv + dSTdy ).x - Hll;\n\t\treturn vec2( dBx, dBy );\n\t}\n\tvec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy, float faceDirection ) {\n\t\tvec3 vSigmaX = dFdx( surf_pos.xyz );\n\t\tvec3 vSigmaY = dFdy( surf_pos.xyz );\n\t\tvec3 vN = surf_norm;\n\t\tvec3 R1 = cross( vSigmaY, vN );\n\t\tvec3 R2 = cross( vN, vSigmaX );\n\t\tfloat fDet = dot( vSigmaX, R1 ) * faceDirection;\n\t\tvec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );\n\t\treturn normalize( abs( fDet ) * surf_norm - vGrad );\n\t}\n#endif",clipping_planes_fragment:"#if NUM_CLIPPING_PLANES > 0\n\tvec4 plane;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {\n\t\tplane = clippingPlanes[ i ];\n\t\tif ( dot( vClipPosition, plane.xyz ) > plane.w ) discard;\n\t}\n\t#pragma unroll_loop_end\n\t#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES\n\t\tbool clipped = true;\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {\n\t\t\tplane = clippingPlanes[ i ];\n\t\t\tclipped = ( dot( vClipPosition, plane.xyz ) > plane.w ) && clipped;\n\t\t}\n\t\t#pragma unroll_loop_end\n\t\tif ( clipped ) discard;\n\t#endif\n#endif",clipping_planes_pars_fragment:"#if NUM_CLIPPING_PLANES > 0\n\tvarying vec3 vClipPosition;\n\tuniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];\n#endif",clipping_planes_pars_vertex:"#if NUM_CLIPPING_PLANES > 0\n\tvarying vec3 vClipPosition;\n#endif",clipping_planes_vertex:"#if NUM_CLIPPING_PLANES > 0\n\tvClipPosition = - mvPosition.xyz;\n#endif",color_fragment:"#if defined( USE_COLOR_ALPHA )\n\tdiffuseColor *= vColor;\n#elif defined( USE_COLOR )\n\tdiffuseColor.rgb *= vColor;\n#endif",color_pars_fragment:"#if defined( USE_COLOR_ALPHA )\n\tvarying vec4 vColor;\n#elif defined( USE_COLOR )\n\tvarying vec3 vColor;\n#endif",color_pars_vertex:"#if defined( USE_COLOR_ALPHA )\n\tvarying vec4 vColor;\n#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )\n\tvarying vec3 vColor;\n#endif",color_vertex:"#if defined( USE_COLOR_ALPHA )\n\tvColor = vec4( 1.0 );\n#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )\n\tvColor = vec3( 1.0 );\n#endif\n#ifdef USE_COLOR\n\tvColor *= color;\n#endif\n#ifdef USE_INSTANCING_COLOR\n\tvColor.xyz *= instanceColor.xyz;\n#endif",common:"#define PI 3.141592653589793\n#define PI2 6.283185307179586\n#define PI_HALF 1.5707963267948966\n#define RECIPROCAL_PI 0.3183098861837907\n#define RECIPROCAL_PI2 0.15915494309189535\n#define EPSILON 1e-6\n#ifndef saturate\n#define saturate( a ) clamp( a, 0.0, 1.0 )\n#endif\n#define whiteComplement( a ) ( 1.0 - saturate( a ) )\nfloat pow2( const in float x ) { return x*x; }\nvec3 pow2( const in vec3 x ) { return x*x; }\nfloat pow3( const in float x ) { return x*x*x; }\nfloat pow4( const in float x ) { float x2 = x*x; return x2*x2; }\nfloat max3( const in vec3 v ) { return max( max( v.x, v.y ), v.z ); }\nfloat average( const in vec3 v ) { return dot( v, vec3( 0.3333333 ) ); }\nhighp float rand( const in vec2 uv ) {\n\tconst highp float a = 12.9898, b = 78.233, c = 43758.5453;\n\thighp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );\n\treturn fract( sin( sn ) * c );\n}\n#ifdef HIGH_PRECISION\n\tfloat precisionSafeLength( vec3 v ) { return length( v ); }\n#else\n\tfloat precisionSafeLength( vec3 v ) {\n\t\tfloat maxComponent = max3( abs( v ) );\n\t\treturn length( v / maxComponent ) * maxComponent;\n\t}\n#endif\nstruct IncidentLight {\n\tvec3 color;\n\tvec3 direction;\n\tbool visible;\n};\nstruct ReflectedLight {\n\tvec3 directDiffuse;\n\tvec3 directSpecular;\n\tvec3 indirectDiffuse;\n\tvec3 indirectSpecular;\n};\nstruct GeometricContext {\n\tvec3 position;\n\tvec3 normal;\n\tvec3 viewDir;\n#ifdef USE_CLEARCOAT\n\tvec3 clearcoatNormal;\n#endif\n};\nvec3 transformDirection( in vec3 dir, in mat4 matrix ) {\n\treturn normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );\n}\nvec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {\n\treturn normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );\n}\nmat3 transposeMat3( const in mat3 m ) {\n\tmat3 tmp;\n\ttmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );\n\ttmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );\n\ttmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );\n\treturn tmp;\n}\nfloat luminance( const in vec3 rgb ) {\n\tconst vec3 weights = vec3( 0.2126729, 0.7151522, 0.0721750 );\n\treturn dot( weights, rgb );\n}\nbool isPerspectiveMatrix( mat4 m ) {\n\treturn m[ 2 ][ 3 ] == - 1.0;\n}\nvec2 equirectUv( in vec3 dir ) {\n\tfloat u = atan( dir.z, dir.x ) * RECIPROCAL_PI2 + 0.5;\n\tfloat v = asin( clamp( dir.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;\n\treturn vec2( u, v );\n}",cube_uv_reflection_fragment:"#ifdef ENVMAP_TYPE_CUBE_UV\n\t#define cubeUV_minMipLevel 4.0\n\t#define cubeUV_minTileSize 16.0\n\tfloat getFace( vec3 direction ) {\n\t\tvec3 absDirection = abs( direction );\n\t\tfloat face = - 1.0;\n\t\tif ( absDirection.x > absDirection.z ) {\n\t\t\tif ( absDirection.x > absDirection.y )\n\t\t\t\tface = direction.x > 0.0 ? 0.0 : 3.0;\n\t\t\telse\n\t\t\t\tface = direction.y > 0.0 ? 1.0 : 4.0;\n\t\t} else {\n\t\t\tif ( absDirection.z > absDirection.y )\n\t\t\t\tface = direction.z > 0.0 ? 2.0 : 5.0;\n\t\t\telse\n\t\t\t\tface = direction.y > 0.0 ? 1.0 : 4.0;\n\t\t}\n\t\treturn face;\n\t}\n\tvec2 getUV( vec3 direction, float face ) {\n\t\tvec2 uv;\n\t\tif ( face == 0.0 ) {\n\t\t\tuv = vec2( direction.z, direction.y ) / abs( direction.x );\n\t\t} else if ( face == 1.0 ) {\n\t\t\tuv = vec2( - direction.x, - direction.z ) / abs( direction.y );\n\t\t} else if ( face == 2.0 ) {\n\t\t\tuv = vec2( - direction.x, direction.y ) / abs( direction.z );\n\t\t} else if ( face == 3.0 ) {\n\t\t\tuv = vec2( - direction.z, direction.y ) / abs( direction.x );\n\t\t} else if ( face == 4.0 ) {\n\t\t\tuv = vec2( - direction.x, direction.z ) / abs( direction.y );\n\t\t} else {\n\t\t\tuv = vec2( direction.x, direction.y ) / abs( direction.z );\n\t\t}\n\t\treturn 0.5 * ( uv + 1.0 );\n\t}\n\tvec3 bilinearCubeUV( sampler2D envMap, vec3 direction, float mipInt ) {\n\t\tfloat face = getFace( direction );\n\t\tfloat filterInt = max( cubeUV_minMipLevel - mipInt, 0.0 );\n\t\tmipInt = max( mipInt, cubeUV_minMipLevel );\n\t\tfloat faceSize = exp2( mipInt );\n\t\tvec2 uv = getUV( direction, face ) * ( faceSize - 2.0 ) + 1.0;\n\t\tif ( face > 2.0 ) {\n\t\t\tuv.y += faceSize;\n\t\t\tface -= 3.0;\n\t\t}\n\t\tuv.x += face * faceSize;\n\t\tuv.x += filterInt * 3.0 * cubeUV_minTileSize;\n\t\tuv.y += 4.0 * ( exp2( CUBEUV_MAX_MIP ) - faceSize );\n\t\tuv.x *= CUBEUV_TEXEL_WIDTH;\n\t\tuv.y *= CUBEUV_TEXEL_HEIGHT;\n\t\t#ifdef texture2DGradEXT\n\t\t\treturn texture2DGradEXT( envMap, uv, vec2( 0.0 ), vec2( 0.0 ) ).rgb;\n\t\t#else\n\t\t\treturn texture2D( envMap, uv ).rgb;\n\t\t#endif\n\t}\n\t#define cubeUV_r0 1.0\n\t#define cubeUV_v0 0.339\n\t#define cubeUV_m0 - 2.0\n\t#define cubeUV_r1 0.8\n\t#define cubeUV_v1 0.276\n\t#define cubeUV_m1 - 1.0\n\t#define cubeUV_r4 0.4\n\t#define cubeUV_v4 0.046\n\t#define cubeUV_m4 2.0\n\t#define cubeUV_r5 0.305\n\t#define cubeUV_v5 0.016\n\t#define cubeUV_m5 3.0\n\t#define cubeUV_r6 0.21\n\t#define cubeUV_v6 0.0038\n\t#define cubeUV_m6 4.0\n\tfloat roughnessToMip( float roughness ) {\n\t\tfloat mip = 0.0;\n\t\tif ( roughness >= cubeUV_r1 ) {\n\t\t\tmip = ( cubeUV_r0 - roughness ) * ( cubeUV_m1 - cubeUV_m0 ) / ( cubeUV_r0 - cubeUV_r1 ) + cubeUV_m0;\n\t\t} else if ( roughness >= cubeUV_r4 ) {\n\t\t\tmip = ( cubeUV_r1 - roughness ) * ( cubeUV_m4 - cubeUV_m1 ) / ( cubeUV_r1 - cubeUV_r4 ) + cubeUV_m1;\n\t\t} else if ( roughness >= cubeUV_r5 ) {\n\t\t\tmip = ( cubeUV_r4 - roughness ) * ( cubeUV_m5 - cubeUV_m4 ) / ( cubeUV_r4 - cubeUV_r5 ) + cubeUV_m4;\n\t\t} else if ( roughness >= cubeUV_r6 ) {\n\t\t\tmip = ( cubeUV_r5 - roughness ) * ( cubeUV_m6 - cubeUV_m5 ) / ( cubeUV_r5 - cubeUV_r6 ) + cubeUV_m5;\n\t\t} else {\n\t\t\tmip = - 2.0 * log2( 1.16 * roughness );\t\t}\n\t\treturn mip;\n\t}\n\tvec4 textureCubeUV( sampler2D envMap, vec3 sampleDir, float roughness ) {\n\t\tfloat mip = clamp( roughnessToMip( roughness ), cubeUV_m0, CUBEUV_MAX_MIP );\n\t\tfloat mipF = fract( mip );\n\t\tfloat mipInt = floor( mip );\n\t\tvec3 color0 = bilinearCubeUV( envMap, sampleDir, mipInt );\n\t\tif ( mipF == 0.0 ) {\n\t\t\treturn vec4( color0, 1.0 );\n\t\t} else {\n\t\t\tvec3 color1 = bilinearCubeUV( envMap, sampleDir, mipInt + 1.0 );\n\t\t\treturn vec4( mix( color0, color1, mipF ), 1.0 );\n\t\t}\n\t}\n#endif",defaultnormal_vertex:"vec3 transformedNormal = objectNormal;\n#ifdef USE_INSTANCING\n\tmat3 m = mat3( instanceMatrix );\n\ttransformedNormal /= vec3( dot( m[ 0 ], m[ 0 ] ), dot( m[ 1 ], m[ 1 ] ), dot( m[ 2 ], m[ 2 ] ) );\n\ttransformedNormal = m * transformedNormal;\n#endif\ntransformedNormal = normalMatrix * transformedNormal;\n#ifdef FLIP_SIDED\n\ttransformedNormal = - transformedNormal;\n#endif\n#ifdef USE_TANGENT\n\tvec3 transformedTangent = ( modelViewMatrix * vec4( objectTangent, 0.0 ) ).xyz;\n\t#ifdef FLIP_SIDED\n\t\ttransformedTangent = - transformedTangent;\n\t#endif\n#endif",displacementmap_pars_vertex:"#ifdef USE_DISPLACEMENTMAP\n\tuniform sampler2D displacementMap;\n\tuniform float displacementScale;\n\tuniform float displacementBias;\n#endif",displacementmap_vertex:"#ifdef USE_DISPLACEMENTMAP\n\ttransformed += normalize( objectNormal ) * ( texture2D( displacementMap, vUv ).x * displacementScale + displacementBias );\n#endif",emissivemap_fragment:"#ifdef USE_EMISSIVEMAP\n\tvec4 emissiveColor = texture2D( emissiveMap, vUv );\n\ttotalEmissiveRadiance *= emissiveColor.rgb;\n#endif",emissivemap_pars_fragment:"#ifdef USE_EMISSIVEMAP\n\tuniform sampler2D emissiveMap;\n#endif",encodings_fragment:"gl_FragColor = linearToOutputTexel( gl_FragColor );",encodings_pars_fragment:"vec4 LinearToLinear( in vec4 value ) {\n\treturn value;\n}\nvec4 LinearTosRGB( in vec4 value ) {\n\treturn vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );\n}",envmap_fragment:"#ifdef USE_ENVMAP\n\t#ifdef ENV_WORLDPOS\n\t\tvec3 cameraToFrag;\n\t\tif ( isOrthographic ) {\n\t\t\tcameraToFrag = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );\n\t\t} else {\n\t\t\tcameraToFrag = normalize( vWorldPosition - cameraPosition );\n\t\t}\n\t\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvec3 reflectVec = reflect( cameraToFrag, worldNormal );\n\t\t#else\n\t\t\tvec3 reflectVec = refract( cameraToFrag, worldNormal, refractionRatio );\n\t\t#endif\n\t#else\n\t\tvec3 reflectVec = vReflect;\n\t#endif\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tvec4 envColor = textureCube( envMap, vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );\n\t#else\n\t\tvec4 envColor = vec4( 0.0 );\n\t#endif\n\t#ifdef ENVMAP_BLENDING_MULTIPLY\n\t\toutgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );\n\t#elif defined( ENVMAP_BLENDING_MIX )\n\t\toutgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );\n\t#elif defined( ENVMAP_BLENDING_ADD )\n\t\toutgoingLight += envColor.xyz * specularStrength * reflectivity;\n\t#endif\n#endif",envmap_common_pars_fragment:"#ifdef USE_ENVMAP\n\tuniform float envMapIntensity;\n\tuniform float flipEnvMap;\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tuniform samplerCube envMap;\n\t#else\n\t\tuniform sampler2D envMap;\n\t#endif\n\t\n#endif",envmap_pars_fragment:"#ifdef USE_ENVMAP\n\tuniform float reflectivity;\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )\n\t\t#define ENV_WORLDPOS\n\t#endif\n\t#ifdef ENV_WORLDPOS\n\t\tvarying vec3 vWorldPosition;\n\t\tuniform float refractionRatio;\n\t#else\n\t\tvarying vec3 vReflect;\n\t#endif\n#endif",envmap_pars_vertex:"#ifdef USE_ENVMAP\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )\n\t\t#define ENV_WORLDPOS\n\t#endif\n\t#ifdef ENV_WORLDPOS\n\t\t\n\t\tvarying vec3 vWorldPosition;\n\t#else\n\t\tvarying vec3 vReflect;\n\t\tuniform float refractionRatio;\n\t#endif\n#endif",envmap_physical_pars_fragment:"#if defined( USE_ENVMAP )\n\tvec3 getIBLIrradiance( const in vec3 normal ) {\n\t\t#if defined( ENVMAP_TYPE_CUBE_UV )\n\t\t\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\t\t\tvec4 envMapColor = textureCubeUV( envMap, worldNormal, 1.0 );\n\t\t\treturn PI * envMapColor.rgb * envMapIntensity;\n\t\t#else\n\t\t\treturn vec3( 0.0 );\n\t\t#endif\n\t}\n\tvec3 getIBLRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness ) {\n\t\t#if defined( ENVMAP_TYPE_CUBE_UV )\n\t\t\tvec3 reflectVec = reflect( - viewDir, normal );\n\t\t\treflectVec = normalize( mix( reflectVec, normal, roughness * roughness) );\n\t\t\treflectVec = inverseTransformDirection( reflectVec, viewMatrix );\n\t\t\tvec4 envMapColor = textureCubeUV( envMap, reflectVec, roughness );\n\t\t\treturn envMapColor.rgb * envMapIntensity;\n\t\t#else\n\t\t\treturn vec3( 0.0 );\n\t\t#endif\n\t}\n#endif",envmap_vertex:"#ifdef USE_ENVMAP\n\t#ifdef ENV_WORLDPOS\n\t\tvWorldPosition = worldPosition.xyz;\n\t#else\n\t\tvec3 cameraToVertex;\n\t\tif ( isOrthographic ) {\n\t\t\tcameraToVertex = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );\n\t\t} else {\n\t\t\tcameraToVertex = normalize( worldPosition.xyz - cameraPosition );\n\t\t}\n\t\tvec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvReflect = reflect( cameraToVertex, worldNormal );\n\t\t#else\n\t\t\tvReflect = refract( cameraToVertex, worldNormal, refractionRatio );\n\t\t#endif\n\t#endif\n#endif",fog_vertex:"#ifdef USE_FOG\n\tvFogDepth = - mvPosition.z;\n#endif",fog_pars_vertex:"#ifdef USE_FOG\n\tvarying float vFogDepth;\n#endif",fog_fragment:"#ifdef USE_FOG\n\t#ifdef FOG_EXP2\n\t\tfloat fogFactor = 1.0 - exp( - fogDensity * fogDensity * vFogDepth * vFogDepth );\n\t#else\n\t\tfloat fogFactor = smoothstep( fogNear, fogFar, vFogDepth );\n\t#endif\n\tgl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );\n#endif",fog_pars_fragment:"#ifdef USE_FOG\n\tuniform vec3 fogColor;\n\tvarying float vFogDepth;\n\t#ifdef FOG_EXP2\n\t\tuniform float fogDensity;\n\t#else\n\t\tuniform float fogNear;\n\t\tuniform float fogFar;\n\t#endif\n#endif",gradientmap_pars_fragment:"#ifdef USE_GRADIENTMAP\n\tuniform sampler2D gradientMap;\n#endif\nvec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {\n\tfloat dotNL = dot( normal, lightDirection );\n\tvec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );\n\t#ifdef USE_GRADIENTMAP\n\t\treturn vec3( texture2D( gradientMap, coord ).r );\n\t#else\n\t\tvec2 fw = fwidth( coord ) * 0.5;\n\t\treturn mix( vec3( 0.7 ), vec3( 1.0 ), smoothstep( 0.7 - fw.x, 0.7 + fw.x, coord.x ) );\n\t#endif\n}",lightmap_fragment:"#ifdef USE_LIGHTMAP\n\tvec4 lightMapTexel = texture2D( lightMap, vUv2 );\n\tvec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;\n\treflectedLight.indirectDiffuse += lightMapIrradiance;\n#endif",lightmap_pars_fragment:"#ifdef USE_LIGHTMAP\n\tuniform sampler2D lightMap;\n\tuniform float lightMapIntensity;\n#endif",lights_lambert_fragment:"LambertMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;\nmaterial.specularStrength = specularStrength;",lights_lambert_pars_fragment:"varying vec3 vViewPosition;\nstruct LambertMaterial {\n\tvec3 diffuseColor;\n\tfloat specularStrength;\n};\nvoid RE_Direct_Lambert( const in IncidentLight directLight, const in GeometricContext geometry, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectDiffuse_Lambert( const in vec3 irradiance, const in GeometricContext geometry, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_Lambert\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Lambert",lights_pars_begin:"uniform bool receiveShadow;\nuniform vec3 ambientLightColor;\nuniform vec3 lightProbe[ 9 ];\nvec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {\n\tfloat x = normal.x, y = normal.y, z = normal.z;\n\tvec3 result = shCoefficients[ 0 ] * 0.886227;\n\tresult += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;\n\tresult += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;\n\tresult += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;\n\tresult += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;\n\tresult += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;\n\tresult += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );\n\tresult += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;\n\tresult += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );\n\treturn result;\n}\nvec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in vec3 normal ) {\n\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\tvec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );\n\treturn irradiance;\n}\nvec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {\n\tvec3 irradiance = ambientLightColor;\n\treturn irradiance;\n}\nfloat getDistanceAttenuation( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {\n\t#if defined ( PHYSICALLY_CORRECT_LIGHTS )\n\t\tfloat distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );\n\t\tif ( cutoffDistance > 0.0 ) {\n\t\t\tdistanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );\n\t\t}\n\t\treturn distanceFalloff;\n\t#else\n\t\tif ( cutoffDistance > 0.0 && decayExponent > 0.0 ) {\n\t\t\treturn pow( saturate( - lightDistance / cutoffDistance + 1.0 ), decayExponent );\n\t\t}\n\t\treturn 1.0;\n\t#endif\n}\nfloat getSpotAttenuation( const in float coneCosine, const in float penumbraCosine, const in float angleCosine ) {\n\treturn smoothstep( coneCosine, penumbraCosine, angleCosine );\n}\n#if NUM_DIR_LIGHTS > 0\n\tstruct DirectionalLight {\n\t\tvec3 direction;\n\t\tvec3 color;\n\t};\n\tuniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];\n\tvoid getDirectionalLightInfo( const in DirectionalLight directionalLight, const in GeometricContext geometry, out IncidentLight light ) {\n\t\tlight.color = directionalLight.color;\n\t\tlight.direction = directionalLight.direction;\n\t\tlight.visible = true;\n\t}\n#endif\n#if NUM_POINT_LIGHTS > 0\n\tstruct PointLight {\n\t\tvec3 position;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t};\n\tuniform PointLight pointLights[ NUM_POINT_LIGHTS ];\n\tvoid getPointLightInfo( const in PointLight pointLight, const in GeometricContext geometry, out IncidentLight light ) {\n\t\tvec3 lVector = pointLight.position - geometry.position;\n\t\tlight.direction = normalize( lVector );\n\t\tfloat lightDistance = length( lVector );\n\t\tlight.color = pointLight.color;\n\t\tlight.color *= getDistanceAttenuation( lightDistance, pointLight.distance, pointLight.decay );\n\t\tlight.visible = ( light.color != vec3( 0.0 ) );\n\t}\n#endif\n#if NUM_SPOT_LIGHTS > 0\n\tstruct SpotLight {\n\t\tvec3 position;\n\t\tvec3 direction;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t\tfloat coneCos;\n\t\tfloat penumbraCos;\n\t};\n\tuniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];\n\tvoid getSpotLightInfo( const in SpotLight spotLight, const in GeometricContext geometry, out IncidentLight light ) {\n\t\tvec3 lVector = spotLight.position - geometry.position;\n\t\tlight.direction = normalize( lVector );\n\t\tfloat angleCos = dot( light.direction, spotLight.direction );\n\t\tfloat spotAttenuation = getSpotAttenuation( spotLight.coneCos, spotLight.penumbraCos, angleCos );\n\t\tif ( spotAttenuation > 0.0 ) {\n\t\t\tfloat lightDistance = length( lVector );\n\t\t\tlight.color = spotLight.color * spotAttenuation;\n\t\t\tlight.color *= getDistanceAttenuation( lightDistance, spotLight.distance, spotLight.decay );\n\t\t\tlight.visible = ( light.color != vec3( 0.0 ) );\n\t\t} else {\n\t\t\tlight.color = vec3( 0.0 );\n\t\t\tlight.visible = false;\n\t\t}\n\t}\n#endif\n#if NUM_RECT_AREA_LIGHTS > 0\n\tstruct RectAreaLight {\n\t\tvec3 color;\n\t\tvec3 position;\n\t\tvec3 halfWidth;\n\t\tvec3 halfHeight;\n\t};\n\tuniform sampler2D ltc_1;\tuniform sampler2D ltc_2;\n\tuniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];\n#endif\n#if NUM_HEMI_LIGHTS > 0\n\tstruct HemisphereLight {\n\t\tvec3 direction;\n\t\tvec3 skyColor;\n\t\tvec3 groundColor;\n\t};\n\tuniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];\n\tvec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in vec3 normal ) {\n\t\tfloat dotNL = dot( normal, hemiLight.direction );\n\t\tfloat hemiDiffuseWeight = 0.5 * dotNL + 0.5;\n\t\tvec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );\n\t\treturn irradiance;\n\t}\n#endif",lights_toon_fragment:"ToonMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;",lights_toon_pars_fragment:"varying vec3 vViewPosition;\nstruct ToonMaterial {\n\tvec3 diffuseColor;\n};\nvoid RE_Direct_Toon( const in IncidentLight directLight, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {\n\tvec3 irradiance = getGradientIrradiance( geometry.normal, directLight.direction ) * directLight.color;\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_Toon\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Toon",lights_phong_fragment:"BlinnPhongMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;\nmaterial.specularColor = specular;\nmaterial.specularShininess = shininess;\nmaterial.specularStrength = specularStrength;",lights_phong_pars_fragment:"varying vec3 vViewPosition;\nstruct BlinnPhongMaterial {\n\tvec3 diffuseColor;\n\tvec3 specularColor;\n\tfloat specularShininess;\n\tfloat specularStrength;\n};\nvoid RE_Direct_BlinnPhong( const in IncidentLight directLight, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n\treflectedLight.directSpecular += irradiance * BRDF_BlinnPhong( directLight.direction, geometry.viewDir, geometry.normal, material.specularColor, material.specularShininess ) * material.specularStrength;\n}\nvoid RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_BlinnPhong\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_BlinnPhong",lights_physical_fragment:"PhysicalMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );\nvec3 dxy = max( abs( dFdx( geometryNormal ) ), abs( dFdy( geometryNormal ) ) );\nfloat geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );\nmaterial.roughness = max( roughnessFactor, 0.0525 );material.roughness += geometryRoughness;\nmaterial.roughness = min( material.roughness, 1.0 );\n#ifdef IOR\n\tmaterial.ior = ior;\n\t#ifdef SPECULAR\n\t\tfloat specularIntensityFactor = specularIntensity;\n\t\tvec3 specularColorFactor = specularColor;\n\t\t#ifdef USE_SPECULARINTENSITYMAP\n\t\t\tspecularIntensityFactor *= texture2D( specularIntensityMap, vUv ).a;\n\t\t#endif\n\t\t#ifdef USE_SPECULARCOLORMAP\n\t\t\tspecularColorFactor *= texture2D( specularColorMap, vUv ).rgb;\n\t\t#endif\n\t\tmaterial.specularF90 = mix( specularIntensityFactor, 1.0, metalnessFactor );\n\t#else\n\t\tfloat specularIntensityFactor = 1.0;\n\t\tvec3 specularColorFactor = vec3( 1.0 );\n\t\tmaterial.specularF90 = 1.0;\n\t#endif\n\tmaterial.specularColor = mix( min( pow2( ( material.ior - 1.0 ) / ( material.ior + 1.0 ) ) * specularColorFactor, vec3( 1.0 ) ) * specularIntensityFactor, diffuseColor.rgb, metalnessFactor );\n#else\n\tmaterial.specularColor = mix( vec3( 0.04 ), diffuseColor.rgb, metalnessFactor );\n\tmaterial.specularF90 = 1.0;\n#endif\n#ifdef USE_CLEARCOAT\n\tmaterial.clearcoat = clearcoat;\n\tmaterial.clearcoatRoughness = clearcoatRoughness;\n\tmaterial.clearcoatF0 = vec3( 0.04 );\n\tmaterial.clearcoatF90 = 1.0;\n\t#ifdef USE_CLEARCOATMAP\n\t\tmaterial.clearcoat *= texture2D( clearcoatMap, vUv ).x;\n\t#endif\n\t#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\t\tmaterial.clearcoatRoughness *= texture2D( clearcoatRoughnessMap, vUv ).y;\n\t#endif\n\tmaterial.clearcoat = saturate( material.clearcoat );\tmaterial.clearcoatRoughness = max( material.clearcoatRoughness, 0.0525 );\n\tmaterial.clearcoatRoughness += geometryRoughness;\n\tmaterial.clearcoatRoughness = min( material.clearcoatRoughness, 1.0 );\n#endif\n#ifdef USE_IRIDESCENCE\n\tmaterial.iridescence = iridescence;\n\tmaterial.iridescenceIOR = iridescenceIOR;\n\t#ifdef USE_IRIDESCENCEMAP\n\t\tmaterial.iridescence *= texture2D( iridescenceMap, vUv ).r;\n\t#endif\n\t#ifdef USE_IRIDESCENCE_THICKNESSMAP\n\t\tmaterial.iridescenceThickness = (iridescenceThicknessMaximum - iridescenceThicknessMinimum) * texture2D( iridescenceThicknessMap, vUv ).g + iridescenceThicknessMinimum;\n\t#else\n\t\tmaterial.iridescenceThickness = iridescenceThicknessMaximum;\n\t#endif\n#endif\n#ifdef USE_SHEEN\n\tmaterial.sheenColor = sheenColor;\n\t#ifdef USE_SHEENCOLORMAP\n\t\tmaterial.sheenColor *= texture2D( sheenColorMap, vUv ).rgb;\n\t#endif\n\tmaterial.sheenRoughness = clamp( sheenRoughness, 0.07, 1.0 );\n\t#ifdef USE_SHEENROUGHNESSMAP\n\t\tmaterial.sheenRoughness *= texture2D( sheenRoughnessMap, vUv ).a;\n\t#endif\n#endif",lights_physical_pars_fragment:"struct PhysicalMaterial {\n\tvec3 diffuseColor;\n\tfloat roughness;\n\tvec3 specularColor;\n\tfloat specularF90;\n\t#ifdef USE_CLEARCOAT\n\t\tfloat clearcoat;\n\t\tfloat clearcoatRoughness;\n\t\tvec3 clearcoatF0;\n\t\tfloat clearcoatF90;\n\t#endif\n\t#ifdef USE_IRIDESCENCE\n\t\tfloat iridescence;\n\t\tfloat iridescenceIOR;\n\t\tfloat iridescenceThickness;\n\t\tvec3 iridescenceFresnel;\n\t\tvec3 iridescenceF0;\n\t#endif\n\t#ifdef USE_SHEEN\n\t\tvec3 sheenColor;\n\t\tfloat sheenRoughness;\n\t#endif\n\t#ifdef IOR\n\t\tfloat ior;\n\t#endif\n\t#ifdef USE_TRANSMISSION\n\t\tfloat transmission;\n\t\tfloat transmissionAlpha;\n\t\tfloat thickness;\n\t\tfloat attenuationDistance;\n\t\tvec3 attenuationColor;\n\t#endif\n};\nvec3 clearcoatSpecular = vec3( 0.0 );\nvec3 sheenSpecular = vec3( 0.0 );\nfloat IBLSheenBRDF( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tfloat r2 = roughness * roughness;\n\tfloat a = roughness < 0.25 ? -339.2 * r2 + 161.4 * roughness - 25.9 : -8.48 * r2 + 14.3 * roughness - 9.95;\n\tfloat b = roughness < 0.25 ? 44.0 * r2 - 23.7 * roughness + 3.26 : 1.97 * r2 - 3.27 * roughness + 0.72;\n\tfloat DG = exp( a * dotNV + b ) + ( roughness < 0.25 ? 0.0 : 0.1 * ( roughness - 0.25 ) );\n\treturn saturate( DG * RECIPROCAL_PI );\n}\nvec2 DFGApprox( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tconst vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );\n\tconst vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );\n\tvec4 r = roughness * c0 + c1;\n\tfloat a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;\n\tvec2 fab = vec2( - 1.04, 1.04 ) * a004 + r.zw;\n\treturn fab;\n}\nvec3 EnvironmentBRDF( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness ) {\n\tvec2 fab = DFGApprox( normal, viewDir, roughness );\n\treturn specularColor * fab.x + specularF90 * fab.y;\n}\n#ifdef USE_IRIDESCENCE\nvoid computeMultiscatteringIridescence( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float iridescence, const in vec3 iridescenceF0, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {\n#else\nvoid computeMultiscattering( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {\n#endif\n\tvec2 fab = DFGApprox( normal, viewDir, roughness );\n\t#ifdef USE_IRIDESCENCE\n\t\tvec3 Fr = mix( specularColor, iridescenceF0, iridescence );\n\t#else\n\t\tvec3 Fr = specularColor;\n\t#endif\n\tvec3 FssEss = Fr * fab.x + specularF90 * fab.y;\n\tfloat Ess = fab.x + fab.y;\n\tfloat Ems = 1.0 - Ess;\n\tvec3 Favg = Fr + ( 1.0 - Fr ) * 0.047619;\tvec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );\n\tsingleScatter += FssEss;\n\tmultiScatter += Fms * Ems;\n}\n#if NUM_RECT_AREA_LIGHTS > 0\n\tvoid RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\t\tvec3 normal = geometry.normal;\n\t\tvec3 viewDir = geometry.viewDir;\n\t\tvec3 position = geometry.position;\n\t\tvec3 lightPos = rectAreaLight.position;\n\t\tvec3 halfWidth = rectAreaLight.halfWidth;\n\t\tvec3 halfHeight = rectAreaLight.halfHeight;\n\t\tvec3 lightColor = rectAreaLight.color;\n\t\tfloat roughness = material.roughness;\n\t\tvec3 rectCoords[ 4 ];\n\t\trectCoords[ 0 ] = lightPos + halfWidth - halfHeight;\t\trectCoords[ 1 ] = lightPos - halfWidth - halfHeight;\n\t\trectCoords[ 2 ] = lightPos - halfWidth + halfHeight;\n\t\trectCoords[ 3 ] = lightPos + halfWidth + halfHeight;\n\t\tvec2 uv = LTC_Uv( normal, viewDir, roughness );\n\t\tvec4 t1 = texture2D( ltc_1, uv );\n\t\tvec4 t2 = texture2D( ltc_2, uv );\n\t\tmat3 mInv = mat3(\n\t\t\tvec3( t1.x, 0, t1.y ),\n\t\t\tvec3(    0, 1,    0 ),\n\t\t\tvec3( t1.z, 0, t1.w )\n\t\t);\n\t\tvec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );\n\t\treflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );\n\t\treflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );\n\t}\n#endif\nvoid RE_Direct_Physical( const in IncidentLight directLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\t#ifdef USE_CLEARCOAT\n\t\tfloat dotNLcc = saturate( dot( geometry.clearcoatNormal, directLight.direction ) );\n\t\tvec3 ccIrradiance = dotNLcc * directLight.color;\n\t\tclearcoatSpecular += ccIrradiance * BRDF_GGX( directLight.direction, geometry.viewDir, geometry.clearcoatNormal, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );\n\t#endif\n\t#ifdef USE_SHEEN\n\t\tsheenSpecular += irradiance * BRDF_Sheen( directLight.direction, geometry.viewDir, geometry.normal, material.sheenColor, material.sheenRoughness );\n\t#endif\n\t#ifdef USE_IRIDESCENCE\n\t\treflectedLight.directSpecular += irradiance * BRDF_GGX_Iridescence( directLight.direction, geometry.viewDir, geometry.normal, material.specularColor, material.specularF90, material.iridescence, material.iridescenceFresnel, material.roughness );\n\t#else\n\t\treflectedLight.directSpecular += irradiance * BRDF_GGX( directLight.direction, geometry.viewDir, geometry.normal, material.specularColor, material.specularF90, material.roughness );\n\t#endif\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearcoatRadiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {\n\t#ifdef USE_CLEARCOAT\n\t\tclearcoatSpecular += clearcoatRadiance * EnvironmentBRDF( geometry.clearcoatNormal, geometry.viewDir, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );\n\t#endif\n\t#ifdef USE_SHEEN\n\t\tsheenSpecular += irradiance * material.sheenColor * IBLSheenBRDF( geometry.normal, geometry.viewDir, material.sheenRoughness );\n\t#endif\n\tvec3 singleScattering = vec3( 0.0 );\n\tvec3 multiScattering = vec3( 0.0 );\n\tvec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;\n\t#ifdef USE_IRIDESCENCE\n\t\tcomputeMultiscatteringIridescence( geometry.normal, geometry.viewDir, material.specularColor, material.specularF90, material.iridescence, material.iridescenceFresnel, material.roughness, singleScattering, multiScattering );\n\t#else\n\t\tcomputeMultiscattering( geometry.normal, geometry.viewDir, material.specularColor, material.specularF90, material.roughness, singleScattering, multiScattering );\n\t#endif\n\tvec3 totalScattering = singleScattering + multiScattering;\n\tvec3 diffuse = material.diffuseColor * ( 1.0 - max( max( totalScattering.r, totalScattering.g ), totalScattering.b ) );\n\treflectedLight.indirectSpecular += radiance * singleScattering;\n\treflectedLight.indirectSpecular += multiScattering * cosineWeightedIrradiance;\n\treflectedLight.indirectDiffuse += diffuse * cosineWeightedIrradiance;\n}\n#define RE_Direct\t\t\t\tRE_Direct_Physical\n#define RE_Direct_RectArea\t\tRE_Direct_RectArea_Physical\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Physical\n#define RE_IndirectSpecular\t\tRE_IndirectSpecular_Physical\nfloat computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {\n\treturn saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );\n}",lights_fragment_begin:"\nGeometricContext geometry;\ngeometry.position = - vViewPosition;\ngeometry.normal = normal;\ngeometry.viewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );\n#ifdef USE_CLEARCOAT\n\tgeometry.clearcoatNormal = clearcoatNormal;\n#endif\n#ifdef USE_IRIDESCENCE\n\tfloat dotNVi = saturate( dot( normal, geometry.viewDir ) );\n\tif ( material.iridescenceThickness == 0.0 ) {\n\t\tmaterial.iridescence = 0.0;\n\t} else {\n\t\tmaterial.iridescence = saturate( material.iridescence );\n\t}\n\tif ( material.iridescence > 0.0 ) {\n\t\tmaterial.iridescenceFresnel = evalIridescence( 1.0, material.iridescenceIOR, dotNVi, material.iridescenceThickness, material.specularColor );\n\t\tmaterial.iridescenceF0 = Schlick_to_F0( material.iridescenceFresnel, 1.0, dotNVi );\n\t}\n#endif\nIncidentLight directLight;\n#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )\n\tPointLight pointLight;\n\t#if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0\n\tPointLightShadow pointLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tpointLight = pointLights[ i ];\n\t\tgetPointLightInfo( pointLight, geometry, directLight );\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS )\n\t\tpointLightShadow = pointLightShadows[ i ];\n\t\tdirectLight.color *= all( bvec2( directLight.visible, receiveShadow ) ) ? getPointShadow( pointShadowMap[ i ], pointLightShadow.shadowMapSize, pointLightShadow.shadowBias, pointLightShadow.shadowRadius, vPointShadowCoord[ i ], pointLightShadow.shadowCameraNear, pointLightShadow.shadowCameraFar ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )\n\tSpotLight spotLight;\n\tvec4 spotColor;\n\tvec3 spotLightCoord;\n\tbool inSpotLightMap;\n\t#if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0\n\tSpotLightShadow spotLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tspotLight = spotLights[ i ];\n\t\tgetSpotLightInfo( spotLight, geometry, directLight );\n\t\t#if ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )\n\t\t#define SPOT_LIGHT_MAP_INDEX UNROLLED_LOOP_INDEX\n\t\t#elif ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )\n\t\t#define SPOT_LIGHT_MAP_INDEX NUM_SPOT_LIGHT_MAPS\n\t\t#else\n\t\t#define SPOT_LIGHT_MAP_INDEX ( UNROLLED_LOOP_INDEX - NUM_SPOT_LIGHT_SHADOWS + NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )\n\t\t#endif\n\t\t#if ( SPOT_LIGHT_MAP_INDEX < NUM_SPOT_LIGHT_MAPS )\n\t\t\tspotLightCoord = vSpotLightCoord[ i ].xyz / vSpotLightCoord[ i ].w;\n\t\t\tinSpotLightMap = all( lessThan( abs( spotLightCoord * 2. - 1. ), vec3( 1.0 ) ) );\n\t\t\tspotColor = texture2D( spotLightMap[ SPOT_LIGHT_MAP_INDEX ], spotLightCoord.xy );\n\t\t\tdirectLight.color = inSpotLightMap ? directLight.color * spotColor.rgb : directLight.color;\n\t\t#endif\n\t\t#undef SPOT_LIGHT_MAP_INDEX\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )\n\t\tspotLightShadow = spotLightShadows[ i ];\n\t\tdirectLight.color *= all( bvec2( directLight.visible, receiveShadow ) ) ? getShadow( spotShadowMap[ i ], spotLightShadow.shadowMapSize, spotLightShadow.shadowBias, spotLightShadow.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )\n\tDirectionalLight directionalLight;\n\t#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0\n\tDirectionalLightShadow directionalLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tdirectionalLight = directionalLights[ i ];\n\t\tgetDirectionalLightInfo( directionalLight, geometry, directLight );\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )\n\t\tdirectionalLightShadow = directionalLightShadows[ i ];\n\t\tdirectLight.color *= all( bvec2( directLight.visible, receiveShadow ) ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )\n\tRectAreaLight rectAreaLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {\n\t\trectAreaLight = rectAreaLights[ i ];\n\t\tRE_Direct_RectArea( rectAreaLight, geometry, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if defined( RE_IndirectDiffuse )\n\tvec3 iblIrradiance = vec3( 0.0 );\n\tvec3 irradiance = getAmbientLightIrradiance( ambientLightColor );\n\tirradiance += getLightProbeIrradiance( lightProbe, geometry.normal );\n\t#if ( NUM_HEMI_LIGHTS > 0 )\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {\n\t\t\tirradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry.normal );\n\t\t}\n\t\t#pragma unroll_loop_end\n\t#endif\n#endif\n#if defined( RE_IndirectSpecular )\n\tvec3 radiance = vec3( 0.0 );\n\tvec3 clearcoatRadiance = vec3( 0.0 );\n#endif",lights_fragment_maps:"#if defined( RE_IndirectDiffuse )\n\t#ifdef USE_LIGHTMAP\n\t\tvec4 lightMapTexel = texture2D( lightMap, vUv2 );\n\t\tvec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;\n\t\tirradiance += lightMapIrradiance;\n\t#endif\n\t#if defined( USE_ENVMAP ) && defined( STANDARD ) && defined( ENVMAP_TYPE_CUBE_UV )\n\t\tiblIrradiance += getIBLIrradiance( geometry.normal );\n\t#endif\n#endif\n#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )\n\tradiance += getIBLRadiance( geometry.viewDir, geometry.normal, material.roughness );\n\t#ifdef USE_CLEARCOAT\n\t\tclearcoatRadiance += getIBLRadiance( geometry.viewDir, geometry.clearcoatNormal, material.clearcoatRoughness );\n\t#endif\n#endif",lights_fragment_end:"#if defined( RE_IndirectDiffuse )\n\tRE_IndirectDiffuse( irradiance, geometry, material, reflectedLight );\n#endif\n#if defined( RE_IndirectSpecular )\n\tRE_IndirectSpecular( radiance, iblIrradiance, clearcoatRadiance, geometry, material, reflectedLight );\n#endif",logdepthbuf_fragment:"#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )\n\tgl_FragDepthEXT = vIsPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;\n#endif",logdepthbuf_pars_fragment:"#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )\n\tuniform float logDepthBufFC;\n\tvarying float vFragDepth;\n\tvarying float vIsPerspective;\n#endif",logdepthbuf_pars_vertex:"#ifdef USE_LOGDEPTHBUF\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tvarying float vFragDepth;\n\t\tvarying float vIsPerspective;\n\t#else\n\t\tuniform float logDepthBufFC;\n\t#endif\n#endif",logdepthbuf_vertex:"#ifdef USE_LOGDEPTHBUF\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tvFragDepth = 1.0 + gl_Position.w;\n\t\tvIsPerspective = float( isPerspectiveMatrix( projectionMatrix ) );\n\t#else\n\t\tif ( isPerspectiveMatrix( projectionMatrix ) ) {\n\t\t\tgl_Position.z = log2( max( EPSILON, gl_Position.w + 1.0 ) ) * logDepthBufFC - 1.0;\n\t\t\tgl_Position.z *= gl_Position.w;\n\t\t}\n\t#endif\n#endif",map_fragment:"#ifdef USE_MAP\n\tvec4 sampledDiffuseColor = texture2D( map, vUv );\n\t#ifdef DECODE_VIDEO_TEXTURE\n\t\tsampledDiffuseColor = vec4( mix( pow( sampledDiffuseColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), sampledDiffuseColor.rgb * 0.0773993808, vec3( lessThanEqual( sampledDiffuseColor.rgb, vec3( 0.04045 ) ) ) ), sampledDiffuseColor.w );\n\t#endif\n\tdiffuseColor *= sampledDiffuseColor;\n#endif",map_pars_fragment:"#ifdef USE_MAP\n\tuniform sampler2D map;\n#endif",map_particle_fragment:"#if defined( USE_MAP ) || defined( USE_ALPHAMAP )\n\tvec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;\n#endif\n#ifdef USE_MAP\n\tdiffuseColor *= texture2D( map, uv );\n#endif\n#ifdef USE_ALPHAMAP\n\tdiffuseColor.a *= texture2D( alphaMap, uv ).g;\n#endif",map_particle_pars_fragment:"#if defined( USE_MAP ) || defined( USE_ALPHAMAP )\n\tuniform mat3 uvTransform;\n#endif\n#ifdef USE_MAP\n\tuniform sampler2D map;\n#endif\n#ifdef USE_ALPHAMAP\n\tuniform sampler2D alphaMap;\n#endif",metalnessmap_fragment:"float metalnessFactor = metalness;\n#ifdef USE_METALNESSMAP\n\tvec4 texelMetalness = texture2D( metalnessMap, vUv );\n\tmetalnessFactor *= texelMetalness.b;\n#endif",metalnessmap_pars_fragment:"#ifdef USE_METALNESSMAP\n\tuniform sampler2D metalnessMap;\n#endif",morphcolor_vertex:"#if defined( USE_MORPHCOLORS ) && defined( MORPHTARGETS_TEXTURE )\n\tvColor *= morphTargetBaseInfluence;\n\tfor ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {\n\t\t#if defined( USE_COLOR_ALPHA )\n\t\t\tif ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ) * morphTargetInfluences[ i ];\n\t\t#elif defined( USE_COLOR )\n\t\t\tif ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ).rgb * morphTargetInfluences[ i ];\n\t\t#endif\n\t}\n#endif",morphnormal_vertex:"#ifdef USE_MORPHNORMALS\n\tobjectNormal *= morphTargetBaseInfluence;\n\t#ifdef MORPHTARGETS_TEXTURE\n\t\tfor ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {\n\t\t\tif ( morphTargetInfluences[ i ] != 0.0 ) objectNormal += getMorph( gl_VertexID, i, 1 ).xyz * morphTargetInfluences[ i ];\n\t\t}\n\t#else\n\t\tobjectNormal += morphNormal0 * morphTargetInfluences[ 0 ];\n\t\tobjectNormal += morphNormal1 * morphTargetInfluences[ 1 ];\n\t\tobjectNormal += morphNormal2 * morphTargetInfluences[ 2 ];\n\t\tobjectNormal += morphNormal3 * morphTargetInfluences[ 3 ];\n\t#endif\n#endif",morphtarget_pars_vertex:"#ifdef USE_MORPHTARGETS\n\tuniform float morphTargetBaseInfluence;\n\t#ifdef MORPHTARGETS_TEXTURE\n\t\tuniform float morphTargetInfluences[ MORPHTARGETS_COUNT ];\n\t\tuniform sampler2DArray morphTargetsTexture;\n\t\tuniform ivec2 morphTargetsTextureSize;\n\t\tvec4 getMorph( const in int vertexIndex, const in int morphTargetIndex, const in int offset ) {\n\t\t\tint texelIndex = vertexIndex * MORPHTARGETS_TEXTURE_STRIDE + offset;\n\t\t\tint y = texelIndex / morphTargetsTextureSize.x;\n\t\t\tint x = texelIndex - y * morphTargetsTextureSize.x;\n\t\t\tivec3 morphUV = ivec3( x, y, morphTargetIndex );\n\t\t\treturn texelFetch( morphTargetsTexture, morphUV, 0 );\n\t\t}\n\t#else\n\t\t#ifndef USE_MORPHNORMALS\n\t\t\tuniform float morphTargetInfluences[ 8 ];\n\t\t#else\n\t\t\tuniform float morphTargetInfluences[ 4 ];\n\t\t#endif\n\t#endif\n#endif",morphtarget_vertex:"#ifdef USE_MORPHTARGETS\n\ttransformed *= morphTargetBaseInfluence;\n\t#ifdef MORPHTARGETS_TEXTURE\n\t\tfor ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {\n\t\t\tif ( morphTargetInfluences[ i ] != 0.0 ) transformed += getMorph( gl_VertexID, i, 0 ).xyz * morphTargetInfluences[ i ];\n\t\t}\n\t#else\n\t\ttransformed += morphTarget0 * morphTargetInfluences[ 0 ];\n\t\ttransformed += morphTarget1 * morphTargetInfluences[ 1 ];\n\t\ttransformed += morphTarget2 * morphTargetInfluences[ 2 ];\n\t\ttransformed += morphTarget3 * morphTargetInfluences[ 3 ];\n\t\t#ifndef USE_MORPHNORMALS\n\t\t\ttransformed += morphTarget4 * morphTargetInfluences[ 4 ];\n\t\t\ttransformed += morphTarget5 * morphTargetInfluences[ 5 ];\n\t\t\ttransformed += morphTarget6 * morphTargetInfluences[ 6 ];\n\t\t\ttransformed += morphTarget7 * morphTargetInfluences[ 7 ];\n\t\t#endif\n\t#endif\n#endif",normal_fragment_begin:"float faceDirection = gl_FrontFacing ? 1.0 : - 1.0;\n#ifdef FLAT_SHADED\n\tvec3 fdx = dFdx( vViewPosition );\n\tvec3 fdy = dFdy( vViewPosition );\n\tvec3 normal = normalize( cross( fdx, fdy ) );\n#else\n\tvec3 normal = normalize( vNormal );\n\t#ifdef DOUBLE_SIDED\n\t\tnormal = normal * faceDirection;\n\t#endif\n\t#ifdef USE_TANGENT\n\t\tvec3 tangent = normalize( vTangent );\n\t\tvec3 bitangent = normalize( vBitangent );\n\t\t#ifdef DOUBLE_SIDED\n\t\t\ttangent = tangent * faceDirection;\n\t\t\tbitangent = bitangent * faceDirection;\n\t\t#endif\n\t\t#if defined( TANGENTSPACE_NORMALMAP ) || defined( USE_CLEARCOAT_NORMALMAP )\n\t\t\tmat3 vTBN = mat3( tangent, bitangent, normal );\n\t\t#endif\n\t#endif\n#endif\nvec3 geometryNormal = normal;",normal_fragment_maps:"#ifdef OBJECTSPACE_NORMALMAP\n\tnormal = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;\n\t#ifdef FLIP_SIDED\n\t\tnormal = - normal;\n\t#endif\n\t#ifdef DOUBLE_SIDED\n\t\tnormal = normal * faceDirection;\n\t#endif\n\tnormal = normalize( normalMatrix * normal );\n#elif defined( TANGENTSPACE_NORMALMAP )\n\tvec3 mapN = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;\n\tmapN.xy *= normalScale;\n\t#ifdef USE_TANGENT\n\t\tnormal = normalize( vTBN * mapN );\n\t#else\n\t\tnormal = perturbNormal2Arb( - vViewPosition, normal, mapN, faceDirection );\n\t#endif\n#elif defined( USE_BUMPMAP )\n\tnormal = perturbNormalArb( - vViewPosition, normal, dHdxy_fwd(), faceDirection );\n#endif",normal_pars_fragment:"#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n\t#ifdef USE_TANGENT\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\t#endif\n#endif",normal_pars_vertex:"#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n\t#ifdef USE_TANGENT\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\t#endif\n#endif",normal_vertex:"#ifndef FLAT_SHADED\n\tvNormal = normalize( transformedNormal );\n\t#ifdef USE_TANGENT\n\t\tvTangent = normalize( transformedTangent );\n\t\tvBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );\n\t#endif\n#endif",normalmap_pars_fragment:"#ifdef USE_NORMALMAP\n\tuniform sampler2D normalMap;\n\tuniform vec2 normalScale;\n#endif\n#ifdef OBJECTSPACE_NORMALMAP\n\tuniform mat3 normalMatrix;\n#endif\n#if ! defined ( USE_TANGENT ) && ( defined ( TANGENTSPACE_NORMALMAP ) || defined ( USE_CLEARCOAT_NORMALMAP ) )\n\tvec3 perturbNormal2Arb( vec3 eye_pos, vec3 surf_norm, vec3 mapN, float faceDirection ) {\n\t\tvec3 q0 = dFdx( eye_pos.xyz );\n\t\tvec3 q1 = dFdy( eye_pos.xyz );\n\t\tvec2 st0 = dFdx( vUv.st );\n\t\tvec2 st1 = dFdy( vUv.st );\n\t\tvec3 N = surf_norm;\n\t\tvec3 q1perp = cross( q1, N );\n\t\tvec3 q0perp = cross( N, q0 );\n\t\tvec3 T = q1perp * st0.x + q0perp * st1.x;\n\t\tvec3 B = q1perp * st0.y + q0perp * st1.y;\n\t\tfloat det = max( dot( T, T ), dot( B, B ) );\n\t\tfloat scale = ( det == 0.0 ) ? 0.0 : faceDirection * inversesqrt( det );\n\t\treturn normalize( T * ( mapN.x * scale ) + B * ( mapN.y * scale ) + N * mapN.z );\n\t}\n#endif",clearcoat_normal_fragment_begin:"#ifdef USE_CLEARCOAT\n\tvec3 clearcoatNormal = geometryNormal;\n#endif",clearcoat_normal_fragment_maps:"#ifdef USE_CLEARCOAT_NORMALMAP\n\tvec3 clearcoatMapN = texture2D( clearcoatNormalMap, vUv ).xyz * 2.0 - 1.0;\n\tclearcoatMapN.xy *= clearcoatNormalScale;\n\t#ifdef USE_TANGENT\n\t\tclearcoatNormal = normalize( vTBN * clearcoatMapN );\n\t#else\n\t\tclearcoatNormal = perturbNormal2Arb( - vViewPosition, clearcoatNormal, clearcoatMapN, faceDirection );\n\t#endif\n#endif",clearcoat_pars_fragment:"#ifdef USE_CLEARCOATMAP\n\tuniform sampler2D clearcoatMap;\n#endif\n#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\tuniform sampler2D clearcoatRoughnessMap;\n#endif\n#ifdef USE_CLEARCOAT_NORMALMAP\n\tuniform sampler2D clearcoatNormalMap;\n\tuniform vec2 clearcoatNormalScale;\n#endif",iridescence_pars_fragment:"#ifdef USE_IRIDESCENCEMAP\n\tuniform sampler2D iridescenceMap;\n#endif\n#ifdef USE_IRIDESCENCE_THICKNESSMAP\n\tuniform sampler2D iridescenceThicknessMap;\n#endif",output_fragment:"#ifdef OPAQUE\ndiffuseColor.a = 1.0;\n#endif\n#ifdef USE_TRANSMISSION\ndiffuseColor.a *= material.transmissionAlpha + 0.1;\n#endif\ngl_FragColor = vec4( outgoingLight, diffuseColor.a );",packing:"vec3 packNormalToRGB( const in vec3 normal ) {\n\treturn normalize( normal ) * 0.5 + 0.5;\n}\nvec3 unpackRGBToNormal( const in vec3 rgb ) {\n\treturn 2.0 * rgb.xyz - 1.0;\n}\nconst float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;\nconst vec3 PackFactors = vec3( 256. * 256. * 256., 256. * 256., 256. );\nconst vec4 UnpackFactors = UnpackDownscale / vec4( PackFactors, 1. );\nconst float ShiftRight8 = 1. / 256.;\nvec4 packDepthToRGBA( const in float v ) {\n\tvec4 r = vec4( fract( v * PackFactors ), v );\n\tr.yzw -= r.xyz * ShiftRight8;\treturn r * PackUpscale;\n}\nfloat unpackRGBAToDepth( const in vec4 v ) {\n\treturn dot( v, UnpackFactors );\n}\nvec2 packDepthToRG( in highp float v ) {\n\treturn packDepthToRGBA( v ).yx;\n}\nfloat unpackRGToDepth( const in highp vec2 v ) {\n\treturn unpackRGBAToDepth( vec4( v.xy, 0.0, 0.0 ) );\n}\nvec4 pack2HalfToRGBA( vec2 v ) {\n\tvec4 r = vec4( v.x, fract( v.x * 255.0 ), v.y, fract( v.y * 255.0 ) );\n\treturn vec4( r.x - r.y / 255.0, r.y, r.z - r.w / 255.0, r.w );\n}\nvec2 unpackRGBATo2Half( vec4 v ) {\n\treturn vec2( v.x + ( v.y / 255.0 ), v.z + ( v.w / 255.0 ) );\n}\nfloat viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {\n\treturn ( viewZ + near ) / ( near - far );\n}\nfloat orthographicDepthToViewZ( const in float linearClipZ, const in float near, const in float far ) {\n\treturn linearClipZ * ( near - far ) - near;\n}\nfloat viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {\n\treturn ( ( near + viewZ ) * far ) / ( ( far - near ) * viewZ );\n}\nfloat perspectiveDepthToViewZ( const in float invClipZ, const in float near, const in float far ) {\n\treturn ( near * far ) / ( ( far - near ) * invClipZ - far );\n}",premultiplied_alpha_fragment:"#ifdef PREMULTIPLIED_ALPHA\n\tgl_FragColor.rgb *= gl_FragColor.a;\n#endif",project_vertex:"vec4 mvPosition = vec4( transformed, 1.0 );\n#ifdef USE_INSTANCING\n\tmvPosition = instanceMatrix * mvPosition;\n#endif\nmvPosition = modelViewMatrix * mvPosition;\ngl_Position = projectionMatrix * mvPosition;",dithering_fragment:"#ifdef DITHERING\n\tgl_FragColor.rgb = dithering( gl_FragColor.rgb );\n#endif",dithering_pars_fragment:"#ifdef DITHERING\n\tvec3 dithering( vec3 color ) {\n\t\tfloat grid_position = rand( gl_FragCoord.xy );\n\t\tvec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );\n\t\tdither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );\n\t\treturn color + dither_shift_RGB;\n\t}\n#endif",roughnessmap_fragment:"float roughnessFactor = roughness;\n#ifdef USE_ROUGHNESSMAP\n\tvec4 texelRoughness = texture2D( roughnessMap, vUv );\n\troughnessFactor *= texelRoughness.g;\n#endif",roughnessmap_pars_fragment:"#ifdef USE_ROUGHNESSMAP\n\tuniform sampler2D roughnessMap;\n#endif",shadowmap_pars_fragment:"#if NUM_SPOT_LIGHT_COORDS > 0\n  varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];\n#endif\n#if NUM_SPOT_LIGHT_MAPS > 0\n  uniform sampler2D spotLightMap[ NUM_SPOT_LIGHT_MAPS ];\n#endif\n#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tstruct DirectionalLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];\n\t\tstruct SpotLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tstruct PointLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t\tfloat shadowCameraNear;\n\t\t\tfloat shadowCameraFar;\n\t\t};\n\t\tuniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];\n\t#endif\n\tfloat texture2DCompare( sampler2D depths, vec2 uv, float compare ) {\n\t\treturn step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );\n\t}\n\tvec2 texture2DDistribution( sampler2D shadow, vec2 uv ) {\n\t\treturn unpackRGBATo2Half( texture2D( shadow, uv ) );\n\t}\n\tfloat VSMShadow (sampler2D shadow, vec2 uv, float compare ){\n\t\tfloat occlusion = 1.0;\n\t\tvec2 distribution = texture2DDistribution( shadow, uv );\n\t\tfloat hard_shadow = step( compare , distribution.x );\n\t\tif (hard_shadow != 1.0 ) {\n\t\t\tfloat distance = compare - distribution.x ;\n\t\t\tfloat variance = max( 0.00000, distribution.y * distribution.y );\n\t\t\tfloat softness_probability = variance / (variance + distance * distance );\t\t\tsoftness_probability = clamp( ( softness_probability - 0.3 ) / ( 0.95 - 0.3 ), 0.0, 1.0 );\t\t\tocclusion = clamp( max( hard_shadow, softness_probability ), 0.0, 1.0 );\n\t\t}\n\t\treturn occlusion;\n\t}\n\tfloat getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord ) {\n\t\tfloat shadow = 1.0;\n\t\tshadowCoord.xyz /= shadowCoord.w;\n\t\tshadowCoord.z += shadowBias;\n\t\tbvec4 inFrustumVec = bvec4 ( shadowCoord.x >= 0.0, shadowCoord.x <= 1.0, shadowCoord.y >= 0.0, shadowCoord.y <= 1.0 );\n\t\tbool inFrustum = all( inFrustumVec );\n\t\tbvec2 frustumTestVec = bvec2( inFrustum, shadowCoord.z <= 1.0 );\n\t\tbool frustumTest = all( frustumTestVec );\n\t\tif ( frustumTest ) {\n\t\t#if defined( SHADOWMAP_TYPE_PCF )\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n\t\t\tfloat dx0 = - texelSize.x * shadowRadius;\n\t\t\tfloat dy0 = - texelSize.y * shadowRadius;\n\t\t\tfloat dx1 = + texelSize.x * shadowRadius;\n\t\t\tfloat dy1 = + texelSize.y * shadowRadius;\n\t\t\tfloat dx2 = dx0 / 2.0;\n\t\t\tfloat dy2 = dy0 / 2.0;\n\t\t\tfloat dx3 = dx1 / 2.0;\n\t\t\tfloat dy3 = dy1 / 2.0;\n\t\t\tshadow = (\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )\n\t\t\t) * ( 1.0 / 17.0 );\n\t\t#elif defined( SHADOWMAP_TYPE_PCF_SOFT )\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n\t\t\tfloat dx = texelSize.x;\n\t\t\tfloat dy = texelSize.y;\n\t\t\tvec2 uv = shadowCoord.xy;\n\t\t\tvec2 f = fract( uv * shadowMapSize + 0.5 );\n\t\t\tuv -= f * texelSize;\n\t\t\tshadow = (\n\t\t\t\ttexture2DCompare( shadowMap, uv, shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + vec2( dx, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + vec2( 0.0, dy ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + texelSize, shadowCoord.z ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( -dx, 0.0 ), shadowCoord.z ),\n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 0.0 ), shadowCoord.z ),\n\t\t\t\t\t f.x ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( -dx, dy ), shadowCoord.z ),\n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, dy ), shadowCoord.z ),\n\t\t\t\t\t f.x ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( 0.0, -dy ), shadowCoord.z ),\n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 0.0, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t f.y ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( dx, -dy ), shadowCoord.z ),\n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( dx, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t f.y ) +\n\t\t\t\tmix( mix( texture2DCompare( shadowMap, uv + vec2( -dx, -dy ), shadowCoord.z ),\n\t\t\t\t\t\t  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, -dy ), shadowCoord.z ),\n\t\t\t\t\t\t  f.x ),\n\t\t\t\t\t mix( texture2DCompare( shadowMap, uv + vec2( -dx, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t\t  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t\t  f.x ),\n\t\t\t\t\t f.y )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#elif defined( SHADOWMAP_TYPE_VSM )\n\t\t\tshadow = VSMShadow( shadowMap, shadowCoord.xy, shadowCoord.z );\n\t\t#else\n\t\t\tshadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );\n\t\t#endif\n\t\t}\n\t\treturn shadow;\n\t}\n\tvec2 cubeToUV( vec3 v, float texelSizeY ) {\n\t\tvec3 absV = abs( v );\n\t\tfloat scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );\n\t\tabsV *= scaleToCube;\n\t\tv *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );\n\t\tvec2 planar = v.xy;\n\t\tfloat almostATexel = 1.5 * texelSizeY;\n\t\tfloat almostOne = 1.0 - almostATexel;\n\t\tif ( absV.z >= almostOne ) {\n\t\t\tif ( v.z > 0.0 )\n\t\t\t\tplanar.x = 4.0 - v.x;\n\t\t} else if ( absV.x >= almostOne ) {\n\t\t\tfloat signX = sign( v.x );\n\t\t\tplanar.x = v.z * signX + 2.0 * signX;\n\t\t} else if ( absV.y >= almostOne ) {\n\t\t\tfloat signY = sign( v.y );\n\t\t\tplanar.x = v.x + 2.0 * signY + 2.0;\n\t\t\tplanar.y = v.z * signY - 2.0;\n\t\t}\n\t\treturn vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );\n\t}\n\tfloat getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {\n\t\tvec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );\n\t\tvec3 lightToPosition = shadowCoord.xyz;\n\t\tfloat dp = ( length( lightToPosition ) - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );\t\tdp += shadowBias;\n\t\tvec3 bd3D = normalize( lightToPosition );\n\t\t#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT ) || defined( SHADOWMAP_TYPE_VSM )\n\t\t\tvec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;\n\t\t\treturn (\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#else\n\t\t\treturn texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );\n\t\t#endif\n\t}\n#endif",shadowmap_pars_vertex:"#if NUM_SPOT_LIGHT_COORDS > 0\n  uniform mat4 spotLightMatrix[ NUM_SPOT_LIGHT_COORDS ];\n  varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];\n#endif\n#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t\tuniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tstruct DirectionalLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\t\tstruct SpotLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t\tuniform mat4 pointShadowMatrix[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tstruct PointLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t\tfloat shadowCameraNear;\n\t\t\tfloat shadowCameraFar;\n\t\t};\n\t\tuniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];\n\t#endif\n#endif",shadowmap_vertex:"#if defined( USE_SHADOWMAP ) || ( NUM_SPOT_LIGHT_COORDS > 0 )\n\t#if NUM_DIR_LIGHT_SHADOWS > 0 || NUM_SPOT_LIGHT_COORDS > 0 || NUM_POINT_LIGHT_SHADOWS > 0\n\t\tvec3 shadowWorldNormal = inverseTransformDirection( transformedNormal, viewMatrix );\n\t\tvec4 shadowWorldPosition;\n\t#endif\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {\n\t\tshadowWorldPosition = worldPosition + vec4( shadowWorldNormal * directionalLightShadows[ i ].shadowNormalBias, 0 );\n\t\tvDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * shadowWorldPosition;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_SPOT_LIGHT_COORDS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHT_COORDS; i ++ ) {\n\t\tshadowWorldPosition = worldPosition;\n\t\t#if ( defined( USE_SHADOWMAP ) && UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )\n\t\t\tshadowWorldPosition.xyz += shadowWorldNormal * spotLightShadows[ i ].shadowNormalBias;\n\t\t#endif\n\t\tvSpotLightCoord[ i ] = spotLightMatrix[ i ] * shadowWorldPosition;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {\n\t\tshadowWorldPosition = worldPosition + vec4( shadowWorldNormal * pointLightShadows[ i ].shadowNormalBias, 0 );\n\t\tvPointShadowCoord[ i ] = pointShadowMatrix[ i ] * shadowWorldPosition;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n#endif",shadowmask_pars_fragment:"float getShadowMask() {\n\tfloat shadow = 1.0;\n\t#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\tDirectionalLightShadow directionalLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {\n\t\tdirectionalLight = directionalLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\tSpotLightShadow spotLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {\n\t\tspotLight = spotLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\tPointLightShadow pointLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {\n\t\tpointLight = pointLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#endif\n\treturn shadow;\n}",skinbase_vertex:"#ifdef USE_SKINNING\n\tmat4 boneMatX = getBoneMatrix( skinIndex.x );\n\tmat4 boneMatY = getBoneMatrix( skinIndex.y );\n\tmat4 boneMatZ = getBoneMatrix( skinIndex.z );\n\tmat4 boneMatW = getBoneMatrix( skinIndex.w );\n#endif",skinning_pars_vertex:"#ifdef USE_SKINNING\n\tuniform mat4 bindMatrix;\n\tuniform mat4 bindMatrixInverse;\n\tuniform highp sampler2D boneTexture;\n\tuniform int boneTextureSize;\n\tmat4 getBoneMatrix( const in float i ) {\n\t\tfloat j = i * 4.0;\n\t\tfloat x = mod( j, float( boneTextureSize ) );\n\t\tfloat y = floor( j / float( boneTextureSize ) );\n\t\tfloat dx = 1.0 / float( boneTextureSize );\n\t\tfloat dy = 1.0 / float( boneTextureSize );\n\t\ty = dy * ( y + 0.5 );\n\t\tvec4 v1 = texture2D( boneTexture, vec2( dx * ( x + 0.5 ), y ) );\n\t\tvec4 v2 = texture2D( boneTexture, vec2( dx * ( x + 1.5 ), y ) );\n\t\tvec4 v3 = texture2D( boneTexture, vec2( dx * ( x + 2.5 ), y ) );\n\t\tvec4 v4 = texture2D( boneTexture, vec2( dx * ( x + 3.5 ), y ) );\n\t\tmat4 bone = mat4( v1, v2, v3, v4 );\n\t\treturn bone;\n\t}\n#endif",skinning_vertex:"#ifdef USE_SKINNING\n\tvec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );\n\tvec4 skinned = vec4( 0.0 );\n\tskinned += boneMatX * skinVertex * skinWeight.x;\n\tskinned += boneMatY * skinVertex * skinWeight.y;\n\tskinned += boneMatZ * skinVertex * skinWeight.z;\n\tskinned += boneMatW * skinVertex * skinWeight.w;\n\ttransformed = ( bindMatrixInverse * skinned ).xyz;\n#endif",skinnormal_vertex:"#ifdef USE_SKINNING\n\tmat4 skinMatrix = mat4( 0.0 );\n\tskinMatrix += skinWeight.x * boneMatX;\n\tskinMatrix += skinWeight.y * boneMatY;\n\tskinMatrix += skinWeight.z * boneMatZ;\n\tskinMatrix += skinWeight.w * boneMatW;\n\tskinMatrix = bindMatrixInverse * skinMatrix * bindMatrix;\n\tobjectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;\n\t#ifdef USE_TANGENT\n\t\tobjectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;\n\t#endif\n#endif",specularmap_fragment:"float specularStrength;\n#ifdef USE_SPECULARMAP\n\tvec4 texelSpecular = texture2D( specularMap, vUv );\n\tspecularStrength = texelSpecular.r;\n#else\n\tspecularStrength = 1.0;\n#endif",specularmap_pars_fragment:"#ifdef USE_SPECULARMAP\n\tuniform sampler2D specularMap;\n#endif",tonemapping_fragment:"#if defined( TONE_MAPPING )\n\tgl_FragColor.rgb = toneMapping( gl_FragColor.rgb );\n#endif",tonemapping_pars_fragment:"#ifndef saturate\n#define saturate( a ) clamp( a, 0.0, 1.0 )\n#endif\nuniform float toneMappingExposure;\nvec3 LinearToneMapping( vec3 color ) {\n\treturn toneMappingExposure * color;\n}\nvec3 ReinhardToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\treturn saturate( color / ( vec3( 1.0 ) + color ) );\n}\nvec3 OptimizedCineonToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\tcolor = max( vec3( 0.0 ), color - 0.004 );\n\treturn pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );\n}\nvec3 RRTAndODTFit( vec3 v ) {\n\tvec3 a = v * ( v + 0.0245786 ) - 0.000090537;\n\tvec3 b = v * ( 0.983729 * v + 0.4329510 ) + 0.238081;\n\treturn a / b;\n}\nvec3 ACESFilmicToneMapping( vec3 color ) {\n\tconst mat3 ACESInputMat = mat3(\n\t\tvec3( 0.59719, 0.07600, 0.02840 ),\t\tvec3( 0.35458, 0.90834, 0.13383 ),\n\t\tvec3( 0.04823, 0.01566, 0.83777 )\n\t);\n\tconst mat3 ACESOutputMat = mat3(\n\t\tvec3(  1.60475, -0.10208, -0.00327 ),\t\tvec3( -0.53108,  1.10813, -0.07276 ),\n\t\tvec3( -0.07367, -0.00605,  1.07602 )\n\t);\n\tcolor *= toneMappingExposure / 0.6;\n\tcolor = ACESInputMat * color;\n\tcolor = RRTAndODTFit( color );\n\tcolor = ACESOutputMat * color;\n\treturn saturate( color );\n}\nvec3 CustomToneMapping( vec3 color ) { return color; }",transmission_fragment:"#ifdef USE_TRANSMISSION\n\tmaterial.transmission = transmission;\n\tmaterial.transmissionAlpha = 1.0;\n\tmaterial.thickness = thickness;\n\tmaterial.attenuationDistance = attenuationDistance;\n\tmaterial.attenuationColor = attenuationColor;\n\t#ifdef USE_TRANSMISSIONMAP\n\t\tmaterial.transmission *= texture2D( transmissionMap, vUv ).r;\n\t#endif\n\t#ifdef USE_THICKNESSMAP\n\t\tmaterial.thickness *= texture2D( thicknessMap, vUv ).g;\n\t#endif\n\tvec3 pos = vWorldPosition;\n\tvec3 v = normalize( cameraPosition - pos );\n\tvec3 n = inverseTransformDirection( normal, viewMatrix );\n\tvec4 transmission = getIBLVolumeRefraction(\n\t\tn, v, material.roughness, material.diffuseColor, material.specularColor, material.specularF90,\n\t\tpos, modelMatrix, viewMatrix, projectionMatrix, material.ior, material.thickness,\n\t\tmaterial.attenuationColor, material.attenuationDistance );\n\tmaterial.transmissionAlpha = mix( material.transmissionAlpha, transmission.a, material.transmission );\n\ttotalDiffuse = mix( totalDiffuse, transmission.rgb, material.transmission );\n#endif",transmission_pars_fragment:"#ifdef USE_TRANSMISSION\n\tuniform float transmission;\n\tuniform float thickness;\n\tuniform float attenuationDistance;\n\tuniform vec3 attenuationColor;\n\t#ifdef USE_TRANSMISSIONMAP\n\t\tuniform sampler2D transmissionMap;\n\t#endif\n\t#ifdef USE_THICKNESSMAP\n\t\tuniform sampler2D thicknessMap;\n\t#endif\n\tuniform vec2 transmissionSamplerSize;\n\tuniform sampler2D transmissionSamplerMap;\n\tuniform mat4 modelMatrix;\n\tuniform mat4 projectionMatrix;\n\tvarying vec3 vWorldPosition;\n\tvec3 getVolumeTransmissionRay( const in vec3 n, const in vec3 v, const in float thickness, const in float ior, const in mat4 modelMatrix ) {\n\t\tvec3 refractionVector = refract( - v, normalize( n ), 1.0 / ior );\n\t\tvec3 modelScale;\n\t\tmodelScale.x = length( vec3( modelMatrix[ 0 ].xyz ) );\n\t\tmodelScale.y = length( vec3( modelMatrix[ 1 ].xyz ) );\n\t\tmodelScale.z = length( vec3( modelMatrix[ 2 ].xyz ) );\n\t\treturn normalize( refractionVector ) * thickness * modelScale;\n\t}\n\tfloat applyIorToRoughness( const in float roughness, const in float ior ) {\n\t\treturn roughness * clamp( ior * 2.0 - 2.0, 0.0, 1.0 );\n\t}\n\tvec4 getTransmissionSample( const in vec2 fragCoord, const in float roughness, const in float ior ) {\n\t\tfloat framebufferLod = log2( transmissionSamplerSize.x ) * applyIorToRoughness( roughness, ior );\n\t\t#ifdef texture2DLodEXT\n\t\t\treturn texture2DLodEXT( transmissionSamplerMap, fragCoord.xy, framebufferLod );\n\t\t#else\n\t\t\treturn texture2D( transmissionSamplerMap, fragCoord.xy, framebufferLod );\n\t\t#endif\n\t}\n\tvec3 applyVolumeAttenuation( const in vec3 radiance, const in float transmissionDistance, const in vec3 attenuationColor, const in float attenuationDistance ) {\n\t\tif ( isinf( attenuationDistance ) ) {\n\t\t\treturn radiance;\n\t\t} else {\n\t\t\tvec3 attenuationCoefficient = -log( attenuationColor ) / attenuationDistance;\n\t\t\tvec3 transmittance = exp( - attenuationCoefficient * transmissionDistance );\t\t\treturn transmittance * radiance;\n\t\t}\n\t}\n\tvec4 getIBLVolumeRefraction( const in vec3 n, const in vec3 v, const in float roughness, const in vec3 diffuseColor,\n\t\tconst in vec3 specularColor, const in float specularF90, const in vec3 position, const in mat4 modelMatrix,\n\t\tconst in mat4 viewMatrix, const in mat4 projMatrix, const in float ior, const in float thickness,\n\t\tconst in vec3 attenuationColor, const in float attenuationDistance ) {\n\t\tvec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, ior, modelMatrix );\n\t\tvec3 refractedRayExit = position + transmissionRay;\n\t\tvec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );\n\t\tvec2 refractionCoords = ndcPos.xy / ndcPos.w;\n\t\trefractionCoords += 1.0;\n\t\trefractionCoords /= 2.0;\n\t\tvec4 transmittedLight = getTransmissionSample( refractionCoords, roughness, ior );\n\t\tvec3 attenuatedColor = applyVolumeAttenuation( transmittedLight.rgb, length( transmissionRay ), attenuationColor, attenuationDistance );\n\t\tvec3 F = EnvironmentBRDF( n, v, specularColor, specularF90, roughness );\n\t\treturn vec4( ( 1.0 - F ) * attenuatedColor * diffuseColor, transmittedLight.a );\n\t}\n#endif",uv_pars_fragment:"#if ( defined( USE_UV ) && ! defined( UVS_VERTEX_ONLY ) )\n\tvarying vec2 vUv;\n#endif",uv_pars_vertex:"#ifdef USE_UV\n\t#ifdef UVS_VERTEX_ONLY\n\t\tvec2 vUv;\n\t#else\n\t\tvarying vec2 vUv;\n\t#endif\n\tuniform mat3 uvTransform;\n#endif",uv_vertex:"#ifdef USE_UV\n\tvUv = ( uvTransform * vec3( uv, 1 ) ).xy;\n#endif",uv2_pars_fragment:"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tvarying vec2 vUv2;\n#endif",uv2_pars_vertex:"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tattribute vec2 uv2;\n\tvarying vec2 vUv2;\n\tuniform mat3 uv2Transform;\n#endif",uv2_vertex:"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tvUv2 = ( uv2Transform * vec3( uv2, 1 ) ).xy;\n#endif",worldpos_vertex:"#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP ) || defined ( USE_TRANSMISSION ) || NUM_SPOT_LIGHT_COORDS > 0\n\tvec4 worldPosition = vec4( transformed, 1.0 );\n\t#ifdef USE_INSTANCING\n\t\tworldPosition = instanceMatrix * worldPosition;\n\t#endif\n\tworldPosition = modelMatrix * worldPosition;\n#endif",background_vert:"varying vec2 vUv;\nuniform mat3 uvTransform;\nvoid main() {\n\tvUv = ( uvTransform * vec3( uv, 1 ) ).xy;\n\tgl_Position = vec4( position.xy, 1.0, 1.0 );\n}",background_frag:"uniform sampler2D t2D;\nuniform float backgroundIntensity;\nvarying vec2 vUv;\nvoid main() {\n\tvec4 texColor = texture2D( t2D, vUv );\n\t#ifdef DECODE_VIDEO_TEXTURE\n\t\ttexColor = vec4( mix( pow( texColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), texColor.rgb * 0.0773993808, vec3( lessThanEqual( texColor.rgb, vec3( 0.04045 ) ) ) ), texColor.w );\n\t#endif\n\ttexColor.rgb *= backgroundIntensity;\n\tgl_FragColor = texColor;\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n}",backgroundCube_vert:"varying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvWorldDirection = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n\tgl_Position.z = gl_Position.w;\n}",backgroundCube_frag:"#ifdef ENVMAP_TYPE_CUBE\n\tuniform samplerCube envMap;\n#elif defined( ENVMAP_TYPE_CUBE_UV )\n\tuniform sampler2D envMap;\n#endif\nuniform float flipEnvMap;\nuniform float backgroundBlurriness;\nuniform float backgroundIntensity;\nvarying vec3 vWorldDirection;\n#include <cube_uv_reflection_fragment>\nvoid main() {\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tvec4 texColor = textureCube( envMap, vec3( flipEnvMap * vWorldDirection.x, vWorldDirection.yz ) );\n\t#elif defined( ENVMAP_TYPE_CUBE_UV )\n\t\tvec4 texColor = textureCubeUV( envMap, vWorldDirection, backgroundBlurriness );\n\t#else\n\t\tvec4 texColor = vec4( 0.0, 0.0, 0.0, 1.0 );\n\t#endif\n\ttexColor.rgb *= backgroundIntensity;\n\tgl_FragColor = texColor;\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n}",cube_vert:"varying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvWorldDirection = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n\tgl_Position.z = gl_Position.w;\n}",cube_frag:"uniform samplerCube tCube;\nuniform float tFlip;\nuniform float opacity;\nvarying vec3 vWorldDirection;\nvoid main() {\n\tvec4 texColor = textureCube( tCube, vec3( tFlip * vWorldDirection.x, vWorldDirection.yz ) );\n\tgl_FragColor = texColor;\n\tgl_FragColor.a *= opacity;\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n}",depth_vert:"#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvarying vec2 vHighPrecisionZW;\nvoid main() {\n\t#include <uv_vertex>\n\t#include <skinbase_vertex>\n\t#ifdef USE_DISPLACEMENTMAP\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvHighPrecisionZW = gl_Position.zw;\n}",depth_frag:"#if DEPTH_PACKING == 3200\n\tuniform float opacity;\n#endif\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvarying vec2 vHighPrecisionZW;\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( 1.0 );\n\t#if DEPTH_PACKING == 3200\n\t\tdiffuseColor.a = opacity;\n\t#endif\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <logdepthbuf_fragment>\n\tfloat fragCoordZ = 0.5 * vHighPrecisionZW[0] / vHighPrecisionZW[1] + 0.5;\n\t#if DEPTH_PACKING == 3200\n\t\tgl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );\n\t#elif DEPTH_PACKING == 3201\n\t\tgl_FragColor = packDepthToRGBA( fragCoordZ );\n\t#endif\n}",distanceRGBA_vert:"#define DISTANCE\nvarying vec3 vWorldPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <skinbase_vertex>\n\t#ifdef USE_DISPLACEMENTMAP\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <worldpos_vertex>\n\t#include <clipping_planes_vertex>\n\tvWorldPosition = worldPosition.xyz;\n}",distanceRGBA_frag:"#define DISTANCE\nuniform vec3 referencePosition;\nuniform float nearDistance;\nuniform float farDistance;\nvarying vec3 vWorldPosition;\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main () {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( 1.0 );\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\tfloat dist = length( vWorldPosition - referencePosition );\n\tdist = ( dist - nearDistance ) / ( farDistance - nearDistance );\n\tdist = saturate( dist );\n\tgl_FragColor = packDepthToRGBA( dist );\n}",equirect_vert:"varying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvWorldDirection = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n}",equirect_frag:"uniform sampler2D tEquirect;\nvarying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvec3 direction = normalize( vWorldDirection );\n\tvec2 sampleUV = equirectUv( direction );\n\tgl_FragColor = texture2D( tEquirect, sampleUV );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n}",linedashed_vert:"uniform float scale;\nattribute float lineDistance;\nvarying float vLineDistance;\n#include <common>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\tvLineDistance = scale * lineDistance;\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n}",linedashed_frag:"uniform vec3 diffuse;\nuniform float opacity;\nuniform float dashSize;\nuniform float totalSize;\nvarying float vLineDistance;\n#include <common>\n#include <color_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tif ( mod( vLineDistance, totalSize ) > dashSize ) {\n\t\tdiscard;\n\t}\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <color_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n}",meshbasic_vert:"#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#if defined ( USE_ENVMAP ) || defined ( USE_SKINNING )\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinbase_vertex>\n\t\t#include <skinnormal_vertex>\n\t\t#include <defaultnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <fog_vertex>\n}",meshbasic_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\t#ifdef USE_LIGHTMAP\n\t\tvec4 lightMapTexel = texture2D( lightMap, vUv2 );\n\t\treflectedLight.indirectDiffuse += lightMapTexel.rgb * lightMapIntensity * RECIPROCAL_PI;\n\t#else\n\t\treflectedLight.indirectDiffuse += vec3( 1.0 );\n\t#endif\n\t#include <aomap_fragment>\n\treflectedLight.indirectDiffuse *= diffuseColor.rgb;\n\tvec3 outgoingLight = reflectedLight.indirectDiffuse;\n\t#include <envmap_fragment>\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshlambert_vert:"#define LAMBERT\nvarying vec3 vViewPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",meshlambert_frag:"#define LAMBERT\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_lambert_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_lambert_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;\n\t#include <envmap_fragment>\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshmatcap_vert:"#define MATCAP\nvarying vec3 vViewPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <color_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n\tvViewPosition = - mvPosition.xyz;\n}",meshmatcap_frag:"#define MATCAP\nuniform vec3 diffuse;\nuniform float opacity;\nuniform sampler2D matcap;\nvarying vec3 vViewPosition;\n#include <common>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <fog_pars_fragment>\n#include <normal_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\tvec3 viewDir = normalize( vViewPosition );\n\tvec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );\n\tvec3 y = cross( viewDir, x );\n\tvec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;\n\t#ifdef USE_MATCAP\n\t\tvec4 matcapColor = texture2D( matcap, uv );\n\t#else\n\t\tvec4 matcapColor = vec4( vec3( mix( 0.2, 0.8, uv.y ) ), 1.0 );\n\t#endif\n\tvec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshnormal_vert:"#define NORMAL\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )\n\tvarying vec3 vViewPosition;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )\n\tvViewPosition = - mvPosition.xyz;\n#endif\n}",meshnormal_frag:"#define NORMAL\nuniform float opacity;\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )\n\tvarying vec3 vViewPosition;\n#endif\n#include <packing>\n#include <uv_pars_fragment>\n#include <normal_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\t#include <logdepthbuf_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\tgl_FragColor = vec4( packNormalToRGB( normal ), opacity );\n\t#ifdef OPAQUE\n\t\tgl_FragColor.a = 1.0;\n\t#endif\n}",meshphong_vert:"#define PHONG\nvarying vec3 vViewPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",meshphong_frag:"#define PHONG\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform vec3 specular;\nuniform float shininess;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_phong_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_phong_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;\n\t#include <envmap_fragment>\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshphysical_vert:"#define STANDARD\nvarying vec3 vViewPosition;\n#ifdef USE_TRANSMISSION\n\tvarying vec3 vWorldPosition;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n#ifdef USE_TRANSMISSION\n\tvWorldPosition = worldPosition.xyz;\n#endif\n}",meshphysical_frag:"#define STANDARD\n#ifdef PHYSICAL\n\t#define IOR\n\t#define SPECULAR\n#endif\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float roughness;\nuniform float metalness;\nuniform float opacity;\n#ifdef IOR\n\tuniform float ior;\n#endif\n#ifdef SPECULAR\n\tuniform float specularIntensity;\n\tuniform vec3 specularColor;\n\t#ifdef USE_SPECULARINTENSITYMAP\n\t\tuniform sampler2D specularIntensityMap;\n\t#endif\n\t#ifdef USE_SPECULARCOLORMAP\n\t\tuniform sampler2D specularColorMap;\n\t#endif\n#endif\n#ifdef USE_CLEARCOAT\n\tuniform float clearcoat;\n\tuniform float clearcoatRoughness;\n#endif\n#ifdef USE_IRIDESCENCE\n\tuniform float iridescence;\n\tuniform float iridescenceIOR;\n\tuniform float iridescenceThicknessMinimum;\n\tuniform float iridescenceThicknessMaximum;\n#endif\n#ifdef USE_SHEEN\n\tuniform vec3 sheenColor;\n\tuniform float sheenRoughness;\n\t#ifdef USE_SHEENCOLORMAP\n\t\tuniform sampler2D sheenColorMap;\n\t#endif\n\t#ifdef USE_SHEENROUGHNESSMAP\n\t\tuniform sampler2D sheenRoughnessMap;\n\t#endif\n#endif\nvarying vec3 vViewPosition;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <bsdfs>\n#include <iridescence_fragment>\n#include <cube_uv_reflection_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_physical_pars_fragment>\n#include <fog_pars_fragment>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_physical_pars_fragment>\n#include <transmission_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <clearcoat_pars_fragment>\n#include <iridescence_pars_fragment>\n#include <roughnessmap_pars_fragment>\n#include <metalnessmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <roughnessmap_fragment>\n\t#include <metalnessmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <clearcoat_normal_fragment_begin>\n\t#include <clearcoat_normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_physical_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 totalDiffuse = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse;\n\tvec3 totalSpecular = reflectedLight.directSpecular + reflectedLight.indirectSpecular;\n\t#include <transmission_fragment>\n\tvec3 outgoingLight = totalDiffuse + totalSpecular + totalEmissiveRadiance;\n\t#ifdef USE_SHEEN\n\t\tfloat sheenEnergyComp = 1.0 - 0.157 * max3( material.sheenColor );\n\t\toutgoingLight = outgoingLight * sheenEnergyComp + sheenSpecular;\n\t#endif\n\t#ifdef USE_CLEARCOAT\n\t\tfloat dotNVcc = saturate( dot( geometry.clearcoatNormal, geometry.viewDir ) );\n\t\tvec3 Fcc = F_Schlick( material.clearcoatF0, material.clearcoatF90, dotNVcc );\n\t\toutgoingLight = outgoingLight * ( 1.0 - material.clearcoat * Fcc ) + clearcoatSpecular * material.clearcoat;\n\t#endif\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshtoon_vert:"#define TOON\nvarying vec3 vViewPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",meshtoon_frag:"#define TOON\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <gradientmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_toon_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_toon_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",points_vert:"uniform float size;\nuniform float scale;\n#include <common>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <project_vertex>\n\tgl_PointSize = size;\n\t#ifdef USE_SIZEATTENUATION\n\t\tbool isPerspective = isPerspectiveMatrix( projectionMatrix );\n\t\tif ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );\n\t#endif\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <fog_vertex>\n}",points_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#include <common>\n#include <color_pars_fragment>\n#include <map_particle_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_particle_fragment>\n\t#include <color_fragment>\n\t#include <alphatest_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n}",shadow_vert:"#include <common>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\nvoid main() {\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",shadow_frag:"uniform vec3 color;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <shadowmap_pars_fragment>\n#include <shadowmask_pars_fragment>\nvoid main() {\n\tgl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}",sprite_vert:"uniform float rotation;\nuniform vec2 center;\n#include <common>\n#include <uv_pars_vertex>\n#include <fog_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\tvec4 mvPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );\n\tvec2 scale;\n\tscale.x = length( vec3( modelMatrix[ 0 ].x, modelMatrix[ 0 ].y, modelMatrix[ 0 ].z ) );\n\tscale.y = length( vec3( modelMatrix[ 1 ].x, modelMatrix[ 1 ].y, modelMatrix[ 1 ].z ) );\n\t#ifndef USE_SIZEATTENUATION\n\t\tbool isPerspective = isPerspectiveMatrix( projectionMatrix );\n\t\tif ( isPerspective ) scale *= - mvPosition.z;\n\t#endif\n\tvec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;\n\tvec2 rotatedPosition;\n\trotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;\n\trotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;\n\tmvPosition.xy += rotatedPosition;\n\tgl_Position = projectionMatrix * mvPosition;\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n}",sprite_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#include <common>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}"},le={common:{diffuse:{value:new pe(16777215)},opacity:{value:1},map:{value:null},uvTransform:{value:new fi},uv2Transform:{value:new fi},alphaMap:{value:null},alphaTest:{value:0}},specularmap:{specularMap:{value:null}},envmap:{envMap:{value:null},flipEnvMap:{value:-1},reflectivity:{value:1},ior:{value:1.5},refractionRatio:{value:.98}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1}},emissivemap:{emissiveMap:{value:null}},bumpmap:{bumpMap:{value:null},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalScale:{value:new K(1,1)}},displacementmap:{displacementMap:{value:null},displacementScale:{value:1},displacementBias:{value:0}},roughnessmap:{roughnessMap:{value:null}},metalnessmap:{metalnessMap:{value:null}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new pe(16777215)}},lights:{ambientLightColor:{value:[]},lightProbe:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{}}},directionalLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{}}},spotLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},spotLightMap:{value:[]},spotShadowMap:{value:[]},spotLightMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{}}},pointLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}},ltc_1:{value:null},ltc_2:{value:null}},points:{diffuse:{value:new pe(16777215)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},alphaMap:{value:null},alphaTest:{value:0},uvTransform:{value:new fi}},sprite:{diffuse:{value:new pe(16777215)},opacity:{value:1},center:{value:new K(.5,.5)},rotation:{value:0},map:{value:null},alphaMap:{value:null},alphaTest:{value:0},uvTransform:{value:new fi}}},Rr={basic:{uniforms:ni([le.common,le.specularmap,le.envmap,le.aomap,le.lightmap,le.fog]),vertexShader:rt.meshbasic_vert,fragmentShader:rt.meshbasic_frag},lambert:{uniforms:ni([le.common,le.specularmap,le.envmap,le.aomap,le.lightmap,le.emissivemap,le.bumpmap,le.normalmap,le.displacementmap,le.fog,le.lights,{emissive:{value:new pe(0)}}]),vertexShader:rt.meshlambert_vert,fragmentShader:rt.meshlambert_frag},phong:{uniforms:ni([le.common,le.specularmap,le.envmap,le.aomap,le.lightmap,le.emissivemap,le.bumpmap,le.normalmap,le.displacementmap,le.fog,le.lights,{emissive:{value:new pe(0)},specular:{value:new pe(1118481)},shininess:{value:30}}]),vertexShader:rt.meshphong_vert,fragmentShader:rt.meshphong_frag},standard:{uniforms:ni([le.common,le.envmap,le.aomap,le.lightmap,le.emissivemap,le.bumpmap,le.normalmap,le.displacementmap,le.roughnessmap,le.metalnessmap,le.fog,le.lights,{emissive:{value:new pe(0)},roughness:{value:1},metalness:{value:0},envMapIntensity:{value:1}}]),vertexShader:rt.meshphysical_vert,fragmentShader:rt.meshphysical_frag},toon:{uniforms:ni([le.common,le.aomap,le.lightmap,le.emissivemap,le.bumpmap,le.normalmap,le.displacementmap,le.gradientmap,le.fog,le.lights,{emissive:{value:new pe(0)}}]),vertexShader:rt.meshtoon_vert,fragmentShader:rt.meshtoon_frag},matcap:{uniforms:ni([le.common,le.bumpmap,le.normalmap,le.displacementmap,le.fog,{matcap:{value:null}}]),vertexShader:rt.meshmatcap_vert,fragmentShader:rt.meshmatcap_frag},points:{uniforms:ni([le.points,le.fog]),vertexShader:rt.points_vert,fragmentShader:rt.points_frag},dashed:{uniforms:ni([le.common,le.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:rt.linedashed_vert,fragmentShader:rt.linedashed_frag},depth:{uniforms:ni([le.common,le.displacementmap]),vertexShader:rt.depth_vert,fragmentShader:rt.depth_frag},normal:{uniforms:ni([le.common,le.bumpmap,le.normalmap,le.displacementmap,{opacity:{value:1}}]),vertexShader:rt.meshnormal_vert,fragmentShader:rt.meshnormal_frag},sprite:{uniforms:ni([le.sprite,le.fog]),vertexShader:rt.sprite_vert,fragmentShader:rt.sprite_frag},background:{uniforms:{uvTransform:{value:new fi},t2D:{value:null},backgroundIntensity:{value:1}},vertexShader:rt.background_vert,fragmentShader:rt.background_frag},backgroundCube:{uniforms:{envMap:{value:null},flipEnvMap:{value:-1},backgroundBlurriness:{value:0},backgroundIntensity:{value:1}},vertexShader:rt.backgroundCube_vert,fragmentShader:rt.backgroundCube_frag},cube:{uniforms:{tCube:{value:null},tFlip:{value:-1},opacity:{value:1}},vertexShader:rt.cube_vert,fragmentShader:rt.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:rt.equirect_vert,fragmentShader:rt.equirect_frag},distanceRGBA:{uniforms:ni([le.common,le.displacementmap,{referencePosition:{value:new S},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:rt.distanceRGBA_vert,fragmentShader:rt.distanceRGBA_frag},shadow:{uniforms:ni([le.lights,le.fog,{color:{value:new pe(0)},opacity:{value:1}}]),vertexShader:rt.shadow_vert,fragmentShader:rt.shadow_frag}};Rr.physical={uniforms:ni([Rr.standard.uniforms,{clearcoat:{value:0},clearcoatMap:{value:null},clearcoatRoughness:{value:0},clearcoatRoughnessMap:{value:null},clearcoatNormalScale:{value:new K(1,1)},clearcoatNormalMap:{value:null},iridescence:{value:0},iridescenceMap:{value:null},iridescenceIOR:{value:1.3},iridescenceThicknessMinimum:{value:100},iridescenceThicknessMaximum:{value:400},iridescenceThicknessMap:{value:null},sheen:{value:0},sheenColor:{value:new pe(0)},sheenColorMap:{value:null},sheenRoughness:{value:1},sheenRoughnessMap:{value:null},transmission:{value:0},transmissionMap:{value:null},transmissionSamplerSize:{value:new K},transmissionSamplerMap:{value:null},thickness:{value:0},thicknessMap:{value:null},attenuationDistance:{value:0},attenuationColor:{value:new pe(0)},specularIntensity:{value:1},specularIntensityMap:{value:null},specularColor:{value:new pe(1,1,1)},specularColorMap:{value:null}}]),vertexShader:rt.meshphysical_vert,fragmentShader:rt.meshphysical_frag};const _4={r:0,b:0,g:0};function qee(n,e,t,i,r,s,o){const a=new pe(0);let l,u,c=!0===s?0:1,f=null,d=0,h=null;function g(m,v){m.getRGB(_4,_w(n)),i.buffers.color.setClear(_4.r,_4.g,_4.b,v,o)}return{getClearColor:function(){return a},setClearColor:function(m,v=1){a.set(m),c=v,g(a,c)},getClearAlpha:function(){return c},setClearAlpha:function(m){c=m,g(a,c)},render:function p(m,v){let x=!1,y=!0===v.isScene?v.background:null;y&&y.isTexture&&(y=(v.backgroundBlurriness>0?t:e).get(y));const _=n.xr,M=_.getSession&&_.getSession();M&&"additive"===M.environmentBlendMode&&(y=null),null===y?g(a,c):y&&y.isColor&&(g(y,1),x=!0),(n.autoClear||x)&&n.clear(n.autoClearColor,n.autoClearDepth,n.autoClearStencil),y&&(y.isCubeTexture||306===y.mapping)?(void 0===u&&(u=new Dn(new Pa(1,1,1),new Lr({name:"BackgroundCubeMaterial",uniforms:Na(Rr.backgroundCube.uniforms),vertexShader:Rr.backgroundCube.vertexShader,fragmentShader:Rr.backgroundCube.fragmentShader,side:1,depthTest:!1,depthWrite:!1,fog:!1})),u.geometry.deleteAttribute("normal"),u.geometry.deleteAttribute("uv"),u.onBeforeRender=function(w,T,b){this.matrixWorld.copyPosition(b.matrixWorld)},Object.defineProperty(u.material,"envMap",{get:function(){return this.uniforms.envMap.value}}),r.update(u)),u.material.uniforms.envMap.value=y,u.material.uniforms.flipEnvMap.value=y.isCubeTexture&&!1===y.isRenderTargetTexture?-1:1,u.material.uniforms.backgroundBlurriness.value=v.backgroundBlurriness,u.material.uniforms.backgroundIntensity.value=v.backgroundIntensity,(f!==y||d!==y.version||h!==n.toneMapping)&&(u.material.needsUpdate=!0,f=y,d=y.version,h=n.toneMapping),u.layers.enableAll(),m.unshift(u,u.geometry,u.material,0,0,null)):y&&y.isTexture&&(void 0===l&&(l=new Dn(new jc(2,2),new Lr({name:"BackgroundMaterial",uniforms:Na(Rr.background.uniforms),vertexShader:Rr.background.vertexShader,fragmentShader:Rr.background.fragmentShader,side:0,depthTest:!1,depthWrite:!1,fog:!1})),l.geometry.deleteAttribute("normal"),Object.defineProperty(l.material,"map",{get:function(){return this.uniforms.t2D.value}}),r.update(l)),l.material.uniforms.t2D.value=y,l.material.uniforms.backgroundIntensity.value=v.backgroundIntensity,!0===y.matrixAutoUpdate&&y.updateMatrix(),l.material.uniforms.uvTransform.value.copy(y.matrix),(f!==y||d!==y.version||h!==n.toneMapping)&&(l.material.needsUpdate=!0,f=y,d=y.version,h=n.toneMapping),l.layers.enableAll(),m.unshift(l,l.geometry,l.material,0,0,null))}}}function Zee(n,e,t,i){const r=n.getParameter(34921),s=i.isWebGL2?null:e.get("OES_vertex_array_object"),o=i.isWebGL2||null!==s,a={},c=m(null);let l=c,u=!1;function h(R){return i.isWebGL2?n.bindVertexArray(R):s.bindVertexArrayOES(R)}function p(R){return i.isWebGL2?n.deleteVertexArray(R):s.deleteVertexArrayOES(R)}function m(R){const k=[],Y=[],ee=[];for(let $=0;$<r;$++)k[$]=0,Y[$]=0,ee[$]=0;return{geometry:null,program:null,wireframe:!1,newAttributes:k,enabledAttributes:Y,attributeDivisors:ee,object:R,attributes:{},index:null}}function y(){const R=l.newAttributes;for(let k=0,Y=R.length;k<Y;k++)R[k]=0}function _(R){M(R,0)}function M(R,k){const ee=l.enabledAttributes,$=l.attributeDivisors;l.newAttributes[R]=1,0===ee[R]&&(n.enableVertexAttribArray(R),ee[R]=1),$[R]!==k&&((i.isWebGL2?n:e.get("ANGLE_instanced_arrays"))[i.isWebGL2?"vertexAttribDivisor":"vertexAttribDivisorANGLE"](R,k),$[R]=k)}function w(){const R=l.newAttributes,k=l.enabledAttributes;for(let Y=0,ee=k.length;Y<ee;Y++)k[Y]!==R[Y]&&(n.disableVertexAttribArray(Y),k[Y]=0)}function T(R,k,Y,ee,$,ie){!0!==i.isWebGL2||5124!==Y&&5125!==Y?n.vertexAttribPointer(R,k,Y,ee,$,ie):n.vertexAttribIPointer(R,k,Y,$,ie)}function J(){O(),u=!0,l!==c&&(l=c,h(l.object))}function O(){c.geometry=null,c.program=null,c.wireframe=!1}return{setup:function f(R,k,Y,ee,$){let ie=!1;if(o){const Q=function g(R,k,Y){const ee=!0===Y.wireframe;let $=a[R.id];void 0===$&&($={},a[R.id]=$);let ie=$[k.id];void 0===ie&&(ie={},$[k.id]=ie);let Q=ie[ee];return void 0===Q&&(Q=m(function d(){return i.isWebGL2?n.createVertexArray():s.createVertexArrayOES()}()),ie[ee]=Q),Q}(ee,Y,k);l!==Q&&(l=Q,h(l.object)),ie=function v(R,k,Y,ee){const $=l.attributes,ie=k.attributes;let Q=0;const V=Y.getAttributes();for(const H in V)if(V[H].location>=0){const re=$[H];let me=ie[H];if(void 0===me&&("instanceMatrix"===H&&R.instanceMatrix&&(me=R.instanceMatrix),"instanceColor"===H&&R.instanceColor&&(me=R.instanceColor)),void 0===re||re.attribute!==me||me&&re.data!==me.data)return!0;Q++}return l.attributesNum!==Q||l.index!==ee}(R,ee,Y,$),ie&&function x(R,k,Y,ee){const $={},ie=k.attributes;let Q=0;const V=Y.getAttributes();for(const H in V)if(V[H].location>=0){let re=ie[H];void 0===re&&("instanceMatrix"===H&&R.instanceMatrix&&(re=R.instanceMatrix),"instanceColor"===H&&R.instanceColor&&(re=R.instanceColor));const me={};me.attribute=re,re&&re.data&&(me.data=re.data),$[H]=me,Q++}l.attributes=$,l.attributesNum=Q,l.index=ee}(R,ee,Y,$)}else{const Q=!0===k.wireframe;(l.geometry!==ee.id||l.program!==Y.id||l.wireframe!==Q)&&(l.geometry=ee.id,l.program=Y.id,l.wireframe=Q,ie=!0)}null!==$&&t.update($,34963),(ie||u)&&(u=!1,function b(R,k,Y,ee){if(!1===i.isWebGL2&&(R.isInstancedMesh||ee.isInstancedBufferGeometry)&&null===e.get("ANGLE_instanced_arrays"))return;y();const $=ee.attributes,ie=Y.getAttributes(),Q=k.defaultAttributeValues;for(const V in ie){const H=ie[V];if(H.location>=0){let ae=$[V];if(void 0===ae&&("instanceMatrix"===V&&R.instanceMatrix&&(ae=R.instanceMatrix),"instanceColor"===V&&R.instanceColor&&(ae=R.instanceColor)),void 0!==ae){const re=ae.normalized,me=ae.itemSize,G=t.get(ae);if(void 0===G)continue;const $e=G.buffer,Me=G.type,Ge=G.bytesPerElement;if(ae.isInterleavedBufferAttribute){const ge=ae.data,ot=ge.stride,Z=ae.offset;if(ge.isInstancedInterleavedBuffer){for(let q=0;q<H.locationSize;q++)M(H.location+q,ge.meshPerAttribute);!0!==R.isInstancedMesh&&void 0===ee._maxInstanceCount&&(ee._maxInstanceCount=ge.meshPerAttribute*ge.count)}else for(let q=0;q<H.locationSize;q++)_(H.location+q);n.bindBuffer(34962,$e);for(let q=0;q<H.locationSize;q++)T(H.location+q,me/H.locationSize,Me,re,ot*Ge,(Z+me/H.locationSize*q)*Ge)}else{if(ae.isInstancedBufferAttribute){for(let ge=0;ge<H.locationSize;ge++)M(H.location+ge,ae.meshPerAttribute);!0!==R.isInstancedMesh&&void 0===ee._maxInstanceCount&&(ee._maxInstanceCount=ae.meshPerAttribute*ae.count)}else for(let ge=0;ge<H.locationSize;ge++)_(H.location+ge);n.bindBuffer(34962,$e);for(let ge=0;ge<H.locationSize;ge++)T(H.location+ge,me/H.locationSize,Me,re,me*Ge,me/H.locationSize*ge*Ge)}}else if(void 0!==Q){const re=Q[V];if(void 0!==re)switch(re.length){case 2:n.vertexAttrib2fv(H.location,re);break;case 3:n.vertexAttrib3fv(H.location,re);break;case 4:n.vertexAttrib4fv(H.location,re);break;default:n.vertexAttrib1fv(H.location,re)}}}}w()}(R,k,Y,ee),null!==$&&n.bindBuffer(34963,t.get($).buffer))},reset:J,resetDefaultState:O,dispose:function D(){J();for(const R in a){const k=a[R];for(const Y in k){const ee=k[Y];for(const $ in ee)p(ee[$].object),delete ee[$];delete k[Y]}delete a[R]}},releaseStatesOfGeometry:function I(R){if(void 0===a[R.id])return;const k=a[R.id];for(const Y in k){const ee=k[Y];for(const $ in ee)p(ee[$].object),delete ee[$];delete k[Y]}delete a[R.id]},releaseStatesOfProgram:function N(R){for(const k in a){const Y=a[k];if(void 0===Y[R.id])continue;const ee=Y[R.id];for(const $ in ee)p(ee[$].object),delete ee[$];delete Y[R.id]}},initAttributes:y,enableAttribute:_,disableUnusedAttributes:w}}function Yee(n,e,t,i){const r=i.isWebGL2;let s;this.setMode=function o(l){s=l},this.render=function a(l,u){n.drawArrays(s,l,u),t.update(u,s,1)},this.renderInstances=function c(l,u,f){if(0===f)return;let d,h;if(r)d=n,h="drawArraysInstanced";else if(d=e.get("ANGLE_instanced_arrays"),h="drawArraysInstancedANGLE",null===d)return void console.error("THREE.WebGLBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");d[h](s,l,u,f),t.update(u,s,f)}}function Xee(n,e,t){let i;function s(T){if("highp"===T){if(n.getShaderPrecisionFormat(35633,36338).precision>0&&n.getShaderPrecisionFormat(35632,36338).precision>0)return"highp";T="mediump"}return"mediump"===T&&n.getShaderPrecisionFormat(35633,36337).precision>0&&n.getShaderPrecisionFormat(35632,36337).precision>0?"mediump":"lowp"}const o=typeof WebGL2RenderingContext<"u"&&n instanceof WebGL2RenderingContext||typeof WebGL2ComputeRenderingContext<"u"&&n instanceof WebGL2ComputeRenderingContext;let a=void 0!==t.precision?t.precision:"highp";const c=s(a);c!==a&&(console.warn("THREE.WebGLRenderer:",a,"not supported, using",c,"instead."),a=c);const l=o||e.has("WEBGL_draw_buffers"),u=!0===t.logarithmicDepthBuffer,f=n.getParameter(34930),d=n.getParameter(35660),h=n.getParameter(3379),p=n.getParameter(34076),g=n.getParameter(34921),m=n.getParameter(36347),v=n.getParameter(36348),x=n.getParameter(36349),y=d>0,_=o||e.has("OES_texture_float");return{isWebGL2:o,drawBuffers:l,getMaxAnisotropy:function r(){if(void 0!==i)return i;if(!0===e.has("EXT_texture_filter_anisotropic")){const T=e.get("EXT_texture_filter_anisotropic");i=n.getParameter(T.MAX_TEXTURE_MAX_ANISOTROPY_EXT)}else i=0;return i},getMaxPrecision:s,precision:a,logarithmicDepthBuffer:u,maxTextures:f,maxVertexTextures:d,maxTextureSize:h,maxCubemapSize:p,maxAttributes:g,maxVertexUniforms:m,maxVaryings:v,maxFragmentUniforms:x,vertexTextures:y,floatFragmentTextures:_,floatVertexTextures:y&&_,maxSamples:o?n.getParameter(36183):0}}function Kee(n){const e=this;let t=null,i=0,r=!1,s=!1;const o=new $1,a=new fi,c={value:null,needsUpdate:!1};function l(){c.value!==t&&(c.value=t,c.needsUpdate=i>0),e.numPlanes=i,e.numIntersection=0}function u(f,d,h,p){const g=null!==f?f.length:0;let m=null;if(0!==g){if(m=c.value,!0!==p||null===m){const v=h+4*g,x=d.matrixWorldInverse;a.getNormalMatrix(x),(null===m||m.length<v)&&(m=new Float32Array(v));for(let y=0,_=h;y!==g;++y,_+=4)o.copy(f[y]).applyMatrix4(x,a),o.normal.toArray(m,_),m[_+3]=o.constant}c.value=m,c.needsUpdate=!0}return e.numPlanes=g,e.numIntersection=0,m}this.uniform=c,this.numPlanes=0,this.numIntersection=0,this.init=function(f,d,h){const p=0!==f.length||d||0!==i||r;return r=d,t=u(f,h,0),i=f.length,p},this.beginShadows=function(){s=!0,u(null)},this.endShadows=function(){s=!1,l()},this.setState=function(f,d,h){const p=f.clippingPlanes,g=f.clipIntersection,m=f.clipShadows,v=n.get(f);if(!r||null===p||0===p.length||s&&!m)s?u(null):l();else{const x=s?0:i,y=4*x;let _=v.clippingState||null;c.value=_,_=u(p,d,y,h);for(let M=0;M!==y;++M)_[M]=t[M];v.clippingState=_,this.numIntersection=g?this.numPlanes:0,this.numPlanes+=x}}}function Jee(n){let e=new WeakMap;function t(o,a){return 303===a?o.mapping=301:304===a&&(o.mapping=302),o}function r(o){const a=o.target;a.removeEventListener("dispose",r);const c=e.get(a);void 0!==c&&(e.delete(a),c.dispose())}return{get:function i(o){if(o&&o.isTexture&&!1===o.isRenderTargetTexture){const a=o.mapping;if(303===a||304===a){if(e.has(o))return t(e.get(o).texture,o.mapping);{const c=o.image;if(c&&c.height>0){const l=new $J(c.height/2);return l.fromEquirectangularTexture(n,o),e.set(o,l),o.addEventListener("dispose",r),t(l.texture,o.mapping)}return null}}}return o},dispose:function s(){e=new WeakMap}}}class x4 extends R6{constructor(e=-1,t=1,i=1,r=-1,s=.1,o=2e3){super(),this.isOrthographicCamera=!0,this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=e,this.right=t,this.top=i,this.bottom=r,this.near=s,this.far=o,this.updateProjectionMatrix()}copy(e,t){return super.copy(e,t),this.left=e.left,this.right=e.right,this.top=e.top,this.bottom=e.bottom,this.near=e.near,this.far=e.far,this.zoom=e.zoom,this.view=null===e.view?null:Object.assign({},e.view),this}setViewOffset(e,t,i,r,s,o){null===this.view&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=i,this.view.offsetY=r,this.view.width=s,this.view.height=o,this.updateProjectionMatrix()}clearViewOffset(){null!==this.view&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=(this.right-this.left)/(2*this.zoom),t=(this.top-this.bottom)/(2*this.zoom),i=(this.right+this.left)/2,r=(this.top+this.bottom)/2;let s=i-e,o=i+e,a=r+t,c=r-t;if(null!==this.view&&this.view.enabled){const l=(this.right-this.left)/this.view.fullWidth/this.zoom,u=(this.top-this.bottom)/this.view.fullHeight/this.zoom;s+=l*this.view.offsetX,o=s+l*this.view.width,a-=u*this.view.offsetY,c=a-u*this.view.height}this.projectionMatrix.makeOrthographic(s,o,a,c,this.near,this.far),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const t=super.toJSON(e);return t.object.zoom=this.zoom,t.object.left=this.left,t.object.right=this.right,t.object.top=this.top,t.object.bottom=this.bottom,t.object.near=this.near,t.object.far=this.far,null!==this.view&&(t.object.view=Object.assign({},this.view)),t}}const bw=[.125,.215,.35,.446,.526,.582],N6=new x4,Mw=new pe;let O6=null;const q1=(1+Math.sqrt(5))/2,Ha=1/q1,ww=[new S(1,1,1),new S(-1,1,1),new S(1,1,-1),new S(-1,1,-1),new S(0,q1,Ha),new S(0,q1,-Ha),new S(Ha,0,q1),new S(-Ha,0,q1),new S(q1,Ha,0),new S(-q1,Ha,0)];class Cw{constructor(e){this._renderer=e,this._pingPongRenderTarget=null,this._lodMax=0,this._cubeSize=0,this._lodPlanes=[],this._sizeLods=[],this._sigmas=[],this._blurMaterial=null,this._cubemapMaterial=null,this._equirectMaterial=null,this._compileMaterial(this._blurMaterial)}fromScene(e,t=0,i=.1,r=100){O6=this._renderer.getRenderTarget(),this._setSize(256);const s=this._allocateTargets();return s.depthBuffer=!0,this._sceneToCubeUV(e,i,r,s),t>0&&this._blur(s,0,0,t),this._applyPMREM(s),this._cleanup(s),s}fromEquirectangular(e,t=null){return this._fromTexture(e,t)}fromCubemap(e,t=null){return this._fromTexture(e,t)}compileCubemapShader(){null===this._cubemapMaterial&&(this._cubemapMaterial=Dw(),this._compileMaterial(this._cubemapMaterial))}compileEquirectangularShader(){null===this._equirectMaterial&&(this._equirectMaterial=Ew(),this._compileMaterial(this._equirectMaterial))}dispose(){this._dispose(),null!==this._cubemapMaterial&&this._cubemapMaterial.dispose(),null!==this._equirectMaterial&&this._equirectMaterial.dispose()}_setSize(e){this._lodMax=Math.floor(Math.log2(e)),this._cubeSize=Math.pow(2,this._lodMax)}_dispose(){null!==this._blurMaterial&&this._blurMaterial.dispose(),null!==this._pingPongRenderTarget&&this._pingPongRenderTarget.dispose();for(let e=0;e<this._lodPlanes.length;e++)this._lodPlanes[e].dispose()}_cleanup(e){this._renderer.setRenderTarget(O6),e.scissorTest=!1,b4(e,0,0,e.width,e.height)}_fromTexture(e,t){this._setSize(301===e.mapping||302===e.mapping?0===e.image.length?16:e.image[0].width||e.image[0].image.width:e.image.width/4),O6=this._renderer.getRenderTarget();const i=t||this._allocateTargets();return this._textureToCubeUV(e,i),this._applyPMREM(i),this._cleanup(i),i}_allocateTargets(){const e=3*Math.max(this._cubeSize,112),t=4*this._cubeSize,i={magFilter:Kt,minFilter:Kt,generateMipmaps:!1,type:Oc,format:Gi,encoding:P1,depthBuffer:!1},r=Sw(e,t,i);if(null===this._pingPongRenderTarget||this._pingPongRenderTarget.width!==e){null!==this._pingPongRenderTarget&&this._dispose(),this._pingPongRenderTarget=Sw(e,t,i);const{_lodMax:s}=this;({sizeLods:this._sizeLods,lodPlanes:this._lodPlanes,sigmas:this._sigmas}=function Qee(n){const e=[],t=[],i=[];let r=n;const s=n-4+1+bw.length;for(let o=0;o<s;o++){const a=Math.pow(2,r);t.push(a);let c=1/a;o>n-4?c=bw[o-n+4-1]:0===o&&(c=0),i.push(c);const l=1/(a-2),u=-l,f=1+l,d=[u,u,f,u,f,f,u,u,f,f,u,f],h=6,p=6,g=3,m=2,v=1,x=new Float32Array(g*p*h),y=new Float32Array(m*p*h),_=new Float32Array(v*p*h);for(let w=0;w<h;w++){const T=w%3*2/3-1,b=w>2?0:-1;x.set([T,b,0,T+2/3,b,0,T+2/3,b+1,0,T,b,0,T+2/3,b+1,0,T,b+1,0],g*p*w),y.set(d,m*p*w),_.set([w,w,w,w,w,w],v*p*w)}const M=new it;M.setAttribute("position",new Ut(x,g)),M.setAttribute("uv",new Ut(y,m)),M.setAttribute("faceIndex",new Ut(_,v)),e.push(M),r>4&&r--}return{lodPlanes:e,sizeLods:t,sigmas:i}}(s)),this._blurMaterial=function ete(n,e,t){const i=new Float32Array(20),r=new S(0,1,0);return new Lr({name:"SphericalGaussianBlur",defines:{n:20,CUBEUV_TEXEL_WIDTH:1/e,CUBEUV_TEXEL_HEIGHT:1/t,CUBEUV_MAX_MIP:`${n}.0`},uniforms:{envMap:{value:null},samples:{value:1},weights:{value:i},latitudinal:{value:!1},dTheta:{value:0},mipInt:{value:0},poleAxis:{value:r}},vertexShader:"\n\n\t\tprecision mediump float;\n\t\tprecision mediump int;\n\n\t\tattribute float faceIndex;\n\n\t\tvarying vec3 vOutputDirection;\n\n\t\t// RH coordinate system; PMREM face-indexing convention\n\t\tvec3 getDirection( vec2 uv, float face ) {\n\n\t\t\tuv = 2.0 * uv - 1.0;\n\n\t\t\tvec3 direction = vec3( uv, 1.0 );\n\n\t\t\tif ( face == 0.0 ) {\n\n\t\t\t\tdirection = direction.zyx; // ( 1, v, u ) pos x\n\n\t\t\t} else if ( face == 1.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xz *= -1.0; // ( -u, 1, -v ) pos y\n\n\t\t\t} else if ( face == 2.0 ) {\n\n\t\t\t\tdirection.x *= -1.0; // ( -u, v, 1 ) pos z\n\n\t\t\t} else if ( face == 3.0 ) {\n\n\t\t\t\tdirection = direction.zyx;\n\t\t\t\tdirection.xz *= -1.0; // ( -1, v, -u ) neg x\n\n\t\t\t} else if ( face == 4.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xy *= -1.0; // ( -u, -1, v ) neg y\n\n\t\t\t} else if ( face == 5.0 ) {\n\n\t\t\t\tdirection.z *= -1.0; // ( u, v, -1 ) neg z\n\n\t\t\t}\n\n\t\t\treturn direction;\n\n\t\t}\n\n\t\tvoid main() {\n\n\t\t\tvOutputDirection = getDirection( uv, faceIndex );\n\t\t\tgl_Position = vec4( position, 1.0 );\n\n\t\t}\n\t",fragmentShader:"\n\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tvarying vec3 vOutputDirection;\n\n\t\t\tuniform sampler2D envMap;\n\t\t\tuniform int samples;\n\t\t\tuniform float weights[ n ];\n\t\t\tuniform bool latitudinal;\n\t\t\tuniform float dTheta;\n\t\t\tuniform float mipInt;\n\t\t\tuniform vec3 poleAxis;\n\n\t\t\t#define ENVMAP_TYPE_CUBE_UV\n\t\t\t#include <cube_uv_reflection_fragment>\n\n\t\t\tvec3 getSample( float theta, vec3 axis ) {\n\n\t\t\t\tfloat cosTheta = cos( theta );\n\t\t\t\t// Rodrigues' axis-angle rotation\n\t\t\t\tvec3 sampleDirection = vOutputDirection * cosTheta\n\t\t\t\t\t+ cross( axis, vOutputDirection ) * sin( theta )\n\t\t\t\t\t+ axis * dot( axis, vOutputDirection ) * ( 1.0 - cosTheta );\n\n\t\t\t\treturn bilinearCubeUV( envMap, sampleDirection, mipInt );\n\n\t\t\t}\n\n\t\t\tvoid main() {\n\n\t\t\t\tvec3 axis = latitudinal ? poleAxis : cross( poleAxis, vOutputDirection );\n\n\t\t\t\tif ( all( equal( axis, vec3( 0.0 ) ) ) ) {\n\n\t\t\t\t\taxis = vec3( vOutputDirection.z, 0.0, - vOutputDirection.x );\n\n\t\t\t\t}\n\n\t\t\t\taxis = normalize( axis );\n\n\t\t\t\tgl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );\n\t\t\t\tgl_FragColor.rgb += weights[ 0 ] * getSample( 0.0, axis );\n\n\t\t\t\tfor ( int i = 1; i < n; i++ ) {\n\n\t\t\t\t\tif ( i >= samples ) {\n\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t}\n\n\t\t\t\t\tfloat theta = dTheta * float( i );\n\t\t\t\t\tgl_FragColor.rgb += weights[ i ] * getSample( -1.0 * theta, axis );\n\t\t\t\t\tgl_FragColor.rgb += weights[ i ] * getSample( theta, axis );\n\n\t\t\t\t}\n\n\t\t\t}\n\t\t",blending:0,depthTest:!1,depthWrite:!1})}(s,e,t)}return r}_compileMaterial(e){const t=new Dn(this._lodPlanes[0],e);this._renderer.compile(t,N6)}_sceneToCubeUV(e,t,i,r){const a=new An(90,1,t,i),c=[1,-1,1,1,1,1],l=[1,1,1,-1,-1,-1],u=this._renderer,f=u.autoClear,d=u.toneMapping;u.getClearColor(Mw),u.toneMapping=0,u.autoClear=!1;const h=new Ei({name:"PMREM.Background",side:1,depthWrite:!1,depthTest:!1}),p=new Dn(new Pa,h);let g=!1;const m=e.background;m?m.isColor&&(h.color.copy(m),e.background=null,g=!0):(h.color.copy(Mw),g=!0);for(let v=0;v<6;v++){const x=v%3;0===x?(a.up.set(0,c[v],0),a.lookAt(l[v],0,0)):1===x?(a.up.set(0,0,c[v]),a.lookAt(0,l[v],0)):(a.up.set(0,c[v],0),a.lookAt(0,0,l[v]));const y=this._cubeSize;b4(r,x*y,v>2?y:0,y,y),u.setRenderTarget(r),g&&u.render(p,a),u.render(e,a)}p.geometry.dispose(),p.material.dispose(),u.toneMapping=d,u.autoClear=f,e.background=m}_textureToCubeUV(e,t){const i=this._renderer,r=301===e.mapping||302===e.mapping;r?(null===this._cubemapMaterial&&(this._cubemapMaterial=Dw()),this._cubemapMaterial.uniforms.flipEnvMap.value=!1===e.isRenderTargetTexture?-1:1):null===this._equirectMaterial&&(this._equirectMaterial=Ew());const s=r?this._cubemapMaterial:this._equirectMaterial,o=new Dn(this._lodPlanes[0],s);s.uniforms.envMap.value=e;const c=this._cubeSize;b4(t,0,0,3*c,2*c),i.setRenderTarget(t),i.render(o,N6)}_applyPMREM(e){const t=this._renderer,i=t.autoClear;t.autoClear=!1;for(let r=1;r<this._lodPlanes.length;r++){const s=Math.sqrt(this._sigmas[r]*this._sigmas[r]-this._sigmas[r-1]*this._sigmas[r-1]);this._blur(e,r-1,r,s,ww[(r-1)%ww.length])}t.autoClear=i}_blur(e,t,i,r,s){const o=this._pingPongRenderTarget;this._halfBlur(e,o,t,i,r,"latitudinal",s),this._halfBlur(o,e,i,i,r,"longitudinal",s)}_halfBlur(e,t,i,r,s,o,a){const c=this._renderer,l=this._blurMaterial;"latitudinal"!==o&&"longitudinal"!==o&&console.error("blur direction must be either latitudinal or longitudinal!");const f=new Dn(this._lodPlanes[r],l),d=l.uniforms,h=this._sizeLods[i]-1,p=isFinite(s)?Math.PI/(2*h):2*Math.PI/39,g=s/p,m=isFinite(s)?1+Math.floor(3*g):20;m>20&&console.warn(`sigmaRadians, ${s}, is too large and will clip, as it requested ${m} samples when the maximum is set to 20`);const v=[];let x=0;for(let T=0;T<20;++T){const b=T/g,D=Math.exp(-b*b/2);v.push(D),0===T?x+=D:T<m&&(x+=2*D)}for(let T=0;T<v.length;T++)v[T]=v[T]/x;d.envMap.value=e.texture,d.samples.value=m,d.weights.value=v,d.latitudinal.value="latitudinal"===o,a&&(d.poleAxis.value=a);const{_lodMax:y}=this;d.dTheta.value=p,d.mipInt.value=y-i;const _=this._sizeLods[r];b4(t,3*_*(r>y-4?r-y+4:0),4*(this._cubeSize-_),3*_,2*_),c.setRenderTarget(t),c.render(f,N6)}}function Sw(n,e,t){const i=new V1(n,e,t);return i.texture.mapping=306,i.texture.name="PMREM.cubeUv",i.scissorTest=!0,i}function b4(n,e,t,i,r){n.viewport.set(e,t,i,r),n.scissor.set(e,t,i,r)}function Ew(){return new Lr({name:"EquirectangularToCubeUV",uniforms:{envMap:{value:null}},vertexShader:"\n\n\t\tprecision mediump float;\n\t\tprecision mediump int;\n\n\t\tattribute float faceIndex;\n\n\t\tvarying vec3 vOutputDirection;\n\n\t\t// RH coordinate system; PMREM face-indexing convention\n\t\tvec3 getDirection( vec2 uv, float face ) {\n\n\t\t\tuv = 2.0 * uv - 1.0;\n\n\t\t\tvec3 direction = vec3( uv, 1.0 );\n\n\t\t\tif ( face == 0.0 ) {\n\n\t\t\t\tdirection = direction.zyx; // ( 1, v, u ) pos x\n\n\t\t\t} else if ( face == 1.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xz *= -1.0; // ( -u, 1, -v ) pos y\n\n\t\t\t} else if ( face == 2.0 ) {\n\n\t\t\t\tdirection.x *= -1.0; // ( -u, v, 1 ) pos z\n\n\t\t\t} else if ( face == 3.0 ) {\n\n\t\t\t\tdirection = direction.zyx;\n\t\t\t\tdirection.xz *= -1.0; // ( -1, v, -u ) neg x\n\n\t\t\t} else if ( face == 4.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xy *= -1.0; // ( -u, -1, v ) neg y\n\n\t\t\t} else if ( face == 5.0 ) {\n\n\t\t\t\tdirection.z *= -1.0; // ( u, v, -1 ) neg z\n\n\t\t\t}\n\n\t\t\treturn direction;\n\n\t\t}\n\n\t\tvoid main() {\n\n\t\t\tvOutputDirection = getDirection( uv, faceIndex );\n\t\t\tgl_Position = vec4( position, 1.0 );\n\n\t\t}\n\t",fragmentShader:"\n\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tvarying vec3 vOutputDirection;\n\n\t\t\tuniform sampler2D envMap;\n\n\t\t\t#include <common>\n\n\t\t\tvoid main() {\n\n\t\t\t\tvec3 outputDirection = normalize( vOutputDirection );\n\t\t\t\tvec2 uv = equirectUv( outputDirection );\n\n\t\t\t\tgl_FragColor = vec4( texture2D ( envMap, uv ).rgb, 1.0 );\n\n\t\t\t}\n\t\t",blending:0,depthTest:!1,depthWrite:!1})}function Dw(){return new Lr({name:"CubemapToCubeUV",uniforms:{envMap:{value:null},flipEnvMap:{value:-1}},vertexShader:"\n\n\t\tprecision mediump float;\n\t\tprecision mediump int;\n\n\t\tattribute float faceIndex;\n\n\t\tvarying vec3 vOutputDirection;\n\n\t\t// RH coordinate system; PMREM face-indexing convention\n\t\tvec3 getDirection( vec2 uv, float face ) {\n\n\t\t\tuv = 2.0 * uv - 1.0;\n\n\t\t\tvec3 direction = vec3( uv, 1.0 );\n\n\t\t\tif ( face == 0.0 ) {\n\n\t\t\t\tdirection = direction.zyx; // ( 1, v, u ) pos x\n\n\t\t\t} else if ( face == 1.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xz *= -1.0; // ( -u, 1, -v ) pos y\n\n\t\t\t} else if ( face == 2.0 ) {\n\n\t\t\t\tdirection.x *= -1.0; // ( -u, v, 1 ) pos z\n\n\t\t\t} else if ( face == 3.0 ) {\n\n\t\t\t\tdirection = direction.zyx;\n\t\t\t\tdirection.xz *= -1.0; // ( -1, v, -u ) neg x\n\n\t\t\t} else if ( face == 4.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xy *= -1.0; // ( -u, -1, v ) neg y\n\n\t\t\t} else if ( face == 5.0 ) {\n\n\t\t\t\tdirection.z *= -1.0; // ( u, v, -1 ) neg z\n\n\t\t\t}\n\n\t\t\treturn direction;\n\n\t\t}\n\n\t\tvoid main() {\n\n\t\t\tvOutputDirection = getDirection( uv, faceIndex );\n\t\t\tgl_Position = vec4( position, 1.0 );\n\n\t\t}\n\t",fragmentShader:"\n\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tuniform float flipEnvMap;\n\n\t\t\tvarying vec3 vOutputDirection;\n\n\t\t\tuniform samplerCube envMap;\n\n\t\t\tvoid main() {\n\n\t\t\t\tgl_FragColor = textureCube( envMap, vec3( flipEnvMap * vOutputDirection.x, vOutputDirection.yz ) );\n\n\t\t\t}\n\t\t",blending:0,depthTest:!1,depthWrite:!1})}function tte(n){let e=new WeakMap,t=null;function s(a){const c=a.target;c.removeEventListener("dispose",s);const l=e.get(c);void 0!==l&&(e.delete(c),l.dispose())}return{get:function i(a){if(a&&a.isTexture){const c=a.mapping,l=303===c||304===c,u=301===c||302===c;if(l||u){if(a.isRenderTargetTexture&&!0===a.needsPMREMUpdate){a.needsPMREMUpdate=!1;let f=e.get(a);return null===t&&(t=new Cw(n)),f=l?t.fromEquirectangular(a,f):t.fromCubemap(a,f),e.set(a,f),f.texture}if(e.has(a))return e.get(a).texture;{const f=a.image;if(l&&f&&f.height>0||u&&f&&function r(a){let c=0;for(let u=0;u<6;u++)void 0!==a[u]&&c++;return 6===c}(f)){null===t&&(t=new Cw(n));const d=l?t.fromEquirectangular(a):t.fromCubemap(a);return e.set(a,d),a.addEventListener("dispose",s),d.texture}return null}}}return a},dispose:function o(){e=new WeakMap,null!==t&&(t.dispose(),t=null)}}}function nte(n){const e={};function t(i){if(void 0!==e[i])return e[i];let r;switch(i){case"WEBGL_depth_texture":r=n.getExtension("WEBGL_depth_texture")||n.getExtension("MOZ_WEBGL_depth_texture")||n.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":r=n.getExtension("EXT_texture_filter_anisotropic")||n.getExtension("MOZ_EXT_texture_filter_anisotropic")||n.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":r=n.getExtension("WEBGL_compressed_texture_s3tc")||n.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||n.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":r=n.getExtension("WEBGL_compressed_texture_pvrtc")||n.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;default:r=n.getExtension(i)}return e[i]=r,r}return{has:function(i){return null!==t(i)},init:function(i){i.isWebGL2?t("EXT_color_buffer_float"):(t("WEBGL_depth_texture"),t("OES_texture_float"),t("OES_texture_half_float"),t("OES_texture_half_float_linear"),t("OES_standard_derivatives"),t("OES_element_index_uint"),t("OES_vertex_array_object"),t("ANGLE_instanced_arrays")),t("OES_texture_float_linear"),t("EXT_color_buffer_half_float"),t("WEBGL_multisampled_render_to_texture")},get:function(i){const r=t(i);return null===r&&console.warn("THREE.WebGLRenderer: "+i+" extension not supported."),r}}}function ite(n,e,t,i){const r={},s=new WeakMap;function o(f){const d=f.target;null!==d.index&&e.remove(d.index);for(const p in d.attributes)e.remove(d.attributes[p]);d.removeEventListener("dispose",o),delete r[d.id];const h=s.get(d);h&&(e.remove(h),s.delete(d)),i.releaseStatesOfGeometry(d),!0===d.isInstancedBufferGeometry&&delete d._maxInstanceCount,t.memory.geometries--}function l(f){const d=[],h=f.index,p=f.attributes.position;let g=0;if(null!==h){const x=h.array;g=h.version;for(let y=0,_=x.length;y<_;y+=3){const M=x[y+0],w=x[y+1],T=x[y+2];d.push(M,w,w,T,T,M)}}else{g=p.version;for(let y=0,_=p.array.length/3-1;y<_;y+=3){const M=y+0,w=y+1,T=y+2;d.push(M,w,w,T,T,M)}}const m=new(iw(d)?vw:gw)(d,1);m.version=g;const v=s.get(f);v&&e.remove(v),s.set(f,m)}return{get:function a(f,d){return!0===r[d.id]||(d.addEventListener("dispose",o),r[d.id]=!0,t.memory.geometries++),d},update:function c(f){const d=f.attributes;for(const p in d)e.update(d[p],34962);const h=f.morphAttributes;for(const p in h){const g=h[p];for(let m=0,v=g.length;m<v;m++)e.update(g[m],34962)}},getWireframeAttribute:function u(f){const d=s.get(f);if(d){const h=f.index;null!==h&&d.version<h.version&&l(f)}else l(f);return s.get(f)}}}function rte(n,e,t,i){const r=i.isWebGL2;let s,a,c;this.setMode=function o(d){s=d},this.setIndex=function l(d){a=d.type,c=d.bytesPerElement},this.render=function u(d,h){n.drawElements(s,h,a,d*c),t.update(h,s,1)},this.renderInstances=function f(d,h,p){if(0===p)return;let g,m;if(r)g=n,m="drawElementsInstanced";else if(g=e.get("ANGLE_instanced_arrays"),m="drawElementsInstancedANGLE",null===g)return void console.error("THREE.WebGLIndexedBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");g[m](s,h,a,d*c,p),t.update(h,s,p)}}function ste(n){const t={frame:0,calls:0,triangles:0,points:0,lines:0};return{memory:{geometries:0,textures:0},render:t,programs:null,autoReset:!0,reset:function r(){t.frame++,t.calls=0,t.triangles=0,t.points=0,t.lines=0},update:function i(s,o,a){switch(t.calls++,o){case 4:t.triangles+=a*(s/3);break;case 1:t.lines+=a*(s/2);break;case 3:t.lines+=a*(s-1);break;case 2:t.lines+=a*s;break;case 0:t.points+=a*s;break;default:console.error("THREE.WebGLInfo: Unknown draw mode:",o)}}}}function ote(n,e){return n[0]-e[0]}function ate(n,e){return Math.abs(e[1])-Math.abs(n[1])}function cte(n,e,t){const i={},r=new Float32Array(8),s=new WeakMap,o=new xt,a=[];for(let l=0;l<8;l++)a[l]=[l,0];return{update:function c(l,u,f,d){const h=l.morphTargetInfluences;if(!0===e.isWebGL2){const p=u.morphAttributes.position||u.morphAttributes.normal||u.morphAttributes.color,g=void 0!==p?p.length:0;let m=s.get(u);if(void 0===m||m.count!==g){let k=function(){O.dispose(),s.delete(u),u.removeEventListener("dispose",k)};void 0!==m&&m.texture.dispose();const y=void 0!==u.morphAttributes.position,_=void 0!==u.morphAttributes.normal,M=void 0!==u.morphAttributes.color,w=u.morphAttributes.position||[],T=u.morphAttributes.normal||[],b=u.morphAttributes.color||[];let D=0;!0===y&&(D=1),!0===_&&(D=2),!0===M&&(D=3);let I=u.attributes.position.count*D,N=1;I>e.maxTextureSize&&(N=Math.ceil(I/e.maxTextureSize),I=e.maxTextureSize);const J=new Float32Array(I*N*4*g),O=new h6(J,I,N,g);O.type=ks,O.needsUpdate=!0;const R=4*D;for(let Y=0;Y<g;Y++){const ee=w[Y],$=T[Y],ie=b[Y],Q=I*N*4*Y;for(let V=0;V<ee.count;V++){const H=V*R;!0===y&&(o.fromBufferAttribute(ee,V),J[Q+H+0]=o.x,J[Q+H+1]=o.y,J[Q+H+2]=o.z,J[Q+H+3]=0),!0===_&&(o.fromBufferAttribute($,V),J[Q+H+4]=o.x,J[Q+H+5]=o.y,J[Q+H+6]=o.z,J[Q+H+7]=0),!0===M&&(o.fromBufferAttribute(ie,V),J[Q+H+8]=o.x,J[Q+H+9]=o.y,J[Q+H+10]=o.z,J[Q+H+11]=4===ie.itemSize?o.w:1)}}m={count:g,texture:O,size:new K(I,N)},s.set(u,m),u.addEventListener("dispose",k)}let v=0;for(let y=0;y<h.length;y++)v+=h[y];const x=u.morphTargetsRelative?1:1-v;d.getUniforms().setValue(n,"morphTargetBaseInfluence",x),d.getUniforms().setValue(n,"morphTargetInfluences",h),d.getUniforms().setValue(n,"morphTargetsTexture",m.texture,t),d.getUniforms().setValue(n,"morphTargetsTextureSize",m.size)}else{const p=void 0===h?0:h.length;let g=i[u.id];if(void 0===g||g.length!==p){g=[];for(let _=0;_<p;_++)g[_]=[_,0];i[u.id]=g}for(let _=0;_<p;_++){const M=g[_];M[0]=_,M[1]=h[_]}g.sort(ate);for(let _=0;_<8;_++)_<p&&g[_][1]?(a[_][0]=g[_][0],a[_][1]=g[_][1]):(a[_][0]=Number.MAX_SAFE_INTEGER,a[_][1]=0);a.sort(ote);const m=u.morphAttributes.position,v=u.morphAttributes.normal;let x=0;for(let _=0;_<8;_++){const M=a[_],w=M[0],T=M[1];w!==Number.MAX_SAFE_INTEGER&&T?(m&&u.getAttribute("morphTarget"+_)!==m[w]&&u.setAttribute("morphTarget"+_,m[w]),v&&u.getAttribute("morphNormal"+_)!==v[w]&&u.setAttribute("morphNormal"+_,v[w]),r[_]=T,x+=T):(m&&!0===u.hasAttribute("morphTarget"+_)&&u.deleteAttribute("morphTarget"+_),v&&!0===u.hasAttribute("morphNormal"+_)&&u.deleteAttribute("morphNormal"+_),r[_]=0)}const y=u.morphTargetsRelative?1:1-x;d.getUniforms().setValue(n,"morphTargetBaseInfluence",y),d.getUniforms().setValue(n,"morphTargetInfluences",r)}}}}function lte(n,e,t,i){let r=new WeakMap;function a(c){const l=c.target;l.removeEventListener("dispose",a),t.remove(l.instanceMatrix),null!==l.instanceColor&&t.remove(l.instanceColor)}return{update:function s(c){const l=i.render.frame,f=e.get(c,c.geometry);return r.get(f)!==l&&(e.update(f),r.set(f,l)),c.isInstancedMesh&&(!1===c.hasEventListener("dispose",a)&&c.addEventListener("dispose",a),t.update(c.instanceMatrix,34962),null!==c.instanceColor&&t.update(c.instanceColor,34962)),f},dispose:function o(){r=new WeakMap}}}const Aw=new ur,Tw=new h6,Iw=new ow,Lw=new v4,Rw=[],zw=[],Pw=new Float32Array(16),Nw=new Float32Array(9),Ow=new Float32Array(4);function Ua(n,e,t){const i=n[0];if(i<=0||i>0)return n;const r=e*t;let s=Rw[r];if(void 0===s&&(s=new Float32Array(r),Rw[r]=s),0!==e){i.toArray(s,0);for(let o=1,a=0;o!==e;++o)a+=t,n[o].toArray(s,a)}return s}function wn(n,e){if(n.length!==e.length)return!1;for(let t=0,i=n.length;t<i;t++)if(n[t]!==e[t])return!1;return!0}function Cn(n,e){for(let t=0,i=e.length;t<i;t++)n[t]=e[t]}function M4(n,e){let t=zw[e];void 0===t&&(t=new Int32Array(e),zw[e]=t);for(let i=0;i!==e;++i)t[i]=n.allocateTextureUnit();return t}function ute(n,e){const t=this.cache;t[0]!==e&&(n.uniform1f(this.addr,e),t[0]=e)}function fte(n,e){const t=this.cache;if(void 0!==e.x)(t[0]!==e.x||t[1]!==e.y)&&(n.uniform2f(this.addr,e.x,e.y),t[0]=e.x,t[1]=e.y);else{if(wn(t,e))return;n.uniform2fv(this.addr,e),Cn(t,e)}}function dte(n,e){const t=this.cache;if(void 0!==e.x)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z)&&(n.uniform3f(this.addr,e.x,e.y,e.z),t[0]=e.x,t[1]=e.y,t[2]=e.z);else if(void 0!==e.r)(t[0]!==e.r||t[1]!==e.g||t[2]!==e.b)&&(n.uniform3f(this.addr,e.r,e.g,e.b),t[0]=e.r,t[1]=e.g,t[2]=e.b);else{if(wn(t,e))return;n.uniform3fv(this.addr,e),Cn(t,e)}}function hte(n,e){const t=this.cache;if(void 0!==e.x)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z||t[3]!==e.w)&&(n.uniform4f(this.addr,e.x,e.y,e.z,e.w),t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.w);else{if(wn(t,e))return;n.uniform4fv(this.addr,e),Cn(t,e)}}function pte(n,e){const t=this.cache,i=e.elements;if(void 0===i){if(wn(t,e))return;n.uniformMatrix2fv(this.addr,!1,e),Cn(t,e)}else{if(wn(t,i))return;Ow.set(i),n.uniformMatrix2fv(this.addr,!1,Ow),Cn(t,i)}}function mte(n,e){const t=this.cache,i=e.elements;if(void 0===i){if(wn(t,e))return;n.uniformMatrix3fv(this.addr,!1,e),Cn(t,e)}else{if(wn(t,i))return;Nw.set(i),n.uniformMatrix3fv(this.addr,!1,Nw),Cn(t,i)}}function gte(n,e){const t=this.cache,i=e.elements;if(void 0===i){if(wn(t,e))return;n.uniformMatrix4fv(this.addr,!1,e),Cn(t,e)}else{if(wn(t,i))return;Pw.set(i),n.uniformMatrix4fv(this.addr,!1,Pw),Cn(t,i)}}function vte(n,e){const t=this.cache;t[0]!==e&&(n.uniform1i(this.addr,e),t[0]=e)}function yte(n,e){const t=this.cache;if(void 0!==e.x)(t[0]!==e.x||t[1]!==e.y)&&(n.uniform2i(this.addr,e.x,e.y),t[0]=e.x,t[1]=e.y);else{if(wn(t,e))return;n.uniform2iv(this.addr,e),Cn(t,e)}}function _te(n,e){const t=this.cache;if(void 0!==e.x)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z)&&(n.uniform3i(this.addr,e.x,e.y,e.z),t[0]=e.x,t[1]=e.y,t[2]=e.z);else{if(wn(t,e))return;n.uniform3iv(this.addr,e),Cn(t,e)}}function xte(n,e){const t=this.cache;if(void 0!==e.x)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z||t[3]!==e.w)&&(n.uniform4i(this.addr,e.x,e.y,e.z,e.w),t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.w);else{if(wn(t,e))return;n.uniform4iv(this.addr,e),Cn(t,e)}}function bte(n,e){const t=this.cache;t[0]!==e&&(n.uniform1ui(this.addr,e),t[0]=e)}function Mte(n,e){const t=this.cache;if(void 0!==e.x)(t[0]!==e.x||t[1]!==e.y)&&(n.uniform2ui(this.addr,e.x,e.y),t[0]=e.x,t[1]=e.y);else{if(wn(t,e))return;n.uniform2uiv(this.addr,e),Cn(t,e)}}function wte(n,e){const t=this.cache;if(void 0!==e.x)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z)&&(n.uniform3ui(this.addr,e.x,e.y,e.z),t[0]=e.x,t[1]=e.y,t[2]=e.z);else{if(wn(t,e))return;n.uniform3uiv(this.addr,e),Cn(t,e)}}function Cte(n,e){const t=this.cache;if(void 0!==e.x)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z||t[3]!==e.w)&&(n.uniform4ui(this.addr,e.x,e.y,e.z,e.w),t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.w);else{if(wn(t,e))return;n.uniform4uiv(this.addr,e),Cn(t,e)}}function Ste(n,e,t){const i=this.cache,r=t.allocateTextureUnit();i[0]!==r&&(n.uniform1i(this.addr,r),i[0]=r),t.setTexture2D(e||Aw,r)}function Ete(n,e,t){const i=this.cache,r=t.allocateTextureUnit();i[0]!==r&&(n.uniform1i(this.addr,r),i[0]=r),t.setTexture3D(e||Iw,r)}function Dte(n,e,t){const i=this.cache,r=t.allocateTextureUnit();i[0]!==r&&(n.uniform1i(this.addr,r),i[0]=r),t.setTextureCube(e||Lw,r)}function Ate(n,e,t){const i=this.cache,r=t.allocateTextureUnit();i[0]!==r&&(n.uniform1i(this.addr,r),i[0]=r),t.setTexture2DArray(e||Tw,r)}function Ite(n,e){n.uniform1fv(this.addr,e)}function Lte(n,e){const t=Ua(e,this.size,2);n.uniform2fv(this.addr,t)}function Rte(n,e){const t=Ua(e,this.size,3);n.uniform3fv(this.addr,t)}function zte(n,e){const t=Ua(e,this.size,4);n.uniform4fv(this.addr,t)}function Pte(n,e){const t=Ua(e,this.size,4);n.uniformMatrix2fv(this.addr,!1,t)}function Nte(n,e){const t=Ua(e,this.size,9);n.uniformMatrix3fv(this.addr,!1,t)}function Ote(n,e){const t=Ua(e,this.size,16);n.uniformMatrix4fv(this.addr,!1,t)}function Fte(n,e){n.uniform1iv(this.addr,e)}function kte(n,e){n.uniform2iv(this.addr,e)}function Vte(n,e){n.uniform3iv(this.addr,e)}function Hte(n,e){n.uniform4iv(this.addr,e)}function Ute(n,e){n.uniform1uiv(this.addr,e)}function Bte(n,e){n.uniform2uiv(this.addr,e)}function Gte(n,e){n.uniform3uiv(this.addr,e)}function Wte(n,e){n.uniform4uiv(this.addr,e)}function $te(n,e,t){const i=this.cache,r=e.length,s=M4(t,r);wn(i,s)||(n.uniform1iv(this.addr,s),Cn(i,s));for(let o=0;o!==r;++o)t.setTexture2D(e[o]||Aw,s[o])}function jte(n,e,t){const i=this.cache,r=e.length,s=M4(t,r);wn(i,s)||(n.uniform1iv(this.addr,s),Cn(i,s));for(let o=0;o!==r;++o)t.setTexture3D(e[o]||Iw,s[o])}function qte(n,e,t){const i=this.cache,r=e.length,s=M4(t,r);wn(i,s)||(n.uniform1iv(this.addr,s),Cn(i,s));for(let o=0;o!==r;++o)t.setTextureCube(e[o]||Lw,s[o])}function Zte(n,e,t){const i=this.cache,r=e.length,s=M4(t,r);wn(i,s)||(n.uniform1iv(this.addr,s),Cn(i,s));for(let o=0;o!==r;++o)t.setTexture2DArray(e[o]||Tw,s[o])}class Xte{constructor(e,t,i){this.id=e,this.addr=i,this.cache=[],this.setValue=function Tte(n){switch(n){case 5126:return ute;case 35664:return fte;case 35665:return dte;case 35666:return hte;case 35674:return pte;case 35675:return mte;case 35676:return gte;case 5124:case 35670:return vte;case 35667:case 35671:return yte;case 35668:case 35672:return _te;case 35669:case 35673:return xte;case 5125:return bte;case 36294:return Mte;case 36295:return wte;case 36296:return Cte;case 35678:case 36198:case 36298:case 36306:case 35682:return Ste;case 35679:case 36299:case 36307:return Ete;case 35680:case 36300:case 36308:case 36293:return Dte;case 36289:case 36303:case 36311:case 36292:return Ate}}(t.type)}}class Kte{constructor(e,t,i){this.id=e,this.addr=i,this.cache=[],this.size=t.size,this.setValue=function Yte(n){switch(n){case 5126:return Ite;case 35664:return Lte;case 35665:return Rte;case 35666:return zte;case 35674:return Pte;case 35675:return Nte;case 35676:return Ote;case 5124:case 35670:return Fte;case 35667:case 35671:return kte;case 35668:case 35672:return Vte;case 35669:case 35673:return Hte;case 5125:return Ute;case 36294:return Bte;case 36295:return Gte;case 36296:return Wte;case 35678:case 36198:case 36298:case 36306:case 35682:return $te;case 35679:case 36299:case 36307:return jte;case 35680:case 36300:case 36308:case 36293:return qte;case 36289:case 36303:case 36311:case 36292:return Zte}}(t.type)}}class Jte{constructor(e){this.id=e,this.seq=[],this.map={}}setValue(e,t,i){const r=this.seq;for(let s=0,o=r.length;s!==o;++s){const a=r[s];a.setValue(e,t[a.id],i)}}}const k6=/(\w+)(\])?(\[|\.)?/g;function Fw(n,e){n.seq.push(e),n.map[e.id]=e}function Qte(n,e,t){const i=n.name,r=i.length;for(k6.lastIndex=0;;){const s=k6.exec(i),o=k6.lastIndex;let a=s[1];const l=s[3];if("]"===s[2]&&(a|=0),void 0===l||"["===l&&o+2===r){Fw(t,void 0===l?new Xte(a,n,e):new Kte(a,n,e));break}{let f=t.map[a];void 0===f&&(f=new Jte(a),Fw(t,f)),t=f}}}class w4{constructor(e,t){this.seq=[],this.map={};const i=e.getProgramParameter(t,35718);for(let r=0;r<i;++r){const s=e.getActiveUniform(t,r);Qte(s,e.getUniformLocation(t,s.name),this)}}setValue(e,t,i,r){const s=this.map[t];void 0!==s&&s.setValue(e,i,r)}setOptional(e,t,i){const r=t[i];void 0!==r&&this.setValue(e,i,r)}static upload(e,t,i,r){for(let s=0,o=t.length;s!==o;++s){const a=t[s],c=i[a.id];!1!==c.needsUpdate&&a.setValue(e,c.value,r)}}static seqWithValue(e,t){const i=[];for(let r=0,s=e.length;r!==s;++r){const o=e[r];o.id in t&&i.push(o)}return i}}function kw(n,e,t){const i=n.createShader(e);return n.shaderSource(i,t),n.compileShader(i),i}let ene=0;function Vw(n,e,t){const i=n.getShaderParameter(e,35713),r=n.getShaderInfoLog(e).trim();if(i&&""===r)return"";const s=/ERROR: 0:(\d+)/.exec(r);if(s){const o=parseInt(s[1]);return t.toUpperCase()+"\n\n"+r+"\n\n"+function tne(n,e){const t=n.split("\n"),i=[],r=Math.max(e-6,0),s=Math.min(e+6,t.length);for(let o=r;o<s;o++){const a=o+1;i.push(`${a===e?">":" "} ${a}: ${t[o]}`)}return i.join("\n")}(n.getShaderSource(e),o)}return r}function ine(n,e){const t=function nne(n){switch(n){case P1:return["Linear","( value )"];case Et:return["sRGB","( value )"];default:return console.warn("THREE.WebGLProgram: Unsupported encoding:",n),["Linear","( value )"]}}(e);return"vec4 "+n+"( vec4 value ) { return LinearTo"+t[0]+t[1]+"; }"}function rne(n,e){let t;switch(e){case 1:t="Linear";break;case 2:t="Reinhard";break;case 3:t="OptimizedCineon";break;case 4:t="ACESFilmic";break;case 5:t="Custom";break;default:console.warn("THREE.WebGLProgram: Unsupported toneMapping:",e),t="Linear"}return"vec3 "+n+"( vec3 color ) { return "+t+"ToneMapping( color ); }"}function qc(n){return""!==n}function Hw(n,e){const t=e.numSpotLightShadows+e.numSpotLightMaps-e.numSpotLightShadowsWithMaps;return n.replace(/NUM_DIR_LIGHTS/g,e.numDirLights).replace(/NUM_SPOT_LIGHTS/g,e.numSpotLights).replace(/NUM_SPOT_LIGHT_MAPS/g,e.numSpotLightMaps).replace(/NUM_SPOT_LIGHT_COORDS/g,t).replace(/NUM_RECT_AREA_LIGHTS/g,e.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,e.numPointLights).replace(/NUM_HEMI_LIGHTS/g,e.numHemiLights).replace(/NUM_DIR_LIGHT_SHADOWS/g,e.numDirLightShadows).replace(/NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS/g,e.numSpotLightShadowsWithMaps).replace(/NUM_SPOT_LIGHT_SHADOWS/g,e.numSpotLightShadows).replace(/NUM_POINT_LIGHT_SHADOWS/g,e.numPointLightShadows)}function Uw(n,e){return n.replace(/NUM_CLIPPING_PLANES/g,e.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,e.numClippingPlanes-e.numClipIntersection)}const cne=/^[ \t]*#include +<([\w\d./]+)>/gm;function V6(n){return n.replace(cne,lne)}function lne(n,e){const t=rt[e];if(void 0===t)throw new Error("Can not resolve #include <"+e+">");return V6(t)}const une=/#pragma unroll_loop_start\s+for\s*\(\s*int\s+i\s*=\s*(\d+)\s*;\s*i\s*<\s*(\d+)\s*;\s*i\s*\+\+\s*\)\s*{([\s\S]+?)}\s+#pragma unroll_loop_end/g;function Bw(n){return n.replace(une,fne)}function fne(n,e,t,i){let r="";for(let s=parseInt(e);s<parseInt(t);s++)r+=i.replace(/\[\s*i\s*\]/g,"[ "+s+" ]").replace(/UNROLLED_LOOP_INDEX/g,s);return r}function Gw(n){let e="precision "+n.precision+" float;\nprecision "+n.precision+" int;";return"highp"===n.precision?e+="\n#define HIGH_PRECISION":"mediump"===n.precision?e+="\n#define MEDIUM_PRECISION":"lowp"===n.precision&&(e+="\n#define LOW_PRECISION"),e}function vne(n,e,t,i){const r=n.getContext(),s=t.defines;let o=t.vertexShader,a=t.fragmentShader;const c=function dne(n){let e="SHADOWMAP_TYPE_BASIC";return 1===n.shadowMapType?e="SHADOWMAP_TYPE_PCF":2===n.shadowMapType?e="SHADOWMAP_TYPE_PCF_SOFT":3===n.shadowMapType&&(e="SHADOWMAP_TYPE_VSM"),e}(t),l=function hne(n){let e="ENVMAP_TYPE_CUBE";if(n.envMap)switch(n.envMapMode){case 301:case 302:e="ENVMAP_TYPE_CUBE";break;case 306:e="ENVMAP_TYPE_CUBE_UV"}return e}(t),u=function pne(n){let e="ENVMAP_MODE_REFLECTION";return n.envMap&&302===n.envMapMode&&(e="ENVMAP_MODE_REFRACTION"),e}(t),f=function mne(n){let e="ENVMAP_BLENDING_NONE";if(n.envMap)switch(n.combine){case 0:e="ENVMAP_BLENDING_MULTIPLY";break;case 1:e="ENVMAP_BLENDING_MIX";break;case 2:e="ENVMAP_BLENDING_ADD"}return e}(t),d=function gne(n){const e=n.envMapCubeUVHeight;if(null===e)return null;const t=Math.log2(e)-2,i=1/e;return{texelWidth:1/(3*Math.max(Math.pow(2,t),112)),texelHeight:i,maxMip:t}}(t),h=t.isWebGL2?"":function sne(n){return[n.extensionDerivatives||n.envMapCubeUVHeight||n.bumpMap||n.tangentSpaceNormalMap||n.clearcoatNormalMap||n.flatShading||"physical"===n.shaderID?"#extension GL_OES_standard_derivatives : enable":"",(n.extensionFragDepth||n.logarithmicDepthBuffer)&&n.rendererExtensionFragDepth?"#extension GL_EXT_frag_depth : enable":"",n.extensionDrawBuffers&&n.rendererExtensionDrawBuffers?"#extension GL_EXT_draw_buffers : require":"",(n.extensionShaderTextureLOD||n.envMap||n.transmission)&&n.rendererExtensionShaderTextureLod?"#extension GL_EXT_shader_texture_lod : enable":""].filter(qc).join("\n")}(t),p=function one(n){const e=[];for(const t in n){const i=n[t];!1!==i&&e.push("#define "+t+" "+i)}return e.join("\n")}(s),g=r.createProgram();let m,v,x=t.glslVersion?"#version "+t.glslVersion+"\n":"";t.isRawShaderMaterial?(m=[p].filter(qc).join("\n"),m.length>0&&(m+="\n"),v=[h,p].filter(qc).join("\n"),v.length>0&&(v+="\n")):(m=[Gw(t),"#define SHADER_NAME "+t.shaderName,p,t.instancing?"#define USE_INSTANCING":"",t.instancingColor?"#define USE_INSTANCING_COLOR":"",t.supportsVertexTextures?"#define VERTEX_TEXTURES":"",t.useFog&&t.fog?"#define USE_FOG":"",t.useFog&&t.fogExp2?"#define FOG_EXP2":"",t.map?"#define USE_MAP":"",t.envMap?"#define USE_ENVMAP":"",t.envMap?"#define "+u:"",t.lightMap?"#define USE_LIGHTMAP":"",t.aoMap?"#define USE_AOMAP":"",t.emissiveMap?"#define USE_EMISSIVEMAP":"",t.bumpMap?"#define USE_BUMPMAP":"",t.normalMap?"#define USE_NORMALMAP":"",t.normalMap&&t.objectSpaceNormalMap?"#define OBJECTSPACE_NORMALMAP":"",t.normalMap&&t.tangentSpaceNormalMap?"#define TANGENTSPACE_NORMALMAP":"",t.clearcoatMap?"#define USE_CLEARCOATMAP":"",t.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",t.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",t.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",t.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",t.displacementMap&&t.supportsVertexTextures?"#define USE_DISPLACEMENTMAP":"",t.specularMap?"#define USE_SPECULARMAP":"",t.specularIntensityMap?"#define USE_SPECULARINTENSITYMAP":"",t.specularColorMap?"#define USE_SPECULARCOLORMAP":"",t.roughnessMap?"#define USE_ROUGHNESSMAP":"",t.metalnessMap?"#define USE_METALNESSMAP":"",t.alphaMap?"#define USE_ALPHAMAP":"",t.transmission?"#define USE_TRANSMISSION":"",t.transmissionMap?"#define USE_TRANSMISSIONMAP":"",t.thicknessMap?"#define USE_THICKNESSMAP":"",t.sheenColorMap?"#define USE_SHEENCOLORMAP":"",t.sheenRoughnessMap?"#define USE_SHEENROUGHNESSMAP":"",t.vertexTangents?"#define USE_TANGENT":"",t.vertexColors?"#define USE_COLOR":"",t.vertexAlphas?"#define USE_COLOR_ALPHA":"",t.vertexUvs?"#define USE_UV":"",t.uvsVertexOnly?"#define UVS_VERTEX_ONLY":"",t.flatShading?"#define FLAT_SHADED":"",t.skinning?"#define USE_SKINNING":"",t.morphTargets?"#define USE_MORPHTARGETS":"",t.morphNormals&&!1===t.flatShading?"#define USE_MORPHNORMALS":"",t.morphColors&&t.isWebGL2?"#define USE_MORPHCOLORS":"",t.morphTargetsCount>0&&t.isWebGL2?"#define MORPHTARGETS_TEXTURE":"",t.morphTargetsCount>0&&t.isWebGL2?"#define MORPHTARGETS_TEXTURE_STRIDE "+t.morphTextureStride:"",t.morphTargetsCount>0&&t.isWebGL2?"#define MORPHTARGETS_COUNT "+t.morphTargetsCount:"",t.doubleSided?"#define DOUBLE_SIDED":"",t.flipSided?"#define FLIP_SIDED":"",t.shadowMapEnabled?"#define USE_SHADOWMAP":"",t.shadowMapEnabled?"#define "+c:"",t.sizeAttenuation?"#define USE_SIZEATTENUATION":"",t.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",t.logarithmicDepthBuffer&&t.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;","#ifdef USE_INSTANCING","\tattribute mat4 instanceMatrix;","#endif","#ifdef USE_INSTANCING_COLOR","\tattribute vec3 instanceColor;","#endif","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_TANGENT","\tattribute vec4 tangent;","#endif","#if defined( USE_COLOR_ALPHA )","\tattribute vec4 color;","#elif defined( USE_COLOR )","\tattribute vec3 color;","#endif","#if ( defined( USE_MORPHTARGETS ) && ! defined( MORPHTARGETS_TEXTURE ) )","\tattribute vec3 morphTarget0;","\tattribute vec3 morphTarget1;","\tattribute vec3 morphTarget2;","\tattribute vec3 morphTarget3;","\t#ifdef USE_MORPHNORMALS","\t\tattribute vec3 morphNormal0;","\t\tattribute vec3 morphNormal1;","\t\tattribute vec3 morphNormal2;","\t\tattribute vec3 morphNormal3;","\t#else","\t\tattribute vec3 morphTarget4;","\t\tattribute vec3 morphTarget5;","\t\tattribute vec3 morphTarget6;","\t\tattribute vec3 morphTarget7;","\t#endif","#endif","#ifdef USE_SKINNING","\tattribute vec4 skinIndex;","\tattribute vec4 skinWeight;","#endif","\n"].filter(qc).join("\n"),v=[h,Gw(t),"#define SHADER_NAME "+t.shaderName,p,t.useFog&&t.fog?"#define USE_FOG":"",t.useFog&&t.fogExp2?"#define FOG_EXP2":"",t.map?"#define USE_MAP":"",t.matcap?"#define USE_MATCAP":"",t.envMap?"#define USE_ENVMAP":"",t.envMap?"#define "+l:"",t.envMap?"#define "+u:"",t.envMap?"#define "+f:"",d?"#define CUBEUV_TEXEL_WIDTH "+d.texelWidth:"",d?"#define CUBEUV_TEXEL_HEIGHT "+d.texelHeight:"",d?"#define CUBEUV_MAX_MIP "+d.maxMip+".0":"",t.lightMap?"#define USE_LIGHTMAP":"",t.aoMap?"#define USE_AOMAP":"",t.emissiveMap?"#define USE_EMISSIVEMAP":"",t.bumpMap?"#define USE_BUMPMAP":"",t.normalMap?"#define USE_NORMALMAP":"",t.normalMap&&t.objectSpaceNormalMap?"#define OBJECTSPACE_NORMALMAP":"",t.normalMap&&t.tangentSpaceNormalMap?"#define TANGENTSPACE_NORMALMAP":"",t.clearcoat?"#define USE_CLEARCOAT":"",t.clearcoatMap?"#define USE_CLEARCOATMAP":"",t.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",t.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",t.iridescence?"#define USE_IRIDESCENCE":"",t.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",t.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",t.specularMap?"#define USE_SPECULARMAP":"",t.specularIntensityMap?"#define USE_SPECULARINTENSITYMAP":"",t.specularColorMap?"#define USE_SPECULARCOLORMAP":"",t.roughnessMap?"#define USE_ROUGHNESSMAP":"",t.metalnessMap?"#define USE_METALNESSMAP":"",t.alphaMap?"#define USE_ALPHAMAP":"",t.alphaTest?"#define USE_ALPHATEST":"",t.sheen?"#define USE_SHEEN":"",t.sheenColorMap?"#define USE_SHEENCOLORMAP":"",t.sheenRoughnessMap?"#define USE_SHEENROUGHNESSMAP":"",t.transmission?"#define USE_TRANSMISSION":"",t.transmissionMap?"#define USE_TRANSMISSIONMAP":"",t.thicknessMap?"#define USE_THICKNESSMAP":"",t.decodeVideoTexture?"#define DECODE_VIDEO_TEXTURE":"",t.vertexTangents?"#define USE_TANGENT":"",t.vertexColors||t.instancingColor?"#define USE_COLOR":"",t.vertexAlphas?"#define USE_COLOR_ALPHA":"",t.vertexUvs?"#define USE_UV":"",t.uvsVertexOnly?"#define UVS_VERTEX_ONLY":"",t.gradientMap?"#define USE_GRADIENTMAP":"",t.flatShading?"#define FLAT_SHADED":"",t.doubleSided?"#define DOUBLE_SIDED":"",t.flipSided?"#define FLIP_SIDED":"",t.shadowMapEnabled?"#define USE_SHADOWMAP":"",t.shadowMapEnabled?"#define "+c:"",t.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",t.physicallyCorrectLights?"#define PHYSICALLY_CORRECT_LIGHTS":"",t.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",t.logarithmicDepthBuffer&&t.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;",0!==t.toneMapping?"#define TONE_MAPPING":"",0!==t.toneMapping?rt.tonemapping_pars_fragment:"",0!==t.toneMapping?rne("toneMapping",t.toneMapping):"",t.dithering?"#define DITHERING":"",t.opaque?"#define OPAQUE":"",rt.encodings_pars_fragment,ine("linearToOutputTexel",t.outputEncoding),t.useDepthPacking?"#define DEPTH_PACKING "+t.depthPacking:"","\n"].filter(qc).join("\n")),o=V6(o),o=Hw(o,t),o=Uw(o,t),a=V6(a),a=Hw(a,t),a=Uw(a,t),o=Bw(o),a=Bw(a),t.isWebGL2&&!0!==t.isRawShaderMaterial&&(x="#version 300 es\n",m=["precision mediump sampler2DArray;","#define attribute in","#define varying out","#define texture2D texture"].join("\n")+"\n"+m,v=["#define varying in","300 es"===t.glslVersion?"":"layout(location = 0) out highp vec4 pc_fragColor;","300 es"===t.glslVersion?"":"#define gl_FragColor pc_fragColor","#define gl_FragDepthEXT gl_FragDepth","#define texture2D texture","#define textureCube texture","#define texture2DProj textureProj","#define texture2DLodEXT textureLod","#define texture2DProjLodEXT textureProjLod","#define textureCubeLodEXT textureLod","#define texture2DGradEXT textureGrad","#define texture2DProjGradEXT textureProjGrad","#define textureCubeGradEXT textureGrad"].join("\n")+"\n"+v);const _=x+v+a,M=kw(r,35633,x+m+o),w=kw(r,35632,_);if(r.attachShader(g,M),r.attachShader(g,w),void 0!==t.index0AttributeName?r.bindAttribLocation(g,0,t.index0AttributeName):!0===t.morphTargets&&r.bindAttribLocation(g,0,"position"),r.linkProgram(g),n.debug.checkShaderErrors){const D=r.getProgramInfoLog(g).trim(),I=r.getShaderInfoLog(M).trim(),N=r.getShaderInfoLog(w).trim();let J=!0,O=!0;if(!1===r.getProgramParameter(g,35714)){J=!1;const R=Vw(r,M,"vertex"),k=Vw(r,w,"fragment");console.error("THREE.WebGLProgram: Shader Error "+r.getError()+" - VALIDATE_STATUS "+r.getProgramParameter(g,35715)+"\n\nProgram Info Log: "+D+"\n"+R+"\n"+k)}else""!==D?console.warn("THREE.WebGLProgram: Program Info Log:",D):(""===I||""===N)&&(O=!1);O&&(this.diagnostics={runnable:J,programLog:D,vertexShader:{log:I,prefix:m},fragmentShader:{log:N,prefix:v}})}let T,b;return r.deleteShader(M),r.deleteShader(w),this.getUniforms=function(){return void 0===T&&(T=new w4(r,g)),T},this.getAttributes=function(){return void 0===b&&(b=function ane(n,e){const t={},i=n.getProgramParameter(e,35721);for(let r=0;r<i;r++){const s=n.getActiveAttrib(e,r),o=s.name;let a=1;35674===s.type&&(a=2),35675===s.type&&(a=3),35676===s.type&&(a=4),t[o]={type:s.type,location:n.getAttribLocation(e,o),locationSize:a}}return t}(r,g)),b},this.destroy=function(){i.releaseStatesOfProgram(this),r.deleteProgram(g),this.program=void 0},this.name=t.shaderName,this.id=ene++,this.cacheKey=e,this.usedTimes=1,this.program=g,this.vertexShader=M,this.fragmentShader=w,this}let yne=0;class _ne{constructor(){this.shaderCache=new Map,this.materialCache=new Map}update(e){const i=e.fragmentShader,r=this._getShaderStage(e.vertexShader),s=this._getShaderStage(i),o=this._getShaderCacheForMaterial(e);return!1===o.has(r)&&(o.add(r),r.usedTimes++),!1===o.has(s)&&(o.add(s),s.usedTimes++),this}remove(e){const t=this.materialCache.get(e);for(const i of t)i.usedTimes--,0===i.usedTimes&&this.shaderCache.delete(i.code);return this.materialCache.delete(e),this}getVertexShaderID(e){return this._getShaderStage(e.vertexShader).id}getFragmentShaderID(e){return this._getShaderStage(e.fragmentShader).id}dispose(){this.shaderCache.clear(),this.materialCache.clear()}_getShaderCacheForMaterial(e){const t=this.materialCache;let i=t.get(e);return void 0===i&&(i=new Set,t.set(e,i)),i}_getShaderStage(e){const t=this.shaderCache;let i=t.get(e);return void 0===i&&(i=new xne(e),t.set(e,i)),i}}class xne{constructor(e){this.id=yne++,this.code=e,this.usedTimes=0}}function bne(n,e,t,i,r,s,o){const a=new b6,c=new _ne,l=[],u=r.isWebGL2,f=r.logarithmicDepthBuffer,d=r.vertexTextures;let h=r.precision;const p={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"toon",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",MeshMatcapMaterial:"matcap",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow",SpriteMaterial:"sprite"};return{getParameters:function g(b,D,I,N,J){const O=N.fog,R=J.geometry,Y=(b.isMeshStandardMaterial?t:e).get(b.envMap||(b.isMeshStandardMaterial?N.environment:null)),ee=Y&&306===Y.mapping?Y.image.height:null,$=p[b.type];null!==b.precision&&(h=r.getMaxPrecision(b.precision),h!==b.precision&&console.warn("THREE.WebGLProgram.getParameters:",b.precision,"not supported, using",h,"instead."));const ie=R.morphAttributes.position||R.morphAttributes.normal||R.morphAttributes.color,Q=void 0!==ie?ie.length:0;let H,ae,re,me,V=0;if(void 0!==R.morphAttributes.position&&(V=1),void 0!==R.morphAttributes.normal&&(V=2),void 0!==R.morphAttributes.color&&(V=3),$){const ot=Rr[$];H=ot.vertexShader,ae=ot.fragmentShader}else H=b.vertexShader,ae=b.fragmentShader,c.update(b),re=c.getVertexShaderID(b),me=c.getFragmentShaderID(b);const G=n.getRenderTarget(),Me=b.clearcoat>0,Ge=b.iridescence>0;return{isWebGL2:u,shaderID:$,shaderName:b.type,vertexShader:H,fragmentShader:ae,defines:b.defines,customVertexShaderID:re,customFragmentShaderID:me,isRawShaderMaterial:!0===b.isRawShaderMaterial,glslVersion:b.glslVersion,precision:h,instancing:!0===J.isInstancedMesh,instancingColor:!0===J.isInstancedMesh&&null!==J.instanceColor,supportsVertexTextures:d,outputEncoding:null===G?n.outputEncoding:!0===G.isXRRenderTarget?G.texture.encoding:P1,map:!!b.map,matcap:!!b.matcap,envMap:!!Y,envMapMode:Y&&Y.mapping,envMapCubeUVHeight:ee,lightMap:!!b.lightMap,aoMap:!!b.aoMap,emissiveMap:!!b.emissiveMap,bumpMap:!!b.bumpMap,normalMap:!!b.normalMap,objectSpaceNormalMap:1===b.normalMapType,tangentSpaceNormalMap:0===b.normalMapType,decodeVideoTexture:!!b.map&&!0===b.map.isVideoTexture&&b.map.encoding===Et,clearcoat:Me,clearcoatMap:Me&&!!b.clearcoatMap,clearcoatRoughnessMap:Me&&!!b.clearcoatRoughnessMap,clearcoatNormalMap:Me&&!!b.clearcoatNormalMap,iridescence:Ge,iridescenceMap:Ge&&!!b.iridescenceMap,iridescenceThicknessMap:Ge&&!!b.iridescenceThicknessMap,displacementMap:!!b.displacementMap,roughnessMap:!!b.roughnessMap,metalnessMap:!!b.metalnessMap,specularMap:!!b.specularMap,specularIntensityMap:!!b.specularIntensityMap,specularColorMap:!!b.specularColorMap,opaque:!1===b.transparent&&1===b.blending,alphaMap:!!b.alphaMap,alphaTest:b.alphaTest>0,gradientMap:!!b.gradientMap,sheen:b.sheen>0,sheenColorMap:!!b.sheenColorMap,sheenRoughnessMap:!!b.sheenRoughnessMap,transmission:b.transmission>0,transmissionMap:!!b.transmissionMap,thicknessMap:!!b.thicknessMap,combine:b.combine,vertexTangents:!!b.normalMap&&!!R.attributes.tangent,vertexColors:b.vertexColors,vertexAlphas:!0===b.vertexColors&&!!R.attributes.color&&4===R.attributes.color.itemSize,vertexUvs:!!(b.map||b.bumpMap||b.normalMap||b.specularMap||b.alphaMap||b.emissiveMap||b.roughnessMap||b.metalnessMap||b.clearcoatMap||b.clearcoatRoughnessMap||b.clearcoatNormalMap||b.iridescenceMap||b.iridescenceThicknessMap||b.displacementMap||b.transmissionMap||b.thicknessMap||b.specularIntensityMap||b.specularColorMap||b.sheenColorMap||b.sheenRoughnessMap),uvsVertexOnly:!(b.map||b.bumpMap||b.normalMap||b.specularMap||b.alphaMap||b.emissiveMap||b.roughnessMap||b.metalnessMap||b.clearcoatNormalMap||b.iridescenceMap||b.iridescenceThicknessMap||b.transmission>0||b.transmissionMap||b.thicknessMap||b.specularIntensityMap||b.specularColorMap||b.sheen>0||b.sheenColorMap||b.sheenRoughnessMap||!b.displacementMap),fog:!!O,useFog:!0===b.fog,fogExp2:O&&O.isFogExp2,flatShading:!!b.flatShading,sizeAttenuation:b.sizeAttenuation,logarithmicDepthBuffer:f,skinning:!0===J.isSkinnedMesh,morphTargets:void 0!==R.morphAttributes.position,morphNormals:void 0!==R.morphAttributes.normal,morphColors:void 0!==R.morphAttributes.color,morphTargetsCount:Q,morphTextureStride:V,numDirLights:D.directional.length,numPointLights:D.point.length,numSpotLights:D.spot.length,numSpotLightMaps:D.spotLightMap.length,numRectAreaLights:D.rectArea.length,numHemiLights:D.hemi.length,numDirLightShadows:D.directionalShadowMap.length,numPointLightShadows:D.pointShadowMap.length,numSpotLightShadows:D.spotShadowMap.length,numSpotLightShadowsWithMaps:D.numSpotLightShadowsWithMaps,numClippingPlanes:o.numPlanes,numClipIntersection:o.numIntersection,dithering:b.dithering,shadowMapEnabled:n.shadowMap.enabled&&I.length>0,shadowMapType:n.shadowMap.type,toneMapping:b.toneMapped?n.toneMapping:0,physicallyCorrectLights:n.physicallyCorrectLights,premultipliedAlpha:b.premultipliedAlpha,doubleSided:2===b.side,flipSided:1===b.side,useDepthPacking:!!b.depthPacking,depthPacking:b.depthPacking||0,index0AttributeName:b.index0AttributeName,extensionDerivatives:b.extensions&&b.extensions.derivatives,extensionFragDepth:b.extensions&&b.extensions.fragDepth,extensionDrawBuffers:b.extensions&&b.extensions.drawBuffers,extensionShaderTextureLOD:b.extensions&&b.extensions.shaderTextureLOD,rendererExtensionFragDepth:u||i.has("EXT_frag_depth"),rendererExtensionDrawBuffers:u||i.has("WEBGL_draw_buffers"),rendererExtensionShaderTextureLod:u||i.has("EXT_shader_texture_lod"),customProgramCacheKey:b.customProgramCacheKey()}},getProgramCacheKey:function m(b){const D=[];if(b.shaderID?D.push(b.shaderID):(D.push(b.customVertexShaderID),D.push(b.customFragmentShaderID)),void 0!==b.defines)for(const I in b.defines)D.push(I),D.push(b.defines[I]);return!1===b.isRawShaderMaterial&&(function v(b,D){b.push(D.precision),b.push(D.outputEncoding),b.push(D.envMapMode),b.push(D.envMapCubeUVHeight),b.push(D.combine),b.push(D.vertexUvs),b.push(D.fogExp2),b.push(D.sizeAttenuation),b.push(D.morphTargetsCount),b.push(D.morphAttributeCount),b.push(D.numDirLights),b.push(D.numPointLights),b.push(D.numSpotLights),b.push(D.numSpotLightMaps),b.push(D.numHemiLights),b.push(D.numRectAreaLights),b.push(D.numDirLightShadows),b.push(D.numPointLightShadows),b.push(D.numSpotLightShadows),b.push(D.numSpotLightShadowsWithMaps),b.push(D.shadowMapType),b.push(D.toneMapping),b.push(D.numClippingPlanes),b.push(D.numClipIntersection),b.push(D.depthPacking)}(D,b),function x(b,D){a.disableAll(),D.isWebGL2&&a.enable(0),D.supportsVertexTextures&&a.enable(1),D.instancing&&a.enable(2),D.instancingColor&&a.enable(3),D.map&&a.enable(4),D.matcap&&a.enable(5),D.envMap&&a.enable(6),D.lightMap&&a.enable(7),D.aoMap&&a.enable(8),D.emissiveMap&&a.enable(9),D.bumpMap&&a.enable(10),D.normalMap&&a.enable(11),D.objectSpaceNormalMap&&a.enable(12),D.tangentSpaceNormalMap&&a.enable(13),D.clearcoat&&a.enable(14),D.clearcoatMap&&a.enable(15),D.clearcoatRoughnessMap&&a.enable(16),D.clearcoatNormalMap&&a.enable(17),D.iridescence&&a.enable(18),D.iridescenceMap&&a.enable(19),D.iridescenceThicknessMap&&a.enable(20),D.displacementMap&&a.enable(21),D.specularMap&&a.enable(22),D.roughnessMap&&a.enable(23),D.metalnessMap&&a.enable(24),D.gradientMap&&a.enable(25),D.alphaMap&&a.enable(26),D.alphaTest&&a.enable(27),D.vertexColors&&a.enable(28),D.vertexAlphas&&a.enable(29),D.vertexUvs&&a.enable(30),D.vertexTangents&&a.enable(31),D.uvsVertexOnly&&a.enable(32),b.push(a.mask),a.disableAll(),D.fog&&a.enable(0),D.useFog&&a.enable(1),D.flatShading&&a.enable(2),D.logarithmicDepthBuffer&&a.enable(3),D.skinning&&a.enable(4),D.morphTargets&&a.enable(5),D.morphNormals&&a.enable(6),D.morphColors&&a.enable(7),D.premultipliedAlpha&&a.enable(8),D.shadowMapEnabled&&a.enable(9),D.physicallyCorrectLights&&a.enable(10),D.doubleSided&&a.enable(11),D.flipSided&&a.enable(12),D.useDepthPacking&&a.enable(13),D.dithering&&a.enable(14),D.specularIntensityMap&&a.enable(15),D.specularColorMap&&a.enable(16),D.transmission&&a.enable(17),D.transmissionMap&&a.enable(18),D.thicknessMap&&a.enable(19),D.sheen&&a.enable(20),D.sheenColorMap&&a.enable(21),D.sheenRoughnessMap&&a.enable(22),D.decodeVideoTexture&&a.enable(23),D.opaque&&a.enable(24),b.push(a.mask)}(D,b),D.push(n.outputEncoding)),D.push(b.customProgramCacheKey),D.join()},getUniforms:function y(b){const D=p[b.type];let I;return I=D?UJ.clone(Rr[D].uniforms):b.uniforms,I},acquireProgram:function _(b,D){let I;for(let N=0,J=l.length;N<J;N++){const O=l[N];if(O.cacheKey===D){I=O,++I.usedTimes;break}}return void 0===I&&(I=new vne(n,D,b,s),l.push(I)),I},releaseProgram:function M(b){if(0==--b.usedTimes){const D=l.indexOf(b);l[D]=l[l.length-1],l.pop(),b.destroy()}},releaseShaderCache:function w(b){c.remove(b)},programs:l,dispose:function T(){c.dispose()}}}function Mne(){let n=new WeakMap;return{get:function e(s){let o=n.get(s);return void 0===o&&(o={},n.set(s,o)),o},remove:function t(s){n.delete(s)},update:function i(s,o,a){n.get(s)[o]=a},dispose:function r(){n=new WeakMap}}}function wne(n,e){return n.groupOrder!==e.groupOrder?n.groupOrder-e.groupOrder:n.renderOrder!==e.renderOrder?n.renderOrder-e.renderOrder:n.material.id!==e.material.id?n.material.id-e.material.id:n.z!==e.z?n.z-e.z:n.id-e.id}function Ww(n,e){return n.groupOrder!==e.groupOrder?n.groupOrder-e.groupOrder:n.renderOrder!==e.renderOrder?n.renderOrder-e.renderOrder:n.z!==e.z?e.z-n.z:n.id-e.id}function $w(){const n=[];let e=0;const t=[],i=[],r=[];function o(f,d,h,p,g,m){let v=n[e];return void 0===v?(v={id:f.id,object:f,geometry:d,material:h,groupOrder:p,renderOrder:f.renderOrder,z:g,group:m},n[e]=v):(v.id=f.id,v.object=f,v.geometry=d,v.material=h,v.groupOrder=p,v.renderOrder=f.renderOrder,v.z=g,v.group=m),e++,v}return{opaque:t,transmissive:i,transparent:r,init:function s(){e=0,t.length=0,i.length=0,r.length=0},push:function a(f,d,h,p,g,m){const v=o(f,d,h,p,g,m);h.transmission>0?i.push(v):!0===h.transparent?r.push(v):t.push(v)},unshift:function c(f,d,h,p,g,m){const v=o(f,d,h,p,g,m);h.transmission>0?i.unshift(v):!0===h.transparent?r.unshift(v):t.unshift(v)},finish:function u(){for(let f=e,d=n.length;f<d;f++){const h=n[f];if(null===h.id)break;h.id=null,h.object=null,h.geometry=null,h.material=null,h.group=null}},sort:function l(f,d){t.length>1&&t.sort(f||wne),i.length>1&&i.sort(d||Ww),r.length>1&&r.sort(d||Ww)}}}function Cne(){let n=new WeakMap;return{get:function e(i,r){const s=n.get(i);let o;return void 0===s?(o=new $w,n.set(i,[o])):r>=s.length?(o=new $w,s.push(o)):o=s[r],o},dispose:function t(){n=new WeakMap}}}function Sne(){const n={};return{get:function(e){if(void 0!==n[e.id])return n[e.id];let t;switch(e.type){case"DirectionalLight":t={direction:new S,color:new pe};break;case"SpotLight":t={position:new S,direction:new S,color:new pe,distance:0,coneCos:0,penumbraCos:0,decay:0};break;case"PointLight":t={position:new S,color:new pe,distance:0,decay:0};break;case"HemisphereLight":t={direction:new S,skyColor:new pe,groundColor:new pe};break;case"RectAreaLight":t={color:new pe,position:new S,halfWidth:new S,halfHeight:new S}}return n[e.id]=t,t}}}let Dne=0;function Ane(n,e){return(e.castShadow?2:0)-(n.castShadow?2:0)+(e.map?1:0)-(n.map?1:0)}function Tne(n,e){const t=new Sne,i=function Ene(){const n={};return{get:function(e){if(void 0!==n[e.id])return n[e.id];let t;switch(e.type){case"DirectionalLight":case"SpotLight":t={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new K};break;case"PointLight":t={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new K,shadowCameraNear:1,shadowCameraFar:1e3}}return n[e.id]=t,t}}}(),r={version:0,hash:{directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,numDirectionalShadows:-1,numPointShadows:-1,numSpotShadows:-1,numSpotMaps:-1},ambient:[0,0,0],probe:[],directional:[],directionalShadow:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotLightMap:[],spotShadow:[],spotShadowMap:[],spotLightMatrix:[],rectArea:[],rectAreaLTC1:null,rectAreaLTC2:null,point:[],pointShadow:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[],numSpotLightShadowsWithMaps:0};for(let u=0;u<9;u++)r.probe.push(new S);const s=new S,o=new Xe,a=new Xe;return{setup:function c(u,f){let d=0,h=0,p=0;for(let N=0;N<9;N++)r.probe[N].set(0,0,0);let g=0,m=0,v=0,x=0,y=0,_=0,M=0,w=0,T=0,b=0;u.sort(Ane);const D=!0!==f?Math.PI:1;for(let N=0,J=u.length;N<J;N++){const O=u[N],R=O.color,k=O.intensity,Y=O.distance,ee=O.shadow&&O.shadow.map?O.shadow.map.texture:null;if(O.isAmbientLight)d+=R.r*k*D,h+=R.g*k*D,p+=R.b*k*D;else if(O.isLightProbe)for(let $=0;$<9;$++)r.probe[$].addScaledVector(O.sh.coefficients[$],k);else if(O.isDirectionalLight){const $=t.get(O);if($.color.copy(O.color).multiplyScalar(O.intensity*D),O.castShadow){const ie=O.shadow,Q=i.get(O);Q.shadowBias=ie.bias,Q.shadowNormalBias=ie.normalBias,Q.shadowRadius=ie.radius,Q.shadowMapSize=ie.mapSize,r.directionalShadow[g]=Q,r.directionalShadowMap[g]=ee,r.directionalShadowMatrix[g]=O.shadow.matrix,_++}r.directional[g]=$,g++}else if(O.isSpotLight){const $=t.get(O);$.position.setFromMatrixPosition(O.matrixWorld),$.color.copy(R).multiplyScalar(k*D),$.distance=Y,$.coneCos=Math.cos(O.angle),$.penumbraCos=Math.cos(O.angle*(1-O.penumbra)),$.decay=O.decay,r.spot[v]=$;const ie=O.shadow;if(O.map&&(r.spotLightMap[T]=O.map,T++,ie.updateMatrices(O),O.castShadow&&b++),r.spotLightMatrix[v]=ie.matrix,O.castShadow){const Q=i.get(O);Q.shadowBias=ie.bias,Q.shadowNormalBias=ie.normalBias,Q.shadowRadius=ie.radius,Q.shadowMapSize=ie.mapSize,r.spotShadow[v]=Q,r.spotShadowMap[v]=ee,w++}v++}else if(O.isRectAreaLight){const $=t.get(O);$.color.copy(R).multiplyScalar(k),$.halfWidth.set(.5*O.width,0,0),$.halfHeight.set(0,.5*O.height,0),r.rectArea[x]=$,x++}else if(O.isPointLight){const $=t.get(O);if($.color.copy(O.color).multiplyScalar(O.intensity*D),$.distance=O.distance,$.decay=O.decay,O.castShadow){const ie=O.shadow,Q=i.get(O);Q.shadowBias=ie.bias,Q.shadowNormalBias=ie.normalBias,Q.shadowRadius=ie.radius,Q.shadowMapSize=ie.mapSize,Q.shadowCameraNear=ie.camera.near,Q.shadowCameraFar=ie.camera.far,r.pointShadow[m]=Q,r.pointShadowMap[m]=ee,r.pointShadowMatrix[m]=O.shadow.matrix,M++}r.point[m]=$,m++}else if(O.isHemisphereLight){const $=t.get(O);$.skyColor.copy(O.color).multiplyScalar(k*D),$.groundColor.copy(O.groundColor).multiplyScalar(k*D),r.hemi[y]=$,y++}}x>0&&(e.isWebGL2||!0===n.has("OES_texture_float_linear")?(r.rectAreaLTC1=le.LTC_FLOAT_1,r.rectAreaLTC2=le.LTC_FLOAT_2):!0===n.has("OES_texture_half_float_linear")?(r.rectAreaLTC1=le.LTC_HALF_1,r.rectAreaLTC2=le.LTC_HALF_2):console.error("THREE.WebGLRenderer: Unable to use RectAreaLight. Missing WebGL extensions.")),r.ambient[0]=d,r.ambient[1]=h,r.ambient[2]=p;const I=r.hash;(I.directionalLength!==g||I.pointLength!==m||I.spotLength!==v||I.rectAreaLength!==x||I.hemiLength!==y||I.numDirectionalShadows!==_||I.numPointShadows!==M||I.numSpotShadows!==w||I.numSpotMaps!==T)&&(r.directional.length=g,r.spot.length=v,r.rectArea.length=x,r.point.length=m,r.hemi.length=y,r.directionalShadow.length=_,r.directionalShadowMap.length=_,r.pointShadow.length=M,r.pointShadowMap.length=M,r.spotShadow.length=w,r.spotShadowMap.length=w,r.directionalShadowMatrix.length=_,r.pointShadowMatrix.length=M,r.spotLightMatrix.length=w+T-b,r.spotLightMap.length=T,r.numSpotLightShadowsWithMaps=b,I.directionalLength=g,I.pointLength=m,I.spotLength=v,I.rectAreaLength=x,I.hemiLength=y,I.numDirectionalShadows=_,I.numPointShadows=M,I.numSpotShadows=w,I.numSpotMaps=T,r.version=Dne++)},setupView:function l(u,f){let d=0,h=0,p=0,g=0,m=0;const v=f.matrixWorldInverse;for(let x=0,y=u.length;x<y;x++){const _=u[x];if(_.isDirectionalLight){const M=r.directional[d];M.direction.setFromMatrixPosition(_.matrixWorld),s.setFromMatrixPosition(_.target.matrixWorld),M.direction.sub(s),M.direction.transformDirection(v),d++}else if(_.isSpotLight){const M=r.spot[p];M.position.setFromMatrixPosition(_.matrixWorld),M.position.applyMatrix4(v),M.direction.setFromMatrixPosition(_.matrixWorld),s.setFromMatrixPosition(_.target.matrixWorld),M.direction.sub(s),M.direction.transformDirection(v),p++}else if(_.isRectAreaLight){const M=r.rectArea[g];M.position.setFromMatrixPosition(_.matrixWorld),M.position.applyMatrix4(v),a.identity(),o.copy(_.matrixWorld),o.premultiply(v),a.extractRotation(o),M.halfWidth.set(.5*_.width,0,0),M.halfHeight.set(0,.5*_.height,0),M.halfWidth.applyMatrix4(a),M.halfHeight.applyMatrix4(a),g++}else if(_.isPointLight){const M=r.point[h];M.position.setFromMatrixPosition(_.matrixWorld),M.position.applyMatrix4(v),h++}else if(_.isHemisphereLight){const M=r.hemi[m];M.direction.setFromMatrixPosition(_.matrixWorld),M.direction.transformDirection(v),m++}}},state:r}}function jw(n,e){const t=new Tne(n,e),i=[],r=[];return{init:function s(){i.length=0,r.length=0},state:{lightsArray:i,shadowsArray:r,lights:t},setupLights:function c(f){t.setup(i,f)},setupLightsView:function l(f){t.setupView(i,f)},pushLight:function o(f){i.push(f)},pushShadow:function a(f){r.push(f)}}}function Ine(n,e){let t=new WeakMap;return{get:function i(s,o=0){const a=t.get(s);let c;return void 0===a?(c=new jw(n,e),t.set(s,[c])):o>=a.length?(c=new jw(n,e),a.push(c)):c=a[o],c},dispose:function r(){t=new WeakMap}}}class qw extends pr{constructor(e){super(),this.isMeshDepthMaterial=!0,this.type="MeshDepthMaterial",this.depthPacking=3200,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.setValues(e)}copy(e){return super.copy(e),this.depthPacking=e.depthPacking,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this}}class Zw extends pr{constructor(e){super(),this.isMeshDistanceMaterial=!0,this.type="MeshDistanceMaterial",this.referencePosition=new S,this.nearDistance=1,this.farDistance=1e3,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.setValues(e)}copy(e){return super.copy(e),this.referencePosition.copy(e.referencePosition),this.nearDistance=e.nearDistance,this.farDistance=e.farDistance,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this}}function zne(n,e,t){let i=new P6;const r=new K,s=new K,o=new xt,a=new qw({depthPacking:3201}),c=new Zw,l={},u=t.maxTextureSize,f={0:1,1:0,2:2},d=new Lr({defines:{VSM_SAMPLES:8},uniforms:{shadow_pass:{value:null},resolution:{value:new K},radius:{value:4}},vertexShader:"void main() {\n\tgl_Position = vec4( position, 1.0 );\n}",fragmentShader:"uniform sampler2D shadow_pass;\nuniform vec2 resolution;\nuniform float radius;\n#include <packing>\nvoid main() {\n\tconst float samples = float( VSM_SAMPLES );\n\tfloat mean = 0.0;\n\tfloat squared_mean = 0.0;\n\tfloat uvStride = samples <= 1.0 ? 0.0 : 2.0 / ( samples - 1.0 );\n\tfloat uvStart = samples <= 1.0 ? 0.0 : - 1.0;\n\tfor ( float i = 0.0; i < samples; i ++ ) {\n\t\tfloat uvOffset = uvStart + i * uvStride;\n\t\t#ifdef HORIZONTAL_PASS\n\t\t\tvec2 distribution = unpackRGBATo2Half( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( uvOffset, 0.0 ) * radius ) / resolution ) );\n\t\t\tmean += distribution.x;\n\t\t\tsquared_mean += distribution.y * distribution.y + distribution.x * distribution.x;\n\t\t#else\n\t\t\tfloat depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( 0.0, uvOffset ) * radius ) / resolution ) );\n\t\t\tmean += depth;\n\t\t\tsquared_mean += depth * depth;\n\t\t#endif\n\t}\n\tmean = mean / samples;\n\tsquared_mean = squared_mean / samples;\n\tfloat std_dev = sqrt( squared_mean - mean * mean );\n\tgl_FragColor = pack2HalfToRGBA( vec2( mean, std_dev ) );\n}"}),h=d.clone();h.defines.HORIZONTAL_PASS=1;const p=new it;p.setAttribute("position",new Ut(new Float32Array([-1,-1,.5,3,-1,.5,-1,3,.5]),3));const g=new Dn(p,d),m=this;function v(_,M){const w=e.update(g);d.defines.VSM_SAMPLES!==_.blurSamples&&(d.defines.VSM_SAMPLES=_.blurSamples,h.defines.VSM_SAMPLES=_.blurSamples,d.needsUpdate=!0,h.needsUpdate=!0),null===_.mapPass&&(_.mapPass=new V1(r.x,r.y)),d.uniforms.shadow_pass.value=_.map.texture,d.uniforms.resolution.value=_.mapSize,d.uniforms.radius.value=_.radius,n.setRenderTarget(_.mapPass),n.clear(),n.renderBufferDirect(M,null,w,d,g,null),h.uniforms.shadow_pass.value=_.mapPass.texture,h.uniforms.resolution.value=_.mapSize,h.uniforms.radius.value=_.radius,n.setRenderTarget(_.map),n.clear(),n.renderBufferDirect(M,null,w,h,g,null)}function x(_,M,w,T,b,D){let I=null;const N=!0===w.isPointLight?_.customDistanceMaterial:_.customDepthMaterial;if(I=void 0!==N?N:!0===w.isPointLight?c:a,n.localClippingEnabled&&!0===M.clipShadows&&Array.isArray(M.clippingPlanes)&&0!==M.clippingPlanes.length||M.displacementMap&&0!==M.displacementScale||M.alphaMap&&M.alphaTest>0||M.map&&M.alphaTest>0){const J=I.uuid,O=M.uuid;let R=l[J];void 0===R&&(R={},l[J]=R);let k=R[O];void 0===k&&(k=I.clone(),R[O]=k),I=k}return I.visible=M.visible,I.wireframe=M.wireframe,I.side=3===D?null!==M.shadowSide?M.shadowSide:M.side:null!==M.shadowSide?M.shadowSide:f[M.side],I.alphaMap=M.alphaMap,I.alphaTest=M.alphaTest,I.map=M.map,I.clipShadows=M.clipShadows,I.clippingPlanes=M.clippingPlanes,I.clipIntersection=M.clipIntersection,I.displacementMap=M.displacementMap,I.displacementScale=M.displacementScale,I.displacementBias=M.displacementBias,I.wireframeLinewidth=M.wireframeLinewidth,I.linewidth=M.linewidth,!0===w.isPointLight&&!0===I.isMeshDistanceMaterial&&(I.referencePosition.setFromMatrixPosition(w.matrixWorld),I.nearDistance=T,I.farDistance=b),I}function y(_,M,w,T,b){if(!1===_.visible)return;if(_.layers.test(M.layers)&&(_.isMesh||_.isLine||_.isPoints)&&(_.castShadow||_.receiveShadow&&3===b)&&(!_.frustumCulled||i.intersectsObject(_))){_.modelViewMatrix.multiplyMatrices(w.matrixWorldInverse,_.matrixWorld);const N=e.update(_),J=_.material;if(Array.isArray(J)){const O=N.groups;for(let R=0,k=O.length;R<k;R++){const Y=O[R],ee=J[Y.materialIndex];if(ee&&ee.visible){const $=x(_,ee,T,w.near,w.far,b);n.renderBufferDirect(w,null,N,$,_,Y)}}}else if(J.visible){const O=x(_,J,T,w.near,w.far,b);n.renderBufferDirect(w,null,N,O,_,null)}}const I=_.children;for(let N=0,J=I.length;N<J;N++)y(I[N],M,w,T,b)}this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=1,this.render=function(_,M,w){if(!1===m.enabled||!1===m.autoUpdate&&!1===m.needsUpdate||0===_.length)return;const T=n.getRenderTarget(),b=n.getActiveCubeFace(),D=n.getActiveMipmapLevel(),I=n.state;I.setBlending(0),I.buffers.color.setClear(1,1,1,1),I.buffers.depth.setTest(!0),I.setScissorTest(!1);for(let N=0,J=_.length;N<J;N++){const O=_[N],R=O.shadow;if(void 0===R){console.warn("THREE.WebGLShadowMap:",O,"has no shadow.");continue}if(!1===R.autoUpdate&&!1===R.needsUpdate)continue;r.copy(R.mapSize);const k=R.getFrameExtents();r.multiply(k),s.copy(R.mapSize),(r.x>u||r.y>u)&&(r.x>u&&(s.x=Math.floor(u/k.x),r.x=s.x*k.x,R.mapSize.x=s.x),r.y>u&&(s.y=Math.floor(u/k.y),r.y=s.y*k.y,R.mapSize.y=s.y)),null===R.map&&(R.map=new V1(r.x,r.y,3!==this.type?{minFilter:fn,magFilter:fn}:{}),R.map.texture.name=O.name+".shadowMap",R.camera.updateProjectionMatrix()),n.setRenderTarget(R.map),n.clear();const Y=R.getViewportCount();for(let ee=0;ee<Y;ee++){const $=R.getViewport(ee);o.set(s.x*$.x,s.y*$.y,s.x*$.z,s.y*$.w),I.viewport(o),R.updateMatrices(O,ee),i=R.getFrustum(),y(M,w,R.camera,O,this.type)}!0!==R.isPointLightShadow&&3===this.type&&v(R,w),R.needsUpdate=!1}m.needsUpdate=!1,n.setRenderTarget(T,b,D)}}function Pne(n,e,t){const i=t.isWebGL2,a=new function r(){let L=!1;const B=new xt;let te=null;const be=new xt(0,0,0,0);return{setMask:function(Te){te!==Te&&!L&&(n.colorMask(Te,Te,Te,Te),te=Te)},setLocked:function(Te){L=Te},setClear:function(Te,Ct,In,qn,so){!0===so&&(Te*=qn,Ct*=qn,In*=qn),B.set(Te,Ct,In,qn),!1===be.equals(B)&&(n.clearColor(Te,Ct,In,qn),be.copy(B))},reset:function(){L=!1,te=null,be.set(-1,0,0,0)}}},c=new function s(){let L=!1,B=null,te=null,be=null;return{setTest:function(Te){Te?$e(2929):Me(2929)},setMask:function(Te){B!==Te&&!L&&(n.depthMask(Te),B=Te)},setFunc:function(Te){if(te!==Te){switch(Te){case 0:n.depthFunc(512);break;case 1:n.depthFunc(519);break;case 2:n.depthFunc(513);break;case 3:default:n.depthFunc(515);break;case 4:n.depthFunc(514);break;case 5:n.depthFunc(518);break;case 6:n.depthFunc(516);break;case 7:n.depthFunc(517)}te=Te}},setLocked:function(Te){L=Te},setClear:function(Te){be!==Te&&(n.clearDepth(Te),be=Te)},reset:function(){L=!1,B=null,te=null,be=null}}},l=new function o(){let L=!1,B=null,te=null,be=null,Te=null,Ct=null,In=null,qn=null,so=null;return{setTest:function(Gt){L||(Gt?$e(2960):Me(2960))},setMask:function(Gt){B!==Gt&&!L&&(n.stencilMask(Gt),B=Gt)},setFunc:function(Gt,vs,qi){(te!==Gt||be!==vs||Te!==qi)&&(n.stencilFunc(Gt,vs,qi),te=Gt,be=vs,Te=qi)},setOp:function(Gt,vs,qi){(Ct!==Gt||In!==vs||qn!==qi)&&(n.stencilOp(Gt,vs,qi),Ct=Gt,In=vs,qn=qi)},setLocked:function(Gt){L=Gt},setClear:function(Gt){so!==Gt&&(n.clearStencil(Gt),so=Gt)},reset:function(){L=!1,B=null,te=null,be=null,Te=null,Ct=null,In=null,qn=null,so=null}}},u=new WeakMap,f=new WeakMap;let d={},h={},p=new WeakMap,g=[],m=null,v=!1,x=null,y=null,_=null,M=null,w=null,T=null,b=null,D=!1,I=null,N=null,J=null,O=null,R=null;const k=n.getParameter(35661);let Y=!1,ee=0;const $=n.getParameter(7938);-1!==$.indexOf("WebGL")?(ee=parseFloat(/^WebGL (\d)/.exec($)[1]),Y=ee>=1):-1!==$.indexOf("OpenGL ES")&&(ee=parseFloat(/^OpenGL ES (\d)/.exec($)[1]),Y=ee>=2);let ie=null,Q={};const V=n.getParameter(3088),H=n.getParameter(2978),ae=(new xt).fromArray(V),re=(new xt).fromArray(H);function me(L,B,te){const be=new Uint8Array(4),Te=n.createTexture();n.bindTexture(L,Te),n.texParameteri(L,10241,9728),n.texParameteri(L,10240,9728);for(let Ct=0;Ct<te;Ct++)n.texImage2D(B+Ct,0,6408,1,1,0,6408,5121,be);return Te}const G={};function $e(L){!0!==d[L]&&(n.enable(L),d[L]=!0)}function Me(L){!1!==d[L]&&(n.disable(L),d[L]=!1)}G[3553]=me(3553,3553,1),G[34067]=me(34067,34069,6),a.setClear(0,0,0,1),c.setClear(1),l.setClear(0),$e(2929),c.setFunc(3),de(!1),Ke(1),$e(2884),ce(0);const Z={100:32774,101:32778,102:32779};if(i)Z[103]=32775,Z[104]=32776;else{const L=e.get("EXT_blend_minmax");null!==L&&(Z[103]=L.MIN_EXT,Z[104]=L.MAX_EXT)}const q={200:0,201:1,202:768,204:770,210:776,208:774,206:772,203:769,205:771,209:775,207:773};function ce(L,B,te,be,Te,Ct,In,qn){if(0!==L){if(!1===v&&($e(3042),v=!0),5===L)Te=Te||B,Ct=Ct||te,In=In||be,(B!==y||Te!==w)&&(n.blendEquationSeparate(Z[B],Z[Te]),y=B,w=Te),(te!==_||be!==M||Ct!==T||In!==b)&&(n.blendFuncSeparate(q[te],q[be],q[Ct],q[In]),_=te,M=be,T=Ct,b=In),x=L,D=!1;else if(L!==x||qn!==D){if((100!==y||100!==w)&&(n.blendEquation(32774),y=100,w=100),qn)switch(L){case 1:n.blendFuncSeparate(1,771,1,771);break;case 2:n.blendFunc(1,1);break;case 3:n.blendFuncSeparate(0,769,0,1);break;case 4:n.blendFuncSeparate(0,768,0,770);break;default:console.error("THREE.WebGLState: Invalid blending: ",L)}else switch(L){case 1:n.blendFuncSeparate(770,771,1,771);break;case 2:n.blendFunc(770,1);break;case 3:n.blendFuncSeparate(0,769,0,1);break;case 4:n.blendFunc(0,768);break;default:console.error("THREE.WebGLState: Invalid blending: ",L)}_=null,M=null,T=null,b=null,x=L,D=qn}}else!0===v&&(Me(3042),v=!1)}function de(L){I!==L&&(n.frontFace(L?2304:2305),I=L)}function Ke(L){0!==L?($e(2884),L!==N&&n.cullFace(1===L?1029:2===L?1028:1032)):Me(2884),N=L}function ke(L,B,te){L?($e(32823),(O!==B||R!==te)&&(n.polygonOffset(B,te),O=B,R=te)):Me(32823)}return{buffers:{color:a,depth:c,stencil:l},enable:$e,disable:Me,bindFramebuffer:function Ge(L,B){return h[L]!==B&&(n.bindFramebuffer(L,B),h[L]=B,i&&(36009===L&&(h[36160]=B),36160===L&&(h[36009]=B)),!0)},drawBuffers:function ge(L,B){let te=g,be=!1;if(L)if(te=p.get(B),void 0===te&&(te=[],p.set(B,te)),L.isWebGLMultipleRenderTargets){const Te=L.texture;if(te.length!==Te.length||36064!==te[0]){for(let Ct=0,In=Te.length;Ct<In;Ct++)te[Ct]=36064+Ct;te.length=Te.length,be=!0}}else 36064!==te[0]&&(te[0]=36064,be=!0);else 1029!==te[0]&&(te[0]=1029,be=!0);be&&(t.isWebGL2?n.drawBuffers(te):e.get("WEBGL_draw_buffers").drawBuffersWEBGL(te))},useProgram:function ot(L){return m!==L&&(n.useProgram(L),m=L,!0)},setBlending:ce,setMaterial:function Se(L,B){2===L.side?Me(2884):$e(2884);let te=1===L.side;B&&(te=!te),de(te),1===L.blending&&!1===L.transparent?ce(0):ce(L.blending,L.blendEquation,L.blendSrc,L.blendDst,L.blendEquationAlpha,L.blendSrcAlpha,L.blendDstAlpha,L.premultipliedAlpha),c.setFunc(L.depthFunc),c.setTest(L.depthTest),c.setMask(L.depthWrite),a.setMask(L.colorWrite);const be=L.stencilWrite;l.setTest(be),be&&(l.setMask(L.stencilWriteMask),l.setFunc(L.stencilFunc,L.stencilRef,L.stencilFuncMask),l.setOp(L.stencilFail,L.stencilZFail,L.stencilZPass)),ke(L.polygonOffset,L.polygonOffsetFactor,L.polygonOffsetUnits),!0===L.alphaToCoverage?$e(32926):Me(32926)},setFlipSided:de,setCullFace:Ke,setLineWidth:function He(L){L!==J&&(Y&&n.lineWidth(L),J=L)},setPolygonOffset:ke,setScissorTest:function Ht(L){L?$e(3089):Me(3089)},activeTexture:function St(L){void 0===L&&(L=33984+k-1),ie!==L&&(n.activeTexture(L),ie=L)},bindTexture:function A(L,B,te){void 0===te&&(te=null===ie?33984+k-1:ie);let be=Q[te];void 0===be&&(be={type:void 0,texture:void 0},Q[te]=be),(be.type!==L||be.texture!==B)&&(ie!==te&&(n.activeTexture(te),ie=te),n.bindTexture(L,B||G[L]),be.type=L,be.texture=B)},unbindTexture:function C(){const L=Q[ie];void 0!==L&&void 0!==L.type&&(n.bindTexture(L.type,null),L.type=void 0,L.texture=void 0)},compressedTexImage2D:function F(){try{n.compressedTexImage2D.apply(n,arguments)}catch(L){console.error("THREE.WebGLState:",L)}},compressedTexImage3D:function ne(){try{n.compressedTexImage3D.apply(n,arguments)}catch(L){console.error("THREE.WebGLState:",L)}},texImage2D:function Be(){try{n.texImage2D.apply(n,arguments)}catch(L){console.error("THREE.WebGLState:",L)}},texImage3D:function De(){try{n.texImage3D.apply(n,arguments)}catch(L){console.error("THREE.WebGLState:",L)}},updateUBOMapping:function vt(L,B){let te=f.get(B);void 0===te&&(te=new WeakMap,f.set(B,te));let be=te.get(L);void 0===be&&(be=n.getUniformBlockIndex(B,L.name),te.set(L,be))},uniformBlockBinding:function Bt(L,B){const be=f.get(B).get(L);u.get(L)!==be&&(n.uniformBlockBinding(B,be,L.__bindingPointIndex),u.set(L,be))},texStorage2D:function j(){try{n.texStorage2D.apply(n,arguments)}catch(L){console.error("THREE.WebGLState:",L)}},texStorage3D:function Ie(){try{n.texStorage3D.apply(n,arguments)}catch(L){console.error("THREE.WebGLState:",L)}},texSubImage2D:function se(){try{n.texSubImage2D.apply(n,arguments)}catch(L){console.error("THREE.WebGLState:",L)}},texSubImage3D:function ve(){try{n.texSubImage3D.apply(n,arguments)}catch(L){console.error("THREE.WebGLState:",L)}},compressedTexSubImage2D:function je(){try{n.compressedTexSubImage2D.apply(n,arguments)}catch(L){console.error("THREE.WebGLState:",L)}},compressedTexSubImage3D:function ye(){try{n.compressedTexSubImage3D.apply(n,arguments)}catch(L){console.error("THREE.WebGLState:",L)}},scissor:function Ue(L){!1===ae.equals(L)&&(n.scissor(L.x,L.y,L.z,L.w),ae.copy(L))},viewport:function Le(L){!1===re.equals(L)&&(n.viewport(L.x,L.y,L.z,L.w),re.copy(L))},reset:function Tn(){n.disable(3042),n.disable(2884),n.disable(2929),n.disable(32823),n.disable(3089),n.disable(2960),n.disable(32926),n.blendEquation(32774),n.blendFunc(1,0),n.blendFuncSeparate(1,0,1,0),n.colorMask(!0,!0,!0,!0),n.clearColor(0,0,0,0),n.depthMask(!0),n.depthFunc(513),n.clearDepth(1),n.stencilMask(4294967295),n.stencilFunc(519,0,4294967295),n.stencilOp(7680,7680,7680),n.clearStencil(0),n.cullFace(1029),n.frontFace(2305),n.polygonOffset(0,0),n.activeTexture(33984),n.bindFramebuffer(36160,null),!0===i&&(n.bindFramebuffer(36009,null),n.bindFramebuffer(36008,null)),n.useProgram(null),n.lineWidth(1),n.scissor(0,0,n.canvas.width,n.canvas.height),n.viewport(0,0,n.canvas.width,n.canvas.height),d={},ie=null,Q={},h={},p=new WeakMap,g=[],m=null,v=!1,x=null,y=null,_=null,M=null,w=null,T=null,b=null,D=!1,I=null,N=null,J=null,O=null,R=null,ae.set(0,0,n.canvas.width,n.canvas.height),re.set(0,0,n.canvas.width,n.canvas.height),a.reset(),c.reset(),l.reset()}}}function Nne(n,e,t,i,r,s,o){const a=r.isWebGL2,c=r.maxTextures,l=r.maxCubemapSize,u=r.maxTextureSize,f=r.maxSamples,d=e.has("WEBGL_multisampled_render_to_texture")?e.get("WEBGL_multisampled_render_to_texture"):null,h=!(typeof navigator>"u")&&/OculusBrowser/g.test(navigator.userAgent),p=new WeakMap;let g;const m=new WeakMap;let v=!1;try{v=typeof OffscreenCanvas<"u"&&null!==new OffscreenCanvas(1,1).getContext("2d")}catch{}function x(A,C){return v?new OffscreenCanvas(A,C):Uc("canvas")}function y(A,C,F,ne){let se=1;if((A.width>ne||A.height>ne)&&(se=ne/Math.max(A.width,A.height)),se<1||!0===C){if(typeof HTMLImageElement<"u"&&A instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&A instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&A instanceof ImageBitmap){const ve=C?Ku:Math.floor,je=ve(se*A.width),ye=ve(se*A.height);void 0===g&&(g=x(je,ye));const j=F?x(je,ye):g;return j.width=je,j.height=ye,j.getContext("2d").drawImage(A,0,0,je,ye),console.warn("THREE.WebGLRenderer: Texture has been resized from ("+A.width+"x"+A.height+") to ("+je+"x"+ye+")."),j}return"data"in A&&console.warn("THREE.WebGLRenderer: Image in DataTexture is too big ("+A.width+"x"+A.height+")."),A}return A}function _(A){return c6(A.width)&&c6(A.height)}function w(A,C){return A.generateMipmaps&&C&&A.minFilter!==fn&&A.minFilter!==Kt}function T(A){n.generateMipmap(A)}function b(A,C,F,ne,se=!1){if(!1===a)return C;if(null!==A){if(void 0!==n[A])return n[A];console.warn("THREE.WebGLRenderer: Attempt to use non-existing WebGL internal format '"+A+"'")}let ve=C;return 6403===C&&(5126===F&&(ve=33326),5131===F&&(ve=33325),5121===F&&(ve=33321)),33319===C&&(5126===F&&(ve=33328),5131===F&&(ve=33327),5121===F&&(ve=33323)),6408===C&&(5126===F&&(ve=34836),5131===F&&(ve=34842),5121===F&&(ve=ne===Et&&!1===se?35907:32856),32819===F&&(ve=32854),32820===F&&(ve=32855)),(33325===ve||33326===ve||33327===ve||33328===ve||34842===ve||34836===ve)&&e.get("EXT_color_buffer_float"),ve}function D(A,C,F){return!0===w(A,F)||A.isFramebufferTexture&&A.minFilter!==fn&&A.minFilter!==Kt?Math.log2(Math.max(C.width,C.height))+1:void 0!==A.mipmaps&&A.mipmaps.length>0?A.mipmaps.length:A.isCompressedTexture&&Array.isArray(A.image)?C.mipmaps.length:1}function I(A){return A===fn||1004===A||1005===A?9728:9729}function N(A){const C=A.target;C.removeEventListener("dispose",N),function O(A){const C=i.get(A);if(void 0===C.__webglInit)return;const F=A.source,ne=m.get(F);if(ne){const se=ne[C.__cacheKey];se.usedTimes--,0===se.usedTimes&&R(A),0===Object.keys(ne).length&&m.delete(F)}i.remove(A)}(C),C.isVideoTexture&&p.delete(C)}function J(A){const C=A.target;C.removeEventListener("dispose",J),function k(A){const C=A.texture,F=i.get(A),ne=i.get(C);if(void 0!==ne.__webglTexture&&(n.deleteTexture(ne.__webglTexture),o.memory.textures--),A.depthTexture&&A.depthTexture.dispose(),A.isWebGLCubeRenderTarget)for(let se=0;se<6;se++)n.deleteFramebuffer(F.__webglFramebuffer[se]),F.__webglDepthbuffer&&n.deleteRenderbuffer(F.__webglDepthbuffer[se]);else{if(n.deleteFramebuffer(F.__webglFramebuffer),F.__webglDepthbuffer&&n.deleteRenderbuffer(F.__webglDepthbuffer),F.__webglMultisampledFramebuffer&&n.deleteFramebuffer(F.__webglMultisampledFramebuffer),F.__webglColorRenderbuffer)for(let se=0;se<F.__webglColorRenderbuffer.length;se++)F.__webglColorRenderbuffer[se]&&n.deleteRenderbuffer(F.__webglColorRenderbuffer[se]);F.__webglDepthRenderbuffer&&n.deleteRenderbuffer(F.__webglDepthRenderbuffer)}if(A.isWebGLMultipleRenderTargets)for(let se=0,ve=C.length;se<ve;se++){const je=i.get(C[se]);je.__webglTexture&&(n.deleteTexture(je.__webglTexture),o.memory.textures--),i.remove(C[se])}i.remove(C),i.remove(A)}(C)}function R(A){const C=i.get(A);n.deleteTexture(C.__webglTexture),delete m.get(A.source)[C.__cacheKey],o.memory.textures--}let Y=0;function Q(A,C){const F=i.get(A);if(A.isVideoTexture&&function Ht(A){const C=o.render.frame;p.get(A)!==C&&(p.set(A,C),A.update())}(A),!1===A.isRenderTargetTexture&&A.version>0&&F.__version!==A.version){const ne=A.image;if(null===ne)console.warn("THREE.WebGLRenderer: Texture marked for update but no image data found.");else{if(!1!==ne.complete)return void Me(F,A,C);console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete")}}t.bindTexture(3553,F.__webglTexture,33984+C)}const re={[I1]:10497,[$n]:33071,1002:33648},me={[fn]:9728,1004:9984,1005:9986,[Kt]:9729,1007:9985,[Fs]:9987};function G(A,C,F){if(F?(n.texParameteri(A,10242,re[C.wrapS]),n.texParameteri(A,10243,re[C.wrapT]),(32879===A||35866===A)&&n.texParameteri(A,32882,re[C.wrapR]),n.texParameteri(A,10240,me[C.magFilter]),n.texParameteri(A,10241,me[C.minFilter])):(n.texParameteri(A,10242,33071),n.texParameteri(A,10243,33071),(32879===A||35866===A)&&n.texParameteri(A,32882,33071),(C.wrapS!==$n||C.wrapT!==$n)&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.wrapS and Texture.wrapT should be set to THREE.ClampToEdgeWrapping."),n.texParameteri(A,10240,I(C.magFilter)),n.texParameteri(A,10241,I(C.minFilter)),C.minFilter!==fn&&C.minFilter!==Kt&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.minFilter should be set to THREE.NearestFilter or THREE.LinearFilter.")),!0===e.has("EXT_texture_filter_anisotropic")){const ne=e.get("EXT_texture_filter_anisotropic");if(C.type===ks&&!1===e.has("OES_texture_float_linear")||!1===a&&C.type===Oc&&!1===e.has("OES_texture_half_float_linear"))return;(C.anisotropy>1||i.get(C).__currentAnisotropy)&&(n.texParameterf(A,ne.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(C.anisotropy,r.getMaxAnisotropy())),i.get(C).__currentAnisotropy=C.anisotropy)}}function $e(A,C){let F=!1;void 0===A.__webglInit&&(A.__webglInit=!0,C.addEventListener("dispose",N));const ne=C.source;let se=m.get(ne);void 0===se&&(se={},m.set(ne,se));const ve=function ie(A){const C=[];return C.push(A.wrapS),C.push(A.wrapT),C.push(A.wrapR||0),C.push(A.magFilter),C.push(A.minFilter),C.push(A.anisotropy),C.push(A.internalFormat),C.push(A.format),C.push(A.type),C.push(A.generateMipmaps),C.push(A.premultiplyAlpha),C.push(A.flipY),C.push(A.unpackAlignment),C.push(A.encoding),C.join()}(C);if(ve!==A.__cacheKey){void 0===se[ve]&&(se[ve]={texture:n.createTexture(),usedTimes:0},o.memory.textures++,F=!0),se[ve].usedTimes++;const je=se[A.__cacheKey];void 0!==je&&(se[A.__cacheKey].usedTimes--,0===je.usedTimes&&R(C)),A.__cacheKey=ve,A.__webglTexture=se[ve].texture}return F}function Me(A,C,F){let ne=3553;(C.isDataArrayTexture||C.isCompressedArrayTexture)&&(ne=35866),C.isData3DTexture&&(ne=32879);const se=$e(A,C),ve=C.source;t.bindTexture(ne,A.__webglTexture,33984+F);const je=i.get(ve);if(ve.version!==je.__version||!0===se){t.activeTexture(33984+F),n.pixelStorei(37440,C.flipY),n.pixelStorei(37441,C.premultiplyAlpha),n.pixelStorei(3317,C.unpackAlignment),n.pixelStorei(37443,0);const ye=function M(A){return!a&&(A.wrapS!==$n||A.wrapT!==$n||A.minFilter!==fn&&A.minFilter!==Kt)}(C)&&!1===_(C.image);let j=y(C.image,ye,!1,u);j=St(C,j);const Ie=_(j)||a,Be=s.convert(C.format,C.encoding);let Le,De=s.convert(C.type),Ue=b(C.internalFormat,Be,De,C.encoding,C.isVideoTexture);G(ne,C,Ie);const vt=C.mipmaps,Bt=a&&!0!==C.isVideoTexture,Tn=void 0===je.__version||!0===se,L=D(C,j,Ie);if(C.isDepthTexture)Ue=6402,a?Ue=C.type===ks?36012:C.type===R1?33190:C.type===va?35056:33189:C.type===ks&&console.error("WebGLRenderer: Floating point depth texture requires WebGL2."),C.format===z1&&6402===Ue&&1012!==C.type&&C.type!==R1&&(console.warn("THREE.WebGLRenderer: Use UnsignedShortType or UnsignedIntType for DepthFormat DepthTexture."),C.type=R1,De=s.convert(C.type)),C.format===ya&&6402===Ue&&(Ue=34041,C.type!==va&&(console.warn("THREE.WebGLRenderer: Use UnsignedInt248Type for DepthStencilFormat DepthTexture."),C.type=va,De=s.convert(C.type))),Tn&&(Bt?t.texStorage2D(3553,1,Ue,j.width,j.height):t.texImage2D(3553,0,Ue,j.width,j.height,0,Be,De,null));else if(C.isDataTexture)if(vt.length>0&&Ie){Bt&&Tn&&t.texStorage2D(3553,L,Ue,vt[0].width,vt[0].height);for(let B=0,te=vt.length;B<te;B++)Le=vt[B],Bt?t.texSubImage2D(3553,B,0,0,Le.width,Le.height,Be,De,Le.data):t.texImage2D(3553,B,Ue,Le.width,Le.height,0,Be,De,Le.data);C.generateMipmaps=!1}else Bt?(Tn&&t.texStorage2D(3553,L,Ue,j.width,j.height),t.texSubImage2D(3553,0,0,0,j.width,j.height,Be,De,j.data)):t.texImage2D(3553,0,Ue,j.width,j.height,0,Be,De,j.data);else if(C.isCompressedTexture)if(C.isCompressedArrayTexture){Bt&&Tn&&t.texStorage3D(35866,L,Ue,vt[0].width,vt[0].height,j.depth);for(let B=0,te=vt.length;B<te;B++)Le=vt[B],C.format!==Gi?null!==Be?Bt?t.compressedTexSubImage3D(35866,B,0,0,0,Le.width,Le.height,j.depth,Be,Le.data,0,0):t.compressedTexImage3D(35866,B,Ue,Le.width,Le.height,j.depth,0,Le.data,0,0):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):Bt?t.texSubImage3D(35866,B,0,0,0,Le.width,Le.height,j.depth,Be,De,Le.data):t.texImage3D(35866,B,Ue,Le.width,Le.height,j.depth,0,Be,De,Le.data)}else{Bt&&Tn&&t.texStorage2D(3553,L,Ue,vt[0].width,vt[0].height);for(let B=0,te=vt.length;B<te;B++)Le=vt[B],C.format!==Gi?null!==Be?Bt?t.compressedTexSubImage2D(3553,B,0,0,Le.width,Le.height,Be,Le.data):t.compressedTexImage2D(3553,B,Ue,Le.width,Le.height,0,Le.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):Bt?t.texSubImage2D(3553,B,0,0,Le.width,Le.height,Be,De,Le.data):t.texImage2D(3553,B,Ue,Le.width,Le.height,0,Be,De,Le.data)}else if(C.isDataArrayTexture)Bt?(Tn&&t.texStorage3D(35866,L,Ue,j.width,j.height,j.depth),t.texSubImage3D(35866,0,0,0,0,j.width,j.height,j.depth,Be,De,j.data)):t.texImage3D(35866,0,Ue,j.width,j.height,j.depth,0,Be,De,j.data);else if(C.isData3DTexture)Bt?(Tn&&t.texStorage3D(32879,L,Ue,j.width,j.height,j.depth),t.texSubImage3D(32879,0,0,0,0,j.width,j.height,j.depth,Be,De,j.data)):t.texImage3D(32879,0,Ue,j.width,j.height,j.depth,0,Be,De,j.data);else if(C.isFramebufferTexture){if(Tn)if(Bt)t.texStorage2D(3553,L,Ue,j.width,j.height);else{let B=j.width,te=j.height;for(let be=0;be<L;be++)t.texImage2D(3553,be,Ue,B,te,0,Be,De,null),B>>=1,te>>=1}}else if(vt.length>0&&Ie){Bt&&Tn&&t.texStorage2D(3553,L,Ue,vt[0].width,vt[0].height);for(let B=0,te=vt.length;B<te;B++)Le=vt[B],Bt?t.texSubImage2D(3553,B,0,0,Be,De,Le):t.texImage2D(3553,B,Ue,Be,De,Le);C.generateMipmaps=!1}else Bt?(Tn&&t.texStorage2D(3553,L,Ue,j.width,j.height),t.texSubImage2D(3553,0,0,0,Be,De,j)):t.texImage2D(3553,0,Ue,Be,De,j);w(C,Ie)&&T(ne),je.__version=ve.version,C.onUpdate&&C.onUpdate(C)}A.__version=C.version}function ge(A,C,F,ne,se){const ve=s.convert(F.format,F.encoding),je=s.convert(F.type),ye=b(F.internalFormat,ve,je,F.encoding);i.get(C).__hasExternalTextures||(32879===se||35866===se?t.texImage3D(se,0,ye,C.width,C.height,C.depth,0,ve,je,null):t.texImage2D(se,0,ye,C.width,C.height,0,ve,je,null)),t.bindFramebuffer(36160,A),ke(C)?d.framebufferTexture2DMultisampleEXT(36160,ne,se,i.get(F).__webglTexture,0,He(C)):(3553===se||se>=34069&&se<=34074)&&n.framebufferTexture2D(36160,ne,se,i.get(F).__webglTexture,0),t.bindFramebuffer(36160,null)}function ot(A,C,F){if(n.bindRenderbuffer(36161,A),C.depthBuffer&&!C.stencilBuffer){let ne=33189;if(F||ke(C)){const se=C.depthTexture;se&&se.isDepthTexture&&(se.type===ks?ne=36012:se.type===R1&&(ne=33190));const ve=He(C);ke(C)?d.renderbufferStorageMultisampleEXT(36161,ve,ne,C.width,C.height):n.renderbufferStorageMultisample(36161,ve,ne,C.width,C.height)}else n.renderbufferStorage(36161,ne,C.width,C.height);n.framebufferRenderbuffer(36160,36096,36161,A)}else if(C.depthBuffer&&C.stencilBuffer){const ne=He(C);F&&!1===ke(C)?n.renderbufferStorageMultisample(36161,ne,35056,C.width,C.height):ke(C)?d.renderbufferStorageMultisampleEXT(36161,ne,35056,C.width,C.height):n.renderbufferStorage(36161,34041,C.width,C.height),n.framebufferRenderbuffer(36160,33306,36161,A)}else{const ne=!0===C.isWebGLMultipleRenderTargets?C.texture:[C.texture];for(let se=0;se<ne.length;se++){const ve=ne[se],je=s.convert(ve.format,ve.encoding),ye=s.convert(ve.type),j=b(ve.internalFormat,je,ye,ve.encoding),Ie=He(C);F&&!1===ke(C)?n.renderbufferStorageMultisample(36161,Ie,j,C.width,C.height):ke(C)?d.renderbufferStorageMultisampleEXT(36161,Ie,j,C.width,C.height):n.renderbufferStorage(36161,j,C.width,C.height)}}n.bindRenderbuffer(36161,null)}function q(A){const C=i.get(A),F=!0===A.isWebGLCubeRenderTarget;if(A.depthTexture&&!C.__autoAllocateDepthBuffer){if(F)throw new Error("target.depthTexture not supported in Cube render targets");!function Z(A,C){if(C&&C.isWebGLCubeRenderTarget)throw new Error("Depth Texture with cube render targets is not supported");if(t.bindFramebuffer(36160,A),!C.depthTexture||!C.depthTexture.isDepthTexture)throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");(!i.get(C.depthTexture).__webglTexture||C.depthTexture.image.width!==C.width||C.depthTexture.image.height!==C.height)&&(C.depthTexture.image.width=C.width,C.depthTexture.image.height=C.height,C.depthTexture.needsUpdate=!0),Q(C.depthTexture,0);const ne=i.get(C.depthTexture).__webglTexture,se=He(C);if(C.depthTexture.format===z1)ke(C)?d.framebufferTexture2DMultisampleEXT(36160,36096,3553,ne,0,se):n.framebufferTexture2D(36160,36096,3553,ne,0);else{if(C.depthTexture.format!==ya)throw new Error("Unknown depthTexture format");ke(C)?d.framebufferTexture2DMultisampleEXT(36160,33306,3553,ne,0,se):n.framebufferTexture2D(36160,33306,3553,ne,0)}}(C.__webglFramebuffer,A)}else if(F){C.__webglDepthbuffer=[];for(let ne=0;ne<6;ne++)t.bindFramebuffer(36160,C.__webglFramebuffer[ne]),C.__webglDepthbuffer[ne]=n.createRenderbuffer(),ot(C.__webglDepthbuffer[ne],A,!1)}else t.bindFramebuffer(36160,C.__webglFramebuffer),C.__webglDepthbuffer=n.createRenderbuffer(),ot(C.__webglDepthbuffer,A,!1);t.bindFramebuffer(36160,null)}function He(A){return Math.min(f,A.samples)}function ke(A){const C=i.get(A);return a&&A.samples>0&&!0===e.has("WEBGL_multisampled_render_to_texture")&&!1!==C.__useRenderToTexture}function St(A,C){const F=A.encoding,ne=A.format,se=A.type;return!0===A.isCompressedTexture||!0===A.isVideoTexture||1035===A.format||F!==P1&&(F===Et?!1===a?!0===e.has("EXT_sRGB")&&ne===Gi?(A.format=1035,A.minFilter=Kt,A.generateMipmaps=!1):C=sw.sRGBToLinear(C):(ne!==Gi||se!==L1)&&console.warn("THREE.WebGLTextures: sRGB encoded textures have to use RGBAFormat and UnsignedByteType."):console.error("THREE.WebGLTextures: Unsupported texture encoding:",F)),C}this.allocateTextureUnit=function $(){const A=Y;return A>=c&&console.warn("THREE.WebGLTextures: Trying to use "+A+" texture units while this GPU supports only "+c),Y+=1,A},this.resetTextureUnits=function ee(){Y=0},this.setTexture2D=Q,this.setTexture2DArray=function V(A,C){const F=i.get(A);A.version>0&&F.__version!==A.version?Me(F,A,C):t.bindTexture(35866,F.__webglTexture,33984+C)},this.setTexture3D=function H(A,C){const F=i.get(A);A.version>0&&F.__version!==A.version?Me(F,A,C):t.bindTexture(32879,F.__webglTexture,33984+C)},this.setTextureCube=function ae(A,C){const F=i.get(A);A.version>0&&F.__version!==A.version?function Ge(A,C,F){if(6!==C.image.length)return;const ne=$e(A,C),se=C.source;t.bindTexture(34067,A.__webglTexture,33984+F);const ve=i.get(se);if(se.version!==ve.__version||!0===ne){t.activeTexture(33984+F),n.pixelStorei(37440,C.flipY),n.pixelStorei(37441,C.premultiplyAlpha),n.pixelStorei(3317,C.unpackAlignment),n.pixelStorei(37443,0);const je=C.isCompressedTexture||C.image[0].isCompressedTexture,ye=C.image[0]&&C.image[0].isDataTexture,j=[];for(let B=0;B<6;B++)j[B]=je||ye?ye?C.image[B].image:C.image[B]:y(C.image[B],!1,!0,l),j[B]=St(C,j[B]);const Ie=j[0],Be=_(Ie)||a,De=s.convert(C.format,C.encoding),Ue=s.convert(C.type),Le=b(C.internalFormat,De,Ue,C.encoding),vt=a&&!0!==C.isVideoTexture,Bt=void 0===ve.__version||!0===ne;let L,Tn=D(C,Ie,Be);if(G(34067,C,Be),je){vt&&Bt&&t.texStorage2D(34067,Tn,Le,Ie.width,Ie.height);for(let B=0;B<6;B++){L=j[B].mipmaps;for(let te=0;te<L.length;te++){const be=L[te];C.format!==Gi?null!==De?vt?t.compressedTexSubImage2D(34069+B,te,0,0,be.width,be.height,De,be.data):t.compressedTexImage2D(34069+B,te,Le,be.width,be.height,0,be.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):vt?t.texSubImage2D(34069+B,te,0,0,be.width,be.height,De,Ue,be.data):t.texImage2D(34069+B,te,Le,be.width,be.height,0,De,Ue,be.data)}}}else{L=C.mipmaps,vt&&Bt&&(L.length>0&&Tn++,t.texStorage2D(34067,Tn,Le,j[0].width,j[0].height));for(let B=0;B<6;B++)if(ye){vt?t.texSubImage2D(34069+B,0,0,0,j[B].width,j[B].height,De,Ue,j[B].data):t.texImage2D(34069+B,0,Le,j[B].width,j[B].height,0,De,Ue,j[B].data);for(let te=0;te<L.length;te++){const Te=L[te].image[B].image;vt?t.texSubImage2D(34069+B,te+1,0,0,Te.width,Te.height,De,Ue,Te.data):t.texImage2D(34069+B,te+1,Le,Te.width,Te.height,0,De,Ue,Te.data)}}else{vt?t.texSubImage2D(34069+B,0,0,0,De,Ue,j[B]):t.texImage2D(34069+B,0,Le,De,Ue,j[B]);for(let te=0;te<L.length;te++){const be=L[te];vt?t.texSubImage2D(34069+B,te+1,0,0,De,Ue,be.image[B]):t.texImage2D(34069+B,te+1,Le,De,Ue,be.image[B])}}}w(C,Be)&&T(34067),ve.__version=se.version,C.onUpdate&&C.onUpdate(C)}A.__version=C.version}(F,A,C):t.bindTexture(34067,F.__webglTexture,33984+C)},this.rebindTextures=function ce(A,C,F){const ne=i.get(A);void 0!==C&&ge(ne.__webglFramebuffer,A,A.texture,36064,3553),void 0!==F&&q(A)},this.setupRenderTarget=function Se(A){const C=A.texture,F=i.get(A),ne=i.get(C);A.addEventListener("dispose",J),!0!==A.isWebGLMultipleRenderTargets&&(void 0===ne.__webglTexture&&(ne.__webglTexture=n.createTexture()),ne.__version=C.version,o.memory.textures++);const se=!0===A.isWebGLCubeRenderTarget,ve=!0===A.isWebGLMultipleRenderTargets,je=_(A)||a;if(se){F.__webglFramebuffer=[];for(let ye=0;ye<6;ye++)F.__webglFramebuffer[ye]=n.createFramebuffer()}else{if(F.__webglFramebuffer=n.createFramebuffer(),ve)if(r.drawBuffers){const ye=A.texture;for(let j=0,Ie=ye.length;j<Ie;j++){const Be=i.get(ye[j]);void 0===Be.__webglTexture&&(Be.__webglTexture=n.createTexture(),o.memory.textures++)}}else console.warn("THREE.WebGLRenderer: WebGLMultipleRenderTargets can only be used with WebGL2 or WEBGL_draw_buffers extension.");if(a&&A.samples>0&&!1===ke(A)){const ye=ve?C:[C];F.__webglMultisampledFramebuffer=n.createFramebuffer(),F.__webglColorRenderbuffer=[],t.bindFramebuffer(36160,F.__webglMultisampledFramebuffer);for(let j=0;j<ye.length;j++){const Ie=ye[j];F.__webglColorRenderbuffer[j]=n.createRenderbuffer(),n.bindRenderbuffer(36161,F.__webglColorRenderbuffer[j]);const Be=s.convert(Ie.format,Ie.encoding),De=s.convert(Ie.type),Ue=b(Ie.internalFormat,Be,De,Ie.encoding,!0===A.isXRRenderTarget),Le=He(A);n.renderbufferStorageMultisample(36161,Le,Ue,A.width,A.height),n.framebufferRenderbuffer(36160,36064+j,36161,F.__webglColorRenderbuffer[j])}n.bindRenderbuffer(36161,null),A.depthBuffer&&(F.__webglDepthRenderbuffer=n.createRenderbuffer(),ot(F.__webglDepthRenderbuffer,A,!0)),t.bindFramebuffer(36160,null)}}if(se){t.bindTexture(34067,ne.__webglTexture),G(34067,C,je);for(let ye=0;ye<6;ye++)ge(F.__webglFramebuffer[ye],A,C,36064,34069+ye);w(C,je)&&T(34067),t.unbindTexture()}else if(ve){const ye=A.texture;for(let j=0,Ie=ye.length;j<Ie;j++){const Be=ye[j],De=i.get(Be);t.bindTexture(3553,De.__webglTexture),G(3553,Be,je),ge(F.__webglFramebuffer,A,Be,36064+j,3553),w(Be,je)&&T(3553)}t.unbindTexture()}else{let ye=3553;(A.isWebGL3DRenderTarget||A.isWebGLArrayRenderTarget)&&(a?ye=A.isWebGL3DRenderTarget?32879:35866:console.error("THREE.WebGLTextures: THREE.Data3DTexture and THREE.DataArrayTexture only supported with WebGL2.")),t.bindTexture(ye,ne.__webglTexture),G(ye,C,je),ge(F.__webglFramebuffer,A,C,36064,ye),w(C,je)&&T(ye),t.unbindTexture()}A.depthBuffer&&q(A)},this.updateRenderTargetMipmap=function de(A){const C=_(A)||a,F=!0===A.isWebGLMultipleRenderTargets?A.texture:[A.texture];for(let ne=0,se=F.length;ne<se;ne++){const ve=F[ne];if(w(ve,C)){const je=A.isWebGLCubeRenderTarget?34067:3553,ye=i.get(ve).__webglTexture;t.bindTexture(je,ye),T(je),t.unbindTexture()}}},this.updateMultisampleRenderTarget=function Ke(A){if(a&&A.samples>0&&!1===ke(A)){const C=A.isWebGLMultipleRenderTargets?A.texture:[A.texture],F=A.width,ne=A.height;let se=16384;const ve=[],je=A.stencilBuffer?33306:36096,ye=i.get(A),j=!0===A.isWebGLMultipleRenderTargets;if(j)for(let Ie=0;Ie<C.length;Ie++)t.bindFramebuffer(36160,ye.__webglMultisampledFramebuffer),n.framebufferRenderbuffer(36160,36064+Ie,36161,null),t.bindFramebuffer(36160,ye.__webglFramebuffer),n.framebufferTexture2D(36009,36064+Ie,3553,null,0);t.bindFramebuffer(36008,ye.__webglMultisampledFramebuffer),t.bindFramebuffer(36009,ye.__webglFramebuffer);for(let Ie=0;Ie<C.length;Ie++){ve.push(36064+Ie),A.depthBuffer&&ve.push(je);const Be=void 0!==ye.__ignoreDepthValues&&ye.__ignoreDepthValues;if(!1===Be&&(A.depthBuffer&&(se|=256),A.stencilBuffer&&(se|=1024)),j&&n.framebufferRenderbuffer(36008,36064,36161,ye.__webglColorRenderbuffer[Ie]),!0===Be&&(n.invalidateFramebuffer(36008,[je]),n.invalidateFramebuffer(36009,[je])),j){const De=i.get(C[Ie]).__webglTexture;n.framebufferTexture2D(36009,36064,3553,De,0)}n.blitFramebuffer(0,0,F,ne,0,0,F,ne,se,9728),h&&n.invalidateFramebuffer(36008,ve)}if(t.bindFramebuffer(36008,null),t.bindFramebuffer(36009,null),j)for(let Ie=0;Ie<C.length;Ie++){t.bindFramebuffer(36160,ye.__webglMultisampledFramebuffer),n.framebufferRenderbuffer(36160,36064+Ie,36161,ye.__webglColorRenderbuffer[Ie]);const Be=i.get(C[Ie]).__webglTexture;t.bindFramebuffer(36160,ye.__webglFramebuffer),n.framebufferTexture2D(36009,36064+Ie,3553,Be,0)}t.bindFramebuffer(36009,ye.__webglMultisampledFramebuffer)}},this.setupDepthRenderbuffer=q,this.setupFrameBufferTexture=ge,this.useMultisampledRTT=ke}function One(n,e,t){const i=t.isWebGL2;return{convert:function r(s,o=null){let a;if(s===L1)return 5121;if(1017===s)return 32819;if(1018===s)return 32820;if(1010===s)return 5120;if(1011===s)return 5122;if(1012===s)return 5123;if(1013===s)return 5124;if(s===R1)return 5125;if(s===ks)return 5126;if(s===Oc)return i?5131:(a=e.get("OES_texture_half_float"),null!==a?a.HALF_FLOAT_OES:null);if(1021===s)return 6406;if(s===Gi)return 6408;if(1024===s)return 6409;if(1025===s)return 6410;if(s===z1)return 6402;if(s===ya)return 34041;if(1022===s)return console.warn("THREE.WebGLRenderer: THREE.RGBFormat has been removed. Use THREE.RGBAFormat instead. https://github.com/mrdoob/three.js/pull/23228"),6408;if(1035===s)return a=e.get("EXT_sRGB"),null!==a?a.SRGB_ALPHA_EXT:null;if(1028===s)return 6403;if(1029===s)return 36244;if(1030===s)return 33319;if(1031===s)return 33320;if(1033===s)return 36249;if(33776===s||33777===s||33778===s||33779===s)if(o===Et){if(a=e.get("WEBGL_compressed_texture_s3tc_srgb"),null===a)return null;if(33776===s)return a.COMPRESSED_SRGB_S3TC_DXT1_EXT;if(33777===s)return a.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT;if(33778===s)return a.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT;if(33779===s)return a.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT}else{if(a=e.get("WEBGL_compressed_texture_s3tc"),null===a)return null;if(33776===s)return a.COMPRESSED_RGB_S3TC_DXT1_EXT;if(33777===s)return a.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(33778===s)return a.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(33779===s)return a.COMPRESSED_RGBA_S3TC_DXT5_EXT}if(35840===s||35841===s||35842===s||35843===s){if(a=e.get("WEBGL_compressed_texture_pvrtc"),null===a)return null;if(35840===s)return a.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(35841===s)return a.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(35842===s)return a.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(35843===s)return a.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}if(36196===s)return a=e.get("WEBGL_compressed_texture_etc1"),null!==a?a.COMPRESSED_RGB_ETC1_WEBGL:null;if(37492===s||37496===s){if(a=e.get("WEBGL_compressed_texture_etc"),null===a)return null;if(37492===s)return o===Et?a.COMPRESSED_SRGB8_ETC2:a.COMPRESSED_RGB8_ETC2;if(37496===s)return o===Et?a.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC:a.COMPRESSED_RGBA8_ETC2_EAC}if(37808===s||37809===s||37810===s||37811===s||37812===s||37813===s||37814===s||37815===s||37816===s||37817===s||37818===s||37819===s||37820===s||37821===s){if(a=e.get("WEBGL_compressed_texture_astc"),null===a)return null;if(37808===s)return o===Et?a.COMPRESSED_SRGB8_ALPHA8_ASTC_4x4_KHR:a.COMPRESSED_RGBA_ASTC_4x4_KHR;if(37809===s)return o===Et?a.COMPRESSED_SRGB8_ALPHA8_ASTC_5x4_KHR:a.COMPRESSED_RGBA_ASTC_5x4_KHR;if(37810===s)return o===Et?a.COMPRESSED_SRGB8_ALPHA8_ASTC_5x5_KHR:a.COMPRESSED_RGBA_ASTC_5x5_KHR;if(37811===s)return o===Et?a.COMPRESSED_SRGB8_ALPHA8_ASTC_6x5_KHR:a.COMPRESSED_RGBA_ASTC_6x5_KHR;if(37812===s)return o===Et?a.COMPRESSED_SRGB8_ALPHA8_ASTC_6x6_KHR:a.COMPRESSED_RGBA_ASTC_6x6_KHR;if(37813===s)return o===Et?a.COMPRESSED_SRGB8_ALPHA8_ASTC_8x5_KHR:a.COMPRESSED_RGBA_ASTC_8x5_KHR;if(37814===s)return o===Et?a.COMPRESSED_SRGB8_ALPHA8_ASTC_8x6_KHR:a.COMPRESSED_RGBA_ASTC_8x6_KHR;if(37815===s)return o===Et?a.COMPRESSED_SRGB8_ALPHA8_ASTC_8x8_KHR:a.COMPRESSED_RGBA_ASTC_8x8_KHR;if(37816===s)return o===Et?a.COMPRESSED_SRGB8_ALPHA8_ASTC_10x5_KHR:a.COMPRESSED_RGBA_ASTC_10x5_KHR;if(37817===s)return o===Et?a.COMPRESSED_SRGB8_ALPHA8_ASTC_10x6_KHR:a.COMPRESSED_RGBA_ASTC_10x6_KHR;if(37818===s)return o===Et?a.COMPRESSED_SRGB8_ALPHA8_ASTC_10x8_KHR:a.COMPRESSED_RGBA_ASTC_10x8_KHR;if(37819===s)return o===Et?a.COMPRESSED_SRGB8_ALPHA8_ASTC_10x10_KHR:a.COMPRESSED_RGBA_ASTC_10x10_KHR;if(37820===s)return o===Et?a.COMPRESSED_SRGB8_ALPHA8_ASTC_12x10_KHR:a.COMPRESSED_RGBA_ASTC_12x10_KHR;if(37821===s)return o===Et?a.COMPRESSED_SRGB8_ALPHA8_ASTC_12x12_KHR:a.COMPRESSED_RGBA_ASTC_12x12_KHR}if(36492===s){if(a=e.get("EXT_texture_compression_bptc"),null===a)return null;if(36492===s)return o===Et?a.COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT:a.COMPRESSED_RGBA_BPTC_UNORM_EXT}return s===va?i?34042:(a=e.get("WEBGL_depth_texture"),null!==a?a.UNSIGNED_INT_24_8_WEBGL:null):void 0!==n[s]?n[s]:null}}}class Fne extends An{constructor(e=[]){super(),this.isArrayCamera=!0,this.cameras=e}}class js extends Sn{constructor(){super(),this.isGroup=!0,this.type="Group"}}const kne={type:"move"};class H6{constructor(){this._targetRay=null,this._grip=null,this._hand=null}getHandSpace(){return null===this._hand&&(this._hand=new js,this._hand.matrixAutoUpdate=!1,this._hand.visible=!1,this._hand.joints={},this._hand.inputState={pinching:!1}),this._hand}getTargetRaySpace(){return null===this._targetRay&&(this._targetRay=new js,this._targetRay.matrixAutoUpdate=!1,this._targetRay.visible=!1,this._targetRay.hasLinearVelocity=!1,this._targetRay.linearVelocity=new S,this._targetRay.hasAngularVelocity=!1,this._targetRay.angularVelocity=new S),this._targetRay}getGripSpace(){return null===this._grip&&(this._grip=new js,this._grip.matrixAutoUpdate=!1,this._grip.visible=!1,this._grip.hasLinearVelocity=!1,this._grip.linearVelocity=new S,this._grip.hasAngularVelocity=!1,this._grip.angularVelocity=new S),this._grip}dispatchEvent(e){return null!==this._targetRay&&this._targetRay.dispatchEvent(e),null!==this._grip&&this._grip.dispatchEvent(e),null!==this._hand&&this._hand.dispatchEvent(e),this}connect(e){if(e&&e.hand){const t=this._hand;if(t)for(const i of e.hand.values())this._getHandJoint(t,i)}return this.dispatchEvent({type:"connected",data:e}),this}disconnect(e){return this.dispatchEvent({type:"disconnected",data:e}),null!==this._targetRay&&(this._targetRay.visible=!1),null!==this._grip&&(this._grip.visible=!1),null!==this._hand&&(this._hand.visible=!1),this}update(e,t,i){let r=null,s=null,o=null;const a=this._targetRay,c=this._grip,l=this._hand;if(e&&"visible-blurred"!==t.session.visibilityState){if(l&&e.hand){o=!0;for(const g of e.hand.values()){const m=t.getJointPose(g,i),v=this._getHandJoint(l,g);null!==m&&(v.matrix.fromArray(m.transform.matrix),v.matrix.decompose(v.position,v.rotation,v.scale),v.jointRadius=m.radius),v.visible=null!==m}const d=l.joints["index-finger-tip"].position.distanceTo(l.joints["thumb-tip"].position),h=.02,p=.005;l.inputState.pinching&&d>h+p?(l.inputState.pinching=!1,this.dispatchEvent({type:"pinchend",handedness:e.handedness,target:this})):!l.inputState.pinching&&d<=h-p&&(l.inputState.pinching=!0,this.dispatchEvent({type:"pinchstart",handedness:e.handedness,target:this}))}else null!==c&&e.gripSpace&&(s=t.getPose(e.gripSpace,i),null!==s&&(c.matrix.fromArray(s.transform.matrix),c.matrix.decompose(c.position,c.rotation,c.scale),s.linearVelocity?(c.hasLinearVelocity=!0,c.linearVelocity.copy(s.linearVelocity)):c.hasLinearVelocity=!1,s.angularVelocity?(c.hasAngularVelocity=!0,c.angularVelocity.copy(s.angularVelocity)):c.hasAngularVelocity=!1));null!==a&&(r=t.getPose(e.targetRaySpace,i),null===r&&null!==s&&(r=s),null!==r&&(a.matrix.fromArray(r.transform.matrix),a.matrix.decompose(a.position,a.rotation,a.scale),r.linearVelocity?(a.hasLinearVelocity=!0,a.linearVelocity.copy(r.linearVelocity)):a.hasLinearVelocity=!1,r.angularVelocity?(a.hasAngularVelocity=!0,a.angularVelocity.copy(r.angularVelocity)):a.hasAngularVelocity=!1,this.dispatchEvent(kne)))}return null!==a&&(a.visible=null!==r),null!==c&&(c.visible=null!==s),null!==l&&(l.visible=null!==o),this}_getHandJoint(e,t){if(void 0===e.joints[t.jointName]){const i=new js;i.matrixAutoUpdate=!1,i.visible=!1,e.joints[t.jointName]=i,e.add(i)}return e.joints[t.jointName]}}class Vne extends ur{constructor(e,t,i,r,s,o,a,c,l,u){if((u=void 0!==u?u:z1)!==z1&&u!==ya)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");void 0===i&&u===z1&&(i=R1),void 0===i&&u===ya&&(i=va),super(null,r,s,o,a,c,u,i,l),this.isDepthTexture=!0,this.image={width:e,height:t},this.magFilter=void 0!==a?a:fn,this.minFilter=void 0!==c?c:fn,this.flipY=!1,this.generateMipmaps=!1}}class Hne extends O1{constructor(e,t){super();const i=this;let r=null,s=1,o=null,a="local-floor",c=null,l=null,u=null,f=null,d=null,h=null;const p=t.getContextAttributes();let g=null,m=null;const v=[],x=[],y=new Set,_=new Map,M=new An;M.layers.enable(1),M.viewport=new xt;const w=new An;w.layers.enable(2),w.viewport=new xt;const T=[M,w],b=new Fne;b.layers.enable(1),b.layers.enable(2);let D=null,I=null;function N(V){const H=x.indexOf(V.inputSource);if(-1===H)return;const ae=v[H];void 0!==ae&&ae.dispatchEvent({type:V.type,data:V.inputSource})}function J(){r.removeEventListener("select",N),r.removeEventListener("selectstart",N),r.removeEventListener("selectend",N),r.removeEventListener("squeeze",N),r.removeEventListener("squeezestart",N),r.removeEventListener("squeezeend",N),r.removeEventListener("end",J),r.removeEventListener("inputsourceschange",O);for(let V=0;V<v.length;V++){const H=x[V];null!==H&&(x[V]=null,v[V].disconnect(H))}D=null,I=null,e.setRenderTarget(g),d=null,f=null,u=null,r=null,m=null,Q.stop(),i.isPresenting=!1,i.dispatchEvent({type:"sessionend"})}function O(V){for(let H=0;H<V.removed.length;H++){const ae=V.removed[H],re=x.indexOf(ae);re>=0&&(x[re]=null,v[re].disconnect(ae))}for(let H=0;H<V.added.length;H++){const ae=V.added[H];let re=x.indexOf(ae);if(-1===re){for(let G=0;G<v.length;G++){if(G>=x.length){x.push(ae),re=G;break}if(null===x[G]){x[G]=ae,re=G;break}}if(-1===re)break}const me=v[re];me&&me.connect(ae)}}this.cameraAutoUpdate=!0,this.enabled=!1,this.isPresenting=!1,this.getController=function(V){let H=v[V];return void 0===H&&(H=new H6,v[V]=H),H.getTargetRaySpace()},this.getControllerGrip=function(V){let H=v[V];return void 0===H&&(H=new H6,v[V]=H),H.getGripSpace()},this.getHand=function(V){let H=v[V];return void 0===H&&(H=new H6,v[V]=H),H.getHandSpace()},this.setFramebufferScaleFactor=function(V){s=V,!0===i.isPresenting&&console.warn("THREE.WebXRManager: Cannot change framebuffer scale while presenting.")},this.setReferenceSpaceType=function(V){a=V,!0===i.isPresenting&&console.warn("THREE.WebXRManager: Cannot change reference space type while presenting.")},this.getReferenceSpace=function(){return c||o},this.setReferenceSpace=function(V){c=V},this.getBaseLayer=function(){return null!==f?f:d},this.getBinding=function(){return u},this.getFrame=function(){return h},this.getSession=function(){return r},this.setSession=function(){var V=function pK(n){return function(){var e=this,t=arguments;return new Promise(function(i,r){var s=n.apply(e,t);function o(c){xM(s,i,r,o,a,"next",c)}function a(c){xM(s,i,r,o,a,"throw",c)}o(void 0)})}}(function*(H){if(r=H,null!==r){if(g=e.getRenderTarget(),r.addEventListener("select",N),r.addEventListener("selectstart",N),r.addEventListener("selectend",N),r.addEventListener("squeeze",N),r.addEventListener("squeezestart",N),r.addEventListener("squeezeend",N),r.addEventListener("end",J),r.addEventListener("inputsourceschange",O),!0!==p.xrCompatible&&(yield t.makeXRCompatible()),void 0===r.renderState.layers||!1===e.capabilities.isWebGL2)d=new XRWebGLLayer(r,t,{antialias:void 0!==r.renderState.layers||p.antialias,alpha:p.alpha,depth:p.depth,stencil:p.stencil,framebufferScaleFactor:s}),r.updateRenderState({baseLayer:d}),m=new V1(d.framebufferWidth,d.framebufferHeight,{format:Gi,type:L1,encoding:e.outputEncoding,stencilBuffer:p.stencil});else{let ae=null,re=null,me=null;p.depth&&(me=p.stencil?35056:33190,ae=p.stencil?ya:z1,re=p.stencil?va:R1);const G={colorFormat:32856,depthFormat:me,scaleFactor:s};u=new XRWebGLBinding(r,t),f=u.createProjectionLayer(G),r.updateRenderState({layers:[f]}),m=new V1(f.textureWidth,f.textureHeight,{format:Gi,type:L1,depthTexture:new Vne(f.textureWidth,f.textureHeight,re,void 0,void 0,void 0,void 0,void 0,void 0,ae),stencilBuffer:p.stencil,encoding:e.outputEncoding,samples:p.antialias?4:0}),e.properties.get(m).__ignoreDepthValues=f.ignoreDepthValues}m.isXRRenderTarget=!0,this.setFoveation(1),c=null,o=yield r.requestReferenceSpace(a),Q.setContext(r),Q.start(),i.isPresenting=!0,i.dispatchEvent({type:"sessionstart"})}});return function(H){return V.apply(this,arguments)}}();const R=new S,k=new S;function ee(V,H){null===H?V.matrixWorld.copy(V.matrix):V.matrixWorld.multiplyMatrices(H.matrixWorld,V.matrix),V.matrixWorldInverse.copy(V.matrixWorld).invert()}this.updateCamera=function(V){if(null===r)return;b.near=w.near=M.near=V.near,b.far=w.far=M.far=V.far,(D!==b.near||I!==b.far)&&(r.updateRenderState({depthNear:b.near,depthFar:b.far}),D=b.near,I=b.far);const H=V.parent,ae=b.cameras;ee(b,H);for(let me=0;me<ae.length;me++)ee(ae[me],H);b.matrixWorld.decompose(b.position,b.quaternion,b.scale),V.matrix.copy(b.matrix),V.matrix.decompose(V.position,V.quaternion,V.scale);const re=V.children;for(let me=0,G=re.length;me<G;me++)re[me].updateMatrixWorld(!0);2===ae.length?function Y(V,H,ae){R.setFromMatrixPosition(H.matrixWorld),k.setFromMatrixPosition(ae.matrixWorld);const re=R.distanceTo(k),me=H.projectionMatrix.elements,G=ae.projectionMatrix.elements,$e=me[14]/(me[10]-1),Me=me[14]/(me[10]+1),Ge=(me[9]+1)/me[5],ge=(me[9]-1)/me[5],ot=(me[8]-1)/me[0],Z=(G[8]+1)/G[0],q=$e*ot,ce=$e*Z,Se=re/(-ot+Z),de=Se*-ot;H.matrixWorld.decompose(V.position,V.quaternion,V.scale),V.translateX(de),V.translateZ(Se),V.matrixWorld.compose(V.position,V.quaternion,V.scale),V.matrixWorldInverse.copy(V.matrixWorld).invert();const Ke=$e+Se,He=Me+Se;V.projectionMatrix.makePerspective(q-de,ce+(re-de),Ge*Me/He*Ke,ge*Me/He*Ke,Ke,He)}(b,M,w):b.projectionMatrix.copy(M.projectionMatrix)},this.getCamera=function(){return b},this.getFoveation=function(){return null!==f?f.fixedFoveation:null!==d?d.fixedFoveation:void 0},this.setFoveation=function(V){null!==f&&(f.fixedFoveation=V),null!==d&&void 0!==d.fixedFoveation&&(d.fixedFoveation=V)},this.getPlanes=function(){return y};let $=null;const Q=new xw;Q.setAnimationLoop(function ie(V,H){if(l=H.getViewerPose(c||o),h=H,null!==l){const ae=l.views;null!==d&&(e.setRenderTargetFramebuffer(m,d.framebuffer),e.setRenderTarget(m));let re=!1;ae.length!==b.cameras.length&&(b.cameras.length=0,re=!0);for(let me=0;me<ae.length;me++){const G=ae[me];let $e=null;if(null!==d)$e=d.getViewport(G);else{const Ge=u.getViewSubImage(f,G);$e=Ge.viewport,0===me&&(e.setRenderTargetTextures(m,Ge.colorTexture,f.ignoreDepthValues?void 0:Ge.depthStencilTexture),e.setRenderTarget(m))}let Me=T[me];void 0===Me&&(Me=new An,Me.layers.enable(me),Me.viewport=new xt,T[me]=Me),Me.matrix.fromArray(G.transform.matrix),Me.projectionMatrix.fromArray(G.projectionMatrix),Me.viewport.set($e.x,$e.y,$e.width,$e.height),0===me&&b.matrix.copy(Me.matrix),!0===re&&b.cameras.push(Me)}}for(let ae=0;ae<v.length;ae++){const re=x[ae],me=v[ae];null!==re&&void 0!==me&&me.update(re,H,c||o)}if($&&$(V,H),H.detectedPlanes){i.dispatchEvent({type:"planesdetected",data:H.detectedPlanes});let ae=null;for(const re of y)H.detectedPlanes.has(re)||(null===ae&&(ae=[]),ae.push(re));if(null!==ae)for(const re of ae)y.delete(re),_.delete(re),i.dispatchEvent({type:"planeremoved",data:re});for(const re of H.detectedPlanes)if(y.has(re)){const me=_.get(re);re.lastChangedTime>me&&(_.set(re,re.lastChangedTime),i.dispatchEvent({type:"planechanged",data:re}))}else y.add(re),_.set(re,H.lastChangedTime),i.dispatchEvent({type:"planeadded",data:re})}h=null}),this.setAnimationLoop=function(V){$=V},this.dispose=function(){}}}function Une(n,e){function r(g,m){g.opacity.value=m.opacity,m.color&&g.diffuse.value.copy(m.color),m.emissive&&g.emissive.value.copy(m.emissive).multiplyScalar(m.emissiveIntensity),m.map&&(g.map.value=m.map),m.alphaMap&&(g.alphaMap.value=m.alphaMap),m.bumpMap&&(g.bumpMap.value=m.bumpMap,g.bumpScale.value=m.bumpScale,1===m.side&&(g.bumpScale.value*=-1)),m.displacementMap&&(g.displacementMap.value=m.displacementMap,g.displacementScale.value=m.displacementScale,g.displacementBias.value=m.displacementBias),m.emissiveMap&&(g.emissiveMap.value=m.emissiveMap),m.normalMap&&(g.normalMap.value=m.normalMap,g.normalScale.value.copy(m.normalScale),1===m.side&&g.normalScale.value.negate()),m.specularMap&&(g.specularMap.value=m.specularMap),m.alphaTest>0&&(g.alphaTest.value=m.alphaTest);const v=e.get(m).envMap;if(v&&(g.envMap.value=v,g.flipEnvMap.value=v.isCubeTexture&&!1===v.isRenderTargetTexture?-1:1,g.reflectivity.value=m.reflectivity,g.ior.value=m.ior,g.refractionRatio.value=m.refractionRatio),m.lightMap){g.lightMap.value=m.lightMap;const _=!0!==n.physicallyCorrectLights?Math.PI:1;g.lightMapIntensity.value=m.lightMapIntensity*_}let x,y;m.aoMap&&(g.aoMap.value=m.aoMap,g.aoMapIntensity.value=m.aoMapIntensity),m.map?x=m.map:m.specularMap?x=m.specularMap:m.displacementMap?x=m.displacementMap:m.normalMap?x=m.normalMap:m.bumpMap?x=m.bumpMap:m.roughnessMap?x=m.roughnessMap:m.metalnessMap?x=m.metalnessMap:m.alphaMap?x=m.alphaMap:m.emissiveMap?x=m.emissiveMap:m.clearcoatMap?x=m.clearcoatMap:m.clearcoatNormalMap?x=m.clearcoatNormalMap:m.clearcoatRoughnessMap?x=m.clearcoatRoughnessMap:m.iridescenceMap?x=m.iridescenceMap:m.iridescenceThicknessMap?x=m.iridescenceThicknessMap:m.specularIntensityMap?x=m.specularIntensityMap:m.specularColorMap?x=m.specularColorMap:m.transmissionMap?x=m.transmissionMap:m.thicknessMap?x=m.thicknessMap:m.sheenColorMap?x=m.sheenColorMap:m.sheenRoughnessMap&&(x=m.sheenRoughnessMap),void 0!==x&&(x.isWebGLRenderTarget&&(x=x.texture),!0===x.matrixAutoUpdate&&x.updateMatrix(),g.uvTransform.value.copy(x.matrix)),m.aoMap?y=m.aoMap:m.lightMap&&(y=m.lightMap),void 0!==y&&(y.isWebGLRenderTarget&&(y=y.texture),!0===y.matrixAutoUpdate&&y.updateMatrix(),g.uv2Transform.value.copy(y.matrix))}return{refreshFogUniforms:function t(g,m){m.color.getRGB(g.fogColor.value,_w(n)),m.isFog?(g.fogNear.value=m.near,g.fogFar.value=m.far):m.isFogExp2&&(g.fogDensity.value=m.density)},refreshMaterialUniforms:function i(g,m,v,x,y){m.isMeshBasicMaterial||m.isMeshLambertMaterial?r(g,m):m.isMeshToonMaterial?(r(g,m),function u(g,m){m.gradientMap&&(g.gradientMap.value=m.gradientMap)}(g,m)):m.isMeshPhongMaterial?(r(g,m),function l(g,m){g.specular.value.copy(m.specular),g.shininess.value=Math.max(m.shininess,1e-4)}(g,m)):m.isMeshStandardMaterial?(r(g,m),function f(g,m){g.roughness.value=m.roughness,g.metalness.value=m.metalness,m.roughnessMap&&(g.roughnessMap.value=m.roughnessMap),m.metalnessMap&&(g.metalnessMap.value=m.metalnessMap),e.get(m).envMap&&(g.envMapIntensity.value=m.envMapIntensity)}(g,m),m.isMeshPhysicalMaterial&&function d(g,m,v){g.ior.value=m.ior,m.sheen>0&&(g.sheenColor.value.copy(m.sheenColor).multiplyScalar(m.sheen),g.sheenRoughness.value=m.sheenRoughness,m.sheenColorMap&&(g.sheenColorMap.value=m.sheenColorMap),m.sheenRoughnessMap&&(g.sheenRoughnessMap.value=m.sheenRoughnessMap)),m.clearcoat>0&&(g.clearcoat.value=m.clearcoat,g.clearcoatRoughness.value=m.clearcoatRoughness,m.clearcoatMap&&(g.clearcoatMap.value=m.clearcoatMap),m.clearcoatRoughnessMap&&(g.clearcoatRoughnessMap.value=m.clearcoatRoughnessMap),m.clearcoatNormalMap&&(g.clearcoatNormalScale.value.copy(m.clearcoatNormalScale),g.clearcoatNormalMap.value=m.clearcoatNormalMap,1===m.side&&g.clearcoatNormalScale.value.negate())),m.iridescence>0&&(g.iridescence.value=m.iridescence,g.iridescenceIOR.value=m.iridescenceIOR,g.iridescenceThicknessMinimum.value=m.iridescenceThicknessRange[0],g.iridescenceThicknessMaximum.value=m.iridescenceThicknessRange[1],m.iridescenceMap&&(g.iridescenceMap.value=m.iridescenceMap),m.iridescenceThicknessMap&&(g.iridescenceThicknessMap.value=m.iridescenceThicknessMap)),m.transmission>0&&(g.transmission.value=m.transmission,g.transmissionSamplerMap.value=v.texture,g.transmissionSamplerSize.value.set(v.width,v.height),m.transmissionMap&&(g.transmissionMap.value=m.transmissionMap),g.thickness.value=m.thickness,m.thicknessMap&&(g.thicknessMap.value=m.thicknessMap),g.attenuationDistance.value=m.attenuationDistance,g.attenuationColor.value.copy(m.attenuationColor)),g.specularIntensity.value=m.specularIntensity,g.specularColor.value.copy(m.specularColor),m.specularIntensityMap&&(g.specularIntensityMap.value=m.specularIntensityMap),m.specularColorMap&&(g.specularColorMap.value=m.specularColorMap)}(g,m,y)):m.isMeshMatcapMaterial?(r(g,m),function h(g,m){m.matcap&&(g.matcap.value=m.matcap)}(g,m)):m.isMeshDepthMaterial?r(g,m):m.isMeshDistanceMaterial?(r(g,m),function p(g,m){g.referencePosition.value.copy(m.referencePosition),g.nearDistance.value=m.nearDistance,g.farDistance.value=m.farDistance}(g,m)):m.isMeshNormalMaterial?r(g,m):m.isLineBasicMaterial?(function s(g,m){g.diffuse.value.copy(m.color),g.opacity.value=m.opacity}(g,m),m.isLineDashedMaterial&&function o(g,m){g.dashSize.value=m.dashSize,g.totalSize.value=m.dashSize+m.gapSize,g.scale.value=m.scale}(g,m)):m.isPointsMaterial?function a(g,m,v,x){let y;g.diffuse.value.copy(m.color),g.opacity.value=m.opacity,g.size.value=m.size*v,g.scale.value=.5*x,m.map&&(g.map.value=m.map),m.alphaMap&&(g.alphaMap.value=m.alphaMap),m.alphaTest>0&&(g.alphaTest.value=m.alphaTest),m.map?y=m.map:m.alphaMap&&(y=m.alphaMap),void 0!==y&&(!0===y.matrixAutoUpdate&&y.updateMatrix(),g.uvTransform.value.copy(y.matrix))}(g,m,v,x):m.isSpriteMaterial?function c(g,m){let v;g.diffuse.value.copy(m.color),g.opacity.value=m.opacity,g.rotation.value=m.rotation,m.map&&(g.map.value=m.map),m.alphaMap&&(g.alphaMap.value=m.alphaMap),m.alphaTest>0&&(g.alphaTest.value=m.alphaTest),m.map?v=m.map:m.alphaMap&&(v=m.alphaMap),void 0!==v&&(!0===v.matrixAutoUpdate&&v.updateMatrix(),g.uvTransform.value.copy(v.matrix))}(g,m):m.isShadowMaterial?(g.color.value.copy(m.color),g.opacity.value=m.opacity):m.isShaderMaterial&&(m.uniformsNeedUpdate=!1)}}}function Bne(n,e,t,i){let r={},s={},o=[];const a=t.isWebGL2?n.getParameter(35375):0;function h(x,y,_){const M=x.value;if(void 0===_[y])return _[y]="number"==typeof M?M:M.clone(),!0;if("number"==typeof M){if(_[y]!==M)return _[y]=M,!0}else{const w=_[y];if(!1===w.equals(M))return w.copy(M),!0}return!1}function g(x){const y=x.value,_={boundary:0,storage:0};return"number"==typeof y?(_.boundary=4,_.storage=4):y.isVector2?(_.boundary=8,_.storage=8):y.isVector3||y.isColor?(_.boundary=16,_.storage=12):y.isVector4?(_.boundary=16,_.storage=16):y.isMatrix3?(_.boundary=48,_.storage=48):y.isMatrix4?(_.boundary=64,_.storage=64):y.isTexture?console.warn("THREE.WebGLRenderer: Texture samplers can not be part of an uniforms group."):console.warn("THREE.WebGLRenderer: Unsupported uniform value type.",y),_}function m(x){const y=x.target;y.removeEventListener("dispose",m);const _=o.indexOf(y.__bindingPointIndex);o.splice(_,1),n.deleteBuffer(r[y.id]),delete r[y.id],delete s[y.id]}return{bind:function c(x,y){i.uniformBlockBinding(x,y.program)},update:function l(x,y){let _=r[x.id];void 0===_&&(function p(x){const y=x.uniforms;let _=0;let w=0;for(let T=0,b=y.length;T<b;T++){const D=y[T],I=g(D);if(D.__data=new Float32Array(I.storage/Float32Array.BYTES_PER_ELEMENT),D.__offset=_,T>0){w=_%16;const N=16-w;0!==w&&N-I.boundary<0&&(_+=16-w,D.__offset=_)}_+=I.storage}w=_%16,w>0&&(_+=16-w),x.__size=_,x.__cache={}}(x),_=function u(x){const y=function f(){for(let x=0;x<a;x++)if(-1===o.indexOf(x))return o.push(x),x;return console.error("THREE.WebGLRenderer: Maximum number of simultaneously usable uniforms groups reached."),0}();x.__bindingPointIndex=y;const _=n.createBuffer(),M=x.__size,w=x.usage;return n.bindBuffer(35345,_),n.bufferData(35345,M,w),n.bindBuffer(35345,null),n.bindBufferBase(35345,y,_),_}(x),r[x.id]=_,x.addEventListener("dispose",m)),i.updateUBOMapping(x,y.program);const w=e.render.frame;s[x.id]!==w&&(function d(x){const _=x.uniforms,M=x.__cache;n.bindBuffer(35345,r[x.id]);for(let w=0,T=_.length;w<T;w++){const b=_[w];if(!0===h(b,w,M)){const D=b.value,I=b.__offset;"number"==typeof D?(b.__data[0]=D,n.bufferSubData(35345,I,b.__data)):(b.value.isMatrix3?(b.__data[0]=b.value.elements[0],b.__data[1]=b.value.elements[1],b.__data[2]=b.value.elements[2],b.__data[3]=b.value.elements[0],b.__data[4]=b.value.elements[3],b.__data[5]=b.value.elements[4],b.__data[6]=b.value.elements[5],b.__data[7]=b.value.elements[0],b.__data[8]=b.value.elements[6],b.__data[9]=b.value.elements[7],b.__data[10]=b.value.elements[8],b.__data[11]=b.value.elements[0]):D.toArray(b.__data),n.bufferSubData(35345,I,b.__data))}}n.bindBuffer(35345,null)}(x),s[x.id]=w)},dispose:function v(){for(const x in r)n.deleteBuffer(r[x]);o=[],r={},s={}}}}function Yw(n={}){this.isWebGLRenderer=!0;const e=void 0!==n.canvas?n.canvas:function Gne(){const n=Uc("canvas");return n.style.display="block",n}(),t=void 0!==n.context?n.context:null,i=void 0===n.depth||n.depth,r=void 0===n.stencil||n.stencil,s=void 0!==n.antialias&&n.antialias,o=void 0===n.premultipliedAlpha||n.premultipliedAlpha,a=void 0!==n.preserveDrawingBuffer&&n.preserveDrawingBuffer,c=void 0!==n.powerPreference?n.powerPreference:"default",l=void 0!==n.failIfMajorPerformanceCaveat&&n.failIfMajorPerformanceCaveat;let u;u=null!==t?t.getContextAttributes().alpha:void 0!==n.alpha&&n.alpha;let f=null,d=null;const h=[],p=[];this.domElement=e,this.debug={checkShaderErrors:!0},this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this.outputEncoding=P1,this.physicallyCorrectLights=!1,this.toneMapping=0,this.toneMappingExposure=1;const g=this;let m=!1,v=0,x=0,y=null,_=-1,M=null;const w=new xt,T=new xt;let b=null,D=e.width,I=e.height,N=1,J=null,O=null;const R=new xt(0,0,D,I),k=new xt(0,0,D,I);let Y=!1;const ee=new P6;let $=!1,ie=!1,Q=null;const V=new Xe,H=new K,ae=new S,re={background:null,fog:null,environment:null,overrideMaterial:null,isScene:!0};function me(){return null===y?N:1}let Me,Ge,ge,ot,Z,q,ce,Se,de,Ke,He,ke,Ht,St,A,C,F,ne,se,ve,je,ye,j,Ie,G=t;function $e(E,P){for(let U=0;U<E.length;U++){const W=e.getContext(E[U],P);if(null!==W)return W}return null}try{const E={alpha:!0,depth:i,stencil:r,antialias:s,premultipliedAlpha:o,preserveDrawingBuffer:a,powerPreference:c,failIfMajorPerformanceCaveat:l};if("setAttribute"in e&&e.setAttribute("data-engine","three.js r147"),e.addEventListener("webglcontextlost",Ue,!1),e.addEventListener("webglcontextrestored",Le,!1),e.addEventListener("webglcontextcreationerror",vt,!1),null===G){const P=["webgl2","webgl","experimental-webgl"];if(!0===g.isWebGL1Renderer&&P.shift(),G=$e(P,E),null===G)throw $e(P)?new Error("Error creating WebGL context with your selected attributes."):new Error("Error creating WebGL context.")}void 0===G.getShaderPrecisionFormat&&(G.getShaderPrecisionFormat=function(){return{rangeMin:1,rangeMax:1,precision:1}})}catch(E){throw console.error("THREE.WebGLRenderer: "+E.message),E}function Be(){Me=new nte(G),Ge=new Xee(G,Me,n),Me.init(Ge),ye=new One(G,Me,Ge),ge=new Pne(G,Me,Ge),ot=new ste,Z=new Mne,q=new Nne(G,Me,ge,Z,Ge,ye,ot),ce=new Jee(g),Se=new tte(g),de=new ZJ(G,Ge),j=new Zee(G,Me,de,Ge),Ke=new ite(G,de,ot,j),He=new lte(G,Ke,de,ot),se=new cte(G,Ge,q),C=new Kee(Z),ke=new bne(g,ce,Se,Me,Ge,j,C),Ht=new Une(g,Z),St=new Cne,A=new Ine(Me,Ge),ne=new qee(g,ce,Se,ge,He,u,o),F=new zne(g,He,Ge),Ie=new Bne(G,ot,Ge,ge),ve=new Yee(G,Me,ot,Ge),je=new rte(G,Me,ot,Ge),ot.programs=ke.programs,g.capabilities=Ge,g.extensions=Me,g.properties=Z,g.renderLists=St,g.shadowMap=F,g.state=ge,g.info=ot}Be();const De=new Hne(g,G);function Ue(E){E.preventDefault(),console.log("THREE.WebGLRenderer: Context Lost."),m=!0}function Le(){console.log("THREE.WebGLRenderer: Context Restored."),m=!1;const E=ot.autoReset,P=F.enabled,U=F.autoUpdate,z=F.needsUpdate,W=F.type;Be(),ot.autoReset=E,F.enabled=P,F.autoUpdate=U,F.needsUpdate=z,F.type=W}function vt(E){console.error("THREE.WebGLRenderer: A WebGL context could not be created. Reason: ",E.statusMessage)}function Bt(E){const P=E.target;P.removeEventListener("dispose",Bt),function Tn(E){(function L(E){const P=Z.get(E).programs;void 0!==P&&(P.forEach(function(U){ke.releaseProgram(U)}),E.isShaderMaterial&&ke.releaseShaderCache(E))})(E),Z.remove(E)}(P)}this.xr=De,this.getContext=function(){return G},this.getContextAttributes=function(){return G.getContextAttributes()},this.forceContextLoss=function(){const E=Me.get("WEBGL_lose_context");E&&E.loseContext()},this.forceContextRestore=function(){const E=Me.get("WEBGL_lose_context");E&&E.restoreContext()},this.getPixelRatio=function(){return N},this.setPixelRatio=function(E){void 0!==E&&(N=E,this.setSize(D,I,!1))},this.getSize=function(E){return E.set(D,I)},this.setSize=function(E,P,U){De.isPresenting?console.warn("THREE.WebGLRenderer: Can't change size while VR device is presenting."):(D=E,I=P,e.width=Math.floor(E*N),e.height=Math.floor(P*N),!1!==U&&(e.style.width=E+"px",e.style.height=P+"px"),this.setViewport(0,0,E,P))},this.getDrawingBufferSize=function(E){return E.set(D*N,I*N).floor()},this.setDrawingBufferSize=function(E,P,U){D=E,I=P,N=U,e.width=Math.floor(E*U),e.height=Math.floor(P*U),this.setViewport(0,0,E,P)},this.getCurrentViewport=function(E){return E.copy(w)},this.getViewport=function(E){return E.copy(R)},this.setViewport=function(E,P,U,z){E.isVector4?R.set(E.x,E.y,E.z,E.w):R.set(E,P,U,z),ge.viewport(w.copy(R).multiplyScalar(N).floor())},this.getScissor=function(E){return E.copy(k)},this.setScissor=function(E,P,U,z){E.isVector4?k.set(E.x,E.y,E.z,E.w):k.set(E,P,U,z),ge.scissor(T.copy(k).multiplyScalar(N).floor())},this.getScissorTest=function(){return Y},this.setScissorTest=function(E){ge.setScissorTest(Y=E)},this.setOpaqueSort=function(E){J=E},this.setTransparentSort=function(E){O=E},this.getClearColor=function(E){return E.copy(ne.getClearColor())},this.setClearColor=function(){ne.setClearColor.apply(ne,arguments)},this.getClearAlpha=function(){return ne.getClearAlpha()},this.setClearAlpha=function(){ne.setClearAlpha.apply(ne,arguments)},this.clear=function(E=!0,P=!0,U=!0){let z=0;E&&(z|=16384),P&&(z|=256),U&&(z|=1024),G.clear(z)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.dispose=function(){e.removeEventListener("webglcontextlost",Ue,!1),e.removeEventListener("webglcontextrestored",Le,!1),e.removeEventListener("webglcontextcreationerror",vt,!1),St.dispose(),A.dispose(),Z.dispose(),ce.dispose(),Se.dispose(),He.dispose(),j.dispose(),Ie.dispose(),ke.dispose(),De.dispose(),De.removeEventListener("sessionstart",be),De.removeEventListener("sessionend",Te),Q&&(Q.dispose(),Q=null),Ct.stop()},this.renderBufferDirect=function(E,P,U,z,W,Ne){null===P&&(P=re);const Je=W.isMesh&&W.matrixWorld.determinant()<0,at=function mse(E,P,U,z,W){!0!==P.isScene&&(P=re),q.resetTextureUnits();const Ne=P.fog,at=null===y?g.outputEncoding:!0===y.isXRRenderTarget?y.texture.encoding:P1,ut=(z.isMeshStandardMaterial?Se:ce).get(z.envMap||(z.isMeshStandardMaterial?P.environment:null)),yt=!0===z.vertexColors&&!!U.attributes.color&&4===U.attributes.color.itemSize,ht=!!z.normalMap&&!!U.attributes.tangent,pt=!!U.morphAttributes.position,hn=!!U.morphAttributes.normal,Ai=!!U.morphAttributes.color,ys=z.toneMapped?g.toneMapping:0,oo=U.morphAttributes.position||U.morphAttributes.normal||U.morphAttributes.color,pn=void 0!==oo?oo.length:0,mt=Z.get(z),k8=d.state.lights;!0!==$||!0!==ie&&E===M||C.setState(z,E,E===M&&z.id===_);let Ln=!1;z.version===mt.__version?(mt.needsLights&&mt.lightsStateVersion!==k8.state.version||mt.outputEncoding!==at||W.isInstancedMesh&&!1===mt.instancing||!W.isInstancedMesh&&!0===mt.instancing||W.isSkinnedMesh&&!1===mt.skinning||!W.isSkinnedMesh&&!0===mt.skinning||mt.envMap!==ut||!0===z.fog&&mt.fog!==Ne||void 0!==mt.numClippingPlanes&&(mt.numClippingPlanes!==C.numPlanes||mt.numIntersection!==C.numIntersection)||mt.vertexAlphas!==yt||mt.vertexTangents!==ht||mt.morphTargets!==pt||mt.morphNormals!==hn||mt.morphColors!==Ai||mt.toneMapping!==ys||!0===Ge.isWebGL2&&mt.morphTargetsCount!==pn)&&(Ln=!0):(Ln=!0,mt.__version=z.version);let ao=mt.currentProgram;!0===Ln&&(ao=qi(z,P,W));let MS=!1,Ml=!1,V8=!1;const ri=ao.getUniforms(),co=mt.uniforms;if(ge.useProgram(ao.program)&&(MS=!0,Ml=!0,V8=!0),z.id!==_&&(_=z.id,Ml=!0),MS||M!==E){if(ri.setValue(G,"projectionMatrix",E.projectionMatrix),Ge.logarithmicDepthBuffer&&ri.setValue(G,"logDepthBufFC",2/(Math.log(E.far+1)/Math.LN2)),M!==E&&(M=E,Ml=!0,V8=!0),z.isShaderMaterial||z.isMeshPhongMaterial||z.isMeshToonMaterial||z.isMeshStandardMaterial||z.envMap){const Ti=ri.map.cameraPosition;void 0!==Ti&&Ti.setValue(G,ae.setFromMatrixPosition(E.matrixWorld))}(z.isMeshPhongMaterial||z.isMeshToonMaterial||z.isMeshLambertMaterial||z.isMeshBasicMaterial||z.isMeshStandardMaterial||z.isShaderMaterial)&&ri.setValue(G,"isOrthographic",!0===E.isOrthographicCamera),(z.isMeshPhongMaterial||z.isMeshToonMaterial||z.isMeshLambertMaterial||z.isMeshBasicMaterial||z.isMeshStandardMaterial||z.isShaderMaterial||z.isShadowMaterial||W.isSkinnedMesh)&&ri.setValue(G,"viewMatrix",E.matrixWorldInverse)}if(W.isSkinnedMesh){ri.setOptional(G,W,"bindMatrix"),ri.setOptional(G,W,"bindMatrixInverse");const Ti=W.skeleton;Ti&&(Ge.floatVertexTextures?(null===Ti.boneTexture&&Ti.computeBoneTexture(),ri.setValue(G,"boneTexture",Ti.boneTexture,q),ri.setValue(G,"boneTextureSize",Ti.boneTextureSize)):console.warn("THREE.WebGLRenderer: SkinnedMesh can only be used with WebGL 2. With WebGL 1 OES_texture_float and vertex textures support is required."))}const H8=U.morphAttributes;if((void 0!==H8.position||void 0!==H8.normal||void 0!==H8.color&&!0===Ge.isWebGL2)&&se.update(W,U,z,ao),(Ml||mt.receiveShadow!==W.receiveShadow)&&(mt.receiveShadow=W.receiveShadow,ri.setValue(G,"receiveShadow",W.receiveShadow)),z.isMeshGouraudMaterial&&null!==z.envMap&&(co.envMap.value=ut,co.flipEnvMap.value=ut.isCubeTexture&&!1===ut.isRenderTargetTexture?-1:1),Ml&&(ri.setValue(G,"toneMappingExposure",g.toneMappingExposure),mt.needsLights&&function gse(E,P){E.ambientLightColor.needsUpdate=P,E.lightProbe.needsUpdate=P,E.directionalLights.needsUpdate=P,E.directionalLightShadows.needsUpdate=P,E.pointLights.needsUpdate=P,E.pointLightShadows.needsUpdate=P,E.spotLights.needsUpdate=P,E.spotLightShadows.needsUpdate=P,E.rectAreaLights.needsUpdate=P,E.hemisphereLights.needsUpdate=P}(co,V8),Ne&&!0===z.fog&&Ht.refreshFogUniforms(co,Ne),Ht.refreshMaterialUniforms(co,z,N,I,Q),w4.upload(G,mt.uniformsList,co,q)),z.isShaderMaterial&&!0===z.uniformsNeedUpdate&&(w4.upload(G,mt.uniformsList,co,q),z.uniformsNeedUpdate=!1),z.isSpriteMaterial&&ri.setValue(G,"center",W.center),ri.setValue(G,"modelViewMatrix",W.modelViewMatrix),ri.setValue(G,"normalMatrix",W.normalMatrix),ri.setValue(G,"modelMatrix",W.matrixWorld),z.isShaderMaterial||z.isRawShaderMaterial){const Ti=z.uniformsGroups;for(let U8=0,yse=Ti.length;U8<yse;U8++)if(Ge.isWebGL2){const wS=Ti[U8];Ie.update(wS,ao),Ie.bind(wS,ao)}else console.warn("THREE.WebGLRenderer: Uniform Buffer Objects can only be used with WebGL 2.")}return ao}(E,P,U,z,W);ge.setMaterial(z,Je);let ut=U.index,yt=1;!0===z.wireframe&&(ut=Ke.getWireframeAttribute(U),yt=2);const ht=U.drawRange,pt=U.attributes.position;let hn=ht.start*yt,Ai=(ht.start+ht.count)*yt;null!==Ne&&(hn=Math.max(hn,Ne.start*yt),Ai=Math.min(Ai,(Ne.start+Ne.count)*yt)),null!==ut?(hn=Math.max(hn,0),Ai=Math.min(Ai,ut.count)):null!=pt&&(hn=Math.max(hn,0),Ai=Math.min(Ai,pt.count));const ys=Ai-hn;if(ys<0||ys===1/0)return;j.setup(W,z,at,U,ut);let oo,pn=ve;if(null!==ut&&(oo=de.get(ut),pn=je,pn.setIndex(oo)),W.isMesh)!0===z.wireframe?(ge.setLineWidth(z.wireframeLinewidth*me()),pn.setMode(1)):pn.setMode(4);else if(W.isLine){let mt=z.linewidth;void 0===mt&&(mt=1),ge.setLineWidth(mt*me()),pn.setMode(W.isLineSegments?1:W.isLineLoop?2:3)}else W.isPoints?pn.setMode(0):W.isSprite&&pn.setMode(4);if(W.isInstancedMesh)pn.renderInstances(hn,ys,W.count);else if(U.isInstancedBufferGeometry){const k8=Math.min(U.instanceCount,void 0!==U._maxInstanceCount?U._maxInstanceCount:1/0);pn.renderInstances(hn,ys,k8)}else pn.render(hn,ys)},this.compile=function(E,P){function U(z,W,Ne){!0===z.transparent&&2===z.side?(z.side=1,z.needsUpdate=!0,qi(z,W,Ne),z.side=0,z.needsUpdate=!0,qi(z,W,Ne),z.side=2):qi(z,W,Ne)}d=A.get(E),d.init(),p.push(d),E.traverseVisible(function(z){z.isLight&&z.layers.test(P.layers)&&(d.pushLight(z),z.castShadow&&d.pushShadow(z))}),d.setupLights(g.physicallyCorrectLights),E.traverse(function(z){const W=z.material;if(W)if(Array.isArray(W))for(let Ne=0;Ne<W.length;Ne++)U(W[Ne],E,z);else U(W,E,z)}),p.pop(),d=null};let B=null;function be(){Ct.stop()}function Te(){Ct.start()}const Ct=new xw;function In(E,P,U,z){if(!1===E.visible)return;if(E.layers.test(P.layers))if(E.isGroup)U=E.renderOrder;else if(E.isLOD)!0===E.autoUpdate&&E.update(P);else if(E.isLight)d.pushLight(E),E.castShadow&&d.pushShadow(E);else if(E.isSprite){if(!E.frustumCulled||ee.intersectsSprite(E)){z&&ae.setFromMatrixPosition(E.matrixWorld).applyMatrix4(V);const Je=He.update(E),at=E.material;at.visible&&f.push(E,Je,at,U,ae.z,null)}}else if((E.isMesh||E.isLine||E.isPoints)&&(E.isSkinnedMesh&&E.skeleton.frame!==ot.render.frame&&(E.skeleton.update(),E.skeleton.frame=ot.render.frame),!E.frustumCulled||ee.intersectsObject(E))){z&&ae.setFromMatrixPosition(E.matrixWorld).applyMatrix4(V);const Je=He.update(E),at=E.material;if(Array.isArray(at)){const ut=Je.groups;for(let yt=0,ht=ut.length;yt<ht;yt++){const pt=ut[yt],hn=at[pt.materialIndex];hn&&hn.visible&&f.push(E,Je,hn,U,ae.z,pt)}}else at.visible&&f.push(E,Je,at,U,ae.z,null)}const Ne=E.children;for(let Je=0,at=Ne.length;Je<at;Je++)In(Ne[Je],P,U,z)}function qn(E,P,U,z){const W=E.opaque,Ne=E.transmissive,Je=E.transparent;d.setupLightsView(U),Ne.length>0&&function so(E,P,U){const z=Ge.isWebGL2;null===Q&&(Q=new V1(1,1,{generateMipmaps:!0,type:Me.has("EXT_color_buffer_half_float")?Oc:L1,minFilter:Fs,samples:z&&!0===s?4:0})),g.getDrawingBufferSize(H),z?Q.setSize(H.x,H.y):Q.setSize(Ku(H.x),Ku(H.y));const W=g.getRenderTarget();g.setRenderTarget(Q),g.clear();const Ne=g.toneMapping;g.toneMapping=0,Gt(E,P,U),g.toneMapping=Ne,q.updateMultisampleRenderTarget(Q),q.updateRenderTargetMipmap(Q),g.setRenderTarget(W)}(W,P,U),z&&ge.viewport(w.copy(z)),W.length>0&&Gt(W,P,U),Ne.length>0&&Gt(Ne,P,U),Je.length>0&&Gt(Je,P,U),ge.buffers.depth.setTest(!0),ge.buffers.depth.setMask(!0),ge.buffers.color.setMask(!0),ge.setPolygonOffset(!1)}function Gt(E,P,U){const z=!0===P.isScene?P.overrideMaterial:null;for(let W=0,Ne=E.length;W<Ne;W++){const Je=E[W],at=Je.object,ut=Je.geometry,yt=null===z?Je.material:z,ht=Je.group;at.layers.test(U.layers)&&vs(at,P,U,ut,yt,ht)}}function vs(E,P,U,z,W,Ne){E.onBeforeRender(g,P,U,z,W,Ne),E.modelViewMatrix.multiplyMatrices(U.matrixWorldInverse,E.matrixWorld),E.normalMatrix.getNormalMatrix(E.modelViewMatrix),W.onBeforeRender(g,P,U,z,E,Ne),!0===W.transparent&&2===W.side?(W.side=1,W.needsUpdate=!0,g.renderBufferDirect(U,P,z,W,E,Ne),W.side=0,W.needsUpdate=!0,g.renderBufferDirect(U,P,z,W,E,Ne),W.side=2):g.renderBufferDirect(U,P,z,W,E,Ne),E.onAfterRender(g,P,U,z,W,Ne)}function qi(E,P,U){!0!==P.isScene&&(P=re);const z=Z.get(E),W=d.state.lights,Je=W.state.version,at=ke.getParameters(E,W.state,d.state.shadowsArray,P,U),ut=ke.getProgramCacheKey(at);let yt=z.programs;z.environment=E.isMeshStandardMaterial?P.environment:null,z.fog=P.fog,z.envMap=(E.isMeshStandardMaterial?Se:ce).get(E.envMap||z.environment),void 0===yt&&(E.addEventListener("dispose",Bt),yt=new Map,z.programs=yt);let ht=yt.get(ut);if(void 0!==ht){if(z.currentProgram===ht&&z.lightsStateVersion===Je)return bS(E,at),ht}else at.uniforms=ke.getUniforms(E),E.onBuild(U,at,g),E.onBeforeCompile(at,g),ht=ke.acquireProgram(at,ut),yt.set(ut,ht),z.uniforms=at.uniforms;const pt=z.uniforms;(!E.isShaderMaterial&&!E.isRawShaderMaterial||!0===E.clipping)&&(pt.clippingPlanes=C.uniform),bS(E,at),z.needsLights=function vse(E){return E.isMeshLambertMaterial||E.isMeshToonMaterial||E.isMeshPhongMaterial||E.isMeshStandardMaterial||E.isShadowMaterial||E.isShaderMaterial&&!0===E.lights}(E),z.lightsStateVersion=Je,z.needsLights&&(pt.ambientLightColor.value=W.state.ambient,pt.lightProbe.value=W.state.probe,pt.directionalLights.value=W.state.directional,pt.directionalLightShadows.value=W.state.directionalShadow,pt.spotLights.value=W.state.spot,pt.spotLightShadows.value=W.state.spotShadow,pt.rectAreaLights.value=W.state.rectArea,pt.ltc_1.value=W.state.rectAreaLTC1,pt.ltc_2.value=W.state.rectAreaLTC2,pt.pointLights.value=W.state.point,pt.pointLightShadows.value=W.state.pointShadow,pt.hemisphereLights.value=W.state.hemi,pt.directionalShadowMap.value=W.state.directionalShadowMap,pt.directionalShadowMatrix.value=W.state.directionalShadowMatrix,pt.spotShadowMap.value=W.state.spotShadowMap,pt.spotLightMatrix.value=W.state.spotLightMatrix,pt.spotLightMap.value=W.state.spotLightMap,pt.pointShadowMap.value=W.state.pointShadowMap,pt.pointShadowMatrix.value=W.state.pointShadowMatrix);const hn=ht.getUniforms(),Ai=w4.seqWithValue(hn.seq,pt);return z.currentProgram=ht,z.uniformsList=Ai,ht}function bS(E,P){const U=Z.get(E);U.outputEncoding=P.outputEncoding,U.instancing=P.instancing,U.skinning=P.skinning,U.morphTargets=P.morphTargets,U.morphNormals=P.morphNormals,U.morphColors=P.morphColors,U.morphTargetsCount=P.morphTargetsCount,U.numClippingPlanes=P.numClippingPlanes,U.numIntersection=P.numClipIntersection,U.vertexAlphas=P.vertexAlphas,U.vertexTangents=P.vertexTangents,U.toneMapping=P.toneMapping}Ct.setAnimationLoop(function te(E){B&&B(E)}),typeof self<"u"&&Ct.setContext(self),this.setAnimationLoop=function(E){B=E,De.setAnimationLoop(E),null===E?Ct.stop():Ct.start()},De.addEventListener("sessionstart",be),De.addEventListener("sessionend",Te),this.render=function(E,P){if(void 0===P||!0===P.isCamera){if(!0!==m){if(!0===E.matrixWorldAutoUpdate&&E.updateMatrixWorld(),null===P.parent&&!0===P.matrixWorldAutoUpdate&&P.updateMatrixWorld(),!0===De.enabled&&!0===De.isPresenting&&(!0===De.cameraAutoUpdate&&De.updateCamera(P),P=De.getCamera()),!0===E.isScene&&E.onBeforeRender(g,E,P,y),d=A.get(E,p.length),d.init(),p.push(d),V.multiplyMatrices(P.projectionMatrix,P.matrixWorldInverse),ee.setFromProjectionMatrix(V),ie=this.localClippingEnabled,$=C.init(this.clippingPlanes,ie,P),f=St.get(E,h.length),f.init(),h.push(f),In(E,P,0,g.sortObjects),f.finish(),!0===g.sortObjects&&f.sort(J,O),!0===$&&C.beginShadows(),F.render(d.state.shadowsArray,E,P),!0===$&&C.endShadows(),!0===this.info.autoReset&&this.info.reset(),ne.render(f,E),d.setupLights(g.physicallyCorrectLights),P.isArrayCamera){const z=P.cameras;for(let W=0,Ne=z.length;W<Ne;W++){const Je=z[W];qn(f,E,Je,Je.viewport)}}else qn(f,E,P);null!==y&&(q.updateMultisampleRenderTarget(y),q.updateRenderTargetMipmap(y)),!0===E.isScene&&E.onAfterRender(g,E,P),j.resetDefaultState(),_=-1,M=null,p.pop(),d=p.length>0?p[p.length-1]:null,h.pop(),f=h.length>0?h[h.length-1]:null}}else console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.")},this.getActiveCubeFace=function(){return v},this.getActiveMipmapLevel=function(){return x},this.getRenderTarget=function(){return y},this.setRenderTargetTextures=function(E,P,U){Z.get(E.texture).__webglTexture=P,Z.get(E.depthTexture).__webglTexture=U;const z=Z.get(E);z.__hasExternalTextures=!0,z.__hasExternalTextures&&(z.__autoAllocateDepthBuffer=void 0===U,z.__autoAllocateDepthBuffer||!0===Me.has("WEBGL_multisampled_render_to_texture")&&(console.warn("THREE.WebGLRenderer: Render-to-texture extension was disabled because an external texture was provided"),z.__useRenderToTexture=!1))},this.setRenderTargetFramebuffer=function(E,P){const U=Z.get(E);U.__webglFramebuffer=P,U.__useDefaultFramebuffer=void 0===P},this.setRenderTarget=function(E,P=0,U=0){y=E,v=P,x=U;let z=!0,W=null,Ne=!1,Je=!1;if(E){const ut=Z.get(E);void 0!==ut.__useDefaultFramebuffer?(ge.bindFramebuffer(36160,null),z=!1):void 0===ut.__webglFramebuffer?q.setupRenderTarget(E):ut.__hasExternalTextures&&q.rebindTextures(E,Z.get(E.texture).__webglTexture,Z.get(E.depthTexture).__webglTexture);const yt=E.texture;(yt.isData3DTexture||yt.isDataArrayTexture||yt.isCompressedArrayTexture)&&(Je=!0);const ht=Z.get(E).__webglFramebuffer;E.isWebGLCubeRenderTarget?(W=ht[P],Ne=!0):W=Ge.isWebGL2&&E.samples>0&&!1===q.useMultisampledRTT(E)?Z.get(E).__webglMultisampledFramebuffer:ht,w.copy(E.viewport),T.copy(E.scissor),b=E.scissorTest}else w.copy(R).multiplyScalar(N).floor(),T.copy(k).multiplyScalar(N).floor(),b=Y;if(ge.bindFramebuffer(36160,W)&&Ge.drawBuffers&&z&&ge.drawBuffers(E,W),ge.viewport(w),ge.scissor(T),ge.setScissorTest(b),Ne){const ut=Z.get(E.texture);G.framebufferTexture2D(36160,36064,34069+P,ut.__webglTexture,U)}else if(Je){const ut=Z.get(E.texture);G.framebufferTextureLayer(36160,36064,ut.__webglTexture,U||0,P||0)}_=-1},this.readRenderTargetPixels=function(E,P,U,z,W,Ne,Je){if(!E||!E.isWebGLRenderTarget)return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");let at=Z.get(E).__webglFramebuffer;if(E.isWebGLCubeRenderTarget&&void 0!==Je&&(at=at[Je]),at){ge.bindFramebuffer(36160,at);try{const ut=E.texture,yt=ut.format,ht=ut.type;if(yt!==Gi&&ye.convert(yt)!==G.getParameter(35739))return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");const pt=ht===Oc&&(Me.has("EXT_color_buffer_half_float")||Ge.isWebGL2&&Me.has("EXT_color_buffer_float"));if(!(ht===L1||ye.convert(ht)===G.getParameter(35738)||ht===ks&&(Ge.isWebGL2||Me.has("OES_texture_float")||Me.has("WEBGL_color_buffer_float"))||pt))return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");P>=0&&P<=E.width-z&&U>=0&&U<=E.height-W&&G.readPixels(P,U,z,W,ye.convert(yt),ye.convert(ht),Ne)}finally{const ut=null!==y?Z.get(y).__webglFramebuffer:null;ge.bindFramebuffer(36160,ut)}}},this.copyFramebufferToTexture=function(E,P,U=0){const z=Math.pow(2,-U),W=Math.floor(P.image.width*z),Ne=Math.floor(P.image.height*z);q.setTexture2D(P,0),G.copyTexSubImage2D(3553,U,0,0,E.x,E.y,W,Ne),ge.unbindTexture()},this.copyTextureToTexture=function(E,P,U,z=0){const W=P.image.width,Ne=P.image.height,Je=ye.convert(U.format),at=ye.convert(U.type);q.setTexture2D(U,0),G.pixelStorei(37440,U.flipY),G.pixelStorei(37441,U.premultiplyAlpha),G.pixelStorei(3317,U.unpackAlignment),P.isDataTexture?G.texSubImage2D(3553,z,E.x,E.y,W,Ne,Je,at,P.image.data):P.isCompressedTexture?G.compressedTexSubImage2D(3553,z,E.x,E.y,P.mipmaps[0].width,P.mipmaps[0].height,Je,P.mipmaps[0].data):G.texSubImage2D(3553,z,E.x,E.y,Je,at,P.image),0===z&&U.generateMipmaps&&G.generateMipmap(3553),ge.unbindTexture()},this.copyTextureToTexture3D=function(E,P,U,z,W=0){if(g.isWebGL1Renderer)return void console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: can only be used with WebGL2.");const Ne=E.max.x-E.min.x+1,Je=E.max.y-E.min.y+1,at=E.max.z-E.min.z+1,ut=ye.convert(z.format),yt=ye.convert(z.type);let ht;if(z.isData3DTexture)q.setTexture3D(z,0),ht=32879;else{if(!z.isDataArrayTexture)return void console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: only supports THREE.DataTexture3D and THREE.DataTexture2DArray.");q.setTexture2DArray(z,0),ht=35866}G.pixelStorei(37440,z.flipY),G.pixelStorei(37441,z.premultiplyAlpha),G.pixelStorei(3317,z.unpackAlignment);const pt=G.getParameter(3314),hn=G.getParameter(32878),Ai=G.getParameter(3316),ys=G.getParameter(3315),oo=G.getParameter(32877),pn=U.isCompressedTexture?U.mipmaps[0]:U.image;G.pixelStorei(3314,pn.width),G.pixelStorei(32878,pn.height),G.pixelStorei(3316,E.min.x),G.pixelStorei(3315,E.min.y),G.pixelStorei(32877,E.min.z),U.isDataTexture||U.isData3DTexture?G.texSubImage3D(ht,W,P.x,P.y,P.z,Ne,Je,at,ut,yt,pn.data):U.isCompressedArrayTexture?(console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: untested support for compressed srcTexture."),G.compressedTexSubImage3D(ht,W,P.x,P.y,P.z,Ne,Je,at,ut,pn.data)):G.texSubImage3D(ht,W,P.x,P.y,P.z,Ne,Je,at,ut,yt,pn),G.pixelStorei(3314,pt),G.pixelStorei(32878,hn),G.pixelStorei(3316,Ai),G.pixelStorei(3315,ys),G.pixelStorei(32877,oo),0===W&&z.generateMipmaps&&G.generateMipmap(ht),ge.unbindTexture()},this.initTexture=function(E){E.isCubeTexture?q.setTextureCube(E,0):E.isData3DTexture?q.setTexture3D(E,0):E.isDataArrayTexture||E.isCompressedArrayTexture?q.setTexture2DArray(E,0):q.setTexture2D(E,0),ge.unbindTexture()},this.resetState=function(){v=0,x=0,y=null,ge.reset(),j.reset()},typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}(class Wne extends Yw{}).prototype.isWebGL1Renderer=!0;class C4{constructor(e,t=25e-5){this.isFogExp2=!0,this.name="",this.color=new pe(e),this.density=t}clone(){return new C4(this.color,this.density)}toJSON(){return{type:"FogExp2",color:this.color.getHex(),density:this.density}}}class Xw extends Sn{constructor(){super(),this.isScene=!0,this.type="Scene",this.background=null,this.environment=null,this.fog=null,this.backgroundBlurriness=0,this.backgroundIntensity=1,this.overrideMaterial=null,typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}copy(e,t){return super.copy(e,t),null!==e.background&&(this.background=e.background.clone()),null!==e.environment&&(this.environment=e.environment.clone()),null!==e.fog&&(this.fog=e.fog.clone()),this.backgroundBlurriness=e.backgroundBlurriness,this.backgroundIntensity=e.backgroundIntensity,null!==e.overrideMaterial&&(this.overrideMaterial=e.overrideMaterial.clone()),this.matrixAutoUpdate=e.matrixAutoUpdate,this}toJSON(e){const t=super.toJSON(e);return null!==this.fog&&(t.object.fog=this.fog.toJSON()),this.backgroundBlurriness>0&&(t.backgroundBlurriness=this.backgroundBlurriness),1!==this.backgroundIntensity&&(t.backgroundIntensity=this.backgroundIntensity),t}get autoUpdate(){return console.warn("THREE.Scene: autoUpdate was renamed to matrixWorldAutoUpdate in r144."),this.matrixWorldAutoUpdate}set autoUpdate(e){console.warn("THREE.Scene: autoUpdate was renamed to matrixWorldAutoUpdate in r144."),this.matrixWorldAutoUpdate=e}}class B6{constructor(e,t){this.isInterleavedBuffer=!0,this.array=e,this.stride=t,this.count=void 0!==e?e.length/t:0,this.usage=35044,this.updateRange={offset:0,count:-1},this.version=0,this.uuid=Ci()}onUploadCallback(){}set needsUpdate(e){!0===e&&this.version++}setUsage(e){return this.usage=e,this}copy(e){return this.array=new e.array.constructor(e.array),this.count=e.count,this.stride=e.stride,this.usage=e.usage,this}copyAt(e,t,i){e*=this.stride,i*=t.stride;for(let r=0,s=this.stride;r<s;r++)this.array[e+r]=t.array[i+r];return this}set(e,t=0){return this.array.set(e,t),this}clone(e){void 0===e.arrayBuffers&&(e.arrayBuffers={}),void 0===this.array.buffer._uuid&&(this.array.buffer._uuid=Ci()),void 0===e.arrayBuffers[this.array.buffer._uuid]&&(e.arrayBuffers[this.array.buffer._uuid]=this.array.slice(0).buffer);const t=new this.array.constructor(e.arrayBuffers[this.array.buffer._uuid]),i=new this.constructor(t,this.stride);return i.setUsage(this.usage),i}onUpload(e){return this.onUploadCallback=e,this}toJSON(e){return void 0===e.arrayBuffers&&(e.arrayBuffers={}),void 0===this.array.buffer._uuid&&(this.array.buffer._uuid=Ci()),void 0===e.arrayBuffers[this.array.buffer._uuid]&&(e.arrayBuffers[this.array.buffer._uuid]=Array.from(new Uint32Array(this.array.buffer))),{uuid:this.uuid,buffer:this.array.buffer._uuid,type:this.array.constructor.name,stride:this.stride}}}const ii=new S;class Z1{constructor(e,t,i,r=!1){this.isInterleavedBufferAttribute=!0,this.name="",this.data=e,this.itemSize=t,this.offset=i,this.normalized=!0===r}get count(){return this.data.count}get array(){return this.data.array}set needsUpdate(e){this.data.needsUpdate=e}applyMatrix4(e){for(let t=0,i=this.data.count;t<i;t++)ii.fromBufferAttribute(this,t),ii.applyMatrix4(e),this.setXYZ(t,ii.x,ii.y,ii.z);return this}applyNormalMatrix(e){for(let t=0,i=this.count;t<i;t++)ii.fromBufferAttribute(this,t),ii.applyNormalMatrix(e),this.setXYZ(t,ii.x,ii.y,ii.z);return this}transformDirection(e){for(let t=0,i=this.count;t<i;t++)ii.fromBufferAttribute(this,t),ii.transformDirection(e),this.setXYZ(t,ii.x,ii.y,ii.z);return this}setX(e,t){return this.normalized&&(t=Tt(t,this.array)),this.data.array[e*this.data.stride+this.offset]=t,this}setY(e,t){return this.normalized&&(t=Tt(t,this.array)),this.data.array[e*this.data.stride+this.offset+1]=t,this}setZ(e,t){return this.normalized&&(t=Tt(t,this.array)),this.data.array[e*this.data.stride+this.offset+2]=t,this}setW(e,t){return this.normalized&&(t=Tt(t,this.array)),this.data.array[e*this.data.stride+this.offset+3]=t,this}getX(e){let t=this.data.array[e*this.data.stride+this.offset];return this.normalized&&(t=as(t,this.array)),t}getY(e){let t=this.data.array[e*this.data.stride+this.offset+1];return this.normalized&&(t=as(t,this.array)),t}getZ(e){let t=this.data.array[e*this.data.stride+this.offset+2];return this.normalized&&(t=as(t,this.array)),t}getW(e){let t=this.data.array[e*this.data.stride+this.offset+3];return this.normalized&&(t=as(t,this.array)),t}setXY(e,t,i){return e=e*this.data.stride+this.offset,this.normalized&&(t=Tt(t,this.array),i=Tt(i,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=i,this}setXYZ(e,t,i,r){return e=e*this.data.stride+this.offset,this.normalized&&(t=Tt(t,this.array),i=Tt(i,this.array),r=Tt(r,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=i,this.data.array[e+2]=r,this}setXYZW(e,t,i,r,s){return e=e*this.data.stride+this.offset,this.normalized&&(t=Tt(t,this.array),i=Tt(i,this.array),r=Tt(r,this.array),s=Tt(s,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=i,this.data.array[e+2]=r,this.data.array[e+3]=s,this}clone(e){if(void 0===e){console.log("THREE.InterleavedBufferAttribute.clone(): Cloning an interleaved buffer attribute will de-interleave buffer data.");const t=[];for(let i=0;i<this.count;i++){const r=i*this.data.stride+this.offset;for(let s=0;s<this.itemSize;s++)t.push(this.data.array[r+s])}return new Ut(new this.array.constructor(t),this.itemSize,this.normalized)}return void 0===e.interleavedBuffers&&(e.interleavedBuffers={}),void 0===e.interleavedBuffers[this.data.uuid]&&(e.interleavedBuffers[this.data.uuid]=this.data.clone(e)),new Z1(e.interleavedBuffers[this.data.uuid],this.itemSize,this.offset,this.normalized)}toJSON(e){if(void 0===e){console.log("THREE.InterleavedBufferAttribute.toJSON(): Serializing an interleaved buffer attribute will de-interleave buffer data.");const t=[];for(let i=0;i<this.count;i++){const r=i*this.data.stride+this.offset;for(let s=0;s<this.itemSize;s++)t.push(this.data.array[r+s])}return{itemSize:this.itemSize,type:this.array.constructor.name,array:t,normalized:this.normalized}}return void 0===e.interleavedBuffers&&(e.interleavedBuffers={}),void 0===e.interleavedBuffers[this.data.uuid]&&(e.interleavedBuffers[this.data.uuid]=this.data.toJSON(e)),{isInterleavedBufferAttribute:!0,itemSize:this.itemSize,data:this.data.uuid,offset:this.offset,normalized:this.normalized}}}const nC=new S,iC=new xt,rC=new xt,qne=new S,sC=new Xe;class oC extends Dn{constructor(e,t){super(e,t),this.isSkinnedMesh=!0,this.type="SkinnedMesh",this.bindMode="attached",this.bindMatrix=new Xe,this.bindMatrixInverse=new Xe}copy(e,t){return super.copy(e,t),this.bindMode=e.bindMode,this.bindMatrix.copy(e.bindMatrix),this.bindMatrixInverse.copy(e.bindMatrixInverse),this.skeleton=e.skeleton,this}bind(e,t){this.skeleton=e,void 0===t&&(this.updateMatrixWorld(!0),this.skeleton.calculateInverses(),t=this.matrixWorld),this.bindMatrix.copy(t),this.bindMatrixInverse.copy(t).invert()}pose(){this.skeleton.pose()}normalizeSkinWeights(){const e=new xt,t=this.geometry.attributes.skinWeight;for(let i=0,r=t.count;i<r;i++){e.fromBufferAttribute(t,i);const s=1/e.manhattanLength();s!==1/0?e.multiplyScalar(s):e.set(1,0,0,0),t.setXYZW(i,e.x,e.y,e.z,e.w)}}updateMatrixWorld(e){super.updateMatrixWorld(e),"attached"===this.bindMode?this.bindMatrixInverse.copy(this.matrixWorld).invert():"detached"===this.bindMode?this.bindMatrixInverse.copy(this.bindMatrix).invert():console.warn("THREE.SkinnedMesh: Unrecognized bindMode: "+this.bindMode)}boneTransform(e,t){const i=this.skeleton,r=this.geometry;iC.fromBufferAttribute(r.attributes.skinIndex,e),rC.fromBufferAttribute(r.attributes.skinWeight,e),nC.copy(t).applyMatrix4(this.bindMatrix),t.set(0,0,0);for(let s=0;s<4;s++){const o=rC.getComponent(s);if(0!==o){const a=iC.getComponent(s);sC.multiplyMatrices(i.bones[a].matrixWorld,i.boneInverses[a]),t.addScaledVector(qne.copy(nC).applyMatrix4(sC),o)}}return t.applyMatrix4(this.bindMatrixInverse)}}class W6 extends Sn{constructor(){super(),this.isBone=!0,this.type="Bone"}}class Kc extends ur{constructor(e=null,t=1,i=1,r,s,o,a,c,l=fn,u=fn,f,d){super(null,o,a,c,l,u,r,s,f,d),this.isDataTexture=!0,this.image={data:e,width:t,height:i},this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}const aC=new Xe,Zne=new Xe;class T4{constructor(e=[],t=[]){this.uuid=Ci(),this.bones=e.slice(0),this.boneInverses=t,this.boneMatrices=null,this.boneTexture=null,this.boneTextureSize=0,this.frame=-1,this.init()}init(){const e=this.bones,t=this.boneInverses;if(this.boneMatrices=new Float32Array(16*e.length),0===t.length)this.calculateInverses();else if(e.length!==t.length){console.warn("THREE.Skeleton: Number of inverse bone matrices does not match amount of bones."),this.boneInverses=[];for(let i=0,r=this.bones.length;i<r;i++)this.boneInverses.push(new Xe)}}calculateInverses(){this.boneInverses.length=0;for(let e=0,t=this.bones.length;e<t;e++){const i=new Xe;this.bones[e]&&i.copy(this.bones[e].matrixWorld).invert(),this.boneInverses.push(i)}}pose(){for(let e=0,t=this.bones.length;e<t;e++){const i=this.bones[e];i&&i.matrixWorld.copy(this.boneInverses[e]).invert()}for(let e=0,t=this.bones.length;e<t;e++){const i=this.bones[e];i&&(i.parent&&i.parent.isBone?(i.matrix.copy(i.parent.matrixWorld).invert(),i.matrix.multiply(i.matrixWorld)):i.matrix.copy(i.matrixWorld),i.matrix.decompose(i.position,i.quaternion,i.scale))}}update(){const e=this.bones,t=this.boneInverses,i=this.boneMatrices,r=this.boneTexture;for(let s=0,o=e.length;s<o;s++)aC.multiplyMatrices(e[s]?e[s].matrixWorld:Zne,t[s]),aC.toArray(i,16*s);null!==r&&(r.needsUpdate=!0)}clone(){return new T4(this.bones,this.boneInverses)}computeBoneTexture(){let e=Math.sqrt(4*this.bones.length);e=nw(e),e=Math.max(e,4);const t=new Float32Array(e*e*4);t.set(this.boneMatrices);const i=new Kc(t,e,e,Gi,ks);return i.needsUpdate=!0,this.boneMatrices=t,this.boneTexture=i,this.boneTextureSize=e,this}getBoneByName(e){for(let t=0,i=this.bones.length;t<i;t++){const r=this.bones[t];if(r.name===e)return r}}dispose(){null!==this.boneTexture&&(this.boneTexture.dispose(),this.boneTexture=null)}fromJSON(e,t){this.uuid=e.uuid;for(let i=0,r=e.bones.length;i<r;i++){const s=e.bones[i];let o=t[s];void 0===o&&(console.warn("THREE.Skeleton: No bone found with UUID:",s),o=new W6),this.bones.push(o),this.boneInverses.push((new Xe).fromArray(e.boneInverses[i]))}return this.init(),this}toJSON(){const e={metadata:{version:4.5,type:"Skeleton",generator:"Skeleton.toJSON"},bones:[],boneInverses:[]};e.uuid=this.uuid;const t=this.bones,i=this.boneInverses;for(let r=0,s=t.length;r<s;r++)e.bones.push(t[r].uuid),e.boneInverses.push(i[r].toArray());return e}}class Jc extends Ut{constructor(e,t,i,r=1){super(e,t,i),this.isInstancedBufferAttribute=!0,this.meshPerAttribute=r}copy(e){return super.copy(e),this.meshPerAttribute=e.meshPerAttribute,this}toJSON(){const e=super.toJSON();return e.meshPerAttribute=this.meshPerAttribute,e.isInstancedBufferAttribute=!0,e}}const cC=new Xe,lC=new Xe,I4=[],Yne=new Xe,Qc=new Dn;class uC extends Dn{constructor(e,t,i){super(e,t),this.isInstancedMesh=!0,this.instanceMatrix=new Jc(new Float32Array(16*i),16),this.instanceColor=null,this.count=i,this.frustumCulled=!1;for(let r=0;r<i;r++)this.setMatrixAt(r,Yne)}copy(e,t){return super.copy(e,t),this.instanceMatrix.copy(e.instanceMatrix),null!==e.instanceColor&&(this.instanceColor=e.instanceColor.clone()),this.count=e.count,this}getColorAt(e,t){t.fromArray(this.instanceColor.array,3*e)}getMatrixAt(e,t){t.fromArray(this.instanceMatrix.array,16*e)}raycast(e,t){const i=this.matrixWorld,r=this.count;if(Qc.geometry=this.geometry,Qc.material=this.material,void 0!==Qc.material)for(let s=0;s<r;s++){this.getMatrixAt(s,cC),lC.multiplyMatrices(i,cC),Qc.matrixWorld=lC,Qc.raycast(e,I4);for(let o=0,a=I4.length;o<a;o++){const c=I4[o];c.instanceId=s,c.object=this,t.push(c)}I4.length=0}}setColorAt(e,t){null===this.instanceColor&&(this.instanceColor=new Jc(new Float32Array(3*this.instanceMatrix.count),3)),t.toArray(this.instanceColor.array,3*e)}setMatrixAt(e,t){t.toArray(this.instanceMatrix.array,16*e)}updateMorphTargets(){}dispose(){this.dispatchEvent({type:"dispose"})}}class di extends pr{constructor(e){super(),this.isLineBasicMaterial=!0,this.type="LineBasicMaterial",this.color=new pe(16777215),this.linewidth=1,this.linecap="round",this.linejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.linewidth=e.linewidth,this.linecap=e.linecap,this.linejoin=e.linejoin,this.fog=e.fog,this}}const fC=new S,dC=new S,hC=new Xe,$6=new s4,L4=new W1;class Y1 extends Sn{constructor(e=new it,t=new di){super(),this.isLine=!0,this.type="Line",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),this.material=e.material,this.geometry=e.geometry,this}computeLineDistances(){const e=this.geometry;if(null===e.index){const t=e.attributes.position,i=[0];for(let r=1,s=t.count;r<s;r++)fC.fromBufferAttribute(t,r-1),dC.fromBufferAttribute(t,r),i[r]=i[r-1],i[r]+=fC.distanceTo(dC);e.setAttribute("lineDistance",new Ce(i,1))}else console.warn("THREE.Line.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}raycast(e,t){const i=this.geometry,r=this.matrixWorld,s=e.params.Line.threshold,o=i.drawRange;if(null===i.boundingSphere&&i.computeBoundingSphere(),L4.copy(i.boundingSphere),L4.applyMatrix4(r),L4.radius+=s,!1===e.ray.intersectsSphere(L4))return;hC.copy(r).invert(),$6.copy(e.ray).applyMatrix4(hC);const a=s/((this.scale.x+this.scale.y+this.scale.z)/3),c=a*a,l=new S,u=new S,f=new S,d=new S,h=this.isLineSegments?2:1,p=i.index,m=i.attributes.position;if(null!==p)for(let y=Math.max(0,o.start),_=Math.min(p.count,o.start+o.count)-1;y<_;y+=h){const M=p.getX(y),w=p.getX(y+1);if(l.fromBufferAttribute(m,M),u.fromBufferAttribute(m,w),$6.distanceSqToSegment(l,u,d,f)>c)continue;d.applyMatrix4(this.matrixWorld);const b=e.ray.origin.distanceTo(d);b<e.near||b>e.far||t.push({distance:b,point:f.clone().applyMatrix4(this.matrixWorld),index:y,face:null,faceIndex:null,object:this})}else for(let y=Math.max(0,o.start),_=Math.min(m.count,o.start+o.count)-1;y<_;y+=h){if(l.fromBufferAttribute(m,y),u.fromBufferAttribute(m,y+1),$6.distanceSqToSegment(l,u,d,f)>c)continue;d.applyMatrix4(this.matrixWorld);const w=e.ray.origin.distanceTo(d);w<e.near||w>e.far||t.push({distance:w,point:f.clone().applyMatrix4(this.matrixWorld),index:y,face:null,faceIndex:null,object:this})}}updateMorphTargets(){const t=this.geometry.morphAttributes,i=Object.keys(t);if(i.length>0){const r=t[i[0]];if(void 0!==r){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let s=0,o=r.length;s<o;s++){const a=r[s].name||String(s);this.morphTargetInfluences.push(0),this.morphTargetDictionary[a]=s}}}}}const pC=new S,mC=new S;class j6 extends Y1{constructor(e,t){super(e,t),this.isLineSegments=!0,this.type="LineSegments"}computeLineDistances(){const e=this.geometry;if(null===e.index){const t=e.attributes.position,i=[];for(let r=0,s=t.count;r<s;r+=2)pC.fromBufferAttribute(t,r),mC.fromBufferAttribute(t,r+1),i[r]=0===r?0:i[r-1],i[r+1]=i[r]+pC.distanceTo(mC);e.setAttribute("lineDistance",new Ce(i,1))}else console.warn("THREE.LineSegments.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}}class gC extends Y1{constructor(e,t){super(e,t),this.isLineLoop=!0,this.type="LineLoop"}}class q6 extends pr{constructor(e){super(),this.isPointsMaterial=!0,this.type="PointsMaterial",this.color=new pe(16777215),this.map=null,this.alphaMap=null,this.size=1,this.sizeAttenuation=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.size=e.size,this.sizeAttenuation=e.sizeAttenuation,this.fog=e.fog,this}}const vC=new Xe,Z6=new s4,R4=new W1,z4=new S;class Y6 extends Sn{constructor(e=new it,t=new q6){super(),this.isPoints=!0,this.type="Points",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),this.material=e.material,this.geometry=e.geometry,this}raycast(e,t){const i=this.geometry,r=this.matrixWorld,s=e.params.Points.threshold,o=i.drawRange;if(null===i.boundingSphere&&i.computeBoundingSphere(),R4.copy(i.boundingSphere),R4.applyMatrix4(r),R4.radius+=s,!1===e.ray.intersectsSphere(R4))return;vC.copy(r).invert(),Z6.copy(e.ray).applyMatrix4(vC);const a=s/((this.scale.x+this.scale.y+this.scale.z)/3),c=a*a,l=i.index,f=i.attributes.position;if(null!==l)for(let p=Math.max(0,o.start),g=Math.min(l.count,o.start+o.count);p<g;p++){const m=l.getX(p);z4.fromBufferAttribute(f,m),yC(z4,m,c,r,e,t,this)}else for(let p=Math.max(0,o.start),g=Math.min(f.count,o.start+o.count);p<g;p++)z4.fromBufferAttribute(f,p),yC(z4,p,c,r,e,t,this)}updateMorphTargets(){const t=this.geometry.morphAttributes,i=Object.keys(t);if(i.length>0){const r=t[i[0]];if(void 0!==r){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let s=0,o=r.length;s<o;s++){const a=r[s].name||String(s);this.morphTargetInfluences.push(0),this.morphTargetDictionary[a]=s}}}}}function yC(n,e,t,i,r,s,o){const a=Z6.distanceSqToPoint(n);if(a<t){const c=new S;Z6.closestPointToPoint(n,c),c.applyMatrix4(i);const l=r.ray.origin.distanceTo(c);if(l<r.near||l>r.far)return;s.push({distance:l,distanceToRay:Math.sqrt(a),point:c,index:e,face:null,object:o})}}class W4 extends it{constructor(e=.5,t=1,i=8,r=1,s=0,o=2*Math.PI){super(),this.type="RingGeometry",this.parameters={innerRadius:e,outerRadius:t,thetaSegments:i,phiSegments:r,thetaStart:s,thetaLength:o},i=Math.max(3,i);const a=[],c=[],l=[],u=[];let f=e;const d=(t-e)/(r=Math.max(1,r)),h=new S,p=new K;for(let g=0;g<=r;g++){for(let m=0;m<=i;m++){const v=s+m/i*o;h.x=f*Math.cos(v),h.y=f*Math.sin(v),c.push(h.x,h.y,h.z),l.push(0,0,1),p.x=(h.x/t+1)/2,p.y=(h.y/t+1)/2,u.push(p.x,p.y)}f+=d}for(let g=0;g<r;g++){const m=g*(i+1);for(let v=0;v<i;v++){const x=v+m,_=x+i+1,M=x+i+2,w=x+1;a.push(x,_,w),a.push(_,M,w)}}this.setIndex(a),this.setAttribute("position",new Ce(c,3)),this.setAttribute("normal",new Ce(l,3)),this.setAttribute("uv",new Ce(u,2))}static fromJSON(e){return new W4(e.innerRadius,e.outerRadius,e.thetaSegments,e.phiSegments,e.thetaStart,e.thetaLength)}}class j4 extends pr{constructor(e){super(),this.isMeshStandardMaterial=!0,this.defines={STANDARD:""},this.type="MeshStandardMaterial",this.color=new pe(16777215),this.roughness=1,this.metalness=0,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new pe(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=0,this.normalScale=new K(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.roughnessMap=null,this.metalnessMap=null,this.alphaMap=null,this.envMap=null,this.envMapIntensity=1,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.defines={STANDARD:""},this.color.copy(e.color),this.roughness=e.roughness,this.metalness=e.metalness,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.roughnessMap=e.roughnessMap,this.metalnessMap=e.metalnessMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapIntensity=e.envMapIntensity,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class qs extends j4{constructor(e){super(),this.isMeshPhysicalMaterial=!0,this.defines={STANDARD:"",PHYSICAL:""},this.type="MeshPhysicalMaterial",this.clearcoatMap=null,this.clearcoatRoughness=0,this.clearcoatRoughnessMap=null,this.clearcoatNormalScale=new K(1,1),this.clearcoatNormalMap=null,this.ior=1.5,Object.defineProperty(this,"reflectivity",{get:function(){return rn(2.5*(this.ior-1)/(this.ior+1),0,1)},set:function(t){this.ior=(1+.4*t)/(1-.4*t)}}),this.iridescenceMap=null,this.iridescenceIOR=1.3,this.iridescenceThicknessRange=[100,400],this.iridescenceThicknessMap=null,this.sheenColor=new pe(0),this.sheenColorMap=null,this.sheenRoughness=1,this.sheenRoughnessMap=null,this.transmissionMap=null,this.thickness=0,this.thicknessMap=null,this.attenuationDistance=1/0,this.attenuationColor=new pe(1,1,1),this.specularIntensity=1,this.specularIntensityMap=null,this.specularColor=new pe(1,1,1),this.specularColorMap=null,this._sheen=0,this._clearcoat=0,this._iridescence=0,this._transmission=0,this.setValues(e)}get sheen(){return this._sheen}set sheen(e){this._sheen>0!=e>0&&this.version++,this._sheen=e}get clearcoat(){return this._clearcoat}set clearcoat(e){this._clearcoat>0!=e>0&&this.version++,this._clearcoat=e}get iridescence(){return this._iridescence}set iridescence(e){this._iridescence>0!=e>0&&this.version++,this._iridescence=e}get transmission(){return this._transmission}set transmission(e){this._transmission>0!=e>0&&this.version++,this._transmission=e}copy(e){return super.copy(e),this.defines={STANDARD:"",PHYSICAL:""},this.clearcoat=e.clearcoat,this.clearcoatMap=e.clearcoatMap,this.clearcoatRoughness=e.clearcoatRoughness,this.clearcoatRoughnessMap=e.clearcoatRoughnessMap,this.clearcoatNormalMap=e.clearcoatNormalMap,this.clearcoatNormalScale.copy(e.clearcoatNormalScale),this.ior=e.ior,this.iridescence=e.iridescence,this.iridescenceMap=e.iridescenceMap,this.iridescenceIOR=e.iridescenceIOR,this.iridescenceThicknessRange=[...e.iridescenceThicknessRange],this.iridescenceThicknessMap=e.iridescenceThicknessMap,this.sheen=e.sheen,this.sheenColor.copy(e.sheenColor),this.sheenColorMap=e.sheenColorMap,this.sheenRoughness=e.sheenRoughness,this.sheenRoughnessMap=e.sheenRoughnessMap,this.transmission=e.transmission,this.transmissionMap=e.transmissionMap,this.thickness=e.thickness,this.thicknessMap=e.thicknessMap,this.attenuationDistance=e.attenuationDistance,this.attenuationColor.copy(e.attenuationColor),this.specularIntensity=e.specularIntensity,this.specularIntensityMap=e.specularIntensityMap,this.specularColor.copy(e.specularColor),this.specularColorMap=e.specularColorMap,this}}function $i(n,e,t){return v8(n)?new n.constructor(n.subarray(e,void 0!==t?t:n.length)):n.slice(e,t)}function J1(n,e,t){return!n||!t&&n.constructor===e?n:"number"==typeof e.BYTES_PER_ELEMENT?new e(n):Array.prototype.slice.call(n)}function v8(n){return ArrayBuffer.isView(n)&&!(n instanceof DataView)}function RC(n){const t=n.length,i=new Array(t);for(let r=0;r!==t;++r)i[r]=r;return i.sort(function e(r,s){return n[r]-n[s]}),i}function y8(n,e,t){const i=n.length,r=new n.constructor(i);for(let s=0,o=0;o!==i;++s){const a=t[s]*e;for(let c=0;c!==e;++c)r[o++]=n[a+c]}return r}function _8(n,e,t,i){let r=1,s=n[0];for(;void 0!==s&&void 0===s[i];)s=n[r++];if(void 0===s)return;let o=s[i];if(void 0!==o)if(Array.isArray(o))do{o=s[i],void 0!==o&&(e.push(s.time),t.push.apply(t,o)),s=n[r++]}while(void 0!==s);else if(void 0!==o.toArray)do{o=s[i],void 0!==o&&(e.push(s.time),o.toArray(t,t.length)),s=n[r++]}while(void 0!==s);else do{o=s[i],void 0!==o&&(e.push(s.time),t.push(o)),s=n[r++]}while(void 0!==s)}class ol{constructor(e,t,i,r){this.parameterPositions=e,this._cachedIndex=0,this.resultBuffer=void 0!==r?r:new t.constructor(i),this.sampleValues=t,this.valueSize=i,this.settings=null,this.DefaultSettings_={}}evaluate(e){const t=this.parameterPositions;let i=this._cachedIndex,r=t[i],s=t[i-1];e:{t:{let o;n:{i:if(!(e<r)){for(let a=i+2;;){if(void 0===r){if(e<s)break i;return i=t.length,this._cachedIndex=i,this.copySampleValue_(i-1)}if(i===a)break;if(s=r,r=t[++i],e<r)break t}o=t.length;break n}if(e>=s)break e;{const a=t[1];e<a&&(i=2,s=a);for(let c=i-2;;){if(void 0===s)return this._cachedIndex=0,this.copySampleValue_(0);if(i===c)break;if(r=s,s=t[--i-1],e>=s)break t}o=i,i=0}}for(;i<o;){const a=i+o>>>1;e<t[a]?o=a:i=a+1}if(r=t[i],s=t[i-1],void 0===s)return this._cachedIndex=0,this.copySampleValue_(0);if(void 0===r)return i=t.length,this._cachedIndex=i,this.copySampleValue_(i-1)}this._cachedIndex=i,this.intervalChanged_(i,s,r)}return this.interpolate_(i,s,e,r)}getSettings_(){return this.settings||this.DefaultSettings_}copySampleValue_(e){const t=this.resultBuffer,i=this.sampleValues,r=this.valueSize,s=e*r;for(let o=0;o!==r;++o)t[o]=i[s+o];return t}interpolate_(){throw new Error("call to abstract method")}intervalChanged_(){}}class Uie extends ol{constructor(e,t,i,r){super(e,t,i,r),this._weightPrev=-0,this._offsetPrev=-0,this._weightNext=-0,this._offsetNext=-0,this.DefaultSettings_={endingStart:xa,endingEnd:xa}}intervalChanged_(e,t,i){const r=this.parameterPositions;let s=e-2,o=e+1,a=r[s],c=r[o];if(void 0===a)switch(this.getSettings_().endingStart){case ba:s=e,a=2*t-i;break;case 2402:s=r.length-2,a=t+r[s]-r[s+1];break;default:s=e,a=i}if(void 0===c)switch(this.getSettings_().endingEnd){case ba:o=e,c=2*i-t;break;case 2402:o=1,c=i+r[1]-r[0];break;default:o=e-1,c=t}const l=.5*(i-t),u=this.valueSize;this._weightPrev=l/(t-a),this._weightNext=l/(c-i),this._offsetPrev=s*u,this._offsetNext=o*u}interpolate_(e,t,i,r){const s=this.resultBuffer,o=this.sampleValues,a=this.valueSize,c=e*a,l=c-a,u=this._offsetPrev,f=this._offsetNext,d=this._weightPrev,h=this._weightNext,p=(i-t)/(r-t),g=p*p,m=g*p,v=-d*m+2*d*g-d*p,x=(1+d)*m+(-1.5-2*d)*g+(-.5+d)*p+1,y=(-1-h)*m+(1.5+h)*g+.5*p,_=h*m-h*g;for(let M=0;M!==a;++M)s[M]=v*o[u+M]+x*o[l+M]+y*o[c+M]+_*o[f+M];return s}}class zC extends ol{constructor(e,t,i,r){super(e,t,i,r)}interpolate_(e,t,i,r){const s=this.resultBuffer,o=this.sampleValues,a=this.valueSize,c=e*a,l=c-a,u=(i-t)/(r-t),f=1-u;for(let d=0;d!==a;++d)s[d]=o[l+d]*f+o[c+d]*u;return s}}class Bie extends ol{constructor(e,t,i,r){super(e,t,i,r)}interpolate_(e){return this.copySampleValue_(e-1)}}class Pr{constructor(e,t,i,r){if(void 0===e)throw new Error("THREE.KeyframeTrack: track name is undefined");if(void 0===t||0===t.length)throw new Error("THREE.KeyframeTrack: no keyframes in track named "+e);this.name=e,this.times=J1(t,this.TimeBufferType),this.values=J1(i,this.ValueBufferType),this.setInterpolation(r||this.DefaultInterpolation)}static toJSON(e){const t=e.constructor;let i;if(t.toJSON!==this.toJSON)i=t.toJSON(e);else{i={name:e.name,times:J1(e.times,Array),values:J1(e.values,Array)};const r=e.getInterpolation();r!==e.DefaultInterpolation&&(i.interpolation=r)}return i.type=e.ValueTypeName,i}InterpolantFactoryMethodDiscrete(e){return new Bie(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodLinear(e){return new zC(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodSmooth(e){return new Uie(this.times,this.values,this.getValueSize(),e)}setInterpolation(e){let t;switch(e){case Fc:t=this.InterpolantFactoryMethodDiscrete;break;case _a:t=this.InterpolantFactoryMethodLinear;break;case 2302:t=this.InterpolantFactoryMethodSmooth}if(void 0===t){const i="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name;if(void 0===this.createInterpolant){if(e===this.DefaultInterpolation)throw new Error(i);this.setInterpolation(this.DefaultInterpolation)}return console.warn("THREE.KeyframeTrack:",i),this}return this.createInterpolant=t,this}getInterpolation(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return Fc;case this.InterpolantFactoryMethodLinear:return _a;case this.InterpolantFactoryMethodSmooth:return 2302}}getValueSize(){return this.values.length/this.times.length}shift(e){if(0!==e){const t=this.times;for(let i=0,r=t.length;i!==r;++i)t[i]+=e}return this}scale(e){if(1!==e){const t=this.times;for(let i=0,r=t.length;i!==r;++i)t[i]*=e}return this}trim(e,t){const i=this.times,r=i.length;let s=0,o=r-1;for(;s!==r&&i[s]<e;)++s;for(;-1!==o&&i[o]>t;)--o;if(++o,0!==s||o!==r){s>=o&&(o=Math.max(o,1),s=o-1);const a=this.getValueSize();this.times=$i(i,s,o),this.values=$i(this.values,s*a,o*a)}return this}validate(){let e=!0;const t=this.getValueSize();t-Math.floor(t)!=0&&(console.error("THREE.KeyframeTrack: Invalid value size in track.",this),e=!1);const i=this.times,r=this.values,s=i.length;0===s&&(console.error("THREE.KeyframeTrack: Track is empty.",this),e=!1);let o=null;for(let a=0;a!==s;a++){const c=i[a];if("number"==typeof c&&isNaN(c)){console.error("THREE.KeyframeTrack: Time is not a valid number.",this,a,c),e=!1;break}if(null!==o&&o>c){console.error("THREE.KeyframeTrack: Out of order keys.",this,a,c,o),e=!1;break}o=c}if(void 0!==r&&v8(r))for(let a=0,c=r.length;a!==c;++a){const l=r[a];if(isNaN(l)){console.error("THREE.KeyframeTrack: Value is not a valid number.",this,a,l),e=!1;break}}return e}optimize(){const e=$i(this.times),t=$i(this.values),i=this.getValueSize(),r=2302===this.getInterpolation(),s=e.length-1;let o=1;for(let a=1;a<s;++a){let c=!1;const l=e[a];if(l!==e[a+1]&&(1!==a||l!==e[0]))if(r)c=!0;else{const f=a*i,d=f-i,h=f+i;for(let p=0;p!==i;++p){const g=t[f+p];if(g!==t[d+p]||g!==t[h+p]){c=!0;break}}}if(c){if(a!==o){e[o]=e[a];const f=a*i,d=o*i;for(let h=0;h!==i;++h)t[d+h]=t[f+h]}++o}}if(s>0){e[o]=e[s];for(let a=s*i,c=o*i,l=0;l!==i;++l)t[c+l]=t[a+l];++o}return o!==e.length?(this.times=$i(e,0,o),this.values=$i(t,0,o*i)):(this.times=e,this.values=t),this}clone(){const e=$i(this.times,0),t=$i(this.values,0),r=new(0,this.constructor)(this.name,e,t);return r.createInterpolant=this.createInterpolant,r}}Pr.prototype.TimeBufferType=Float32Array,Pr.prototype.ValueBufferType=Float32Array,Pr.prototype.DefaultInterpolation=_a;class Za extends Pr{}Za.prototype.ValueTypeName="bool",Za.prototype.ValueBufferType=Array,Za.prototype.DefaultInterpolation=Fc,Za.prototype.InterpolantFactoryMethodLinear=void 0,Za.prototype.InterpolantFactoryMethodSmooth=void 0;class PC extends Pr{}PC.prototype.ValueTypeName="color";class al extends Pr{}al.prototype.ValueTypeName="number";class Gie extends ol{constructor(e,t,i,r){super(e,t,i,r)}interpolate_(e,t,i,r){const s=this.resultBuffer,o=this.sampleValues,a=this.valueSize,c=(i-t)/(r-t);let l=e*a;for(let u=l+a;l!==u;l+=4)ti.slerpFlat(s,0,o,l-a,o,l,c);return s}}class Q1 extends Pr{InterpolantFactoryMethodLinear(e){return new Gie(this.times,this.values,this.getValueSize(),e)}}Q1.prototype.ValueTypeName="quaternion",Q1.prototype.DefaultInterpolation=_a,Q1.prototype.InterpolantFactoryMethodSmooth=void 0;class Ya extends Pr{}Ya.prototype.ValueTypeName="string",Ya.prototype.ValueBufferType=Array,Ya.prototype.DefaultInterpolation=Fc,Ya.prototype.InterpolantFactoryMethodLinear=void 0,Ya.prototype.InterpolantFactoryMethodSmooth=void 0;class cl extends Pr{}cl.prototype.ValueTypeName="vector";class ll{constructor(e,t=-1,i,r=2500){this.name=e,this.tracks=i,this.duration=t,this.blendMode=r,this.uuid=Ci(),this.duration<0&&this.resetDuration()}static parse(e){const t=[],i=e.tracks,r=1/(e.fps||1);for(let o=0,a=i.length;o!==a;++o)t.push($ie(i[o]).scale(r));const s=new this(e.name,e.duration,t,e.blendMode);return s.uuid=e.uuid,s}static toJSON(e){const t=[],i=e.tracks,r={name:e.name,duration:e.duration,tracks:t,uuid:e.uuid,blendMode:e.blendMode};for(let s=0,o=i.length;s!==o;++s)t.push(Pr.toJSON(i[s]));return r}static CreateFromMorphTargetSequence(e,t,i,r){const s=t.length,o=[];for(let a=0;a<s;a++){let c=[],l=[];c.push((a+s-1)%s,a,(a+1)%s),l.push(0,1,0);const u=RC(c);c=y8(c,1,u),l=y8(l,1,u),!r&&0===c[0]&&(c.push(s),l.push(l[0])),o.push(new al(".morphTargetInfluences["+t[a].name+"]",c,l).scale(1/i))}return new this(e,-1,o)}static findByName(e,t){let i=e;if(!Array.isArray(e)){const r=e;i=r.geometry&&r.geometry.animations||r.animations}for(let r=0;r<i.length;r++)if(i[r].name===t)return i[r];return null}static CreateClipsFromMorphTargetSequences(e,t,i){const r={},s=/^([\w-]*?)([\d]+)$/;for(let a=0,c=e.length;a<c;a++){const l=e[a],u=l.name.match(s);if(u&&u.length>1){const f=u[1];let d=r[f];d||(r[f]=d=[]),d.push(l)}}const o=[];for(const a in r)o.push(this.CreateFromMorphTargetSequence(a,r[a],t,i));return o}static parseAnimation(e,t){if(!e)return console.error("THREE.AnimationClip: No animation in JSONLoader data."),null;const i=function(f,d,h,p,g){if(0!==h.length){const m=[],v=[];_8(h,m,v,p),0!==m.length&&g.push(new f(d,m,v))}},r=[],s=e.name||"default",o=e.fps||30,a=e.blendMode;let c=e.length||-1;const l=e.hierarchy||[];for(let f=0;f<l.length;f++){const d=l[f].keys;if(d&&0!==d.length)if(d[0].morphTargets){const h={};let p;for(p=0;p<d.length;p++)if(d[p].morphTargets)for(let g=0;g<d[p].morphTargets.length;g++)h[d[p].morphTargets[g]]=-1;for(const g in h){const m=[],v=[];for(let x=0;x!==d[p].morphTargets.length;++x){const y=d[p];m.push(y.time),v.push(y.morphTarget===g?1:0)}r.push(new al(".morphTargetInfluence["+g+"]",m,v))}c=h.length*o}else{const h=".bones["+t[f].name+"]";i(cl,h+".position",d,"pos",r),i(Q1,h+".quaternion",d,"rot",r),i(cl,h+".scale",d,"scl",r)}}return 0===r.length?null:new this(s,c,r,a)}resetDuration(){let t=0;for(let i=0,r=this.tracks.length;i!==r;++i){const s=this.tracks[i];t=Math.max(t,s.times[s.times.length-1])}return this.duration=t,this}trim(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].trim(0,this.duration);return this}validate(){let e=!0;for(let t=0;t<this.tracks.length;t++)e=e&&this.tracks[t].validate();return e}optimize(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].optimize();return this}clone(){const e=[];for(let t=0;t<this.tracks.length;t++)e.push(this.tracks[t].clone());return new this.constructor(this.name,this.duration,e,this.blendMode)}toJSON(){return this.constructor.toJSON(this)}}function $ie(n){if(void 0===n.type)throw new Error("THREE.KeyframeTrack: track type undefined, can not parse");const e=function Wie(n){switch(n.toLowerCase()){case"scalar":case"double":case"float":case"number":case"integer":return al;case"vector":case"vector2":case"vector3":case"vector4":return cl;case"color":return PC;case"quaternion":return Q1;case"bool":case"boolean":return Za;case"string":return Ya}throw new Error("THREE.KeyframeTrack: Unsupported typeName: "+n)}(n.type);if(void 0===n.times){const t=[],i=[];_8(n.keys,t,i,"value"),n.times=t,n.values=i}return void 0!==e.parse?e.parse(n):new e(n.name,n.times,n.values,n.interpolation)}const Xa={enabled:!1,files:{},add:function(n,e){!1!==this.enabled&&(this.files[n]=e)},get:function(n){if(!1!==this.enabled)return this.files[n]},remove:function(n){delete this.files[n]},clear:function(){this.files={}}};class NC{constructor(e,t,i){const r=this;let c,s=!1,o=0,a=0;const l=[];this.onStart=void 0,this.onLoad=e,this.onProgress=t,this.onError=i,this.itemStart=function(u){a++,!1===s&&void 0!==r.onStart&&r.onStart(u,o,a),s=!0},this.itemEnd=function(u){o++,void 0!==r.onProgress&&r.onProgress(u,o,a),o===a&&(s=!1,void 0!==r.onLoad&&r.onLoad())},this.itemError=function(u){void 0!==r.onError&&r.onError(u)},this.resolveURL=function(u){return c?c(u):u},this.setURLModifier=function(u){return c=u,this},this.addHandler=function(u,f){return l.push(u,f),this},this.removeHandler=function(u){const f=l.indexOf(u);return-1!==f&&l.splice(f,2),this},this.getHandler=function(u){for(let f=0,d=l.length;f<d;f+=2){const h=l[f],p=l[f+1];if(h.global&&(h.lastIndex=0),h.test(u))return p}return null}}}const jie=new NC;class ul{constructor(e){this.manager=void 0!==e?e:jie,this.crossOrigin="anonymous",this.withCredentials=!1,this.path="",this.resourcePath="",this.requestHeader={}}load(){}loadAsync(e,t){const i=this;return new Promise(function(r,s){i.load(e,r,t,s)})}parse(){}setCrossOrigin(e){return this.crossOrigin=e,this}setWithCredentials(e){return this.withCredentials=e,this}setPath(e){return this.path=e,this}setResourcePath(e){return this.resourcePath=e,this}setRequestHeader(e){return this.requestHeader=e,this}}const ps={};class qie extends Error{constructor(e,t){super(e),this.response=t}}class Nr extends ul{constructor(e){super(e)}load(e,t,i,r){void 0===e&&(e=""),void 0!==this.path&&(e=this.path+e),e=this.manager.resolveURL(e);const s=Xa.get(e);if(void 0!==s)return this.manager.itemStart(e),setTimeout(()=>{t&&t(s),this.manager.itemEnd(e)},0),s;if(void 0!==ps[e])return void ps[e].push({onLoad:t,onProgress:i,onError:r});ps[e]=[],ps[e].push({onLoad:t,onProgress:i,onError:r});const o=new Request(e,{headers:new Headers(this.requestHeader),credentials:this.withCredentials?"include":"same-origin"}),a=this.mimeType,c=this.responseType;fetch(o).then(l=>{if(200===l.status||0===l.status){if(0===l.status&&console.warn("THREE.FileLoader: HTTP Status 0 received."),typeof ReadableStream>"u"||void 0===l.body||void 0===l.body.getReader)return l;const u=ps[e],f=l.body.getReader(),d=l.headers.get("Content-Length")||l.headers.get("X-File-Size"),h=d?parseInt(d):0,p=0!==h;let g=0;const m=new ReadableStream({start(v){!function x(){f.read().then(({done:y,value:_})=>{if(y)v.close();else{g+=_.byteLength;const M=new ProgressEvent("progress",{lengthComputable:p,loaded:g,total:h});for(let w=0,T=u.length;w<T;w++){const b=u[w];b.onProgress&&b.onProgress(M)}v.enqueue(_),x()}})}()}});return new Response(m)}throw new qie(`fetch for "${l.url}" responded with ${l.status}: ${l.statusText}`,l)}).then(l=>{switch(c){case"arraybuffer":return l.arrayBuffer();case"blob":return l.blob();case"document":return l.text().then(u=>(new DOMParser).parseFromString(u,a));case"json":return l.json();default:if(void 0===a)return l.text();{const f=/charset="?([^;"\s]*)"?/i.exec(a),d=f&&f[1]?f[1].toLowerCase():void 0,h=new TextDecoder(d);return l.arrayBuffer().then(p=>h.decode(p))}}}).then(l=>{Xa.add(e,l);const u=ps[e];delete ps[e];for(let f=0,d=u.length;f<d;f++){const h=u[f];h.onLoad&&h.onLoad(l)}}).catch(l=>{const u=ps[e];if(void 0===u)throw this.manager.itemError(e),l;delete ps[e];for(let f=0,d=u.length;f<d;f++){const h=u[f];h.onError&&h.onError(l)}this.manager.itemError(e)}).finally(()=>{this.manager.itemEnd(e)}),this.manager.itemStart(e)}setResponseType(e){return this.responseType=e,this}setMimeType(e){return this.mimeType=e,this}}class q4 extends ul{constructor(e){super(e)}load(e,t,i,r){void 0!==this.path&&(e=this.path+e),e=this.manager.resolveURL(e);const s=this,o=Xa.get(e);if(void 0!==o)return s.manager.itemStart(e),setTimeout(function(){t&&t(o),s.manager.itemEnd(e)},0),o;const a=Uc("img");function c(){u(),Xa.add(e,this),t&&t(this),s.manager.itemEnd(e)}function l(f){u(),r&&r(f),s.manager.itemError(e),s.manager.itemEnd(e)}function u(){a.removeEventListener("load",c,!1),a.removeEventListener("error",l,!1)}return a.addEventListener("load",c,!1),a.addEventListener("error",l,!1),"data:"!==e.slice(0,5)&&void 0!==this.crossOrigin&&(a.crossOrigin=this.crossOrigin),s.manager.itemStart(e),a.src=e,a}}class Zie extends ul{constructor(e){super(e)}load(e,t,i,r){const s=new ur,o=new q4(this.manager);return o.setCrossOrigin(this.crossOrigin),o.setPath(this.path),o.load(e,function(a){s.image=a,s.needsUpdate=!0,void 0!==t&&t(s)},i,r),s}}class Z4 extends Sn{constructor(e,t=1){super(),this.isLight=!0,this.type="Light",this.color=new pe(e),this.intensity=t}dispose(){}copy(e,t){return super.copy(e,t),this.color.copy(e.color),this.intensity=e.intensity,this}toJSON(e){const t=super.toJSON(e);return t.object.color=this.color.getHex(),t.object.intensity=this.intensity,void 0!==this.groundColor&&(t.object.groundColor=this.groundColor.getHex()),void 0!==this.distance&&(t.object.distance=this.distance),void 0!==this.angle&&(t.object.angle=this.angle),void 0!==this.decay&&(t.object.decay=this.decay),void 0!==this.penumbra&&(t.object.penumbra=this.penumbra),void 0!==this.shadow&&(t.object.shadow=this.shadow.toJSON()),t}}const x8=new Xe,OC=new S,FC=new S;class b8{constructor(e){this.camera=e,this.bias=0,this.normalBias=0,this.radius=1,this.blurSamples=8,this.mapSize=new K(512,512),this.map=null,this.mapPass=null,this.matrix=new Xe,this.autoUpdate=!0,this.needsUpdate=!1,this._frustum=new P6,this._frameExtents=new K(1,1),this._viewportCount=1,this._viewports=[new xt(0,0,1,1)]}getViewportCount(){return this._viewportCount}getFrustum(){return this._frustum}updateMatrices(e){const t=this.camera,i=this.matrix;OC.setFromMatrixPosition(e.matrixWorld),t.position.copy(OC),FC.setFromMatrixPosition(e.target.matrixWorld),t.lookAt(FC),t.updateMatrixWorld(),x8.multiplyMatrices(t.projectionMatrix,t.matrixWorldInverse),this._frustum.setFromProjectionMatrix(x8),i.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),i.multiply(x8)}getViewport(e){return this._viewports[e]}getFrameExtents(){return this._frameExtents}dispose(){this.map&&this.map.dispose(),this.mapPass&&this.mapPass.dispose()}copy(e){return this.camera=e.camera.clone(),this.bias=e.bias,this.radius=e.radius,this.mapSize.copy(e.mapSize),this}clone(){return(new this.constructor).copy(this)}toJSON(){const e={};return 0!==this.bias&&(e.bias=this.bias),0!==this.normalBias&&(e.normalBias=this.normalBias),1!==this.radius&&(e.radius=this.radius),(512!==this.mapSize.x||512!==this.mapSize.y)&&(e.mapSize=this.mapSize.toArray()),e.camera=this.camera.toJSON(!1).object,delete e.camera.matrix,e}}class Xie extends b8{constructor(){super(new An(50,1,.5,500)),this.isSpotLightShadow=!0,this.focus=1}updateMatrices(e){const t=this.camera,i=2*Vc*e.angle*this.focus,r=this.mapSize.width/this.mapSize.height,s=e.distance||t.far;(i!==t.fov||r!==t.aspect||s!==t.far)&&(t.fov=i,t.aspect=r,t.far=s,t.updateProjectionMatrix()),super.updateMatrices(e)}copy(e){return super.copy(e),this.focus=e.focus,this}}class kC extends Z4{constructor(e,t,i=0,r=Math.PI/3,s=0,o=2){super(e,t),this.isSpotLight=!0,this.type="SpotLight",this.position.copy(Sn.DefaultUp),this.updateMatrix(),this.target=new Sn,this.distance=i,this.angle=r,this.penumbra=s,this.decay=o,this.map=null,this.shadow=new Xie}get power(){return this.intensity*Math.PI}set power(e){this.intensity=e/Math.PI}dispose(){this.shadow.dispose()}copy(e,t){return super.copy(e,t),this.distance=e.distance,this.angle=e.angle,this.penumbra=e.penumbra,this.decay=e.decay,this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}const VC=new Xe,fl=new S,M8=new S;class Kie extends b8{constructor(){super(new An(90,1,.5,500)),this.isPointLightShadow=!0,this._frameExtents=new K(4,2),this._viewportCount=6,this._viewports=[new xt(2,1,1,1),new xt(0,1,1,1),new xt(3,1,1,1),new xt(1,1,1,1),new xt(3,0,1,1),new xt(1,0,1,1)],this._cubeDirections=[new S(1,0,0),new S(-1,0,0),new S(0,0,1),new S(0,0,-1),new S(0,1,0),new S(0,-1,0)],this._cubeUps=[new S(0,1,0),new S(0,1,0),new S(0,1,0),new S(0,1,0),new S(0,0,1),new S(0,0,-1)]}updateMatrices(e,t=0){const i=this.camera,r=this.matrix,s=e.distance||i.far;s!==i.far&&(i.far=s,i.updateProjectionMatrix()),fl.setFromMatrixPosition(e.matrixWorld),i.position.copy(fl),M8.copy(i.position),M8.add(this._cubeDirections[t]),i.up.copy(this._cubeUps[t]),i.lookAt(M8),i.updateMatrixWorld(),r.makeTranslation(-fl.x,-fl.y,-fl.z),VC.multiplyMatrices(i.projectionMatrix,i.matrixWorldInverse),this._frustum.setFromProjectionMatrix(VC)}}class HC extends Z4{constructor(e,t,i=0,r=2){super(e,t),this.isPointLight=!0,this.type="PointLight",this.distance=i,this.decay=r,this.shadow=new Kie}get power(){return 4*this.intensity*Math.PI}set power(e){this.intensity=e/(4*Math.PI)}dispose(){this.shadow.dispose()}copy(e,t){return super.copy(e,t),this.distance=e.distance,this.decay=e.decay,this.shadow=e.shadow.clone(),this}}class Jie extends b8{constructor(){super(new x4(-5,5,5,-5,.5,500)),this.isDirectionalLightShadow=!0}}class w8 extends Z4{constructor(e,t){super(e,t),this.isDirectionalLight=!0,this.type="DirectionalLight",this.position.copy(Sn.DefaultUp),this.updateMatrix(),this.target=new Sn,this.shadow=new Jie}dispose(){this.shadow.dispose()}copy(e){return super.copy(e),this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}class UC extends Z4{constructor(e,t){super(e,t),this.isAmbientLight=!0,this.type="AmbientLight"}}class ms{static decodeText(e){if(typeof TextDecoder<"u")return(new TextDecoder).decode(e);let t="";for(let i=0,r=e.length;i<r;i++)t+=String.fromCharCode(e[i]);try{return decodeURIComponent(escape(t))}catch{return t}}static extractUrlBase(e){const t=e.lastIndexOf("/");return-1===t?"./":e.slice(0,t+1)}static resolveURL(e,t){return"string"!=typeof e||""===e?"":(/^https?:\/\//i.test(t)&&/^\//.test(e)&&(t=t.replace(/(^https?:\/\/[^\/]+).*/i,"$1")),/^(https?:)?\/\//i.test(e)||/^data:.*,.*$/i.test(e)||/^blob:.*$/i.test(e)?e:t+e)}}class sre extends ul{constructor(e){super(e),this.isImageBitmapLoader=!0,typeof createImageBitmap>"u"&&console.warn("THREE.ImageBitmapLoader: createImageBitmap() not supported."),typeof fetch>"u"&&console.warn("THREE.ImageBitmapLoader: fetch() not supported."),this.options={premultiplyAlpha:"none"}}setOptions(e){return this.options=e,this}load(e,t,i,r){void 0===e&&(e=""),void 0!==this.path&&(e=this.path+e),e=this.manager.resolveURL(e);const s=this,o=Xa.get(e);if(void 0!==o)return s.manager.itemStart(e),setTimeout(function(){t&&t(o),s.manager.itemEnd(e)},0),o;const a={};a.credentials="anonymous"===this.crossOrigin?"same-origin":"include",a.headers=this.requestHeader,fetch(e,a).then(function(c){return c.blob()}).then(function(c){return createImageBitmap(c,Object.assign(s.options,{colorSpaceConversion:"none"}))}).then(function(c){Xa.add(e,c),t&&t(c),s.manager.itemEnd(e)}).catch(function(c){r&&r(c),s.manager.itemError(e),s.manager.itemEnd(e)}),s.manager.itemStart(e)}}class qC{constructor(e=!0){this.autoStart=e,this.startTime=0,this.oldTime=0,this.elapsedTime=0,this.running=!1}start(){this.startTime=ZC(),this.oldTime=this.startTime,this.elapsedTime=0,this.running=!0}stop(){this.getElapsedTime(),this.running=!1,this.autoStart=!1}getElapsedTime(){return this.getDelta(),this.elapsedTime}getDelta(){let e=0;if(this.autoStart&&!this.running)return this.start(),0;if(this.running){const t=ZC();e=(t-this.oldTime)/1e3,this.oldTime=t,this.elapsedTime+=e}return e}}function ZC(){return(typeof performance>"u"?Date:performance).now()}class cre{constructor(e,t,i){let r,s,o;switch(this.binding=e,this.valueSize=i,t){case"quaternion":r=this._slerp,s=this._slerpAdditive,o=this._setAdditiveIdentityQuaternion,this.buffer=new Float64Array(6*i),this._workIndex=5;break;case"string":case"bool":r=this._select,s=this._select,o=this._setAdditiveIdentityOther,this.buffer=new Array(5*i);break;default:r=this._lerp,s=this._lerpAdditive,o=this._setAdditiveIdentityNumeric,this.buffer=new Float64Array(5*i)}this._mixBufferRegion=r,this._mixBufferRegionAdditive=s,this._setIdentity=o,this._origIndex=3,this._addIndex=4,this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,this.useCount=0,this.referenceCount=0}accumulate(e,t){const i=this.buffer,r=this.valueSize,s=e*r+r;let o=this.cumulativeWeight;if(0===o){for(let a=0;a!==r;++a)i[s+a]=i[a];o=t}else o+=t,this._mixBufferRegion(i,s,0,t/o,r);this.cumulativeWeight=o}accumulateAdditive(e){const t=this.buffer,i=this.valueSize,r=i*this._addIndex;0===this.cumulativeWeightAdditive&&this._setIdentity(),this._mixBufferRegionAdditive(t,r,0,e,i),this.cumulativeWeightAdditive+=e}apply(e){const t=this.valueSize,i=this.buffer,r=e*t+t,s=this.cumulativeWeight,o=this.cumulativeWeightAdditive,a=this.binding;this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,s<1&&this._mixBufferRegion(i,r,t*this._origIndex,1-s,t),o>0&&this._mixBufferRegionAdditive(i,r,this._addIndex*t,1,t);for(let c=t,l=t+t;c!==l;++c)if(i[c]!==i[c+t]){a.setValue(i,r);break}}saveOriginalState(){const t=this.buffer,i=this.valueSize,r=i*this._origIndex;this.binding.getValue(t,r);for(let s=i,o=r;s!==o;++s)t[s]=t[r+s%i];this._setIdentity(),this.cumulativeWeight=0,this.cumulativeWeightAdditive=0}restoreOriginalState(){this.binding.setValue(this.buffer,3*this.valueSize)}_setAdditiveIdentityNumeric(){const e=this._addIndex*this.valueSize,t=e+this.valueSize;for(let i=e;i<t;i++)this.buffer[i]=0}_setAdditiveIdentityQuaternion(){this._setAdditiveIdentityNumeric(),this.buffer[this._addIndex*this.valueSize+3]=1}_setAdditiveIdentityOther(){const e=this._origIndex*this.valueSize,t=this._addIndex*this.valueSize;for(let i=0;i<this.valueSize;i++)this.buffer[t+i]=this.buffer[e+i]}_select(e,t,i,r,s){if(r>=.5)for(let o=0;o!==s;++o)e[t+o]=e[i+o]}_slerp(e,t,i,r){ti.slerpFlat(e,t,e,t,e,i,r)}_slerpAdditive(e,t,i,r,s){const o=this._workIndex*s;ti.multiplyQuaternionsFlat(e,o,e,t,e,i),ti.slerpFlat(e,t,e,t,e,o,r)}_lerp(e,t,i,r,s){const o=1-r;for(let a=0;a!==s;++a){const c=t+a;e[c]=e[c]*o+e[i+a]*r}}_lerpAdditive(e,t,i,r,s){for(let o=0;o!==s;++o){const a=t+o;e[a]=e[a]+e[i+o]*r}}}const S8="\\[\\]\\.:\\/",lre=new RegExp("["+S8+"]","g"),E8="[^"+S8+"]",ure="[^"+S8.replace("\\.","")+"]",mre=new RegExp("^"+/((?:WC+[\/:])*)/.source.replace("WC",E8)+/(WCOD+)?/.source.replace("WCOD",ure)+/(?:\.(WC+)(?:\[(.+)\])?)?/.source.replace("WC",E8)+/\.(WC+)(?:\[(.+)\])?/.source.replace("WC",E8)+"$"),gre=["material","materials","bones","map"];class vre{constructor(e,t,i){const r=i||Nt.parseTrackName(t);this._targetGroup=e,this._bindings=e.subscribe_(t,r)}getValue(e,t){this.bind();const r=this._bindings[this._targetGroup.nCachedObjects_];void 0!==r&&r.getValue(e,t)}setValue(e,t){const i=this._bindings;for(let r=this._targetGroup.nCachedObjects_,s=i.length;r!==s;++r)i[r].setValue(e,t)}bind(){const e=this._bindings;for(let t=this._targetGroup.nCachedObjects_,i=e.length;t!==i;++t)e[t].bind()}unbind(){const e=this._bindings;for(let t=this._targetGroup.nCachedObjects_,i=e.length;t!==i;++t)e[t].unbind()}}let Nt=(()=>{class n{constructor(t,i,r){this.path=i,this.parsedPath=r||n.parseTrackName(i),this.node=n.findNode(t,this.parsedPath.nodeName)||t,this.rootNode=t,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}static create(t,i,r){return t&&t.isAnimationObjectGroup?new n.Composite(t,i,r):new n(t,i,r)}static sanitizeNodeName(t){return t.replace(/\s/g,"_").replace(lre,"")}static parseTrackName(t){const i=mre.exec(t);if(null===i)throw new Error("PropertyBinding: Cannot parse trackName: "+t);const r={nodeName:i[2],objectName:i[3],objectIndex:i[4],propertyName:i[5],propertyIndex:i[6]},s=r.nodeName&&r.nodeName.lastIndexOf(".");if(void 0!==s&&-1!==s){const o=r.nodeName.substring(s+1);-1!==gre.indexOf(o)&&(r.nodeName=r.nodeName.substring(0,s),r.objectName=o)}if(null===r.propertyName||0===r.propertyName.length)throw new Error("PropertyBinding: can not parse propertyName from trackName: "+t);return r}static findNode(t,i){if(void 0===i||""===i||"."===i||-1===i||i===t.name||i===t.uuid)return t;if(t.skeleton){const r=t.skeleton.getBoneByName(i);if(void 0!==r)return r}if(t.children){const r=function(o){for(let a=0;a<o.length;a++){const c=o[a];if(c.name===i||c.uuid===i)return c;const l=r(c.children);if(l)return l}return null},s=r(t.children);if(s)return s}return null}_getValue_unavailable(){}_setValue_unavailable(){}_getValue_direct(t,i){t[i]=this.targetObject[this.propertyName]}_getValue_array(t,i){const r=this.resolvedProperty;for(let s=0,o=r.length;s!==o;++s)t[i++]=r[s]}_getValue_arrayElement(t,i){t[i]=this.resolvedProperty[this.propertyIndex]}_getValue_toArray(t,i){this.resolvedProperty.toArray(t,i)}_setValue_direct(t,i){this.targetObject[this.propertyName]=t[i]}_setValue_direct_setNeedsUpdate(t,i){this.targetObject[this.propertyName]=t[i],this.targetObject.needsUpdate=!0}_setValue_direct_setMatrixWorldNeedsUpdate(t,i){this.targetObject[this.propertyName]=t[i],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_array(t,i){const r=this.resolvedProperty;for(let s=0,o=r.length;s!==o;++s)r[s]=t[i++]}_setValue_array_setNeedsUpdate(t,i){const r=this.resolvedProperty;for(let s=0,o=r.length;s!==o;++s)r[s]=t[i++];this.targetObject.needsUpdate=!0}_setValue_array_setMatrixWorldNeedsUpdate(t,i){const r=this.resolvedProperty;for(let s=0,o=r.length;s!==o;++s)r[s]=t[i++];this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_arrayElement(t,i){this.resolvedProperty[this.propertyIndex]=t[i]}_setValue_arrayElement_setNeedsUpdate(t,i){this.resolvedProperty[this.propertyIndex]=t[i],this.targetObject.needsUpdate=!0}_setValue_arrayElement_setMatrixWorldNeedsUpdate(t,i){this.resolvedProperty[this.propertyIndex]=t[i],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_fromArray(t,i){this.resolvedProperty.fromArray(t,i)}_setValue_fromArray_setNeedsUpdate(t,i){this.resolvedProperty.fromArray(t,i),this.targetObject.needsUpdate=!0}_setValue_fromArray_setMatrixWorldNeedsUpdate(t,i){this.resolvedProperty.fromArray(t,i),this.targetObject.matrixWorldNeedsUpdate=!0}_getValue_unbound(t,i){this.bind(),this.getValue(t,i)}_setValue_unbound(t,i){this.bind(),this.setValue(t,i)}bind(){let t=this.node;const i=this.parsedPath,r=i.objectName,s=i.propertyName;let o=i.propertyIndex;if(t||(t=n.findNode(this.rootNode,i.nodeName)||this.rootNode,this.node=t),this.getValue=this._getValue_unavailable,this.setValue=this._setValue_unavailable,!t)return void console.error("THREE.PropertyBinding: Trying to update node for track: "+this.path+" but it wasn't found.");if(r){let u=i.objectIndex;switch(r){case"materials":if(!t.material)return void console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);if(!t.material.materials)return void console.error("THREE.PropertyBinding: Can not bind to material.materials as node.material does not have a materials array.",this);t=t.material.materials;break;case"bones":if(!t.skeleton)return void console.error("THREE.PropertyBinding: Can not bind to bones as node does not have a skeleton.",this);t=t.skeleton.bones;for(let f=0;f<t.length;f++)if(t[f].name===u){u=f;break}break;case"map":if("map"in t){t=t.map;break}if(!t.material)return void console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);if(!t.material.map)return void console.error("THREE.PropertyBinding: Can not bind to material.map as node.material does not have a map.",this);t=t.material.map;break;default:if(void 0===t[r])return void console.error("THREE.PropertyBinding: Can not bind to objectName of node undefined.",this);t=t[r]}if(void 0!==u){if(void 0===t[u])return void console.error("THREE.PropertyBinding: Trying to bind to objectIndex of objectName, but is undefined.",this,t);t=t[u]}}const a=t[s];if(void 0===a)return void console.error("THREE.PropertyBinding: Trying to update property for track: "+i.nodeName+"."+s+" but it wasn't found.",t);let c=this.Versioning.None;this.targetObject=t,void 0!==t.needsUpdate?c=this.Versioning.NeedsUpdate:void 0!==t.matrixWorldNeedsUpdate&&(c=this.Versioning.MatrixWorldNeedsUpdate);let l=this.BindingType.Direct;if(void 0!==o){if("morphTargetInfluences"===s){if(!t.geometry)return void console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.",this);if(!t.geometry.morphAttributes)return void console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphAttributes.",this);void 0!==t.morphTargetDictionary[o]&&(o=t.morphTargetDictionary[o])}l=this.BindingType.ArrayElement,this.resolvedProperty=a,this.propertyIndex=o}else void 0!==a.fromArray&&void 0!==a.toArray?(l=this.BindingType.HasFromToArray,this.resolvedProperty=a):Array.isArray(a)?(l=this.BindingType.EntireArray,this.resolvedProperty=a):this.propertyName=s;this.getValue=this.GetterByBindingType[l],this.setValue=this.SetterByBindingTypeAndVersioning[l][c]}unbind(){this.node=null,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}}return n.Composite=vre,n})();Nt.prototype.BindingType={Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3},Nt.prototype.Versioning={None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2},Nt.prototype.GetterByBindingType=[Nt.prototype._getValue_direct,Nt.prototype._getValue_array,Nt.prototype._getValue_arrayElement,Nt.prototype._getValue_toArray],Nt.prototype.SetterByBindingTypeAndVersioning=[[Nt.prototype._setValue_direct,Nt.prototype._setValue_direct_setNeedsUpdate,Nt.prototype._setValue_direct_setMatrixWorldNeedsUpdate],[Nt.prototype._setValue_array,Nt.prototype._setValue_array_setNeedsUpdate,Nt.prototype._setValue_array_setMatrixWorldNeedsUpdate],[Nt.prototype._setValue_arrayElement,Nt.prototype._setValue_arrayElement_setNeedsUpdate,Nt.prototype._setValue_arrayElement_setMatrixWorldNeedsUpdate],[Nt.prototype._setValue_fromArray,Nt.prototype._setValue_fromArray_setNeedsUpdate,Nt.prototype._setValue_fromArray_setMatrixWorldNeedsUpdate]];class yre{constructor(e,t,i=null,r=t.blendMode){this._mixer=e,this._clip=t,this._localRoot=i,this.blendMode=r;const s=t.tracks,o=s.length,a=new Array(o),c={endingStart:xa,endingEnd:xa};for(let l=0;l!==o;++l){const u=s[l].createInterpolant(null);a[l]=u,u.settings=c}this._interpolantSettings=c,this._interpolants=a,this._propertyBindings=new Array(o),this._cacheIndex=null,this._byClipCacheIndex=null,this._timeScaleInterpolant=null,this._weightInterpolant=null,this.loop=2201,this._loopCount=-1,this._startTime=null,this.time=0,this.timeScale=1,this._effectiveTimeScale=1,this.weight=1,this._effectiveWeight=1,this.repetitions=1/0,this.paused=!1,this.enabled=!0,this.clampWhenFinished=!1,this.zeroSlopeAtStart=!0,this.zeroSlopeAtEnd=!0}play(){return this._mixer._activateAction(this),this}stop(){return this._mixer._deactivateAction(this),this.reset()}reset(){return this.paused=!1,this.enabled=!0,this.time=0,this._loopCount=-1,this._startTime=null,this.stopFading().stopWarping()}isRunning(){return this.enabled&&!this.paused&&0!==this.timeScale&&null===this._startTime&&this._mixer._isActiveAction(this)}isScheduled(){return this._mixer._isActiveAction(this)}startAt(e){return this._startTime=e,this}setLoop(e,t){return this.loop=e,this.repetitions=t,this}setEffectiveWeight(e){return this.weight=e,this._effectiveWeight=this.enabled?e:0,this.stopFading()}getEffectiveWeight(){return this._effectiveWeight}fadeIn(e){return this._scheduleFading(e,0,1)}fadeOut(e){return this._scheduleFading(e,1,0)}crossFadeFrom(e,t,i){if(e.fadeOut(t),this.fadeIn(t),i){const r=this._clip.duration,s=e._clip.duration,a=r/s;e.warp(1,s/r,t),this.warp(a,1,t)}return this}crossFadeTo(e,t,i){return e.crossFadeFrom(this,t,i)}stopFading(){const e=this._weightInterpolant;return null!==e&&(this._weightInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this}setEffectiveTimeScale(e){return this.timeScale=e,this._effectiveTimeScale=this.paused?0:e,this.stopWarping()}getEffectiveTimeScale(){return this._effectiveTimeScale}setDuration(e){return this.timeScale=this._clip.duration/e,this.stopWarping()}syncWith(e){return this.time=e.time,this.timeScale=e.timeScale,this.stopWarping()}halt(e){return this.warp(this._effectiveTimeScale,0,e)}warp(e,t,i){const r=this._mixer,s=r.time,o=this.timeScale;let a=this._timeScaleInterpolant;null===a&&(a=r._lendControlInterpolant(),this._timeScaleInterpolant=a);const c=a.parameterPositions,l=a.sampleValues;return c[0]=s,c[1]=s+i,l[0]=e/o,l[1]=t/o,this}stopWarping(){const e=this._timeScaleInterpolant;return null!==e&&(this._timeScaleInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this}getMixer(){return this._mixer}getClip(){return this._clip}getRoot(){return this._localRoot||this._mixer._root}_update(e,t,i,r){if(!this.enabled)return void this._updateWeight(e);const s=this._startTime;if(null!==s){const c=(e-s)*i;c<0||0===i?t=0:(this._startTime=null,t=i*c)}t*=this._updateTimeScale(e);const o=this._updateTime(t),a=this._updateWeight(e);if(a>0){const c=this._interpolants,l=this._propertyBindings;if(2501===this.blendMode)for(let u=0,f=c.length;u!==f;++u)c[u].evaluate(o),l[u].accumulateAdditive(a);else for(let u=0,f=c.length;u!==f;++u)c[u].evaluate(o),l[u].accumulate(r,a)}}_updateWeight(e){let t=0;if(this.enabled){t=this.weight;const i=this._weightInterpolant;if(null!==i){const r=i.evaluate(e)[0];t*=r,e>i.parameterPositions[1]&&(this.stopFading(),0===r&&(this.enabled=!1))}}return this._effectiveWeight=t,t}_updateTimeScale(e){let t=0;if(!this.paused){t=this.timeScale;const i=this._timeScaleInterpolant;null!==i&&(t*=i.evaluate(e)[0],e>i.parameterPositions[1]&&(this.stopWarping(),0===t?this.paused=!0:this.timeScale=t))}return this._effectiveTimeScale=t,t}_updateTime(e){const t=this._clip.duration,i=this.loop;let r=this.time+e,s=this._loopCount;const o=2202===i;if(0===e)return-1===s?r:o&&1==(1&s)?t-r:r;if(2200===i){-1===s&&(this._loopCount=0,this._setEndings(!0,!0,!1));e:{if(r>=t)r=t;else{if(!(r<0)){this.time=r;break e}r=0}this.clampWhenFinished?this.paused=!0:this.enabled=!1,this.time=r,this._mixer.dispatchEvent({type:"finished",action:this,direction:e<0?-1:1})}}else{if(-1===s&&(e>=0?(s=0,this._setEndings(!0,0===this.repetitions,o)):this._setEndings(0===this.repetitions,!0,o)),r>=t||r<0){const a=Math.floor(r/t);r-=t*a,s+=Math.abs(a);const c=this.repetitions-s;if(c<=0)this.clampWhenFinished?this.paused=!0:this.enabled=!1,r=e>0?t:0,this.time=r,this._mixer.dispatchEvent({type:"finished",action:this,direction:e>0?1:-1});else{if(1===c){const l=e<0;this._setEndings(l,!l,o)}else this._setEndings(!1,!1,o);this._loopCount=s,this.time=r,this._mixer.dispatchEvent({type:"loop",action:this,loopDelta:a})}}else this.time=r;if(o&&1==(1&s))return t-r}return r}_setEndings(e,t,i){const r=this._interpolantSettings;i?(r.endingStart=ba,r.endingEnd=ba):(r.endingStart=e?this.zeroSlopeAtStart?ba:xa:2402,r.endingEnd=t?this.zeroSlopeAtEnd?ba:xa:2402)}_scheduleFading(e,t,i){const r=this._mixer,s=r.time;let o=this._weightInterpolant;null===o&&(o=r._lendControlInterpolant(),this._weightInterpolant=o);const a=o.parameterPositions,c=o.sampleValues;return a[0]=s,c[0]=t,a[1]=s+e,c[1]=i,this}}const _re=new Float32Array(1);class xre extends O1{constructor(e){super(),this._root=e,this._initMemoryManager(),this._accuIndex=0,this.time=0,this.timeScale=1}_bindAction(e,t){const i=e._localRoot||this._root,r=e._clip.tracks,s=r.length,o=e._propertyBindings,a=e._interpolants,c=i.uuid,l=this._bindingsByRootAndName;let u=l[c];void 0===u&&(u={},l[c]=u);for(let f=0;f!==s;++f){const d=r[f],h=d.name;let p=u[h];if(void 0!==p)++p.referenceCount,o[f]=p;else{if(p=o[f],void 0!==p){null===p._cacheIndex&&(++p.referenceCount,this._addInactiveBinding(p,c,h));continue}p=new cre(Nt.create(i,h,t&&t._propertyBindings[f].binding.parsedPath),d.ValueTypeName,d.getValueSize()),++p.referenceCount,this._addInactiveBinding(p,c,h),o[f]=p}a[f].resultBuffer=p.buffer}}_activateAction(e){if(!this._isActiveAction(e)){if(null===e._cacheIndex){const i=(e._localRoot||this._root).uuid,r=e._clip.uuid,s=this._actionsByClip[r];this._bindAction(e,s&&s.knownActions[0]),this._addInactiveAction(e,r,i)}const t=e._propertyBindings;for(let i=0,r=t.length;i!==r;++i){const s=t[i];0==s.useCount++&&(this._lendBinding(s),s.saveOriginalState())}this._lendAction(e)}}_deactivateAction(e){if(this._isActiveAction(e)){const t=e._propertyBindings;for(let i=0,r=t.length;i!==r;++i){const s=t[i];0==--s.useCount&&(s.restoreOriginalState(),this._takeBackBinding(s))}this._takeBackAction(e)}}_initMemoryManager(){this._actions=[],this._nActiveActions=0,this._actionsByClip={},this._bindings=[],this._nActiveBindings=0,this._bindingsByRootAndName={},this._controlInterpolants=[],this._nActiveControlInterpolants=0;const e=this;this.stats={actions:{get total(){return e._actions.length},get inUse(){return e._nActiveActions}},bindings:{get total(){return e._bindings.length},get inUse(){return e._nActiveBindings}},controlInterpolants:{get total(){return e._controlInterpolants.length},get inUse(){return e._nActiveControlInterpolants}}}}_isActiveAction(e){const t=e._cacheIndex;return null!==t&&t<this._nActiveActions}_addInactiveAction(e,t,i){const r=this._actions,s=this._actionsByClip;let o=s[t];if(void 0===o)o={knownActions:[e],actionByRoot:{}},e._byClipCacheIndex=0,s[t]=o;else{const a=o.knownActions;e._byClipCacheIndex=a.length,a.push(e)}e._cacheIndex=r.length,r.push(e),o.actionByRoot[i]=e}_removeInactiveAction(e){const t=this._actions,i=t[t.length-1],r=e._cacheIndex;i._cacheIndex=r,t[r]=i,t.pop(),e._cacheIndex=null;const s=e._clip.uuid,o=this._actionsByClip,a=o[s],c=a.knownActions,l=c[c.length-1],u=e._byClipCacheIndex;l._byClipCacheIndex=u,c[u]=l,c.pop(),e._byClipCacheIndex=null,delete a.actionByRoot[(e._localRoot||this._root).uuid],0===c.length&&delete o[s],this._removeInactiveBindingsForAction(e)}_removeInactiveBindingsForAction(e){const t=e._propertyBindings;for(let i=0,r=t.length;i!==r;++i){const s=t[i];0==--s.referenceCount&&this._removeInactiveBinding(s)}}_lendAction(e){const t=this._actions,i=e._cacheIndex,r=this._nActiveActions++,s=t[r];e._cacheIndex=r,t[r]=e,s._cacheIndex=i,t[i]=s}_takeBackAction(e){const t=this._actions,i=e._cacheIndex,r=--this._nActiveActions,s=t[r];e._cacheIndex=r,t[r]=e,s._cacheIndex=i,t[i]=s}_addInactiveBinding(e,t,i){const r=this._bindingsByRootAndName,s=this._bindings;let o=r[t];void 0===o&&(o={},r[t]=o),o[i]=e,e._cacheIndex=s.length,s.push(e)}_removeInactiveBinding(e){const t=this._bindings,i=e.binding,r=i.rootNode.uuid,s=i.path,o=this._bindingsByRootAndName,a=o[r],c=t[t.length-1],l=e._cacheIndex;c._cacheIndex=l,t[l]=c,t.pop(),delete a[s],0===Object.keys(a).length&&delete o[r]}_lendBinding(e){const t=this._bindings,i=e._cacheIndex,r=this._nActiveBindings++,s=t[r];e._cacheIndex=r,t[r]=e,s._cacheIndex=i,t[i]=s}_takeBackBinding(e){const t=this._bindings,i=e._cacheIndex,r=--this._nActiveBindings,s=t[r];e._cacheIndex=r,t[r]=e,s._cacheIndex=i,t[i]=s}_lendControlInterpolant(){const e=this._controlInterpolants,t=this._nActiveControlInterpolants++;let i=e[t];return void 0===i&&(i=new zC(new Float32Array(2),new Float32Array(2),1,_re),i.__cacheIndex=t,e[t]=i),i}_takeBackControlInterpolant(e){const t=this._controlInterpolants,i=e.__cacheIndex,r=--this._nActiveControlInterpolants,s=t[r];e.__cacheIndex=r,t[r]=e,s.__cacheIndex=i,t[i]=s}clipAction(e,t,i){const r=t||this._root,s=r.uuid;let o="string"==typeof e?ll.findByName(r,e):e;const a=null!==o?o.uuid:e,c=this._actionsByClip[a];let l=null;if(void 0===i&&(i=null!==o?o.blendMode:2500),void 0!==c){const f=c.actionByRoot[s];if(void 0!==f&&f.blendMode===i)return f;l=c.knownActions[0],null===o&&(o=l._clip)}if(null===o)return null;const u=new yre(this,o,t,i);return this._bindAction(u,l),this._addInactiveAction(u,a,s),u}existingAction(e,t){const i=t||this._root,r=i.uuid,s="string"==typeof e?ll.findByName(i,e):e,a=this._actionsByClip[s?s.uuid:e];return void 0!==a&&a.actionByRoot[r]||null}stopAllAction(){const e=this._actions;for(let i=this._nActiveActions-1;i>=0;--i)e[i].stop();return this}update(e){const t=this._actions,i=this._nActiveActions,r=this.time+=e*=this.timeScale,s=Math.sign(e),o=this._accuIndex^=1;for(let l=0;l!==i;++l)t[l]._update(r,e,s,o);const a=this._bindings,c=this._nActiveBindings;for(let l=0;l!==c;++l)a[l].apply(o);return this}setTime(e){this.time=0;for(let t=0;t<this._actions.length;t++)this._actions[t].time=0;return this.update(e)}getRoot(){return this._root}uncacheClip(e){const t=this._actions,i=e.uuid,r=this._actionsByClip,s=r[i];if(void 0!==s){const o=s.knownActions;for(let a=0,c=o.length;a!==c;++a){const l=o[a];this._deactivateAction(l);const u=l._cacheIndex,f=t[t.length-1];l._cacheIndex=null,l._byClipCacheIndex=null,f._cacheIndex=u,t[u]=f,t.pop(),this._removeInactiveBindingsForAction(l)}delete r[i]}}uncacheRoot(e){const t=e.uuid,i=this._actionsByClip;for(const o in i){const c=i[o].actionByRoot[t];void 0!==c&&(this._deactivateAction(c),this._removeInactiveAction(c))}const s=this._bindingsByRootAndName[t];if(void 0!==s)for(const o in s){const a=s[o];a.restoreOriginalState(),this._removeInactiveBinding(a)}}uncacheAction(e,t){const i=this.existingAction(e,t);null!==i&&(this._deactivateAction(i),this._removeInactiveAction(i))}}typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("register",{detail:{revision:"147"}})),typeof window<"u"&&(window.__THREE__?console.warn("WARNING: Multiple instances of Three.js being imported."):window.__THREE__="147");class Ere extends ul{constructor(e){super(e),this.dracoLoader=null,this.ktx2Loader=null,this.meshoptDecoder=null,this.pluginCallbacks=[],this.register(function(t){return new Lre(t)}),this.register(function(t){return new kre(t)}),this.register(function(t){return new Vre(t)}),this.register(function(t){return new zre(t)}),this.register(function(t){return new Pre(t)}),this.register(function(t){return new Nre(t)}),this.register(function(t){return new Ore(t)}),this.register(function(t){return new Ire(t)}),this.register(function(t){return new Fre(t)}),this.register(function(t){return new Rre(t)}),this.register(function(t){return new Are(t)}),this.register(function(t){return new Hre(t)}),this.register(function(t){return new Ure(t)})}load(e,t,i,r){const s=this;let o;o=""!==this.resourcePath?this.resourcePath:""!==this.path?this.path:ms.extractUrlBase(e),this.manager.itemStart(e);const a=function(l){r?r(l):console.error(l),s.manager.itemError(e),s.manager.itemEnd(e)},c=new Nr(this.manager);c.setPath(this.path),c.setResponseType("arraybuffer"),c.setRequestHeader(this.requestHeader),c.setWithCredentials(this.withCredentials),c.load(e,function(l){try{s.parse(l,o,function(u){t(u),s.manager.itemEnd(e)},a)}catch(u){a(u)}},i,a)}setDRACOLoader(e){return this.dracoLoader=e,this}setDDSLoader(){throw new Error('THREE.GLTFLoader: "MSFT_texture_dds" no longer supported. Please update to "KHR_texture_basisu".')}setKTX2Loader(e){return this.ktx2Loader=e,this}setMeshoptDecoder(e){return this.meshoptDecoder=e,this}register(e){return-1===this.pluginCallbacks.indexOf(e)&&this.pluginCallbacks.push(e),this}unregister(e){return-1!==this.pluginCallbacks.indexOf(e)&&this.pluginCallbacks.splice(this.pluginCallbacks.indexOf(e),1),this}parse(e,t,i,r){let s;const o={},a={};if("string"==typeof e)s=JSON.parse(e);else if(e instanceof ArrayBuffer)if(ms.decodeText(new Uint8Array(e,0,4))===cS){try{o[gt.KHR_BINARY_GLTF]=new Bre(e)}catch(u){return void(r&&r(u))}s=JSON.parse(o[gt.KHR_BINARY_GLTF].content)}else s=JSON.parse(ms.decodeText(new Uint8Array(e)));else s=e;if(void 0===s.asset||s.asset.version[0]<2)return void(r&&r(new Error("THREE.GLTFLoader: Unsupported asset. glTF versions >=2.0 are supported.")));const c=new ese(s,{path:t||this.resourcePath||"",crossOrigin:this.crossOrigin,requestHeader:this.requestHeader,manager:this.manager,ktx2Loader:this.ktx2Loader,meshoptDecoder:this.meshoptDecoder});c.fileLoader.setRequestHeader(this.requestHeader);for(let l=0;l<this.pluginCallbacks.length;l++){const u=this.pluginCallbacks[l](c);a[u.name]=u,o[u.name]=!0}if(s.extensionsUsed)for(let l=0;l<s.extensionsUsed.length;++l){const u=s.extensionsUsed[l],f=s.extensionsRequired||[];switch(u){case gt.KHR_MATERIALS_UNLIT:o[u]=new Tre;break;case gt.KHR_DRACO_MESH_COMPRESSION:o[u]=new Gre(s,this.dracoLoader);break;case gt.KHR_TEXTURE_TRANSFORM:o[u]=new Wre;break;case gt.KHR_MESH_QUANTIZATION:o[u]=new $re;break;default:f.indexOf(u)>=0&&void 0===a[u]&&console.warn('THREE.GLTFLoader: Unknown extension "'+u+'".')}}c.setExtensions(o),c.setPlugins(a),c.parse(i,r)}parseAsync(e,t){const i=this;return new Promise(function(r,s){i.parse(e,t,r,s)})}}function Dre(){let n={};return{get:function(e){return n[e]},add:function(e,t){n[e]=t},remove:function(e){delete n[e]},removeAll:function(){n={}}}}const gt={KHR_BINARY_GLTF:"KHR_binary_glTF",KHR_DRACO_MESH_COMPRESSION:"KHR_draco_mesh_compression",KHR_LIGHTS_PUNCTUAL:"KHR_lights_punctual",KHR_MATERIALS_CLEARCOAT:"KHR_materials_clearcoat",KHR_MATERIALS_IOR:"KHR_materials_ior",KHR_MATERIALS_SHEEN:"KHR_materials_sheen",KHR_MATERIALS_SPECULAR:"KHR_materials_specular",KHR_MATERIALS_TRANSMISSION:"KHR_materials_transmission",KHR_MATERIALS_IRIDESCENCE:"KHR_materials_iridescence",KHR_MATERIALS_UNLIT:"KHR_materials_unlit",KHR_MATERIALS_VOLUME:"KHR_materials_volume",KHR_TEXTURE_BASISU:"KHR_texture_basisu",KHR_TEXTURE_TRANSFORM:"KHR_texture_transform",KHR_MESH_QUANTIZATION:"KHR_mesh_quantization",KHR_MATERIALS_EMISSIVE_STRENGTH:"KHR_materials_emissive_strength",EXT_TEXTURE_WEBP:"EXT_texture_webp",EXT_MESHOPT_COMPRESSION:"EXT_meshopt_compression",EXT_MESH_GPU_INSTANCING:"EXT_mesh_gpu_instancing"};class Are{constructor(e){this.parser=e,this.name=gt.KHR_LIGHTS_PUNCTUAL,this.cache={refs:{},uses:{}}}_markDefs(){const e=this.parser,t=this.parser.json.nodes||[];for(let i=0,r=t.length;i<r;i++){const s=t[i];s.extensions&&s.extensions[this.name]&&void 0!==s.extensions[this.name].light&&e._addNodeRef(this.cache,s.extensions[this.name].light)}}_loadLight(e){const t=this.parser,i="light:"+e;let r=t.cache.get(i);if(r)return r;const s=t.json,c=((s.extensions&&s.extensions[this.name]||{}).lights||[])[e];let l;const u=new pe(16777215);void 0!==c.color&&u.fromArray(c.color);const f=void 0!==c.range?c.range:0;switch(c.type){case"directional":l=new w8(u),l.target.position.set(0,0,-1),l.add(l.target);break;case"point":l=new HC(u),l.distance=f;break;case"spot":l=new kC(u),l.distance=f,c.spot=c.spot||{},c.spot.innerConeAngle=void 0!==c.spot.innerConeAngle?c.spot.innerConeAngle:0,c.spot.outerConeAngle=void 0!==c.spot.outerConeAngle?c.spot.outerConeAngle:Math.PI/4,l.angle=c.spot.outerConeAngle,l.penumbra=1-c.spot.innerConeAngle/c.spot.outerConeAngle,l.target.position.set(0,0,-1),l.add(l.target);break;default:throw new Error("THREE.GLTFLoader: Unexpected light type: "+c.type)}return l.position.set(0,0,0),l.decay=2,Xs(l,c),void 0!==c.intensity&&(l.intensity=c.intensity),l.name=t.createUniqueName(c.name||"light_"+e),r=Promise.resolve(l),t.cache.add(i,r),r}getDependency(e,t){if("light"===e)return this._loadLight(t)}createNodeAttachment(e){const t=this,i=this.parser,s=i.json.nodes[e],a=(s.extensions&&s.extensions[this.name]||{}).light;return void 0===a?null:this._loadLight(a).then(function(c){return i._getNodeRef(t.cache,a,c)})}}class Tre{constructor(){this.name=gt.KHR_MATERIALS_UNLIT}getMaterialType(){return Ei}extendParams(e,t,i){const r=[];e.color=new pe(1,1,1),e.opacity=1;const s=t.pbrMetallicRoughness;if(s){if(Array.isArray(s.baseColorFactor)){const o=s.baseColorFactor;e.color.fromArray(o),e.opacity=o[3]}void 0!==s.baseColorTexture&&r.push(i.assignTexture(e,"map",s.baseColorTexture,Et))}return Promise.all(r)}}class Ire{constructor(e){this.parser=e,this.name=gt.KHR_MATERIALS_EMISSIVE_STRENGTH}extendMaterialParams(e,t){const r=this.parser.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const s=r.extensions[this.name].emissiveStrength;return void 0!==s&&(t.emissiveIntensity=s),Promise.resolve()}}class Lre{constructor(e){this.parser=e,this.name=gt.KHR_MATERIALS_CLEARCOAT}getMaterialType(e){const i=this.parser.json.materials[e];return i.extensions&&i.extensions[this.name]?qs:null}extendMaterialParams(e,t){const i=this.parser,r=i.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const s=[],o=r.extensions[this.name];if(void 0!==o.clearcoatFactor&&(t.clearcoat=o.clearcoatFactor),void 0!==o.clearcoatTexture&&s.push(i.assignTexture(t,"clearcoatMap",o.clearcoatTexture)),void 0!==o.clearcoatRoughnessFactor&&(t.clearcoatRoughness=o.clearcoatRoughnessFactor),void 0!==o.clearcoatRoughnessTexture&&s.push(i.assignTexture(t,"clearcoatRoughnessMap",o.clearcoatRoughnessTexture)),void 0!==o.clearcoatNormalTexture&&(s.push(i.assignTexture(t,"clearcoatNormalMap",o.clearcoatNormalTexture)),void 0!==o.clearcoatNormalTexture.scale)){const a=o.clearcoatNormalTexture.scale;t.clearcoatNormalScale=new K(a,a)}return Promise.all(s)}}class Rre{constructor(e){this.parser=e,this.name=gt.KHR_MATERIALS_IRIDESCENCE}getMaterialType(e){const i=this.parser.json.materials[e];return i.extensions&&i.extensions[this.name]?qs:null}extendMaterialParams(e,t){const i=this.parser,r=i.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const s=[],o=r.extensions[this.name];return void 0!==o.iridescenceFactor&&(t.iridescence=o.iridescenceFactor),void 0!==o.iridescenceTexture&&s.push(i.assignTexture(t,"iridescenceMap",o.iridescenceTexture)),void 0!==o.iridescenceIor&&(t.iridescenceIOR=o.iridescenceIor),void 0===t.iridescenceThicknessRange&&(t.iridescenceThicknessRange=[100,400]),void 0!==o.iridescenceThicknessMinimum&&(t.iridescenceThicknessRange[0]=o.iridescenceThicknessMinimum),void 0!==o.iridescenceThicknessMaximum&&(t.iridescenceThicknessRange[1]=o.iridescenceThicknessMaximum),void 0!==o.iridescenceThicknessTexture&&s.push(i.assignTexture(t,"iridescenceThicknessMap",o.iridescenceThicknessTexture)),Promise.all(s)}}class zre{constructor(e){this.parser=e,this.name=gt.KHR_MATERIALS_SHEEN}getMaterialType(e){const i=this.parser.json.materials[e];return i.extensions&&i.extensions[this.name]?qs:null}extendMaterialParams(e,t){const i=this.parser,r=i.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const s=[];t.sheenColor=new pe(0,0,0),t.sheenRoughness=0,t.sheen=1;const o=r.extensions[this.name];return void 0!==o.sheenColorFactor&&t.sheenColor.fromArray(o.sheenColorFactor),void 0!==o.sheenRoughnessFactor&&(t.sheenRoughness=o.sheenRoughnessFactor),void 0!==o.sheenColorTexture&&s.push(i.assignTexture(t,"sheenColorMap",o.sheenColorTexture,Et)),void 0!==o.sheenRoughnessTexture&&s.push(i.assignTexture(t,"sheenRoughnessMap",o.sheenRoughnessTexture)),Promise.all(s)}}class Pre{constructor(e){this.parser=e,this.name=gt.KHR_MATERIALS_TRANSMISSION}getMaterialType(e){const i=this.parser.json.materials[e];return i.extensions&&i.extensions[this.name]?qs:null}extendMaterialParams(e,t){const i=this.parser,r=i.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const s=[],o=r.extensions[this.name];return void 0!==o.transmissionFactor&&(t.transmission=o.transmissionFactor),void 0!==o.transmissionTexture&&s.push(i.assignTexture(t,"transmissionMap",o.transmissionTexture)),Promise.all(s)}}class Nre{constructor(e){this.parser=e,this.name=gt.KHR_MATERIALS_VOLUME}getMaterialType(e){const i=this.parser.json.materials[e];return i.extensions&&i.extensions[this.name]?qs:null}extendMaterialParams(e,t){const i=this.parser,r=i.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const s=[],o=r.extensions[this.name];t.thickness=void 0!==o.thicknessFactor?o.thicknessFactor:0,void 0!==o.thicknessTexture&&s.push(i.assignTexture(t,"thicknessMap",o.thicknessTexture)),t.attenuationDistance=o.attenuationDistance||1/0;const a=o.attenuationColor||[1,1,1];return t.attenuationColor=new pe(a[0],a[1],a[2]),Promise.all(s)}}class Ore{constructor(e){this.parser=e,this.name=gt.KHR_MATERIALS_IOR}getMaterialType(e){const i=this.parser.json.materials[e];return i.extensions&&i.extensions[this.name]?qs:null}extendMaterialParams(e,t){const r=this.parser.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const s=r.extensions[this.name];return t.ior=void 0!==s.ior?s.ior:1.5,Promise.resolve()}}class Fre{constructor(e){this.parser=e,this.name=gt.KHR_MATERIALS_SPECULAR}getMaterialType(e){const i=this.parser.json.materials[e];return i.extensions&&i.extensions[this.name]?qs:null}extendMaterialParams(e,t){const i=this.parser,r=i.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const s=[],o=r.extensions[this.name];t.specularIntensity=void 0!==o.specularFactor?o.specularFactor:1,void 0!==o.specularTexture&&s.push(i.assignTexture(t,"specularIntensityMap",o.specularTexture));const a=o.specularColorFactor||[1,1,1];return t.specularColor=new pe(a[0],a[1],a[2]),void 0!==o.specularColorTexture&&s.push(i.assignTexture(t,"specularColorMap",o.specularColorTexture,Et)),Promise.all(s)}}class kre{constructor(e){this.parser=e,this.name=gt.KHR_TEXTURE_BASISU}loadTexture(e){const t=this.parser,i=t.json,r=i.textures[e];if(!r.extensions||!r.extensions[this.name])return null;const s=r.extensions[this.name],o=t.options.ktx2Loader;if(!o){if(i.extensionsRequired&&i.extensionsRequired.indexOf(this.name)>=0)throw new Error("THREE.GLTFLoader: setKTX2Loader must be called before loading KTX2 textures");return null}return t.loadTextureImage(e,s.source,o)}}class Vre{constructor(e){this.parser=e,this.name=gt.EXT_TEXTURE_WEBP,this.isSupported=null}loadTexture(e){const t=this.name,i=this.parser,r=i.json,s=r.textures[e];if(!s.extensions||!s.extensions[t])return null;const o=s.extensions[t],a=r.images[o.source];let c=i.textureLoader;if(a.uri){const l=i.options.manager.getHandler(a.uri);null!==l&&(c=l)}return this.detectSupport().then(function(l){if(l)return i.loadTextureImage(e,o.source,c);if(r.extensionsRequired&&r.extensionsRequired.indexOf(t)>=0)throw new Error("THREE.GLTFLoader: WebP required by asset but unsupported.");return i.loadTexture(e)})}detectSupport(){return this.isSupported||(this.isSupported=new Promise(function(e){const t=new Image;t.src="data:image/webp;base64,UklGRiIAAABXRUJQVlA4IBYAAAAwAQCdASoBAAEADsD+JaQAA3AAAAAA",t.onload=t.onerror=function(){e(1===t.height)}})),this.isSupported}}class Hre{constructor(e){this.name=gt.EXT_MESHOPT_COMPRESSION,this.parser=e}loadBufferView(e){const t=this.parser.json,i=t.bufferViews[e];if(i.extensions&&i.extensions[this.name]){const r=i.extensions[this.name],s=this.parser.getDependency("buffer",r.buffer),o=this.parser.options.meshoptDecoder;if(!o||!o.supported){if(t.extensionsRequired&&t.extensionsRequired.indexOf(this.name)>=0)throw new Error("THREE.GLTFLoader: setMeshoptDecoder must be called before loading compressed files");return null}return s.then(function(a){const u=r.count,f=r.byteStride,d=new Uint8Array(a,r.byteOffset||0,r.byteLength||0);return o.decodeGltfBufferAsync?o.decodeGltfBufferAsync(u,f,d,r.mode,r.filter).then(function(h){return h.buffer}):o.ready.then(function(){const h=new ArrayBuffer(u*f);return o.decodeGltfBuffer(new Uint8Array(h),u,f,d,r.mode,r.filter),h})})}return null}}class Ure{constructor(e){this.name=gt.EXT_MESH_GPU_INSTANCING,this.parser=e}createNodeMesh(e){const t=this.parser.json,i=t.nodes[e];if(!i.extensions||!i.extensions[this.name]||void 0===i.mesh)return null;const r=t.meshes[i.mesh];for(const l of r.primitives)if(l.mode!==ji.TRIANGLES&&l.mode!==ji.TRIANGLE_STRIP&&l.mode!==ji.TRIANGLE_FAN&&void 0!==l.mode)return null;const o=i.extensions[this.name].attributes,a=[],c={};for(const l in o)a.push(this.parser.getDependency("accessor",o[l]).then(u=>(c[l]=u,c[l])));return a.length<1?null:(a.push(this.parser.createNodeMesh(e)),Promise.all(a).then(l=>{const u=l.pop(),f=u.isGroup?u.children:[u],d=l[0].count,h=[];for(const p of f){const g=new Xe,m=new S,v=new ti,x=new S(1,1,1),y=new uC(p.geometry,p.material,d);for(let _=0;_<d;_++)c.TRANSLATION&&m.fromBufferAttribute(c.TRANSLATION,_),c.ROTATION&&v.fromBufferAttribute(c.ROTATION,_),c.SCALE&&x.fromBufferAttribute(c.SCALE,_),y.setMatrixAt(_,g.compose(m,v,x));for(const _ in c)"TRANSLATION"!==_&&"ROTATION"!==_&&"SCALE"!==_&&p.geometry.setAttribute(_,c[_]);Sn.prototype.copy.call(y,p),y.frustumCulled=!1,this.parser.assignFinalMaterial(y),h.push(y)}return u.isGroup?(u.clear(),u.add(...h),u):h[0]}))}}const cS="glTF";class Bre{constructor(e){this.name=gt.KHR_BINARY_GLTF,this.content=null,this.body=null;const t=new DataView(e,0,12);if(this.header={magic:ms.decodeText(new Uint8Array(e.slice(0,4))),version:t.getUint32(4,!0),length:t.getUint32(8,!0)},this.header.magic!==cS)throw new Error("THREE.GLTFLoader: Unsupported glTF-Binary header.");if(this.header.version<2)throw new Error("THREE.GLTFLoader: Legacy binary file detected.");const i=this.header.length-12,r=new DataView(e,12);let s=0;for(;s<i;){const o=r.getUint32(s,!0);s+=4;const a=r.getUint32(s,!0);if(s+=4,1313821514===a){const c=new Uint8Array(e,12+s,o);this.content=ms.decodeText(c)}else if(5130562===a){const c=12+s;this.body=e.slice(c,c+o)}s+=o}if(null===this.content)throw new Error("THREE.GLTFLoader: JSON content not found.")}}class Gre{constructor(e,t){if(!t)throw new Error("THREE.GLTFLoader: No DRACOLoader instance provided.");this.name=gt.KHR_DRACO_MESH_COMPRESSION,this.json=e,this.dracoLoader=t,this.dracoLoader.preload()}decodePrimitive(e,t){const i=this.json,r=this.dracoLoader,s=e.extensions[this.name].bufferView,o=e.extensions[this.name].attributes,a={},c={},l={};for(const u in o){const f=L8[u]||u.toLowerCase();a[f]=o[u]}for(const u in e.attributes){const f=L8[u]||u.toLowerCase();if(void 0!==o[u]){const d=i.accessors[e.attributes[u]];l[f]=Ka[d.componentType].name,c[f]=!0===d.normalized}}return t.getDependency("bufferView",s).then(function(u){return new Promise(function(f){r.decodeDracoFile(u,function(d){for(const h in d.attributes){const p=d.attributes[h],g=c[h];void 0!==g&&(p.normalized=g)}f(d)},a,l)})})}}class Wre{constructor(){this.name=gt.KHR_TEXTURE_TRANSFORM}extendTexture(e,t){return void 0!==t.texCoord&&console.warn('THREE.GLTFLoader: Custom UV sets in "'+this.name+'" extension not yet supported.'),void 0===t.offset&&void 0===t.rotation&&void 0===t.scale||(e=e.clone(),void 0!==t.offset&&e.offset.fromArray(t.offset),void 0!==t.rotation&&(e.rotation=t.rotation),void 0!==t.scale&&e.repeat.fromArray(t.scale),e.needsUpdate=!0),e}}class $re{constructor(){this.name=gt.KHR_MESH_QUANTIZATION}}class uS extends ol{constructor(e,t,i,r){super(e,t,i,r)}copySampleValue_(e){const t=this.resultBuffer,i=this.sampleValues,r=this.valueSize,s=e*r*3+r;for(let o=0;o!==r;o++)t[o]=i[s+o];return t}interpolate_(e,t,i,r){const s=this.resultBuffer,o=this.sampleValues,a=this.valueSize,c=2*a,l=3*a,u=r-t,f=(i-t)/u,d=f*f,h=d*f,p=e*l,g=p-l,m=-2*h+3*d,v=h-d,x=1-m,y=v-d+f;for(let _=0;_!==a;_++)s[_]=x*o[g+_+a]+y*(o[g+_+c]*u)+m*o[p+_+a]+v*(o[p+_]*u);return s}}const jre=new ti;class qre extends uS{interpolate_(e,t,i,r){const s=super.interpolate_(e,t,i,r);return jre.fromArray(s).normalize().toArray(s),s}}const ji={FLOAT:5126,FLOAT_MAT3:35675,FLOAT_MAT4:35676,FLOAT_VEC2:35664,FLOAT_VEC3:35665,FLOAT_VEC4:35666,LINEAR:9729,REPEAT:10497,SAMPLER_2D:35678,POINTS:0,LINES:1,LINE_LOOP:2,LINE_STRIP:3,TRIANGLES:4,TRIANGLE_STRIP:5,TRIANGLE_FAN:6,UNSIGNED_BYTE:5121,UNSIGNED_SHORT:5123},Ka={5120:Int8Array,5121:Uint8Array,5122:Int16Array,5123:Uint16Array,5125:Uint32Array,5126:Float32Array},fS={9728:fn,9729:Kt,9984:1004,9985:1007,9986:1005,9987:Fs},dS={33071:$n,33648:1002,10497:I1},I8={SCALAR:1,VEC2:2,VEC3:3,VEC4:4,MAT2:4,MAT3:9,MAT4:16},L8={POSITION:"position",NORMAL:"normal",TANGENT:"tangent",TEXCOORD_0:"uv",TEXCOORD_1:"uv2",COLOR_0:"color",WEIGHTS_0:"skinWeight",JOINTS_0:"skinIndex"},Ys={scale:"scale",translation:"position",rotation:"quaternion",weights:"morphTargetInfluences"},Zre={CUBICSPLINE:void 0,LINEAR:_a,STEP:Fc};function hl(n,e,t){for(const i in t.extensions)void 0===n[i]&&(e.userData.gltfExtensions=e.userData.gltfExtensions||{},e.userData.gltfExtensions[i]=t.extensions[i])}function Xs(n,e){void 0!==e.extras&&("object"==typeof e.extras?Object.assign(n.userData,e.extras):console.warn("THREE.GLTFLoader: Ignoring primitive type .extras, "+e.extras))}function Kre(n,e){if(n.updateMorphTargets(),void 0!==e.weights)for(let t=0,i=e.weights.length;t<i;t++)n.morphTargetInfluences[t]=e.weights[t];if(e.extras&&Array.isArray(e.extras.targetNames)){const t=e.extras.targetNames;if(n.morphTargetInfluences.length===t.length){n.morphTargetDictionary={};for(let i=0,r=t.length;i<r;i++)n.morphTargetDictionary[t[i]]=i}else console.warn("THREE.GLTFLoader: Invalid extras.targetNames length. Ignoring names.")}}function Jre(n){const e=n.extensions&&n.extensions[gt.KHR_DRACO_MESH_COMPRESSION];let t;return t=e?"draco:"+e.bufferView+":"+e.indices+":"+hS(e.attributes):n.indices+":"+hS(n.attributes)+":"+n.mode,t}function hS(n){let e="";const t=Object.keys(n).sort();for(let i=0,r=t.length;i<r;i++)e+=t[i]+":"+n[t[i]]+";";return e}function z8(n){switch(n){case Int8Array:return 1/127;case Uint8Array:return 1/255;case Int16Array:return 1/32767;case Uint16Array:return 1/65535;default:throw new Error("THREE.GLTFLoader: Unsupported normalized accessor component type.")}}class ese{constructor(e={},t={}){this.json=e,this.extensions={},this.plugins={},this.options=t,this.cache=new Dre,this.associations=new Map,this.primitiveCache={},this.meshCache={refs:{},uses:{}},this.cameraCache={refs:{},uses:{}},this.lightCache={refs:{},uses:{}},this.sourceCache={},this.textureCache={},this.nodeNamesUsed={};let i=!1,r=!1,s=-1;typeof navigator<"u"&&(i=!0===/^((?!chrome|android).)*safari/i.test(navigator.userAgent),r=navigator.userAgent.indexOf("Firefox")>-1,s=r?navigator.userAgent.match(/Firefox\/([0-9]+)\./)[1]:-1),this.textureLoader=typeof createImageBitmap>"u"||i||r&&s<98?new Zie(this.options.manager):new sre(this.options.manager),this.textureLoader.setCrossOrigin(this.options.crossOrigin),this.textureLoader.setRequestHeader(this.options.requestHeader),this.fileLoader=new Nr(this.options.manager),this.fileLoader.setResponseType("arraybuffer"),"use-credentials"===this.options.crossOrigin&&this.fileLoader.setWithCredentials(!0)}setExtensions(e){this.extensions=e}setPlugins(e){this.plugins=e}parse(e,t){const i=this,r=this.json,s=this.extensions;this.cache.removeAll(),this._invokeAll(function(o){return o._markDefs&&o._markDefs()}),Promise.all(this._invokeAll(function(o){return o.beforeRoot&&o.beforeRoot()})).then(function(){return Promise.all([i.getDependencies("scene"),i.getDependencies("animation"),i.getDependencies("camera")])}).then(function(o){const a={scene:o[0][r.scene||0],scenes:o[0],animations:o[1],cameras:o[2],asset:r.asset,parser:i,userData:{}};hl(s,a,r),Xs(a,r),Promise.all(i._invokeAll(function(c){return c.afterRoot&&c.afterRoot(a)})).then(function(){e(a)})}).catch(t)}_markDefs(){const e=this.json.nodes||[],t=this.json.skins||[],i=this.json.meshes||[];for(let r=0,s=t.length;r<s;r++){const o=t[r].joints;for(let a=0,c=o.length;a<c;a++)e[o[a]].isBone=!0}for(let r=0,s=e.length;r<s;r++){const o=e[r];void 0!==o.mesh&&(this._addNodeRef(this.meshCache,o.mesh),void 0!==o.skin&&(i[o.mesh].isSkinnedMesh=!0)),void 0!==o.camera&&this._addNodeRef(this.cameraCache,o.camera)}}_addNodeRef(e,t){void 0!==t&&(void 0===e.refs[t]&&(e.refs[t]=e.uses[t]=0),e.refs[t]++)}_getNodeRef(e,t,i){if(e.refs[t]<=1)return i;const r=i.clone(),s=(o,a)=>{const c=this.associations.get(o);null!=c&&this.associations.set(a,c);for(const[l,u]of o.children.entries())s(u,a.children[l])};return s(i,r),r.name+="_instance_"+e.uses[t]++,r}_invokeOne(e){const t=Object.values(this.plugins);t.push(this);for(let i=0;i<t.length;i++){const r=e(t[i]);if(r)return r}return null}_invokeAll(e){const t=Object.values(this.plugins);t.unshift(this);const i=[];for(let r=0;r<t.length;r++){const s=e(t[r]);s&&i.push(s)}return i}getDependency(e,t){const i=e+":"+t;let r=this.cache.get(i);if(!r){switch(e){case"scene":r=this.loadScene(t);break;case"node":r=this.loadNode(t);break;case"mesh":r=this._invokeOne(function(s){return s.loadMesh&&s.loadMesh(t)});break;case"accessor":r=this.loadAccessor(t);break;case"bufferView":r=this._invokeOne(function(s){return s.loadBufferView&&s.loadBufferView(t)});break;case"buffer":r=this.loadBuffer(t);break;case"material":r=this._invokeOne(function(s){return s.loadMaterial&&s.loadMaterial(t)});break;case"texture":r=this._invokeOne(function(s){return s.loadTexture&&s.loadTexture(t)});break;case"skin":r=this.loadSkin(t);break;case"animation":r=this._invokeOne(function(s){return s.loadAnimation&&s.loadAnimation(t)});break;case"camera":r=this.loadCamera(t);break;default:if(r=this._invokeOne(function(s){return s!=this&&s.getDependency&&s.getDependency(e,t)}),!r)throw new Error("Unknown type: "+e)}this.cache.add(i,r)}return r}getDependencies(e){let t=this.cache.get(e);if(!t){const i=this;t=Promise.all((this.json[e+("mesh"===e?"es":"s")]||[]).map(function(s,o){return i.getDependency(e,o)})),this.cache.add(e,t)}return t}loadBuffer(e){const t=this.json.buffers[e],i=this.fileLoader;if(t.type&&"arraybuffer"!==t.type)throw new Error("THREE.GLTFLoader: "+t.type+" buffer type is not supported.");if(void 0===t.uri&&0===e)return Promise.resolve(this.extensions[gt.KHR_BINARY_GLTF].body);const r=this.options;return new Promise(function(s,o){i.load(ms.resolveURL(t.uri,r.path),s,void 0,function(){o(new Error('THREE.GLTFLoader: Failed to load buffer "'+t.uri+'".'))})})}loadBufferView(e){const t=this.json.bufferViews[e];return this.getDependency("buffer",t.buffer).then(function(i){const s=t.byteOffset||0;return i.slice(s,s+(t.byteLength||0))})}loadAccessor(e){const t=this,i=this.json,r=this.json.accessors[e];if(void 0===r.bufferView&&void 0===r.sparse){const o=I8[r.type],c=!0===r.normalized,l=new(0,Ka[r.componentType])(r.count*o);return Promise.resolve(new Ut(l,o,c))}const s=[];return s.push(void 0!==r.bufferView?this.getDependency("bufferView",r.bufferView):null),void 0!==r.sparse&&(s.push(this.getDependency("bufferView",r.sparse.indices.bufferView)),s.push(this.getDependency("bufferView",r.sparse.values.bufferView))),Promise.all(s).then(function(o){const a=o[0],c=I8[r.type],l=Ka[r.componentType],u=l.BYTES_PER_ELEMENT,d=r.byteOffset||0,h=void 0!==r.bufferView?i.bufferViews[r.bufferView].byteStride:void 0,p=!0===r.normalized;let g,m;if(h&&h!==u*c){const v=Math.floor(d/h),x="InterleavedBuffer:"+r.bufferView+":"+r.componentType+":"+v+":"+r.count;let y=t.cache.get(x);y||(g=new l(a,v*h,r.count*h/u),y=new B6(g,h/u),t.cache.add(x,y)),m=new Z1(y,c,d%h/u,p)}else g=null===a?new l(r.count*c):new l(a,d,r.count*c),m=new Ut(g,c,p);if(void 0!==r.sparse){const _=r.sparse.values.byteOffset||0,M=new(0,Ka[r.sparse.indices.componentType])(o[1],r.sparse.indices.byteOffset||0,r.sparse.count*I8.SCALAR),w=new l(o[2],_,r.sparse.count*c);null!==a&&(m=new Ut(m.array.slice(),m.itemSize,m.normalized));for(let T=0,b=M.length;T<b;T++){const D=M[T];if(m.setX(D,w[T*c]),c>=2&&m.setY(D,w[T*c+1]),c>=3&&m.setZ(D,w[T*c+2]),c>=4&&m.setW(D,w[T*c+3]),c>=5)throw new Error("THREE.GLTFLoader: Unsupported itemSize in sparse BufferAttribute.")}}return m})}loadTexture(e){const t=this.json,s=t.textures[e].source,o=t.images[s];let a=this.textureLoader;if(o.uri){const c=this.options.manager.getHandler(o.uri);null!==c&&(a=c)}return this.loadTextureImage(e,s,a)}loadTextureImage(e,t,i){const r=this,s=this.json,o=s.textures[e],a=s.images[t],c=(a.uri||a.bufferView)+":"+o.sampler;if(this.textureCache[c])return this.textureCache[c];const l=this.loadImageSource(t,i).then(function(u){u.flipY=!1,u.name=o.name||a.name||"";const d=(s.samplers||{})[o.sampler]||{};return u.magFilter=fS[d.magFilter]||Kt,u.minFilter=fS[d.minFilter]||Fs,u.wrapS=dS[d.wrapS]||I1,u.wrapT=dS[d.wrapT]||I1,r.associations.set(u,{textures:e}),u}).catch(function(){return null});return this.textureCache[c]=l,l}loadImageSource(e,t){const r=this.json,s=this.options;if(void 0!==this.sourceCache[e])return this.sourceCache[e].then(f=>f.clone());const o=r.images[e],a=self.URL||self.webkitURL;let c=o.uri||"",l=!1;if(void 0!==o.bufferView)c=this.getDependency("bufferView",o.bufferView).then(function(f){l=!0;const d=new Blob([f],{type:o.mimeType});return c=a.createObjectURL(d),c});else if(void 0===o.uri)throw new Error("THREE.GLTFLoader: Image "+e+" is missing URI and bufferView");const u=Promise.resolve(c).then(function(f){return new Promise(function(d,h){let p=d;!0===t.isImageBitmapLoader&&(p=function(g){const m=new ur(g);m.needsUpdate=!0,d(m)}),t.load(ms.resolveURL(f,s.path),p,void 0,h)})}).then(function(f){return!0===l&&a.revokeObjectURL(c),f.userData.mimeType=o.mimeType||function Qre(n){return n.search(/\.jpe?g($|\?)/i)>0||0===n.search(/^data\:image\/jpeg/)?"image/jpeg":n.search(/\.webp($|\?)/i)>0||0===n.search(/^data\:image\/webp/)?"image/webp":"image/png"}(o.uri),f}).catch(function(f){throw console.error("THREE.GLTFLoader: Couldn't load texture",c),f});return this.sourceCache[e]=u,u}assignTexture(e,t,i,r){const s=this;return this.getDependency("texture",i.index).then(function(o){if(!o)return null;if(void 0!==i.texCoord&&0!=i.texCoord&&!("aoMap"===t&&1==i.texCoord)&&console.warn("THREE.GLTFLoader: Custom UV set "+i.texCoord+" for texture "+t+" not yet supported."),s.extensions[gt.KHR_TEXTURE_TRANSFORM]){const a=void 0!==i.extensions?i.extensions[gt.KHR_TEXTURE_TRANSFORM]:void 0;if(a){const c=s.associations.get(o);o=s.extensions[gt.KHR_TEXTURE_TRANSFORM].extendTexture(o,a),s.associations.set(o,c)}}return void 0!==r&&(o.encoding=r),e[t]=o,o})}assignFinalMaterial(e){const t=e.geometry;let i=e.material;const r=void 0===t.attributes.tangent,s=void 0!==t.attributes.color,o=void 0===t.attributes.normal;if(e.isPoints){const a="PointsMaterial:"+i.uuid;let c=this.cache.get(a);c||(c=new q6,pr.prototype.copy.call(c,i),c.color.copy(i.color),c.map=i.map,c.sizeAttenuation=!1,this.cache.add(a,c)),i=c}else if(e.isLine){const a="LineBasicMaterial:"+i.uuid;let c=this.cache.get(a);c||(c=new di,pr.prototype.copy.call(c,i),c.color.copy(i.color),this.cache.add(a,c)),i=c}if(r||s||o){let a="ClonedMaterial:"+i.uuid+":";r&&(a+="derivative-tangents:"),s&&(a+="vertex-colors:"),o&&(a+="flat-shading:");let c=this.cache.get(a);c||(c=i.clone(),s&&(c.vertexColors=!0),o&&(c.flatShading=!0),r&&(c.normalScale&&(c.normalScale.y*=-1),c.clearcoatNormalScale&&(c.clearcoatNormalScale.y*=-1)),this.cache.add(a,c),this.associations.set(c,this.associations.get(i))),i=c}i.aoMap&&void 0===t.attributes.uv2&&void 0!==t.attributes.uv&&t.setAttribute("uv2",t.attributes.uv),e.material=i}getMaterialType(){return j4}loadMaterial(e){const t=this,r=this.extensions,s=this.json.materials[e];let o;const a={},l=[];if((s.extensions||{})[gt.KHR_MATERIALS_UNLIT]){const f=r[gt.KHR_MATERIALS_UNLIT];o=f.getMaterialType(),l.push(f.extendParams(a,s,t))}else{const f=s.pbrMetallicRoughness||{};if(a.color=new pe(1,1,1),a.opacity=1,Array.isArray(f.baseColorFactor)){const d=f.baseColorFactor;a.color.fromArray(d),a.opacity=d[3]}void 0!==f.baseColorTexture&&l.push(t.assignTexture(a,"map",f.baseColorTexture,Et)),a.metalness=void 0!==f.metallicFactor?f.metallicFactor:1,a.roughness=void 0!==f.roughnessFactor?f.roughnessFactor:1,void 0!==f.metallicRoughnessTexture&&(l.push(t.assignTexture(a,"metalnessMap",f.metallicRoughnessTexture)),l.push(t.assignTexture(a,"roughnessMap",f.metallicRoughnessTexture))),o=this._invokeOne(function(d){return d.getMaterialType&&d.getMaterialType(e)}),l.push(Promise.all(this._invokeAll(function(d){return d.extendMaterialParams&&d.extendMaterialParams(e,a)})))}!0===s.doubleSided&&(a.side=2);const u=s.alphaMode||"OPAQUE";if("BLEND"===u?(a.transparent=!0,a.depthWrite=!1):(a.transparent=!1,"MASK"===u&&(a.alphaTest=void 0!==s.alphaCutoff?s.alphaCutoff:.5)),void 0!==s.normalTexture&&o!==Ei&&(l.push(t.assignTexture(a,"normalMap",s.normalTexture)),a.normalScale=new K(1,1),void 0!==s.normalTexture.scale)){const f=s.normalTexture.scale;a.normalScale.set(f,f)}return void 0!==s.occlusionTexture&&o!==Ei&&(l.push(t.assignTexture(a,"aoMap",s.occlusionTexture)),void 0!==s.occlusionTexture.strength&&(a.aoMapIntensity=s.occlusionTexture.strength)),void 0!==s.emissiveFactor&&o!==Ei&&(a.emissive=(new pe).fromArray(s.emissiveFactor)),void 0!==s.emissiveTexture&&o!==Ei&&l.push(t.assignTexture(a,"emissiveMap",s.emissiveTexture,Et)),Promise.all(l).then(function(){const f=new o(a);return s.name&&(f.name=s.name),Xs(f,s),t.associations.set(f,{materials:e}),s.extensions&&hl(r,f,s),f})}createUniqueName(e){const t=Nt.sanitizeNodeName(e||"");let i=t;for(let r=1;this.nodeNamesUsed[i];++r)i=t+"_"+r;return this.nodeNamesUsed[i]=!0,i}loadGeometries(e){const t=this,i=this.extensions,r=this.primitiveCache;function s(a){return i[gt.KHR_DRACO_MESH_COMPRESSION].decodePrimitive(a,t).then(function(c){return mS(c,a,t)})}const o=[];for(let a=0,c=e.length;a<c;a++){const l=e[a],u=Jre(l),f=r[u];if(f)o.push(f.promise);else{let d;d=l.extensions&&l.extensions[gt.KHR_DRACO_MESH_COMPRESSION]?s(l):mS(new it,l,t),r[u]={primitive:l,promise:d},o.push(d)}}return Promise.all(o)}loadMesh(e){const t=this,r=this.extensions,s=this.json.meshes[e],o=s.primitives,a=[];for(let c=0,l=o.length;c<l;c++){const u=void 0===o[c].material?(void 0===(n=this.cache).DefaultMaterial&&(n.DefaultMaterial=new j4({color:16777215,emissive:0,metalness:1,roughness:1,transparent:!1,depthTest:!0,side:0})),n.DefaultMaterial):this.getDependency("material",o[c].material);a.push(u)}var n;return a.push(t.loadGeometries(o)),Promise.all(a).then(function(c){const l=c.slice(0,c.length-1),u=c[c.length-1],f=[];for(let h=0,p=u.length;h<p;h++){const g=u[h],m=o[h];let v;const x=l[h];if(m.mode===ji.TRIANGLES||m.mode===ji.TRIANGLE_STRIP||m.mode===ji.TRIANGLE_FAN||void 0===m.mode)v=!0===s.isSkinnedMesh?new oC(g,x):new Dn(g,x),!0===v.isSkinnedMesh&&!v.geometry.attributes.skinWeight.normalized&&v.normalizeSkinWeights(),m.mode===ji.TRIANGLE_STRIP?v.geometry=gS(v.geometry,1):m.mode===ji.TRIANGLE_FAN&&(v.geometry=gS(v.geometry,2));else if(m.mode===ji.LINES)v=new j6(g,x);else if(m.mode===ji.LINE_STRIP)v=new Y1(g,x);else if(m.mode===ji.LINE_LOOP)v=new gC(g,x);else{if(m.mode!==ji.POINTS)throw new Error("THREE.GLTFLoader: Primitive mode unsupported: "+m.mode);v=new Y6(g,x)}Object.keys(v.geometry.morphAttributes).length>0&&Kre(v,s),v.name=t.createUniqueName(s.name||"mesh_"+e),Xs(v,s),m.extensions&&hl(r,v,m),t.assignFinalMaterial(v),f.push(v)}for(let h=0,p=f.length;h<p;h++)t.associations.set(f[h],{meshes:e,primitives:h});if(1===f.length)return f[0];const d=new js;t.associations.set(d,{meshes:e});for(let h=0,p=f.length;h<p;h++)d.add(f[h]);return d})}loadCamera(e){let t;const i=this.json.cameras[e],r=i[i.type];if(r)return"perspective"===i.type?t=new An(EJ.radToDeg(r.yfov),r.aspectRatio||1,r.znear||1,r.zfar||2e6):"orthographic"===i.type&&(t=new x4(-r.xmag,r.xmag,r.ymag,-r.ymag,r.znear,r.zfar)),i.name&&(t.name=this.createUniqueName(i.name)),Xs(t,i),Promise.resolve(t);console.warn("THREE.GLTFLoader: Missing camera parameters.")}loadSkin(e){const t=this.json.skins[e],i=[];for(let r=0,s=t.joints.length;r<s;r++)i.push(this.getDependency("node",t.joints[r]));return i.push(void 0!==t.inverseBindMatrices?this.getDependency("accessor",t.inverseBindMatrices):null),Promise.all(i).then(function(r){const s=r.pop(),o=r,a=[],c=[];for(let l=0,u=o.length;l<u;l++){const f=o[l];if(f){a.push(f);const d=new Xe;null!==s&&d.fromArray(s.array,16*l),c.push(d)}else console.warn('THREE.GLTFLoader: Joint "%s" could not be found.',t.joints[l])}return new T4(a,c)})}loadAnimation(e){const i=this.json.animations[e],r=[],s=[],o=[],a=[],c=[];for(let l=0,u=i.channels.length;l<u;l++){const f=i.channels[l],d=i.samplers[f.sampler],h=f.target,g=void 0!==i.parameters?i.parameters[d.input]:d.input,m=void 0!==i.parameters?i.parameters[d.output]:d.output;r.push(this.getDependency("node",h.node)),s.push(this.getDependency("accessor",g)),o.push(this.getDependency("accessor",m)),a.push(d),c.push(h)}return Promise.all([Promise.all(r),Promise.all(s),Promise.all(o),Promise.all(a),Promise.all(c)]).then(function(l){const u=l[0],f=l[1],d=l[2],h=l[3],p=l[4],g=[];for(let v=0,x=u.length;v<x;v++){const y=u[v],_=f[v],M=d[v],w=h[v],T=p[v];if(void 0===y)continue;let b;switch(y.updateMatrix(),Ys[T.path]){case Ys.weights:b=al;break;case Ys.rotation:b=Q1;break;default:b=cl}const D=y.name?y.name:y.uuid,I=void 0!==w.interpolation?Zre[w.interpolation]:_a,N=[];Ys[T.path]===Ys.weights?y.traverse(function(O){O.morphTargetInfluences&&N.push(O.name?O.name:O.uuid)}):N.push(D);let J=M.array;if(M.normalized){const O=z8(J.constructor),R=new Float32Array(J.length);for(let k=0,Y=J.length;k<Y;k++)R[k]=J[k]*O;J=R}for(let O=0,R=N.length;O<R;O++){const k=new b(N[O]+"."+Ys[T.path],_.array,J,I);"CUBICSPLINE"===w.interpolation&&(k.createInterpolant=function(ee){return new(this instanceof Q1?qre:uS)(this.times,this.values,this.getValueSize()/3,ee)},k.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline=!0),g.push(k)}}return new ll(i.name?i.name:"animation_"+e,void 0,g)})}createNodeMesh(e){const i=this,r=this.json.nodes[e];return void 0===r.mesh?null:i.getDependency("mesh",r.mesh).then(function(s){const o=i._getNodeRef(i.meshCache,r.mesh,s);return void 0!==r.weights&&o.traverse(function(a){if(a.isMesh)for(let c=0,l=r.weights.length;c<l;c++)a.morphTargetInfluences[c]=r.weights[c]}),o})}loadNode(e){const i=this.extensions,r=this,s=this.json.nodes[e],o=s.name?r.createUniqueName(s.name):"";return function(){const a=[],c=r._invokeOne(function(l){return l.createNodeMesh&&l.createNodeMesh(e)});return c&&a.push(c),void 0!==s.camera&&a.push(r.getDependency("camera",s.camera).then(function(l){return r._getNodeRef(r.cameraCache,s.camera,l)})),r._invokeAll(function(l){return l.createNodeAttachment&&l.createNodeAttachment(e)}).forEach(function(l){a.push(l)}),Promise.all(a)}().then(function(a){let c;if(c=!0===s.isBone?new W6:a.length>1?new js:1===a.length?a[0]:new Sn,c!==a[0])for(let l=0,u=a.length;l<u;l++)c.add(a[l]);if(s.name&&(c.userData.name=s.name,c.name=o),Xs(c,s),s.extensions&&hl(i,c,s),void 0!==s.matrix){const l=new Xe;l.fromArray(s.matrix),c.applyMatrix4(l)}else void 0!==s.translation&&c.position.fromArray(s.translation),void 0!==s.rotation&&c.quaternion.fromArray(s.rotation),void 0!==s.scale&&c.scale.fromArray(s.scale);return r.associations.has(c)||r.associations.set(c,{}),r.associations.get(c).nodes=e,c})}loadScene(e){const t=this.json,i=this.extensions,r=this.json.scenes[e],s=this,o=new js;r.name&&(o.name=s.createUniqueName(r.name)),Xs(o,r),r.extensions&&hl(i,o,r);const a=r.nodes||[],c=[];for(let l=0,u=a.length;l<u;l++)c.push(pS(a[l],o,t,s));return Promise.all(c).then(function(){return s.associations=(u=>{const f=new Map;for(const[d,h]of s.associations)(d instanceof pr||d instanceof ur)&&f.set(d,h);return u.traverse(d=>{const h=s.associations.get(d);null!=h&&f.set(d,h)}),f})(o),o})}}function pS(n,e,t,i){const r=t.nodes[n];return i.getDependency("node",n).then(function(s){return void 0===r.skin?s:i.getDependency("skin",r.skin).then(function(o){return s.traverse(function(a){!a.isSkinnedMesh||a.bind(o,a.matrixWorld)}),s})}).then(function(s){e.add(s);const o=[];if(r.children){const a=r.children;for(let c=0,l=a.length;c<l;c++)o.push(pS(a[c],s,t,i))}return Promise.all(o)})}function mS(n,e,t){const i=e.attributes,r=[];function s(o,a){return t.getDependency("accessor",o).then(function(c){n.setAttribute(a,c)})}for(const o in i){const a=L8[o]||o.toLowerCase();a in n.attributes||r.push(s(i[o],a))}if(void 0!==e.indices&&!n.index){const o=t.getDependency("accessor",e.indices).then(function(a){n.setIndex(a)});r.push(o)}return Xs(n,e),function tse(n,e,t){const i=e.attributes,r=new H1;if(void 0===i.POSITION)return;{const a=t.json.accessors[i.POSITION],c=a.min,l=a.max;if(void 0===c||void 0===l)return void console.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION.");if(r.set(new S(c[0],c[1],c[2]),new S(l[0],l[1],l[2])),a.normalized){const u=z8(Ka[a.componentType]);r.min.multiplyScalar(u),r.max.multiplyScalar(u)}}const s=e.targets;if(void 0!==s){const a=new S,c=new S;for(let l=0,u=s.length;l<u;l++){const f=s[l];if(void 0!==f.POSITION){const d=t.json.accessors[f.POSITION],h=d.min,p=d.max;if(void 0!==h&&void 0!==p){if(c.setX(Math.max(Math.abs(h[0]),Math.abs(p[0]))),c.setY(Math.max(Math.abs(h[1]),Math.abs(p[1]))),c.setZ(Math.max(Math.abs(h[2]),Math.abs(p[2]))),d.normalized){const g=z8(Ka[d.componentType]);c.multiplyScalar(g)}a.max(c)}else console.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION.")}}r.expandByVector(a)}n.boundingBox=r;const o=new W1;r.getCenter(o.center),o.radius=r.min.distanceTo(r.max)/2,n.boundingSphere=o}(n,e,t),Promise.all(r).then(function(){return void 0!==e.targets?function Xre(n,e,t){let i=!1,r=!1,s=!1;for(let l=0,u=e.length;l<u;l++){const f=e[l];if(void 0!==f.POSITION&&(i=!0),void 0!==f.NORMAL&&(r=!0),void 0!==f.COLOR_0&&(s=!0),i&&r&&s)break}if(!i&&!r&&!s)return Promise.resolve(n);const o=[],a=[],c=[];for(let l=0,u=e.length;l<u;l++){const f=e[l];if(i){const d=void 0!==f.POSITION?t.getDependency("accessor",f.POSITION):n.attributes.position;o.push(d)}if(r){const d=void 0!==f.NORMAL?t.getDependency("accessor",f.NORMAL):n.attributes.normal;a.push(d)}if(s){const d=void 0!==f.COLOR_0?t.getDependency("accessor",f.COLOR_0):n.attributes.color;c.push(d)}}return Promise.all([Promise.all(o),Promise.all(a),Promise.all(c)]).then(function(l){const f=l[1],d=l[2];return i&&(n.morphAttributes.position=l[0]),r&&(n.morphAttributes.normal=f),s&&(n.morphAttributes.color=d),n.morphTargetsRelative=!0,n})}(n,e.targets,t):n})}function gS(n,e){let t=n.getIndex();if(null===t){const o=[],a=n.getAttribute("position");if(void 0===a)return console.error("THREE.GLTFLoader.toTrianglesDrawMode(): Undefined position attribute. Processing not possible."),n;for(let c=0;c<a.count;c++)o.push(c);n.setIndex(o),t=n.getIndex()}const i=t.count-2,r=[];if(2===e)for(let o=1;o<=i;o++)r.push(t.getX(0)),r.push(t.getX(o)),r.push(t.getX(o+1));else for(let o=0;o<i;o++)o%2==0?(r.push(t.getX(o)),r.push(t.getX(o+1)),r.push(t.getX(o+2))):(r.push(t.getX(o+2)),r.push(t.getX(o+1)),r.push(t.getX(o)));r.length/3!==i&&console.error("THREE.GLTFLoader.toTrianglesDrawMode(): Unable to generate correct amount of triangles.");const s=n.clone();return s.setIndex(r),s}const vS_vertex="\n    attribute float scale;\n    varying vec2 vUv;\n    varying vec3 vPosition;\n    void main() {\n        vUv = uv ;\n        vPosition = position;\n        vec4 mvPosition = modelViewMatrix * vec4( position, 1.0 );\n        gl_PointSize = 3.;//scale * ( 300.0 / - mvPosition.z );\n        gl_Position = projectionMatrix * mvPosition;\n    }",vS_fragment="\n    uniform vec3 color;\n    varying vec2 vUv;\n    varying vec3 vPosition;\n    uniform float u_time;\n    void main() {\n        vec2 uv = vec2(abs(sin(vPosition.x)), abs(sin(vPosition.z)))*.5; \n        vec2 uv2 = vec2(vPosition.x,vPosition.z)*.01; \n        vec2 uv1 = vec2(gl_PointCoord.x, 1. - gl_PointCoord.y); \n      if ( length( gl_PointCoord - vec2( 0.5, 0.5 ) ) > 0.475 ) discard;\n      gl_FragColor = vec4(.5,abs(sin(uv2.x+u_time*.02)),abs(sin(uv2.y+u_time*.02)),1.);\n  }",yS_vertex="\n      varying vec2 vUv;\n      void main() {\n        vUv = uv;\n        gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n      }",yS_fragment="\n        uniform vec4      iMouse; \n        uniform vec3 iResolution;\n        uniform float iTime;\n        float mat = 0.0;\n        float ss = 0.1;\n        varying vec2 vUv;\n        const int MAX_ITER = 8;\n        float field(vec3 p, float s, int iter){\n            float accum = s / 4.0;\n            float prev = 0.0;\n            float tw = 0.0;\n            for (int i = 0; i < MAX_ITER; ++i){\n                if (i >= iter) // drop from the loop if the number of iterations has been completed - workaround for GLSL loop index limitation\n                {\n                    break;\n                }\n                float mag = dot(p, p);\n                p = abs(p) / mag + vec3(-0.5, -0.4, -1.487);\n                float w = exp(-float(i) / 5.0);\n                accum += w * exp(-9.025 * pow(abs(mag - prev), 2.2));\n                tw += w;\n                prev = mag;\n            }\n            return max(0.0, 5.2 * accum / tw - 0.65);\n        }\n\n        vec3 nrand3(vec2 co) {\n            vec3 a = fract(cos(co.x*8.3e-3 + co.y) * vec3(1.3e5, 4.7e5, 2.9e5));\n            vec3 b = fract(sin(co.x*0.3e-3 + co.y) * vec3(8.1e5, 1.0e5, 0.1e5));\n            vec3 c = mix(a, b, 0.5);\n            return c;\n        }\n\n        vec4 starLayer(vec2 p, float time) {\n            vec2 seed = 1.9 * p.xy;\n            seed = floor(seed * max(iResolution.x, 600.0) / 1.5);\n            vec3 rnd = nrand3(seed);\n            vec4 col = vec4(pow(rnd.y, 17.0));\n            float mul = 10.0 * rnd.x;\n            col.xyz *= sin(time * mul + mul) * 0.25 + 1.0;\n            return col;\n        }\n\n        void mainImage( out vec4 fragColor, in vec2 fragCoord ) {\n            float time = iTime / (iResolution.x / 1000.0);\n            \n            // first layer of the kaliset fractal\n            vec2 uv = 2.0 * fragCoord / iResolution.xy - 1.0;\n                vec2 uvs = uv * iResolution.xy / max(iResolution.x, iResolution.y);\n            vec3 p = vec3(uvs / 2.5, 0.0) + vec3(0.8, -1.3, 0.0);\n            p += 0.45 * vec3(sin(time / 32.0), sin(time / 24.0), sin(time / 64.0));\n            \n            // adjust first layer position based on mouse movement\n            p.x += mix(-0.02, 0.02, (iMouse.x / iResolution.x));\n            p.y += mix(-0.02, 0.02, (iMouse.y / iResolution.y));\n            \n            // float freqs[4];\n            // freqs[0] = 0.45;\n            // freqs[1] = 0.4;\n            // freqs[2] = 0.15;\n            // freqs[3] = 0.9;\n\n            // float t = field(p, freqs[2], 13);\n            // float v = (1.0 - exp((abs(uv.x) - 1.0) * 6.0)) * (1.0 - exp((abs(uv.y) - 1.0) * 6.0));\n            \n            // second layer of the kaliset fractal\n            vec3 p2 = vec3(uvs / (4.0 + sin(time * 0.11) * 0.2 + 0.2 + sin(time * 0.15) * 0.3 + 0.4), 4.0) + vec3(2.0, -1.3, -1.0);\n            p2 += 0.16 * vec3(sin(time / 32.0), sin(time / 24.0), sin(time / 64.0));\n            \n            // adjust second layer position based on mouse movement\n            p2.x += mix(-0.01, 0.01, (iMouse.x / iResolution.x));\n            p2.y += mix(-0.01, 0.01, (iMouse.y / iResolution.y));\n            //float t2 = field(p2, freqs[3], 18);\n            //vec4 c2 = mix(0.5, 0.2, v) * vec4(5.5 * t2 * t2 * t2, 2.1 * t2 * t2, 2.2 * t2 * freqs[0], t2);\n            \n            // add stars (source: https://glslsandbox.com/e#6904.0)\n            vec4 starColour = vec4(0.0);\n            starColour += starLayer(p.xy, time); // add first layer of stars\n            starColour += starLayer(p2.xy, time); // add second layer of stars\n\n            const float brightness = 0.50;\n            // vec4 colour = mix(freqs[3] - 0.3, 1.0, v) * vec4(1.5 * freqs[2] * t * t * t, 1.2 * freqs[1] * t * t, freqs[3] * t, 1.0) + c2 + starColour;\n            fragColor = vec4(brightness * starColour.xyz, 1.0);\n        }\n  \n        void main() {\n            gl_FragColor = vec4(1.,1.,1.,1.);\n            mainImage(gl_FragColor, gl_FragCoord.xy);\n        }";class nse{constructor(){this.count=0,this.uniforms={color:{value:new pe(16777215)},u_time:{value:0}},console.log("Waves"),this.createWave()}createWave(){this.positions=new Float32Array(7500),this.scales=new Float32Array(2500);let t=0,i=0;for(let o=0;o<50;o++)for(let a=0;a<50;a++)this.positions[t]=5*o*(50-a)*(t%2==0?.05:-.05),this.positions[t+1]=0,this.positions[t+2]=5*Math.floor(a/2)*2-125,this.scales[i]=2,t+=3,i++;const r=new it;r.setAttribute("position",new Ut(this.positions,3)),r.setAttribute("scale",new Ut(this.scales,1));const s=new Lr({uniforms:this.uniforms,vertexShader:vS_vertex,fragmentShader:vS_fragment});return this.particles=new Y6(r,s),this.particles}render(){let e=0,t=0;this.uniforms.u_time.value++;for(let i=0;i<50;i++)for(let r=0;r<50;r++)this.positions[e+1]=5*Math.sin(.3*(i+this.count))*.1+5*Math.sin(.3*(r+this.count))*.3,this.scales[t]=1*(Math.sin(.3*(i+this.count))+1)+1*(Math.sin(.5*(r+this.count))+1),e+=3,t++;this.particles.geometry.attributes.position.needsUpdate=!0,this.particles.geometry.attributes.scale.needsUpdate=!0,this.count+=.1,this.particles.position.set(0,-50,-120)}}class ise{constructor(e){this.uniforms={iResolution:{value:new S(1024,1024,1024)},iTime:{value:1},iMouse:{value:new xt},uPerspective:{value:.1},uViewport:{value:new xt(1,1,128,128)},uMaterialColor:{value:new xt(.1,1,1,1)}},this.mesh=new Dn(new jc(2048,630),new Lr({uniforms:this.uniforms,vertexShader:yS_vertex,fragmentShader:yS_fragment})),e?.add(this.mesh),this.mesh.position.set(0,0,-400)}render(){this.uniforms.iTime.value+=.01}}const on="https://hututusoftwares.com/",rse=`${on}3D/Parrot.glb`,sse=`${on}images/apple-touch-icon-72x72.png`,ose=`${on}3D/android.jpg`,ase=`${on}3D/three.jpg`,cse=`${on}3D/node.jpg`,lse=`${on}3D/games.jpg`,use=["canvas"];class gl{constructor(){this.clock=new qC,this.morphs=[],console.log("~~~~~~constructor~~~~~~~~")}addMorph(e,t,i,r,s,o,a,c){(e=e.clone()).material=e.material.clone(),c&&e.material.color.offsetHSL(0,.5*Math.random()-.25,.5*Math.random()-.25),this.mixer.clipAction(t,e).setDuration(r).startAt(-r*Math.random()).play(),e.position.set(s,o,a),e.rotation.y=Math.PI/2,e.castShadow=!0,e.receiveShadow=!0,this.scene.add(e),this.morphs.push({mesh:e,speed:i})}canvas(){return this.canvasRef.nativeElement}animate(){const e=this;requestAnimationFrame(()=>{e.animate()});const t=this.clock.getDelta();this.renderer.render(this.scene,this.camera),this.mixer.update(10*t),this.morphs.forEach((i,r)=>{if(i.mesh.position.x+=i.speed*t,0==r){i.mesh.position.set(100*Math.sin(i.speed),350,100*Math.cos(i.speed)),i.speed+=.5;const s=i.speed*(Math.PI/180);i.mesh.position.set(395*Math.sin(s),0,150*Math.cos(s)-250),i.mesh.rotation.set(0,.5*Math.PI+s,0),i.mesh.scale.set(.5,.5,.5)}i.mesh.position.x>600&&(i.mesh.position.x=-600,i.mesh.position.y=300*Math.random())}),this.wave.render(),this.galaxy.render(),this.controls?.update()}createScene(){this.scene=new Xw;const e=new W4(10,9,32),t=new Ei({color:16776960,side:2}),i=new Dn(e,t);i.rotation.set(.5*Math.PI,0,0),this.scene.add(i),this.camera=new An(75,window.innerWidth/window.innerHeight,.1,1e3);const r=new UC(4210752,3);this.scene.add(r);const s=new w8(4210752);this.scene.add(s),this.camera.position.set(0,0,20),this.renderer=new Yw({canvas:this.canvas()}),this.renderer.setSize(window.innerWidth,window.innerHeight),this.scene.fog=new C4(0,.0015);const o=new Ere;this.mixer=new xre(this.scene);const a=this;o.load(rse,function(c){const l=c.scene.children[0],u=c.animations[0];for(let f=0;f<5;f++)a.addMorph(l.clone(),u,130+130*Math.random(),8,600-1200*Math.random(),300*Math.random(),30*Math.random()-400,!0);a.addMorph(l,u,400,10,50,350,-500,!0)}),this.wave=new nse,this.scene.add(this.wave.particles),this.galaxy=new ise(this.scene),this.onWindowResize=this.onWindowResize.bind(this),window.addEventListener("resize",this.onWindowResize)}ngOnDestroy(){console.log("~~~~~~ngOnDestroy~~~~~~~~"),window.removeEventListener("resize",this.onWindowResize)}ngAfterViewInit(){console.log("~~~~~~~ngAfterViewInit~~~~~~~",this.canvas()),this.createScene(),this.animate()}ngOnInit(){console.log("~~~~~~~ngOnInit~~~~~~~")}onWindowResize(){console.log("~~~~~~~ngOnInit~~~~~~~",this.camera);const e=window.innerWidth,t=window.innerHeight;this.camera.aspect=e/t,this.camera.updateProjectionMatrix(),this.renderer.setSize(e,t)}}gl.\u0275fac=function(e){return new(e||gl)},gl.\u0275cmp=zi({type:gl,selectors:[["app-home3-d"]],viewQuery:function(e,t){if(1&e&&tv(use,5),2&e){let i;Sf(i=function Ef(){return function vz(n,e){return n[19].queries[e].queryList}(X(),H7())}())&&(t.canvasRef=i.first)}},decls:2,vars:0,consts:[["id","home-canvas"],["canvas",""]],template:function(e,t){1&e&&cn(0,"canvas",0,1)},styles:["#home-canvas[_ngcontent-%COMP%]{position:fixed;inset:0;width:100%;height:100%;z-index:-1}"]});const N8=mc("increment"),O8=mc("decrement"),F8=mc("reset"),_S=mc("actionSetPage",{_as:"props",_p:void 0}),vl=function(n){return{gradientText:n}};class yl{constructor(e){this.store=e,this.baseURL=on,this.logoURL=sse,this.pageView=M1,this.state$=e.pipe(lh("state"))}increment(){this.store.dispatch(N8())}decrement(){this.store.dispatch(O8())}reset(){this.store.dispatch(F8())}actionSetPage(e){this.store.dispatch(_S({payload:e}))}}yl.\u0275fac=function(e){return new(e||yl)(Ee(la))},yl.\u0275cmp=zi({type:yl,selectors:[["app-header"]],decls:35,vars:30,consts:[[1,"header_inner","container"],[1,"logo"],["target","_blank",3,"href"],["alt","",1,"max-w-[80px]",3,"src"],[1,"menu"],[1,"transition_link"],[1,"inline-block",3,"ngClass"],[3,"click"],[2,"display","flex","justify-content","center"],[2,"margin","0 20px"]],template:function(e,t){if(1&e&&(We(0,"div",0)(1,"div",1)(2,"a",2),cn(3,"img",3),ft(),zt(4,"hututusoftwares "),ft(),We(5,"div",4)(6,"ul",5)(7,"li",6),Fi(8,"async"),We(9,"span",7),ci("click",function(){return t.actionSetPage(t.pageView.HOME)}),zt(10,"Home"),ft()(),We(11,"li",6),Fi(12,"async"),We(13,"span",7),ci("click",function(){return t.actionSetPage(t.pageView.ABOUT)}),zt(14,"About"),ft()(),We(15,"li",6),Fi(16,"async"),We(17,"span",7),ci("click",function(){return t.actionSetPage(t.pageView.PORTFOLIO)}),zt(18,"Portfolio"),ft()(),We(19,"li",6),Fi(20,"async"),We(21,"span",7),ci("click",function(){return t.actionSetPage(t.pageView.NEWS)}),zt(22,"News"),ft()(),We(23,"li",6),Fi(24,"async"),We(25,"span",7),ci("click",function(){return t.actionSetPage(t.pageView.CONTACT)}),zt(26,"Contact"),ft()()()()(),We(27,"div",8)(28,"span",7),ci("click",function(){return t.decrement()}),zt(29,"-"),ft(),We(30,"span",9),zt(31),Fi(32,"async"),ft(),We(33,"span",7),ci("click",function(){return t.increment()}),zt(34,"+"),ft()()),2&e){let i,r,s,o,a,c;Ft(2),ws("href",t.baseURL,Ms),Ft(1),ws("src",t.logoURL,Ms),Ft(4),vn("ngClass",h1(20,vl,(null==(i=ki(8,8,t.state$))?null:i.page)===t.pageView.HOME)),Ft(4),vn("ngClass",h1(22,vl,(null==(r=ki(12,10,t.state$))?null:r.page)===t.pageView.ABOUT)),Ft(4),vn("ngClass",h1(24,vl,(null==(s=ki(16,12,t.state$))?null:s.page)===t.pageView.PORTFOLIO)),Ft(4),vn("ngClass",h1(26,vl,(null==(o=ki(20,14,t.state$))?null:o.page)===t.pageView.NEWS)),Ft(4),vn("ngClass",h1(28,vl,(null==(a=ki(24,16,t.state$))?null:a.page)===t.pageView.CONTACT)),Ft(8),af(null==(c=ki(32,18,t.state$))?null:c.count)}},dependencies:[sd,ld],styles:[".list-none[_ngcontent-%COMP%]{list-style-type:none}.menu[_ngcontent-%COMP%]{margin-left:auto}.menu[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{list-style:none;margin:0;padding:0}.menu[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{text-decoration:none;color:#fff;font-weight:300;cursor:pointer}.menu[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   .gradientText[_ngcontent-%COMP%]{font-weight:600}.inline-block[_ngcontent-%COMP%]{display:inline-block;padding-left:10px}.header_inner[_ngcontent-%COMP%]{top:30px;position:absolute;max-width:800px;transform:translate(-50%);left:50%;display:flex;align-items:center;z-index:100}@media (max-width: 580px){.menu[_ngcontent-%COMP%]{display:none}}"]});class _l{constructor(){this.faSkype=_h}}_l.\u0275fac=function(e){return new(e||_l)},_l.\u0275cmp=zi({type:_l,selectors:[["app-contact"]],decls:50,vars:1,consts:[["id","contact",1,"main-content"],[1,"section_inner"],[1,"edrea_tm_contact"],[1,"edrea_tm_main_title"],[1,"wrapper"],[1,"left"],[1,"list_inner"],[1,""],["href","#"],[3,"icon"],[1,"right"],[1,"fields","w-full","h-auto","clear-both","float-left"],["action","/","method","post","id","contact_form",1,"contact_form"],["data-success","Your message has been received, We will contact you soon.",1,"returnmessage"],[1,"first"],[1,"list-none","nm-container"],["id","name","type","text","placeholder","Name","autocomplete","off",1,"bg-transparent","border-none"],["id","name","type","email","placeholder","Email","autocomplete","off",1,"bg-transparent","border-none"],[1,"last","list_inner"],["id","message","placeholder","Message",1,"bg-transparent","border-none"],[1,"edrea_tm_button"],["id","send_message","href","#"]],template:function(e,t){1&e&&(We(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"h3"),zt(5,"Get in Touch"),ft()(),We(6,"div",4)(7,"div",5)(8,"ul")(9,"li")(10,"div",6),zt(11," \u{1f3e0} "),We(12,"span",7)(13,"a",8),zt(14,"11 Bajrang Nagar Indore India"),ft()()()(),We(15,"li")(16,"div",6),zt(17," \u260e "),We(18,"span",7)(19,"a",8),zt(20,"+91-942-595-9123"),ft()()()(),We(21,"li")(22,"div",6),zt(23," \u{1f4e7} "),We(24,"span",7)(25,"a",8),zt(26,"yogeshbangar@gmail.com"),ft()()()(),We(27,"li")(28,"div",6),cn(29,"fa-icon",9),We(30,"span",7)(31,"a",8),zt(32," yogeshbangar"),ft()()()()()(),We(33,"div",10)(34,"div",11)(35,"form",12),cn(36,"div",13),We(37,"div",14)(38,"ul",15)(39,"li")(40,"div",6),cn(41,"input",16),ft()(),We(42,"li",7)(43,"div",6),cn(44,"input",17),ft()()()(),We(45,"div",18),cn(46,"textarea",19),ft(),We(47,"div",20)(48,"a",21),zt(49,"Send Message"),ft()()()()()()()()()),2&e&&(Ft(29),vn("icon",t.faSkype))},dependencies:[_M],styles:[".main-content[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:center;align-items:center;height:99vh;max-width:900px;position:absolute;left:50%;transform:translate(-50%)}.main-content[_ngcontent-%COMP%]   .section_inner[_ngcontent-%COMP%]{width:100%}.main-content[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{list-style:none;margin:0;padding:0}.main-content[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{width:100%;margin-bottom:20px}.main-content[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   .list_inner[_ngcontent-%COMP%]{padding:10px;background-color:#222;border-radius:10px}.main-content[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{text-decoration:none;color:#fff;font-weight:300}.main-content[_ngcontent-%COMP%]   .wrapper[_ngcontent-%COMP%]{display:flex;flex-direction:row;padding-top:50px}.main-content[_ngcontent-%COMP%]   .edrea_tm_main_title[_ngcontent-%COMP%]{border:0;border-bottom-width:1px;border-style:dashed;border-color:#ffffff26;padding-bottom:20px}.main-content[_ngcontent-%COMP%]   .left[_ngcontent-%COMP%]{padding-right:50px;width:50%}.main-content[_ngcontent-%COMP%]   .right[_ngcontent-%COMP%]{padding-left:50px;width:50%;margin-top:20px}.main-content[_ngcontent-%COMP%]   .right[_ngcontent-%COMP%]   .nm-container[_ngcontent-%COMP%]{display:flex}.main-content[_ngcontent-%COMP%]   .right[_ngcontent-%COMP%]   .nm-container[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{width:50%;margin-right:10px}.main-content[_ngcontent-%COMP%]   .right[_ngcontent-%COMP%]   .nm-container[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:100%;border:none;color:#fff}.main-content[_ngcontent-%COMP%]   .right[_ngcontent-%COMP%]   .last[_ngcontent-%COMP%]{background:rgb(34,34,34);padding:10px;border-radius:10px;display:flex;justify-content:center;margin-right:10px}.main-content[_ngcontent-%COMP%]   .right[_ngcontent-%COMP%]   .last[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]{width:100%;color:#fff;border:none}.main-content[_ngcontent-%COMP%]   .edrea_tm_button[_ngcontent-%COMP%]{display:inline-block;border-radius:50px;background-color:#eb4a4c;padding:10px 40px;text-align:center;font-family:Poppins,sans-serif;color:#eb4a4c;margin-top:20px}.main-content[_ngcontent-%COMP%]   .edrea_tm_button[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{text-decoration:none;color:#fff}@media (max-width: 580px){.main-content[_ngcontent-%COMP%]{left:0;transform:translate(0);margin:20px}.main-content[_ngcontent-%COMP%]   .wrapper[_ngcontent-%COMP%]{flex-direction:column}.main-content[_ngcontent-%COMP%]   .left[_ngcontent-%COMP%]{padding-right:0;width:100%}.main-content[_ngcontent-%COMP%]   .right[_ngcontent-%COMP%]{padding-left:0;width:100%}}"]});class xl{constructor(){this.androidURL=ose,this.threeURL=ase,this.nodeURL=cse,this.gamesURL=lse}}function fse(n,e){if(1&n){const t=Q5();We(0,"app-home",2),ci("onChildUpdate",function(r){return T0(t),I0(M3().onUpdate(r))}),Fi(1,"async"),ft()}if(2&n){let i;vn("page",null==(i=ki(1,1,M3().state$))?null:i.page)}}function dse(n,e){1&n&&cn(0,"app-contact")}function hse(n,e){1&n&&cn(0,"app-portfolio")}xl.\u0275fac=function(e){return new(e||xl)},xl.\u0275cmp=zi({type:xl,selectors:[["app-portfolio"]],decls:5,vars:4,consts:[[1,"main-content","portfolio"],[1,"item",3,"src"]],template:function(e,t){1&e&&(We(0,"div",0),cn(1,"img",1)(2,"img",1)(3,"img",1)(4,"img",1),ft()),2&e&&(Ft(1),ws("src",t.threeURL,Ms),Ft(1),ws("src",t.nodeURL,Ms),Ft(1),ws("src",t.androidURL,Ms),Ft(1),ws("src",t.gamesURL,Ms))},styles:[".main-content[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:center;align-items:center;height:100vh;max-width:500px;max-height:500px;transform:translate(-50%,-50%);top:44%;left:50%;position:absolute;padding:20px;border-radius:10px}.portfolio[_ngcontent-%COMP%]{display:flex;flex-direction:row;flex-wrap:wrap;justify-content:center;align-content:center}.item[_ngcontent-%COMP%]{width:45%;margin:10px;height:auto;border-radius:10px}@media (max-width: 580px){.main-content[_ngcontent-%COMP%]{transform:translate(0);top:15%;left:unset;max-height:600px}.main-content[_ngcontent-%COMP%]   .item[_ngcontent-%COMP%]{width:45%;margin:1px;height:auto}}@media (orientation: landscape) and (max-height: 576px){.main-content[_ngcontent-%COMP%]{transform:translate(0);top:50px;left:unset;max-width:unset;flex-wrap:unset}.main-content[_ngcontent-%COMP%]   .item[_ngcontent-%COMP%]{width:25%;margin:1px;height:auto}}"]});class bl{constructor(e){this.pageView=M1,this.title="myAngular",this.state$=e.pipe(lh("state"))}onUpdate(e){console.log("onUpdate ~Parent~",e)}}bl.\u0275fac=function(e){return new(e||bl)(Ee(la))},bl.\u0275cmp=zi({type:bl,selectors:[["app-root"]],decls:10,vars:11,consts:[[3,"page","onChildUpdate",4,"ngIf"],[4,"ngIf"],[3,"page","onChildUpdate"]],template:function(e,t){if(1&e&&(cn(0,"app-home3-d")(1,"app-header")(2,"app-menu"),$o(3,fse,2,3,"app-home",0),Fi(4,"async"),Fi(5,"async"),$o(6,dse,1,0,"app-contact",1),Fi(7,"async"),$o(8,hse,1,0,"app-portfolio",1),Fi(9,"async")),2&e){let i,r,s;Ft(3),vn("ngIf",(null==(i=ki(4,3,t.state$))?null:i.page)===t.pageView.HOME||(null==(i=ki(5,5,t.state$))?null:i.page)===t.pageView.ABOUT),Ft(3),vn("ngIf",(null==(r=ki(7,7,t.state$))?null:r.page)===t.pageView.CONTACT),Ft(2),vn("ngIf",(null==(s=ki(9,9,t.state$))?null:s.page)===t.pageView.PORTFOLIO)}},dependencies:[od,_c,Rc,gl,yl,_l,xl,ld]});const xS={count:0,page:M1.PORTFOLIO};!function BH(n,...e){const t=new Map;for(const i of e)for(const r of i.types){const s=t.get(r);t.set(r,s?(a,c)=>i.reducer(s(a,c),c):i.reducer)}}(xS,yh(N8,n=>({...n,count:n.count+1})),yh(O8,n=>({...n,count:n.count-1})),yh(F8,n=>({...n,count:0})));class Ja{}Ja.\u0275fac=function(e){return new(e||Ja)},Ja.\u0275mod=Xi({type:Ja,bootstrap:[bl]}),Ja.\u0275inj=Li({imports:[qO,ca,dK,UH.forRoot({state:(n,e)=>{const t=n||xS;switch(e.type){case N8.type:return{...t,count:t.count+1};case O8.type:return{...t,count:t.count-1};case F8.type:return{...t,count:0};case _S.type:return console.log(e.payload),{...t,page:e.payload}}return t}},{})]}),jO().bootstrapModule(Ja).catch(n=>console.error(n))}},It=>{It(It.s=616)}]);